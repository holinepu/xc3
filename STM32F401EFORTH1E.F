\ from HT32F1656D69.f    2011.1.11       from zeptoForth-746kernel1k.f       https://github.com/holinepu/xc3
\ http://re-eject.gbadev.org/files/ThumbRefV2-beta.pdf  
\  https://sourceforge.net/projects/hexplorer/?source=typ_redirect       \ === bin2hex from Albert Lu
\ https://www.st.com/resource/en/reference_manual/rm0008-stm32f101xx-stm32f102xx-stm32f103xx-stm32f105xx-and-stm32f107xx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf
\ ' words  1C6B9B8 @  1C6B954  - +    1C6B3EC 1C6B278 -  + 
\ ************************************************************
\ *  from   D:\win32for\STM32F103EFORTH+PROG+MECRISP10B6c.F  *
\ ************************************************************
variable  zeptoForth407?           \  zeptoForth407?  on   
variable  zeptoForth746?           \  zeptoForth746?  on

variable  stm32f103mecrispForth?   \  stm32f103mecrispForth?  on
variable  stm32f401mecrispForth?   \  stm32f401mecrispForth?  on
variable  prog4004eForth?
variable  stm32f103eForth?
variable  stm32f401eForth?

cr  .( 1.  zepForth407 )
cr  .( 2.  zepForth746 )
cr  .( 3.  mecrispForth      <0~3000> included with eForth starting from 4600 )
cr  .( 4.  prog4004eForth    <0~3000> included with eForth starting from 4600 )
cr  .( 5.  stm32F401eForth  +mF       included with eForth starting from 4600 )
cr  .( 6.  stm32F103eForth   starting from 4600 )
cr  .( 7.  stm32F103eForth   starting from 4600 + MF <0~3000> + PF <20000000~ )

key
dup   '1'  =  #if  zeptoForth407?          on                       #then
dup   '2'  =  #if  zeptoForth407?          on  zeptoForth746?  on   #then
dup   '3'  =  #if  stm32f103mecrispForth?  on                       #then
dup   '4'  =  #if  prog4004eForth?         on                       #then
dup   '5'  =  #if  stm32f401mecrispForth?  on  stm32f401eForth? on  #then
dup   '6'  =  #if  stm32f103eForth?        on                       #then
      '7'  =  #if  stm32f103eForth?        on  stm32f103mecrispForth?  on  prog4004eForth?  on  #then

hex

:  enter.8n      ( -- n )     0     0   >r
     BEGIN    KEY  dup   '-'  =
       if     drop  r>   drop   -1  >r
       else   DUP  0D     =   over  20      =  or  \  space === enter
         IF     DROP  r>  if  negate  then  EXIT
         THEN   upc   base @  digit
         IF     SWAP  base @  *   +
         ELSE   DROP
         THEN
       then
     AGAIN    ;

:  base!  ( n -- )   base  !  ;

:  2tuck  ( 1 2 3 4 -- 3 4 1 2 3 4 )  2dup  2>r  2swap  2r>  ;
:  2nip   ( 1 2 3 4 -- )  2swap  2drop  ;
:  2and   ( 1 2 3 4 -- )  rot    and    >r  and  r>  ;
:  2xor   ( 1 2 3 4 -- )  xor    and    >r  xor  r>  ;
:  2or    ( 1 2 3 4 -- )  or     and    >r  or   r>  ;
: -2rot   ( 1 2 3 4 5 6 -- 3 4 5 6 1 2 )    2>r  2swap  2r>  2swap  ;

:  ----  ;  \ noop

:  00h   0  ;
:  01h   1  ;
:  02h   2  ;
:  03h   3  ;
:  04h   4  ;
:  05h   5  ;
:  06h   6  ;
:  07h   7  ;
:  08h   8  ;
:  09h   9  ;

create   another.ram.area     400  allot
:  >another.ram.area            ( cfa n -- )  4  *  another.ram.area  +  !  ;
:  EXECUTE.KEY.in.another.ram.area  ( n -- )  4  *  another.ram.area  +  @  execute  ;

:  test.do.loop  10 0 do i .  loop  ;
'  test.do.loop  1  >another.ram.area
'  test.do.loop  2  >another.ram.area
'  test.do.loop  3  >another.ram.area

variable  cfa.of.EXECUTE.KEY
variable  key.command.offset(PC)     68  key.command.offset(PC)  !

:  EXECUTE.KEY  ( n -- )   dup  ff   >
   if    ff  and  EXECUTE.KEY.in.another.ram.area
   else  4  *   cfa.of.EXECUTE.KEY  @  +   key.command.offset(PC)  @  +  @  EXECUTE
   then  ;

      '  ----  ,        \     ----'                ,     \  0
      '  ----  ,        \     dump.all             ,     \  1  ctrl A    dump.all
(     '  ----  ,     )  '     base!                ,     \  2  ctrl B    2*
(     '  ----  ,     )  '     2/                   ,     \  3  ctrl C    2/
(     '  ----  ,     )  '     dump                 ,     \  4  ctrl D    dump
(     '  ----  ,     )  '     erase                ,     \  5  ctrl E    erase
(     '  ----  ,     )  '     fill                 ,     \  6  ctrl F    fill
(     '  ----  ,     )  '     >=                   ,     \  7  ctrl G    >=
(     '  ----  ,     )  '     here                 ,     \  8  ctrl H    here
      '  ----  ,        \     ----'                ,     \  9  ctrl I
      '  ----  ,        \     ----'                ,     \ 0a  ctrl J    ctrl enter
      '  ----  ,        \     ----'                ,     \ 0b  ctrl K
(     '  ----  ,     )  '     <=                   ,     \ 0c  ctrl L    <=
      '  ----  ,        \     ----    ( CR )       ,     \ 0d  ctrl M    ENTER
(     '  ----  ,     )  '     negate               ,     \ 0e  ctrl N    negate
(     '  ----  ,     )  '    dnegate               ,     \ 0f  ctrl O    dnegate
(     '  ----  ,     )  '    dnegate ( ?????? )    ,     \ 10  ctrl P    program   \ ctrl_P  ?  12 34 #5678 90 ab cd ef 00
      '  ----  ,        \     ----'                ,     \ 11  ctrl Q
      '  ----  ,        \     ----'                ,     \ 12  ctrl R
      '  ----  ,        \     !.rom.7xx            ,     \ 13  ctrl S    !.rom.7xx   ( nL nH aL )     Store.rom.7xx
      '  ----  ,        \     test                 ,     \ 14  ctrl T
      '  ----  ,        \     ----'                ,     \ 15  ctrl U    User variable
      '  ----  ,        \     ----'                ,     \ 16  ctrl V
      '  ----  ,        \     !.rom                ,     \ 17  ctrl W    !.rom       ( nH nL aL aH -- )
      '  ----  ,        \     ----'                ,     \ 18  ctrl X
      '  ----  ,        \     ----'                ,     \ 19  ctrl Y
      '  ----  ,        \     ----'                ,     \ 1a  ctrl Z
(     '  ----  ,     )  '     quit                 ,     \ 1b  ctrl esc
      '  ----  ,        \     ----'                ,     \ 1c  ctrl \
      '  ----  ,        \     ----'                ,     \ 1d  ctrl ]
      '  ----  ,        \     ----'                ,     \ 1e
      '  ----  ,        \     ----'                ,     \ 1f
      '  ----  ,        \     ----    ( SPACE )    ,     \ 20
(     '  ----  ,     )  '     !                    ,     \ 21   !
      '  ----  ,        \     ----'                ,     \ 22   "    1 2 "
      '  ----  ,        \     ----'                ,     \ 23
      '  ----  ,        \     ----'                ,     \ 24   $
(     '  ----  ,     )  '     mod                  ,     \ 25   %
(     '  ----  ,     )  '     and                  ,     \ 26   &    r@
      '  ----  ,        \     cfa'.of.tf' @.       ,     \ 27   '    tf'
      '  ----  ,        \     >r                   ,     \ 28   (    >r
      '  ----  ,        \     r>                   ,     \ 29   )    r>
(     '  ----  ,     )  '     *                    ,     \ 2a   *    *
(     '  ----  ,     )  '     +                    ,     \ 2b   +    +
(     '  ----  ,     )  '     ,                    ,     \ 2c   ,
(     '  ----  ,     )  '     -                    ,     \ 2d   -    -
(     '  ----  ,     )  '     .                    ,     \ 2e   .    .
(     '  ----  ,     )  '     /                    ,     \ 2f   /    /
      '  00h   ,        \     ----'                ,     \ 30   0
      '  01h   ,        \     ----'                ,     \ 31   1
      '  02h   ,        \     ----'                ,     \ 32   2
      '  03h   ,        \     ----'                ,     \ 33   3
      '  04h   ,        \     ----'                ,     \ 34   4
      '  05h   ,        \     ----'                ,     \ 35   5
      '  06h   ,        \     ----'                ,     \ 36   6
      '  07h   ,        \     ----'                ,     \ 37   7
      '  08h   ,        \     ----'                ,     \ 38   8
      '  09h   ,        \     ----'                ,     \ 39   9
      '  ----  ,        \     ----'                ,     \ 3a   :
      '  ----  ,        \     ----'                ,     \ 3b   ;
(     '  ----  ,     )  '     <                    ,     \ 3c   <    <
(     '  ----  ,     )  '     =                    ,     \ 3d   =    =   ( a b -- f  )
(     '  ----  ,     )  '     >                    ,     \ 3e   >    >
(     '  ----  ,     )  '     ?                    ,     \ 3f   ?    ?   ( aL aH -- )
(     '  ----  ,     )  '     @                    ,     \ 40   @    @   ( aL aH -- nL nH )
(     '  ----  ,     )  '     abort                ,     \ 61   a
(     '  ----  ,     )  '     EXECUTE              ,     \ 42   B    branch to EXECUTE  ( aL aH -- )
(     '  ----  ,     )  '     .S                   ,     \ 43   C    content
(     '  ----  ,     )  '     ENTER.8n             ,     \ 44   D    ENTER.NUMBER.2n(tF)
(     '  ----  ,     )  '     ENTER.8n             ,     \ 45   E    ENTER.NUMBER.4n(tF)
      '  ----  ,        \     file                 ,     \ 46   F    file
(     '  ----  ,     )  '     D>                   ,     \ 47   G    >=    Greater than
      '  ----  ,        \     help                 ,     \ 48   H    help
(     '  ----  ,     )  '     2nip                 ,     \ 49   I    2nip
      '  ----  ,        \     ----'                ,     \ 4a   J
      '  ----  ,        \     ----'                ,     \ 4b   K
(     '  ----  ,     )  '     D<                   ,     \ 4c   L    <=    Lower than
(     '  ----  ,     )  '     Max                  ,     \ 4d   M    Max


(     '  ----  ,     )  '     2AND                 ,     \ 6e   N    2and
(     '  ----  ,     )  '     2OR                  ,     \ 6f   O    2or
(     '  ----  ,     )  '     2drop                ,     \ 70   P    2drop
(     '  ----  ,     )  '    -2rot                 ,     \ 71   Q   -2rot
(     '  ----  ,     )  '     2rot                 ,     \ 72   R    2rot
(     '  ----  ,     )  '     2swap                ,     \ 73   S    2swap
(     '  ----  ,     )  '     2tuck                ,     \ 74   T    2tuck
(     '  ----  ,     )  '     2dup                 ,     \ 75   U    2dup
(     '  ----  ,     )  '     2over                ,     \ 76   V    2over
(     '  ----  ,     )  '     words                ,     \ 77   W
(     '  ----  ,     )  '     2xOR                 ,     \ 78   X    2xor





      '  ----  ,        \     ----'                ,     \ 59   Y
      '  ----  ,        \     ----'                ,     \ 5a   Z
      '  ----  ,        \     c@.reg               ,     \ 5b   [    12 reg@        d12  enter    [
      '  ----  ,        \     ----'                ,     \ 5c   \
      '  ----  ,        \     c!.reg               ,     \ 5d   ]    12 34 reg!     d12  enter    d34  enter    ]
(     '  ----  ,     )  '     xor                  ,     \ 5e   ^
(     '  ----  ,     )  '     d-                   ,     \ 5f   _    d-
(     '  ----  ,     )  '     EXECUTE              ,     \ 60   `    EXECUTE   ( aL aH -- )
(     '  ----  ,     )  '     QUIT                 ,     \ 61   a
(     '  ----  ,     )  '     EXECUTE              ,     \ 62   b
(     '  ----  ,     )  '     .S                   ,     \ 63   c
(     '  ----  ,     )  '     ENTER.8n             ,     \ 64   d    ENTER.NUMBER.2n(tF)
(     '  ----  ,     )  '     ENTER.8n             ,     \ 65   e    ENTER.NUMBER.4n(tF)
      '  ----  ,        \     file                 ,     \ 66   f    current-file    sn8f27e61A123.f  --- 123
(     '  ----  ,     )  '     u>                   ,     \ 67   g    >=     greater than
      '  ----  ,        \     help                 ,     \ 48   h    help
(     '  ----  ,     )  '     nip                  ,     \ 69   i    nip
      '  ----  ,        \     ----'                ,     \ 6a   j
      '  ----  ,        \     ----'                ,     \ 6b   k
(     '  ----  ,     )  '     u<                   ,     \ 6c   l    <=     lower than
(     '  ----  ,     )  '     min                  ,     \ 6d   m    min







(     '  ----  ,     )  '     aNd                  ,     \ 4e   n    aNd
(     '  ----  ,     )  '     Or                   ,     \ 4f   o    Or
(     '  ----  ,     )  '     droP                 ,     \ 50   p    droP
(     '  ----  ,     )  '    -ROT                  ,     \ 51   q   -Rot
(     '  ----  ,     )  '     Rot                  ,     \ 52   r    Rot
(     '  ----  ,     )  '     Swap                 ,     \ 53   s    Swap
(     '  ----  ,     )  '     Tuck                 ,     \ 54   t   Tuck
(     '  ----  ,     )  '     dUp                  ,     \ 55   u    dUp
(     '  ----  ,     )  '     oVer                 ,     \ 56   v    oVer
(     '  ----  ,     )  '     words                ,     \ 57   w    words
(     '  ----  ,     )  '     xor                  ,     \ 58   x    xor







      '  ----  ,        \     *d                   ,     \ 79   y    *d        8bit*8bit=16bit
(     '  ----  ,     )  '     um*                  ,     \ 7a   z    um*      u16bit*u16bit=u32bit
      '  ----  ,        \     d*                   ,     \ 7b   {    d*       u16bit*u16bit=u16bit
(     '  ----  ,     )  '     or                   ,     \ 7c   |    
      '  ----  ,        \     d/                   ,     \ 7d   }    d/  ( 16bit 16bit -- 16bit )  ( nL nH dL dH -- qL qH )
      '  ----  ,        \     2>r                  ,     \ 7e   ~    2>r
      '  ----  ,        \     2r>                  ,     \ 7f       2r>   ctrl <-  backspace

' EXECUTE.KEY   cfa.of.EXECUTE.KEY  !

\ : pctf   BEGIN  cr  .s  KEY  EXECUTE.KEY  AGAIN  ;
\ : pf     pctf   ;

:  .ctrl_   ( n -- )   space  dup  0  1f  between  if   ."  ctrl_"   40  +  emit  else  drop  then  ;

:  .r.+ctrl_   ( i 3 -- )  over 0=  if   .r  8 spaces  else   over  >r   .r   r>  .ctrl_  then  ;

:  emit*  ( ch -- )  >r  r@  7  0d  between   r@  1c  1f  between  or  if  space  else  r@  emit  then  r>drop  ;

variable  (4?
\ variable  key.command.offset(PC)     68  key.command.offset(PC)  !

:  .id(cfa)   ( cfa -- )   .NAME  ;

:  ?y  ( x -- )  getxy  >r  drop  r>  gotoxy  ;

:  help(pctf)     ( -- )   (4?       @  >r    (4?       off            20  0
    do    cr  i        3 .r.+ctrl_         i  ?dup  0=  if  20  then
                                                   emit*  1  spaces  i         4  *  cfa.of.EXECUTE.KEY  @  +  key.command.offset(PC)  @  +  @  .id(cfa)
        23 ?y   i 20 +  3 .r  2  spaces   i  20 +  emit*  2  spaces  i  20  +  4  *  cfa.of.EXECUTE.KEY  @  +  key.command.offset(PC)  @  +  @  .id(cfa)
        41 ?y   i 40 +  3 .r  2  spaces   i  40 +  emit*  2  spaces  i  40  +  4  *  cfa.of.EXECUTE.KEY  @  +  key.command.offset(PC)  @  +  @  .id(cfa)
        5f ?y   i 60 +  3 .r  2  spaces   i  60 +  emit*  2  spaces  i  60  +  4  *  cfa.of.EXECUTE.KEY  @  +  key.command.offset(PC)  @  +  @  .id(cfa)
    loop        r>   (4?   !     cr   ;

:  >pctf  ( cfa ascii.code -- )  4  *  cfa.of.EXECUTE.KEY  @  +  key.command.offset(PC)  @  +  !  ;

'  help(pctf)  'H'  >pctf
'  help(pctf)  'h'  >pctf

:  help'''   ( -- )   help(pctf)   ;
:  hP        ( -- )   help(pctf)   ;

:  pctf   help(pctf)   BEGIN  cr  .s  KEY  EXECUTE.KEY  AGAIN  ;
:  pf     pctf   ;
\ ****************************************************************************************
\ ****************************************************************************************
\ 50 set-precision    1.0e0 fsin  f.

   hex

:  enter.8n      ( -- n)      0
   BEGIN      KEY   DUP  0D     =   over  20      =  or  \  space === enter
       IF     DROP  EXIT
       THEN   upc   base @  digit
       IF     SWAP  base @  *   +
       ELSE   DROP
       THEN
   AGAIN  ;     \  enter.8n can be replaced by ' 123456789abcdef

:  2tuck  ( 1 2 3 4 -- 3 4 1 2 3 4 )  2dup  2>r  2swap  2r>  ;
:  2nip   ( 1 2 3 4 -- )  2swap  2drop  ;

:  2xor   ( 1 2 3 4 -- 1 0 )  rot  xor  >r  xor  r>  ;  \ ^
:  2or    ( 1 2 3 4 -- 3 6 )  rot  or   >r  or   r>  ;  \ |
:  2and   ( 1 2 3 4 -- 1 0 )  rot  and  >r  and  r>  ;  \ &

:  00h   0  ;
:  01h   1  ;
:  02h   2  ;
:  03h   3  ;
:  04h   4  ;
:  05h   5  ;
:  06h   6  ;
:  07h   7  ;
:  08h   8  ;
:  09h   9  ;

               
comment:
: QUERY-INTERPRET       QUERY SPACE INTERPRET ;  ok.....

: _INTERPRET
                BEGIN   BL WORD DUP C@
                WHILE   SAVE-SRC FIND ?DUP
                        IF      STATE @ =
                                IF      COMPILE,
                                ELSE    EXECUTE ?STACK
                                THEN
                        ELSE    NUMBER NUMBER,
                        THEN    ?UNSAVE-SRC
                REPEAT  DROP ;
comment;

: '_INTERPRET       ." ' "    QUERY SPACE
                    BL WORD   
                    SAVE-SRC FIND ?DUP  0=
                        IF      cr  ." not word"   \  NUMBER NUMBER,
                        THEN    ?UNSAVE-SRC    drop
;

variable  cfa.of.EXECUTE.KEY

:  EXECUTE.KEY  ( n -- )  4  *   cfa.of.EXECUTE.KEY  @  +   34  +  @  EXECUTE  ;
      '  noop  ,        \     noop'                ,     \  ,jmp   \   0
      '  noop  ,        \     dump.all             ,     \  ,jmp   \   1  ctrl A
(     '  noop  ,     )  '     binary               ,     \  ,jmp   \   2  ctrl B
(     '  noop  ,     )  '     2/                   ,     \  ,jmp   \   3  ctrl C
(     '  noop  ,     )  '     decimal              ,     \  ,jmp   \   4  ctrl D
      '  noop  ,        \     erase.rom.700~77f    ,     \  ,jmp   \   5  ctrl E
      '  noop  ,        \     noop'                ,     \  ,jmp   \   6  ctrl F
(     '  noop  ,     )  '     >=                   ,     \  ,jmp   \   7  ctrl G
(     '  noop  ,     )  '     hex                  ,     \  ,jmp   \   8  ctrl H
(     '  noop  ,     )  '     QUERY-INTERPRET      ,     \  ,jmp   \   9  ctrl I
      '  noop  ,        \     noop'                ,     \  ,jmp   \  0a  ctrl J
      '  noop  ,        \     noop'                ,     \  ,jmp   \  0b  ctrl K
(     '  noop  ,     )  '     <=                   ,     \  ,jmp   \  0c  ctrl L
      '  noop  ,        \     noop    ( CR )       ,     \  ,jmp   \  0d  ctrl M
(     '  noop  ,     )  '     negate               ,     \  ,jmp   \  0e  ctrl N
(     '  noop  ,     )  '    dnegate               ,     \  ,jmp   \  0f  ctrl O
(     '  noop  ,     )  '    dnegate ( ?????? )    ,     \  ,jmp   \  10  ctrl P
      '  noop  ,        \     noop'                ,     \  ,jmp   \  11  ctrl Q
      '  noop  ,        \     noop'                ,     \  ,jmp   \  12  ctrl R
      '  noop  ,        \     !.rom.7xx            ,     \  ,jmp   \  13  ctrl S
      '  noop  ,        \     test                 ,     \  ,jmp   \  14  ctrl T
      '  noop  ,        \     noop'                ,     \  ,jmp   \  15  ctrl U
      '  noop  ,        \     noop'                ,     \  ,jmp   \  16  ctrl V
      '  noop  ,        \     !.rom                ,     \  ,jmp   \  17  ctrl W
      '  noop  ,        \     noop'                ,     \  ,jmp   \  18  ctrl X
      '  noop  ,        \     noop'                ,     \  ,jmp   \  19  ctrl Y
      '  noop  ,        \     noop'                ,     \  ,jmp   \  1a  ctrl Z
(     '  noop  ,     )  '     quit                 ,     \  ,jmp   \  1b  ctrl esc
      '  noop  ,        \     noop'                ,     \  ,jmp   \  1c  ctrl \
      '  noop  ,        \     noop'                ,     \  ,jmp   \  1d  ctrl ]
      '  noop  ,        \     noop'                ,     \  ,jmp   \  1e
      '  noop  ,        \     noop'                ,     \  ,jmp   \  1f
      '  noop  ,        \     noop    ( SPACE )    ,     \  ,jmp   \  20
(     '  noop  ,     )  '     !                    ,     \  ,jmp   \  21   !
      '  noop  ,        \     noop'                ,     \  ,jmp   \  22   "
      '  noop  ,        \     noop'                ,     \  ,jmp   \  23
      '  noop  ,        \     noop'                ,     \  ,jmp   \  24   $
      '  noop  ,        \     noop'                ,     \  ,jmp   \  25   %
      '  noop  ,        \     noop'                ,     \  ,jmp   \  26   &
(     '  noop  ,     )  '     '_INTERPRET          ,     \  ,jmp   \  27   '      ' name
      '  noop  ,        \     >r                   ,     \  ,jmp   \  28   (
      '  noop  ,        \     r>                   ,     \  ,jmp   \  29   )
(     '  noop  ,     )  '     *                    ,     \  ,jmp   \  2a   *
(     '  noop  ,     )  '     +                    ,     \  ,jmp   \  2b   +
      '  noop  ,        \     noop'                ,     \  ,jmp   \  2c   ,
(     '  noop  ,     )  '     -                    ,     \  ,jmp   \  2d   -
(     '  noop  ,     )  '     .                    ,     \  ,jmp   \  2e   .
(     '  noop  ,     )  '     /                    ,     \  ,jmp   \  2f   /

(     '  noop  ,     )  '     00h                  ,     \  ,jmp   \  30   0
(     '  noop  ,     )  '     01h                  ,     \  ,jmp   \  31   1
(     '  noop  ,     )  '     02h                  ,     \  ,jmp   \  32   2
(     '  noop  ,     )  '     03h                  ,     \  ,jmp   \  33   3
(     '  noop  ,     )  '     04h                  ,     \  ,jmp   \  34   4
(     '  noop  ,     )  '     05h                  ,     \  ,jmp   \  35   5
(     '  noop  ,     )  '     06h                  ,     \  ,jmp   \  36   6
(     '  noop  ,     )  '     07h                  ,     \  ,jmp   \  37   7
(     '  noop  ,     )  '     08h                  ,     \  ,jmp   \  38   8
(     '  noop  ,     )  '     09h                  ,     \  ,jmp   \  39   9
(     '  noop  ,     )  '     noop                 ,     \  ,jmp   \  3a   :
(     '  noop  ,     )  '     noop                 ,     \  ,jmp   \  3b   ;
(     '  noop  ,     )  '     <                    ,     \  ,jmp   \  3c   <    <
(     '  noop  ,     )  '     =                    ,     \  ,jmp   \  3d   =    =
(     '  noop  ,     )  '     >                    ,     \  ,jmp   \  3e   >    >
(     '  noop  ,     )  '     ?                    ,     \  ,jmp   \  3f   ?    ?

(     '  noop  ,     )  '     @                    ,     \  ,jmp   \  40   @    @
(     '  noop  ,     )  '     abort                ,     \  ,jmp   \  41   A
(     '  noop  ,     )  '     EXECUTE              ,     \  ,jmp   \  42   B
(     '  noop  ,     )  '     .S                   ,     \  ,jmp   \  43   C
(     '  noop  ,     )  '     ENTER.8n             ,     \  ,jmp   \  44   D
(     '  noop  ,     )  '     ENTER.8n             ,     \  ,jmp   \  45   E
      '  noop  ,        \     file                 ,     \  ,jmp   \  46   F
(     '  noop  ,     )  '     >=                   ,     \  ,jmp   \  47   G
      '  noop  ,        \     help                 ,     \  ,jmp   \  48   H
(     '  noop  ,     )  '     2nip                 ,     \  ,jmp   \  49   I
      '  noop  ,        \     noop'                ,     \  ,jmp   \  4a   J
      '  noop  ,        \     noop'                ,     \  ,jmp   \  4b   K
(     '  noop  ,     )  '     <=                   ,     \  ,jmp   \  4c   L
(     '  noop  ,     )  '     Max                  ,     \  ,jmp   \  4d   M
(     '  noop  ,     )  '     2AnD                 ,     \  ,jmp   \  4e   N
(     '  noop  ,     )  '     2oR                  ,     \  ,jmp   \  4f   O    2or

(     '  noop  ,     )  '     2drop                ,     \  ,jmp   \  50   P    2drop
      '  noop  ,        \    -2rot                 ,     \  ,jmp   \  51   Q   -2rot
(     '  noop  ,     )  '     2rot                 ,     \  ,jmp   \  52   R    2rot
(     '  noop  ,     )  '     2swap                ,     \  ,jmp   \  53   S    2swap
(     '  noop  ,     )  '     2tuck                ,     \  ,jmp   \  54   T    2tuck
(     '  noop  ,     )  '     2dup                 ,     \  ,jmp   \  55   U    2dup
(     '  noop  ,     )  '     2over                ,     \  ,jmp   \  56   V    2over
(     '  noop  ,     )  '     words                ,     \  ,jmp   \  57   W
(     '  noop  ,     )  '     2xOR                 ,     \  ,jmp   \  58   X    2xor
      '  noop  ,        \     noop'                ,     \  ,jmp   \  59   Y
      '  noop  ,        \     noop'                ,     \  ,jmp   \  5a   Z
      '  noop  ,        \     c@.reg               ,     \  ,jmp   \  5b   [
      '  noop  ,        \     noop'                ,     \  ,jmp   \  5c   \
      '  noop  ,        \     c!.reg               ,     \  ,jmp   \  5d   ]
      '  noop  ,        \     noop'                ,     \  ,jmp   \  5e   ^
(     '  noop  ,     )  '     d-                   ,     \  ,jmp   \  5f   _

(     '  noop  ,     )  '     EXECUTE              ,     \  ,jmp   \  60   `
(     '  noop  ,     )  '     QUIT                 ,     \  ,jmp   \  61   a
(     '  noop  ,     )  '     EXECUTE              ,     \  ,jmp   \  62   b
(     '  noop  ,     )  '     .S                   ,     \  ,jmp   \  63   c
(     '  noop  ,     )  '     ENTER.8n             ,     \  ,jmp   \  64   d
(     '  noop  ,     )  '     ENTER.8n             ,     \  ,jmp   \  65   e
      '  noop  ,        \     file                 ,     \  ,jmp   \  66   f
(     '  noop  ,     )  '     >=                   ,     \  ,jmp   \  67   g    >=     greater than
      '  noop  ,        \     help                 ,     \  ,jmp   \  48   H    help
(     '  noop  ,     )  '     nip                  ,     \  ,jmp   \  69   i    nip
      '  noop  ,        \     noop'                ,     \  ,jmp   \  6a   j
      '  noop  ,        \     noop'                ,     \  ,jmp   \  6b   k
(     '  noop  ,     )  '     <=                   ,     \  ,jmp   \  6c   l    <=     lower than
(     '  noop  ,     )  '     mIN                  ,     \  ,jmp   \  6d   m    min
(     '  noop  ,     )  '     aNd                  ,     \  ,jmp   \  6e   n    aNd
(     '  noop  ,     )  '     Or                   ,     \  ,jmp   \  6f   o    Or

(     '  noop  ,     )  '     droP                 ,     \  ,jmp   \  70   p    droP
(     '  noop  ,     )  '    -ROT                  ,     \  ,jmp   \  71   q   -Rot
(     '  noop  ,     )  '     Rot                  ,     \  ,jmp   \  72   r    Rot
(     '  noop  ,     )  '     Swap                 ,     \  ,jmp   \  73   s    Swap
(     '  noop  ,     )  '     Tuck                 ,     \  ,jmp   \  74   t   Tuck
(     '  noop  ,     )  '     dUp                  ,     \  ,jmp   \  75   u    dUp
(     '  noop  ,     )  '     oVer                 ,     \  ,jmp   \  76   v    oVer
(     '  noop  ,     )  '     words                ,     \  ,jmp   \  77   w    words
(     '  noop  ,     )  '     xor                  ,     \  ,jmp   \  78   x    xor
      '  noop  ,        \     *d                   ,     \  ,jmp   \  79   y    *d        8bit*8bit=16bit
(     '  noop  ,     )  '     um*                  ,     \  ,jmp   \  7a   z    um*      u16bit*u16bit=u32bit
      '  noop  ,        \     d*                   ,     \  ,jmp   \  7b   {    d*       u16bit*u16bit=u16bit
(     '  noop  ,     )  '     d+                   ,     \  ,jmp   \  7c   |    d+
      '  noop  ,        \     d/                   ,     \  ,jmp   \  7d   }    d/  ( 16bit 16bit -- 16bit )  ( nL nH dL dH -- qL qH )
      '  noop  ,        \     2>r                  ,     \  ,jmp   \  7e   ~    2>r
      '  noop  ,        \     2r>                  ,     \  ,jmp   \  7f       2r>   ctrl <-  backspace

' EXECUTE.KEY   cfa.of.EXECUTE.KEY  !

: pctf   BEGIN  cr  .s  KEY  EXECUTE.KEY  AGAIN  ;
: pf  pctf  ;                                                    
\ ============================================================================
\   the followings are for better looking purpose only. so it can be neglected.
\ ============================================================================
VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if     20  ' .s  79  +  c!   \  h is removed from .s   win32for 4.2.671
      ' u.r ' .s  54  +   !
#else   20  ' .s  75  +  c!   \  h is removed from .s   win32for 6.15.05
      ' u.r ' .s  50  +   !
#then

VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if
: STRING>CFA            ( ADDR$ LENGTH ... CFA -1/ 2954 0 )   \ TEMP1$   31 32 33 34 xx xx xx ....
  FIND-BUFFER  PLACE  FIND-BUFFER  ?UPPERCASE      (FIND)  ;  \          ||
#else
: STRING>CFA            ( ADDR$ LENGTH ... CFA -1/ 2954 0 )   \ TEMP1$   31 32 33 34 xx xx xx ....
  FIND-BUFFER PLACE  FIND-BUFFER  ?UPPERCASE   CAPS-FIND   ;  \ designed by Albert (FIND) ;
#then

:  emit*  ( ch -- )  dup>r  if  r@   1  1f  between  if   ." ctrl "  r@  40 +  emit  else   r@   emit   then   else  ." null  "  then  r>drop   ;

:  .id(cfa)  ( cfa -- )  >name  nfa-count  1f  and  type  ;

:  ?y  ( x -- )  getxy  >r  drop  r>  gotoxy  ;   \ getxy  nip  gotoxy  ;

:  help   ( -- )   20  0
   do     cr   i         3 .r   2  spaces    i          emit*  2  spaces   i           4  *  cfa.of.EXECUTE.KEY  @   +   34  +   @  .id(cfa)
       20 ?y   i  20 +   3 .r   2  spaces    i   20 +   emit*  2  spaces   i   20  +   4  *  cfa.of.EXECUTE.KEY  @   +   34  +   @  .id(cfa)
       40 ?y   i  40 +   3 .r   2  spaces    i   40 +   emit*  2  spaces   i   40  +   4  *  cfa.of.EXECUTE.KEY  @   +   34  +   @  .id(cfa)
       60 ?y   i  60 +   3 .r   2  spaces    i   60 +   emit*  2  spaces   i   60  +   4  *  cfa.of.EXECUTE.KEY  @   +   34  +   @  .id(cfa)
   loop     ;

:  cfa>n.in.execute.key  ( cfa n -- )  4  *   cfa.of.EXECUTE.KEY  @  +   34  +  !  ;

'  help    'h'  cfa>n.in.execute.key
'  help    'H'  cfa>n.in.execute.key

20  '  .smax  4  +  !   \  20 was 8 
( decimal ) help   depth  #if  pctf  #then
\ =======================================================================================================
comment:                                                   

\S        UM-FPU64 assembler+disassembler    2018.6.21

: `8c        ( a' -- a' op.code )     dup    8@'  ;
:  8c:gene_           :.mnem_       ." `8c"          #=if1 ."                      "  .1"  mnem" ( .wzcr )  xt0 ;
:  8c:       ( op.code -- )
   create    dup  ,   8c:gene_
   does>     @        8,'  ( all.ok?.off )  ;

: `8c        ( a' -- a' op.code )     dup    8@'  ;
:  8c:       ( op.code -- )
   create    dup  ,   :.mnem_       ." `8c"          #=if1 ."                      "  .1"  mnem" ( .wzcr )  xt0
   does>     @        8,'   ;

: `8c8#      dup 16@'  ff00  and  ;
:  8c8#:_gene         :.mnem_       ." `8c8#"        #=if2 ."             7  0  14p"  .1"  mnem" ( .wzcr )  xt0 ;
:  8c8#:
   create   dup  ,    :.mnem_       ." `8c8#"        #=if2 ."             7  0  14p"  .1"  mnem" ( .wzcr )  xt0
   does>    ( # a )   to (a)   8#*4.check  to  (#)
            (a')  @
            (#)       7  0  >?~?  +   16,'   ;

4B  8C:                ACOS          \ A=acos.A
D5  8C4X4H:            ADCLOAD,#
D4  8C2XSP4H:          ADCLONG,#
D1  8C4action4option:  ADCMODE,#
D3  8C8H:              ADCSCALE,#
D2  8C:                ADCTRIG
D6  8C:                ADCWAIT
78  8C8R8#:            ADDIND,R,#
78  8C8R8#:            addind,R,#
78  8C8R8#:            r0=R+#
0D  8C:                ALOADX
0D  8C:                ra=rx+
4A  8C:                ASIN
4C  8C:                ATAN
4D  8C:                ATAN2
comment;
\ ********************************************************************************************
\ ********************************************************************************************
:  B/W  FFFFFF       0  FGBG!  ;    B/W
:  W/B  0       FFFFFF  FGBG!  ;

variable        B/W?
:  BW  ( -- )   B/W?  @  if  0  FFFFFF  FGBG!  0  else  FFFFFF  0  FGBG!  1  then  B/W?  !  ;


decimal
comment:
************************************************************************************************
      before floading this file, we have to prepare the followings....
\ with-img fsave Win32for    <-- modifying this line to the next line. ( in extend.f line 185 )
  with-img fsave F.exe       \   thanks Cheng-Hong Chen  2010.1.1
****  methods to extend memory size  ****   \ thanks Yen-Nan Chang
win32for              \ enter win32for.4.2.671
sys                   \ enter dos
win32for  fload meta    setsize   bye    \ adding 30Meg byte to application, 2Meg byte to system
fkernel   fload extend
fsave     f.exe       \ save f.exe as a working horse. put it on the desktop.

also copy WinIo.dll, WinIo.sys, WINIO.VXD to the directory the same as Win32Forth.exe.
************************************************************************************************
comment;

base  @
        : MAXIZE.LIST  128 ( 80 )   ( 9c40 ) 40000  54 ( 36 )   XCALL DROP  ;   MAXIZE.LIST
\       : MAXIZE.LIST  128                   11858  54          XCALL DROP  ;   MAXIZE.LIST
\  hex  : MAXIZE.LIST        80       FFFF          36          XCALL DROP  ;   MAXIZE.LIST
\  HEX    4000 80 setmaxcolrow
base  !

hex

:  ?y  ( x -- )   getxy  nip  gotoxy  ;

:  u.r(decimal)   ( n1 n2 -- )  base @  >r  decimal  u.r   r>  base  !  ;







:  .immediate/compile-only  ( a n -- )
   2dup + c@  80  and  if  ."  immediate "    then
        + c@  40  and  if  ."  compile-only"  then  ;

:  _mtype(target)1 ( a1 n1 -- )  cr  2dup   ." : "        _type            38 ?y  ."  DON'T.USE  ;"                          .immediate/compile-only  ;
:  _mtype(target)2 ( a1 n1 -- )  cr  2dup   ." ' "  2dup  _type            38 ?y  ."  alias  "    _type '.' emit             .immediate/compile-only  ;
:  _mtype(target)3 ( a1 n1 -- )  cr  2dup   ." : "  2dup  _type  '.' emit  38 ?y                  _type   ."  ;"             .immediate/compile-only  ;
:  _mtype(target)4 ( a1 n1 -- )  cr  2dup   ." : "  2dup  _type  '.' emit  38 ?y  ." ['] "        _type 74 ?y  ." execute ;" .immediate/compile-only  ;  
:  _mtype(target)5 ( a1 n1 -- )  cr  2dup   ." : "  2dup  _type  '.' emit  74 ?y  ." execute ;" 38 ?y  ." ['] "      _type   .immediate/compile-only  ;

variable  mm?

:  _mtype(target)  ( -- )  mm?  @
   case   1  of   _mtype(target)1  endof
          2  of   _mtype(target)2  endof
          3  of   _mtype(target)3  endof
          4  of   _mtype(target)4  endof
          5  of   _mtype(target)5  endof
                  _mtype(target)5
   endcase   ;

: wt'
  [ '  _mtype(target) ] literal
  [ ' words  1D5B8DC  1D5B810 ( ' words ) -  +  @  ( 1D5B134 )  1D5B280  1D5B134  -  +  ( TYPE ) ] literal  !
  \ 1D5B134 <-- cfa of (words)  ' _mtype(target)   1D5B280   ( '  words  +  ????  @  +  ??? )  !
  [ '  _mtype(target) ] literal
  [ ' words  1D5B8DC  1D5B810 ( ' words ) -  +  @  ( 1D5B134 )  1D5B2A8  1D5B134  -  +  ( TYPE ) ] literal  !
  \ 1D5B134 <-- cfa of (words)  ' _mtype(target)   1D5B2A8   ( '  words  +  ????  @  +  ??? )  !
  words
  [ '  _mtype       ] literal
  [ ' words  1D5B8DC  1D5B810 ( ' words ) -  +  @  ( 1D5B134 )  1D5B280  1D5B134  -  +  ( TYPE ) ] literal  !
  \ 1D5B134 <-- cfa of (words)  ' _mtype ( 32c8 )  1D5B280   !
  [ '  _mtype       ] literal
  [ ' words  1D5B8DC  1D5B810 ( ' words ) -  +  @  ( 1D5B134 )  1D5B2A4  1D5B134  -  +  ( TYPE ) ] literal  !
  \ 1D5B134 <-- cfa of (words)  ' _mtype ( 32c8 )  1D5B2A8   !
;

: wt
  [ ' _mtype(target)  ] literal  1D5B280   !
  [ ' _mtype(target)  ] literal  1D5B2A8   !   words
  [ ' _mtype          ] literal  1D5B280   !
  [ ' _mtype          ] literal  1D5B2A8   !   ;

: wt
  ['] _mtype(target)             1D5B280   !
  ['] _mtype(target)             1D5B2A8   !   words
  ['] _mtype                     1D5B280   !
  ['] _mtype                     1D5B2A8   !   ;

:  1m     1       mm?  !  wt'  ;
:  2m     2       mm?  !  wt'  ;
:  3m     3       mm?  !  wt'  ;
:  4m     4       mm?  !  wt'  ;
:  5m     5       mm?  !  wt'  ;

\ comment;
 


  vocabulary host     host   definitions   include words_alias  \  :  dup  dup  ;  \  ' dup  alias  dup
                      forth  definitions


hex

variable  stm32f103?     stm32f103?  on
variable  303?    \  depth  1  >=  #if   drop  303?  on   #then
variable  remove.offset?                     remove.offset?  on
variable  generate.dis?                   \  generate.dis?         on
variable  generate.execute.xx?            \  generate.execute.xx?  on
variable  generate.disassembler?          \  default
variable  generate.simulator?             \  generate.simulator?   on
\ variable  cm3?                               cm3?  on
\ variable  stc?
variable  forward.link?
variable  first.lfa'         \ 61c  first.lfa'   !

variable  here'.align*n
variable        align*n
                                                                                                  61c  first.lfa'   !
variable  cfa'.of.LIT-XT        \  08001E9C  cfa'.of.LIT-XT       !

:  modify'  ( -- )  '' ( 7f )  last  @  nfa-count  drop  c!  ;
:  modify   ( -- )  last  @   nfa-count  1 =
   if    dup  c@
         case  '('  of  '' ( 7f )  swap  c!  endof
               '\'  of  '' ( 7f )  swap  c!  endof
               ':'  of  '' ( 7f )  swap  c!  endof
               ';'  of  '' ( 7f )  swap  c!  endof
               drop
         endcase
   else  drop
   then  ;   \  immediate

variable   ht32f1656?       ht32f1656?  on
variable   eForth.c?     \  eForth.c?   on

cr  .( **** press     1     for  stm32f103 mecrispForth ****)
cr  .( **** press     3     for  stm32f303 mecrispForth ****)
cr  .( **** press     4     for  esp8266 eForth.c - cht ****)
cr  .( **** press other key for  HT32F1656       eForth ****)
                                                     4  here'.align*n !   4  align*n !  \ ht32f1656 eForth
( key )    0
     dup  '1'  =  #if  forward.link?  on             2  here'.align*n !   2  align*n !  176  first.lfa'  !  ht32f1656?  off  #then
     dup  '3'  =  #if  forward.link?  on   303?  on  2  here'.align*n !   2  align*n !  5c0  first.lfa'  !  ht32f1656?  off  #then
          '4'  =  #if  eForth.c?      on                                                                    ht32f1656?  off  #then

: nfa'-lfa'  ( -- n )  forward.link?   @  if  6  exit  then  4  ;

\ : PLACE        ( addr len dest -- )
\                SWAP "CLIP" SWAP
\                2DUP 2>R
\                CHAR+ SWAP MOVE
\                2R> C! ; 
 14 ( 0e )  value  'hi'.sign.on.message.offset

' (  alias  (.
' \  alias  \.
' :  alias  :.
' ;  alias  ;.

hex
:  u.(hex)      ( n1 n2 -- )  base @  >r   hex      u.    r>  base !  ;
:   .(hex)      ( n ------ )  base @  >r   hex       .    r>  base !  ;
:  .r(hex)      ( n1 n2 -- )  base @  >r   hex       .r   r>  base !  ;  \  '  .r(hex)      is  _.r(hex)
: u.r(hex)      ( n1 n2 -- )  base @  >r   hex      u.r   r>  base !  ;

:  u.(decimal)  ( n1 n2 -- )  base @  >r   decimal  u.    r>  base !  ;
:   .(decimal)  ( n ------ )  base @  >r   decimal   .    r>  base !  ;
:  .r(decimal)  ( n1 n2 -- )  base @  >r   decimal   .r   r>  base !  ;  \  '  .r(decimal)  is  _.r(decimal)
: u.r(decimal)  ( n1 n2 -- )  base @  >r   decimal  u.r   r>  base !  ;

decimal
\ win32for 6.15.03  setup.exe with system memory 9M up, application memory 30M up, and code memory 900k.
\                                                ???                       ???                    ???
\ ********************************************************************************************
\ include  include2.f     \ It's provided by Suan Chen.
forth definitions
anew  including
variable included-files 0 included-files !
variable total.included-files
: included-append ( a n -- ) included-files @ ( a n last )    total.included-files off
  here included-files ! ( a n last ) , here ( a n here )
  over 1+ allot ( a n here ) place ;

: included-files.'  included-files     cr ."   *** courtesy of Albert Lu, Yen-nan Chang and Suan Chen***"
  begin  @ ?dup
  while     dup cell+ count cr  1 total.included-files  +!      total.included-files @     ."   ( "  2  .r(decimal)  ."  )  "  type
  repeat    total.included-files  off  ;

: included-files. cr ." inf *** courtesy of Albert Lu, Yen-nan Chang and Suan Chen --- include ***"  included-files    total.included-files off
  begin  @ ?dup
  while   ( dup )               1 total.included-files  +!
  repeat    total.included-files @   1+   >r                            included-files    total.included-files off
  begin  @ ?dup
  while     dup cell+ count cr  1 total.included-files  +!  r@  total.included-files @  -  ."   ( "  2  .r(decimal)  ."  )  "  type
  repeat    total.included-files  off   r>drop  ;

: include   bl word count cr ." \ ******* " 2dup type 2dup included-append  included ;

: inf'  included-files.' ;
: inf   included-files.  cr  ."   cur-file --> "  cur-file  count  type  cr  ;
: icf   included-files.  ;
\ ********************************************************************************************
hex














\ FROM  4TF1000.F   429-1.f   999999999999999999999.....
\ 8A  8.68us.delay.count  !  \ 50 MHz   nuc472/442   HIRC
\ variable  ice40.simulator?     ice40.simulator?  on

defer  _a'.is.within.current.word?
cr  .( ************************************************
cr  .( *  press     0  for  mecrispForth-ice40,       *
cr  .( *            1  for     swapForth-ice40,       *
cr  .( *            6  for  stm32f476,                *
cr  .( *            7  for  mpe407,                   *
cr  .( *            E  for  ESP32Forth, disassembler  *
cr  .( *            S  for  ESP32Forth, simulator     *
cr  .( *            P  for  pijForth,                 *
cr  .( *        other  for  nuc472                    *
cr  .( ************************************************

variable  mpe407?
variable  stm32f746?
variable  headless.tF(ice40)? \ headless.tF(ice40)?  on
variable  tF(ice40).only?     \ tF(ice40).only?      on

variable  mecrispForth-ice40? \ mecrispForth-ice40?  on \ : m40  mecrispForth-ice40?  dup  @  if  off  else  on  then  ;
variable  ice40?
variable  pijForth?
variable  esp32?
          
( key   UPC )    20  ( space )
                 dup  '1'  =                                     
#if              drop ice40?              on
              headless.tF(ice40)?         on             tF(ice40).only?      on
#else            dup  '0'  =
  #if            drop      ice40?         on         mecrispForth-ice40?      on
                     headless.tF(ice40)?  on             tF(ice40).only?      on
  #else          dup  '6'  =
    #if          drop      stm32f746?     on
    #else        dup  'P'  =
      #if        drop      pijForth?      on   include  ARMASM613098o.F   \s
      #else      dup  '7'  =
        #if      drop      mpe407?        on
        #else    dup  'E'  =
          #if    drop      esp32?         on
          #else       'S'  =
            #if            esp32?         on    generate.simulator?   on
            #then
          #then
        #then
      #then               \ stm32f746?  on
    #then          headless.tF(ice40)?  off            tF(ice40).only?      off
  #then
#then




variable    z80?                         \ z80?    on
depth  #if  z80?  on  #then








code arshift (  n1 shift -- n2 )  mov ecx, ebx   pop ebx   sar ebx, cl  next c;

: 4*    4  *  ;
: 2+    2  +  ;
: 3+    3  +  ;
: 4+    4  +  ;

: 2-    2  -  ;
: 3-    3  -  ;
: 4-    4  -  ;

HEX
\ variable  headless.tF(ice40)?   headless.tF(ice40)?  on
\ variable  tF(ice40).only?       tF(ice40).only?      on
variable  macro?                macro?               on   : mr  ( -- )        macro?  dup  @  if  off  else  on  then  ;
variable  same.as.eF51?         same.as.eF51?        on
variable  addr.of.LAST'(stored.at.rom)
variable  special(472tx=pb10)?        depth  #if  special(472tx=pb10)?  on  #then
variable  nuc453eF?
variable  nuc442eF?   \  cr  cr  .( press <n>     to set nuc442eF? )  key  upc  'N'    =  #if  nuc442eF? on  0  ram.offset !  #then  cr cr
variable  103mF?      \  cr  cr  .( press <space> to set 103mF? )     key  32 ( 20h )  =  #if  103mF?    on  #then  cr cr
variable  8.68us.delay.count      ( 1/115200=8.68us )
variable  addr'.to.jmp.to.cold.from.C
variable  cfa'.of.GPIO_SetMode
variable  home(1)/office(0)       0  home(1)/office(0)  !
variable  HXT(1)/HIRC(0)          0   HXT(1)/HIRC(0)    !

variable  472?     472?  on
472? @
#if \ ( 3A ) 0E8  8.68us.delay.count  !  \ 84 MHz   nuc472/442      \ ********************
              85  8.68us.delay.count  !  \ 50 MHz   nuc472/442      \ ********************  8A not good
  home(1)/office(0)  @
  #if      47A
  #else  ( 5A8 )  ( de2 )  ( dd4 )  ( 2610 ) 0ccc  ( 0e26 )  ( 9B4 ) \   0E36          \ ********************
  #then

#else    ( 0e8 )   0C8   8.68us.delay.count  !   \ 72 MHz   nuc453
  home(1)/office(0)  @
  #if    22be
  #else  2294
  #then
#then    addr'.to.jmp.to.COLD.from.C  !


variable  debug?    \  debug?  on       \ adding test points to the target

  cr cr cr .( ********* addr'.to.jmp.to.cold.from.C is )  addr'.to.jmp.to.cold.from.C  @  u.  .( ********** )
        cr .( ********* cfa'.of.GPIO_SetMode        is )  cfa'.of.GPIO_SetMode         @  u.  .( ********** )

: show.addr'.to.jmp.to.cold.from.C.and.cfa'.of.GPIO_SetMode ( -- )
  cr cr cr ." ********* addr'.to.jmp.to.cold.from.C is "  addr'.to.jmp.to.cold.from.C  @  dup  u. ."    i.e.  " u. ."  >cold ********** "
        cr ." ********* cfa'.of.GPIO_SetMode        is "  cfa'.of.GPIO_SetMode         @       u. ."                       ********** " ;

: sac   show.addr'.to.jmp.to.cold.from.C.and.cfa'.of.GPIO_SetMode ( -- )  ;

variable  ram.offset         10000   ram.offset  !

cr  cr  .( press <M999999999999999999>    to set nuc453eF? )
cr  cr  .( press <N999999999999999999>    to set nuc442eF? )
cr  cr  .( press <space>9999999999999>    to set    103mF? )
'M'  ( key ) upc  dup  'M'   =
#if       drop       nuc453eF? on  nuc442eF? on   0  ram.offset !
#else     dup  'N'   =
   #if    drop       nuc442eF? on                 0  ram.offset !
   #else  0x20       = ( space )
      #if            103mF?    on
      #then
   #then
#then    cr  cr

variable      (rp0)   20000330 ( 20000300 )  ram.offset  @  +  (rp0)  !   \ 2022.5.21
variable      (sp0)   20000230 ( 20000378 )  ram.offset  @  +  (sp0)  !
decimal

' forth   alias  forth.
: u<=     u>  not  ;
: u<=.    u>  not  ;
: u>=     u<  not  ;
: u>=.    u<  not  ;
: u/  ( n1 n2 -- n3 )  0  swap  um/mod  nip  ;

variable  429.only?
variable  4.2?
variable  6.14?
variable  demo?   \  http://stm32f4-discovery.com/2014/05/all-stm32f429-libraries-at-one-place/

variable  now.is.mF?     now.is.mF?  on

VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if    \  MINIMIZE-CONSOLE
  DECIMAL  \  include  multitask1.f







decimal

\ 4.2? @   #if

((
Subject: [up]
Date: Fri, 30 Aug 1996 06:02:30 -0400
From: BiMu@aol.com
To: zforth@ix.netcom.com

Hi Tom

I have attached a working version of the multitasker. It is all in
hilevel Forth. Of course I will optimize it. I just wanted to show you,
now.

Bee

    ---------------------------------------------------------------------
))
( eForth Multitask on Win32Forth )

\ 960903 tjz minor changes and adjustments for Win32Forth
\        renamed HAT to NEWTASK for readability
\ 960828 bee adapt to w32f33a7
\ 960811 bee adapt to w32f32
\        BRANCH is relative
\        note use of ABS>REL and REL>ABS
\        lomem \user\ --<sp --<rp himem
\        changed BUILD to ALSOTASK to avoid name conflict

ONLY FORTH ALSO DEFINITIONS

DECIMAL

\ =============================================================

.( Multitask )

: LOCAL         ( tid a -- a ) ( index another task's local variable )
                RP0 - ( address to offset )
                + ; ( offset to address )

INTERNAL

: _PASS         ( -- ) ( hilevel absolute branch )
                R> abs>rel @ rel>abs >R ;

' _PASS CONSTANT PASS

: _WAKE         ( -- ) ( restore follower )
                R> abs>rel UP!  TOS @ SP! RP! ;

' _WAKE CONSTANT WAKE

EXTERNAL

: PAUSE         ( -- ) ( allow another task to execute )
                RP@ SP@ TOS !  FOLLOWER @ rel>abs >R ;

: STOP          ( -- ) ( sleep current task )
                PASS STATUS ! PAUSE ;

: SLEEP         ( tid -- ) ( sleep another task )
                PASS SWAP STATUS LOCAL ! ;

: AWAKE         ( tid -- ) ( wake another task )
                WAKE SWAP STATUS LOCAL ! ;

: ACTIVATE      ( tid -- )
                DUP 2@                ( tid sp rp )
                R> OVER !             ( save entry at rp )
                OVER !                ( save rp at sp )
                OVER TOS LOCAL !      ( save sp in tos )
                AWAKE ;

\ =============================================================

\ Define a new task 'name', with u user area bytes, s stack byte
\ space, and r return stack space.

((
: NEWTASKSTACKALLOC ( i*n u tid -- i*n )
                SP0 @                           \ get CONUSER sp0
                SWAP SP0 LOCAL !                \ set task sp0
                CELLS SP0 @ SWAP - TOS !        \ save new CONUSER sp0,
                                                \ TOS free when task active
                DEPTH
                BEGIN   DEPTH 1 -               \ empty CONUSER stack
                WHILE   SWAP >R
                REPEAT  >R
                TOS @ DUP SP0 ! SP!             \ set CONUSER stack pointer
                R>
                BEGIN   ?DUP
                WHILE   R> SWAP 1 -             \ restore CONUSER stack
                REPEAT  ;
))

: NEWTASK       ( u s r -<name>- ) ( -- tid )
        CREATE  HERE >R  ( rp0 ) 0 , ( sp0 ) 0 ,
                ROT USERMIN + ( user area )
                ROT + ALLOT ( data  stack )  HERE  -1 DUP , , ( tracer )
                SWAP ALLOT ( return stack )  HERE  -1 DUP , , ( tracer )
                R> 2! ;

\ initialize task tid, and put it to sleep

: ALSOTASK      ( tid -- )
                DUP CONUSER = IF DROP EXIT THEN       ( not main task )
                DUP SLEEP                             ( sleep new task )
                FOLLOWER @ OVER FOLLOWER LOCAL !      ( link new task )
                STATUS LOCAL FOLLOWER ! ;             ( link old task )

: ONLYTASK      ( -- ) ( initialize main task )
                CONUSER  DUP [ FOLLOWER RP0 - ] LITERAL + UP!
                STATUS FOLLOWER !  AWAKE ;

  ONLYTASK ( initialize main task )

\ =============================================================
\ Shared resource locking

: SEMAPHORE     ( -<name>- )  CREATE 0 , ;  \ define a semaphore for resource arbitation

\ get a semaphore, locking out other tasks from using the resource
\ related to this semaphore

: SEM-GET       ( semaphore -- )
                PAUSE ( remember your manners )
                DUP @ STATUS XOR ( owner ? )
                IF BEGIN DUP @ WHILE PAUSE REPEAT ( no, wait for release )
                  STATUS SWAP ! ( lock ) EXIT
                THEN DROP ;

\ release a semaphore, allowing other tasks to access the resource
\ related to this semaphore

: SEM-RELEASE   ( semaphore -- )    DUP @ STATUS XOR IF DROP EXIT THEN  0 SWAP ! ( unlock ) ;
INTERNAL  : MULTI-KEY     ( -- c )  BEGIN PAUSE KEY? UNTIL MENUKEY ;  \  new version of key for multi-tasking
EXTERNAL  : MULTI         ( -- )    ['] MULTI-KEY IS KEY ;            \   enable multi-tasking
          : SINGLE        ( -- )    [']   MENUKEY IS KEY ;            \  disable multi-tasking
MODULE

\  =============================================================
\  Test and Example Code Follows
\  =============================================================

0 1000 CELLS 2000 CELLS NEWTASK T1    T1  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T2    T2  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T3    T3  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T4    T4  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T5    T5  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T6    T6  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T7    T7  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T8    T8  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T9    T9  ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T10   T10 ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T11   T11 ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T12   T12 ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T13   T13 ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T14   T14 ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T15   T15 ALSOTASK
0 1000 CELLS 2000 CELLS NEWTASK T16   T16 ALSOTASK


VARIABLE V1
VARIABLE V2
VARIABLE V3
VARIABLE V4
VARIABLE V5
VARIABLE V6
VARIABLE V7
VARIABLE V8
VARIABLE V9
VARIABLE V10
VARIABLE V11
VARIABLE V12
VARIABLE V13
VARIABLE V14
VARIABLE V15

VARIABLE V16



VARIABLE V1'
VARIABLE V2'
VARIABLE V3'
VARIABLE V4'
VARIABLE V5'
VARIABLE V6'
VARIABLE V7'
VARIABLE V8'
VARIABLE V9'
VARIABLE V10'
VARIABLE V11'
VARIABLE V12'
VARIABLE V13'
VARIABLE V14'
VARIABLE V15'
VARIABLE V16'

: T1GO  ( -- )    1 V1  !   T1  ACTIVATE   98765         BEGIN PAUSE 1 V1  +!   AGAIN ;
: T2GO  ( -- )    2 V2  !   T2  ACTIVATE   65432 78901   BEGIN PAUSE 1 V2  +!   AGAIN ;
: T3GO  ( -- )    3 V3  !   T3  ACTIVATE   98765         BEGIN PAUSE 1 V3  +!   AGAIN ;
: T4GO  ( -- )    4 V4  !   T4  ACTIVATE   65432 78901   BEGIN PAUSE 1 V4  +!   AGAIN ;
: T5GO  ( -- )    5 V5  !   T5  ACTIVATE   98765         BEGIN PAUSE 1 V5  +!   AGAIN ;
: T6GO  ( -- )    6 V6  !   T6  ACTIVATE   65432 78901   BEGIN PAUSE 1 V6  +!   AGAIN ;
: T7GO  ( -- )    7 V7  !   T7  ACTIVATE   98765         BEGIN PAUSE 1 V7  +!   AGAIN ;
: T8GO  ( -- )    8 V8  !   T8  ACTIVATE   65432 78901   BEGIN PAUSE 1 V8  +!   AGAIN ;
: T9GO  ( -- )    9 V9  !   T9  ACTIVATE   98765         BEGIN PAUSE 1 V9  +!   AGAIN ;
: T10GO ( -- )   10 V10 !   T10 ACTIVATE   65432 78901   BEGIN PAUSE 1 V10 +!   AGAIN ;
: T11GO ( -- )   11 V11 !   T11 ACTIVATE   98765         BEGIN PAUSE 1 V11 +!   AGAIN ;
: T12GO ( -- )   12 V12 !   T12 ACTIVATE   65432 78901   BEGIN PAUSE 1 V12 +!   AGAIN ;
: T13GO ( -- )   13 V13 !   T13 ACTIVATE   98765         BEGIN PAUSE 1 V13 +!   AGAIN ;
: T14GO ( -- )   14 V14 !   T14 ACTIVATE   65432 78901   BEGIN PAUSE 1 V14 +!   AGAIN ;
: T15GO ( -- )   15 V15 !   T15 ACTIVATE   98765         BEGIN PAUSE 1 V15 +!   AGAIN ;
: T16GO ( -- )   16 V16 !   T16 ACTIVATE   65432 78901   BEGIN PAUSE 1 V16 +!   AGAIN ;

\ : O ( -- ) V1 ? V2 ? ;
\ : P ( -- ) PAUSE O ;

DEFER  _CHECK.SECOND.CHANGE

variable  task.counter

: MULTI.TASKING     T1GO  T2GO  T3GO  T4GO  T5GO  T6GO  T7GO  T8GO  T9GO  T10GO  T11GO  T12GO  T13GO  T14GO  T15GO  T16GO
  BEGIN  PAUSE      \  _CHECK.SECOND.CHANGE
         CR  V1  @  7 .R    V2  @  7 .R    V3  @  7 .R    V4  @  7 .R
             V5  @  7 .R    V6  @  7 .R    V7  @  7 .R    V8  @  7 .R
             V9  @  7 .R    V10 @  7 .R    V11 @  7 .R    V12 @  7 .R
             V13 @  7 .R    V14 @  7 .R    V15 @  7 .R    V16 @  7 .R
         1  task.counter  +!     task.counter  @  8 u.r
         50 MS      KEY?
  UNTIL ;  \  MULTI.TASKING

\ #then








  HEX
: MAXIZE.LIST   80  8E200 ( 320000 )   36    XCALL DROP  ;   MAXIZE.LIST   \ ???????????????
: MA ( n -- )   80  swap               36    XCALL DROP  ;   ffff  ma
: MX   MAXIZE.LIST   ;                 4.2?  on
#else
   : &LOCAL  0f     ;
   : fsave   save   ;    \  ??????
   DUP-WARNING-OFF
   SYS-WARNING-OFF                 6.14?  on
#then

decimal
: emitx       drop ;       : typex     2drop  ;    : crx           ;
: emit.ok     emit ;       : type.ok    type  ;    : cr.ok     cr  ;
( etc ===  Emit  Type  Cr )
: yes.etc   [ '   emit.ok  literal ] is emit  [ '   type.ok  literal ] is type  [ ' cr.ok  literal ]  is  cr  ;
:  no.etc   [ '   emitx    literal ] is emit  [ '   typex    literal ] is type  [ ' crx    literal ]  is  cr  ;

variable  etc?
: etc     etc?  dup  @  if    yes.etc   off  else   no.etc   on  then  ;

cr    .(  press <space> for no output to console )   cr
'9'  ( key )   $20  =
#if    no.etc   \  false to SYS-WARNING?
#then

\ Propeller-Tool  run  compile-current  open-file  *.binary,*.eeprom
\ cursorFX
\ pf801.hex === propellerForth not propForth

variable  cm3asm?              cm3asm?         on
variable  stm32F407eF720R?
variable  stm32F407eF730?
variable  stm32F407eF720new?
variable  stm32F407eF720?
variable  pFth?
variable  propForth?
variable  propellerForth?
variable  tachyonForth?           \ tachyonForth?       on
variable  tachyon.Assembler?      \ tachyon.Assembler?  on

variable  eForth.start.from?        $20020000  eForth.start.from?     !
variable  8051eForth.based.addr  \  $20002000  8051eForth.based.addr  !
variable  program.to.be.saved.in.flash?
variable  doUSER.base.in.rom     \       40  in msp430eForth.base.source.code.  20002040  in 8051eForth.base.source.code.
variable  doUSER.base.in.ram     \ 20000100  in msp430eForth.base.source.code.  20002140  in 8051eForth.base.source.code.
variable  USER.variable.length   \       ??  in msp430eForth.base.source.code.  A8(54*2)  in 8051eForth.base.source.code.
variable  former.last'

variable  cfa'.of.cold.20020000
variable  cfa'.of.cold.20028000

nuc442eF?  @
#if                              $20002100   doUSER.base.in.ram   !
#else                            $20002100   doUSER.base.in.ram   !
#then
                                      $0A8  USER.variable.length  !

code 2r>drop  add ebp , # 8  next end-code
defer  _.r(decimal)

  cr  ."  ****************************************************************************************************** "
  cr  .(     F:  for stm32F407/429 based on 8051 eForth starting from FLASH memory else from RAM    F )
\ cr  .(     0:  51stm32F407.eF+tF   <--- cortex M0                                        0000000000 )
\ cr  .(     1:  51stm32F407.eF+tF + 430stm32F407.eF+tF    start up from  51stm32F407.eF   1111111111 )
\ cr  .(     3:  51stm32F407.eF+tF + 430stm32F407.eF+tF    start up from 430stm32F407.eF   3333333333 )
\ cr  .(     5:  51stm32F407.eF+tF                                                         5555555555 )
\ cr  .(     7:                      430stm32F407.eF+tF                                    7777777777 )
  cr  .(     9:  51stm32F429.eF+tF                                                         9999999999 )
\ cr
\ cr  .(  ***  N  for  stm32F407eF720New  designed by  Dr. C. H. Ting  ***                 NNNNNNNNNN )
\ cr  .(  ***  C  for  stm32F407eF720     designed by  Dr. C. H. Ting  ***                 CCCCCCCCCC )
\ cr  .(  ***  H  for  pFth  by Dave Hein                              ***                 HHHHHHHHHH )
\ cr  .(  ***  S  for  propForth Sal Sanci                             ***                 SSSSSSSSSS )
\ cr  .(  ***  P  for  propellerForth Cliff                            ***                 PPPPPPPPPP )
\ cr  .(  ***  T  for  tachyon Forth                                   ***                 TTTTTTTTTT )
  cr  ."  ****************************************************************************************************** "


cr cr  cr
cr cr  .(  ***  F  for stm32F407eForth.8051 starting from FLASH memory else from RAM *** )  cr  cr  '9'  ( key )  upc  'F'  =
#if               0   program.to.be.saved.in.flash?  !            $40  doUSER.base.in.rom    !
#else     $20020000   program.to.be.saved.in.flash?  !      $20002040  doUSER.base.in.rom    !
#then

cr cr
cr cr  .(  ***  N  for  stm32F407eF720New  designed by  Dr. C. H. Ting  only *** )  cr  cr  '9'  ( key )  upc  'N'  =
#if             stm32F407eF720new?  on
                stm32F407eF720?     on
                stm32F407eF720R?    on
#else
cr cr
cr cr  .(  ***  C  for  stm32F407eF720     designed by  Dr. C. H. Ting  only *** )  cr  cr  '9'  ( key )  upc  'C'  =
  #if        \  stm32F407eF720new?  on
                stm32F407eF720?     on
                stm32F407eF720R?    on
  #else
cr cr
cr cr  .(  ***  H  for  pFth  by Dave Hein only *** )    cr  cr  '9'  ( key )  upc  'H' =
    #if         propellerForth?      on
                tachyonForth?        on
                tachyon.Assembler?   on
                propForth?           on
                pFth?                on
    #else
cr cr
cr cr  .(  ***  S  for  propForth Sal Sanci  only *** )  cr  cr  '9'  ( key )  upc  'S' =
      #if       propellerForth?      on
                tachyonForth?        on
                tachyon.Assembler?   on
                propForth?           on
      #else
cr cr  .(  ***  P  for  propellerForth Cliff only *** )  cr  cr  '9'  ( key )  upc  'P' =
        #if     propellerForth?      on
                tachyonForth?        on
                tachyon.Assembler?   on
        #else
cr cr  .(  ***  T  for  tachyon Forth      only *** )    cr  cr  '9'  ( key )  upc  'T' =
          #if   tachyonForth?        on
          #then
cr cr  .(  ***  T  for  tachyon Assrembler only *** )    cr  cr  '9'  ( key )  upc  'T' =
          #if   tachyon.Assembler?   on
          #then
        #then
      #then
    #then
  #then
#then

:  2pi     fpi  2.0e0  f*   ;
:  sin(n)  ( n -- n )  s>d  d>f  1024e0  f/  2pi  f*  fsin  1.0e0  f+  2000e0  f*  f>d  drop  ;

\ :  1024.point.sine.table   1000  0  do   i    sin(n)   2000f000  i   +   32!'  4 +loop   ;

hex
variable  var.space     600  var.space  !

variable  mecrisp4F120?
variable  mecrisp32F407?
variable  mecrisp32F429/407?
variable  mecrisp32F429?
variable  cortex.m0?
variable  51only(5)/start.from.51(1)/start.from.430(3)?
variable  m407?

   0e2  value   0E2/18E/156|429/407/103
   18e  to      0E2/18E/156|429/407/103

cr
cr  .(      0: cortex.m0   )
cr  .(  other: cortex.m3   )
'9'  ( key )   '0'  =  cortex.m0?  !

cr
cr  .(      1:  51stm32F407.eF+tF + 430stm32F407.eF+tF       with  start up from  51stm32F407.eF )
cr  .(      3:  51stm32F407.eF+tF + 430stm32F407.eF+tF       with  start up from 430stm32F407.eF )
\   .(      4:  51stm32F407.eF+tF only                       with  start up from  51stm32F407.eF )
cr  .(      5:  51stm32F407.eF+tF only                       with  start up from  51stm32F407.eF )
\   .(      9:  stm32F429/407 mecrispForth only              with  start up from 429mecrispForth )
cr  .(  other:                      430stm32F407.eF+tF only  with  start up from 430stm32F407.eF )
'9'  ( key )    51only(5)/start.from.51(1)/start.from.430(3)?  !

cr
cr
cr  .(  ******* special dealing with stm32F429/407 mecrispForth ******* )
cr  .(      7:  stm32F407 mecrispForth only )
cr  .(      9:  stm32F429 mecrispForth only )
cr  .(  other:  normal as above selection       )
'9'  ( key ) dup          '9'  =
#if             drop  mecrisp32F429/407?  on    0e2  to  0E2/18E/156|429/407/103       429.only?  on
#else   '7'  =
   #if                mecrisp32F429/407?  on    0e2  to  0E2/18E/156|429/407/103       m407?  on
   #else
   #then
#then

variable     cfa'.of.$INTERPRET
variable     cfa'.of.accept
variable     cfa'.of.pace
variable     cfa'.of.drop
variable     cfa'.of.kTAP
variable     cfa'.of.emit
variable     cfa'.of..OK
variable     cfa'.of.?RX
variable     cfa'.of.TX!
variable     cfa'.of.EVAL
variable     cfa'.of.>R
variable     cfa'.of.$COMPILE
variable     cfa'.of.hi
variable     cfa'.of.create
variable     cfa'.of.does>
variable     cfa'.of.cold
variable     content.of.'tib
variable     cfa'.of.$INTERPRET*
variable     cfa'.of.accept*
variable     cfa'.of.pace*
variable     cfa'.of.drop*
variable     cfa'.of.kTAP*
variable     cfa'.of.emit*
variable     cfa'.of..OK*
variable     cfa'.of.?RX*
variable     cfa'.of.TX!*
variable     cfa'.of.EVAL*
variable     cfa'.of.>R*
variable     cfa'.of.$COMPILE*
variable     cfa'.of.hi*
variable     cfa'.of.create*
variable     cfa'.of.does>*
variable     cfa'.of.cold*             200053E4  cfa'.of.cold*      !  \ see eF51

variable     content.of.'tib*        nuc453eF?  #if  20007080  #else  20008080  #then  content.of.'tib*   !
                                                   \ 32k ram only
variable     last.FLOADed.souce.addr

variable     new.system.offset            0000  new.system.offset  !
variable     new.system?

:  ns0        new.system.offset  off  ;
:  ns4  4000  new.system.offset  !    ;

:  TABLE   CREATE     CELLS   ALLOT    DOES>  1-      CELLS  ;  \ 32 BITS   ???????????
: DTABLE   CREATE  2* CELLS   ALLOT    DOES>  1-  2*  CELLS  ;  \ 64 BITS   ???????????

:  TABLE   CREATE     CELLS   ALLOT    DOES>  SWAP  DUP 0< ABORT" *** negative number is unallowed ***"     CELLS  +  ;  \ 32 BITS
: DTABLE   CREATE  2* CELLS   ALLOT    DOES>  SWAP  DUP 0< ABORT" *** negative number is unallowed ***" 2*  CELLS  +  ;  \ 64 BITS

decimal

\  include  infix1.f
(( (*
 * LANGUAGE    : ANS Forth
 * PROJECT     : Forth Environments
 * DESCRIPTION : infix parser (for a desk calculator?)
 * CATEGORY    : Example
 * AUTHOR      : Chuck Moore, 1981 Forml Proc. Vol. 2
 * LAST CHANGE : February 17th, 2002 - 18:11, Jos v.d.Ven
 * Changed it for Win32Forth.
 * Made the the floating point mode active.
 * Added: ^ NEG LOG LOG SIN COS TAN ABS 1/ INT SQR DEGREES FRAD
 * Added calculations about intrest in an example.
*)

   (* ****************************************** *)
   (*                                            *)
   (*   O W B R O 'C O N Y   A N G I E L S K I   *)
   (*                                            *)
   (* FC: Chuck Moore, 1981 Forml Proc. Vol. 2   *)
   (*   Title is Polish for "Reverse English"    *)
   (*                                            *)
   (* ****************************************** *)


  ONLY  FORTH ALSO  DEFINITIONS DECIMAL

      REVISION -infix "--- Infix notation      Version 1.03 ---"

DOC Examples
---
(*
  A[ A + B - C * ( D / A ) ]A

 or: : EXPR A[ A + B - C * ( D / A ) ]A ;

 Note that optimizer actions ARE NOT frustated by this scheme!

 Very nice: Within A[ .. ]A the search order is ALGEBRAIC, then
 context. After ]A, ALGEBRAIC is automatically switched out.

 The expression becomes unreadable when we are not working with
 VALUE's, CONSTANT's, VARIABLE's or immediate numbers.
*)
ENDDOC ))

  ONLY  FORTH ALSO  DEFINITIONS DECIMAL

' constant alias =:

10 =: maxlevels  -- nestings per expression

CREATE operations
 maxlevels 1+ 2 CELLS * ALLOT -- operations stack, position 0 = ptr

: ?INTERPRET STATE @ IF     COMPILE, \ <exec token> --- <?>
                     ELSE   EXECUTE
                     ENDIF  ;

: 'pair  operations DUP @ + ;    \ <> --- <addr of level:index>

: ?opsp  operations @ DUP
  0< SWAP
  [ maxlevels 2 CELLS * ] LITERAL
  U> OR ABORT" Expression too complex." ;

: >ops    ?opsp    2 CELLS operations +!   'pair 2! ;    \ <exec token> <level> --- <>
: ops>    ?opsp    'pair 2@   2 CELLS NEGATE operations +!   DROP ?INTERPRET ;

: LEVEL?  'pair @ ; \ <> --- <level>

: ]A  BEGIN LEVEL?
      WHILE ops>
      REPEAT
     \IN-SYSTEM-OK PREVIOUS ; IMMEDIATE

: INFIX  '         \ <level> INFIX #<n1># #<n2>#
  CREATE SWAP , , IMMEDIATE
  DOES> 2@
     BEGIN  DUP LEVEL? U> 0=
     WHILE  2>R ops> 2R>
     REPEAT
     >ops ;

true value degrees
: frad   ( fs: deg - rad )   fpi f* 180 s>f f/  ;
: sin    ( fs: angle - sin ) degrees    if    frad    then    fsin   ;
: tan    ( fs: angle - tan ) degrees    if    frad    then    ftan   ;
: cos    ( fs: angle - cos ) degrees    if    frad    then    fcos   ;
: 1/     ( fs: x - 1/x )     1e fswap f/ ;

' floor alias int
' fpi   alias pi

 VOCABULARY ALGEBRAIC  ALGEBRAIC DEFINITIONS  ALSO FORTH

WARNING @ temp$ ! WARNING OFF

-- Redefine every operation which must be "infixable" in ALGEBRAIC.

TRUE
[IF]
 9 INFIX FNEGATE NEG  9 INFIX FLOG LOG
 9 INFIX FLOG    LOG  9 INFIX SIN SIN
 9 INFIX COS     COS  9 INFIX TAN TAN
 9 INFIX FABS    ABS  9 INFIX 1/ 1/
 9 INFIX FLOOR   INT  9 INFIX FSQRT SQR

 8 INFIX F** ^
 7 INFIX F*  *        7 INFIX F/  /
 6 INFIX F+  +        6 INFIX F-  -
 5 INFIX F>  >        5 INFIX F<  <
 5 INFIX F=  =
[ELSE]
 8 INFIX NEGATE NEG
 7 INFIX * *          7 INFIX /  /
 6 INFIX + +          6 INFIX -  -
 5 INFIX > >          5 INFIX <  <
 5 INFIX = =

[THEN]

temp$ @ WARNING !

: NO-OP ;

: ( ['] NO-OP  1  >ops ; IMMEDIATE


: ) BEGIN 1 LEVEL? <
    WHILE ops>
    REPEAT
    1 LEVEL? = IF 2 CELLS NEGATE operations +!
             ELSE TRUE ABORT" Missing `('"
            ENDIF ; IMMEDIATE

FORTH DEFINITIONS

: A[ 0 operations ! \IN-SYSTEM-OK ALSO \IN-SYSTEM-OK ALGEBRAIC ; IMMEDIATE


B/FLOAT 10 <
[if]
cr
cr .( B/FLOAT is only )  B/FLOAT . .( change it to 10 for more accurate results.)
cr .( To change this, you just need to edit the EXTEND.F file.)
cr .( 8 constant B/FLOAT    into    10 constant B/FLOAT )
cr .( Then recompile Win32Forth. Use  Make Win32Forth )
cr
[then]     (* End of Source *)

\ \s Remove or disable this line for the example

0e fvalue pv         \ Present value
0e fvalue intrest    \ For each perod
0e fvalue n          \ Number of periods on which intrest is added to pv
0e fvalue fv         \ Future value

\ Suppose a PV: $1,000,000, intrest:2,5%,  30 days.

1000000e fto pv
2.5e     fto intrest
30e      fto n

: pmt? A[  pv *  intrest * n /  36000e ]A ;
cr
cr .( Payment for $1,000,000, intrest:2,5%, after 30 days is: ) pmt? f.
cr

\ Let us suppose a PV: $1,000,000,  intrest:2,5%, 24 year.
\ Calculate the future value:
\ Formula:
\ FV=P(1+i)n = 1000000 (1+0.025)24 = 1.808.725,95

24e      fto n
: fv?   A[  pv * ( 1e +  intrest / 100e )  ^ n   ]A ;

cr .( The future value for $1,000,000, intrest:2,5% after 24 years is: )
   FV? fdup f. fto fv

: pv?  A[  fv / ( 1e +  intrest / 100e ) ^ n   ]A  ;

cr    .( The caluculated PV was ) pv? f.
cr cr .( Here is the compiled formula: )
cr
see pv?



































nuc442eF?  @
#if
#else
  include  LM4F120IO3.F
#then































\ include  winser115200c.f

\ WINSER.F           A Simple Serial Communications Program
\ Written by Andrew McKewan in Visual C++
\ Translated to Forth by Tom Zimmer
\ January 3nd, 1997 tjz
\       Updated to include changes from Skip Inskeep, as well as
\       other changes.
\ February 10th, 1997 by Tom Zimmer
\       Updated with a couple of additional changes from Skip Inskeep.

\ A Win32Forth example program that illustrates how to open COM1 for
\ bi-directional communications and then allows a simple terminal
\ program to communicate with whatever is connected at 9600 baud.

\ define the object for the Device Control Block structure

:Object DCB        <Super Object

Record: AddrOf
        int   DCBlength
        int   BaudRate
        int   BinaryBits                \ a 32bit cell of bit fields
      1 bits  fBinary                   \ define the bit fields
      1 bits  fParity
      1 bits  fOutxCtsFlow
      1 bits  fOutxDsrFlow             \ SDI changed for Rts to Dsr
      2 bits  fDtrControl
      1 bits  fDtrSensitivity
      1 bits  fTXContinueOnXoff
      1 bits  fOutX
      1 bits  fInx
      1 bits  fErrorChar
      1 bits  fNull
      2 bits  fRtsControl
      1 bits  fAbortOnError
     17 bits  fDummy
        short wReserved
        short XonLim
        short XoffLim
        byte  ByteSize
        byte  Parity
        byte  StopBits
        byte  XonChar
        byte  XoffChar
        byte  ErrorChar
        byte  EofChar
        byte  EvtChar
        short wReserved1
;RecordSize: SIZEOFDCB

:M Reset:       ( -- )
                AddrOf SIZEOFDCB erase
                ;M

:M ClassInit:   ( -- )
                ClassInit: super
                Reset: self             \ create structure as Reset
                ;M

;Object

\ define the field names for the Communications Timeout structure

0       CELL Field+ .ReadIntervalTimeout     nostack
        CELL Field+ .ReadTotalTimeoutMultiplier
        CELL Field+ .ReadTotalTimeoutConstant
        CELL Field+ .WriteTotalTimeoutMultiplier
        CELL Field+ .WriteTotalTimeoutConstant
CONSTANT COMMTIMEOUTSBYTES        nostack1


: ComTimeouts   { cHndl \ CT -- }      \ Initialize the communications timeouts
                COMMTIMEOUTSBYTES LocalAlloc: CT    \ allocate a CT structure
                CT COMMTIMEOUTSBYTES erase          \ initialize it to zeros
        \ set read timeouts to magic value of don't wait, just poll
                -1 CT .ReadIntervalTimeout          !
                 0 CT .ReadTotalTimeoutMultiplier   !
                 0 CT .ReadTotalTimeoutConstant     !
                 1 CT .WriteTotalTimeoutMultiplier  !
                20 CT .WriteTotalTimeoutConstant    !
                CT
                cHndl
                Call SetCommTimeouts drop ;

: ComOpen       ( z1 -- cHndl ) \ Open Com port for z" COM1", or z" COM2" etc. If port is higher than 9 then it
                \ must be in the form z" \\.\COM10" to work correctly.
                >R
                NULL                            \ no template
                NULL                            \ open file attributes
                OPEN_EXISTING                   \ creation distribution
                NULL                            \ no security attributes
                0                               \ exclusive access
                GENERIC_READ GENERIC_WRITE or   \ desired access modes
                R>                              \ zstring filename
                Call CreateFile                 \ returns handle or -1
                dup -1 =                        \ if -1 then error
                Abort" Failed to open COM port!"
                ;                               \ -- chndl ;return handle to port

\ ************************************************************
\ here is a list of valid parameters for ComSetup.  Except for
\ the ByteSize parameter, these are all windows constants.

\ --- BuadRate    CBR_110       CBR_300       CBR_600
\                 CBR_1200      CBR_2400      CBR_4800
\                 CBR_9600      CBR_14400     CBR_56000
\                 CBR_19200     CBR_38400     CBR_57600
\                 CBR_115200    CBR_128000    CBR_256000
\
\ --- ByteSize    5, 6, 7, 8
\
\ --- Parity      NOPARITY      ODDPARITY     MARKPARITY
\                 EVENPARITY    SPACEPARITY
\
\ --- StopBits    ONESTOPBIT    TWOSTOPBITS   ONE5STOPBITS
\
\ ************************************************************

\ Setup the Communications state to the parameters specified

: ComSetup      { baud size parity stop cHndl -- }
                DCB.AddrOf
                cHndl
                Call GetCommState ?win-error

                baud       Put: DCB.BaudRate
                size       Put: DCB.ByteSize
                parity 0<> Put: DCB.fParity             \ parity enabled flag
                parity     Put: DCB.Parity
                stop       Put: DCB.StopBits

                DCB.AddrOf
                cHndl
                Call SetCommState ?win-error ;

: ComClose      ( cHndl -- )    \ close com port if its open
                ?dup
                if      Call CloseHandle drop
                then    ;

:Object COMSTAT        <Super Object

Record: AddrOf
        int   lpComStatBits             \ a 32bit cell of bit fields
      1 bits  fCtsHold                  \ define the bit fields Low to High
      1 bits  fDsrHold
      1 bits  fRlsdHold
      1 bits  fXoffHold
      1 bits  fXoffSent
      1 bits  fEof
      1 bits  fTxim
     25 bits  fReserved
        int   cbInQue
        int   cbOutQue
;RecordSize: SIZEOFCOMSTAT

:M Reset:       ( -- )
                AddrOf SIZEOFCOMSTAT erase
                ;M

:M ClassInit:   ( -- )
                ClassInit: super
                Reset: self             \ create structure as Reset
                ;M

;Object

: ComErrorClear { comhndl \ lpErrors -- f }      \ true = success
                COMSTAT.addrof
                lpErrors
                comhndl Call ClearCommError 0<>  ;

\ Example: Simple terminal program
\ ----------------------------------------------------------------------------------
0  value Com1Hndl
variable Com1key-val            \ a place to save last key received
0  value Com1key-flg?           \ have we already got a key?

: Com1key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com1key-flg? 0=
                if      Com1key-val 1 Com1Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com1key-flg?
                then    Com1key-flg? ;

: Com1key       ( -- c1 )       \ must return a key
                begin   Com1key?                \ loop till we get one
                until
                Com1key-val c@                  \ return the key
                0 to Com1key-flg? ;             \ clear the save buffer

: Com1emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com1Hndl write-file
                abort" Failed to write serial port" ;

: do-Com1key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com1Hndl ComClose       \ close the com port
                        0 to Com1Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com1emit          FALSE \ else emit char and continue
                then    ;

: Com1talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM1: baud=115200 parity=N data=8 stop=1"
                z" COM1" ComOpen to com1Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com1Hndl ComSetup
                com1Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com1key ?EXIT
                        then
                        Com1key?
                        if      Com1key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ ------------------------------------------------------------------------------------------
0  value Com2Hndl
variable Com2key-val            \ a place to save last key received
0  value Com2key-flg?           \ have we already got a key?

: Com2key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com2key-flg? 0=
                if      Com2key-val 1 Com2Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com2key-flg?
                then    Com2key-flg? ;

: Com2key       ( -- c1 )       \ must return a key
                begin   Com2key?                \ loop till we get one
                until
                Com2key-val c@                  \ return the key
                0 to Com2key-flg? ;             \ clear the save buffer

: Com2emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com2Hndl write-file
                abort" Failed to write serial port" ;

: do-Com2key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com2Hndl ComClose       \ close the com port
                        0 to Com2Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com2emit          FALSE \ else emit char and continue
                then    ;

: Com2talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM2: baud=115200 parity=N data=8 stop=1"
                z" COM2" ComOpen to com2Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com2Hndl ComSetup
                com2Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com2key ?EXIT
                        then
                        Com2key?
                        if      Com2key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ ---------------------------------------------------------------------------------------
0  value Com3Hndl
variable Com3key-val            \ a place to save last key received
0  value Com3key-flg?           \ have we already got a key?

: Com3key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com3key-flg? 0=
                if      Com3key-val 1 Com3Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com3key-flg?
                then    Com3key-flg? ;

: Com3key       ( -- c1 )       \ must return a key
                begin   Com3key?                \ loop till we get one
                until
                Com3key-val c@                  \ return the key
                0 to Com3key-flg? ;             \ clear the save buffer

: Com3emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com3Hndl write-file
                abort" Failed to write serial port" ;

: do-Com3key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com3Hndl ComClose       \ close the com port
                        0 to Com3Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com3emit          FALSE \ else emit char and continue
                then    ;

: Com3talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM3: baud=115200 parity=N data=8 stop=1"
                z" COM3" ComOpen to com3Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com3Hndl ComSetup
                com3Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com3key ?EXIT
                        then
                        Com3key?
                        if      Com3key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ --------------------------------------------------------------------------------------
0  value Com4Hndl
variable Com4key-val            \ a place to save last key received
0  value Com4key-flg?           \ have we already got a key?

: Com4key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com4key-flg? 0=
                if      Com4key-val 1 Com4Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com4key-flg?
                then    Com4key-flg? ;

: Com4key       ( -- c1 )       \ must return a key
                begin   Com4key?                \ loop till we get one
                until
                Com4key-val c@                  \ return the key
                0 to Com4key-flg? ;             \ clear the save buffer

: Com4emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com4Hndl write-file
                abort" Failed to write serial port" ;

: do-Com4key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com4Hndl ComClose       \ close the com port
                        0 to Com4Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com4emit          FALSE \ else emit char and continue
                then    ;

: Com4talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM4: baud=115200 parity=N data=8 stop=1"
                z" COM4" ComOpen to com4Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com4Hndl ComSetup
                com4Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com4key ?EXIT
                        then
                        Com4key?
                        if      Com4key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ ---------------------------------------------------------------------------------------
0  value Com5Hndl
variable Com5key-val            \ a place to save last key received
0  value Com5key-flg?           \ have we already got a key?

: Com5key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com5key-flg? 0=
                if      Com5key-val 1 Com5Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com5key-flg?
                then    Com5key-flg? ;

: Com5key       ( -- c1 )       \ must return a key
                begin   Com5key?                \ loop till we get one
                until
                Com5key-val c@                  \ return the key
                0 to Com5key-flg? ;             \ clear the save buffer

: Com5emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com5Hndl write-file
                abort" Failed to write serial port" ;

: do-Com5key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com5Hndl ComClose       \ close the com port
                        0 to Com5Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com5emit          FALSE \ else emit char and continue
                then    ;

: Com5talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM5: baud=115200 parity=N data=8 stop=1"
                z" COM5" ComOpen to com5Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com5Hndl ComSetup
                com5Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com5key ?EXIT
                        then
                        Com5key?
                        if      Com5key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ ---------------------------------------------------------------------------------------
0  value Com6Hndl
variable Com6key-val            \ a place to save last key received
0  value Com6key-flg?           \ have we already got a key?

: Com6key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com6key-flg? 0=
                if      Com6key-val 1 Com6Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com6key-flg?
                then    Com6key-flg? ;

: Com6key       ( -- c1 )       \ must return a key
                begin   Com6key?                \ loop till we get one
                until
                Com6key-val c@                  \ return the key
                0 to Com6key-flg? ;             \ clear the save buffer

: Com6emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com6Hndl write-file
                abort" Failed to write serial port" ;

: do-Com6key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com6Hndl ComClose       \ close the com port
                        0 to Com6Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com6emit          FALSE \ else emit char and continue
                then    ;

: Com6talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM6: baud=115200 parity=N data=8 stop=1"
                z" COM6" ComOpen to com6Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com6Hndl ComSetup
                com6Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com6key ?EXIT
                        then
                        Com6key?
                        if      Com6key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ -------------------------------------------------------------------------------------
0  value Com7Hndl
variable Com7key-val            \ a place to save last key received
0  value Com7key-flg?           \ have we already got a key?

: Com7key?      ( -- c1 )       \ get a key from serial port, don't wait long
                Com7key-flg? 0=
                if      Com7key-val 1 Com7Hndl read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        to Com7key-flg?
                then    Com7key-flg? ;

: Com7key       ( -- c1 )       \ must return a key
                begin   Com7key?                \ loop till we get one
                until
                Com7key-val c@                  \ return the key
                0 to Com7key-flg? ;             \ clear the save buffer

: Com7emit      { charin -- }     \ write a character to the serial port
                &OF charin 1 Com7Hndl write-file
                abort" Failed to write serial port" ;

: do-Com7key    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                     \ was ESC pressed?
                if      drop                    \ if so, discard c1 and shut down
                        Com7Hndl ComClose       \ close the com port
                        0 to Com7Hndl           \ clear handle value
                        ." Done"          TRUE  \ return TRUE, we are terminating
                else    Com7emit          FALSE \ else emit char and continue
                then    ;

: Com7talk      ( -- )          \ simple terminal talker to the serial port
                cr ." Initializing Serial Port to: "
                cr ." COM7: baud=115200 parity=N data=8 stop=1"
                z" COM7" ComOpen to com7Hndl
                    Reset: DCB
                FALSE Put: DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_115200 8 NOPARITY ONESTOPBIT com7Hndl ComSetup
                com7Hndl ComTimeouts
                cr ." Press ESC to stop talking." cr
                BEGIN   key?
                        if      key do-Com7key ?EXIT
                        then
                        Com7key?
                        if      Com7key    dup 13 =  if   drop  cr  else  emit  then
                        then
                AGAIN ;
\ ----------------------------------------------------------------------------------------
hex
   variable         stack.display?.
:  stack.display.   stack.display?.  on  ;
:  sd.              stack.display.       ;
: normal.display.   stack.display?. off  ;
:  nd.             normal.display.       ;
:  show.stack.      stack.display?. dup  @   if   off   exit  then  on   ;
:  ss.             show.stack.           ;
 
4.2?  @
#if
: _QUIT.new     ( -- )
                RP0 @ RP!
                BEGIN   [COMPILE] [    ?LOADING OFF
                        BEGIN   CR ['] QUERY-INTERPRET CATCH  ?DUP 0=
                        WHILE   STATE @ 0=
                                IF      ."  ok"     hex   \ 2013/11/21
                                   stack.display?.  @
                                   if \ cr   ['] u.r  ['] .r   767c  7628  -  +  !  .s
                                       ."  ( "  depth  .  ." ) "
                                              DEPTH .SMAX @ MIN  0
                                       ?do    DEPTH .SMAX @ MIN  i - 1-  pick   u.  loop
                                   else      [']  .r  ['] .r   767c  7628  -  +  !
                                               DEPTH .SMAX @ MIN  0
                                        ?DO  [CHAR] . EMIT  LOOP
                                   then
                                THEN
                        REPEAT
                        CONSOLE         \ select the forth console
                        DUP 1+          \ no message on abort
                        IF      MESSAGE
                        THEN
                        RESET-STACKS   hex   \ reset the stacks   \ 2013/11/21
                AGAIN ;

: _QUIT.new1     ( -- )
                RP0 @ RP!
                BEGIN   [COMPILE] [    ?LOADING OFF
                        BEGIN   CR ['] QUERY-INTERPRET CATCH  ?DUP 0=
                        WHILE   STATE @ 0=
                                IF      ."  ok"     hex   \ 2013/11/21
                                   stack.display?.  @
                                   if   cr   ['] u.r  ['] .r   767c  7628  -  +  !  .s
                                      \ ."  ( "  depth  .  ." ) "
                                      \        DEPTH .SMAX @ MIN  0
                                      \ ?do    DEPTH .SMAX @ MIN  i - 1-  pick   u.  loop
                                   else      [']  .r  ['] .r   767c  7628  -  +  !
                                               DEPTH .SMAX @ MIN  0
                                        ?DO  [CHAR] . EMIT  LOOP
                                   then
                                THEN
                        REPEAT
                        CONSOLE         \ select the forth console
                        DUP 1+          \ no message on abort
                        IF      MESSAGE
                        THEN
                        RESET-STACKS   hex   \ reset the stacks   \ 2013/11/21
                AGAIN ;
#then
\ --------------------------------------------------------------------------------------
6.14?  @
#if
: _QUIT.new     ( -- )
                RP0 @ RP!
                BEGIN   [COMPILE] [
                        BEGIN   CR ['] QUERY-INTERPRET CATCH  ?DUP 0=
                        WHILE   STATE @ 0=
                                IF      ."  ok"     hex   \ 2013/11/21
                                   stack.display?.  @
                                   if \ cr   ['] u.r  ['] .r   767c  7628  -  +  !  .s
                                       ."  ( "  depth  .  ." ) "
                                              DEPTH .SMAX @ MIN  0
                                       ?do    DEPTH .SMAX @ MIN  i - 1-  pick   u.  loop
                                   else      [']  .r  ['] .r   767c  7628  -  +  !
                                               DEPTH .SMAX @ MIN  0
                                        ?DO  [CHAR] . EMIT  LOOP
                                   then
                                THEN
                        REPEAT
                        CONSOLE         \ select the forth console
                        DUP 1+          \ no message on abort
                        IF      MESSAGE
                        THEN
                        RESET-STACKS   hex   \ reset the stacks   \ 2013/11/21
                AGAIN ;

: _QUIT.new1     ( -- )
                RP0 @ RP!
                BEGIN   [COMPILE] [
                        BEGIN   CR ['] QUERY-INTERPRET CATCH  ?DUP 0=
                        WHILE   STATE @ 0=
                                IF      ."  ok"     hex   \ 2013/11/21
                                   stack.display?.  @
                                   if   cr   ['] u.r  ['] .r   767c  7628  -  +  !  .s
                                      \ ."  ( "  depth  .  ." ) "
                                      \        DEPTH .SMAX @ MIN  0
                                      \ ?do    DEPTH .SMAX @ MIN  i - 1-  pick   u.  loop
                                   else      [']  .r  ['] .r   767c  7628  -  +  !
                                               DEPTH .SMAX @ MIN  0
                                        ?DO  [CHAR] . EMIT  LOOP
                                   then
                                THEN
                        REPEAT
                        CONSOLE         \ select the forth console
                        DUP 1+          \ no message on abort
                        IF      MESSAGE
                        THEN
                        RESET-STACKS   hex   \ reset the stacks   \ 2013/11/21
                AGAIN ;
#then
\ -------------------------------------------------------------------------------------
\ Connection of a Forth target with a Forth host <-- worth reading
\ http://www.complang.tuwien.ac.at/anton/euroforth/ef12/papers/proceedings.pdf

variable  stm32f407.sF?             \ stm32f407.sF?         on
variable  stellaris.launchpad?      \ stellaris.launchpad?  on

\ cr  cr  .(    ********  key in 1 for selecting stellaris.launchpad  else  stm32f407 ********)
\ key  '1'  =  #if   stellaris.launchpad?  #else   stm32f407.sF?  then  on
comment:
************************************************************************************************
      before floading this file, we have to prepare the followings....
\ with-img fsave Win32for    <-- modifying this line to the next line. ( in extend.f line 185 )
  with-img fsave F.exe       \   thanks Cheng-Hong Chen  2010.1.1
****  methods to extend memory size  ****
  win32for              \ enter win32for.4.2.671
  sys                   \ enter dos
  win32for  fload meta    setsize   bye    \ adding 9Meg byte to application, 9Meg byte to system
  fkernel   fload extend
\ fsave     f.exe       \ save f.exe as a working horse. put it on the desktop.

also copy WinIo.dll, WinIo.sys, WINIO.VXD to the directory the same as Win32Forth.exe.
************************************************************************************************
comment;

comment: 430EFORTHAL03A152K.F --> 4tF1.f  cortex m4 tF developmwent system  shink to 6000 line from  4tf35.f
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
       .list
       .title "msp430 eForth 1.0"
       .cdecls C,LIST,"msp430g2553.h"  ; Include device header file
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; 7/7/2012 430eForth1.0, from eForth86.asm and 430uForth
;
; 7/4/2012 Move 430uForth2.1 from IAR to CCS 5.2
; 430eForth2.2
;
; Build for and verified on MSP430G2 LaunchPad from TI
; Assembled with IAR Embedded Workbench IDE
; Only the following FORTH commands are visible to the user:
;   + - ! @ C! C@ DUP DROP SWAP OVER AND OR XOR
;   . CR TYPE EXECUTE EXIT RED GREEN OFF
; Numbers are unsigned 16-bit integers in hexadecimal only.
; A software UART is implemented.  TXD on P1.1.  RXD on P1.2.
;   On power-up, press "B" or "b" to set baud rate.
;   Set terminal baud rate to 2400 baud.  Not stable at higher rates.
;   Do not disturb TXD and RXD, else the UART will not talk.
;
; Try:
;   RED       turn on red LED
;   GREEN     turn on green LED
;   OFF       turn off both LEDs
;   20 C@     read P1 inputs.  Press S2 switch to see the effects.
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; Subroutine Thread Model of eForth
; Only the interpreterr is implemented due to memory limitation.
; Return stack pointer is SP, TOS is R4, and data stack pointer is R5.
; Variables TEMP, CONTEXT, #TIB, >IN and DP are in CPU registers
; R14 and R15 are used by the software UART, for baud rate control.
; It works on MSP430G2231, but may work on other 430 chips.
; The only peripheral used in P1 GPIO port.
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; Inspired by the tinyForth by Taiwan FIG Chapter
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
comment;

comment:
--------------------------- LICENSE TERMS ------------------------------
CamelForth for the Texas Instruments MSP430
(c) 2009 Bradford J. Rodriguez.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

Commercial inquiries should be directed to the author at
115 First St., #105, Collingwood, Ontario L9Y 4W3 Canada
or via email to bj@camelforth.com
------------------------------------------------------------------------
@
@    Mecrisp-Stellaris - A native code Forth implementation for ARM-Cortex M microcontrollers
@    Copyright (C) 2013  Matthias Koch
@
@    This program is free software: you can redistribute it and/or modify
@    it under the terms of the GNU General Public License as published by
@    the Free Software Foundation, either version 3 of the License, or
@    (at your option) any later version.
@
@    This program is distributed in the hope that it will be useful,
@    but WITHOUT ANY WARRANTY; without even the implied warranty of
@    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
@    GNU General Public License for more details.
@
@    You should have received a copy of the GNU General Public License
@    along with this program.  If not, see <http://www.gnu.org/licenses/>.
@

Hi Holi,

thank you for the nice disassembler listing ! I have some questions: Is your disassembler written in Forth itself ?
May I ask for its sources ? I am very interested to include your M3/M4 disassembler as contribution in
the mainstream Mecrisp-Stellaris package. For now, I have only done a M0 disassembler myself.
The assembler source code of Mecrisp-Stellaris is published under GPL3 -
you can publish the disassembler listing under the same licence, and I kindly ask you for providing a link to
http://mecrisp.sourceforge.net/ for those interested in it.

Best wishes from Germany,
Matthias

comment;


: -2rot  2rot  2rot   ;
variable  good.looking?           \ cr  .( **** enter 8 to see  good.looking  ****          ) KEY '8' = #IF  1  #ELSE  0  #THEN  good.looking?          !
variable  tinyForth(stc)?         \ cr  .( **** enter 8 to run  tinyForth,    ****          ) KEY '8' = #IF  1  #ELSE  0  #THEN  tinyForth(stc)?        !
variable  msp430eForth?   ( pb )  \ cr  .( **** enter 8 to run  msp430eForth, ****          ) KEY '8' = #IF  1  #ELSE  0  #THEN  msp430eForth?          !
variable  430eForthAL03?  ( Dr. C. H. Ting )
variable  430uForth?      ( Dr. C. H. Ting )
variable  430eForthWang1? ( Dr. L. C. Wang )
variable  msp430g2553camelForth?  \ cr  .( **** enter 8 to run  msp430g2553camelForth? **** ) KEY '8' = #IF  1  #ELSE  0  #THEN  msp430g2553camelForth? !
variable  msp430f1611camelForth?  \  ???????
variable  fram?
variable  tinyForth(stc.under.camelforth)?
variable  tF(stc+itc)?
variable  tF(stc+itc).start.addr       d800  tF(stc+itc).start.addr  !
variable  download.to.ram.start    20001000   download.to.ram.start  !   \ 210 MSP430G2231
variable  download.to.ram.end+1    20002000   download.to.ram.end+1  !   \ 230 MSP430G2231
variable  ram.start                20000000   ram.start              !
variable  ram.end      2003FFFF  ( 20007fff ) ram.end                !   \ 64K*3=192K    \ 429: 256K

variable  rom.start                01000000   rom.start              !   \ stellariss Launchpad
variable  rom.end                  01008bff   rom.end                !   \ stellariss Launchpad

variable  target.var.range               10   target.var.range       !
variable  program.start    \  tF(stc+itc)? @  #if  d800 #else  f800  #then   program.start  !  \ ************************************
variable  program.length              50000   program.length         !   \ ************************************
variable  generate.disassem.program?  \  generate.disassem.program?  on
variable  op.code.of.call  f000d000 ( 12b0 )  op.code.of.call    !
variable  op.code.of.jmp               4030   op.code.of.jmp     !
variable  op.code.of.lcall             940e   op.code.of.lcall   !
variable  op.code.of.ljmp              940c   op.code.of.ljmp    !
variable  op.code.of.rcall             0      op.code.of.rcall   !
variable  last'                        1c8e       last'          !  \ ************************************   fd21 fram
variable  c.style?         c.style?  on
variable  end.of.program    \  fdb2 org                   \ ************************************
variable  code.of.exit(fram)      e04c   code.of.exit(fram)      !
variable  2553.program.start      c000   2553.program.start      !
variable  cfa'.of.?branch
variable  cfa'.of.?branch*
variable  cfa'.of.branch
variable  cfa'.of.branch*

variable  branch.offset
variable  show.cfa?
variable  cfa'.of.nex.      \ nex.
variable  cfa'.of.next      \ next
variable  cfa'.of.lit       \ camelForth
variable  cfa'.of.doLit     \ eForth
variable  cfa'.of.doVar
variable  cfa'.of.doUSER
variable  cfa'.of.doNEX.

variable  cfa'.of.nex.*      \ nex.
variable  cfa'.of.next*      \ next
variable  cfa'.of.doLIT*     \ 8051eForth  decompiled list as source
variable  cfa'.of.doVAR*     \ 8051eForth  decompiled list as source
variable  cfa'.of.doUSER*    \ 8051eForth  decompiled list as source
variable  cfa'.of.doNEX.*    \ 8051eForth  decompiled list as source

variable  cfa'.of.doLIT*1    \ 8051eForth  decompiled list as source     \ ????????????????  multiple eForth system needed.
variable  cfa'.of.doLIT*2    \ 8051eForth  decompiled list as source     \ ????????????????
variable  cfa'.of.doLIT*3    \ 8051eForth  decompiled list as source     \ ????????????????
variable  cfa'.of.doLIT*4    \ 8051eForth  decompiled list as source     \ ????????????????
variable  cfa'.of.doLIT*5    \ 8051eForth  decompiled list as source     \ ????????????????
variable  cfa'.of.doLIT*6    \ 8051eForth  decompiled list as source     \ ????????????????

variable  cfa'.of.."|
variable  cfa'.of.,"|
variable  cfa'.of.(IS")
variable  cfa'.of.$"|
variable  cfa'.of.abort"
variable  cfa'.of.abor."

variable  cfa'.of.."|*
variable  cfa'.of.,"|*
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*
variable  cfa'.of.abort"*
variable  cfa'.of.abor."*

variable  cfa'.of.."|*1
variable  cfa'.of.,"|*1
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*1
variable  cfa'.of.abort"*1
variable  cfa'.of.abor."*1



variable  cfa'.of.."|*2
variable  cfa'.of.,"|*2
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*2
variable  cfa'.of.abort"*2
variable  cfa'.of.abor."*2



variable  cfa'.of.."|*3
variable  cfa'.of.,"|*3
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*3
variable  cfa'.of.abort"*3
variable  cfa'.of.abor."*3



variable  cfa'.of.."|*4
variable  cfa'.of.,"|*4
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*4
variable  cfa'.of.abort"*4
variable  cfa'.of.abor."*4


variable  cfa'.of.."|*5
variable  cfa'.of.,"|*5
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*5
variable  cfa'.of.abort"*5
variable  cfa'.of.abor."*5


variable  cfa'.of.."|*6
variable  cfa'.of.,"|*6
variable  cfa'.of.(IS")
variable  cfa'.of.$"|*6
variable  cfa'.of.abort"*6
variable  cfa'.of.abor."*6

variable  cfa'.of.(abort")   \ swiftForth stm32f4
variable  cfa'.of.(.")       \ swiftForth stm32f4

variable  cfa'.of.(?do)
variable  cfa'.of.(do)
variable  cfa'.of.loop       \ camelforth
variable  cfa'.of.(loop)     \ camelforth
variable  cfa'.of.doLOOP     \ eforth
variable  cfa'.of.+loop      \ camelforth
variable  cfa'.of.(+loop)    \ camelforth
variable  cfa'.of.doPLOOP    \ eforth
variable  cfa'.of.compile

variable  cfa'.of.(unloop)   \ mecrispForth

variable  cfa'.of.doCOMPILE  \
variable  cfa'.of.settings
variable  cfa'.of.uinit      \ msp430f1611camelForth
variable  cfa'.of.uinit1
variable  cfa'.of.doCON
variable  cfa'.of.doCONSTANT
variable  cfa'.of.do2CONSTANT
variable  cfa'.of.doDOES             ec02  cfa'.of.doDOES  !

variable  cfa'.of.doLIST

variable  cfa'.of.TYPE$     \ special of msp430eForth
variable  8051?
variable  8051.8bit?
variable  8051.16bit?

variable  stm8s.8bit?
variable  stm8s.16bit?

variable  avr328?
variable  ADuC70xx?
variable  210x?



variable  msp430f1611?
variable  cfa'.of.doALIAS
variable  msp430g2274mecrispForth1?
variable  msp430g2553mecrispForth2?
variable  msp430g2553mecrispForth3?

:   mecrispForth?  ( -- f )
    msp430g2274mecrispForth1?  @
    msp430g2553mecrispForth2?  @
    msp430g2553mecrispForth3?  @   or   or   ;

variable  previous.lfa'
variable  last.lfa'        feda            last.lfa'      !
variable  tF.start.addr    previous.lfa'  @  tF.start.addr  !
variable  nfa'.of.last.program
variable  flash.program.end+1

:         set.tF.start.addr=flash.program.end+1      flash.program.end+1  @   tF.start.addr  !  ;
: t=f     set.tF.start.addr=flash.program.end+1  ;

variable  here'(t:)
VARIABLE  force.-;?              force.-;?          on  \  force.-;?  off
variable  cal.REL.10.430''?   \  cal.REL.10.430''?  on
variable  tail.optimize?

variable  cfa'.of.IF
variable  cfa'.of.ELSE
variable  cfa'.of.THEN
variable  cfa'.of.BEGIN
variable  cfa'.of.WHILE
variable  cfa'.of.REPEAT
variable  cfa'.of.UNTIL
variable  cfa'.of.AGAIN
variable  cfa'.of.AHEAD
variable  cfa'.of.FOR
variable  cfa'.of.AFT
variable  last.instruction.addr
variable  headless?
variable  headless.mark
variable  original.mnemonic?           original.mnemonic?  on
variable  new.camelForth?    

variable  cortex.m4?

variable  test.assembler?    \  depth  #if  test.assembler?  on  #then

variable  1_328EFORTH(DELIN_V0.7).HEX?
variable  tF8.on?
variable  mips32?
variable  op.code.mask.of.call    f800d000    op.code.mask.of.call  !  \ ??????????

variable  eForth(-1)/swiftForth?(0)?
variable  dual.head.Forth(51eF)?
variable  head.Forth?      \ head.Forth?  on    \  eForth === head.Forth <---> headless.Forth === swiftForth
variable  +pcfa?             +pcfa?       on    \  pointer to cfa is added.

variable  extra.offset           4000     extra.offset  !

variable  system.variable.base.in.rom   \ extra.offset  @   stm32f407.sF?  @  #if  08000000 +  #then  100 +   system.variable.base.in.rom  !
variable  system.variable.base.in.RAM                        20000200     system.variable.base.in.RAM  !

variable  head.start.in.ram  20008000  head.start.in.ram  !    \ 20006000
variable  cp0                20000000  cp0                !    \ 20001000  ???????????

cortex.m0?  @
#if
variable  hp0'               2000b800  hp0'               !    \ 20004000
variable  head.start*        2000b800  ( 20004000 )   head.start* !   \ ??????????
#else
variable  hp0'               20006000  hp0'               !    \ 20004000
variable  head.start*        20006000  ( 20004000 )   head.start* !   \ ??????????
#then

variable  dp0                20007800  dp0                !    \ 20006000

variable  it?             \  it?            on  \  it.=.>....itegt
variable  mecrispForth.only(LF120)?
variable  tf+eF+mF(stm32F4)?
variable  tF+stm32f4xx.eF+stellaris.eF?
variable  stm32f407?

  variable  head.start         c000  stm32f407.sF?  @  #if  0 ( 08000000 )  +  #then  head.start  !   \ ??????????

variable  special.for.swiftxForth?       \  special.for.swiftxForth?  on

cr  .(       '0' to start on  CORTEX M0 ( for now only assembler+disassembler     )
cr  .(       '1' to start on  tF+eF+mF  for stellaris launchpad  0000000~0001ffff )
cr  .(       '2' to start on  tF+eF+mF  for stm32f407 discovery  0000000~0001ffff )
cr  .(       '3' to start on  tF+eF+sF  for stm32f407 discovery  0800000~0801ffff )
cr  .(       '4' to start on        mF  for stellaris launchpad  0000000~0001ffff )
cr  .(       '5' to start on  tF+eF+mF  for stm32f407 discovery  0000000~0001ffff )
cr  .(       '6' to start on  tF+eF     for stm32f407 discovery  0000000~0001ffff )
cr  .( other key to start on  tF+eF     for stellaris launchpad  0000000~0001ffff )

     ( '1'  -1 )         '9'  ( key ) dup  '0'  =
\      '6'   0
#if               drop   cortex.m0?                     on
#else                    dup   '1'  =
  #if             drop   mecrisp4F120?                  on   \  tF+eF+mecrisp4F120
  #else                  dup   '2'  =
    #if           drop   mecrisp32F407?                 on   \  tF+eF+mecrisp32F407
    #else                dup   '3'  =
      #if         drop   tF+stm32f4xx.eF+stellaris.eF?  on   \  4000~78xx is tF+eForth for stm32f4xx and stellaris Launchpad LF120
                         2000ffff  ram.end  !
                         stm32f407?                     on
                         special.for.swiftxForth?       on   \  tF+eF+sF     ?????????????
                         stellaris.launchpad?           on
      #else              dup   '4'  =
        #if       drop   mecrispForth.only(LF120)?      on   \  mecrisp4F120
        #else            dup   '5'  =
          #if     drop   tf+eF+mF(stm32F4)?             on   \  tF+eF for stm32f4
          #else                '6'  =
            #if          tF+stm32f4xx.eF+stellaris.eF?  on   \  4000~78xx is tF+eForth for stm32f4xx and stellaris Launchpad LF120
                         2000ffff  ram.end  !
                         stm32f407?                     on
            #then                                         \  426c 4 16!'  for Launchpad eForth, 6e90 4 16!' for stm32f4xx eForth
          #then
        #then            stellaris.launchpad?           on   \  tF+eF for stellaris.launchpad
      #then
    #then
  #then
#then




extra.offset  @     stm32f407.sF?  @
#if    0 ( 08000000 ) +
#then       100 +   system.variable.base.in.rom  !

hex

variable       optimize?         optimize?  on
:   optimize   optimize?  dup    @    if   off   else   on   then   ;
:   opt.on     optimize?  on     ;
:   opt.off    optimize?  off    ;

: ho      head.Forth?  dup  @  if  off  else  on  then  ;

: [0~F>ASC] ( N ... N1 )  >R
          R@  0  9 BETWEEN
  IF      R> 30 +
  ELSE    R@ 0A 0F BETWEEN
    IF    R> 37 +
    ELSE  R>
    THEN
  THEN    ;

: [ASC>0~F] ( N ... N1 )  upc  >R
          R@  30  39  BETWEEN   \ 0 ~ 9
  IF      R>  30  -
  ELSE    R@  41  46  BETWEEN   \ A ~ F
    IF    R>  37  -
    ELSE  R>
    THEN
  THEN    ;

\ cr  .( **** key in 3 to work on mips32; 8 to AVR328, otherwise cortex m4 **** )
\           key   dup   '8'  =
      0  0
#if   drop  avr328?     on
#else   '3'  =
        #if     cortex.m4?  on       mips32?  on
        #else   cortex.m4?  on       mips32?  off
        #then
#then

0  op.code.of.rcall  !

   D762  flash.program.end+1  !     d738  nfa'.of.last.program  !

:     generate.disassem.program   ( cls ) [ '   emitx literal ] is emit   [ '   typex literal ] is type  ( [ ' crx literal ]  is  cr ) ;
      generate.disassem.program?   @   #if   generate.disassem.program    #then

VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if
:           no.disassem.program   ( cls ) [ ' _memit  literal ] is emit   [ ' _mtype  literal ] is type  ( [ ' crx literal ]  is  cr ) ;
            no.disassem.program
#else    \  ' emitx  is  emit     ' typex   is  type   \  ' crx  is  cr
#then




























\ INCLUDE  232C4.f
DECIMAL

VARIABLE   EXI.INI?   -1 EXI.INI? !
VARIABLE   EXI?

: XON   -1 EXI.INI? !  ;
: XOFF   0 EXI.INI? !  ;

VARIABLE  DONE?

: DONE    DONE? @  IF  0  ELSE  -1  THEN  DONE? !  ;

VARIABLE       BAUD.RATE?
: BAUD.RATE    BAUD.RATE? !  ;

DEFER  _EXI
VARIABLE  PORT?
: PORT   ( N ... )    PORT?  !   ;    5 PORT
: BS  8 EMIT ;

: SET.com.port,BAUD.RATE  ( PORT baud.rate -- )
  over   1 7 between not abort"  com port 1 ~ 7 only "
  BAUD.RATE  PORT ;

: show.0.11k  cr ."  0.11k1  0.11k2   0.11k3 0.11k4  0.11k5  0.11k6  0.11k7  0.11k8  0.11k9  0.11k10  0.11k11  0.11k12  0.11k13  0.11k14  0.11k15" ;
: show.0.3k   cr ."   0.3k1   0.3k2   0.3k3   0.3k4   0.3k5   0.3k6   0.3k7   0.3k8   0.3k9   0.3k10   0.3k11   0.3k12   0.3k13   0.3k14   0.3k15" ;
: show.0.6k   cr ."   0.6k1   0.6k2   0.6k3   0.6k4   0.6k5   0.6k6   0.6k7   0.6k8   0.6k9   0.6k10   0.6k11   0.6k12   0.6k13   0.6k14   0.6k15" ;
: show.1.2k   cr ."   1.2k1   1.2k2   1.2k3   1.2k4   1.2k5   1.2k6   1.2k7   1.2k8   1.2k9   1.2k10   1.2k11   1.2k12   1.2k13   1.2k14   1.2k15" ;
: show.2.4k   cr ."   2.4k1   2.4k2   2.4k3   2.4k4   2.4k5   2.4k6   2.4k7   2.4k8   2.4k9   2.4k10   2.4k11   2.4k12   2.4k13   2.4k14   2.4k15" ;
: show.4.8k   cr ."   4.8k1   4.8k2   4.8k3   4.8k4   4.8k5   4.8k6   4.8k7   4.8k8   4.8k9   4.8k10   4.8k11   4.8k12   4.8k13   4.8k14   4.8k15" ;
: show.9.6k   cr ."   9.6k1   9.6k2   9.6k3   9.6k4   9.6k5   9.6k6   9.6k7   9.6k8   9.6k9   9.6k10   9.6k11   9.6k12   9.6k13   9.6k14   9.6k15" ;
: show.19.2k  cr ."  19.2k1  19.2k2  19.2k3  19.2k4  19.2k5  19.2k6  19.2k7  19.2k8  19.2k9  19.2k10  19.2k11  19.2k12  19.2k13  19.2k14  19.2k15" ;
: show.38.4k  cr ."  38.4k1  38.4k2  38.4k3  38.4k4  38.4k5  38.4k6  38.4k7  38.4k8  38.4k9  38.4k10  38.4k11  38.4k12  38.4k13  38.4k14  38.4k15" ;
: show.57.6k  cr ."  57.6k1  57.6k2  57.6k3  57.6k4  57.6k5  57.6k6  57.6k7  57.6k8  57.6k9  57.6k10  57.6k11  57.6k12  57.6k13  57.6k14  57.6k15" ;
: show.115.2k cr ." 115.2k1 115.2k2 115.2k3 115.2k4 115.2k5 115.2k6 115.2k7 115.2k8 115.2k9 115.2k10 115.2k11 115.2k12 115.2k13 115.2k14 115.2k15" ;
: show.128k   cr ."   128k1   128k2   128k3   128k4   128k5   128k6   128k7   128k8   128k9   128k10   128k11   128k12   128k13   128k14   128k15" ;
: show.230k   cr ."   230k1   230k2   230k3   230k4   230k5   230k6   230k7   230k8   230k9   230k10   230k11   230k12   230k13   230k14   230k15" ;
: show.256k   cr ."   256k1   256k2   256k3   256k4   256k5   256k6   256k7   256k8   256k9   256k10   256k11   256k12   256k13   256k14   256k15" ;

: show.0.11k  cr ." 0.11k1 0.11k2 0.11k3 0.11k4 0.11k5 0.11k6 0.11k7 0.11k8 0.11k9 0.11k10 0.11k11 0.11k12 0.11k13 0.11k14 0.11k15" ;
: show.0.3k   cr ."  0.3k1  0.3k2  0.3k3  0.3k4  0.3k5  0.3k6  0.3k7  0.3k8  0.3k9  0.3k10  0.3k11  0.3k12  0.3k13  0.3k14  0.3k15" ;
: show.0.6k   cr ."  0.6k1  0.6k2  0.6k3  0.6k4  0.6k5  0.6k6  0.6k7  0.6k8  0.6k9  0.6k10  0.6k11  0.6k12  0.6k13  0.6k14  0.6k15" ;
: show.1.2k   cr ."  1.2k1  1.2k2  1.2k3  1.2k4  1.2k5  1.2k6  1.2k7  1.2k8  1.2k9  1.2k10  1.2k11  1.2k12  1.2k13  1.2k14  1.2k15" ;
: show.2.4k   cr ."  2.4k1  2.4k2  2.4k3  2.4k4  2.4k5  2.4k6  2.4k7  2.4k8  2.4k9  2.4k10  2.4k11  2.4k12  2.4k13  2.4k14  2.4k15" ;
: show.4.8k   cr ."  4.8k1  4.8k2  4.8k3  4.8k4  4.8k5  4.8k6  4.8k7  4.8k8  4.8k9  4.8k10  4.8k11  4.8k12  4.8k13  4.8k14  4.8k15" ;
: show.9.6k   cr ."  9.6k1  9.6k2  9.6k3  9.6k4  9.6k5  9.6k6  9.6k7  9.6k8  9.6k9  9.6k10  9.6k11  9.6k12  9.6k13  9.6k14  9.6k15" ;
: show.19.2k  cr ." 19.2k1 19.2k2 19.2k3 19.2k4 19.2k5 19.2k6 19.2k7 19.2k8 19.2k9 19.2k10 19.2k11 19.2k12 19.2k13 19.2k14 19.2k15" ;
: show.38.4k  cr ." 38.4k1 38.4k2 38.4k3 38.4k4 38.4k5 38.4k6 38.4k7 38.4k8 38.4k9 38.4k10 38.4k11 38.4k12 38.4k13 38.4k14 38.4k15" ;
: show.57.6k  cr ." 57.6k1 57.6k2 57.6k3 57.6k4 57.6k5 57.6k6 57.6k7 57.6k8 57.6k9 57.6k10 57.6k11 57.6k12 57.6k13 57.6k14 57.6k15" ;
: show.115k   cr ."  115k1  115k2  115k3  115k4  115k5  115k6  115k7  115k8  115k9  115k10  115k11  115k12  115k13  115k14  115k15" ;
: show.128k   cr ."  128k1  128k2  128k3  128k4  128k5  128k6  128k7  128k8  128k9  128k10  128k11  128k12  128k13  128k14  128k15" ;
: show.230k   cr ."  230k1  230k2  230k3  230k4  230k5  230k6  230k7  230k8  230k9  230k10  230k11  230k12  230k13  230k14  230k15" ;
: show.256k   cr ."  256k1  256k2  256k3  256k4  256k5  256k6  256k7  256k8  256k9  256k10  256k11  256k12  256k13  256k14  256k15" ;


: show.all.port,baud.rate    show.0.11k   show.0.3k     show.0.6k    show.1.2k    show.2.4k     show.4.8k     show.9.6k
                             show.19.2k   show.38.4k    show.57.6k   show.115k    show.128k     show.230k     show.256k ;
  defer oo
\ ******************************************************************************
\ MODIFIED BY CJJ MAR.14,2001
\ Written by Andrew McKewan in Visual C++
\ Translated to Forth by Tom Zimmer
\ January 3nd, 1997 tjz
\       Updated to include changes from Skip Inskeep, as well as
\       other changes.
\ February 10th, 1997 by Tom Zimmer
\       Updated with a couple of additional changes from Skip Inskeep.

\ A Win32Forth example program that illustrates how to open COM1 for
\ bi-directional communications and then allows a simple terminal
\ program to communicate with whatever is connected at 9600 baud.

\ define the object for the Device Control Block ( DCB ) structure

:Object DCB        <Super Object

Record: AddrOf
        int   DCBlength
        int   BaudRate
        int   BinaryBits                \ a 32bit cell of bit fields
      1 bits  fBinary                   \ define the bit fields
      1 bits  fParity
      1 bits  fOutxCtsFlow
      1 bits  fOutxDsrFlow             \ SDI changed for Rts to Dsr
      2 bits  fDtrControl
      1 bits  fDtrSensitivity
      1 bits  fTXContinueOnXoff
      1 bits  fOutX
      1 bits  fInx
      1 bits  fErrorChar
      1 bits  fNull
      2 bits  fRtsControl
      1 bits  fAbortOnError
     17 bits  fDummy
        short wReserved
        short XonLim
        short XoffLim
        byte  ByteSize
        byte  Parity
        byte  StopBits
        byte  XonChar
        byte  XoffChar
        byte  ErrorChar
        byte  EofChar
        byte  EvtChar
        short wReserved1
;RecordSize: SIZEOFDCB

:M Reset:       ( -- )
                AddrOf SIZEOFDCB erase
                ;M

:M ClassInit:   ( -- )
                ClassInit: super
                Reset: self             \ create structure as Reset
                ;M

;Object

\ define the field names for the Communications Timeout structure

0       CELL Field+ .ReadIntervalTimeout
        CELL Field+ .ReadTotalTimeoutMultiplier
        CELL Field+ .ReadTotalTimeoutConstant
        CELL Field+ .WriteTotalTimeoutMultiplier
        CELL Field+ .WriteTotalTimeoutConstant
CONSTANT COMMTIMEOUTSBYTES

: ComTimeouts   { cHndl \ CT -- }      \ Initialize the communications timeouts
                COMMTIMEOUTSBYTES LocalAlloc: CT    \ allocate a CT structure
                CT COMMTIMEOUTSBYTES erase          \ initialize it to zeros
        \ set read timeouts to magic value of don't wait, just poll
                -1 CT .ReadIntervalTimeout          !
                 0 CT .ReadTotalTimeoutMultiplier   !
                 0 CT .ReadTotalTimeoutConstant     !
                 1 CT .WriteTotalTimeoutMultiplier  !
                20 CT .WriteTotalTimeoutConstant    !
                CT rel>abs
                cHndl
                Call SetCommTimeouts drop ;

: ComOpen       ( z1 -- cHndl ) \ Open Com port for z" COM1", or z" COM2"
                >R
                NULL                            \ no template
                NULL                            \ open file attributes
                OPEN_EXISTING                   \ creation distribution
                NULL                            \ no security attributes
                0                               \ exclusive access
                GENERIC_READ GENERIC_WRITE or   \ desired access modes
                R> rel>abs                      \ zstring filename
                Call CreateFile                 \ returns handle or -1
                dup -1 =                        \ if -1 then error
                Abort" Failed to open COM port!"
                ;                               \ -- chndl ;return handle to port

\ ************************************************************
\ here is a list of valid parameters for ComSetup.  Except for
\ the ByteSize parameter, these are all windows constants.

\ --- BuadRate    CBR_110       CBR_300       CBR_600
\                 CBR_1200      CBR_2400      CBR_4800
\                 CBR_9600      CBR_14400     CBR_56000
\                 CBR_19200     CBR_38400     CBR_57600
\                 CBR_115200    CBR_128000    CBR_256000
\
\ --- ByteSize    5, 6, 7, 8
\
\ --- Parity      NOPARITY      ODDPARITY     MARKPARITY
\                 EVENPARITY    SPACEPARITY
\
\ --- StopBits    ONESTOPBIT    TWOSTOPBITS   ONE5STOPBITS
\
\ ************************************************************

\ Setup the Communications state to the parameters specified

: ComSetup      { baud size parity stop cHndl -- }
                DCB.AddrOf rel>abs
                cHndl
                Call GetCommState ?win-error

                baud       Put: DCB.BaudRate
                size       Put: DCB.ByteSize
                parity 0<> Put: DCB.fParity             \ parity enabled flag
                parity     Put: DCB.Parity
                stop       Put: DCB.StopBits

                DCB.AddrOf rel>abs
                cHndl
                Call SetCommState ?win-error ;

: ComClose      ( cHndl -- )    \ close com port if its open
                ?dup
                if      Call CloseHandle drop
                then    ;

:Object COMSTAT        <Super Object

Record: AddrOf
        int   lpComStatBits             \ a 32bit cell of bit fields
      1 bits  fCtsHold                  \ define the bit fields Low to High
      1 bits  fDsrHold
      1 bits  fRlsdHold
      1 bits  fXoffHold
      1 bits  fXoffSent
      1 bits  fEof
      1 bits  fTxim
     25 bits  fReserved
        int   cbInQue
        int   cbOutQue
;RecordSize: SIZEOFCOMSTAT

:M Reset:       ( -- )
                AddrOf SIZEOFCOMSTAT erase
                ;M

:M ClassInit:   ( -- )
                ClassInit: super
                Reset: self             \ create structure as Reset
                ;M

;Object

: ComErrorClear { comhndl \ lpErrors -- f }      \ true = success
                COMSTAT.addrof  rel>abs
                lpErrors  rel>abs
                comhndl Call ClearCommError 0<>  ;

\ ==============================================================================

: CBR_n  BAUD.RATE? @    \  CBR_n
                CASE    110  OF    CBR_110      ENDOF
                        300  OF    CBR_300      ENDOF
                        600  OF    CBR_600      ENDOF
                       1200  OF    CBR_1200     ENDOF
                       2400  OF    CBR_2400     ENDOF
                       4800  OF    CBR_4800     ENDOF
                       9600  OF    CBR_9600     ENDOF
                      14400  OF    CBR_14400    ENDOF
                      19200  OF    CBR_19200    ENDOF
                      38400  OF    CBR_38400    ENDOF
                      56000  OF    CBR_56000    ENDOF
                      57600  OF    CBR_57600    ENDOF
                     115200  OF    CBR_115200   ENDOF
                     128000  OF    CBR_128000   ENDOF
                     256000  OF    CBR_256000   ENDOF
                ENDCASE    ;

: z"_COMn"    PORT? @   CASE    1  OF   z" COM1"    ENDOF
                                2  OF   z" COM2"    ENDOF
                                3  OF   z" COM3"    ENDOF
                                4  OF   z" COM4"    ENDOF
                                5  OF   z" COM5"    ENDOF
                                6  OF   z" COM6"    ENDOF
                                7  OF   z" COM7"    ENDOF
                                8  OF   z" COM8"    ENDOF
                                9  OF   z" COM9"    ENDOF
                               10  OF   z" COM10"   ENDOF
                               11  OF   z" COM11"   ENDOF
                               12  OF   z" COM12"   ENDOF
                               13  OF   z" COM13"   ENDOF
                               14  OF   z" COM14"   ENDOF
                               15  OF   z" COM15"   ENDOF
                               16  OF   z" COM16"   ENDOF
                        ENDCASE    ;

CREATE  COMnHndl'      64 ALLOT   : COMnHndl      PORT? @  4 *  COMnHndl'     +  ;
CREATE  COMnKey-val'   64 ALLOT   : COMnKey-val   PORT? @  4 *  COMnKey-val'  +  ;
CREATE  COMnKey-flg?'  64 ALLOT   : COMnKey-flg?  PORT? @  4 *  COMnKey-flg?' +  ;

: COMnKey?      ( -- c1 )       \ get a key from serial port, don't wait long
                COMnKey-flg? @  0=
                if      COMnKey-val 1 COMnHndl @ read-file        \ -- len flag
                        abort" Failed to read serial port"      \ -- len
                        COMnKey-flg?  !
                then    COMnKey-flg?  @  ;

: COMnKey       ( -- c1 )       \ must return a key
                begin   COMnKey?                \ loop till we get one
                until
                COMnKey-val c@                  \ return the key
                0  COMnKey-flg?  !  ;           \ clear the save buffer

: COMnemit      { char -- }     \ write a character to the serial port
                begin
                     &LOCAL char 1 COMnHndl @  write-file
                     if
                        COMnHndl @ ComErrorClear drop
                        Get: COMSTAT.lpComStatBits $7E AND     \ fail on all but CTS
                        abort" Failed to write serial port"
                        false
                     else
                        true
                     then
                until  ;

: do-COMnKey    ( c1 -- f1 )    \ process keys pressed on user keyboard
                dup k_ESC =                    \ was ESC pressed?
                if      drop                   \ if so, discard c1 and shut down
                        COMnHndl @  ComClose   \ close the com port
                        0 COMnHndl !           \ clear handle value
                        DONE? @ IF  ." Done"  THEN
                                        TRUE   \ return TRUE, we are terminating
                else    COMnEmit        FALSE  \ else emit char and continue
                then    ;

: EXI          -1 EXI? !    EXI.INI? @   IF    27  do-COMnKey   ?EXIT   THEN  ;

: INITIALIZE'      ( ... )  EXI
                cr ." Initializing Serial Port to: "
                cr ." COM"  PORT? ?    BS  ." : baud="  BAUD.RATE? ?  ."  parity=N data=8 stop=1"
                z"_COMn"    ComOpen  COMnHndl  !
                    Reset:  DCB
                FALSE Put:  DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_n       8 NOPARITY ONESTOPBIT
                COMnHndl    @    ComSetup
                COMnHndl    @    ComTimeouts
                cr ." Press ESC to stop talking." cr   ;

: INITIALIZE'PURE  ( ... )  EXI
                z"_COMn"    ComOpen  COMnHndl  !
                    Reset:  DCB
                FALSE Put:  DCB.fOutxCtsFlow      \ Don't pay attention to CTS
                CBR_n       8 NOPARITY ONESTOPBIT
                COMnHndl    @    ComSetup
                COMnHndl    @    ComTimeouts   ;

VARIABLE  PURE?    PURE?  ON

: PURE    PURE?    DUP @  IF  OFF  ELSE  ON  THEN  ;

: INITIALIZE'    PURE? @  IF  INITIALIZE'PURE   ELSE  INITIALIZE'  THEN  ;

: INITIALIZE  ( PORT BAUD.RATE ... )    BAUD.RATE   PORT   INITIALIZE'  ;

: INI  ( ... )  0 EXI? !   EXI.INI? @   IF    INITIALIZE'    THEN  ;

VARIABLE  -CR?    -CR?  ON

: -CR     -CR?  @  IF  0  ELSE  -1  THEN  -CR? !  ;

: RUN.COM       BEGIN   key?
                        if      key do-COMnKey ?EXIT
                        then
                        COMnKey?
                        if      ComnKey
                                -CR?   @
                                IF
                                ELSE   DUP 13 = IF  CR  THEN
                                       DUP 10 = IF  CR  THEN
                                THEN   emit
                        then
                AGAIN ;




:  0.11K1    1        110   INITIALIZE    RUN.COM  ;
:  0.11K2    2        110   INITIALIZE    RUN.COM  ;
:  0.11K3    3        110   INITIALIZE    RUN.COM  ;
:  0.11K4    4        110   INITIALIZE    RUN.COM  ;
:  0.11K5    5        110   INITIALIZE    RUN.COM  ;
:  0.11K6    6        110   INITIALIZE    RUN.COM  ;
:  0.11K7    7        110   INITIALIZE    RUN.COM  ;
:  0.11K8    8        110   INITIALIZE    RUN.COM  ;
:  0.11K9    9        110   INITIALIZE    RUN.COM  ;
:  0.11K10  10        110   INITIALIZE    RUN.COM  ;
:  0.11K11  11        110   INITIALIZE    RUN.COM  ;
:  0.11K12  12        110   INITIALIZE    RUN.COM  ;
:  0.11K13  13        110   INITIALIZE    RUN.COM  ;
:  0.11K14  14        110   INITIALIZE    RUN.COM  ;
:  0.11K15  15        110   INITIALIZE    RUN.COM  ;
:  0.11K16  16        110   INITIALIZE    RUN.COM  ;

:   0.3k1    1        300   INITIALIZE    RUN.COM  ;
:   0.3k2    2        300   INITIALIZE    RUN.COM  ;
:   0.3k3    3        300   INITIALIZE    RUN.COM  ;
:   0.3k4    4        300   INITIALIZE    RUN.COM  ;
:   0.3k5    5        300   INITIALIZE    RUN.COM  ;
:   0.3k6    6        300   INITIALIZE    RUN.COM  ;
:   0.3k7    7        300   INITIALIZE    RUN.COM  ;
:   0.3k8    8        300   INITIALIZE    RUN.COM  ;
:   0.3k9    9        300   INITIALIZE    RUN.COM  ;
:   0.3k10  10        300   INITIALIZE    RUN.COM  ;
:   0.3k11  11        300   INITIALIZE    RUN.COM  ;
:   0.3k12  12        300   INITIALIZE    RUN.COM  ;
:   0.3k13  13        300   INITIALIZE    RUN.COM  ;
:   0.3k14  14        300   INITIALIZE    RUN.COM  ;
:   0.3k15  15        300   INITIALIZE    RUN.COM  ;
:   0.3k16  16        300   INITIALIZE    RUN.COM  ;

:   0.6k1    1        600   INITIALIZE    RUN.COM  ;
:   0.6k2    2        600   INITIALIZE    RUN.COM  ;
:   0.6k3    3        600   INITIALIZE    RUN.COM  ;
:   0.6k4    4        600   INITIALIZE    RUN.COM  ;
:   0.6k5    5        600   INITIALIZE    RUN.COM  ;
:   0.6k6    6        600   INITIALIZE    RUN.COM  ;
:   0.6k7    7        600   INITIALIZE    RUN.COM  ;
:   0.6k8    8        600   INITIALIZE    RUN.COM  ;
:   0.6k9    9        600   INITIALIZE    RUN.COM  ;
:   0.6k10  10        600   INITIALIZE    RUN.COM  ;
:   0.6k11  11        600   INITIALIZE    RUN.COM  ;
:   0.6k12  12        600   INITIALIZE    RUN.COM  ;
:   0.6k13  13        600   INITIALIZE    RUN.COM  ;
:   0.6k14  14        600   INITIALIZE    RUN.COM  ;
:   0.6k15  15        600   INITIALIZE    RUN.COM  ;
:   0.6k16  16        600   INITIALIZE    RUN.COM  ;

:   1.2k1    1       1200   INITIALIZE    RUN.COM  ;
:   1.2k2    2       1200   INITIALIZE    RUN.COM  ;
:   1.2k3    3       1200   INITIALIZE    RUN.COM  ;
:   1.2k4    4       1200   INITIALIZE    RUN.COM  ;
:   1.2k5    5       1200   INITIALIZE    RUN.COM  ;
:   1.2k6    6       1200   INITIALIZE    RUN.COM  ;
:   1.2k7    7       1200   INITIALIZE    RUN.COM  ;
:   1.2k8    8       1200   INITIALIZE    RUN.COM  ;
:   1.2k9    9       1200   INITIALIZE    RUN.COM  ;
:   1.2k10  10       1200   INITIALIZE    RUN.COM  ;
:   1.2k11  11       1200   INITIALIZE    RUN.COM  ;
:   1.2k12  12       1200   INITIALIZE    RUN.COM  ;
:   1.2k13  13       1200   INITIALIZE    RUN.COM  ;
:   1.2k14  14       1200   INITIALIZE    RUN.COM  ;
:   1.2k15  15       1200   INITIALIZE    RUN.COM  ;
:   1.2k16  16       1200   INITIALIZE    RUN.COM  ;


:   2.4k1    1       2400   INITIALIZE    RUN.COM  ;
:   2.4k2    2       2400   INITIALIZE    RUN.COM  ;
:   2.4k3    3       2400   INITIALIZE    RUN.COM  ;
:   2.4k4    4       2400   INITIALIZE    RUN.COM  ;
:   2.4k5    5       2400   INITIALIZE    RUN.COM  ;
:   2.4k6    6       2400   INITIALIZE    RUN.COM  ;
:   2.4k7    7       2400   INITIALIZE    RUN.COM  ;
:   2.4k8    8       2400   INITIALIZE    RUN.COM  ;
:   2.4k9    9       2400   INITIALIZE    RUN.COM  ;
:   2.4k10  10       2400   INITIALIZE    RUN.COM  ;
:   2.4k11  11       2400   INITIALIZE    RUN.COM  ;
:   2.4k12  12       2400   INITIALIZE    RUN.COM  ;
:   2.4k13  13       2400   INITIALIZE    RUN.COM  ;
:   2.4k14  14       2400   INITIALIZE    RUN.COM  ;
:   2.4k15  15       2400   INITIALIZE    RUN.COM  ;
:   2.4k16  16       2400   INITIALIZE    RUN.COM  ;

:   4.8k1    1       4800   INITIALIZE    RUN.COM  ;
:   4.8k2    2       4800   INITIALIZE    RUN.COM  ;
:   4.8k3    3       4800   INITIALIZE    RUN.COM  ;
:   4.8k4    4       4800   INITIALIZE    RUN.COM  ;
:   4.8k5    5       4800   INITIALIZE    RUN.COM  ;
:   4.8k6    6       4800   INITIALIZE    RUN.COM  ;
:   4.8k7    7       4800   INITIALIZE    RUN.COM  ;
:   4.8k8    8       4800   INITIALIZE    RUN.COM  ;
:   4.8k9    9       4800   INITIALIZE    RUN.COM  ;
:   4.8k10  10       4800   INITIALIZE    RUN.COM  ;
:   4.8k11  11       4800   INITIALIZE    RUN.COM  ;
:   4.8k12  12       4800   INITIALIZE    RUN.COM  ;
:   4.8k13  13       4800   INITIALIZE    RUN.COM  ;
:   4.8k14  14       4800   INITIALIZE    RUN.COM  ;
:   4.8k15  15       4800   INITIALIZE    RUN.COM  ;
:   4.8k16  16       4800   INITIALIZE    RUN.COM  ;

:   9.6k1    1       9600   INITIALIZE    RUN.COM  ;
:   9.6k2    2       9600   INITIALIZE    RUN.COM  ;
:   9.6k3    3       9600   INITIALIZE    RUN.COM  ;
:   9.6k4    4       9600   INITIALIZE    RUN.COM  ;
:   9.6k5    5       9600   INITIALIZE    RUN.COM  ;
:   9.6k6    6       9600   INITIALIZE    RUN.COM  ;
:   9.6k7    7       9600   INITIALIZE    RUN.COM  ;
:   9.6k8    8       9600   INITIALIZE    RUN.COM  ;
:   9.6k9    9       9600   INITIALIZE    RUN.COM  ;
:   9.6k10  10       9600   INITIALIZE    RUN.COM  ;
:   9.6k11  11       9600   INITIALIZE    RUN.COM  ;
:   9.6k12  12       9600   INITIALIZE    RUN.COM  ;
:   9.6k13  13       9600   INITIALIZE    RUN.COM  ;
:   9.6k14  14       9600   INITIALIZE    RUN.COM  ;
:   9.6k15  15       9600   INITIALIZE    RUN.COM  ;
:   9.6k16  16       9600   INITIALIZE    RUN.COM  ;

:  19.2k1    1      19200   INITIALIZE    RUN.COM  ;
:  19.2k2    2      19200   INITIALIZE    RUN.COM  ;
:  19.2k3    3      19200   INITIALIZE    RUN.COM  ;
:  19.2k4    4      19200   INITIALIZE    RUN.COM  ;
:  19.2k5    5      19200   INITIALIZE    RUN.COM  ;
:  19.2k6    6      19200   INITIALIZE    RUN.COM  ;
:  19.2k7    7      19200   INITIALIZE    RUN.COM  ;
:  19.2k8    8      19200   INITIALIZE    RUN.COM  ;
:  19.2k9    9      19200   INITIALIZE    RUN.COM  ;
:  19.2k10  10      19200   INITIALIZE    RUN.COM  ;
:  19.2k11  11      19200   INITIALIZE    RUN.COM  ;
:  19.2k12  12      19200   INITIALIZE    RUN.COM  ;
:  19.2k13  13      19200   INITIALIZE    RUN.COM  ;
:  19.2k14  14      19200   INITIALIZE    RUN.COM  ;
:  19.2k15  15      19200   INITIALIZE    RUN.COM  ;
:  19.2k16  16      19200   INITIALIZE    RUN.COM  ;



:  38.4k1    1      38400   INITIALIZE    RUN.COM  ;
:  38.4k2    2      38400   INITIALIZE    RUN.COM  ;
:  38.4k3    3      38400   INITIALIZE    RUN.COM  ;
:  38.4k4    4      38400   INITIALIZE    RUN.COM  ;
:  38.4k5    5      38400   INITIALIZE    RUN.COM  ;
:  38.4k6    6      38400   INITIALIZE    RUN.COM  ;
:  38.4k7    7      38400   INITIALIZE    RUN.COM  ;
:  38.4k8    8      38400   INITIALIZE    RUN.COM  ;
:  38.4k9    9      38400   INITIALIZE    RUN.COM  ;
:  38.4k10  10      38400   INITIALIZE    RUN.COM  ;
:  38.4k11  11      38400   INITIALIZE    RUN.COM  ;
:  38.4k12  12      38400   INITIALIZE    RUN.COM  ;
:  38.4k13  13      38400   INITIALIZE    RUN.COM  ;
:  38.4k14  14      38400   INITIALIZE    RUN.COM  ;
:  38.4k15  15      38400   INITIALIZE    RUN.COM  ;
:  38.4k16  16      38400   INITIALIZE    RUN.COM  ;

:  57.6k1    1      57600   INITIALIZE    RUN.COM  ;
:  57.6k2    2      57600   INITIALIZE    RUN.COM  ;
:  57.6k3    3      57600   INITIALIZE    RUN.COM  ;
:  57.6k4    4      57600   INITIALIZE    RUN.COM  ;
:  57.6k5    5      57600   INITIALIZE    RUN.COM  ;
:  57.6k6    6      57600   INITIALIZE    RUN.COM  ;
:  57.6k7    7      57600   INITIALIZE    RUN.COM  ;
:  57.6k8    8      57600   INITIALIZE    RUN.COM  ;
:  57.6k9    9      57600   INITIALIZE    RUN.COM  ;
:  57.6k10  10      57600   INITIALIZE    RUN.COM  ;
:  57.6k11  11      57600   INITIALIZE    RUN.COM  ;
:  57.6k12  12      57600   INITIALIZE    RUN.COM  ;
:  57.6k13  13      57600   INITIALIZE    RUN.COM  ;
:  57.6k14  14      57600   INITIALIZE    RUN.COM  ;
:  57.6k15  15      57600   INITIALIZE    RUN.COM  ;
:  57.6k16  16      57600   INITIALIZE    RUN.COM  ;

: 115.2k1    1     115200   INITIALIZE    RUN.COM  ;
: 115.2k2    2     115200   INITIALIZE    RUN.COM  ;
: 115.2k3    3     115200   INITIALIZE    RUN.COM  ;
: 115.2k4    4     115200   INITIALIZE    RUN.COM  ;
: 115.2k5    5     115200   INITIALIZE    RUN.COM  ;
: 115.2k6    6     115200   INITIALIZE    RUN.COM  ;
: 115.2k7    7     115200   INITIALIZE    RUN.COM  ;
: 115.2k8    8     115200   INITIALIZE    RUN.COM  ;
: 115.2k9    9     115200   INITIALIZE    RUN.COM  ;
: 115.2k10  10     115200   INITIALIZE    RUN.COM  ;
: 115.2k11  11     115200   INITIALIZE    RUN.COM  ;
: 115.2k12  12     115200   INITIALIZE    RUN.COM  ;
: 115.2k13  13     115200   INITIALIZE    RUN.COM  ;
: 115.2k14  14     115200   INITIALIZE    RUN.COM  ;
: 115.2k15  15     115200   INITIALIZE    RUN.COM  ;
: 115.2k16  16     115200   INITIALIZE    RUN.COM  ;

:   115k1    1     115200   INITIALIZE    RUN.COM  ;
:   115k2    2     115200   INITIALIZE    RUN.COM  ;
:   115k3    3     115200   INITIALIZE    RUN.COM  ;
:   115k4    4     115200   INITIALIZE    RUN.COM  ;
:   115k5    5     115200   INITIALIZE    RUN.COM  ;
:   115k6    6     115200   INITIALIZE    RUN.COM  ;
:   115k7    7     115200   INITIALIZE    RUN.COM  ;
:   115k8    8     115200   INITIALIZE    RUN.COM  ;
:   115k9    9     115200   INITIALIZE    RUN.COM  ;
:   115k10  10     115200   INITIALIZE    RUN.COM  ;
:   115k11  11     115200   INITIALIZE    RUN.COM  ;
:   115k12  12     115200   INITIALIZE    RUN.COM  ;
:   115k13  13     115200   INITIALIZE    RUN.COM  ;
:   115k14  14     115200   INITIALIZE    RUN.COM  ;
:   115k15  15     115200   INITIALIZE    RUN.COM  ;
:   115k16  16     115200   INITIALIZE    RUN.COM  ;

:   128k1    1     128000   INITIALIZE    RUN.COM  ;
:   128k2    2     128000   INITIALIZE    RUN.COM  ;
:   128k3    3     128000   INITIALIZE    RUN.COM  ;
:   128k4    4     128000   INITIALIZE    RUN.COM  ;
:   128k5    5     128000   INITIALIZE    RUN.COM  ;
:   128k6    6     128000   INITIALIZE    RUN.COM  ;
:   128k7    7     128000   INITIALIZE    RUN.COM  ;
:   128k8    8     128000   INITIALIZE    RUN.COM  ;
:   128k9    9     128000   INITIALIZE    RUN.COM  ;
:   128k10  10     128000   INITIALIZE    RUN.COM  ;
:   128k11  11     128000   INITIALIZE    RUN.COM  ;
:   128k12  12     128000   INITIALIZE    RUN.COM  ;
:   128k13  13     128000   INITIALIZE    RUN.COM  ;
:   128k14  14     128000   INITIALIZE    RUN.COM  ;
:   128k15  15     128000   INITIALIZE    RUN.COM  ;
:   128k16  16     128000   INITIALIZE    RUN.COM  ;

:   230k1    1     230000   INITIALIZE    RUN.COM  ;
:   230k2    2     230000   INITIALIZE    RUN.COM  ;
:   230k3    3     230000   INITIALIZE    RUN.COM  ;
:   230k4    4     230000   INITIALIZE    RUN.COM  ;
:   230k5    5     230000   INITIALIZE    RUN.COM  ;
:   230k6    6     230000   INITIALIZE    RUN.COM  ;
:   230k7    7     230000   INITIALIZE    RUN.COM  ;
:   230k8    8     230000   INITIALIZE    RUN.COM  ;
:   230k9    9     230000   INITIALIZE    RUN.COM  ;
:   230k10  10     230000   INITIALIZE    RUN.COM  ;
:   230k11  11     230000   INITIALIZE    RUN.COM  ;
:   230k12  12     230000   INITIALIZE    RUN.COM  ;
:   230k13  13     230000   INITIALIZE    RUN.COM  ;
:   230k14  14     230000   INITIALIZE    RUN.COM  ;
:   230k15  15     230000   INITIALIZE    RUN.COM  ;
:   230k16  16     230000   INITIALIZE    RUN.COM  ;

:   256k1    1     256000   INITIALIZE    RUN.COM  ;
:   256k2    2     256000   INITIALIZE    RUN.COM  ;
:   256k3    3     256000   INITIALIZE    RUN.COM  ;
:   256k4    4     256000   INITIALIZE    RUN.COM  ;
:   256k5    5     256000   INITIALIZE    RUN.COM  ;
:   256k6    6     256000   INITIALIZE    RUN.COM  ;
:   256k7    7     256000   INITIALIZE    RUN.COM  ;
:   256k8    8     256000   INITIALIZE    RUN.COM  ;
:   256k9    9     256000   INITIALIZE    RUN.COM  ;
:   256k10  10     256000   INITIALIZE    RUN.COM  ;
:   256k11  11     256000   INITIALIZE    RUN.COM  ;
:   256k12  12     256000   INITIALIZE    RUN.COM  ;
:   256k13  13     256000   INITIALIZE    RUN.COM  ;
:   256k14  14     256000   INITIALIZE    RUN.COM  ;
:   256k15  15     256000   INITIALIZE    RUN.COM  ;
:   256k16  16     256000   INITIALIZE    RUN.COM  ;
\ ----------------------------------------------------------
:  0.11K17  17        110   INITIALIZE    RUN.COM  ;
:  0.11K18  18        110   INITIALIZE    RUN.COM  ;
:  0.11K19  19        110   INITIALIZE    RUN.COM  ;
:  0.11K20  20        110   INITIALIZE    RUN.COM  ;
:  0.11K21  21        110   INITIALIZE    RUN.COM  ;
:  0.11K22  22        110   INITIALIZE    RUN.COM  ;
:  0.11K23  23        110   INITIALIZE    RUN.COM  ;
:  0.11K24  24        110   INITIALIZE    RUN.COM  ;
:  0.11K25  25        110   INITIALIZE    RUN.COM  ;
:  0.11K26  26        110   INITIALIZE    RUN.COM  ;
:  0.11K27  27        110   INITIALIZE    RUN.COM  ;
:  0.11K28  28        110   INITIALIZE    RUN.COM  ;
:  0.11K29  29        110   INITIALIZE    RUN.COM  ;
:  0.11K30  30        110   INITIALIZE    RUN.COM  ;
:  0.11K31  31        110   INITIALIZE    RUN.COM  ;
:  0.11K32  32        110   INITIALIZE    RUN.COM  ;

:   0.3K17  17        300   INITIALIZE    RUN.COM  ;
:   0.3K18  18        300   INITIALIZE    RUN.COM  ;
:   0.3K19  19        300   INITIALIZE    RUN.COM  ;
:   0.3K20  20        300   INITIALIZE    RUN.COM  ;
:   0.3K21  21        300   INITIALIZE    RUN.COM  ;
:   0.3K22  22        300   INITIALIZE    RUN.COM  ;
:   0.3K23  23        300   INITIALIZE    RUN.COM  ;
:   0.3K24  24        300   INITIALIZE    RUN.COM  ;
:   0.3K25  25        300   INITIALIZE    RUN.COM  ;
:   0.3K26  26        300   INITIALIZE    RUN.COM  ;
:   0.3K27  27        300   INITIALIZE    RUN.COM  ;
:   0.3K28  28        300   INITIALIZE    RUN.COM  ;
:   0.3K29  29        300   INITIALIZE    RUN.COM  ;
:   0.3K30  30        300   INITIALIZE    RUN.COM  ;
:   0.3K31  31        300   INITIALIZE    RUN.COM  ;
:   0.3K32  32        300   INITIALIZE    RUN.COM  ;

:   0.6K17  17        600   INITIALIZE    RUN.COM  ;
:   0.6K18  18        600   INITIALIZE    RUN.COM  ;
:   0.6K19  19        600   INITIALIZE    RUN.COM  ;
:   0.6K20  20        600   INITIALIZE    RUN.COM  ;
:   0.6K21  21        600   INITIALIZE    RUN.COM  ;
:   0.6K22  22        600   INITIALIZE    RUN.COM  ;
:   0.6K23  23        600   INITIALIZE    RUN.COM  ;
:   0.6K24  24        600   INITIALIZE    RUN.COM  ;
:   0.6K25  25        600   INITIALIZE    RUN.COM  ;
:   0.6K26  26        600   INITIALIZE    RUN.COM  ;
:   0.6K27  27        600   INITIALIZE    RUN.COM  ;
:   0.6K28  28        600   INITIALIZE    RUN.COM  ;
:   0.6K29  29        600   INITIALIZE    RUN.COM  ;
:   0.6K30  30        600   INITIALIZE    RUN.COM  ;
:   0.6K31  31        600   INITIALIZE    RUN.COM  ;
:   0.6K32  32        600   INITIALIZE    RUN.COM  ;

:   1.2K17  17       1200   INITIALIZE    RUN.COM  ;
:   1.2K18  18       1200   INITIALIZE    RUN.COM  ;
:   1.2K19  19       1200   INITIALIZE    RUN.COM  ;
:   1.2K20  20       1200   INITIALIZE    RUN.COM  ;
:   1.2K21  21       1200   INITIALIZE    RUN.COM  ;
:   1.2K22  22       1200   INITIALIZE    RUN.COM  ;
:   1.2K23  23       1200   INITIALIZE    RUN.COM  ;
:   1.2K24  24       1200   INITIALIZE    RUN.COM  ;
:   1.2K25  25       1200   INITIALIZE    RUN.COM  ;
:   1.2K26  26       1200   INITIALIZE    RUN.COM  ;
:   1.2K27  27       1200   INITIALIZE    RUN.COM  ;
:   1.2K28  28       1200   INITIALIZE    RUN.COM  ;
:   1.2K29  29       1200   INITIALIZE    RUN.COM  ;
:   1.2K30  30       1200   INITIALIZE    RUN.COM  ;
:   1.2K31  31       1200   INITIALIZE    RUN.COM  ;
:   1.2K32  32       1200   INITIALIZE    RUN.COM  ;

:   2.4K17  17       2400   INITIALIZE    RUN.COM  ;
:   2.4K18  18       2400   INITIALIZE    RUN.COM  ;
:   2.4K19  19       2400   INITIALIZE    RUN.COM  ;
:   2.4K20  20       2400   INITIALIZE    RUN.COM  ;
:   2.4K21  21       2400   INITIALIZE    RUN.COM  ;
:   2.4K22  22       2400   INITIALIZE    RUN.COM  ;
:   2.4K23  23       2400   INITIALIZE    RUN.COM  ;
:   2.4K24  24       2400   INITIALIZE    RUN.COM  ;
:   2.4K25  25       2400   INITIALIZE    RUN.COM  ;
:   2.4K26  26       2400   INITIALIZE    RUN.COM  ;
:   2.4K27  27       2400   INITIALIZE    RUN.COM  ;
:   2.4K28  28       2400   INITIALIZE    RUN.COM  ;
:   2.4K29  29       2400   INITIALIZE    RUN.COM  ;
:   2.4K30  30       2400   INITIALIZE    RUN.COM  ;
:   2.4K31  31       2400   INITIALIZE    RUN.COM  ;
:   2.4K32  32       2400   INITIALIZE    RUN.COM  ;

:   4.8K17  17       4800   INITIALIZE    RUN.COM  ;
:   4.8K18  18       4800   INITIALIZE    RUN.COM  ;
:   4.8K19  19       4800   INITIALIZE    RUN.COM  ;
:   4.8K20  20       4800   INITIALIZE    RUN.COM  ;
:   4.8K21  21       4800   INITIALIZE    RUN.COM  ;
:   4.8K22  22       4800   INITIALIZE    RUN.COM  ;
:   4.8K23  23       4800   INITIALIZE    RUN.COM  ;
:   4.8K24  24       4800   INITIALIZE    RUN.COM  ;
:   4.8K25  25       4800   INITIALIZE    RUN.COM  ;
:   4.8K26  26       4800   INITIALIZE    RUN.COM  ;
:   4.8K27  27       4800   INITIALIZE    RUN.COM  ;
:   4.8K28  28       4800   INITIALIZE    RUN.COM  ;
:   4.8K29  29       4800   INITIALIZE    RUN.COM  ;
:   4.8K30  30       4800   INITIALIZE    RUN.COM  ;
:   4.8K31  31       4800   INITIALIZE    RUN.COM  ;
:   4.8K32  32       4800   INITIALIZE    RUN.COM  ;

:   9.6K17  17       9600   INITIALIZE    RUN.COM  ;
:   9.6K18  18       9600   INITIALIZE    RUN.COM  ;
:   9.6K19  19       9600   INITIALIZE    RUN.COM  ;
:   9.6K20  20       9600   INITIALIZE    RUN.COM  ;
:   9.6K21  21       9600   INITIALIZE    RUN.COM  ;
:   9.6K22  22       9600   INITIALIZE    RUN.COM  ;
:   9.6K23  23       9600   INITIALIZE    RUN.COM  ;
:   9.6K24  24       9600   INITIALIZE    RUN.COM  ;
:   9.6K25  25       9600   INITIALIZE    RUN.COM  ;
:   9.6K26  26       9600   INITIALIZE    RUN.COM  ;
:   9.6K27  27       9600   INITIALIZE    RUN.COM  ;
:   9.6K28  28       9600   INITIALIZE    RUN.COM  ;
:   9.6K29  29       9600   INITIALIZE    RUN.COM  ;
:   9.6K30  30       9600   INITIALIZE    RUN.COM  ;
:   9.6K31  31       9600   INITIALIZE    RUN.COM  ;
:   9.6K32  32       9600   INITIALIZE    RUN.COM  ;

:  19.2K17  17      19200   INITIALIZE    RUN.COM  ;
:  19.2K18  18      19200   INITIALIZE    RUN.COM  ;
:  19.2K19  19      19200   INITIALIZE    RUN.COM  ;
:  19.2K20  20      19200   INITIALIZE    RUN.COM  ;
:  19.2K21  21      19200   INITIALIZE    RUN.COM  ;
:  19.2K22  22      19200   INITIALIZE    RUN.COM  ;
:  19.2K23  23      19200   INITIALIZE    RUN.COM  ;
:  19.2K24  24      19200   INITIALIZE    RUN.COM  ;
:  19.2K25  25      19200   INITIALIZE    RUN.COM  ;
:  19.2K26  26      19200   INITIALIZE    RUN.COM  ;
:  19.2K27  27      19200   INITIALIZE    RUN.COM  ;
:  19.2K28  28      19200   INITIALIZE    RUN.COM  ;
:  19.2K29  29      19200   INITIALIZE    RUN.COM  ;
:  19.2K30  30      19200   INITIALIZE    RUN.COM  ;
:  19.2K31  31      19200   INITIALIZE    RUN.COM  ;
:  19.2K32  32      19200   INITIALIZE    RUN.COM  ;

:  38.4K17  17      38400   INITIALIZE    RUN.COM  ;
:  38.4K18  18      38400   INITIALIZE    RUN.COM  ;
:  38.4K19  19      38400   INITIALIZE    RUN.COM  ;
:  38.4K20  20      38400   INITIALIZE    RUN.COM  ;
:  38.4K21  21      38400   INITIALIZE    RUN.COM  ;
:  38.4K22  22      38400   INITIALIZE    RUN.COM  ;
:  38.4K23  23      38400   INITIALIZE    RUN.COM  ;
:  38.4K24  24      38400   INITIALIZE    RUN.COM  ;
:  38.4K25  25      38400   INITIALIZE    RUN.COM  ;
:  38.4K26  26      38400   INITIALIZE    RUN.COM  ;
:  38.4K27  27      38400   INITIALIZE    RUN.COM  ;
:  38.4K28  28      38400   INITIALIZE    RUN.COM  ;
:  38.4K29  29      38400   INITIALIZE    RUN.COM  ;
:  38.4K30  30      38400   INITIALIZE    RUN.COM  ;
:  38.4K31  31      38400   INITIALIZE    RUN.COM  ;
:  38.4K32  32      38400   INITIALIZE    RUN.COM  ;

:  57.6K17  17      57600   INITIALIZE    RUN.COM  ;
:  57.6K18  18      57600   INITIALIZE    RUN.COM  ;
:  57.6K19  19      57600   INITIALIZE    RUN.COM  ;
:  57.6K20  20      57600   INITIALIZE    RUN.COM  ;
:  57.6K21  21      57600   INITIALIZE    RUN.COM  ;
:  57.6K22  22      57600   INITIALIZE    RUN.COM  ;
:  57.6K23  23      57600   INITIALIZE    RUN.COM  ;
:  57.6K24  24      57600   INITIALIZE    RUN.COM  ;
:  57.6K25  25      57600   INITIALIZE    RUN.COM  ;
:  57.6K26  26      57600   INITIALIZE    RUN.COM  ;
:  57.6K27  27      57600   INITIALIZE    RUN.COM  ;
:  57.6K28  28      57600   INITIALIZE    RUN.COM  ;
:  57.6K29  29      57600   INITIALIZE    RUN.COM  ;
:  57.6K30  30      57600   INITIALIZE    RUN.COM  ;
:  57.6K31  31      57600   INITIALIZE    RUN.COM  ;
:  57.6K32  32      57600   INITIALIZE    RUN.COM  ;

: 115.2K17  17     115200   INITIALIZE    RUN.COM  ;
: 115.2K18  18     115200   INITIALIZE    RUN.COM  ;
: 115.2K19  19     115200   INITIALIZE    RUN.COM  ;
: 115.2K20  20     115200   INITIALIZE    RUN.COM  ;
: 115.2K21  21     115200   INITIALIZE    RUN.COM  ;
: 115.2K22  22     115200   INITIALIZE    RUN.COM  ;
: 115.2K23  23     115200   INITIALIZE    RUN.COM  ;
: 115.2K24  24     115200   INITIALIZE    RUN.COM  ;
: 115.2K25  25     115200   INITIALIZE    RUN.COM  ;
: 115.2K26  26     115200   INITIALIZE    RUN.COM  ;
: 115.2K27  27     115200   INITIALIZE    RUN.COM  ;
: 115.2K28  28     115200   INITIALIZE    RUN.COM  ;
: 115.2K29  29     115200   INITIALIZE    RUN.COM  ;
: 115.2K30  30     115200   INITIALIZE    RUN.COM  ;
: 115.2K31  31     115200   INITIALIZE    RUN.COM  ;
: 115.2K32  32     115200   INITIALIZE    RUN.COM  ;

:   115K17  17     115200   INITIALIZE    RUN.COM  ;
:   115K18  18     115200   INITIALIZE    RUN.COM  ;
:   115K19  19     115200   INITIALIZE    RUN.COM  ;
:   115K20  20     115200   INITIALIZE    RUN.COM  ;
:   115K21  21     115200   INITIALIZE    RUN.COM  ;
:   115K22  22     115200   INITIALIZE    RUN.COM  ;
:   115K23  23     115200   INITIALIZE    RUN.COM  ;
:   115K24  24     115200   INITIALIZE    RUN.COM  ;
:   115K25  25     115200   INITIALIZE    RUN.COM  ;
:   115K26  26     115200   INITIALIZE    RUN.COM  ;
:   115K27  27     115200   INITIALIZE    RUN.COM  ;
:   115K28  28     115200   INITIALIZE    RUN.COM  ;
:   115K29  29     115200   INITIALIZE    RUN.COM  ;
:   115K30  30     115200   INITIALIZE    RUN.COM  ;
:   115K31  31     115200   INITIALIZE    RUN.COM  ;
:   115K32  32     115200   INITIALIZE    RUN.COM  ;

:   128K17  17     128000   INITIALIZE    RUN.COM  ;
:   128K18  18     128000   INITIALIZE    RUN.COM  ;
:   128K19  19     128000   INITIALIZE    RUN.COM  ;
:   128K20  20     128000   INITIALIZE    RUN.COM  ;
:   128K21  21     128000   INITIALIZE    RUN.COM  ;
:   128K22  22     128000   INITIALIZE    RUN.COM  ;
:   128K23  23     128000   INITIALIZE    RUN.COM  ;
:   128K24  24     128000   INITIALIZE    RUN.COM  ;
:   128K25  25     128000   INITIALIZE    RUN.COM  ;
:   128K26  26     128000   INITIALIZE    RUN.COM  ;
:   128K27  27     128000   INITIALIZE    RUN.COM  ;
:   128K28  28     128000   INITIALIZE    RUN.COM  ;
:   128K29  29     128000   INITIALIZE    RUN.COM  ;
:   128K30  30     128000   INITIALIZE    RUN.COM  ;
:   128K31  31     128000   INITIALIZE    RUN.COM  ;
:   128K32  32     128000   INITIALIZE    RUN.COM  ;

:   230K17  17     230000   INITIALIZE    RUN.COM  ;
:   230K18  18     230000   INITIALIZE    RUN.COM  ;
:   230K19  19     230000   INITIALIZE    RUN.COM  ;
:   230K20  20     230000   INITIALIZE    RUN.COM  ;
:   230K21  21     230000   INITIALIZE    RUN.COM  ;
:   230K22  22     230000   INITIALIZE    RUN.COM  ;
:   230K23  23     230000   INITIALIZE    RUN.COM  ;
:   230K24  24     230000   INITIALIZE    RUN.COM  ;
:   230K25  25     230000   INITIALIZE    RUN.COM  ;
:   230K26  26     230000   INITIALIZE    RUN.COM  ;
:   230K27  27     230000   INITIALIZE    RUN.COM  ;
:   230K28  28     230000   INITIALIZE    RUN.COM  ;
:   230K29  29     230000   INITIALIZE    RUN.COM  ;
:   230K30  30     230000   INITIALIZE    RUN.COM  ;
:   230K31  31     230000   INITIALIZE    RUN.COM  ;
:   230K32  32     230000   INITIALIZE    RUN.COM  ;

:   256K17  17     256000   INITIALIZE    RUN.COM  ;
:   256K18  18     256000   INITIALIZE    RUN.COM  ;
:   256K19  19     256000   INITIALIZE    RUN.COM  ;
:   256K20  20     256000   INITIALIZE    RUN.COM  ;
:   256K21  21     256000   INITIALIZE    RUN.COM  ;
:   256K22  22     256000   INITIALIZE    RUN.COM  ;
:   256K23  23     256000   INITIALIZE    RUN.COM  ;
:   256K24  24     256000   INITIALIZE    RUN.COM  ;
:   256K25  25     256000   INITIALIZE    RUN.COM  ;
:   256K26  26     256000   INITIALIZE    RUN.COM  ;
:   256K27  27     256000   INITIALIZE    RUN.COM  ;
:   256K28  28     256000   INITIALIZE    RUN.COM  ;
:   256K29  29     256000   INITIALIZE    RUN.COM  ;
:   256K30  30     256000   INITIALIZE    RUN.COM  ;
:   256K31  31     256000   INITIALIZE    RUN.COM  ;
:   256K32  32     256000   INITIALIZE    RUN.COM  ;


:    _oo  ( -- )  port? @    BAUD.RATE? @  ( 2dup  SET.com.port,BAUD.RATE )  INITIALIZE    RUN.COM  ;

   ' _oo  is  oo

HEX
: [0~F>ASC] ( N ... N1 )  >R
          R@  0  9 BETWEEN
  IF      R> 30 +
  ELSE    R@ 0A 0F BETWEEN
    IF    R> 37 +
    ELSE  R>
    THEN
  THEN    ;
:   XX>232  10 /MOD    [0~F>ASC]  COMnEMIT  [0~F>ASC]  COMnEMIT  0D COMnEMIT  ;

: XXXX>232  10 /MOD  10 /MOD  10 /MOD
  [0~F>ASC]  COMnEMIT  [0~F>ASC]  COMnEMIT  [0~F>ASC]  COMnEMIT  [0~F>ASC]  COMnEMIT  0D COMnEMIT  ;

CREATE  "BUFFER    9 ALLOT

: NUMBER>STRING ( N ... ADDR LENGTH )            \ STRING == ADDR LENGTH
  8 0 DO  BASE @ /MOD  LOOP  9  0  DO  [0~F>ASC] I "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS ;

: NUMBER>STRING(9)  ( N ... ADDR LENGTH )            \ STRING == ADDR LENGTH
  DUP   0<
  IF    '-'  "BUFFER  C!     ABS
        8 0 DO  BASE @ /MOD  LOOP  9  0  DO  [0~F>ASC] I 1+ "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  ELSE  8 0 DO  BASE @ /MOD  LOOP  9  0  DO  [0~F>ASC] I    "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  THEN  ;

DEFER  _STRING.with.LEADING.0.REMOVED

: NUMBER>STRING ( N ... ADDR LENGTH )  DUP>R   \  ABS     \ STRING == ADDR LENGTH
  8 0 DO    BASE  @    /MOD  LOOP  9  0  DO  [0~F>ASC] I "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  _STRING.with.LEADING.0.REMOVED
  R>    0<
  IF    2DUP   OVER   DUP>R   1+   SWAP   CMOVE>   '-' R> C!   1+
  THEN  ;

: NUMBER>STRING ( N ... ADDR LENGTH )  DUP>R   \  ABS     \ STRING == ADDR LENGTH
  8 0 DO  0 BASE  @  um/MOD  LOOP  9  0  DO  [0~F>ASC] I "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  _STRING.with.LEADING.0.REMOVED
  R>    0<
  IF    2DUP   OVER   DUP>R   1+   SWAP   CMOVE>   '-' R> C!   1+
  THEN  ;

\ ' NUMBER>STRING   IS   _NUMBER>STRING

VARIABLE  STRING>NUMBER.CORRECT?

\ : STRING>NUMBER ( ADDR LENGTH ... N  -1 /  0  )  0  -ROT   \ STRING == ADDR LENGTH
\  BOUNDS      -1  STRING>NUMBER.CORRECT?  !           \ 5 31 32 33 34 35      12345
\  DO     BASE @ *   I C@   BASE @   DIGIT                        \    |___addr
\         IF     +
\         ELSE   DROP  0  STRING>NUMBER.CORRECT?  !   LEAVE
\         THEN
\  LOOP   STRING>NUMBER.CORRECT?  @   ;  \ IF  ( BASE @  / ) -1  ELSE  DROP 0  THEN  ;

VARIABLE  0x?     


: STRING.with.LEADING.BLANK.REMOVED  ( ADDR LENGTH ... ADDR1 LENGTH1 )    DUP>R    DUP   0
  ?DO    OVER   I   +    C@   20  <>    ( BLANK=20h )
         IF     LEAVE
         THEN   1-
  LOOP   R>     OVER   -   ROT  +  SWAP  DUP 0=  IF   DROP  1-  1   THEN  ;
   
\ ' STRING.WITH.LEADING.BLANK.REMOVED     _STRING.WITH.LEADING.BLANK.REMOVED

VARIABLE  '+'.PRECEEDED
VARIABLE  '-'.PRECEEDED

: CHECK.+/-  ( ADDR LENGTH ... ADDR1 LENGTH1 )    '+'.PRECEEDED  OFF     '-'.PRECEEDED  OFF
  >R   >R      R@ C@
  CASE    '-'  OF    '-'.PRECEEDED  ON   -1  ENDOF
          '+'  OF    '+'.PRECEEDED  ON   -1  ENDOF
                                          0   SWAP
  ENDCASE
  IF       R> 1+  R> 1-
  ELSE     R>     R>
  THEN     ;


DEFER  _STRING.with.LEADING.BLANK.REMOVED

: STRING>NUMBER ( ADDR LENGTH ... N  -1 / N 0  )   -TRAILING    _STRING.with.LEADING.BLANK.REMOVED    CHECK.+/-
  0  -ROT   \ STRING == ADDR LENGTH
  BOUNDS      -1  STRING>NUMBER.CORRECT?  !           \ 5 31 32 33 34 35      12345
  DO     0x? @
         IF         10 *   I C@       10
         ELSE   BASE @ *   I C@   BASE @
         THEN   DIGIT                        \    |___addr
         IF     +
         ELSE   DROP ( 2DROP )  0  STRING>NUMBER.CORRECT?  !   LEAVE
         THEN
  LOOP   STRING>NUMBER.CORRECT?  @   0 0x? !
  DUP
  IF     '-'.PRECEEDED @
         IF     SWAP   NEGATE   SWAP
         THEN
  THEN   ;  \ IF  ( BASE @  / ) -1  ELSE  DROP 0  THEN  ;

VARIABLE  DELAY.STRING>232    30  DELAY.STRING>232  !

: DS232   ( N ... )    DELAY.STRING>232  !  ;

: STRING>232  BOUNDS  DO  I C@  COMnEMIT  DELAY.STRING>232 @  MS   LOOP  0D  COMnEMIT  ;

DEFER  _$>232

' STRING>232  IS  _$>232

: NUMBER>232  NUMBER>STRING  STRING>232  ;  

: 232."   STATE @
          IF     COMPILE  EXI   COMPILE  INI   COMPILE (S") ,"  COMPILE  STRING>232
          ELSE   EXI  INI 22 WORD NEW$ DUP>R OVER C@ 1+ MOVE R> COUNT    STRING>232
          THEN   ; IMMEDIATE



































  
DECIMAL
VARIABLE  230400*  230400       230400*  !
: TN  ( n -- )     230400   +   230400*  !    ;

:   230k1    1     230400*  @   INITIALIZE    RUN.COM  ;
:   230k2    2     230400*  @   INITIALIZE    RUN.COM  ;
:   230k3    3     230400*  @   INITIALIZE    RUN.COM  ;
:   230k4    4     230400*  @   INITIALIZE    RUN.COM  ;
:   230k5    5     230400*  @   INITIALIZE    RUN.COM  ;
:   230k6    6     230400*  @   INITIALIZE    RUN.COM  ;
:   230k7    7     230400*  @   INITIALIZE    RUN.COM  ;
:   230k8    8     230400*  @   INITIALIZE    RUN.COM  ;
:   230k9    9     230400*  @   INITIALIZE    RUN.COM  ;
:   230k10  10     230400*  @   INITIALIZE    RUN.COM  ;
:   230k11  11     230400*  @   INITIALIZE    RUN.COM  ;
:   230k12  12     230400*  @   INITIALIZE    RUN.COM  ;
:   230k13  13     230400*  @   INITIALIZE    RUN.COM  ;
:   230k14  14     230400*  @   INITIALIZE    RUN.COM  ;
:   230k15  15     230400*  @   INITIALIZE    RUN.COM  ;
:   230k16  16     230400*  @   INITIALIZE    RUN.COM  ;
HEX

















\ include  1CellStack2.f
\ ******************************************************************************
\ ONE CELL STACK  for temperary storing the address of >1, >2, >3... etc.

: >ADDR.OF.REAL.VALUE.IN.VARIBLE  ( CFA ... ADDR )  4 +  ;

2VARIABLE (#1)
2VARIABLE (#2)
2VARIABLE (#3)
2VARIABLE (#4)
2VARIABLE (#5)
2VARIABLE (#6)
2VARIABLE (#7)
2VARIABLE (#8)
2VARIABLE (#9)
2VARIABLE (#10)
2VARIABLE (#11)
2VARIABLE (#12)
2VARIABLE (#13)
2VARIABLE (#14)
2VARIABLE (#15)
2VARIABLE (#16)
2VARIABLE (#17)
2VARIABLE (#18)
2VARIABLE (#19)
2VARIABLE (#20)
2VARIABLE (#21)
2VARIABLE (#22)
2VARIABLE (#23)
2VARIABLE (#24)

: CHECK.COMSUMED  ( CFA ... VALUE.ADDR ) DUP >R          \ 1 cell stack
  >ADDR.OF.REAL.VALUE.IN.VARIBLE   DUP  2@
  IF    R>  >NAME  .ID -1  ABORT"  hasn't comsumed yet! "
  ELSE  DROP  R>  DROP  -1  SWAP  2!
  THEN  ;


: CHECK.COMSUMED  ( CFA ... VALUE.ADDR ) DUP >R          \ 1 cell stack
  >ADDR.OF.REAL.VALUE.IN.VARIBLE   DUP  2@
  IF    R@  >NAME  .ID   0  s>d    r>   >ADDR.OF.REAL.VALUE.IN.VARIBLE  2!   -1  ABORT"  hasn't comsumed yet! "
  ELSE  DROP  R>  DROP  -1  SWAP   2!
  THEN  ;
 


: CHECK.RESOLVE   ( CFA ... ADDR' VALUE.ADDR ) DUP >R    \ 1 cell stack
  >ADDR.OF.REAL.VALUE.IN.VARIBLE   DUP  2@
  IF    R> DROP  DUP @  ROT  0  SWAP  2!
  ELSE  R>  >NAME  .ID -1  ABORT"  has been resolved already! "
  THEN  ;



: CHECK.RESOLVE   ( CFA ... ADDR' VALUE.ADDR ) DUP >R    \ 1 cell stack
  >ADDR.OF.REAL.VALUE.IN.VARIBLE   DUP  2@
  IF    R>   @  ROT  0  SWAP  2!
  ELSE  R>  >NAME  .ID -1  ABORT"  has been resolved already! "
  THEN  ;

\ INTERACTIVE MODE STACK       1 LEVEL ONLY

: >1     [']  (#1)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >2     [']  (#2)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >3     [']  (#3)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >4     [']  (#4)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >5     [']  (#5)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >6     [']  (#6)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >7     [']  (#7)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >8     [']  (#8)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >9     [']  (#9)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >10    ['] (#10)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >11    ['] (#11)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >12    ['] (#12)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >13    ['] (#13)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >14    ['] (#14)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >15    ['] (#15)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >16    ['] (#16)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >17    ['] (#17)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >18    ['] (#18)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >19    ['] (#19)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >20    ['] (#20)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >21    ['] (#21)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >22    ['] (#22)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >23    ['] (#23)  CHECK.COMSUMED   ;    \            ( ADDR' ... )
: >24    ['] (#24)  CHECK.COMSUMED   ;    \            ( ADDR' ... )

:  1>    [']  (#1)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  2>    [']  (#2)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  3>    [']  (#3)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  4>    [']  (#4)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  5>    [']  (#5)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  6>    [']  (#6)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  7>    [']  (#7)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  8>    [']  (#8)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
:  9>    [']  (#9)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 10>    ['] (#10)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 11>    ['] (#11)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 12>    ['] (#12)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 13>    ['] (#13)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 14>    ['] (#14)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 15>    ['] (#15)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 16>    ['] (#16)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 17>    ['] (#17)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 18>    ['] (#18)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 19>    ['] (#19)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 20>    ['] (#20)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 21>    ['] (#21)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 22>    ['] (#22)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 23>    ['] (#23)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )
: 24>    ['] (#24)  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )

\ ******************************************************************************








2VARIABLE (#1).
2VARIABLE (#2).
2VARIABLE (#3).
2VARIABLE (#4).
2VARIABLE (#5).
2VARIABLE (#6).
2VARIABLE (#7).
2VARIABLE (#8).
2VARIABLE (#9).
2VARIABLE (#10).
2VARIABLE (#11).
2VARIABLE (#12).
2VARIABLE (#13).
2VARIABLE (#14).
2VARIABLE (#15).
2VARIABLE (#16).
2VARIABLE (#17).
2VARIABLE (#18).
2VARIABLE (#19).
2VARIABLE (#20).
2VARIABLE (#21).
2VARIABLE (#22).
2VARIABLE (#23).
2VARIABLE (#24).


: >1.     [']  (#1).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >2.     [']  (#2).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >3.     [']  (#3).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >4.     [']  (#4).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >5.     [']  (#5).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >6.     [']  (#6).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >7.     [']  (#7).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >8.     [']  (#8).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >9.     [']  (#9).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >10.    ['] (#10).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >11.    ['] (#11).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >12.    ['] (#12).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >13.    ['] (#13).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >14.    ['] (#14).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >15.    ['] (#15).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >16.    ['] (#16).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >17.    ['] (#17).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >18.    ['] (#18).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >19.    ['] (#19).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >20.    ['] (#20).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >21.    ['] (#21).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >22.    ['] (#22).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >23.    ['] (#23).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).
: >24.    ['] (#24).  CHECK.COMSUMED   ;    \            ( ADDR' ... ).

:  1>.    [']  (#1).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  2>.    [']  (#2).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  3>.    [']  (#3).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  4>.    [']  (#4).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  5>.    [']  (#5).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  6>.    [']  (#6).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  7>.    [']  (#7).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  8>.    [']  (#8).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
:  9>.    [']  (#9).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 10>.    ['] (#10).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 11>.    ['] (#11).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 12>.    ['] (#12).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 13>.    ['] (#13).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 14>.    ['] (#14).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 15>.    ['] (#15).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 16>.    ['] (#16).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 17>.    ['] (#17).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 18>.    ['] (#18).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 19>.    ['] (#19).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 20>.    ['] (#20).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 21>.    ['] (#21).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 22>.    ['] (#22).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 23>.    ['] (#23).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).
: 24>.    ['] (#24).  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' ).

\ ******************************************************************************


























2VARIABLE (#1)..
2VARIABLE (#2)..
2VARIABLE (#3)..
2VARIABLE (#4)..
2VARIABLE (#5)..
2VARIABLE (#6)..
2VARIABLE (#7)..
2VARIABLE (#8)..
2VARIABLE (#9)..
2VARIABLE (#10)..
2VARIABLE (#11)..
2VARIABLE (#12)..
2VARIABLE (#13)..
2VARIABLE (#14)..
2VARIABLE (#15)..
2VARIABLE (#16)..
2VARIABLE (#17)..
2VARIABLE (#18)..
2VARIABLE (#19)..
2VARIABLE (#20)..
2VARIABLE (#21)..
2VARIABLE (#22)..
2VARIABLE (#23)..
2VARIABLE (#24)..


: >1..     [']  (#1)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >2..     [']  (#2)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >3..     [']  (#3)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >4..     [']  (#4)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >5..     [']  (#5)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >6..     [']  (#6)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >7..     [']  (#7)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >8..     [']  (#8)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >9..     [']  (#9)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >10..    ['] (#10)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >11..    ['] (#11)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >12..    ['] (#12)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >13..    ['] (#13)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >14..    ['] (#14)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >15..    ['] (#15)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >16..    ['] (#16)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >17..    ['] (#17)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >18..    ['] (#18)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >19..    ['] (#19)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >20..    ['] (#20)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >21..    ['] (#21)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >22..    ['] (#22)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >23..    ['] (#23)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..
: >24..    ['] (#24)..  CHECK.COMSUMED   ;    \            ( ADDR' ... )..

:  1>..    [']  (#1)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  2>..    [']  (#2)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  3>..    [']  (#3)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  4>..    [']  (#4)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  5>..    [']  (#5)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  6>..    [']  (#6)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  7>..    [']  (#7)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  8>..    [']  (#8)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
:  9>..    [']  (#9)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 10>..    ['] (#10)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 11>..    ['] (#11)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 12>..    ['] (#12)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 13>..    ['] (#13)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 14>..    ['] (#14)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 15>..    ['] (#15)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 16>..    ['] (#16)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 17>..    ['] (#17)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 18>..    ['] (#18)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 19>..    ['] (#19)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 20>..    ['] (#20)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 21>..    ['] (#21)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 22>..    ['] (#22)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 23>..    ['] (#23)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..
: 24>..    ['] (#24)..  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )..

\ ******************************************************************************





















2VARIABLE (#1)...
2VARIABLE (#2)...
2VARIABLE (#3)...
2VARIABLE (#4)...
2VARIABLE (#5)...
2VARIABLE (#6)...
2VARIABLE (#7)...
2VARIABLE (#8)...
2VARIABLE (#9)...
2VARIABLE (#10)...
2VARIABLE (#11)...
2VARIABLE (#12)...
2VARIABLE (#13)...
2VARIABLE (#14)...
2VARIABLE (#15)...
2VARIABLE (#16)...
2VARIABLE (#17)...
2VARIABLE (#18)...
2VARIABLE (#19)...
2VARIABLE (#20)...
2VARIABLE (#21)...
2VARIABLE (#22)...
2VARIABLE (#23)...
2VARIABLE (#24)...


: >1...     [']  (#1)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >2...     [']  (#2)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >3...     [']  (#3)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >4...     [']  (#4)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >5...     [']  (#5)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >6...     [']  (#6)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >7...     [']  (#7)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >8...     [']  (#8)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >9...     [']  (#9)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >10...    ['] (#10)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >11...    ['] (#11)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >12...    ['] (#12)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >13...    ['] (#13)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >14...    ['] (#14)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >15...    ['] (#15)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >16...    ['] (#16)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >17...    ['] (#17)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >18...    ['] (#18)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >19...    ['] (#19)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >20...    ['] (#20)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >21...    ['] (#21)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >22...    ['] (#22)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >23...    ['] (#23)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...
: >24...    ['] (#24)...  CHECK.COMSUMED   ;    \            ( ADDR' ... )...

:  1>...    [']  (#1)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  2>...    [']  (#2)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  3>...    [']  (#3)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  4>...    [']  (#4)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  5>...    [']  (#5)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  6>...    [']  (#6)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  7>...    [']  (#7)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  8>...    [']  (#8)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
:  9>...    [']  (#9)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 10>...    ['] (#10)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 11>...    ['] (#11)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 12>...    ['] (#12)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 13>...    ['] (#13)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 14>...    ['] (#14)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 15>...    ['] (#15)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 16>...    ['] (#16)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 17>...    ['] (#17)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 18>...    ['] (#18)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 19>...    ['] (#19)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 20>...    ['] (#20)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 21>...    ['] (#21)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 22>...    ['] (#22)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 23>...    ['] (#23)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...
: 24>...    ['] (#24)...  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )...

\ ******************************************************************************













2VARIABLE (#1)....
2VARIABLE (#2)....
2VARIABLE (#3)....
2VARIABLE (#4)....
2VARIABLE (#5)....
2VARIABLE (#6)....
2VARIABLE (#7)....
2VARIABLE (#8)....
2VARIABLE (#9)....
2VARIABLE (#10)....
2VARIABLE (#11)....
2VARIABLE (#12)....
2VARIABLE (#13)....
2VARIABLE (#14)....
2VARIABLE (#15)....
2VARIABLE (#16)....
2VARIABLE (#17)....
2VARIABLE (#18)....
2VARIABLE (#19)....
2VARIABLE (#20)....
2VARIABLE (#21)....
2VARIABLE (#22)....
2VARIABLE (#23)....
2VARIABLE (#24)....


: >1....     [']  (#1)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >2....     [']  (#2)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >3....     [']  (#3)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >4....     [']  (#4)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >5....     [']  (#5)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >6....     [']  (#6)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >7....     [']  (#7)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >8....     [']  (#8)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >9....     [']  (#9)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >10....    ['] (#10)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >11....    ['] (#11)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >12....    ['] (#12)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >13....    ['] (#13)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >14....    ['] (#14)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >15....    ['] (#15)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >16....    ['] (#16)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >17....    ['] (#17)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >18....    ['] (#18)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >19....    ['] (#19)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >20....    ['] (#20)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >21....    ['] (#21)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >22....    ['] (#22)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >23....    ['] (#23)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....
: >24....    ['] (#24)....  CHECK.COMSUMED   ;    \            ( ADDR' ... )....

:  1>....    [']  (#1)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  2>....    [']  (#2)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  3>....    [']  (#3)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  4>....    [']  (#4)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  5>....    [']  (#5)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  6>....    [']  (#6)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  7>....    [']  (#7)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  8>....    [']  (#8)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
:  9>....    [']  (#9)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 10>....    ['] (#10)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 11>....    ['] (#11)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 12>....    ['] (#12)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 13>....    ['] (#13)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 14>....    ['] (#14)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 15>....    ['] (#15)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 16>....    ['] (#16)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 17>....    ['] (#17)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 18>....    ['] (#18)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 19>....    ['] (#19)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 20>....    ['] (#20)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 21>....    ['] (#21)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 22>....    ['] (#22)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 23>....    ['] (#23)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....
: 24>....    ['] (#24)....  CHECK.RESOLVE    ;    \ ADDR -1    ( ... ADDR' )....

\ ******************************************************************************

































: SET.com.port,BAUD.RATE  ( PORT baud.rate -- )
  over   1 20 ( 7 ) between not abort"  com port 1 ~ 32 only "
  BAUD.RATE  PORT ;

CODE FLIP ( 1234 -- 3412 )  XCHG BH,  BL   NEXT C;    \  ><

STM32F407?  @
#IF
\ create    ram0     ram.end  @    ram.start @   -  allot

\ CREATE    cp0'         10000 ALLOT     cp0'          10000  ff  fill  \   64k byte
  CREATE    cp0'.flash   20000 ALLOT     cp0'.flash    20000  ff  fill  \  128k byte
  CREATE    cp0'.ram     10000 ALLOT     cp0'.ram      10000  ff  fill  \   32k byte
  CREATE    cp0'.rom     80000 ALLOT     cp0'.rom      80000  ff  fill  \   32k byte
#ELSE
  CREATE    cp0'.flash  100000 ALLOT     cp0'.flash    20000  ff  fill  \    1m byte
  CREATE    cp0'.ram      8000 ALLOT     cp0'.ram       8000  ff  fill  \   32k byte
  CREATE    cp0'.rom      8000 ALLOT     cp0'.rom       8000  ff  fill  \   32k byte
#THEN


MECRISP32F429/407?  @
#if
  CREATE    cp0'.flash  200000 ALLOT     cp0'.flash   200000  ff  fill  \    2m byte
  CREATE    cp0'.ram     40000 ALLOT     cp0'.ram      40000  ff  fill  \  256K byte
  CREATE    cp0'.ram.8m 800000 ALLOT     cp0'.ram.8m  800000  ff  fill  \    8m byte  extended RAM
\ CREATE    cp0'.rom    200000 ALLOT     cp0'.rom     200000  ff  fill  \    2m byte
#then



variable  remap>0?        remap>0?  on

variable  flash.rom.start.offset  0 ( 08000000 )  flash.rom.start.offset  ! 


stm32f407.sF?  @
#if
  variable  flash.rom.start         0 ( 08000000 )  flash.rom.start  !  \ ti stellaris 00000000
  variable  flash.rom.end           0801ffff  flash.rom.end    !  \              0001ffff
#else
  variable  flash.rom.start            00000  flash.rom.start  !  \ ti stellaris 00000000
  variable  flash.rom.end             1fffff  flash.rom.end    !  \              0001ffff
#then
       
variable   high.64k

: a'>a  ( a' -- a )     REMAP>0?  @  IF   F7FFFFFF    AND    THEN
  dup  ram.start        @  ram.end        @  ( 1- )   between  if        ram.start  @  -  cp0'.ram    +  exit  then
  dup  flash.rom.start  @  flash.rom.end  @           between  if  flash.rom.start  @  -  cp0'.flash  +  exit  then
\ dup        rom.start  @        rom.end  @  ( 1- )   between  if        rom.start  @  -  cp0'.rom    +  exit  then
  -1     abort"    \ ******* a' exceeds the flash and ram memory allowable space ******* "  ;

VARIABLE  cp'
stellaris.launchpad?  @  #if   0               cp'  !   #then
stm32f407.sF?         @  #if   0 ( 08000000 )  cp'  !   #then

: HERE'  cp'  @   ;
:  ORG   cp'  !   ;     '  org  alias  org.
: ALLOT' cp' +!   ;

: 2xor ( d1 d2 -- d3 )  rot  xor  >r  and  r>  ;
: 2or  ( d1 d2 -- d3 )  rot   or  >r  and  r>  ;
: 2and ( d1 d2 -- d3 )  rot  and  >r  and  r>  ;
\ --------------------------------------------------------------------------------------------------
:  32!   ( n a -- )  !       ;   \ 32 bit store.   12345678  var  !  ===>    78 56 34 12
:  24!   ( n a -- )  >r   0ffffff and   100 /mod  100 /mod  r@ 2 + c!  r@ 1+  c!   r>  c!  ;
:  16@   ( a -- n )  @    0ffff  and  ;
:  32@   ( a -- n )  @   ;
:  48@   ( a -- d ) 2@  ( L H )  FFFF  AND  ;
:  64@   ( a -- d ) 2@                      ;

:  80@   ( a -- DL DH )  dup>r   2@  ( DL )  r>  8  +  2@           FFFF.  2AND  ( DH )  ;
:  96@   ( a -- DL DH )  dup>r   2@  ( DL )  r>  8  +  2@       FFFFFFFF.  2AND  ( DH )  ;
: 112@   ( a -- DL DH )  dup>r   2@  ( DL )  r>  8  +  2@   FFFFFFFFFFFF.  2AND  ( DH )  ;
: 128@   ( a -- DL DH )  dup>r   2@  ( DL )  r>  8  +  2@                        ( DH )  ;

:  80@   ( a -- DL DH )  dup>r   2@  SWAP ( 0~63 QL )  r>  8  +  2@ SWAP ( 64~127 )         FFFF.  2AND ( QH )  ;
:  96@   ( a -- DL DH )  dup>r   2@  SWAP ( 0~63 QL )  r>  8  +  2@ SWAP ( 64~127 )     FFFFFFFF.  2AND ( QH )  ;
: 112@   ( a -- DL DH )  dup>r   2@  SWAP ( 0~63 QL )  r>  8  +  2@ SWAP ( 64~127 ) FFFFFFFFFFFF.  2AND ( QH )  ;
: 128@   ( a -- DL DH )  dup>r   2@  SWAP ( 0~63 QL )  r>  8  +  2@ SWAP ( 64~127 )                     ( QH )  ;

:  80@   ( a  -- dL dH )  dup>r  32@  ( L1 )  r@  4+  32@  ( H1 )  r> 8 + 16@  ( L2 )            0   ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------


:  96@   ( a  -- dL dH )  dup>r  32@  ( L1 )  r@  4+  32@  ( H1 )  r> 8 + 32@  ( L2 )            0   ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------



: 112@   ( a  -- dL dH )  dup>r  32@  ( L1 )  r@  4+  32@  ( H1 )  r@ 8 + 32@  ( L2 )  r> 0c + 16@   ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------



: 128@   ( a  -- dL dH )  dup>r  32@  ( L1 )  r@  4+  32@  ( H1 )  r@ 8 + 32@  ( L2 )  r> 0c + 32@   ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------



: 16!    >R   0FFFF AND   100 /MOD  R@ 1+ C!  R> C!      ;  \ high order number at high address  \ little endian
:  C@'   a'>a   C@     ;                    :  8@'  c@'  ;
:  C!'   a'>a   C!     ;                    :  8!'  c!'  ;
: 16!'   a'>a  16!     ;
\ :   !'   a'>a  16!     ;
: 16@'   DUP C@'   SWAP 1+ C@' 100 * OR  ;
:   @'   DUP C@'   SWAP 1+ C@' 100 * OR  ;
:  +!'   (   N  ADDR' ... )   >R  R@   @'  +  R>   16!'  ;
: C+!'   ( BYTE ADDR' ... )   >R  R@  C@'  +  R>    C!'  ;

: 32@^   a'>a  @             ;   \  ???    0~7   8~15   16~23   24~31
: 24@^   32@^  0ffffff  and  ;   \  ???
: 16@^   32@^    0ffff  and  ;   \  ???                            \ stm8s

:  2@'   a'>a  2@         ;
: 64@'   a'>a  2@         ;        

: 56@'   a'>a  2@   00ffFFFFffffFFFF.   2and   ;
: 48@'   a'>a  2@   0000FFFFffffFFFF.   2and   ;
: 40@'   a'>a  2@   000000FFffffFFFF.   2and   ;


: 32@'   a'>a   @         ;   \ 0~7   8~15   16~23   24~31
: 24@'   32@'  0ffffff  and  ;   \ 0~7   8~15   16~23
: 16@'   32@'    0ffff  and  ;   \ 0~7   8~15
:  8@'   32@'      0ff  and  ;   \ 0~7

: 32!'   a'>a  32!  ;
: 24!'   a'>a  24!  ;
\ : 16!'   !'  ;   \ 0~7  8~15  ( L H )
:  8!'  c!'  ;   \ 0~7
: 64!'   a'>a   2!  ;
:   @^    16@'  flip            ;                              \ stm8s
: 16@^    16@'  flip            ;  \ low order number at high address
:   !^    >r    flip  r>  16!'  ;
: 16!^    >r    flip  r>  16!'  ;  \ low order number at high address

:  @'n    @'  F1ff  and  ; \ special usage of rb=x

:  C,'   ( BYTE ... )        HERE'    C!'   1 ALLOT'  ;    :  8,'   C,'  ;
: 16,'   ( n .. ... )        HERE'   16!'   2 ALLOT'  ;  \ : 16,'    ,'  ;
:   ,'   ( n .. ... )        HERE'   16!'   2 ALLOT'  ;  \ : 16,'    ,'  ;
:   ,^   ( n ...... )   flip HERE'   16!'   2 ALLOT'  ;  \ : 16,'    ,'  ;

: 16,^   ( 16bit... )        HERE'   16!^   2 ALLOT'  ;

: 24,'  100   /mod  swap  c,'  100 /mod  swap  c,'  100 /mod  swap  c,'                                           drop  ;
: 32,'  100   /mod  swap  c,'  100 /mod  swap  c,'  100 /mod  swap  c,'  100 /mod  swap  c,'                      drop  ;
: 40,'  100 um/mod  swap  c,'  100 /mod  swap  c,'  100 /mod  swap  c,'  100 /mod  swap  c,'  100 /mod  swap  c,' drop  ;
: 64,'  swap  32,'  32,'  ;
:  0~15<->16~31      ( n1 -- n2 )   dup 10 rshift  swap  10 lshift +  ;
: 16~31<->0~15       ( n1 -- n2 )   0~15<->16~31  ;
: 31~16<->15~0       ( n1 -- n2 )   0~15<->16~31  ;
:  15~0<->31~16      ( n1 -- n2 )   0~15<->16~31  ;

: 32!^  ( n a' -- )   >r   0~15<->16~31   r>  32!'  ;












                                           
: cmove??       ( a a' n --)   0  do  over i +  c@  over  i  +  c!'   loop  2drop  ;  \ different world
: cmove(.>')    ( a a' n --)   0  do  over i +  c@  over  i  +  c!'   loop  2drop  ;  \ different world
: cmove('>.)    ( a a' n --)   0  do  over i +  c@' over  i  +  c!    loop  2drop  ;  \ different world








defer  _U1       
defer  _U1(seperate)

: check.blank    ( upper lower  -- )
  do        i    32@'  -1   <>
     if     cr   i    0a  u.r   3  spaces   i   32@'  0a  u.r    i   _U1           drop
     then   key?    if     leave     then     4
  +loop     ;

: ck    30000  4000  check.blank     40000  35000  check.blank  ;


: cmove'  ( from' to' length -- )  0  ?do   over i + c@'  over  i + c!'  loop   2drop  ;

: compare.data'  ( a1' a2' len -- )     0
  do    over  i +  c@'   over i +  c@'  <>
        if    cr   over i +  dup 9 u.r  c@' 5 u.r
                   dup  i +  dup 9 u.r  c@' 5 u.r
        then
  loop  2drop  ;

: compare.data   ( a1' a2' len -- )     0
  do    over  i +  c@'   over i +  c@'  <>
        if    cr   over i +  dup 9 u.r  c@' ."  -->" 4 u.r
                   dup  i +  dup        c@'          4 u.r  ."   <--"  9 u.r
        then        
  loop  2drop  ;

: compare.data   ( a1' a2' len -- )     0
  ?do   over  i +  c@'   over i +  c@'  <>
        if    cr   over i +  dup 9 u.r  c@' ."  -->" 4 u.r
                   dup  i +  dup        c@'          4 u.r  ."   <--"  9 u.r
        then       key?  if  leave  then
  loop  2drop  ;

: c000:e000.2000  ( -- )   2000 0 do  i  c@'   i  2000 +  c@' <>  if  cr  i   then  loop  ;

: lt  ( loop.test )   begin  100 ms  key  dup  emit  dup COMnEMIT  '1'  =  until ;

: CFA>CFA'  ( CFA ... CFA' )  4  +  @  ;
:    >CFA'  ( CFA ... CFA' )  4  +  @  ;  \ ' CR' >CFA'  == 386

:  CFA'.OF'     '  CFA>CFA'  ;  \  mecrispForth?  #if   :  CFA'.OF'     '  CFA>CFA'  ;   #then
: [CFA'.OF]     '  CFA>CFA'  [COMPILE] LITERAL  ;  IMMEDIATE

:  CFA'.OF   STATE @  IF  ['] [CFA'.OF] EXECUTE  else  CFA'.OF'  THEN  ; IMMEDIATE  \ ????
:  ''        STATE @  IF  ['] [CFA'.OF] EXECUTE  else  CFA'.OF'  THEN  ; IMMEDIATE  \ ????




















decimal
\ include  graphic4.f     \ include Z4a.f

hex \  10  set-font
: IFLOAT   ( N ... ; F: ... R )  s>d   D>F  ;
: I>FLOAT  ( N ... ; F: ... R )  s>d   D>F  ;

: INT  F>D  DROP ;


HEX   : TARGET.NAME.FIELD.START.ADDR  c004 ;
      : VAR.buf.image.size            400  ;
      : VAR.buf.image  ( 8DE00 )    80000  TARGET.NAME.FIELD.START.ADDR +   VAR.buf.image.size  -    ;
      : TARGET.NAME.FIELD.START.ADDR.at.ram  11600 (  11c00 ) ;

DECIMAL
comment:  before floading this file, we have to prepare the followings..
\ with-img fsave Win32for    <-- modifying this line to the next line. ( in extend.f line 185 )
  with-img fsave F.exe       \   thanks Cheng-Hong Chen  2010.1.1
***** methods to extend memory size ********
win32for              \ enter win32for.4.2.671
sys                   \ enter dos
win32for  fload meta    setsize   bye    \ adding 2Meg byte to each is ok.
fkernel   fload extend          \ bye
fsave     f.exe       \ save f.exe as a working horse. put it on the desktop.

also copy WinIo.dll, WinIo.sys, WINIO.VXD to the directory the same as Win32forth.exe.
comment;

\       : MAXIZE.LIST  128    11858  54    XCALL DROP  ;   MAXIZE.LIST
\  hex  : MAXIZE.LIST   80     FFFF  36    XCALL DROP  ;   MAXIZE.LIST
\  HEX    4000 80 setmaxcolrow

only forth also definitions

1280 value screen-mwidth
1024 value screen-mheight
\   400 to screen-width
\   300 to screen-height
    950 to screen-width
    650 to screen-height

\ ---------------------------------------------------------------
\       Define the BIT-WINDOW global drawing functions
\ ---------------------------------------------------------------

Windc demo-dc

  2 value bit-originx
  2 value bit-originy
  0 value VGA-X                 \ VGA x coordinate in pixels
  0 value VGA-Y                 \ VGA y coordinate in pixels
  0 value LINE-VALUE
  0 value walking?
  0 value line-count
  0 value save-count
  0 value do-printing?

-1 value prev-x
-1 value prev-y

: moveto        ( x y -- )
                0max screen-height 4 - min swap 0max screen-width 4 - min swap
                bit-originy + swap bit-originx +  swap
                over prev-x = over prev-y = and
                IF      2drop
                ELSE    2dup to prev-y
                             to prev-x
                        2dup PrinterMoveTo: ThePrinter
                                    MoveTo: demo-dc
                THEN    ;

: lineto        ( x y -- )
                0max screen-height 4 - min swap 0max screen-width 4 - min swap
                bit-originy + swap bit-originx +  swap
                over prev-x = over prev-y = and
                IF      2drop
                ELSE    2dup to prev-y
                             to prev-x
                        2dup PrinterLineTo: ThePrinter
                                    LineTo: demo-dc
                then
                1 +to line-count ;

: line          ( x1 y1 x2 y2 -- )
                2swap moveto lineto ;

: line-color    ( color_object -- )
                ?ColorCheck
                dup to line-value
                dup
                case    black   of white        endof
                        white   of black        endof
                        yellow  of blue         endof
                                   dup
                endcase PrinterLineColor: ThePrinter
                               LineColor: demo-dc ;

variable  x.max.size    800  x.max.size !  \ 770
variable  y.max.size    600  y.max.size !  \ 500 520

: deg>rad  ( deg ... rad )   s>d  d>f  2.0e0 f*  fpi f*  360e0 f/  ;

: X0"       0 ( 3C )  ( 60 )  ;
: Y0"      14 ( 20 )  ;

20 VALUE  X0"
14 VALUE  Y0"

fvariable  gain        250e0  gain      f!
fvariable  offset      250e0  offset    f!
 variable  x.center    250    x.center   !
 variable  y.center    360    y.center   !

: DOT.LINE ( X Y COLOR ... )   DROP  2DUP 1 +  LINE  ;
: dot    line-color  over 1+ over 1+  line  ;

windc   thedc     \ the Device Context

: dot1 ( x y color ... )  setpixel:  thedc  ;

: BS   8 EMIT  ;
: BSS  0  ?DO  BS  LOOP ;

\ anew test_file
decimal
\ windc   thedc     \ the Device Context

\ variable  x.max.size    770  x.max.size !
\ variable  y.max.size    500  y.max.size !  \ 520

: at  GOTOXY      ;

:  640*480    640 x.max.size !   480 y.max.size !  ;
:  800*600    860 x.max.size !   500 y.max.size !  ;  \ 620
: 1024*768    800 x.max.size !   600 y.max.size !  ;

\   640*480
\   800*600
\  1024*768

\ defer   dot
\ : dot1 ( x y color ... )  setpixel:  thedc  ;

: slanting.line  400 200  do i i 2 /  green  dot1  loop  ;   \ 200 200 Moveto: theDC   400 400  LineTo: theDC
: pp slanting.line ;

: COLOR.BOX     ( X Y WIDTH HEIGHT COLOR ... )
                CONDC                PutHandle: theDC \ initialize DC ( DEVICE CONTEXT )
              ( 0 0 500 500 GREEN )   FillArea: theDC \ to the console
                ;

: test          ( -- )
                CONDC              PutHandle: theDC \ initialize DC ( DEVICE CONTEXT )
                20 0 300 100 LTRED  FillArea: theDC \ to the console
                ( BLACK ) YELLOW   LineColor: theDC
                  0   0               MoveTo: theDC \ SLOPE LINE
                100 100               LineTo: theDC \   "    "
                BLUE              BrushColor: theDC
                 50 50 20         FillCircle: theDC
                200 20 130 40     LTMAGENTA   COLOR.BOX
                slanting.line   ;


\ : 2>R   >R >R  ;
\ : 2R@   R@  R> R@  SWAP >R  ;

\ : 4DROP      ( X Y WIDTH HEIGHT ... )    2DROP  2DROP  ;
\ : 4DUP       ( X Y WIDTH HEIGHT ... )    2OVER  2OVER  ;

: X+WIDTH    ( X Y WIDTH HEIGTH ... X Y WIDTH HEIGTH N ) 4DUP  DROP NIP      + ;
: Y+HEIGHT   ( X Y WIDTH HEIGHT ... X Y WIDTH HEIGTH N ) 4DUP  NIP  ROT DROP + ;
: X          ( X Y WIDTH HEIGHT ... X Y WIDTH HEIGTH N ) 4DUP  2DROP    DROP   ;
: Y          ( X Y WIDTH HEIGHT ... X Y WIDTH HEIGTH N ) 4DUP  2DROP    NIP    ;

: SQUARE.BOX ( X Y WIDTH HEIGHT COLOR ... )
                CONDC            PutHandle: theDC \ initialize DC ( DEVICE CONTEXT )
             \  0 0 500 500 BLUE  FillArea: theDC \ to the console
              ( YELLOW )                     LineColor: theDC
                X        >R  Y         R> SWAP  MoveTo: theDC
                X+WIDTH  >R  Y         R> SWAP  LineTo: theDC
                X+WIDTH  >R  Y+HEIGHT  R> SWAP  LineTo: theDC
                X        >R  Y+HEIGHT  R> SWAP  LineTo: theDC
                X        >R  Y         R> SWAP  LineTo: theDC
             \  BLUE            BrushColor: theDC
             \  50 50 20        FillCircle: theDC
             \  slanting.line   ;
                4DROP  ;


: t1              condc  puthandle:  thedc
         0 0 100 100 red  fillarea:  thedc
                  green  linecolor:  thedc
                        0 0 moveto:  thedc
                    770 550 lineto:  thedc   ;
: dot.size  2 ;

: dot' ( x y color ... ) >r \ linecolor:  thedc        \  X Y COLOR setpixel: theDC
  over  dot.size  -    over  dot.size  -        \ moveto:  thedc
  over  dot.size  +    over  dot.size  +   r>   fillarea:  thedc   2drop  ;

: MARK.X.Y.SCALE                   condc  puthandle:  thedc
                                   yellow linecolor:  thedc
                X0"                  Y0"     moveto:  thedc
  x.max.size @  X0" +                Y0"     lineto:  thedc
  x.max.size @  X0" +  y.max.size @  Y0" +   lineto:  thedc
                X0"    y.max.size @  Y0" +   lineto:  thedc
                X0"                  Y0"     lineto:  thedc
  x.max.size @ 1+  X0" +  X0"
  do     5  0
         do      j  Y0" y.max.size @ + i -     red   dot'
                 j                   i Y0" +   red   dot'
         loop    100
  +loop
  y.max.size @ 1+  Y0" +   Y0"
  do     5  0
         do      X0"  i +                   j   red   dot'
                 X0"  x.max.size @  +  i -  j   red   dot'
         loop    100
  +loop
           x.max.size @ 1+   X0" +  X0"
  do       y.max.size @ 1+   Y0" +  Y0"
           do      j    i    red    dot'     50
           +loop   50
  +loop   ;


: MARK.LINE   \  GETXY 1- NIP 0 SWAP AT-XY
                        condc  puthandle:  thedc
                        LTRED  linecolor:  thedc
  700    0
  DO     X0"            Y0" I + 6 +  moveto:  thedc
         x.max.size @   Y0" I + 6 +  lineto:  thedc     39
  +LOOP  ;

: ML    GETXY 1- NIP 0 SWAP AT-XY   MARK.LINE  ;



: t2                  condc  puthandle:  thedc      \ 1024*768
                      yellow linecolor:  thedc
                        X0" Y0" moveto:  thedc
  x.max.size @  Y0"             lineto:  thedc
  x.max.size @  y.max.size @    lineto:  thedc
  X0"           y.max.size @    lineto:  thedc
  X0"           Y0"             lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *  5 .r
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0   4 .r

  x.max.size @  100 / 1+  1     cr    8 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r
  loop

  y.max.size @ 1+  Y0" 
  do       x.max.size @ 1+   X0" 
           do      i   j   red  dot'     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0" 
  do       x.max.size @ 1+   X0" 
             do    i   j   red  dot'      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot'     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0" 
           do      j   i   red  dot'      5
           +loop   100
  +loop    cr
  ;





: t2'                  condc  puthandle:  thedc      \ 1024*768
                      yellow linecolor:  thedc
                        X0" Y0" moveto:  thedc
  x.max.size @  Y0"             lineto:  thedc
  x.max.size @  y.max.size @    lineto:  thedc
  X0"           y.max.size @    lineto:  thedc
  X0"           Y0"             lineto:  thedc

\  y.max.size @  100 /    0     cr
\ do       y.max.size @  100   /  i  -  DUP >R  100 *  5 .r
\           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
\           0   do    CR    loop
\  loop     0   4 .r
\
  x.max.size @  100 / 1+  1     cr    8 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r
  loop

  y.max.size @ 1+  Y0"
  do       x.max.size @ 1+   X0"
           do      i   j   red  dot'     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"
  do       x.max.size @ 1+   X0"
             do    i   j   red  dot'      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot'     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot'      5
           +loop   100
  +loop    cr
  ;









: t2''      cls                      condc  puthandle:  thedc      \ 1024*768
                                     yellow linecolor:  thedc
                                       X0" Y0" moveto:  thedc
  5   x.max.size @  +   Y0"                   lineto:  thedc
    x.max.size @    Y0"  y.max.size @  +  lineto:  thedc
  X0"                    Y0"  y.max.size @  +  lineto:  thedc
  X0"                    Y0"                   lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *  5 .r
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0   4 .r

  x.max.size @  100 / 1+  1     cr     2 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r
  loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"
           do      i     j   red  dot'     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"
           do      i     j   red  dot'      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  + Y0"
           do      j     i   red  dot'     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  + Y0"
           do      j     i   red  dot'      5
           +loop   100
  +loop    cr
  ;

CLS  T2''






: t2''      cls      \                condc  puthandle:  thedc      \ 1024*768
                     \                yellow linecolor:  thedc
                     \                  X0" Y0" moveto:  thedc
\  5   x.max.size @  +    Y0"                   lineto:  thedc
\    x.max.size @    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"                   lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *  5 .r
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0   4 .r

  x.max.size @  100 / 1+  1     cr     2 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r
  loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   red  dot'     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   red  dot'      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   red  dot'     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   red  dot'      5
           +loop   100
  +loop    cr
  ;

CLS  T2''



fvariable   x.scaling.factor     1.0e0    x.scaling.factor  f!
fvariable   y.scaling.factor     1.0e0    y.scaling.factor  f!
fvariable   x.offset'            0.0e0    x.offset'         f!
fvariable   y.offset'            0.0e0    y.offset'         f!

: t2''''    base @  >r     decimal
            cls      \                condc  puthandle:  thedc      \ 1024*768
                     \                yellow linecolor:  thedc
                     \                  X0" Y0" moveto:  thedc
\  5   x.max.size @  +    Y0"                   lineto:  thedc
\    x.max.size @    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"                   lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *    i>float
           y.scaling.factor  f@   f*    y.offset'  f@    f+   f.
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0.0e0  y.offset'  f@    f+   f.  \ 0   4  .r

  x.max.size @  100 / 1+  1     cr     2 ( 9 ) spaces
  do       i 3 /  i 12 *  +  40  at-xy   i 100 *  i>float  x.scaling.factor  f@  f*   x.offset'  f@    f+  f.
        \  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN
  loop     0  40  at-xy  0.0e0  x.offset'  f@    f+   f.

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   red  dot'     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   red  dot'      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   red  dot'     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   red  dot'      5
           +loop   100
  +loop    cr
  r>  base !   ;


: t2'''  base @  >r     decimal
            cls      \                condc  puthandle:  thedc      \ 1024*768
                     \                yellow linecolor:  thedc
                     \                  X0" Y0" moveto:  thedc
\  5   x.max.size @  +    Y0"                   lineto:  thedc
\    x.max.size @    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"                   lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *    5 .r
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0   4 .r

  x.max.size @  100 / 1+  1     cr     2 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r
  loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   red  dot'     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   red  dot'      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   red  dot'     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   red  dot'      5
           +loop   100
  +loop    cr
  r>  base !   ;




\ ' T2 IS _T2

: deg>rad  ( deg --; fs: -- rad)   s>d  d>f  fpi  f*  180e0 f/  ;


defer  _.xxxxx
: sin.table    256 0
  do     i   10 mod   0=  if  cr  ."   ( " i  decimal  3 .r  ."  ) " then
         space  i  deg>rad   fsin  1e0 f+  32768e0 f*   f>d  drop    hex  _.xxxxx  ."  ,'"
  loop   ;

: sin.table(8.bit)    256 0
  do     i   10 mod   0=  if  cr  ."   ( " i  decimal  3 .r  ."  ) " then
         space  i  deg>rad   fsin  1e0 f+  32768e0 f*                       f>d  drop  256 /  hex  _.xxxxx  ."  C,'"
  loop   ;


: sin.table(8.bit)'   256 0
  do     i   10 mod   0=  if  cr  ."   ( " i  decimal  3 .r  ."  ) " then
         space  i  deg>rad  360e0 f*  256e0 f/ fsin  1e0 f+  32768e0 f*    f>d  drop  256 /  hex  _.xxxxx  ."  C,'"
  loop   ; 


: sin.table(8.bit)"   256 0
  do     i   10 mod   0=  if  cr  ."   ( " i  decimal  3 .r  ."  ) " then
         space  i  deg>rad 360e0 f*  256e0 f/  fsin  1e0 f+  32768e0 f*    f>d  drop  256 /  hex  _.xxxxx  ."  C,'"
  loop   ; 

: sin/square.table    256 0
  do     i   10 mod   0=  if  cr  ."   ( " i  decimal  3 .r  ."  ) " then
         space  i  deg>rad  360e0 f*  256e0 f/  fsin  1e0 f+  32768e0 f*   f>d  drop
         65280 ( ff00 ) and  i 128 >= if 255 ( ff ) + then    hex
         i 64 = if  drop  65280  ( ff00 )  then  _.xxxxx  ."  ,'"
  loop   ;   

fvariable  gain        250e0  gain      f!
fvariable  offset      250e0  offset    f!
 variable  x.center    250    x.center   !
 variable  y.center    360    y.center   !

: DOT.LINE ( X Y COLOR ... )   DROP  2DUP 1 +  LINE  ;

: plot.center.line   ( ... )    \  ( x.center y.center ... )
  x.max.size @  X0"  do   i    y.center @  Y0" +       red  dot' loop
  y.max.size @  Y0"  do        x.center @  X0" +   i   red  dot' loop   ;

: plot.sine.curve' ( x.center y.center ... )    y.center !    x.center !   \  plot.center.line
  750   0
  do    i X0" + ( x ) i deg>rad  fsin  gain f@ f*  offset f@ f+  f>d  drop  Y0" + ( y )  blue      DOT.LINE \ dot
        i X0" + ( x ) i deg>rad  fcos  gain f@ f*  offset f@ f+  f>d  drop  Y0" + ( y )  yellow    DOT.LINE \ dot
  loop  ;

: plot.sine.curve  ( x.center y.center ... )    y.center !    x.center !   \  plot.center.line
  750   0
  do    i X0" + ( x ) i deg>rad  fsin  gain f@ f*  offset f@ f+  f>d  drop  Y0" + ( y )  blue      DOT1     \ dot
        i X0" + ( x ) i deg>rad  fcos  gain f@ f*  offset f@ f+  f>d  drop  Y0" + ( y )  yellow    DOT1     \ dot
  loop  ;

: psc'  360  250  plot.sine.curve' ;
: psc   360  250  plot.sine.curve  ;


: T'    BASE @ >R    DECIMAL  CLS   T2''   MARK.X.Y.SCALE      PSC    R> BASE !   ;

variable  y.gain      1   y.gain  !

create  data.curve    $8000  allot

: ascii>number(binary)   ( a -- n )   0   swap  4  bounds
  do    $2   *
        i   c@  $2       digit   0=
        if      drop     0
        then    +
  loop  ;

: ascii>number(decimal)  ( a -- n )   0   swap  4  bounds
  do    $0a  *
        i   c@  $0a      digit   0=
        if      drop     0
        then    +
  loop  ;

: ascii>number(hex)      ( a -- n )   0   swap  4  bounds
  do    $10  *
        i   c@  $10      digit   0=
        if      drop     0
        then    +
  loop  ;

: ascii>number(hex)'     ( a' -- n )  0   swap  4  bounds
  do    $10  *
        i   c@' $10      digit   0=
        if      drop     0
        then    +
  loop  ;

: ascii>number(hex)'     ( a' -- n )  0   swap  3  bounds   swap
  do    $10  *
        i   c@'    +       -1
  +loop ;

: BIG.DOT  ( X Y COLOR ... )   >R
  OVER 1+  OVER 1+  R@  DOT1
  OVER 1+  OVER     R@  DOT1
  OVER 1+  OVER 1-  R@  DOT1
  OVER     OVER 1+  R@  DOT1
  OVER     OVER     R@  DOT1
  OVER     OVER 1-  R@  DOT1
  OVER 1-  OVER 1+  R@  DOT1
  OVER 1-  OVER     R@  DOT1
  OVER 1-  OVER 1-  R>  DOT1  2drop  ;

: plot.data.curve   ( gain  -- )                  BASE @ >R    DECIMAL  CLS   T2''   MARK.X.Y.SCALE
  y.gain !   $320   ( 800 )  1
  do     i   x0"   +  ( x )
         data.curve   i  4 *  +    ascii>number(hex)   y.gain  @  /  y0"  +  ( y )  blue  big.dot
         i   x0"   +  i  y0"  +  red   dot1
  loop   R>  BASE  !  ;

: plot.data.curve(2000F000~ffff)   ( gain  -- )   BASE @ >R    DECIMAL  CLS   T2''   MARK.X.Y.SCALE
  y.gain !   $3e8   ( 1000 )  0
  do     i   x0"   +  ( x )
         $2000F000    i  4 *  +   32@'                 y.gain  @  /  y0"  +  ( y )  blue  big.dot \ dot1
  loop   R>  BASE  !  ;


: plot.data.curve(2000F000~ffff)''''   ( gain  -- )   BASE @ >R    DECIMAL  CLS   T2''   MARK.X.Y.SCALE
  y.gain !   $320   ( 800 )  1
  do     i   x0"   +  ( x )
         $2000F000    i  4 *  + 2dup   ascii>number(hex)'  y.gain  @  /  y0"  +  ( y )  blue  big.dot \ dot1
         i   x0"   +  i  y0"  +  red   dot1
  loop   R>  BASE  !  ;

\ : pdc   plot.data.curve'''   ( gain  -- )  ;






























variable  background.color      ltyellow  background.color  !

defer  _[0~f>asc]

defer  _number>string

hex
create   x-y-data   10000 allot
:   fill-x-y-data   10000 0  do  i              i                              x-y-data  +  c!     loop  ;
:   fill-x-y-data   10000 0  do  i 4 / 1ff and  i 4 / 1ff and  10000 *  +    i x-y-data  +   !  4 +loop  ;
:  erase.x-y-data   x-y-data 10000 0 fill ( erase )  ;
    fill-x-y-data

variable   big.pixel?   big.pixel?  on
variable   grid.color   green  grid.color  !
decimal

:object  X-Y-axis   <super window

\ : dot.dc  ( x y color -)  drop  2dup  moveto: dc     1+ lineto: dc  ;

  : small.pixel  ( x y color ... )  setpixel: dc  ;
  :   big.pixel  ( x y color ... )  >r
    2dup          r@   setpixel: dc
    2dup  1+      r@   setpixel: dc
    2dup  1-      r@   setpixel: dc
    over  1+ over r@   setpixel: dc
    over  1- over r@   setpixel: dc
    2drop         r>drop  ;

\ variable  big.pixel?

: big/small.pixel  ( x y color -)  big.pixel?  @
  if      big.pixel
  else  small.pixel
  then  ;

variable  leading.0?

\  t:' .?n  ( n -)  8 ,,  for   base @ ( 0a ,, ) /mod   next  0 ,,  9 ,,
\       for   >r  dup  r>  or   r@  0 ,, =  or   if   .1n   5a ,,    then
\       next  drop     ret

\ : .R    >R S>D R> D.R ;  ok
\ : D.R           >R (D.) R> OVER - SPACES TYPE ;  ok
\ : (D.)          TUCK DABS <# #S ROT SIGN #> ;  ok

  : (D.)           TUCK DABS <# #S ROT SIGN #> ;
  :  D.R(textout)  >R (D.) R> OVER - 0 ?do  s"  " textout: dc  loop ( SPACES )  textout: dc  ( TYPE )  ;
  :   .R(textout)  >R S>D R> D.R(textout) ;

: .r(textout)  ( n .r -)  drop    \ 1234  4  .r(textout)
  9      0
  do     10    /mod
  loop               leading.0?  off
  10     0
  do     dup    0<>  leading.0?  @   i  8  =  or   or
         if     _[0~f>asc]  temp$ 1+  c!  1 temp$ c!  temp$ count  textout: dc     leading.0?  on
         else   drop
         then
  loop   ;

: .r(textout)qqq ( n .r -)  drop    \ 1234  4  .r(textout)
  3      0
  do     10    /mod
  loop               leading.0?  off
  4     0
  do     dup    0<>  leading.0?  @   i  8  =  or   or
         if     _[0~f>asc]  temp$ 1+  c!  1 temp$ c!  temp$ count  textout: dc     leading.0?  on
         else   drop
         then
  loop   ;

: .r(textout)'''   ( n .r -)  drop    \ 1234  4  .r(textout)
  9  0  do  10  /mod  loop   10   0
  do     >r  dup  r>  or    i  8  =   or
         if     _[0~f>asc]  temp$ 1+  c!  1 temp$ c!  temp$ count  textout: dc
         then
  loop   drop   ;

: plot.grid ( t2'' )   ( cls )    \   condc  puthandle:  thedc      \ 1024*768
                     \                yellow linecolor:  thedc
                     \                  X0" Y0" moveto:  thedc
\  5   x.max.size @  +    Y0"                   lineto:  thedc
\    x.max.size @    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"  y.max.size @  +  lineto:  thedc
\  X0"                    Y0"                   lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *  5 .r(textout)
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0   4 .r(textout)

  x.max.size @  100 / 1+  1     cr     2 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r(textout)
  loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   grid.color  @  big/small.pixel     10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"   +   Y0"
  do       x.max.size @ 1+   X0"  +  X0"
           do      i     j   grid.color  @  big/small.pixel      5
           +loop   100
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   grid.color  @  big/small.pixel     10
           +loop   50
  +loop

  x.max.size @ 1+  X0"   +   X0"
  do       y.max.size @ 1+   Y0"  +  Y0"
           do      j     i   grid.color  @  big/small.pixel      5
           +loop   100
  +loop    cr      ;

\ create   x-y-data   10000 allot
\ : fill-x-y-data     10000 0 do  i  i   x-y-data  +  c!  loop  ;
\   fill-x-y-data

\ :object  X-Y-axis   <super window

  100 value x0
  400 value y0

: Mark----      1 PenWidth: black   black LineColor: dc
  400 105  do  X0 I moveto: dc     X0  5 + I lineto: dc     5 +loop
  425 125  do  X0 I moveto: dc     X0 10 + I lineto: dc    25 +loop
  450 100  do  X0 I moveto: dc     X0 15 + I lineto: dc    50 +loop ;

: mark_name
  6  0  do   x0 40 -       40  i 50 *  +   i 100  *  _number>string   textout: dc  loop
  8  0  do   x0 90 +  i 100 * +   y0 10 +  i 100  *  _number>string   textout: dc  loop ;

: mark_name  base @ >r   decimal
  0  6  do   x0"              y0"  6 i - 100  *     +  i 100  *  _number>string   textout: dc  -1  +loop
  9  0  do   x0" i 100 *  +   y0"      y.max.size @ +  i 100  *  _number>string   textout: dc       loop
  r>  base   !   ;

: mark_name'   \ mark
   90 410 s" 0"          textout: dc
  190 410 s" 1st.quater" textout: dc
  290 410 s" 2nd.quater" textout: dc
  390 410 s" 3rd.quater" textout: dc
  490 410 s" 4th.quater" textout: dc
  550 410 s" quater"     textout: dc
   60 340 s" 1000"       textout: dc
   60 290 s" 2000"       textout: dc
   60 240 s" 3000"       textout: dc
   60 190 s" 4000"       textout: dc
   60 140 s" 5000"       textout: dc
   60  90 s" 6000"       textout: dc
   50  50 s" *10^6$"     textout: dc  ;

: thick2.x-y.axis          2 PenWidth: black                    black LineColor: dc
  540 394 moveto: dc  555  y0  lineto: dc  540 406 moveto: dc  555  y0   lineto: dc     \ y-axis
   94  60 moveto: dc  x0   45  lineto: dc  106  60 moveto: dc  x0   45   lineto: dc  ;  \ x-axis

: thick3.x-y.axis          3 PenWidth: black                    black LineColor: dc
   x0  y0 moveto: dc  550  y0  lineto: dc   x0  50 moveto: dc  x0   y0   lineto: dc  ;

\ plot.x-y-data  500 0 do  X0  i +  100 ( y0 ) moveto: dc     X0 I +  x-y-data  i +  c@  ( y0 + ) lineto: dc   loop  ;
: plot.x-y-data  500 0 do  X0  i +  100 ( y0 ) moveto: dc     X0 I +  x-y-data  i +  c@   100 +   lineto: dc   loop  ;
: plot.x-y-data  500 0 do  X0" i +  y.max.size @  x-y-data  i +  c@  -  y0"  +  red  big.pixel  loop  ;
hex
: plot.x-y-data  10000 0   ( 12345678    x=1234    y=5678 )
  do    x-y-data  i +  @   10000 /mod  ( y x )   1ff  min  X0" +  swap   1ff min
        y.max.size @  swap  -  Y0"  +   red  big.pixel  4
 +loop  ;

: plot.x-y-data  10000 0   ( 12345678    x=1234    y=5678 )
  do    x-y-data  i +  @   10000 /mod  ( y x )   y.max.size @  min  X0" +  swap   y.max.size @  min
        y.max.size @  swap  -  Y0"  +   red  big.pixel  4
 +loop  ;
decimal

\ : mark-all    mark----   mark_name   thick2.x-y.axis   thick3.x-y.axis  ;

  0 value 1qY
  0 value 2qY
  0 value 3qY
  0 value 4qY

: special   2  PenWidth:  MAGENTA     MAGENTA LineColor: dc
  200 400 1qY -  moveto:  dc
  300 400 2qY -  lineto:  dc
  400 400 3qY -  lineto:  dc
  500 400 4qY -  lineto:  dc  ;

  EditControl    1q
  EditControl    2q
  EditControl    3q
  EditControl    4q
  ButtonControl  xyzButton

: x-axis-mark
  1 PenWidth: MAGENTA  MAGENTA LineColor: dc  x0   y0  1qY - moveto: dc  200 400  1qY - lineto: dc
  1 PenWidth: green    green   LineColor: dc  x0   y0  2qY - moveto: dc  300 400  2qY - lineto: dc
  1 PenWidth: yellow   yellow  LineColor: dc  x0   y0  3qY - moveto: dc  400 400  3qY - lineto: dc
  1 PenWidth: blue     blue    LineColor: dc  x0   y0  4qY - moveto: dc  500 400  4qY - lineto: dc ;

: y-axis-mark
  1 PenWidth: MAGENTA  MAGENTA LineColor: dc  200  y0        moveto: dc  200 400  1qY - lineto: dc
  1 PenWidth: green    green   LineColor: dc  300  y0        moveto: dc  300 400  2qY - lineto: dc
  1 PenWidth: yellow   yellow  LineColor: dc  400  y0        moveto: dc  400 400  3qY - lineto: dc
  1 PenWidth: blue     blue    LineColor: dc  500  y0        moveto: dc  500 400  4qY - lineto: dc ;

: mark-xxx
  185 y0  1qY - 215 399 red    fillarea: dc
  285 y0  2qY - 315 399 green  fillarea: dc
  385 y0  3qY - 415 399 yellow fillarea: dc
  485 y0  4qY - 515 399 blue   fillarea: dc  ;

: exceed   s" maximum 6000!"   errorbox   ;

:  normal
   gettext: 1q 2dup s" " compare   0 <>
   if super-number? 2drop dup      0 6000 between
        if   20 / to 1qY
        else exceed
        then
   else 0 to 1qY
   then

   gettext: 2q 2dup s" " compare   0 <>
   if super-number? 2drop dup      0 6000 between
        if 20 / to 2qY
        else exceed
        then
   else 0 to 2qY
   then

   gettext: 3q 2dup s" " compare  0 <>
   if super-number? 2drop dup     0 6000 between
        if 20 / to 3qY
        else exceed
        then
   else 0 to 3qY
   then

   gettext: 4q 2dup s" " compare   0 <>
   if super-number? 2drop dup      0 6000 between
        if 20 / to 4qY
        else exceed
        then
   else 0 to 4qY
   then   ;

\ : mark-all    mark----   mark_name   thick2.x-y.axis   thick3.x-y.axis  ;

:  mark-total \ mark----   mark_name   thick2.x-y.axis   thick3.x-y.axis
 \   x-axis-mark    y-axis-mark    mark-xxx   special  Mark----
   mark_name  plot.x-y-data  plot.grid ;

:M StartSize:  750 500   ;M

:M On_Init:
\   self start: 1q   180 440 50 25 move: 1q   SS_center +STYLE: 1q  ES_NUMBER +STYLE: 1q
\   self start: 2q   280 440 50 25 move: 2q   SS_center +STYLE: 2q  ES_NUMBER +STYLE: 2q
\   self start: 3q   380 440 50 25 move: 3q   SS_center +STYLE: 3q  ES_NUMBER +STYLE: 3q
\   self start: 4q   480 440 50 25 move: 4q   SS_center +STYLE: 4q  ES_NUMBER +STYLE: 4q
\   self start: xyzButton 550 440 30 25 move: xyzButton s" $$"  settext: xyzButton
   ;M

:M On_Paint:   SetBkMode: dc    0 0 getsize: self   background.color @  fillarea: dc  mark-total  ;M

:M WM_Command   over loword
   case         getid: xyzButton of normal endof
   endcase      paint: self                        ;M

;object

\ start:   X-Y-axis

: xy    start:   X-Y-axis  ;









































\ May  22, 2004    02:07    add AFT'
\ May   2, 2004.   09:37    filx A<=# ...
\ Apr. 23, 2003.   01:56    correct parse.A>#....
\ Apr. 17, 2004.   02:09    simulating monitor at low memory address
\ Apr. 13, 2004.   01:43    add CRUX CRUISE
\ Mar. 30, 2004.   01:46    adjust HH to the same as pic16f877
\ Mar. 29, 2004.   01:49    add old mnemonics  CFA'>NFA
\ Mar. 28, 2004.   02:34    add defer' , is' , words'
\ H.F   8051 SIMULATOR / EF51 / ASSEMBLER / DISASSEMBLER / DEBUGER
\ : ZZ CR ."  ( "  8 / .XX  ."  ) "  ;
\ : Q 800 0 DO I 8 MOD 0 = IF I ZZ THEN 6107 I + C@ 30 EMIT .XX ."  C, " LOOP ;
\   Q
HEX
CREATE FONT.TABLE
 ( 00 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 01 ) 07E C, 081 C, 0A5 C, 081 C, 0BD C, 099 C, 081 C, 07E C,
 ( 02 ) 07E C, 0FF C, 0DB C, 0FF C, 0C3 C, 0E7 C, 0FF C, 07E C,
 ( 03 ) 044 C, 0EE C, 0FE C, 0FE C, 07C C, 038 C, 010 C, 000 C,
 ( 04 ) 010 C, 038 C, 07C C, 0FE C, 07C C, 038 C, 010 C, 000 C,
 ( 05 ) 018 C, 03C C, 0DB C, 0FF C, 0DB C, 018 C, 03C C, 000 C,
 ( 06 ) 018 C, 03C C, 07E C, 0FF C, 07E C, 018 C, 03C C, 000 C,
 ( 07 ) 018 C, 03C C, 07E C, 0FF C, 07E C, 018 C, 03C C, 000 C,
 ( 08 ) 018 C, 03C C, 07E C, 0FF C, 07E C, 018 C, 03C C, 000 C,
 ( 09 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 0A ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 0B ) 00F C, 007 C, 007 C, 07D C, 0CC C, 0CC C, 0CC C, 078 C,
 ( 0C ) 078 C, 0CC C, 0CC C, 0CC C, 078 C, 030 C, 0FC C, 030 C,
 ( 0D ) 078 C, 0CC C, 0CC C, 0CC C, 078 C, 030 C, 0FC C, 030 C,
 ( 0E ) 03F C, 063 C, 07F C, 063 C, 063 C, 067 C, 0E6 C, 0C0 C,
 ( 0F ) 0DB C, 0DB C, 03C C, 0E7 C, 0E7 C, 03C C, 0DB C, 0DB C,
 ( 10 ) 0C0 C, 0F0 C, 0F8 C, 0FE C, 0F8 C, 0F0 C, 0C0 C, 000 C,
 ( 11 ) 006 C, 01E C, 03E C, 0FE C, 03E C, 01E C, 006 C, 000 C,
 ( 12 ) 030 C, 078 C, 0FC C, 030 C, 030 C, 0FC C, 078 C, 030 C,
 ( 13 ) 06C C, 06C C, 06C C, 06C C, 06C C, 000 C, 06C C, 000 C,
 ( 14 ) 07F C, 0DB C, 0DB C, 0DB C, 07B C, 01B C, 01B C, 000 C,
 ( 15 ) 03C C, 060 C, 03C C, 066 C, 066 C, 03C C, 006 C, 03C C,
 ( 16 ) 000 C, 000 C, 000 C, 000 C, 0FE C, 0FE C, 0FE C, 000 C,
 ( 17 ) 018 C, 03C C, 07E C, 018 C, 07E C, 03C C, 018 C, 07E C,
 ( 18 ) 030 C, 078 C, 0FC C, 030 C, 030 C, 030 C, 030 C, 000 C,
 ( 19 ) 030 C, 030 C, 030 C, 030 C, 0FC C, 078 C, 030 C, 000 C,
 ( 1A ) 030 C, 030 C, 030 C, 030 C, 0FC C, 078 C, 030 C, 000 C,
 ( 1B ) 000 C, 020 C, 060 C, 0FE C, 060 C, 020 C, 000 C, 000 C,
 ( 1C ) 000 C, 000 C, 0C0 C, 0C0 C, 0FE C, 000 C, 000 C, 000 C,
 ( 1D ) 000 C, 024 C, 042 C, 0FF C, 042 C, 024 C, 000 C, 000 C,
 ( 1E ) 000 C, 010 C, 038 C, 07C C, 0FE C, 0FE C, 000 C, 000 C,
 ( 1F ) 000 C, 0FE C, 0FE C, 07C C, 038 C, 010 C, 000 C, 000 C,
 ( 20 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 21 ) 018 C, 018 C, 018 C, 018 C, 018 C, 000 C, 018 C, 000 C,
 ( 22 ) 0CC C, 0CC C, 0CC C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 23 ) 036 C, 06C C, 0FE C, 06C C, 0FE C, 06C C, 0D8 C, 000 C,
 ( 24 ) 018 C, 07E C, 0C0 C, 07C C, 006 C, 0FC C, 030 C, 000 C,
 ( 25 ) 0C2 C, 0C6 C, 00C C, 018 C, 030 C, 066 C, 0C6 C, 000 C,
 ( 26 ) 038 C, 06C C, 038 C, 070 C, 0DE C, 0CC C, 076 C, 000 C,
 ( 27 ) 030 C, 030 C, 060 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 28 ) 00C C, 018 C, 030 C, 030 C, 030 C, 018 C, 00C C, 000 C,
 ( 29 ) 030 C, 018 C, 00C C, 00C C, 00C C, 018 C, 030 C, 000 C,
 ( 2A ) 000 C, 06C C, 038 C, 0FE C, 038 C, 06C C, 000 C, 000 C,
 ( 2B ) 000 C, 018 C, 018 C, 07E C, 018 C, 018 C, 000 C, 000 C,
 ( 2C ) 000 C, 000 C, 000 C, 000 C, 000 C, 018 C, 018 C, 030 C,
 ( 2D ) 000 C, 000 C, 000 C, 07E C, 000 C, 000 C, 000 C, 000 C,
 ( 2E ) 000 C, 000 C, 000 C, 000 C, 000 C, 018 C, 018 C, 000 C,
 ( 2F ) 002 C, 006 C, 00C C, 018 C, 030 C, 060 C, 0C0 C, 000 C,
 ( 30 ) 07C C, 0CE C, 0DE C, 0F6 C, 0E6 C, 0C6 C, 07C C, 000 C,
 ( 31 ) 018 C, 038 C, 018 C, 018 C, 018 C, 018 C, 07E C, 000 C,
 ( 32 ) 07C C, 0C6 C, 006 C, 01C C, 070 C, 0C6 C, 0FE C, 000 C,
 ( 33 ) 07C C, 0C6 C, 006 C, 01C C, 006 C, 0C6 C, 07C C, 000 C,
 ( 34 ) 01C C, 03C C, 06C C, 0CC C, 0FE C, 00C C, 00C C, 000 C,
 ( 35 ) 0FE C, 0C0 C, 0FC C, 006 C, 006 C, 0C6 C, 07C C, 000 C,
 ( 36 ) 03C C, 060 C, 0C0 C, 0FC C, 0C6 C, 0C6 C, 07C C, 000 C,
 ( 37 ) 0FE C, 0C6 C, 00C C, 018 C, 030 C, 030 C, 030 C, 000 C,
 ( 38 ) 07C C, 0C6 C, 0C6 C, 07C C, 0C6 C, 0C6 C, 07C C, 000 C,
 ( 39 ) 07C C, 0C6 C, 0C6 C, 07E C, 006 C, 00C C, 078 C, 000 C,
 ( 3A ) 000 C, 018 C, 018 C, 000 C, 000 C, 018 C, 018 C, 000 C,
 ( 3B ) 000 C, 018 C, 018 C, 000 C, 000 C, 018 C, 018 C, 030 C,
 ( 3C ) 00C C, 018 C, 030 C, 060 C, 030 C, 018 C, 00C C, 000 C,
 ( 3D ) 000 C, 000 C, 07E C, 000 C, 000 C, 07E C, 000 C, 000 C,
 ( 3E ) 030 C, 018 C, 00C C, 006 C, 00C C, 018 C, 030 C, 000 C,
 ( 3F ) 03C C, 066 C, 006 C, 00C C, 018 C, 000 C, 018 C, 000 C,
 ( 40 ) 07C C, 0C6 C, 0DE C, 0DE C, 0DE C, 0C0 C, 07C C, 000 C,
 ( 41 ) 038 C, 06C C, 0C6 C, 0C6 C, 0FE C, 0C6 C, 0C6 C, 000 C,
 ( 42 ) 0FC C, 06E C, 066 C, 07C C, 066 C, 06E C, 0FC C, 000 C,
 ( 43 ) 03E C, 062 C, 0C0 C, 0C0 C, 0C0 C, 062 C, 03E C, 000 C,
 ( 44 ) 0F8 C, 06E C, 066 C, 066 C, 066 C, 06E C, 0F8 C, 000 C,
 ( 45 ) 0FE C, 062 C, 060 C, 078 C, 060 C, 062 C, 0FE C, 000 C,
 ( 46 ) 0FE C, 062 C, 060 C, 078 C, 060 C, 060 C, 0F0 C, 000 C,
 ( 47 ) 03E C, 062 C, 0C0 C, 0C0 C, 0CE C, 066 C, 03E C, 000 C,
 ( 48 ) 0C6 C, 0C6 C, 0C6 C, 0FE C, 0C6 C, 0C6 C, 0C6 C, 000 C,
 ( 49 ) 03C C, 018 C, 018 C, 018 C, 018 C, 018 C, 03C C, 000 C,
 ( 4A ) 01E C, 00C C, 00C C, 00C C, 00C C, 0CC C, 078 C, 000 C,
 ( 4B ) 0E6 C, 066 C, 06C C, 078 C, 078 C, 06C C, 0E6 C, 000 C,
 ( 4C ) 0F0 C, 060 C, 060 C, 060 C, 060 C, 066 C, 0FE C, 000 C,
 ( 4D ) 0C6 C, 0EE C, 0FE C, 0D6 C, 0C6 C, 0C6 C, 0C6 C, 000 C,
 ( 4E ) 0C6 C, 0E6 C, 0F6 C, 0FE C, 0DE C, 0CE C, 0C6 C, 000 C,
 ( 4F ) 07C C, 0C6 C, 0C6 C, 0C6 C, 0C6 C, 0C6 C, 07C C, 000 C,
 ( 50 ) 0FC C, 066 C, 066 C, 07C C, 060 C, 060 C, 0E0 C, 000 C,
 ( 51 ) 07C C, 0C6 C, 0C6 C, 0D6 C, 0DE C, 07C C, 006 C, 000 C,
 ( 52 ) 0FC C, 066 C, 066 C, 07C C, 078 C, 06C C, 0E6 C, 000 C,
 ( 53 ) 07C C, 0C6 C, 0E0 C, 038 C, 00E C, 0C6 C, 07C C, 000 C,
 ( 54 ) 07E C, 05A C, 018 C, 018 C, 018 C, 018 C, 03C C, 000 C,
 ( 55 ) 066 C, 066 C, 066 C, 066 C, 066 C, 066 C, 03C C, 000 C,
 ( 56 ) 066 C, 066 C, 066 C, 066 C, 066 C, 03C C, 018 C, 000 C,
 ( 57 ) 0C6 C, 0C6 C, 0C6 C, 0D6 C, 0FE C, 0FE C, 0C6 C, 000 C,
 ( 58 ) 0C6 C, 06C C, 038 C, 038 C, 06C C, 0C6 C, 0C6 C, 000 C,
 ( 59 ) 066 C, 066 C, 066 C, 03C C, 018 C, 018 C, 03C C, 000 C,
 ( 5A ) 0FE C, 0CC C, 018 C, 030 C, 060 C, 0C6 C, 0FE C, 000 C,
 ( 5B ) 03C C, 030 C, 030 C, 030 C, 030 C, 030 C, 03C C, 000 C,
 ( 5C ) 080 C, 0C0 C, 060 C, 030 C, 018 C, 00C C, 006 C, 000 C,
 ( 5D ) 03C C, 00C C, 00C C, 00C C, 00C C, 00C C, 03C C, 000 C,
 ( 5E ) 018 C, 03C C, 066 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 5F ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 0FF C,
 ( 60 ) 018 C, 018 C, 00C C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 61 ) 000 C, 000 C, 038 C, 00C C, 07C C, 0CC C, 076 C, 000 C,
 ( 62 ) 060 C, 060 C, 060 C, 07C C, 066 C, 066 C, 0DC C, 000 C,
 ( 63 ) 000 C, 000 C, 07C C, 0C4 C, 0C0 C, 0C4 C, 07C C, 000 C,
 ( 64 ) 00C C, 00C C, 00C C, 07C C, 0CC C, 0CC C, 076 C, 000 C,
 ( 65 ) 000 C, 000 C, 078 C, 0CC C, 0FC C, 0C0 C, 07C C, 000 C,
 ( 66 ) 038 C, 06C C, 060 C, 0F8 C, 060 C, 060 C, 0E0 C, 000 C,
 ( 67 ) 000 C, 000 C, 076 C, 0CC C, 0CC C, 07C C, 00C C, 07C C,
 ( 68 ) 0E0 C, 060 C, 060 C, 07C C, 066 C, 066 C, 066 C, 000 C,
 ( 69 ) 030 C, 000 C, 070 C, 030 C, 030 C, 030 C, 038 C, 000 C,
 ( 6A ) 00C C, 000 C, 01C C, 00C C, 00C C, 0CC C, 0CC C, 078 C,
 ( 6B ) 0E0 C, 060 C, 066 C, 06C C, 078 C, 06C C, 066 C, 000 C,
 ( 6C ) 070 C, 030 C, 030 C, 030 C, 030 C, 030 C, 038 C, 000 C,
 ( 6D ) 000 C, 000 C, 0CC C, 0FE C, 0D6 C, 0C6 C, 0C6 C, 000 C,
 ( 6E ) 000 C, 000 C, 0DC C, 066 C, 066 C, 066 C, 066 C, 000 C,
 ( 6F ) 000 C, 000 C, 03C C, 066 C, 066 C, 066 C, 03C C, 000 C,
 ( 70 ) 000 C, 000 C, 0DC C, 066 C, 066 C, 07C C, 060 C, 0E0 C,
 ( 71 ) 000 C, 000 C, 076 C, 0CC C, 0CC C, 07C C, 00C C, 00E C,
 ( 72 ) 000 C, 000 C, 0DC C, 076 C, 060 C, 060 C, 060 C, 000 C,
 ( 73 ) 000 C, 000 C, 078 C, 0C0 C, 078 C, 00C C, 078 C, 000 C,
 ( 74 ) 010 C, 030 C, 078 C, 030 C, 030 C, 034 C, 018 C, 000 C,
 ( 75 ) 000 C, 000 C, 0CC C, 0CC C, 0CC C, 0CC C, 076 C, 000 C,
 ( 76 ) 000 C, 000 C, 066 C, 066 C, 066 C, 03C C, 018 C, 000 C,
 ( 77 ) 000 C, 000 C, 0C6 C, 0C6 C, 0D6 C, 0FE C, 06C C, 000 C,
 ( 78 ) 000 C, 000 C, 0CC C, 078 C, 030 C, 078 C, 0CC C, 000 C,
 ( 79 ) 000 C, 000 C, 0CC C, 0CC C, 0CC C, 07C C, 00C C, 07C C,
 ( 7A ) 000 C, 000 C, 0FC C, 018 C, 030 C, 060 C, 0FC C, 000 C,
 ( 7B ) 00E C, 018 C, 018 C, 070 C, 018 C, 018 C, 00E C, 000 C,
 ( 7C ) 030 C, 030 C, 030 C, 000 C, 030 C, 030 C, 030 C, 000 C,
 ( 7D ) 070 C, 018 C, 018 C, 00E C, 018 C, 018 C, 070 C, 000 C,
 ( 7E ) 000 C, 076 C, 0DC C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 7F ) 010 C, 038 C, 06C C, 0C6 C, 0C6 C, 0C6 C, 0FE C, 000 C,
 ( 80 ) 031 C, 02C C, 094 C, 007 C, 0F4 C, 006 C, 070 C, 000 C,
 ( 81 ) 016 C, 000 C, 053 C, 004 C, 0F4 C, 006 C, 070 C, 000 C,
 ( 82 ) 0F4 C, 006 C, 070 C, 000 C, 054 C, 0FF C, 000 C, 0F0 C,
 ( 83 ) 043 C, 0EB C, 000 C, 0F0 C, 0EB C, 0EA C, 000 C, 0F0 C,
 ( 84 ) 05F C, 002 C, 015 C, 006 C, 018 C, 017 C, 012 C, 0E1 C,
 ( 85 ) 057 C, 000 C, 053 C, 004 C, 06F C, 000 C, 053 C, 004 C,
 ( 86 ) 087 C, 000 C, 053 C, 004 C, 09F C, 000 C, 053 C, 004 C,
 ( 87 ) 0B7 C, 000 C, 053 C, 004 C, 0F4 C, 006 C, 070 C, 000 C,
 ( 88 ) 020 C, 001 C, 0DF C, 005 C, 04D C, 0F8 C, 000 C, 0F0 C,
 ( 89 ) 041 C, 0F8 C, 000 C, 0F0 C, 0BA C, 016 C, 012 C, 0E1 C,
 ( 8A ) 039 C, 0E7 C, 000 C, 0F0 C, 095 C, 017 C, 012 C, 0E1 C,
 ( 8B ) 02E C, 0E8 C, 000 C, 0F0 C, 0FD C, 001 C, 015 C, 006 C,
 ( 8C ) 000 C, 0E0 C, 000 C, 0F0 C, 085 C, 017 C, 012 C, 0E1 C,
 ( 8D ) 06E C, 0FE C, 000 C, 0F0 C, 046 C, 002 C, 094 C, 007 C,
 ( 8E ) 053 C, 0FF C, 000 C, 0F0 C, 0A4 C, 0F0 C, 000 C, 0F0 C,
 ( 8F ) 022 C, 005 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( 90 ) 094 C, 010 C, 016 C, 001 C, 07B C, 002 C, 015 C, 006 C,
 ( 91 ) 0B1 C, 002 C, 015 C, 005 C, 056 C, 002 C, 094 C, 007 C,
 ( 92 ) 0B1 C, 02A C, 094 C, 007 C, 0D3 C, 017 C, 012 C, 0E1 C,
 ( 93 ) 01C C, 018 C, 012 C, 0E1 C, 0BC C, 010 C, 016 C, 001 C,
 ( 94 ) 07A C, 003 C, 015 C, 006 C, 062 C, 007 C, 070 C, 000 C,
 ( 95 ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 96 ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 97 ) 03F C, 001 C, 015 C, 005 C, 085 C, 002 C, 0AC C, 0E3 C,
 ( 98 ) 0EA C, 0D0 C, 010 C, 016 C, 001 C, 0EA C, 000 C, 0F0 C,
 ( 99 ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 9A ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 9B ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 9C ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 9D ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 9E ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( 9F ) 0DA C, 010 C, 016 C, 001 C, 0DA C, 010 C, 016 C, 001 C,
 ( A0 ) 059 C, 0EC C, 000 C, 0F0 C, 03D C, 0E1 C, 000 C, 0F0 C,
 ( A1 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A2 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A3 ) 001 C, 0E4 C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A4 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A5 ) 097 C, 0EA C, 000 C, 0F0 C, 0DB C, 011 C, 001 C, 0C0 C,
 ( A6 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A7 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A8 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( A9 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( AA ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( AB ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( AC ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( AD ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( AE ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( AF ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( B0 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( B1 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( B2 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( B3 ) 000 C, 000 C, 000 C, 000 C, 0B0 C, 002 C, 0BE C, 002 C,
 ( B4 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( B5 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( B6 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( B7 ) 097 C, 0EA C, 000 C, 0F0 C, 097 C, 0EA C, 000 C, 0F0 C,
 ( B8 ) 052 C, 000 C, 053 C, 004 C, 0D2 C, 0EE C, 000 C, 0F0 C,
 ( B9 ) 0CF C, 000 C, 053 C, 004 C, 0E7 C, 000 C, 053 C, 004 C,
 ( BA ) 0FF C, 000 C, 053 C, 004 C, 0DB C, 0EE C, 000 C, 0F0 C,
 ( BB ) 017 C, 001 C, 053 C, 004 C, 0B7 C, 08E C, 000 C, 0F0 C,
 ( BC ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( BD ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( BE ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( BF ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C0 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C1 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C2 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C3 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C4 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C5 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C6 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C7 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C8 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( C9 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( CA ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( CB ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( CC ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( CD ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( CE ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( CF ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D0 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D1 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D2 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D3 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D4 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D5 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D6 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D7 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D8 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( D9 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( DA ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( DB ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( DC ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( DD ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( DE ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( DF ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E0 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E1 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E2 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E3 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E4 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E5 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E6 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E7 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E8 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( E9 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( EA ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( EB ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( EC ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( ED ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( EE ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( EF ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( F0 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( F1 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( F2 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( F3 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( F4 ) 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C, 000 C,
 ( F5 ) 0D6 C, 000 C, 001 C, 091 C, 060 C, 0E8 C, 000 C, 0F0 C,
 ( F6 ) 0D6 C, 000 C, 001 C, 091 C, 060 C, 0E8 C, 000 C, 0F0 C,
 ( F7 ) 086 C, 002 C, 0D6 C, 000 C, 0D6 C, 000 C, 000 C, 091 C,
 ( F8 ) 060 C, 0E8 C, 000 C, 0F0 C, 002 C, 002 C, 030 C, 000 C,
 ( F9 ) 032 C, 0E9 C, 000 C, 0F0 C, 002 C, 002 C, 000 C, 000 C,
 ( FA ) 010 C, 000 C, 03E C, 09A C, 03A C, 097 C, 000 C, 000 C,
 ( FB ) 0FF C, 000 C, 001 C, 000 C, 000 C, 0A0 C, 020 C, 02B C,
 ( FC ) 000 C, 000 C, 040 C, 000 C, 000 C, 07E C, 04A C, 073 C,
 ( FD ) 000 C, 07C C, 080 C, 000 C, 001 C, 000 C, 059 C, 097 C,
 ( FE ) 01C C, 0F8 C, 004 C, 083 C, 000 C, 07C C, 040 C, 0EF C,
 ( FF ) 00B C, 0F8 C, 029 C, 0F7 C, 000 C, 0F0 C, 002 C, 070 C,


: BS   8 EMIT  ;
: BSS  0  ?DO  BS  LOOP ;

\ anew test_file
decimal
windc   thedc     \ the Device Context

variable  x.max.size    770  x.max.size !
variable  y.max.size    520  y.max.size !

: at  GOTOXY      ;

:  640*480    640 x.max.size !   480 y.max.size !  ;
:  800*600    860 x.max.size !   620 y.max.size !  ;
: 1024*768   1000 x.max.size !   668 y.max.size !  ;
   800*600

defer   dot
: dot1 ( x y color ... )  setpixel:  thedc  ;

: slop.line  400 200  do i i 2 /  green  dot1  loop  ;   \ 200 200 Moveto: theDC   400 400  LineTo: theDC
: pp slop.line ;

: COLOR.BOX     ( X Y WIDTH HEIGHT COLOR ... )
                CONDC                PutHandle: theDC \ initialize DC ( DEVICE CONTEXT )
              ( 0 0 500 500 GREEN )   FillArea: theDC \ to the console
                ;

: test          ( -- )
                CONDC              PutHandle: theDC \ initialize DC ( DEVICE CONTEXT )
                20 0 300 100 LTRED  FillArea: theDC \ to the console
                ( BLACK ) YELLOW   LineColor: theDC
                  0   0               MoveTo: theDC \ SLOPE LINE
                100 100               LineTo: theDC \   "    "
                BLUE              BrushColor: theDC
                 50 50 20         FillCircle: theDC
                200 20 130 40     LTMAGENTA   COLOR.BOX
                slop.line   ;


\ : 2>R   >R >R  ;
\ : 2R@   R@  R> R@  SWAP >R  ;

\ : 4DROP      ( X Y WIDTH HEIGHT ... )    2DROP  2DROP  ;
\ : 4DUP       ( X Y WIDTH HEIGHT ... )    2OVER  2OVER  ;

: X+WIDTH    ( X Y WIDTH HEIGTH ... X Y WIDTH HEIGTH N ) 4DUP  DROP NIP      + ;
: Y+HEIGHT   ( X Y WIDTH HEIGHT ... X Y WIDTH HEIGTH N ) 4DUP  NIP  ROT DROP + ;
: X          ( X Y WIDTH HEIGHT ... X Y WIDTH HEIGTH N ) 4DUP  2DROP    DROP   ;
: Y          ( X Y WIDTH HEIGHT ... X Y WIDTH HEIGTH N ) 4DUP  2DROP    NIP    ;

: SQUARE.BOX ( X Y WIDTH HEIGHT COLOR ... )
                CONDC            PutHandle: theDC \ initialize DC ( DEVICE CONTEXT )
             \  0 0 500 500 BLUE  FillArea: theDC \ to the console
              ( YELLOW )                     LineColor: theDC
                X        >R  Y         R> SWAP  MoveTo: theDC
                X+WIDTH  >R  Y         R> SWAP  LineTo: theDC
                X+WIDTH  >R  Y+HEIGHT  R> SWAP  LineTo: theDC
                X        >R  Y+HEIGHT  R> SWAP  LineTo: theDC
                X        >R  Y         R> SWAP  LineTo: theDC
             \  BLUE            BrushColor: theDC
             \  50 50 20        FillCircle: theDC
             \  slop.line   ;
                4DROP  ;


: t1              condc  puthandle:  thedc
         0 0 100 100 red  fillarea:  thedc
                  green  linecolor:  thedc
                        0 0 moveto:  thedc
                    770 550 lineto:  thedc   ;
: dot.size  2 ;

: dot' ( x y color ... ) >r \ linecolor:  thedc        \  X Y COLOR setpixel: theDC
  over  dot.size  -    over  dot.size  -        \ moveto:  thedc
  over  dot.size  +    over  dot.size  +   r>   fillarea:  thedc   2drop  ;

' dot'  is  dot

: MARK.X.Y.SCALE      condc  puthandle:  thedc
                      yellow linecolor:  thedc
                          X0" Y0" moveto:  thedc
  x.max.size @  Y0"              lineto:  thedc
  x.max.size @  y.max.size @    lineto:  thedc
  X0"            y.max.size @    lineto:  thedc
  X0"            Y0"              lineto:  thedc

  x.max.size @ 1+  X0"
  do     5  0
         do      j     y.max.size @  i -      red   dot
                 j                   i Y0" +   red   dot
         loop    100
  +loop
  y.max.size @ 1+  Y0"
  do     5  0
         do      X0"  i +             j        red   dot
                 x.max.size @  i -   j        red   dot
         loop    100
  +loop
  x.max.size @ 1+  X0"
  do       y.max.size @ 1+  Y0"
           do      j   i   red  dot      50
           +loop   50
  +loop    ;

: t2                  condc  puthandle:  thedc
                      yellow linecolor:  thedc
                          X0" Y0" moveto:  thedc
  x.max.size @  Y0"              lineto:  thedc
  x.max.size @  y.max.size @    lineto:  thedc
  X0"            y.max.size @    lineto:  thedc
  X0"            Y0"              lineto:  thedc

  y.max.size @  100 /    0      cr
  do       y.max.size @  100  /  i  - 100 *  5 .r
           6 0 do cr  loop
  loop     0   4 .r

  x.max.size @  100 / 1+  1     cr cr   9 spaces
  do          i 100 *  11 .r
  loop

  y.max.size @ 1+  Y0"
  do       x.max.size @ 1+   X0"
           do      i   j   red  dot      10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"
  do       x.max.size @ 1+   X0"
             do    i   j   red  dot       5
           +loop   100
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot      10
           +loop   50
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot       5
           +loop   100
  +loop    cr
  ;


: t2                  condc  puthandle:  thedc      \ 1024*768
                      yellow linecolor:  thedc
                          X0" Y0" moveto:  thedc
  x.max.size @  Y0"              lineto:  thedc
  x.max.size @  y.max.size @    lineto:  thedc
  X0"            y.max.size @    lineto:  thedc
  X0"            Y0"              lineto:  thedc

  y.max.size @  100 /    0     cr
  do       y.max.size @  100   /  i  -  DUP >R  100 *  5 .r
           R@ 1 =  R@ 4 =  R>  3 =  OR  OR  IF  8  ELSE  7  THEN
           0   do    CR    loop
  loop     0   4 .r

  x.max.size @  100 / 1+  1     cr    8 ( 9 ) spaces
  do          i 100 *  I 3 =  I 5 =  I 7  =  OR  OR   IF  12  ELSE  13  THEN  .r
  loop

  y.max.size @ 1+  Y0"
  do       x.max.size @ 1+   X0"
           do      i   j   red  dot      10
           +loop   50
  +loop

  y.max.size @ 1+  Y0"
  do       x.max.size @ 1+   X0"
             do    i   j   red  dot       5
           +loop   100
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot      10
           +loop   50
  +loop

  x.max.size @ 1+  X0"
  do       y.max.size @ 1+   Y0"
           do      j   i   red  dot       5
           +loop   100
  +loop    cr
  ;





: deg>rad  ( deg ... rad )   s>d  d>f  2.0e0 f*  fpi f*  360e0 f/  ;

fvariable  gain        250e0  gain      f!
fvariable  offset      250e0  offset    f!
 variable  x.center    250    x.center   !
 variable  y.center    360    y.center   !

: DOT.LINE ( X Y COLOR ... )   DROP  2DUP 1 +  LINE  ;

: plot.center.line   ( ... )    \  ( x.center y.center ... )
  x.max.size @  X0"  do   i    y.center @  Y0" +       red  dot  loop
  y.max.size @  Y0"  do        x.center @  X0" +   i   red  dot  loop   ;

: plot.sine.curve  ( x.center y.center ... )    y.center !    x.center !   \  plot.center.line
  750   0
  do    i X0" + ( x ) i deg>rad  fsin  gain f@ f*  offset f@ f+  f>d  drop  Y0" + ( y )  blue      DOT.LINE \ dot
        i X0" + ( x ) i deg>rad  fcos  gain f@ f*  offset f@ f+  f>d  drop  Y0" + ( y )  yellow    DOT.LINE \ dot
  loop  ;

: psc   360  250  plot.sine.curve  ;

\ ' PSC   IS  _PSC

: T     MARK.X.Y.SCALE      PSC    ;












































HEX

VARIABLE  (X)1
VARIABLE  (Y)1
VARIABLE  (C)1
VARIABLE  (COLOR)1

: GC!    ( ASCII.CODE  X Y COLOR ... )    (COLOR)1 !  (Y)1 !  (X)1 !  (C)1 !
  8      0
  DO     (C)1 C@   8 * FONT.TABLE + I + C@
         0       7
         DO      2 /MOD  SWAP
                 IF      (X)1 @  I 2 *  +  (Y)1 @  J 2 *  +  (COLOR)1 @   DOT
                 THEN    -1
         +LOOP   DROP
  LOOP   ;

 

hex

VARIABLE  (X)
VARIABLE  (Y)
VARIABLE  (C)
VARIABLE  (COLOR)
   VARIABLE  X.OFFSET    20 X.OFFSET  !
   VARIABLE  Y.OFFSET    20 Y.OFFSET  !
VARIABLE  X.OFFSET'   60 X.OFFSET' !   \ GRAPIC OFFSET TO THE MARK
VARIABLE  Y.OFFSET'    8 Y.OFFSET' !

: {0~F>ASC} ( 0~F ... 30~3F )   DUP  0  9  BETWEEN
  IF    30 +
  ELSE  DUP   0A  0F  BETWEEN
        IF    0A  -   41 +
        ELSE  DROP  ABORT"  not 0 ~ F "
        THEN
  THEN  ;

: .XXXX.GRAPHIC  ( N X Y COLOR ... )   (COLOR) !  (Y) !  (X) !   \   T
  4  0
  DO    BASE @  /MOD
  LOOP  DROP
  4  0
  DO    {0~F>ASC}  (X) @  I 10 * +  (Y) @   (COLOR) @   \ CR .S  \ 2DROP 2DROP
         GC!
  LOOP  ;      \   CLS  T  1234  50 60 RED  .XXXX.GRAPHIC   KEY DROP











variable  X.OFFSET
variable  Y.OFFSET
variable  cpu.memory

: MAP.n    ( a' -- )    0  10000  um/mod   nip   10000  *   cpu.memory  !
  MARK.X.Y.SCALE           10000  0    CLS
  DO    I  1000  MOD    0  =
        IF    10  0
              DO     I 60 +  J 80 /  Y.OFFSET @ + Y.OFFSET' @  +  GREEN  DOT
              LOOP
              I  10  I 80 /  Y.OFFSET @  +  YELLOW  .XXXX.GRAPHIC
        THEN
        I  cpu.memory  @  +  C@'  dup  0=    swap  FF  =  or  not
        IF     I 100 /MOD  2 *  SWAP 2 *  X.OFFSET @ +  X.OFFSET' @ +  SWAP
               Y.OFFSET @ +  Y.OFFSET' @  +  RED     DOT
        THEN
  LOOP  0 2A AT   T
  cr    ."   CPU.MEMORY range from  "  cpu.memory  @  dup  9  u.r  ."  to  "  FFFF +   9  u.r  ;

: MAP0         00000  MAP.n  ;   \     00000 ~    0FFFF
: MAP1         10000  MAP.n  ;   \     10000 ~    1FFFF
: MAP2         20000  MAP.n  ;   \     20000 ~    2FFFF
: MAP3         30000  MAP.n  ;   \     30000 ~    3FFFF
: MAP4         40000  MAP.n  ;   \     40000 ~    4FFFF
: MAP5         50000  MAP.n  ;   \     50000 ~    5FFFF
: MAP6         60000  MAP.n  ;   \     60000 ~    6FFFF
: MAP7         70000  MAP.n  ;   \     70000 ~    7FFFF
: MAP8         80000  MAP.n  ;   \     80000 ~    8FFFF
: MAP9         90000  MAP.n  ;   \     90000 ~    9FFFF
: MAPA         A0000  MAP.n  ;   \     A0000 ~    AFFFF
: MAPB         B0000  MAP.n  ;   \     B0000 ~    BFFFF
: MAPC         C0000  MAP.n  ;   \     C0000 ~    CFFFF
: MAPD         D0000  MAP.n  ;   \     D0000 ~    DFFFF
: MAPE         E0000  MAP.n  ;   \     E0000 ~    EFFFF
: MAPF         F0000  MAP.n  ;   \     F0000 ~    FFFFF

: MAP2000   20000000  MAP.n  ;   \  20000000 ~ 2000FFFF
: MAP2001   20010000  MAP.n  ;   \  20010000 ~ 2001FFFF
: MAP2002   20020000  MAP.n  ;   \  20020000 ~ 2002FFFF
: MAP2003   20030000  MAP.n  ;   \  20030000 ~ 2003FFFF
: MAP2004   20040000  MAP.n  ;   \  20040000 ~ 2004FFFF
: MAP2005   20050000  MAP.n  ;   \  20050000 ~ 2005FFFF
: MAP2006   20060000  MAP.n  ;   \  20060000 ~ 2006FFFF
: MAP2007   20070000  MAP.n  ;   \  20070000 ~ 2007FFFF

: MAP*     ( from to -- )
  1+     0  10000  um/mod  nip
  swap   0  10000  um/mod  nip   ?do  i  MAP.n  key  1b ( esc )  =  if  leave  then   loop  ;

: MAP*     ( from to -- )  swap  ?do  i  MAP.n  key  1B ( esc )  =  if  leave  then   10000  +loop  ;

: MAP.stm32F407      0000   fFFFF (  512k )  MAP*   20000000  2000FFFF (  64k )  MAP*  ;
: MAP.stm32F429      0000  1fFFFF ( 2048k )  MAP*   20000000  2003FFFF ( 256k )  MAP*  ;

: M407    MAP.stm32F407   ;
: M429    MAP.stm32F429   ;
hex

VARIABLE   2nd.number
defer     _disassem.number.stack>   \ behaving like r>
defer    _>disassem.number.stack    \ behaving like >r
variable  last.char
\ -------------------------------------------------------------------------------------------
:  u.|   ( n -- )            0  (D.) TYPE  ;  \ 32 bit system

: 0u.|   ( n -- )  dup   0a   0f   between   if  '0' emit  then
                   dup   0a0  0ff  between   if  '0' emit  then   u.|  ;

: leading.zero   ( n -- f )
  dup   0a            0f         between   if  drop  -1  exit  then
  dup   0a0           0ff        between   if  drop  -1  exit  then
  dup   0a00          0fff       between   if  drop  -1  exit  then
  dup   0a000         0ffff      between   if  drop  -1  exit  then
  dup   0a0000        0fffff     between   if  drop  -1  exit  then
  dup   0a00000       0ffffff    between   if  drop  -1  exit  then
  dup   0a000000      0fffffff   between   if  drop  -1  exit  then
  dup   0a0000000     0ffffffff  between   if  drop  -1  exit  then   drop  0  ;

: 0u.r  ( n1 n2 -- )  >r  dup  leading.zero  swap  0  (D.) R> OVER -  3 roll dup>r  -  SPACES  r>
  if    '0' emit      \  0a0000000
  else  space         \   12345678
  then  TYPE ;

: check.b=1.or.not  ( a' -- f )  >r
  r@    16@'  f000  and  4000 f000 between
  if    -1
  else  r@    16@'  ff80  and
        case  1000  of   -1  endof
              1100  of   -1  endof
              1200  of   -1  endof
                          0  swap
        endcase
  then  r>drop  ;

variable   make.macro?
variable  .b=1?
: .b=1    .b=1? @  if  ."  b=1"  then ;
: .b=1    .b=1? @  if  make.macro? @  getxy  drop  30 <  and   if  ." .b=1"   else   ."  b=1"  then   then  ;

defer    _.all.ok??
defer    _,all.ok??
: .b=1   _,all.ok??  ;

variable  last.char.is.'R'?
variable  last.char.is.'#'?
variable  i+.loop

: (1")0    do        i c@   dup   'R'  =
              if     emit   last.char.is.'R'?  on     1
              else   drop   last.char.is.'R'?  @
                     if   i  c@  '''  =
                          if            i+.loop  off
                              begin  1  i+.loop  +!   i  i+.loop @  +  c@  '''  <>
                              until     i+.loop  @    last.char.is.'R'?  off
                          else    i  c@  emit    1
                          then
                     else         i  c@  emit    1
                     then
              then  \ last.char.is.'R'?  off
           +loop    .b=1  ;

: (2")0     (1")0   ;
: (3")0     (1")0   ;
: (4")0     (1")0   ;












:  ?y  ( x -)   getxy  nip  gotoxy  ;

0  value  +#
:  +n     +#  +    ;

variable  found.constant?

       : cfa>constant.QUEUE.MAX      8000 ( 200 )  ;
VARIABLE cfa>constant.QUEUE.COUNTER
CREATE   cfa>constant.QUEUE                           cfa>constant.QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.cfa>constant.QUEUE      cfa>constant.QUEUE   cfa>constant.QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;

: >cfa>constant.queue  ( cfa constant -- ) \  words'?  @   not  if    2drop   exit   then
   cfa>constant.QUEUE.COUNTER  @           cfa>constant.QUEUE.MAX           >=      abort" *** cfa>constant.QUEUE.COUNTER overflow *** "
   cfa>constant.QUEUE                      cfa>constant.QUEUE.COUNTER           @   +  2!   8  cfa>constant.QUEUE.COUNTER  +!   ;

:  cfa>constant ( cfa -- n -1 / 0 )  dup  @  000000a4  =  if  4 + @  -1  else  drop  0  then  ;

: .io.name(constant)   ( io.a'=constant -- -1 / 0 )  found.constant?  off
  cfa>constant.QUEUE.counter @   0
  ?do      cfa>constant.QUEUE  i  +  4  +  @  over  =
     if    cfa>constant.QUEUE  i  +        @  >name ( cfa>nfa ) nfa-count  49 +n ?y ." \ "  type  found.constant? on  leave
     then  4
  +loop    drop  found.constant?  @  ;  \ ?dup  if  -1  else  0  then  ;

: .io.name(constant)'' ( io.a'=constant -- )  found.constant?  off
  cfa>constant.QUEUE.counter @   0
  ?do      cfa>constant.QUEUE  i  +  4  +  @  over  =
     if    cfa>constant.QUEUE  i  +        @  >name ( cfa>nfa ) nfa-count  49 +n ?y ." \ "  type   leave
     then  4
  +loop    drop  ; \ found.constant?  @  ?dup  if  -1  else  0  then  ;

\ vocabulary  io_constant  io_constant  definitions
: equ   dup  constant    last @  N>CFAPTR  @ ( cfa )  >cfa>constant.queue  ;
: ===   dup  constant    last @  N>CFAPTR  @ ( cfa )  >cfa>constant.queue  ;
: reg:  over +  equ  ;   

variable Virtue.Forth?     

: emit.vf.register.tinyForth  ( n -- f )     \  stc
  case   0  of   ." pc"     -1  endof
         1  of   ." nsp"    -1  endof
         2  of   ." st"     -1  endof
         3  of   ." cg"     -1  endof
         4  of   ." R4"     -1  endof
         5  of   ." sp"     -1  endof
         6  of   ." rp"     -1  endof
         7  of   ." R7"     -1  endof
         8  of   ." R8"     -1  endof
         9  of   ." R9"     -1  endof
        0a  of   ." T"      -1  endof
        0b  of   ." Rb"     -1  endof
        0c  of   ." Rc"     -1  endof
        0d  of   ." Rd"     -1  endof
        0e  of   ." Re"     -1  endof
        0f  of   ." Rf"     -1  endof
         0  swap
  endcase   ;

: emit.vf.register.msp430eForth  ( n -- f )  \  dtc
  case   0  of   ." pc"     -1  endof
         1  of   ." nsp"    -1  endof
         2  of   ." st"     -1  endof
         3  of   ." cg"     -1  endof
         4  of   ." up"     -1  endof
         5  of   ." ip"     -1  endof
         6  of   ." rp"     -1  endof
         7  of   ." sp"     -1  endof
         8  of   ." temp"   -1  endof
         9  of   ." R9"     -1  endof
        0a  of   ." Ra"     -1  endof
        0b  of   ." Rb"     -1  endof
        0c  of   ." Rc"     -1  endof
        0d  of   ." Rd"     -1  endof
        0e  of   ." trcptr" -1  endof
        0f  of   ." unext"  -1  endof
         0  swap
  endcase   ;

eForth(-1)/swiftForth?(0)?  @
#if
: emit.vf.register.430eForthAL03  ( n -- f )  \  dtc
  case   0  of   ." R0"     -1  endof
         1  of   ." R1"     -1  endof
         2  of   ." R2"     -1  endof
         3  of   ." UP"     -1  endof   \ 720 eForth  cht
       \ 4  of   ." temp1"  -1  endof
         4  of   ." Y"      -1  endof
         5  of   ." SP"     -1  endof
         6  of   ." W"      -1  endof
         7  of   ." T"      -1  endof
         8  of   ." R8"     -1  endof
         9  of   ." R9"     -1  endof
        0a  of   ." RA"     -1  endof
        0b  of   ." RB"     -1  endof
        0c  of   ." RC"     -1  endof
        0d  of   ." RP"     -1  endof
        0e  of   ." LR"     -1  endof
        0f  of   ." PC"     -1  endof
                             0  swap
  endcase   ;

#else

tachyonForth?  @     tachyon.assembler?  @  and    propellerForth? @  and
   #if     pFth?  @
      #if
: emit.vf.register.430eForthAL03  ( n -- f )  \   cortex.m3     tachyon ?????  W
  case  \ 0  of   ." R0"        -1  endof

  145  of  ." ACCBYTE"          -1  endof
  150  of  ." ?????"            -1  endof
  151  of  ." ?????"            -1  endof
  152  of  ." ?????"            -1  endof
  153  of  ." ?????"            -1  endof
  154  of  ." ?????"            -1  endof
  155  of  ." ?????"            -1  endof
  156  of  ." _PUSHBRANCH"      -1  endof
  157  of  ." ?????"            -1  endof
  158  of  ." ?????"            -1  endof
  159  of  ." ?????"            -1  endof
  15a  of  ." ?????"            -1  endof
  15b  of  ." ?????"            -1  endof
  15c  of  ." ?????"            -1  endof
  15d  of  ." ?????"            -1  endof
  15e  of  ." ?????"            -1  endof
  15f  of  ." ?????"            -1  endof
  160  of  ." ?????"            -1  endof
  161  of  ." ?????"            -1  endof
  162  of  ." ?????"            -1  endof
  163  of  ." ?????"            -1  endof
  164  of  ." ?????"            -1  endof
  165  of  ." ?????"            -1  endof
  166  of  ." ?????"            -1  endof
  167  of  ." ?????"            -1  endof
  168  of  ." ?????"            -1  endof
  169  of  ." ?????"            -1  endof
  16a  of  ." ?????"            -1  endof
  16b  of  ." ?????"            -1  endof
  16c  of  ." ?????"            -1  endof
  16d  of  ." ?????"            -1  endof
  16e  of  ." ?????"            -1  endof
  16f  of  ." ?????"            -1  endof
  170  of  ." ?????"            -1  endof
  171  of  ." ?????"            -1  endof
  172  of  ." ?????"            -1  endof
  173  of  ." ?????"            -1  endof
  174  of  ." ?????"            -1  endof
  175  of  ." popx"             -1  endof
  176  of  ." ?????"            -1  endof
  177  of  ." ?????"            -1  endof
  178  of  ." ?????"            -1  endof
  179  of  ." ?????"            -1  endof
  17a  of  ." ?????"            -1  endof
  17b  of  ." ?????"            -1  endof
  17c  of  ." ?????"            -1  endof
  17d  of  ." ?????"            -1  endof
  17e  of  ." ?????"            -1  endof
  17f  of  ." ?????"            -1  endof
  180  of  ." ?????"            -1  endof
  181  of  ." _PUSHACC"         -1  endof
  182  of  ." _pushx"           -1  endof
  183  of  ." ?????"            -1  endof
  184  of  ." ?????"            -1  endof
  185  of  ." ?????"            -1  endof
  186  of  ." ?????"            -1  endof
  187  of  ." PUSHCOG"          -1  endof
  188  of  ." ?????"            -1  endof
  189  of  ." ?????"            -1  endof
  18a  of  ." ip"            -1  endof
  18b  of  ." X"             -1  endof
  18c  of  ." Y"             -1  endof
  18d  of  ." sp"               -1  endof   \  SETUPIP
  18e  of  ." T"                -1  endof   \  SAVEIP
  18f  of  ." rp"            -1  endof
  190  of  ." usp"           -1  endof
  191  of  ." temp1"         -1  endof
  192  of  ." temp2"         -1  endof
  193  of  ." temp3"         -1  endof

  194  of  ." ?????"            -1  endof   \ 6e0
  195  of  ." rpopins"          -1  endof
  196  of  ." RPOPX_ret"        -1  endof
  197  of  ." dst1"             -1  endof
  198  of  ." zcalls"           -1  endof
  199  of  ." clockpins"        -1  endof
  19a  of  ." spisck"           -1  endof
  19b  of  ." spiout"           -1  endof
  19c  of  ." spiinp"           -1  endof
  19d  of  ." spice"            -1  endof
  19e  of  ." spicnt"           -1  endof
  19f  of  ." REG0"             -1  endof
  1a0  of  ." REG1"             -1  endof
  1a1  of  ." REG2"             -1  endof
  1a2  of  ." REG3"             -1  endof
  1a3  of  ." REG4"             -1  endof
  1a4  of  ." txticks"          -1  endof
  1a5  of  ." txmask"           -1  endof
  1a6  of  ." regptr"           -1  endof
  1a7  of  ." Xptr"             -1  endof
  1a8  of  ." unext"            -1  endof
  1a9  of  ." ip"               -1  endof
  1aa  of  ." acc"              -1  endof
  1ab  of  ." x"                -1  endof
  1ac  of  ." r0"               -1  endof
  1ad  of  ." r1"               -1  endof
  1ae  of  ." r2"               -1  endof
  1af  of  ." stkptr"           -1  endof
  1b0  of  ." depth"            -1  endof
  1b1  of  ." lapcnt"           -1  endof
  1b2  of  ." target"           -1  endof
  1b3  of  ." T"                -1  endof
  1b4  of  ." S"                -1  endof   \ datastk
  1b5  of  ." S'"               -1  endof
  1b6  of  ." S''"              -1  endof
  1b7  of  ." retstk"           -1  endof
  1b8  of  ." ?????"            -1  endof
  1b9  of  ." ?????"            -1  endof
  1ba  of  ." ?????"            -1  endof
  1bb  of  ." ?????"            -1  endof
  1bc  of  ." ?????"            -1  endof
  1bd  of  ." ?????"            -1  endof
  1be  of  ." ?????"            -1  endof
  1bf  of  ." ?????"            -1  endof
  1c0  of  ." ?????"            -1  endof
  1c1  of  ." ?????"            -1  endof
  1c2  of  ." ?????"            -1  endof
  1c3  of  ." ?????"            -1  endof
  1c4  of  ." ?????"            -1  endof
  1c5  of  ." ?????"            -1  endof
  1c6  of  ." ?????"            -1  endof
  1c7  of  ." ?????"            -1  endof
  1c8  of  ." ?????"            -1  endof
  1c9  of  ." ?????"            -1  endof
  1ca  of  ." ?????"            -1  endof
  1cb  of  ." ?????"            -1  endof
  1cc  of  ." ?????"            -1  endof
  1cd  of  ." loopstk"          -1  endof   \  ice  of  ." i
  1ce  of  ." loopstk+1"        -1  endof
  1cf  of  ." loopstk+2"        -1  endof
  1d0  of  ." loopstk+3"        -1  endof
  1d1  of  ." loopstk+4"        -1  endof
  1d2  of  ." loopstk+5"        -1  endof
  1d3  of  ." loopstk+6"        -1  endof
  1d4  of  ." loopstk+7"        -1  endof
  1d5  of  ." branchstk"        -1  endof
  1d6  of  ." branchstk+1"      -1  endof
  1d7  of  ." branchstk+2"      -1  endof
  1d8  of  ." W"      -1  endof
  1d9  of  ." X"      -1  endof
  1da  of  ." Y"      -1  endof
  1db  of  ." Z"      -1  endof
  1dc  of  ." M"            -1  endof
  1dd  of  ." N"            -1  endof
  1de  of  ." P"            -1  endof
  1df  of  ." Q"            -1  endof
  1e0  of  ." SP"           -1  endof
  1e1  of  ." IP"           -1  endof
  1e2  of  ." RP"           -1  endof
  1e3  of  ." ?????"            -1  endof
  1e4  of  ." ?????"            -1  endof
  1e5  of  ." ?????"            -1  endof
  1e6  of  ." ?????"            -1  endof
  1e7  of  ." ?????"            -1  endof
  1e8  of  ." ?????"            -1  endof
  1e9  of  ." ?????"            -1  endof
  1ea  of  ." ?????"            -1  endof
  1eb  of  ." ?????"            -1  endof
  1ec  of  ." ?????"            -1  endof
  1ed  of  ." ?????"            -1  endof
  1ee  of  ." ?????"            -1  endof
  1ef  of  ." ?????"            -1  endof
  1f0  of  ." PAR"              -1  endof
  1f1  of  ." CNT"              -1  endof
  1f2  of  ." INA"              -1  endof
  1f3  of  ." INB"              -1  endof
  1f4  of  ." OUTA"             -1  endof
  1f5  of  ." instr"            -1  endof
  1f6  of  ." DIRA"             -1  endof
  1f7  of  ." DIRB"             -1  endof
  1f8  of  ." CTRA"             -1  endof
  1f9  of  ." CTRB"             -1  endof
  1fa  of  ." FRQA"             -1  endof
  1fb  of  ." FRQB"             -1  endof
  1fc  of  ." PHSA"             -1  endof
  1fd  of  ." PHSB"             -1  endof
  1fe  of  ." VCFG"             -1  endof
  1ff  of  ." VSCL"             -1  endof    \  deltaR
  dup         ." R"   u.|
                                 0  swap
  endcase   ;

      #else

: emit.vf.register.430eForthAL03  ( n -- f )  \   cortex.m3     tachyon ?????  W
  case  \ 0  of   ." R0"        -1  endof

  145  of  ." ACCBYTE"          -1  endof
  150  of  ." ?????"            -1  endof
  151  of  ." ?????"            -1  endof
  152  of  ." ?????"            -1  endof
  153  of  ." ?????"            -1  endof
  154  of  ." ?????"            -1  endof
  155  of  ." ?????"            -1  endof
  156  of  ." _PUSHBRANCH"      -1  endof
  157  of  ." ?????"            -1  endof
  158  of  ." ?????"            -1  endof
  159  of  ." ?????"            -1  endof
  15a  of  ." ?????"            -1  endof
  15b  of  ." ?????"            -1  endof
  15c  of  ." ?????"            -1  endof
  15d  of  ." ?????"            -1  endof
  15e  of  ." ?????"            -1  endof
  15f  of  ." ?????"            -1  endof
  160  of  ." ?????"            -1  endof
  161  of  ." ?????"            -1  endof
  162  of  ." ?????"            -1  endof
  163  of  ." ?????"            -1  endof
  164  of  ." ?????"            -1  endof
  165  of  ." ?????"            -1  endof
  166  of  ." ?????"            -1  endof
  167  of  ." ?????"            -1  endof
  168  of  ." ?????"            -1  endof
  169  of  ." ?????"            -1  endof
  16a  of  ." ?????"            -1  endof
  16b  of  ." ?????"            -1  endof
  16c  of  ." ?????"            -1  endof
  16d  of  ." ?????"            -1  endof
  16e  of  ." ?????"            -1  endof
  16f  of  ." ?????"            -1  endof
  170  of  ." ?????"            -1  endof
  171  of  ." ?????"            -1  endof
  172  of  ." ?????"            -1  endof
  173  of  ." ?????"            -1  endof
  174  of  ." ?????"            -1  endof
  175  of  ." popx"             -1  endof
  176  of  ." ?????"            -1  endof
  177  of  ." ?????"            -1  endof
  178  of  ." ?????"            -1  endof
  179  of  ." ?????"            -1  endof
  17a  of  ." ?????"            -1  endof
  17b  of  ." ?????"            -1  endof
  17c  of  ." ?????"            -1  endof
  17d  of  ." ?????"            -1  endof
  17e  of  ." ?????"            -1  endof
  17f  of  ." ?????"            -1  endof
  180  of  ." ?????"            -1  endof
  181  of  ." _PUSHACC"         -1  endof
  182  of  ." _pushx"           -1  endof
  183  of  ." ?????"            -1  endof
  184  of  ." ?????"            -1  endof
  185  of  ." ?????"            -1  endof
  186  of  ." ?????"            -1  endof
  187  of  ." PUSHCOG"          -1  endof
  188  of  ." ?????"            -1  endof
  189  of  ." ?????"            -1  endof
  18a  of  ." ip"            -1  endof
  18b  of  ." X"             -1  endof
  18c  of  ." Y"             -1  endof
  18d  of  ." sp"               -1  endof   \  SETUPIP
  18e  of  ." T"                -1  endof   \  SAVEIP
  18f  of  ." rp"            -1  endof
  190  of  ." usp"           -1  endof
  191  of  ." temp1"         -1  endof
  192  of  ." temp2"         -1  endof
  193  of  ." temp3"         -1  endof

  194  of  ." ?????"            -1  endof   \ 6e0
  195  of  ." rpopins"          -1  endof
  196  of  ." RPOPX_ret"        -1  endof
  197  of  ." dst1"             -1  endof
  198  of  ." zcalls"           -1  endof
  199  of  ." clockpins"        -1  endof
  19a  of  ." spisck"           -1  endof
  19b  of  ." spiout"           -1  endof
  19c  of  ." spiinp"           -1  endof
  19d  of  ." spice"            -1  endof
  19e  of  ." spicnt"           -1  endof
  19f  of  ." REG0"             -1  endof
  1a0  of  ." REG1"             -1  endof
  1a1  of  ." REG2"             -1  endof
  1a2  of  ." REG3"             -1  endof
  1a3  of  ." REG4"             -1  endof
  1a4  of  ." txticks"          -1  endof
  1a5  of  ." txmask"           -1  endof
  1a6  of  ." regptr"           -1  endof
  1a7  of  ." Xptr"             -1  endof
  1a8  of  ." unext"            -1  endof
  1a9  of  ." ip"               -1  endof
  1aa  of  ." acc"              -1  endof
  1ab  of  ." x"                -1  endof
  1ac  of  ." r0"               -1  endof
  1ad  of  ." r1"               -1  endof
  1ae  of  ." r2"               -1  endof
  1af  of  ." stkptr"           -1  endof
  1b0  of  ." depth"            -1  endof
  1b1  of  ." lapcnt"           -1  endof
  1b2  of  ." target"           -1  endof
  1b3  of  ." T"                -1  endof
  1b4  of  ." S"                -1  endof   \ datastk
  1b5  of  ." S'"               -1  endof
  1b6  of  ." S''"              -1  endof
  1b7  of  ." retstk"           -1  endof
  1b8  of  ." ?????"            -1  endof
  1b9  of  ." ?????"            -1  endof
  1ba  of  ." ?????"            -1  endof
  1bb  of  ." ?????"            -1  endof
  1bc  of  ." ?????"            -1  endof
  1bd  of  ." ?????"            -1  endof
  1be  of  ." ?????"            -1  endof
  1bf  of  ." ?????"            -1  endof
  1c0  of  ." ?????"            -1  endof
  1c1  of  ." ?????"            -1  endof
  1c2  of  ." ?????"            -1  endof
  1c3  of  ." ?????"            -1  endof
  1c4  of  ." ?????"            -1  endof
  1c5  of  ." ?????"            -1  endof
  1c6  of  ." ?????"            -1  endof
  1c7  of  ." ?????"            -1  endof
  1c8  of  ." ?????"            -1  endof
  1c9  of  ." ?????"            -1  endof
  1ca  of  ." ?????"            -1  endof
  1cb  of  ." ?????"            -1  endof
  1cc  of  ." ?????"            -1  endof
  1cd  of  ." loopstk"          -1  endof   \  ice  of  ." i
  1ce  of  ." loopstk+1"        -1  endof
  1cf  of  ." loopstk+2"        -1  endof
  1d0  of  ." loopstk+3"        -1  endof
  1d1  of  ." loopstk+4"        -1  endof
  1d2  of  ." loopstk+5"        -1  endof
  1d3  of  ." loopstk+6"        -1  endof
  1d4  of  ." loopstk+7"        -1  endof
  1d5  of  ." branchstk"        -1  endof
  1d6  of  ." branchstk+1"      -1  endof
  1d7  of  ." branchstk+2"      -1  endof
  1d8  of  ." branchstk+3"      -1  endof
  1d9  of  ." branchstk+4"      -1  endof
  1da  of  ." branchstk+5"      -1  endof
  1db  of  ." _RUNMOD_"         -1  endof
  1dc  of  ." ?????"            -1  endof
  1dd  of  ." ?????"            -1  endof
  1de  of  ." ?????"            -1  endof
  1df  of  ." ?????"            -1  endof
  1e0  of  ." ?????"            -1  endof
  1e1  of  ." ?????"            -1  endof
  1e2  of  ." ?????"            -1  endof
  1e3  of  ." ?????"            -1  endof
  1e4  of  ." ?????"            -1  endof
  1e5  of  ." ?????"            -1  endof
  1e6  of  ." ?????"            -1  endof
  1e7  of  ." ?????"            -1  endof
  1e8  of  ." ?????"            -1  endof
  1e9  of  ." ?????"            -1  endof
  1ea  of  ." ?????"            -1  endof
  1eb  of  ." ?????"            -1  endof
  1ec  of  ." ?????"            -1  endof
  1ed  of  ." ?????"            -1  endof
  1ee  of  ." ?????"            -1  endof
  1ef  of  ." ?????"            -1  endof
  1f0  of  ." PAR"              -1  endof
  1f1  of  ." CNT"              -1  endof
  1f2  of  ." INA"              -1  endof
  1f3  of  ." INB"              -1  endof
  1f4  of  ." OUTA"             -1  endof
  1f5  of  ." instr"            -1  endof
  1f6  of  ." DIRA"             -1  endof
  1f7  of  ." DIRB"             -1  endof
  1f8  of  ." CTRA"             -1  endof
  1f9  of  ." CTRB"             -1  endof
  1fa  of  ." FRQA"             -1  endof
  1fb  of  ." FRQB"             -1  endof
  1fc  of  ." PHSA"             -1  endof
  1fd  of  ." PHSB"             -1  endof
  1fe  of  ." VCFG"             -1  endof
  1ff  of  ." VSCL"             -1  endof    \  deltaR
  dup         ." R"   u.|
                                 0  swap
  endcase   ;
      #then
   #else
tachyonForth?  @     tachyon.assembler?  @  and
      #if
: emit.vf.register.430eForthAL03  ( n -- f )  \   cortex.m3     tachyon "  W
  case  \ 0  of   ." R0"     -1  endof
        \ 1  of   ." R1"     -1  endof
        \ 2  of   ." R2"     -1  endof
        \ 3  of   ." R3"     -1  endof
     \    4  of    'Y' emit  -1  endof
     \    5  of    'W' emit  -1  endof
     \    6  of    'T' emit  -1  endof
     \    7  of    's' emit
     \             'p' emit  -1  endof
     \    8  of   ." R8"     -1  endof
     \    9  of   ." R9"     -1  endof
     \   0a  of   ." Ra"     -1  endof
     \   0b  of   ." Rb"     -1  endof
     \   0c  of   ." Rc"     -1  endof
     \   0d  of   ." rp"     -1  endof
     \   0e  of   ." lr"     -1  endof
     \   0f  of   ." pc"     -1  endof

  150  of   ." ?????"         -1  endof
  151  of   ." ?????"         -1  endof
  152  of   ." ?????"         -1  endof
  153  of   ." ?????"         -1  endof
  154  of   ." ?????"         -1  endof
  155  of   ." ?????"         -1  endof
  156  of   ." _PUSHBRANCH"   -1  endof
  157  of   ." ?????"         -1  endof
  158  of   ." ?????"         -1  endof
  159  of   ." ?????"         -1  endof
  15a  of   ." ?????"         -1  endof
  15b  of   ." ?????"         -1  endof
  15c  of   ." ?????"         -1  endof
  15d  of   ." ?????"         -1  endof
  15e  of   ." ?????"         -1  endof
  15f  of   ." ?????"         -1  endof
  160  of   ." ?????"         -1  endof
  161  of   ." ?????"         -1  endof
  162  of   ." ?????"         -1  endof
  163  of   ." ?????"         -1  endof
  164  of   ." ?????"         -1  endof
  165  of   ." ?????"         -1  endof
  166  of   ." ?????"         -1  endof
  167  of   ." ?????"         -1  endof
  168  of   ." ?????"         -1  endof
  169  of   ." ?????"         -1  endof
  16a  of   ." ?????"         -1  endof
  16b  of   ." ?????"         -1  endof
  16c  of   ." ?????"         -1  endof
  16d  of   ." ?????"         -1  endof
  16e  of   ." ?????"         -1  endof
  16f  of   ." ?????"         -1  endof
  170  of   ." ?????"         -1  endof
  171  of   ." ?????"         -1  endof
  172  of   ." ?????"         -1  endof
  173  of   ." ?????"         -1  endof
  174  of   ." ?????"         -1  endof
  175  of   ." POPx"          -1  endof
  176  of   ." ?????"         -1  endof
  177  of   ." ?????"         -1  endof
  178  of   ." ?????"         -1  endof
  179  of   ." ?????"         -1  endof
  17a  of   ." ?????"         -1  endof
  17b  of   ." ?????"         -1  endof
  17c  of   ." ?????"         -1  endof
  17d  of   ." ?????"         -1  endof
  17e  of   ." ?????"         -1  endof
  17f  of   ." ?????"         -1  endof
  180  of   ." ?????"         -1  endof
  181  of   ." ?????"         -1  endof
  182  of   ." _PUSHx"        -1  endof
  183  of   ." ?????"         -1  endof
  184  of   ." ?????"         -1  endof
  185  of   ." ?????"         -1  endof
  186  of   ." ?????"         -1  endof
  187  of   ." ?????"         -1  endof
  188  of   ." ?????"         -1  endof
  189  of   ." ?????"         -1  endof
  18a  of   ." ?????"         -1  endof
  18b  of   ." ?????"         -1  endof
  18c  of   ." ?????"         -1  endof
  18c  of   ." ?????"         -1  endof
  18d  of   ." ?????"         -1  endof
  18e  of   ." ?????"         -1  endof
  18f  of   ." _PUSHr"        -1  endof
  190  of   ." ?????"         -1  endof
  191  of   ." ?????"         -1  endof
  192  of   ." _PUSHr_RET"    -1  endof
  193  of   ." rPOPx"         -1  endof
  194  of   ." ?????"         -1  endof
  195  of   ." rPOPpins"      -1  endof
  196  of   ." ?????"         -1  endof
  197  of   ." DST1"          -1  endof
  198  of   ." zcalls"        -1  endof
  199  of   ." CLOCKPINS"     -1  endof
  19a  of   ." SPISCK"        -1  endof
  19b  of   ." spiout"        -1  endof
  19c  of   ." spiinp"        -1  endof
  19d  of   ." spice"         -1  endof
  19e  of   ." spicnt"        -1  endof
  19f  of   ." REG0"          -1  endof
  1a0  of   ." REG1"          -1  endof
  1a1  of   ." REG2"          -1  endof
  1a2  of   ." REG3"          -1  endof
  1a3  of   ." REG4"          -1  endof
  1a4  of   ." TXticks"       -1  endof
  1a5  of   ." TXmask"        -1  endof
  1a6  of   ." REGptr"        -1  endof
  1a7  of   ." Xptr"          -1  endof
  1a8  of   ." unext"         -1  endof
  1a9  of   ." IP"            -1  endof
  1aa  of   ." ACC"           -1  endof
  1ab  of   ." X"             -1  endof
  1ac  of   ." R0"            -1  endof
  1ad  of   ." R1"            -1  endof
  1ae  of   ." R2"            -1  endof
  1af  of   ." STKptr"        -1  endof
  1b0  of   ." depth"         -1  endof
  1b1  of   ." lapcnt"        -1  endof
  1b2  of   ." target"        -1  endof
  1b3  of   ." T"             -1  endof
  1b4  of   ." S"             -1  endof   \ datastk
  1b5  of   ." S'"            -1  endof
  1b6  of   ." S''"           -1  endof
  1b7  of   ." retstk"        -1  endof
  1b8  of   ." ?????"         -1  endof
  1b9  of   ." ?????"         -1  endof
  1ba  of   ." ?????"         -1  endof
  1bb  of   ." ?????"         -1  endof
  1bc  of   ." ?????"         -1  endof
  1bd  of   ." ?????"         -1  endof
  1be  of   ." ?????"         -1  endof
  1bf  of   ." ?????"         -1  endof
  1c0  of   ." ?????"         -1  endof
  1c1  of   ." ?????"         -1  endof
  1c2  of   ." ?????"         -1  endof
  1c3  of   ." ?????"         -1  endof
  1c4  of   ." ?????"         -1  endof
  1c5  of   ." ?????"         -1  endof
  1c6  of   ." ?????"         -1  endof
  1c7  of   ." ?????"         -1  endof
  1c8  of   ." ?????"         -1  endof
  1c9  of   ." ?????"         -1  endof
  1ca  of   ." ?????"         -1  endof
  1cb  of   ." ?????"         -1  endof
  1cc  of   ." ?????"         -1  endof
  1cd  of   ." loopstk"       -1  endof
  1ce  of   ." loopstk+1"     -1  endof
  1cf  of   ." loopstk+2"     -1  endof
  1d0  of   ." loopstk+3"     -1  endof
  1d1  of   ." loopstk+4"     -1  endof
  1d2  of   ." loopstk+5"     -1  endof
  1d3  of   ." loopstk+6"     -1  endof
  1d4  of   ." loopstk+7"     -1  endof
  1d5  of   ." branchstk"     -1  endof
  1d6  of   ." branchstk+1"   -1  endof
  1d7  of   ." branchstk+2"   -1  endof
  1d8  of   ." branchstk+3"   -1  endof
  1d9  of   ." branchstk+4"   -1  endof
  1da  of   ." branchstk+5"   -1  endof
\ 1db  of   ." branchstk+6"   -1  endof
  1dc  of   ." ?????"         -1  endof
  1dd  of   ." ?????"         -1  endof
  1de  of   ." ?????"         -1  endof
  1df  of   ." ?????"         -1  endof
  1e0  of   ." ?????"         -1  endof
  1e1  of   ." ?????"         -1  endof
  1e2  of   ." ?????"         -1  endof
  1e3  of   ." ?????"         -1  endof
  1e4  of   ." ?????"         -1  endof
  1e5  of   ." ?????"         -1  endof
  1e6  of   ." ?????"         -1  endof
  1e7  of   ." ?????"         -1  endof
  1e8  of   ." ?????"         -1  endof
  1e9  of   ." ?????"         -1  endof
  1ea  of   ." ?????"         -1  endof
  1eb  of   ." ?????"         -1  endof
  1ec  of   ." ?????"         -1  endof
  1ed  of   ." ?????"         -1  endof
  1ee  of   ." ?????"         -1  endof
  1ef  of   ." ?????"         -1  endof
  1f0  of   ." PAR"           -1  endof
  1f1  of   ." CNT"           -1  endof
  1f2  of   ." INA"           -1  endof
  1f3  of   ." INB"           -1  endof
  1f4  of   ." OUTA"          -1  endof
  1f5  of   ." INSTR"         -1  endof
  1f6  of   ." DIRA"          -1  endof
  1f7  of   ." DIRB"          -1  endof
  1f8  of   ." CTRA"          -1  endof
  1f9  of   ." CTRB"          -1  endof
  1fa  of   ." FRQA"          -1  endof
  1fb  of   ." FRQB"          -1  endof
  1fc  of   ." PHSA"          -1  endof
  1fd  of   ." PHSB"          -1  endof
  1fe  of   ." VCFG"          -1  endof
  1ff  of   ." VSCL"          -1  endof  \  deltaR
                               0  swap
  endcase   ;

      #else
      stm32F407eF720new? @
         #if
: emit.vf.register.430eForthAL03  ( n -- f )  \   cortex.m3
  case   0  of   ." V"     -1  endof
         1  of   ." X"      -1  endof
         2  of   ." RP"     -1  endof
         3  of   ." UP"     -1  endof
         4  of    'Y' emit  -1  endof
         5  of    'W' emit  -1  endof
         6  of    'T' emit  -1  endof
         7  of    'S' emit
                  'P' emit  -1  endof
         8  of   ." R8"     -1  endof
         9  of   ." R9"     -1  endof
        0a  of   ." RA"     -1  endof
        0b  of   ." RB"     -1  endof
        0c  of   ." RC"     -1  endof
        0d  of   ." RP"     -1  endof
        0e  of   ." LR"     -1  endof
        0f  of   ." PC"     -1  endof
                             0  swap
  endcase   ;

         #else

: emit.vf.register.430eForthAL03  ( n -- f )  \   cortex.m3
  case   0  of   ." R0"     -1  endof
         1  of   ." R1"     -1  endof
         2  of   ." R2"     -1  endof
         3  of   ." R3"     -1  endof
         4  of    'Y' emit  -1  endof
         5  of    'W' emit  -1  endof
         6  of    'T' emit  -1  endof
         7  of    'S' emit
                  'P' emit  -1  endof
         8  of   ." R8"     -1  endof
         9  of   ." R9"     -1  endof
        0a  of   ." RA"     -1  endof
        0b  of   ." RB"     -1  endof
        0c  of   ." RC"     -1  endof
        0d  of   ." RP"     -1  endof
        0e  of   ." LR"     -1  endof
        0f  of   ." PC"     -1  endof
                             0  swap
  endcase   ;

variable  no.T,W?   \  no.T,W?  on
: nTW     no.T,W?  dup  @  if  off  else  on  then  ;

: emit.vf.register.mpe407   ( n -- f )  \   cortex.m3
  case   0  of   ." R0"     -1  endof
         1  of   ." R1"     -1  endof
         2  of   ." R2"     -1  endof
         3  of   ." R3"     -1  endof
         4  of no.T,W? @
            if   ." R4"
            else   'Y' emit
            then            -1  endof
         5  of no.T,W? @
            if   ." R5"
            else   'W' emit
            then            -1  endof
         6  of     'S' emit
                   'P' emit -1  endof
         7  of     'T' emit -1  endof
         8  of   ." R8"     -1  endof
         9  of   ." R9"     -1  endof
        0a  of   ." RA"     -1  endof
        0b  of   ." RB"     -1  endof
        0c  of   ." RC"     -1  endof
        0d  of   ." RP"     -1  endof
        0e  of   ." LR"     -1  endof
        0f  of   ." PC"     -1  endof
                             0  swap
  endcase   ;

         #then
      #then
   #then
#then

: emit.vf.register.msp430g2553camelforh   ( n -- f )
  case   0  of   ." pc"     -1  endof
         1  of   ." rp"     -1  endof
         2  of   ." st"     -1  endof
         3  of   ." cg"     -1  endof
         4  of   ." sp"     -1  endof
         5  of   ." ip"     -1  endof
         6  of   ." W"      -1  endof
         7  of   ." T"      -1  endof
         8  of   ." index"  -1  endof
         9  of   ." limit"  -1  endof
        0a  of   ." Ra"     -1  endof
        0b  of   ." Rb"     -1  endof
        0c  of   ." Rc"     -1  endof
        0d  of   ." Rd"     -1  endof
        0e  of   ." Re"     -1  endof
        0f  of   ." Rf"     -1  endof
        0  swap
  endcase   ;


propForth? @   \ Sal Sanci
#if
: emit.vf.register.430eForthAL03a  ( n -- f )  \   cortex.m3     tachyon ?????  W
  case
     00f  of  ." a_xasmtwogtflagi"    -1  endof
     010  of  ." a__xasmtwogtflagf1"  -1  endof
     011  of  ." a__xasmtwogtflagf2"  -1  endof
     01a  of  ." a__xasmonegtonei"    -1  endof
\    01f  of  ." a__xasmtwogtonei"    -1  endof
     025  of  ." a__xasmtwogtzi"      -1  endof

     035  of  ." a_COGatget"          -1  endof

     044  of  ." a_COGbangput"        -1  endof

     0a0  of  ." a_rsPush1"           -1  endof

     0a9  of  ." rsPtr"               -1  endof

     0b0  of  ." a_rsPop1"            -1  endof

     0bd  of  ." a_lxasm2"            -1  endof

     0c2  of  ." fDestInc"            -1  endof
     0c3  of  ." fCondMask"           -1  endof

     0c5  of  ." fAddrMask"           -1  endof
     0c6  of  ." fLongMask"           -1  endof

     0c8  of  ." ip"                  -1  endof
     0c9  of  ." rsPtr"               -1  endof
     0ca  of  ." stPtr"               -1  endof
     0cb  of  ." stTOS"               -1  endof
     0cc  of  ." tregone"             -1  endof
     0cd  of  ." tregtwo"             -1  endof
     0ce  of  ." tregthree"           -1  endof
     0cf  of  ." tregfour"            -1  endof
     0d0  of  ." tregfive"            -1  endof
     0d1  of  ." tregsix"             -1  endof


\    18b  of  ." X"                   -1  endof
\    18c  of  ." Y"                   -1  endof
\    18d  of  ." sp"                  -1  endof   \  SETUPIP
\    18e  of  ." T"                   -1  endof   \  SAVEIP

\    190  of  ." usp"                 -1  endof

\    193  of  ." temp3"               -1  endof

     1f0  of  ." PAR"                 -1  endof
     1f1  of  ." CNT"                 -1  endof
     1f2  of  ." INA"                 -1  endof
     1f3  of  ." INB"                 -1  endof
     1f4  of  ." OUTA"                -1  endof
     1f5  of  ." OUTB"                -1  endof
     1f6  of  ." DIRA"                -1  endof
     1f7  of  ." DIRB"                -1  endof
     1f8  of  ." CTRA"                -1  endof
     1f9  of  ." CTRB"                -1  endof
     1fa  of  ." FRQA"                -1  endof
     1fb  of  ." FRQB"                -1  endof
     1fc  of  ." PHSA"                -1  endof
     1fd  of  ." PHSB"                -1  endof
     1fe  of  ." VCFG"                -1  endof
     1ff  of  ." VSCL"                -1  endof
     dup      ." R"   u.|              0  swap
  endcase   ;

: emit.vf.register.430eForthAL03b  ( n -- f )  \   cortex.m3     tachyon ?????  W
  case
     00f  of  ." flgi"    -1  endof
     010  of  ." flg1"    -1  endof
     011  of  ." flg2"    -1  endof
     01a  of  ." 1>9"     -1  endof
\    01f  of  ." 2>9"     -1  endof
     025  of  ." 2>0"     -1  endof

     035  of  ." COG@"          -1  endof

     044  of  ." COG!"   -1  endof

     0a0  of  ." >r"           -1  endof

     0a9  of  ." rp"               -1  endof

     0b0  of  ." r>"            -1  endof

     0bd  of  ." a_lxasm2"            -1  endof

     0c2  of  ." fDestInc"            -1  endof
     0c3  of  ." fCondMask"           -1  endof

     0c5  of  ." fAddrMask"           -1  endof
     0c6  of  ." fLongMask"           -1  endof

     0c8  of  ." IP"                  -1  endof
     0c9  of  ." RP"               -1  endof
     0ca  of  ." SP"               -1  endof
     0cb  of  ." T"               -1  endof
     0cc  of  ." t1"             -1  endof
     0cd  of  ." t2"             -1  endof
     0ce  of  ." t3"           -1  endof
     0cf  of  ." t4"            -1  endof
     0d0  of  ." t5"            -1  endof
     0d1  of  ." t6"             -1  endof


\    18b  of  ." X"                   -1  endof
\    18c  of  ." Y"                   -1  endof
\    18d  of  ." sp"                  -1  endof   \  SETUPIP
\    18e  of  ." T"                   -1  endof   \  SAVEIP

\    190  of  ." usp"                 -1  endof

\    193  of  ." temp3"               -1  endof

     1f0  of  ." PAR"                 -1  endof
     1f1  of  ." CNT"                 -1  endof
     1f2  of  ." INA"                 -1  endof
     1f3  of  ." INB"                 -1  endof
     1f4  of  ." OUTA"                -1  endof
     1f5  of  ." OUTB"                -1  endof
     1f6  of  ." DIRA"                -1  endof
     1f7  of  ." DIRB"                -1  endof
     1f8  of  ." CTRA"                -1  endof
     1f9  of  ." CTRB"                -1  endof
     1fa  of  ." FRQA"                -1  endof
     1fb  of  ." FRQB"                -1  endof
     1fc  of  ." PHSA"                -1  endof
     1fd  of  ." PHSB"                -1  endof
     1fe  of  ." VCFG"                -1  endof
     1ff  of  ." VSCL"                -1  endof
     dup      ." R"   u.|              0  swap
  endcase   ;

variable   a?
    :      emit.vf.register.430eForthAL03   ( n -- f )  a?  @  \   cortex.m3     tachyon ?????  W
    if     emit.vf.register.430eForthAL03a  ( n -- f )
    else   emit.vf.register.430eForthAL03b  ( n -- f )
    then   ;
  #then
#then

: emit.vf.register  ( r -- f )
  pFth?                   @  if  emit.vf.register.430eForthAL03         exit  then
  430eForthAL03?          @  if  emit.vf.register.430eForthAL03         exit  then
  430uForth?              @  if  emit.vf.register.430eForthAL03         exit  then
\ cortex.m4?              @  if  emit.vf.register.430eForthAL03         exit  then
  cortex.m4?              @  if  mpe407?  @
                               if   emit.vf.register.mpe407
                               else emit.vf.register.430eForthAL03
                               then                                     exit  then
  tinyForth(stc)?         @  if  emit.vf.register.tinyForth             exit  then
  msp430eForth?           @  if  emit.vf.register.msp430eForth          exit  then
  msp430g2553camelForth?  @  msp430f1611camelForth?  @  or \ msp430g2553mecrispForth2?  @  or
                                                                        mecrispForth?      or
                             if  emit.vf.register.msp430g2553camelforh  exit  then  drop  0   ;

\ ***** lower case letter r shall be neglected. **********
defer  _emit.port.name   ( a' -- )
defer  _emit.port.name'  ( a' -- )
0  value  fhd
DEFER    _new.file
DEFER  _write.file
DEFER   _open.file

defer      _.xx'
variable   2.f?

: ?.xx'  ( n -- )  2.f? @  if  _.xx'  else   drop   then  ;

: (1")1  \ ((")) COUNT bounds                last.char off
     do            i c@  'R' =
        if    Virtue.Forth? @
                   if                       _disassem.number.stack>  dup  ?.xx'  emit.vf.register   drop
                   else         'R'  emit   _disassem.number.stack>  dup  ?.xx'  u.|    \  R16  R8 ===  R1234    R56
                   then
        else       i c@  '#' =
           if                               _disassem.number.stack>  dup  dup ?.xx' 0u.|  _emit.port.name   \  #
           else    i c@  dup ?.xx'  emit              \  =F0123456
           then
        then
     loop   .b=1  ;


: 2on   ( -- )  s" 2.f" R/W  _new.file to fhd   2.f?  on ;
: 2off  ( -- )  s" :00000001FF"   fhd   _write.file ( write.file )  fhd  _open.file   2.f?  off ;

:  ?y  ( x -)   getxy  nip  gotoxy  ;
: 24y   24  ?y  ;
: 2ay   2a  ?y  ;
: 2cy   2c  ?y  ;
: 31y   31  ?y  ;
: 2fy   2f  ?y  ;
: 30y   30  ?y  ;
: 34y   34  ?y  ;
: 38y   38  ?y  ;
: 3cy   3c  ?y  ;
: 3ey   3e  ?y  ;
: 3fy   3f  ?y  ;
: 40y   40  ?y  ;
: 4fy   4f  ?y  ;
: 5fy   5f  ?y  ;

variable  h.mode
variable         (PC+offset)
variable  14P*4+.(PC+#)?
variable  (pc?
variable  c.type?
variable  1st.#
variable  2nd.#
variable  disassem.special?

: u.L  ( n L -- )  drop   0 <#  # # # # # # # #  #>  TYPE  ;

: s=  ( a1 len1 a2 len2 -- f )   compare   0=  ;

: (n")1  ( u l -- )   12345678  1st.#  !   87654321  2nd.#  !   (pc?     off
      do              i c@  'R' =          i 3  s" (pc"  s=  if   getxy  drop  (pc?  !  then
        if    Virtue.Forth? @
           if         emit.vf.register   drop
           else       'R'  emit
                      0 C.TYPE? @  =  0 DISASSEM.SPECIAL? @ =  0 VIRTUE.FORTH? @ =  1 H.MODE @ = and  and  and
                      1st.# @  12345678  =   and
              if      dup  1st.#  !
              else    1st.# @  12345678  <>
                      2nd.# @  87654321  =   and
                 if   dup  2nd.#  !
                 then
              then    u.|    last.char.is.'R'?  on  \  R16  R8 ===  R1234    R56
           then       1
        else          i c@  '#' =
           if         dup    c.type? @       last.char.is.'#'?  on
             \ if     _emit.port.name'  if    drop   else   0u.|   then
               if     _emit.port.name'  if    0u.|   else   0u.|   then
               else   0u.|   _emit.port.name
               then                            1  \   0u.|    \  #
           else       last.char.is.'#'?  @
               if     i c@   10 digit  nip
                    if      i+.loop off
                            begin  1  i+.loop  +!   i  i+.loop @  +  c@  10 digit  nip  0=   \ 1  i+.loop  +!
                            until     i+.loop  @
                    else    i c@  emit         1
                    then
               else   last.char.is.'R'?  @
                    if      i c@  '''  =
                        if    i+.loop off
                            begin  1  i+.loop  +!   i  i+.loop @  +  c@  '''  <>   \ 1  i+.loop  +!
                            until     i+.loop  @
                        else  i c@  emit       1
                        then
                    else      i c@  emit       1
                    then
               then         last.char.is.'#'?  off        \  =F0123456
           then
        then
     +loop   .b=1
     H.MODE  @  1  =  \ 14P*4+.(PC+#)?  @  and
     (pc?  @  0<>  and  if  14P*4+.(PC+#)?  off   (pc?  @  ?y  (PC+offset) @  8 u.L  ."       "  then  ;

\ : (1")1   ( u l -- )    (n")1  ;



defer  _(h0)
defer  _(h1)
defer  _(h15)

: (2")1nm  _disassem.number.stack>  _disassem.number.stack>   2swap                                                   (n")1  ;
: (2")1mm  _disassem.number.stack>  _disassem.number.stack>   2swap         2over    2over
           cr    ." :{ "            Virtue.Forth? @  >r   _(h15)   (n")1
           3f ?y           (2")0    Virtue.Forth? r> !   ."  }; "  34 ( 30 ) ?y   5  0u.r     5  0u.r    ;

: (3")1    _disassem.number.stack>  _disassem.number.stack>  _disassem.number.stack>   >r 2swap r> -rot               (n")1  ;
: (4")1    _disassem.number.stack>  _disassem.number.stack>  _disassem.number.stack>   _disassem.number.stack>  2rot  (n")1  ;

: (2")1  ( -- )         make.macro?  @
  if     (2")1mm       \ make.macro
  else   (2")1nm       \ normal
  then   ;

: mm     make.macro?  dup  @  if  off  else   on   then  ;  \ toggle nomal / make.macro


variable  abreast?    abreast?    on
: ao      abreast?    dup  @  if  off  else   on   then  ;

: (1")    abreast? @  H.MODE @  and  if  34 ( 30 )  else  4f  then ( 68 ) ?y  ((")) COUNT bounds    last.char off
     h.mode   @
     case
        0   of   (1")0     endof
        1   of   (1")1     endof
     endcase   ;

: (2")    abreast? @   H.MODE @  and  if  34 ( 30 )  else  4f  then ( 68 ) ?y  ((")) COUNT bounds   last.char off
     h.mode   @
     case
        0   of   (2")0     endof
        1   of   (2")1     endof
     endcase    ;

: (3")    abreast? @   H.MODE @  and  if  34 ( 30 )  else  4f  then ( 68 ) ?y  ((")) COUNT bounds   last.char off
     h.mode   @
     case
        0   of   (3")0     endof
        1   of   (3")1     endof
     endcase    ;

create      temp.(3")    40 allot
defer  _s"=
variable  remove.Rn=Rn?R.style?
          remove.Rn=Rn?R.style?  on
:  -r=r   remove.Rn=Rn?R.style?  dup  @  if  off  else  on  then  ;

:  (3")    abreast? @   H.MODE @  and  if  34 ( 30 )  else  4f  then ( 68 ) ?y  ((")) COUNT
     2dup    temp.(3")    swap   cmove   bounds               last.char off
     h.mode  @
     case
        0   of   (3")0     endof
        1   of   (3")1     endof
     endcase
     remove.Rn=Rn?R.style?  @
     if     1st.#  c@   2nd.# c@  =     s" R=R"   temp.(3") 3  _s"=   and  if  33 ?y  s"     "  type  then
     then   ;

: (4")    abreast? @   H.MODE @  and  if  34 ( 30 )  else  4f  then ( 68 ) ?y  ((")) COUNT bounds   last.char off
     h.mode   @
     case
        0   of   (4")0     endof
        1   of   (4")1     endof
     endcase   ;

  :  0"    COMPILE (.")   ," ; IMMEDIATE
  :  1"    COMPILE (1")   ," ; IMMEDIATE
  :  2"    COMPILE (2")   ," ; IMMEDIATE
  :  3"    COMPILE (3")   ," ; IMMEDIATE
  :  4"    COMPILE (4")   ," ; IMMEDIATE
\ --------------------------------------------------------------------------------------------------
   VARIABLE   OUT.MODE    8 OUT.MODE !
: .X         ( N ... )  0 <#                #  #>  TYPE  ;
: .XX        ( N ... )  0 <#              # #  #>  TYPE  ;
: .XXX       ( N ... )  0 <#            # # #  #>  TYPE  ;
: .XXXX      ( N ... )  0 <#          # # # #  #>  TYPE  ;
: .XXXXx     ( N ... )  0 <#        # # # # #  #>  TYPE  ;
: .XXXXxx    ( N ... )  0 <#      # # # # # #  #>  TYPE  ;
: .XXXXxxx   ( N ... )  0 <#    # # # # # # #  #>  TYPE  ;
: .XXXXxxxx  ( N ... )  0 <#  # # # # # # # #  #>  TYPE  ;

: .1#        ( N ... )  0 <#                #  #>  TYPE  ;
: .2#        ( N ... )  0 <#              # #  #>  TYPE  ;
: .3#        ( N ... )  0 <#            # # #  #>  TYPE  ;
: .4#        ( N ... )  0 <#          # # # #  #>  TYPE  ;
: .5#        ( N ... )  0 <#        # # # # #  #>  TYPE  ;
: .6#        ( N ... )  0 <#      # # # # # #  #>  TYPE  ;
: .7#        ( N ... )  0 <#    # # # # # # #  #>  TYPE  ;
: .8#        ( N ... )  0 <#  # # # # # # # #  #>  TYPE  ;

defer     _u
variable  last.u         cp'  @  last.u  !
variable  .(.8a?     .(.8a?  on
variable  .\.8a?     .\.8a?  on
: ao      .(.8a?  @  not  .(.8a?  !     .\.8a?  @  not  .\.8a?  !   last.u  @  _u  ;
: ao0     .(.8a?  off  .\.8a?  off  last.u  @  _u  ;
: ao1     .(.8a?  off  .\.8a?  on   last.u  @  _u  ;
: ao2     .(.8a?  on   .\.8a?  off  last.u  @  _u  ;
: ao3     .(.8a?  on   .\.8a?  on   last.u  @  _u  ;

: om  ( -- )   original.mnemonic?   dup  @  if   off  else   on  then  last.u  @  _u   ;

: .xx.xx    ( n -- n )                   1b ?y  dup  ffff and  100 /mod  swap  .xx  space  .xx        ;
: .xx.xx    ( n -- n )  .(.8a?   @  if   1b ?y  dup  ffff and  100 /mod  swap  .xx  space  .xx  then  ;
: .xx.xx11  ( n -- n )  .(.8a?   @  if   11 ?y  dup  ffff and  100 /mod  swap  .xx  space  .xx  then  ;
: .xx.xx14  ( n -- n )  .(.8a?   @  if   14 ?y  dup  ffff and  100 /mod  swap  .xx  space  .xx  then  ;
: .xx.xx1a  ( n -- n )  .(.8a?   @  if   1a ?y  dup  ffff and  100 /mod  swap  .xx  space  .xx  then  ;
: .xx.xx17  ( n -- n )  .(.8a?   @  if   17 ?y  dup  ffff and  100 /mod  swap  .xx  space  .xx  then  ;

: .0XX     ( N ... )  DUP  $0A0  $0FF BETWEEN  IF  $30 EMIT  ELSE  SPACE  THEN  .XX  ;  \ 0a0  7f

: .?XX(h)  ( N ... )     dup  2nd.number  !   h.mode @  0<>  if  drop   3 spaces  exit  then
   DUP  0        9   BETWEEN  if    4  spaces  .x    50 ?y exit   then             \    9
   DUP  $0A    $9f   BETWEEN  if    3  spaces  .xx   50 ?y exit   then             \   0a
   DUP  $0A0  $0ff   BETWEEN  if    2  spaces  '0'  emit          then   .xx  50 ?y ;   \  0a0

: .xxxx(h)    h.mode @  0<>  if  drop  exit  then   .xxxx  ;
: .xxxx(h)    h.mode @  0<>  if  drop  50 ?y exit   then
   dup  0a    0f    between  if  3 spaces  '0' emit   .x      50 ?y exit   then
   dup  0a0   0ff   between  if  2 spaces  '0' emit   .xx     50 ?y exit   then
   dup  0a00  0fff  between  if    space   '0' emit   .xxx    50 ?y exit   then
              0ffff  and 5  u.r                               50 ?y  ;

: .xxxxxxxx(h)    h.mode @  0<>  if  drop  50 ?y exit   then
   dup  0a          0f          between  if  7 spaces  '0' emit   .x         50 ?y exit   then
   dup  0a0         0ff         between  if  6 spaces  '0' emit   .xx        50 ?y exit   then
   dup  0a00        0fff        between  if  5 spaces  '0' emit   .xxx       50 ?y exit   then
   dup  0a000       0ffff       between  if  4 spaces  '0' emit   .xxxx      50 ?y exit   then
   dup  0a0000      0fffff      between  if  3 spaces  '0' emit   .xxxxx     50 ?y exit   then
   dup  0a00000     0ffffff     between  if  2 spaces  '0' emit   .xxxxxx    50 ?y exit   then
   dup  0a000000    0fffffff    between  if    space   '0' emit   .xxxxxxx   50 ?y exit   then
   dup  0a0000000   0ffffffff   between  if            '0' emit   .xxxxxxxx  50 ?y exit   then
                             ( getxy >r 3 - r> gotoxy )            9  u.r    50 ?y  ;

  VARIABLE SUM

  : .XX+SUM    DUP  SUM +!   .XX  ;

  : U>  SWAP  U<  ;

  : .XX+SUM    DUP  SUM +!   .XX  ;

  : >A.LINE.OF.HEX.FORMAT  ( ADDR LENGTH ... )
    ?DUP
    IF     CR  0 SUM !  3A EMIT   DUP .XX+SUM
           OVER  100 /MOD  .XX+SUM    .XX+SUM
                                    0 .XX
           BOUNDS
           DO      I C@'   .XX+SUM
           LOOP    100  SUM  C@  -    .XX
    ELSE   DROP
    THEN   ;

  : >n.LINE.OF.HEX.FORMAT.10  ( FROM LENGTH ... ) \  CLS
    BEGIN   DUP    10  U>
    WHILE   OVER   10  >A.LINE.OF.HEX.FORMAT    10  -  SWAP  10  +  SWAP
    REPEAT             >A.LINE.OF.HEX.FORMAT ;

  : >n.LINE.OF.HEX.FORMAT.20  ( FROM LENGTH ... ) \  CLS
    BEGIN   DUP    20  U>
    WHILE   OVER   20  >A.LINE.OF.HEX.FORMAT    20  -  SWAP  20  +  SWAP
    REPEAT             >A.LINE.OF.HEX.FORMAT ;

    variable  >HEX'10?          \  >HEX'10?  on

  : >HEX'     ( FROM LENGTH ... )  >HEX'10?  @  if  >n.LINE.OF.HEX.FORMAT.10   else  >n.LINE.OF.HEX.FORMAT.20   then  ;

\ : >HEX'     ( FROM LENGTH ... )  >HEX'10?  @  if  >n.LINE.OF.HEX.FORMAT.10   else  >n.LINE.OF.HEX.FORMAT.20   then ( CR ." :00000001FF" ) ;

: :02000004aaaaSS ( a' -- )  cr  ." :02000004"  10  rshift  dup .xxxx  100 /mod  +  02 + 04 +  negate  ff and  .xx  ;

: >hex'(any.64k)10  ( from len -- )    dup  0=  if   2drop   exit  then
  over  >r  r@  0f  and
  if        r@  0f  and     over   +   10   <
     if     r>  :02000004aaaaSS    >hex'   exit
     else   r@  :02000004aaaaSS    r@  dup  0f   and  10  swap  -  >hex'
            10  r@  0f  and  -  -  r>  ffffFFF0  and  10  +  swap  >hex'  drop  exit
     then
  then      r>  :02000004aaaaSS    >hex'   ;

: >hex'(any.64k)20  ( from len -- )    dup  0=  if   2drop   exit  then
  over  >r  r@  1f ( 0f )  and
  if        r@  1f ( 0f )  and     over   +   20 ( 10 )  <
     if     r>  :02000004aaaaSS    >hex'   exit
     else   r@  :02000004aaaaSS    r@  dup  1f ( 0f )           and  20 ( 10 )     swap  -  >hex'
            20 ( 10 )  r@  1f ( 0f )   and  -  -  r>  ffffFFF0  and  20 ( 10 )  +  swap     >hex'  drop  exit
     then
  then      r>  :02000004aaaaSS    >hex'   ;

: >hex'(any.64k)  ( -- )   >hex'10?  @  if   >hex'(any.64k)10  else  >hex'(any.64k)20  then  ;

: >hex'(0~ffffFFFF)  ( from len -- )   bounds  ( upper lower )   0e  0
  do      dup  ( lower )   i  10000  *  dup  ffff  +  between
     if   over ( upper )   i  10000  *       ffff  +  u>
         if      dup   ( lower )  i  1+  10000  *     over ( lower )  -  >hex'(any.64k)   drop  i  1+  10000 *
         else    tuck  -  >hex'(any.64k)   leave
         then
     else  \  drop  i  10000  *
     then
  loop   ;

: >hex'(0~ffffFFFF)  ( from len -- )    dup  0=  if   2drop   exit  then
  bounds  ( upper lower )   10000  0
  do      dup  ( lower )   i  10000  *  dup  ffff  +  between
     if   over ( upper )   i  10000  *       ffff  +  u>
         if      dup   ( lower )  i  1+  10000  *     over ( lower )  -  >hex'(any.64k)   drop  i  1+  10000 *
         else    tuck  -  >hex'(any.64k)   leave
         then
     then
  loop   ;

: >hex.file' ( from len -- )  >hex'(0~ffffFFFF)  ;

: >HEX  ( CLS )  >hex.file' CR  ." :00000001FF"  cr  KEY  DROP  ;













stm32f407.sF?  @
#if
: HEX>   ( ... )   CR   ." *** please enter ???.HEX file *** "
  BEGIN
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  DROP  ( RECORD )
     R@
     IF   R>    0
          DO    DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP    high.64k  @  +  a'>a C!
          LOOP  DROP   0
     ELSE R>   2DROP   DROP  -1
     THEN
  UNTIL     QUIT  ;
#else
: HEX>   ( ... )   CR   ." *** please enter ???.HEX file *** "
  BEGIN
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  DROP  ( RECORD )
     R@
     IF   R>    0
          DO    DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP                a'>a C!
          LOOP  DROP   0
     ELSE R>   2DROP   DROP  -1
     THEN
  UNTIL   QUIT  ;




variable  length
variable  address
variable  record

: HEX>m  ( ... )   CR   ." *** please enter ???.HEX file *** "       high.64k  off
  BEGIN
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )   r@   length  !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +        ( RECORD )   dup  record  !
     04   =
     if       drop  r>     2 <>  abort"  ?????? hex file "
              KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
              KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
              remap>0?  @
              if     00ff and
              then   10  lshift  high.64k  !   -1 \ 0
     else     R@
        IF    R>     0
              DO     DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP  high.64k  @  +  a'>a C!
              LOOP   DROP         -1  \  0
        ELSE  R>    2DROP   DROP  -1
        THEN
     then
  UNTIL  high.64k  off   QUIT  ;




: HEX>??????  ( ... )   CR   ." *** please enter ???.HEX file *** "       high.64k  off
  BEGIN
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )   r@   length  !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +        ( RECORD )   dup  record  !
     04   =
     if       drop  r>    2  <>  abort"  ?????? hex file "
              KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
              KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
           \  key  drop  key  drop  ( checksum )
              remap>0?  @
              if     00ff and
              then   10  lshift  high.64k  !   0
     else     R@
        IF    R>     0
              DO     DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP  high.64k  @  +  a'>a C!
              LOOP   DROP          0
        ELSE  R>    2DROP   DROP  -1
        THEN
     then
  UNTIL       high.64k  off   QUIT  ;



: HEX>      ( ... )   CR   ." *** please enter ???.HEX file *** "       high.64k  off
  BEGIN
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )   r@   length  !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +        ( RECORD )   dup  record  !
     04   =
     if       drop  r>    2  <>  abort"  ?????? hex file "
              KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
              KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
              key  drop  key  drop  ( checksum )
              remap>0?  @     drop  0
              if     00ff and
              then   10  lshift  high.64k  !   0
     else     R@
        IF    R>     0
              DO     DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP  high.64k  @  +  a'>a C!
              LOOP   DROP          0
        ELSE  R>    2DROP   DROP  -1
        THEN
     then
  UNTIL       high.64k   off    QUIT  ;



: HEX>      ( ... )   CR   ." *** please enter ???.HEX file *** "       high.64k  off
  BEGIN
   begin
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )   r@   length  !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +        ( RECORD )   dup  record  !
     dup  05  =  if  r>drop  drop  6  0  do  key  drop  loop  0  else  -1  then
   until
     04   =
     if       drop  r>    2  <>  abort"  ?????? hex file "
              KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
              KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
              key  drop  key  drop  ( checksum )
              remap>0?  @     drop  0
              if     00ff and
              then   10  lshift  high.64k  !   0
     else     R@
        IF    R>     0
              DO     DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP  high.64k  @  +  a'>a C!
              LOOP   DROP          0
        ELSE  R>    2DROP   DROP  -1
        THEN
     then
  UNTIL       high.64k   off    QUIT  ;

\ :020000042001D9
\ :1040000000000220799D0120C19B0120CD9B012051

: HEX>??    ( ... )   CR   ." *** please enter ???.HEX file *** "        high.64k  off
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )   r@   length  !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +        ( RECORD )   dup  record  !
     04   =
     if       drop  r>    2  <>  abort"  ?????? hex file "
              KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
              KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )
              key  drop  key  drop  ( checksum )
              remap>0?  @     drop  0
              if     00ff and
              then   10  lshift  high.64k  !   0
     else     R@
        IF    R>     0
              DO     DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP  high.64k  @  +  a'>a  C!
              LOOP   DROP          0
        ELSE  R>    2DROP   DROP  -1
        THEN
     then
     BEGIN  KEY  3A ( : )  =
     UNTIL  \  cr
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  >R    ( LENGTH )   r@   length  !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
     KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )   dup  address !
     KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +        ( RECORD )   dup  record  !
     04   =
     if       drop  r>    2  <>  abort"  ?????? hex file "
              KEY  10  DIGIT  DROP    10 *  KEY  10  DIGIT  DROP  +  10 *  ( ADDR H )
              KEY  10  DIGIT  DROP  + 10 *  KEY  10  DIGIT  DROP  +        ( ADDR L )
              key  drop  key  drop  ( checksum )
              remap>0?  @     drop  0
              if     00ff and
              then   10  lshift  high.64k  !   0
     else     R@
        IF    R>     0
              DO     DUP    I +  KEY  10  DIGIT  DROP 10 *  KEY 10  DIGIT  DROP  +  SWAP  high.64k  @  +  a'>a C!
              LOOP   DROP          0
        ELSE  R>    2DROP   DROP  -1
        THEN
     then
 ;



#then

  : >HEXX     ( FROM LENGTH ... ) \ CLS
    BEGIN     DUP    20  U>
    WHILE     OVER   20  >A.LINE.OF.HEX.FORMAT
              20  -  SWAP  20  +  SWAP
    REPEAT               >A.LINE.OF.HEX.FORMAT ;

  : >HEXXX    ( FROM LENGTH ... ) \ CLS
    BEGIN     DUP    30  U>
    WHILE     OVER   30  >A.LINE.OF.HEX.FORMAT
              30  -  SWAP  30  +  SWAP
    REPEAT               >A.LINE.OF.HEX.FORMAT ;

  : >HEXXXX   ( FROM LENGTH ... ) \ CLS
    BEGIN     DUP    38  U>
    WHILE     OVER   38  >A.LINE.OF.HEX.FORMAT
              38  -  SWAP  38  +  SWAP
    REPEAT               >A.LINE.OF.HEX.FORMAT ;

  : >HEXX'    >HEXX     CR  ." :00000001FF"   ;  \  KEY  DROP  ;
  : >HEXXX'   >HEXXX    CR  ." :00000001FF"   ;  \  KEY  DROP  ;
  : >HEXXXX'  >HEXXXX   CR  ." :00000001FF"   ;  \  KEY  DROP  ;
\ ------------------------------------------------------------------------------------
  : >db  ( from length -- )     cr   over    ." ORG 0x"   .xxxx    0
    do     i  10  mod  0=  if   8 emit  space  cr  ." DB " then
           dup i + c@' ." 0x"  .xx  ',' emit
    loop   8 emit  space  drop    cr  ." END"  quit  ;

  : >TI  ( from length -- )     cls   cr   over   ." @"        .xxxx    0
    do     i  10  mod  0=  if   cr  then
           dup i + c@' .xx      space
    loop   drop    cr  ." q"    quit  ;


VARIABLE                TEMP.HERE'
: INSERT{     HERE'     TEMP.HERE'     !       ;
: }INSERT               TEMP.HERE'     @  ORG  ;

VARIABLE                TEMP.HERE''
: INSERT{{    HERE'     TEMP.HERE''    !       ;
: }}INSERT              TEMP.HERE''    @  ORG  ;

VARIABLE                TEMP.HERE'''
: INSERT{{{   HERE'     TEMP.HERE'''   !       ;
: }}}INSERT             TEMP.HERE'''   @  ORG  ;

VARIABLE                TEMP.HERE''''
: INSERT{{{{  HERE'     TEMP.HERE''''  !       ;
: }}}}INSERT            TEMP.HERE''''  @  ORG  ;


: get.x.n(ti)  ( x -- n )  dup  1  8  between not  abort"  **** 1~8 digit number is allowed only! **** "
  0   swap   0   \ x= 1~8
  ?do    10 *  key  UPC   10   digit  0=  abort" **** bad number ****"  +
  loop   ;

: get.2.n(ti)  ( -- n )    2  get.x.n(ti)  ;
: get.4.n(ti)  ( -- n )    4  get.x.n(ti)  ;

: TI>  ( -- )   insert{
  begin   key
     case  'q'  of   exit   endof
           '@'  of   get.4.n(ti)  org   key ( cr=0d )  drop  endof
                     dup   10   digit   0=  abort"  **** invalid number ****"  10  *
                     key   10   digit   0=  abort"  **** invalid number ****"      +    8,'
                     key   drop  \   key   0D ( 'cr' )   =     \   or space continuing
     endcase
  again         }insert  ;

comment:
@e000
21 83 B2 40 80 5A 20 01 F2 D3 22 00 F2 E3 21 00
B1 40 10 27 00 00 91 83 00 00 81 93 00 00 FB 23
F5 3F 31 40 00 04 B2 40 48 E0 00 02 B2 40 48 E0
02 02 B0 12 40 E0 0C 43 B0 12 00 E0 B0 12 44 E0
1C 43 30 41 03 43 FF 3F 30 41
@fffe
22 E0
q
comment;

variable  2.num
variable  4.num

: S19>    ( -- )
insert{
  begin
    begin  key  'S'  =
    until
           key  '9'  =  if   get.4.n(ti)   drop  ( 8  0  do  key  drop  loop )    exit  then
           get.2.n(ti)  dup  2.num  !   3  -  0
           get.4.n(ti)  dup  4.num  !   org
           do        key   10   digit   0=  abort"  **** invalid number ****"  10  *
                     key   10   digit   0=  abort"  **** invalid number ****"      +    8,'
           loop      key   drop   key   drop
  again
}insert  ;


: mot>  ( -- )  S19>  ;    \ mot2bin

comment:     1  2  3  4  5  6  7  8  9  0  1  2  3  4  5  6
S 1 13 2800 00 4F D1 E7 98 03 00 10 E8 04 00 10 FF FF FF FF 1A
S1132800004FD1E798030010E8040010FFFFFFFF1A
S9030000FC
comment;

\ ------------------------------------------------------------------------------------
\ from iPn
anew Buffer_To_Hex

        : display.error.message ( message.addr length --- ) ErrorBox ;

        : open.file ( file.head.seres.number  --- )
                close-file 0 <>
                if
                    s" open.file.fail!" display.error.message
                then
                ;

        : new.file ( file.name.location file.name.length file.attribute  --- file.head.seres.number )
                rot rot drop 1 - swap
                2dup
                swap count rot
                open-file 0 <>
                if
                    drop
                    swap count rot
                    create-file 0 <>
                    if
                           s"  new.file.fail!"     display.error.message
                    then
                else
                    rot rot 2drop
                then
                ;

        : new.file ( file.name.location file.name.length file.attribute  --- file.head.seres.number )  \ from albrt_lu
                rot rot drop 1 - swap
                2dup
                swap count rot
                create-file 0 <>
                if
                           s"  new.file.fail!"     display.error.message
                else
                    rot rot 2drop
                then
                ;

        : write.file ( start.addr length file.head.seres.number  --- )
                write-file  0 <>
                if
                    s" write.file.fail!" display.error.message  bye
                then
                ;
decimal
\ 0  value  fhd
\ DEFER    _new.file
\ DEFER  _write.file
\ DEFER   _open.file

 '   new.file  IS    _new.file
 ' write.file  IS  _write.file
 '  open.file  IS   _open.file

   create buf 1024  allot

   : Buffer_To_Hex ( --- )        hex
      s" xxx.hex" R/W new.file to fhd
      1024   0
      do     buf i + c@ s>d <# # # #> fhd write.file
      \      crlf$ count fhd write.file
      loop   fhd open.file   DECIMAL  ;

   : demo
      cls
      11 buf 1 +  c!
      22 buf 2 +  c!
      33 buf 3 +  c!
      buf 20 dump
      Buffer_To_Hex   ;

   : demo1
      cls
      44 buf 4 +  c!
      55 buf 5 +  c!
      66 buf 6 +  c!
      buf 20 dump
      Buffer_To_Hex   ;














\ contributed by Albert Lu
\ **********************************************************
\ Switches screen outputs (emit, cr and type) towards a file
\ **********************************************************
string strfemit
variable FdEmit>File
variable carfemit
: emit>file ( car -- )
  carfemit c! carfemit 1 FdEmit>File @ write-file drop ;

: type>file ( adr len -- )
  FdEmit>File @ write-file drop ;

: cr>file ( -- )
  13 emit>file 10 emit>file ;

: emit>FileAndScreen ( car -- )
  dup emit>file _emit  ;

: type>FileAndScreen ( adr len -- )
  2dup  type>file _type ;

: cr>FileAndScreen ( -- )
  cr>file crtab ;

: >file                      \ switches screen outup to a file only
  FdEmit>File @              \ (file must be write-opened)
  if ['] emit>file is emit
     ['] type>file is type
     ['] cr>file   is cr
  then   ;

: >FileAndScreen             \ switches screen outup to a file
  FdEmit>File @              \ and keeps the output on the screen
  if ['] emit>FileAndScreen is emit
     ['] type>FileAndScreen is type
     ['] cr>FileAndScreen   is cr
  then   ;

: >screen                    \ switches back to normal output
  ['] _emit is emit
  ['] _type is type
  ['] crtab is cr  ;

: output-to-file ( str len -- ferr )   \ Opens a file for screen output
  FdEmit>File off                      \ redirection
  2dup delete-file drop
  2dup r/w create-file
  if cr ." failed to open " type
     drop true
  else  FdEmit>File ! 2drop false
  then  ;

: close-output-to-file ( -- )
  FdEmit>File @ close-file drop  ;

cr .( Loaded  utils\fileemit.f)
\ ***********************************************************************
\ Tests
\ ***********************************************************************
cr .( Loading utils\fileemit.f tests )
: tst  \ only to file
  s" c:\toto.txt"  output-to-file abort" fileemit error"  cr ." start of redirection "
  cr    >file   ['] strfemit $400 dump   >screen  cr      cr ." done"   close-output-to-file   \ to file and to screen
  s" c:\toto1.txt" output-to-file abort" fileemit error"
  cr   cr   cr ." start of redirection " >FileAndScreen
  cr 100 0 do i . loop   cr   >screen   cr ." done"   close-output-to-file  ;

\ cr .( Loaded  utils\fileemit.f tests )

VARIABLE  >x?

: >x   s" x.f"   output-to-file abort" fileemit error"  >file   >x?  on   ;  \ cr ." start of redirection "
: x>       close-output-to-file  >screen                        >x?  off  ;

: >y   s" y.f"   output-to-file abort" fileemit error"  >file  ;  \ cr ." start of redirection "
: y>       close-output-to-file  >screen  ;

: >z   s" g:\win32for\z.f"   output-to-file abort" fileemit error"  >file  ;  \ cr ." start of redirection "
: z>   close-output-to-file  >screen  ;

















 













:  u.(decimal)  ( n1 n2 -- )  base @  >r   decimal  u.    r>  base !  ;
:   .(decimal)  ( n -- )      base @  >r   decimal   .    r>  base !  ;
:  .r(decimal)  ( n1 n2 -- )  base @  >r   decimal   .r   r>  base !  ;    '  .r(decimal)  is  _.r(decimal)
: u.r(decimal)  ( n1 n2 -- )  base @  >r   decimal  u.r   r>  base !  ;
: u.r(decimal). ( n1 n2 -- )  base @  >r   decimal  u.r   r>  base !  ;


: DATA>HEX.FILE  ( DATA ... )   BASE @ >R   hex   s>d <# # # #> fhd write.file   R>  BASE !  ;
hex
   : 8K>Hex ( --- )       hex
      s" xxx.hex" R/W new.file to fhd
      2000  0
      do    I  20  MOD 0 = IF  CRLF$  count  fhd  write.file  THEN
            i  c@'  s>d <# # # #> fhd write.file
      loop   fhd open.file   ;

  : crlf>file    crlf$ count fhd write.file  ;

  : .xx'    ( n ... )   s>d  <# # #     #>  fhd   write.file ( write.file ) ;
  : .xxxx'  ( n ... )   s>d  <# # # # # #>  fhd   write.file ( write.file ) ;

  : .XX+SUM'    DUP  SUM +!   .XX'  ;

  : >A.LINE.OF.HEX.FORMAT'  ( ADDR LENGTH ... )
    ?DUP
    IF    ( crlf>file ) 0 SUM !  ( 3A EMIT )  s" :"  fhd  write.file  DUP .XX+SUM'
           OVER  100 /MOD  .XX+SUM'    .XX+SUM'
                                     0 .XX'
           BOUNDS
           DO      I C@'   .XX+SUM'
           LOOP    100  SUM  C@  -     .XX'     crlf>file
    ELSE   DROP
    THEN   ;

  : >A.LINE.OF.HEX.FORMAT>file  ( ADDR LENGTH ... )
    ?DUP
    IF    ( crlf>file ) 0 SUM !  ( 3A EMIT )  s" :"  fhd  write.file  DUP .XX+SUM'
           OVER  100 /MOD  .XX+SUM'    .XX+SUM'
                                     0 .XX'
           BOUNDS
           DO      I C@'   .XX+SUM'
           LOOP    100  SUM  C@  -     .XX'     crlf>file
    ELSE   DROP
    THEN   ;

  : >HEX'file.old.10  ( FROM LENGTH ... ) \  CLS
    BEGIN   DUP   10  U>
    WHILE   OVER  10  >A.LINE.OF.HEX.FORMAT>file   10  -  SWAP  10  +  SWAP
    REPEAT            >A.LINE.OF.HEX.FORMAT>file   ;

  : >HEX'file.old.20  ( FROM LENGTH ... ) \  CLS
    BEGIN   DUP   20  U>
    WHILE   OVER  20  >A.LINE.OF.HEX.FORMAT>file   20  -  SWAP  20  +  SWAP
    REPEAT            >A.LINE.OF.HEX.FORMAT>file   ;

  variable  >HEX'file.old.10?

  : >HEX'file.old     >HEX'file.old.10?  @  if   >HEX'file.old.10   else  >HEX'file.old.20  then  ;


variable  flash.rom.base.address    08000000  flash.rom.base.address  !

\ :020000040800F2

: :02000004aaaaSS.file ( a' -- )    flash.rom.base.address   @   +
   crlf>file    s" :02000004"  fhd  write.file   10  rshift  dup .xxxx'  100 /mod  +  02 + 04 +  negate  ff and  .xx'
   crlf>file    ;

: >hex'(any.64k)file.10  ( from len -- )    dup  0=  if  2drop  exit  then
  over   >r
  r@   0f   and
  if        r@  0f  and     over   +   10   <
     if     r>  :02000004aaaaSS.file   >hex'file.old      exit
     else   r@  :02000004aaaaSS.file   r@  dup   0f  and  10     swap  -  >hex'file.old
            10  r@  0f  and  -  -  r>  ffffFFF0      and  10  +  swap     >hex'file.old   drop  exit
     then
  then      r>  :02000004aaaaSS.file   >hex'file.old    ;

: >hex'(any.64k)file.20  ( from len -- )    dup  0=  if  2drop  exit  then
  over     >r   r@   1f   and
  if        r@  1f  and     over   +   20   <
     if     r>  :02000004aaaaSS.file   >hex'file.old      exit
     else   r@  :02000004aaaaSS.file   r@  dup   1f  and  20     swap  -  >hex'file.old
            20  r@  1f  and  -  -  r>  ffffFFe0      and  20  +  swap     >hex'file.old   drop  exit
     then
  then      r>  :02000004aaaaSS.file   >hex'file.old    ;

: >hex'(any.64k)file    >HEX'file.old.10?  @  if   >hex'(any.64k)file.10   else  >hex'(any.64k)file.20  then  ;

: >hex'(0~ffffFFFF)file  ( from len -- )   dup  0=  if  2drop  exit  then
  bounds  ( upper lower )     10000    0
  do      2dup  =  if  2drop  leave  then
     dup  ( lower )   i  10000  *  dup  ffff  +  between
     if   over ( upper )   i  10000  *       ffff  +  u>
         if      dup   ( lower )  i  1+  10000  *     over ( lower )  -  >hex'(any.64k)file   drop  i  1+  10000 *
         else    tuck  -  >hex'(any.64k)file    leave
         then
     then
  loop   ;    

  : >HEX.file'    ( FROM LENGTH -- )  >hex'(0~ffffFFFF)file  ;

  : >HEX.file     ( FROM LENGTH -- )                                                      BASE @   >R   HEX
    ( CLS )         s" 1.hex" R/W new.file to fhd   \  s" :020000040000FA" fhd write.file     crlf>file \ s" 02"  progra.offset @  number>string  ????????????
                                                    >HEX.file'
    ( crlf>file )   s" :00000001FF"   fhd   write.file ( write.file )  fhd open.file
     R>  BASE  !  ;
                                  
  : >HEX.file+1.more  ( FROM LENGTH from length -- )                                      BASE @   >R   HEX
    ( CLS )         s" 1.hex" R/W new.file to fhd   >HEX.file'     crlf>file    >hex.file'
     crlf>file      s" :00000001FF"   fhd   write.file ( write.file )  fhd open.file
     R>  BASE  !  ;

  : >HEX.file+2.more  ( FROM LENGTH from length FROM LENGTH -- )                          BASE @   >R   HEX
    ( CLS )         s" 1.hex" R/W new.file to fhd   >HEX.file'     crlf>file    >hex.file'
                                                                   crlf>file    >HEX.file'
     crlf>file      s" :00000001FF"   fhd   write.file ( write.file )  fhd open.file
     R>  BASE  !  ;

  : >HEX.file+3.more  ( FROM LENGTH from length FROM LENGTH from length -- )              BASE @   >R   HEX
    ( CLS )         s" 1.hex" R/W new.file to fhd   >HEX.file'     crlf>file    >hex.file'
                                                                   crlf>file    >HEX.file'
                                                                   crlf>file    >HEX.file'
     crlf>file      s" :00000001FF"   fhd   write.file ( write.file )  fhd open.file
     R>  BASE  !  ;

  : >HEX.file+4.more  ( FROM LENGTH from length FROM LENGTH from length FROM LENGTH -- )  BASE @   >R   HEX
    ( CLS )         s" 1.hex" R/W new.file to fhd   >HEX.file'     crlf>file    >hex.file'
                                                                   crlf>file    >HEX.file'
                                                                   crlf>file    >HEX.file'
                                                                   crlf>file    >HEX.file'
     crlf>file      s" :00000001FF"   fhd   write.file ( write.file )  fhd open.file
     R>  BASE  !  ;

variable    ROM.BASE.ADDR

  :  8K     ROM.BASE.ADDR  @   2000  >hex.file  ;
  : 15K     ROM.BASE.ADDR  @   3E00  >hex.file  ;
  : 16K     ROM.BASE.ADDR  @   4000  >hex.file  ;
  : 32K     ROM.BASE.ADDR  @   8000  >hex.file  ;
  : 64K     ROM.BASE.ADDR  @  10000  >hex.file  ;
  : 62K     ROM.BASE.ADDR  @   F800  >hex.file  ;    \ F800 = 63448 =62*1024 =62K  K=1024

: 1.hex   ( -------------------------- )  PROGRAM.START @ ( f800 )  PROGRAM.LENGTH @  ( 800 )  >hex.file         ;
: 1.hex'  ( from length -------------- )  PROGRAM.START @ ( f800 )  PROGRAM.LENGTH @  ( 800 )  >hex.file+1.more  ;
: 1.hex"  ( from length FROM LENGTH -- )  PROGRAM.START @ ( f800 )  PROGRAM.LENGTH @  ( 800 )  >hex.file+2.more  ;

\ :020000040800F2




















nuc442eF?  @
#if

anew Buffer_To_Hex    hex   \ anew changes to decimal system

        : ~T ( Tmm  --- ) ErrorBox ;

        :  ( Y  --- )
                close-file 0 <>
                if
                    s" !" ~T
                then
                ;

        : s ( Wsm W   --- Y )
                rot rot drop 1 - swap
                2dup
                swap count rot
                open-file 0 <>
                if
                    drop
                    swap count rot
                    create-file 0 <>
                    if
                           s"  s!"     ~T
                    then
                else
                    rot rot 2drop
                then
                ;

        : g ( _lm  Y  --- )
                write-file  0 <>
                if
                    s" g!" ~T  bye
                then
                ;

  : crlf>file    crlf$ count fhd g  ;

  : .xx'  ( n ... )   s>d  <# # # #>  fhd   g ( write.file ) ;

  : .XX+SUM'    DUP  SUM +!   .XX'  ;

  : >A.LINE.OF.HEX.FORMAT'  ( ADDR LENGTH ... )
    ?DUP
    IF     ( crlf>file )  0 SUM !  ( 3A EMIT )  s" :"  fhd  g  DUP .XX+SUM'
           OVER  100 /MOD  .XX+SUM'    .XX+SUM'
                                     0 .XX'
           BOUNDS
           DO      I C@'   .XX+SUM'
           LOOP    100  SUM  C@  -     .XX'       crlf>file
    ELSE   DROP
    THEN   ;

  : >HEX.file'    ( FROM LENGTH ... )
    BEGIN   DUP    10  U>
    WHILE   OVER   10  >A.LINE.OF.HEX.FORMAT'
            10  -  SWAP  10  +  SWAP
    REPEAT             >A.LINE.OF.HEX.FORMAT'  ;

  : >HEX.file     ( FROM LENGTH ... )  BASE @   >R   HEX
    ( CLS )         s" 1.hex" R/W s to fhd   >HEX.file'
    ( crlf>file )   s" :00000001FF"   fhd   g ( write.file )  fhd 
     R>  BASE  !   cr  ;

:    4k  ( -- )  0   1000  >HEX.file   ;
:    8k  ( -- )  0   2000  >HEX.file   ;
:   16k  ( -- )  0   4000  >HEX.file   ;
:   32k  ( -- )  0   8000  >HEX.file   ;
:   64k  ( -- )  0  10000  >HEX.file   ;


#then

 









cortex.m0?  @
#if    : 1.hex    cr  ." :020000040800F2"  cr  1.hex  ;  \ stm32f407
#then




















\ ---------------------------------------------------------------------------------------
: EXTEND   ( N ... N1 )
  CASE       0   OF          1  ENDOF
             1   OF          3  ENDOF
             2   OF          7  ENDOF
             3   OF         0F  ENDOF
             4   OF         1F  ENDOF
             5   OF         3F  ENDOF
             6   OF         7F  ENDOF
             7   OF        0FF  ENDOF
             8   OF        1FF  ENDOF
             9   OF        3FF  ENDOF
            0A   OF        7FF  ENDOF
            0B   OF       0FFF  ENDOF
            0C   OF       1FFF  ENDOF
            0D   OF       3FFF  ENDOF
            0E   OF       7FFF  ENDOF
            0F   OF      0FFFF  ENDOF
            10   OF      1FFFF  ENDOF
            11   OF      3FFFF  ENDOF
            12   OF      3FFFF  ENDOF
            13   OF      7FFFF  ENDOF
            14   OF     0FFFFF  ENDOF
            15   OF     1FFFFF  ENDOF
            16   OF     3FFFFF  ENDOF
            17   OF     7FFFFF  ENDOF
            18   OF    0FFFFFF  ENDOF
            19   OF    1FFFFFF  ENDOF
            1A   OF    3FFFFFF  ENDOF
            1B   OF    7FFFFFF  ENDOF
            1C   OF   0FFFFFFF  ENDOF
            1D   OF   1FFFFFFF  ENDOF
            1E   OF   3FFFFFFF  ENDOF
            1F   OF   7FFFFFFF  ENDOF
   ENDCASE  ;

CREATE N>2^n.MASK   1 ,         3 ,         7 ,         0F ,
                    1F ,        3F ,        7F ,        0FF ,
                    1FF ,       3FF ,       7FF ,       0FFF ,
                    1FFF ,      3FFF ,      7FFF ,      0FFFF ,
                    1FFFF ,     3FFFF ,     7FFFF ,     0FFFFF ,
                    1FFFFF ,    3FFFFF ,    7FFFFF ,    0FFFFFF ,
                    1FFFFFF ,   3FFFFFF ,   7FFFFFF ,   0FFFFFFF ,
                    1FFFFFFF ,  3FFFFFFF ,  7FFFFFFF ,  0FFFFFFFF ,

: EXTEND' ( N ... N1 )  DUP 0 1F BETWEEN 0= ABORT" must be in the range 0~1F"
  4 * N>2^n.MASK + @  ;

: 2^n    ( n ... 2^n  )   1  swap  lshift   ;
: 2^n/   ( n ... 2^n/ )   2^n  -1  XOR  ;

: SIGN.EXTEND.n  ( N1 n.bit ... N2 )  >R  R@  2^N  OVER  AND
  IF    R@ EXTEND  AND  R>  EXTEND -1  XOR  OR
  ELSE  R> DROP
  THEN  ;

: max.min  ( n1 n2 -- max min )  2dup  max  -rot  min  ;

: ?~?.mask ( bit.n1 bit.n2 -- mask )   max.min  2>r   ffffffff  r> lshift   ffffffff  1f  r>  -  rshift  and  ;

: n.bit.extend>32bit  ( n1 n.bit --- n2 )      2dup   2^n 1-  u>  abort" **** number to extend is too large **** "
  >r  dup  r@  1-  2^n  and  if  1f r> ?~?.mask  or   exit  then  r>drop  ;  \ ffc  0c  n.bit.extend>32bit==> fffffffc

: SIGN.EXTEND ( BYTE ... N )   drop DUP 7F > IF  FFFFFF00 OR  THEN ; \ weForth 32 bits

: TP1  CR  ." TP1: "   .S  ;
: TP2  CR  ." TP2: "   .S  ;
: TP3  CR  ." TP3: "   .S  ;
: TP4  CR  ." TP4: "   .S  ;
: TP5  CR  ." TP5: "   .S  ;
: TP6  CR  ." TP6: "   .S  ;
: TP7  CR  ." TP7: "   .S  ;
: TP8  CR  ." TP8: "   .S  ;
: TP9  CR  ." TP9: "   .S  ;
: TP10 CR  ." TP10: "  .S  ;
: TP11 CR  ." TP11: "  .S  ;
: TP12 CR  ." TP12: "  .S  ;
: TP13 CR  ." TP13: "  .S  ;
: TP14 CR  ." TP14: "  .S  ;
: TP15 CR  ." TP15: "  .S  ;
: TP16 CR  ." TP16: "  .S  ;
: TP17 CR  ." TP17: "  .S  ;
: TP18 CR  ." TP18: "  .S  ;
: TP19 CR  ." TP19: "  .S  ;
: TP20 CR  ." TP20: "  .S  ;
: TP21 CR  ." TP21: "  .S  ;
: TP22 CR  ." TP22: "  .S  ;
: TP23 CR  ." TP23: "  .S  ;
: TP24 CR  ." TP24: "  .S  ;

variable  words'?

       : from->to.queue(c=0?...).MAX      8000 ( 200 )  ;
VARIABLE from->to.queue(c=0?...).COUNTER
CREATE   from->to.queue(c=0?...)                       from->to.queue(c=0?...).MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.from->to.queue(c=0?...)      from->to.queue(c=0?...)   from->to.queue(c=0?...).MAX  2 CELLS ( 6 ) * ERASE    ;

:  >from->to.queue(c=0?...)  ( from to -- )   words'?  @   not  if    2drop   exit   then
    from->to.queue(c=0?...).COUNTER  @   from->to.queue(c=0?...).MAX  >=      abort" *** from->to.queue(c=0?...).COUNTER overflow *** "
    from->to.queue(c=0?...)              from->to.queue(c=0?...).COUNTER  @   +  2!   8  from->to.queue(c=0?...).COUNTER  +!   ;

VARIABLE from->to.QUEUE.COUNTER.old

       : from->to.QUEUE.MAX      4000 ( 200 )  ;
VARIABLE from->to.QUEUE.COUNTER
CREATE   from->to.QUEUE                       from->to.QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.from->to.QUEUE      from->to.QUEUE   from->to.QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;

:  >from->to.queue  ( from to -- )   ( \ 2014.03.30  \ )   words'?  @   not  if    2drop   exit   then
    from->to.QUEUE.COUNTER  @                 from->to.QUEUE.MAX           >=      abort" *** from->to.QUEUE.COUNTER overflow *** "
    from->to.QUEUE                            from->to.QUEUE.COUNTER           @   +  2!   8  from->to.QUEUE.COUNTER  +!   ;

       : comment.QUEUE.MAX      20000 ( 200 )  ;
VARIABLE comment.QUEUE.COUNTER
CREATE   comment.QUEUE                         comment.QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.comment.QUEUE       comment.QUEUE     comment.QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;

:  >comment.queue  ( type -- )          LAST'  @    \  words'?  @   not  if    2drop   exit   then
    comment.QUEUE.COUNTER  @                   comment.QUEUE.MAX      >=     abort" *** comment.QUEUE.COUNTER overflow *** "
    comment.QUEUE                              comment.QUEUE.COUNTER  @   +  2!   8  comment.QUEUE.COUNTER  +!   ;

: comment.generater ( -- )
  2  0
  do   9  0
    do        cr  9  0
       do     cr  ." :  (."  i  0   ?do   ." n."  loop  ." --."
                             j  0   ?do   ." n."  loop
                             k  0   ?do   ." f."  loop  ." )" 40 ?y  i  100 *  j 10 *  +  k  +  4 .r    ."   >comment.queue  ; "
       loop
    loop
  loop   ;

: case.generater ( -- )  cr  cr   ." :  .comment(common) ( nfa' -- ) "    cr   ."    case  "
  2  0
  do   9  0
    do        9  0
       do     cr    i 100 *  j 10 * + k +  9 .r   ."   of  ."   '"'  emit
                  ."    (."  i  0   ?do   ." n."  loop  ." --."
                             j  0   ?do   ." n."  loop
                             k  0   ?do   ." f."  loop  ." )"   '"'  emit   40 ?y  ."   endof "
       loop
    loop
  loop        cr  ."    endcase  ;"  ;

: comment+case.generater ( -- )   comment.generater    case.generater  ;









variable  show.regular.comment?       show.regular.comment?  on
: src     show.regular.comment?  dup  @  if  off  else  on  then  ;

: (."comment)   (("))  COUNT    bounds  do  i c@   show.regular.comment?  @  if  dup  '.'  =  if  drop  bl  then  then  emit  loop  ;
:  ."comment    COMPILE  (."comment)  ,"  ; IMMEDIATE

\  comment+case.generater

:  (.--.)                                                          0  >comment.queue  ;
:  (.n.--.)                                                      100  >comment.queue  ;
:  (.n.n.--.)                                                    200  >comment.queue  ;
:  (.n.n.n.--.)                                                  300  >comment.queue  ;
:  (.n.n.n.n.--.)                                                400  >comment.queue  ;
:  (.n.n.n.n.n.--.)                                              500  >comment.queue  ;
:  (.n.n.n.n.n.n.--.)                                            600  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.)                                          700  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.)                                        800  >comment.queue  ;

:  (.--.n.)                                                       10  >comment.queue  ;
:  (.n.--.n.)                                                    110  >comment.queue  ;
:  (.n.n.--.n.)                                                  210  >comment.queue  ;
:  (.n.n.n.--.n.)                                                310  >comment.queue  ;
:  (.n.n.n.n.--.n.)                                              410  >comment.queue  ;
:  (.n.n.n.n.n.--.n.)                                            510  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.)                                          610  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.)                                        710  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.)                                      810  >comment.queue  ;

:  (.--.n.n.)                                                     20  >comment.queue  ;
:  (.n.--.n.n.)                                                  120  >comment.queue  ;
:  (.n.n.--.n.n.)                                                220  >comment.queue  ;
:  (.n.n.n.--.n.n.)                                              320  >comment.queue  ;
:  (.n.n.n.n.--.n.n.)                                            420  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.)                                          520  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.)                                        620  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.)                                      720  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.)                                    820  >comment.queue  ;

:  (.--.n.n.n.)                                                   30  >comment.queue  ;
:  (.n.--.n.n.n.)                                                130  >comment.queue  ;
:  (.n.n.--.n.n.n.)                                              230  >comment.queue  ;
:  (.n.n.n.--.n.n.n.)                                            330  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.)                                          430  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.)                                        530  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.)                                      630  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.)                                    730  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.)                                  830  >comment.queue  ;

:  (.--.n.n.n.n.)                                                 40  >comment.queue  ;
:  (.n.--.n.n.n.n.)                                              140  >comment.queue  ;
:  (.n.n.--.n.n.n.n.)                                            240  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.)                                          340  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.)                                        440  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.)                                      540  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.)                                    640  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.)                                  740  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.)                                840  >comment.queue  ;

:  (.--.n.n.n.n.n.)                                               50  >comment.queue  ;
:  (.n.--.n.n.n.n.n.)                                            150  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.)                                          250  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.)                                        350  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.)                                      450  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.)                                    550  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.)                                  650  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.)                                750  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.)                              850  >comment.queue  ;

:  (.--.n.n.n.n.n.n.)                                             60  >comment.queue  ;
:  (.n.--.n.n.n.n.n.n.)                                          160  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.n.)                                        260  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.n.)                                      360  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.n.)                                    460  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.n.)                                  560  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.n.)                                660  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.)                              760  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.)                            860  >comment.queue  ;

:  (.--.n.n.n.n.n.n.n.)                                           70  >comment.queue  ;
:  (.n.--.n.n.n.n.n.n.n.)                                        170  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.n.n.)                                      270  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.n.n.)                                    370  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.n.n.)                                  470  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.n.n.)                                570  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.)                              670  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.)                            770  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.)                          870  >comment.queue  ;

:  (.--.n.n.n.n.n.n.n.n.)                                         80  >comment.queue  ;
:  (.n.--.n.n.n.n.n.n.n.n.)                                      180  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.n.n.n.)                                    280  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.n.n.n.)                                  380  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.n.n.n.)                                480  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)                              580  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)                            680  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)                          780  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)                        880  >comment.queue  ;

:  (.--.f.)                                                        1  >comment.queue  ;
:  (.n.--.f.)                                                    101  >comment.queue  ;
:  (.n.n.--.f.)                                                  201  >comment.queue  ;
:  (.n.n.n.--.f.)                                                301  >comment.queue  ;
:  (.n.n.n.n.--.f.)                                              401  >comment.queue  ;
:  (.n.n.n.n.n.--.f.)                                            501  >comment.queue  ;
:  (.n.n.n.n.n.n.--.f.)                                          601  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.f.)                                        701  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.f.)                                      801  >comment.queue  ;

:  (.--.n.f.)                                                     11  >comment.queue  ;
:  (.n.--.n.f.)                                                  111  >comment.queue  ;
:  (.n.n.--.n.f.)                                                211  >comment.queue  ;
:  (.n.n.n.--.n.f.)                                              311  >comment.queue  ;
:  (.n.n.n.n.--.n.f.)                                            411  >comment.queue  ;
:  (.n.n.n.n.n.--.n.f.)                                          511  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.f.)                                        611  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.f.)                                      711  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.f.)                                    811  >comment.queue  ;

:  (.--.n.n.f.)                                                   21  >comment.queue  ;
:  (.n.--.n.n.f.)                                                121  >comment.queue  ;
:  (.n.n.--.n.n.f.)                                              221  >comment.queue  ;
:  (.n.n.n.--.n.n.f.)                                            321  >comment.queue  ;
:  (.n.n.n.n.--.n.n.f.)                                          421  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.f.)                                        521  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.f.)                                      621  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.f.)                                    721  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.f.)                                  821  >comment.queue  ;

:  (.--.n.n.n.f.)                                                 31  >comment.queue  ;
:  (.n.--.n.n.n.f.)                                              131  >comment.queue  ;
:  (.n.n.--.n.n.n.f.)                                            231  >comment.queue  ;
:  (.n.n.n.--.n.n.n.f.)                                          331  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.f.)                                        431  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.f.)                                      531  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.f.)                                    631  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.f.)                                  731  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.f.)                                831  >comment.queue  ;

:  (.--.n.n.n.n.f.)                                               41  >comment.queue  ;
:  (.n.--.n.n.n.n.f.)                                            141  >comment.queue  ;
:  (.n.n.--.n.n.n.n.f.)                                          241  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.f.)                                        341  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.f.)                                      441  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.f.)                                    541  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.f.)                                  641  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.f.)                                741  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.f.)                              841  >comment.queue  ;

:  (.--.n.n.n.n.n.f.)                                             51  >comment.queue  ;
:  (.n.--.n.n.n.n.n.f.)                                          151  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.f.)                                        251  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.f.)                                      351  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.f.)                                    451  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.f.)                                  551  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.f.)                                651  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.f.)                              751  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.f.)                            851  >comment.queue  ;

:  (.--.n.n.n.n.n.n.f.)                                           61  >comment.queue  ;
:  (.n.--.n.n.n.n.n.n.f.)                                        161  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.n.f.)                                      261  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.n.f.)                                    361  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.n.f.)                                  461  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.n.f.)                                561  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.n.f.)                              661  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.f.)                            761  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.f.)                          861  >comment.queue  ;

:  (.--.n.n.n.n.n.n.n.f.)                                         71  >comment.queue  ;
:  (.n.--.n.n.n.n.n.n.n.f.)                                      171  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.n.n.f.)                                    271  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.n.n.f.)                                  371  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.n.n.f.)                                471  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)                              571  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)                            671  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)                          771  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)                        871  >comment.queue  ;

:  (.--.n.n.n.n.n.n.n.n.f.)                                       81  >comment.queue  ;
:  (.n.--.n.n.n.n.n.n.n.n.f.)                                    181  >comment.queue  ;
:  (.n.n.--.n.n.n.n.n.n.n.n.f.)                                  281  >comment.queue  ;
:  (.n.n.n.--.n.n.n.n.n.n.n.n.f.)                                381  >comment.queue  ;
:  (.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)                              481  >comment.queue  ;
:  (.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)                            581  >comment.queue  ;
:  (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)                          681  >comment.queue  ;
:  (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)                        781  >comment.queue  ;
:  (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)                      881  >comment.queue  ;

:  .comment(common) ( nfa' -- )
   case
        0  of  ."comment    (.--.)"                                        endof
      100  of  ."comment    (.n.--.)"                                      endof
      200  of  ."comment    (.n.n.--.)"                                    endof
      300  of  ."comment    (.n.n.n.--.)"                                  endof
      400  of  ."comment    (.n.n.n.n.--.)"                                endof
      500  of  ."comment    (.n.n.n.n.n.--.)"                              endof
      600  of  ."comment    (.n.n.n.n.n.n.--.)"                            endof
      700  of  ."comment    (.n.n.n.n.n.n.n.--.)"                          endof
      800  of  ."comment    (.n.n.n.n.n.n.n.n.--.)"                        endof
       10  of  ."comment    (.--.n.)"                                      endof
      110  of  ."comment    (.n.--.n.)"                                    endof
      210  of  ."comment    (.n.n.--.n.)"                                  endof
      310  of  ."comment    (.n.n.n.--.n.)"                                endof
      410  of  ."comment    (.n.n.n.n.--.n.)"                              endof
      510  of  ."comment    (.n.n.n.n.n.--.n.)"                            endof
      610  of  ."comment    (.n.n.n.n.n.n.--.n.)"                          endof
      710  of  ."comment    (.n.n.n.n.n.n.n.--.n.)"                        endof
      810  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.)"                      endof
       20  of  ."comment    (.--.n.n.)"                                    endof
      120  of  ."comment    (.n.--.n.n.)"                                  endof
      220  of  ."comment    (.n.n.--.n.n.)"                                endof
      320  of  ."comment    (.n.n.n.--.n.n.)"                              endof
      420  of  ."comment    (.n.n.n.n.--.n.n.)"                            endof
      520  of  ."comment    (.n.n.n.n.n.--.n.n.)"                          endof
      620  of  ."comment    (.n.n.n.n.n.n.--.n.n.)"                        endof
      720  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.)"                      endof
      820  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.)"                    endof
       30  of  ."comment    (.--.n.n.n.)"                                  endof
      130  of  ."comment    (.n.--.n.n.n.)"                                endof
      230  of  ."comment    (.n.n.--.n.n.n.)"                              endof
      330  of  ."comment    (.n.n.n.--.n.n.n.)"                            endof
      430  of  ."comment    (.n.n.n.n.--.n.n.n.)"                          endof
      530  of  ."comment    (.n.n.n.n.n.--.n.n.n.)"                        endof
      630  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.)"                      endof
      730  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.)"                    endof
      830  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.)"                  endof
       40  of  ."comment    (.--.n.n.n.n.)"                                endof
      140  of  ."comment    (.n.--.n.n.n.n.)"                              endof
      240  of  ."comment    (.n.n.--.n.n.n.n.)"                            endof
      340  of  ."comment    (.n.n.n.--.n.n.n.n.)"                          endof
      440  of  ."comment    (.n.n.n.n.--.n.n.n.n.)"                        endof
      540  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.)"                      endof
      640  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.)"                    endof
      740  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.)"                  endof
      840  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.)"                endof
       50  of  ."comment    (.--.n.n.n.n.n.)"                              endof
      150  of  ."comment    (.n.--.n.n.n.n.n.)"                            endof
      250  of  ."comment    (.n.n.--.n.n.n.n.n.)"                          endof
      350  of  ."comment    (.n.n.n.--.n.n.n.n.n.)"                        endof
      450  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.)"                      endof
      550  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.)"                    endof
      650  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.)"                  endof
      750  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.)"                endof
      850  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.)"              endof
       60  of  ."comment    (.--.n.n.n.n.n.n.)"                            endof
      160  of  ."comment    (.n.--.n.n.n.n.n.n.)"                          endof
      260  of  ."comment    (.n.n.--.n.n.n.n.n.n.)"                        endof
      360  of  ."comment    (.n.n.n.--.n.n.n.n.n.n.)"                      endof
      460  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.n.)"                    endof
      560  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.n.)"                  endof
      660  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.n.)"                endof
      760  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.)"              endof
      860  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.)"            endof
       70  of  ."comment    (.--.n.n.n.n.n.n.n.)"                          endof
      170  of  ."comment    (.n.--.n.n.n.n.n.n.n.)"                        endof
      270  of  ."comment    (.n.n.--.n.n.n.n.n.n.n.)"                      endof
      370  of  ."comment    (.n.n.n.--.n.n.n.n.n.n.n.)"                    endof
      470  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.n.n.)"                  endof
      570  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.n.n.)"                endof
      670  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.)"              endof
      770  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.)"            endof
      870  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.)"          endof
       80  of  ."comment    (.--.n.n.n.n.n.n.n.n.)"                        endof
      180  of  ."comment    (.n.--.n.n.n.n.n.n.n.n.)"                      endof
      280  of  ."comment    (.n.n.--.n.n.n.n.n.n.n.n.)"                    endof
      380  of  ."comment    (.n.n.n.--.n.n.n.n.n.n.n.n.)"                  endof
      480  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.n.n.n.)"                endof
      580  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)"              endof
      680  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)"            endof
      780  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)"          endof
      880  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.)"        endof
        1  of  ."comment    (.--.f.)"                                      endof
      101  of  ."comment    (.n.--.f.)"                                    endof
      201  of  ."comment    (.n.n.--.f.)"                                  endof
      301  of  ."comment    (.n.n.n.--.f.)"                                endof
      401  of  ."comment    (.n.n.n.n.--.f.)"                              endof
      501  of  ."comment    (.n.n.n.n.n.--.f.)"                            endof
      601  of  ."comment    (.n.n.n.n.n.n.--.f.)"                          endof
      701  of  ."comment    (.n.n.n.n.n.n.n.--.f.)"                        endof
      801  of  ."comment    (.n.n.n.n.n.n.n.n.--.f.)"                      endof
       11  of  ."comment    (.--.n.f.)"                                    endof
      111  of  ."comment    (.n.--.n.f.)"                                  endof
      211  of  ."comment    (.n.n.--.n.f.)"                                endof
      311  of  ."comment    (.n.n.n.--.n.f.)"                              endof
      411  of  ."comment    (.n.n.n.n.--.n.f.)"                            endof
      511  of  ."comment    (.n.n.n.n.n.--.n.f.)"                          endof
      611  of  ."comment    (.n.n.n.n.n.n.--.n.f.)"                        endof
      711  of  ."comment    (.n.n.n.n.n.n.n.--.n.f.)"                      endof
      811  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.f.)"                    endof
       21  of  ."comment    (.--.n.n.f.)"                                  endof
      121  of  ."comment    (.n.--.n.n.f.)"                                endof
      221  of  ."comment    (.n.n.--.n.n.f.)"                              endof
      321  of  ."comment    (.n.n.n.--.n.n.f.)"                            endof
      421  of  ."comment    (.n.n.n.n.--.n.n.f.)"                          endof
      521  of  ."comment    (.n.n.n.n.n.--.n.n.f.)"                        endof
      621  of  ."comment    (.n.n.n.n.n.n.--.n.n.f.)"                      endof
      721  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.f.)"                    endof
      821  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.f.)"                  endof
       31  of  ."comment    (.--.n.n.n.f.)"                                endof
      131  of  ."comment    (.n.--.n.n.n.f.)"                              endof
      231  of  ."comment    (.n.n.--.n.n.n.f.)"                            endof
      331  of  ."comment    (.n.n.n.--.n.n.n.f.)"                          endof
      431  of  ."comment    (.n.n.n.n.--.n.n.n.f.)"                        endof
      531  of  ."comment    (.n.n.n.n.n.--.n.n.n.f.)"                      endof
      631  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.f.)"                    endof
      731  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.f.)"                  endof
      831  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.f.)"                endof
       41  of  ."comment    (.--.n.n.n.n.f.)"                              endof
      141  of  ."comment    (.n.--.n.n.n.n.f.)"                            endof
      241  of  ."comment    (.n.n.--.n.n.n.n.f.)"                          endof
      341  of  ."comment    (.n.n.n.--.n.n.n.n.f.)"                        endof
      441  of  ."comment    (.n.n.n.n.--.n.n.n.n.f.)"                      endof
      541  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.f.)"                    endof
      641  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.f.)"                  endof
      741  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.f.)"                endof
      841  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.f.)"              endof
       51  of  ."comment    (.--.n.n.n.n.n.f.)"                            endof
      151  of  ."comment    (.n.--.n.n.n.n.n.f.)"                          endof
      251  of  ."comment    (.n.n.--.n.n.n.n.n.f.)"                        endof
      351  of  ."comment    (.n.n.n.--.n.n.n.n.n.f.)"                      endof
      451  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.f.)"                    endof
      551  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.f.)"                  endof
      651  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.f.)"                endof
      751  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.f.)"              endof
      851  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.f.)"            endof
       61  of  ."comment    (.--.n.n.n.n.n.n.f.)"                          endof
      161  of  ."comment    (.n.--.n.n.n.n.n.n.f.)"                        endof
      261  of  ."comment    (.n.n.--.n.n.n.n.n.n.f.)"                      endof
      361  of  ."comment    (.n.n.n.--.n.n.n.n.n.n.f.)"                    endof
      461  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.n.f.)"                  endof
      561  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.n.f.)"                endof
      661  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.n.f.)"              endof
      761  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.f.)"            endof
      861  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.f.)"          endof
       71  of  ."comment    (.--.n.n.n.n.n.n.n.f.)"                        endof
      171  of  ."comment    (.n.--.n.n.n.n.n.n.n.f.)"                      endof
      271  of  ."comment    (.n.n.--.n.n.n.n.n.n.n.f.)"                    endof
      371  of  ."comment    (.n.n.n.--.n.n.n.n.n.n.n.f.)"                  endof
      471  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.n.n.f.)"                endof
      571  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)"              endof
      671  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)"            endof
      771  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)"          endof
      871  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.f.)"        endof
       81  of  ."comment    (.--.n.n.n.n.n.n.n.n.f.)"                      endof
      181  of  ."comment    (.n.--.n.n.n.n.n.n.n.n.f.)"                    endof
      281  of  ."comment    (.n.n.--.n.n.n.n.n.n.n.n.f.)"                  endof
      381  of  ."comment    (.n.n.n.--.n.n.n.n.n.n.n.n.f.)"                endof
      481  of  ."comment    (.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)"              endof
      581  of  ."comment    (.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)"            endof
      681  of  ."comment    (.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)"          endof
      781  of  ."comment    (.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)"        endof
      881  of  ."comment    (.n.n.n.n.n.n.n.n.--.n.n.n.n.n.n.n.n.f.)"      endof
   endcase  ;


: (.char.n.--.f.)            1001  >comment.queue  ;
: (.char.--.f.)              1002  >comment.queue  ;
: (.--.char.)                1003  >comment.queue  ;
: (.n.--.n.n./.0.)           1004  >comment.queue  ;
: (.n.n.--.d.)               1005  >comment.queue  ;
: (.12345678.--.56781234.)   1006  >comment.queue  ;
: (.#.--.32#.)               1007  >comment.queue  ;
: (.32#.--.)                 1008  >comment.queue  ;
: (.#.--.#'.)                1009  >comment.queue  ;
: (.24#.--.5,s10#2,j,j11#.)  100a  >comment.queue  ;
: (.n1.--.n2.)               100b  >comment.queue  ;
: (.24#.--.)                 100c  >comment.queue  ;
: (.a.--.)                   100d  >comment.queue  ;
: (.a.--.char.)              100e  >comment.queue  ;
: (.a.--.a+1.len.)           100f  >comment.queue  ;
: (.a.--.n.n.)               1010  >comment.queue  ;
: (.n.n.--.a.)               1011  >comment.queue  ;
: (.n.--.a.)                 1012  >comment.queue  ;
: (.--.here+100.)            1013  >comment.queue  ;
: (.--.a.)                   1014  >comment.queue  ;
: (.n.a.--.)                 1015  >comment.queue  ;
: (.n.n.a.--.)               1016  >comment.queue  ;
: (.from.length.--.)         1017  >comment.queue  ;
: (.0~F.--.'0'~'F'.)         1018  >comment.queue  ;
: (.a.len.--.)               1019  >comment.queue  ;
: (.a.--.n.)                 101a  >comment.queue  ;
: (.a.--.f.)                 101b  >comment.queue  ;   
: (.x1.y1.x2.y2.--.)         101c  >comment.queue  ;
: (.x.y.--.)                 101d  >comment.queue  ;
: (.x.y.radius.--.)          101e  >comment.queue  ;
: (.to.length.--.)           101f  >comment.queue  ;

: (.a'.--.)                              1020  >comment.queue  ;
: (.a'.--.r0.)                           1021  >comment.queue  ;
: (.a'.--.r0.r1.)                        1022  >comment.queue  ;
: (.a'.--.r0.r1.r2.)                     1022  >comment.queue  ;
: (.a'.--.r0.r1.r2.r3.)                  1023  >comment.queue  ;

: (.a'.r0.--.)                           1024  >comment.queue  ;
: (.a'.r0.--.r0.)                        1025  >comment.queue  ;
: (.a'.r0.--.r0.r1.)                     1026  >comment.queue  ;
: (.a'.r0.--.r0.r1.r2.)                  1027  >comment.queue  ;
: (.a'.r0.--.r0.r1.r2.r3.)               1028  >comment.queue  ;

: (.a'.r0.r1.--..)                       1029  >comment.queue  ;
: (.a'.r0.r1.--.r0.)                     102a  >comment.queue  ;
: (.a'.r0.r1.--.r0.r1.)                  102b  >comment.queue  ;
: (.a'.r0.r1.--.r0.r1.r2.)               102c  >comment.queue  ;
: (.a'.r0.r1.--.r0.r1.r2.r3.)            102d  >comment.queue  ;

: (.a'.r0.r1.r2.--.)                     103e  >comment.queue  ;
: (.a'.r0.r1.r2.--.r0.)                  103f  >comment.queue  ;
: (.a'.r0.r1.r2.--.r0.r1.)               1030  >comment.queue  ;
: (.a'.r0.r1.r2.--.r0.r1.r2.)            1031  >comment.queue  ;
: (.a'.r0.r1.r2.--.r0.r1.r2.r3.)         1032  >comment.queue  ;

: (.a'.r0.r1.r2.r3.--.)                  1033  >comment.queue  ;
: (.a'.r0.r1.r2.r3.--.r0.)               1034  >comment.queue  ;
: (.a'.r0.r1.r2.r3.--.r0.r1.)            1035  >comment.queue  ;
: (.a'.r0.r1.r2.r3.--.r0.r1.r2.)         1036  >comment.queue  ;
: (.a'.r0.r1.r2.r3.--.r0.r1.r2.r3.)      1037  >comment.queue  ;
\ ----------------------------------------------------------------
: (.a'.--.)                              1040  >comment.queue  ;
: (.a'.--.r0.)                           1041  >comment.queue  ;
: (.a'.--.r0.r1.)                        1042  >comment.queue  ;
: (.a'.--.r0.r1.r2.)                     1042  >comment.queue  ;
: (.a'.--.r0.r1.r2.r3.)                  1043  >comment.queue  ;

: (.r0.a'.--.)                           1044  >comment.queue  ;
: (.r0.a'.--.r0.)                        1045  >comment.queue  ;
: (.r0.a'.--.r0.r1.)                     1046  >comment.queue  ;
: (.r0.a'.--.r0.r1.r2.)                  1047  >comment.queue  ;
: (.r0.a'.--.r0.r1.r2.r3.)               1048  >comment.queue  ;

: (.r0.r1.a'.--.)                        1049  >comment.queue  ;
: (.r0.r1.a'.--.r0.)                     104a  >comment.queue  ;
: (.r0.r1.a'.--.r0.r1.)                  104b  >comment.queue  ;
: (.r0.r1.a'.--.r0.r1.r2.)               104c  >comment.queue  ;
: (.r0.r1.a'.--.r0.r1.r2.r3.)            104d  >comment.queue  ;

: (.r0.r1.r2.a'.--.)                     104e  >comment.queue  ;
: (.r0.r1.r2.a'.--.r0.)                  104f  >comment.queue  ;
: (.r0.r1.r2.a'.--.r0.r1.)               1050  >comment.queue  ;
: (.r0.r1.r2.a'.--.r0.r1.r2.)            1051  >comment.queue  ;
: (.r0.r1.r2.a'.--.r0.r1.r2.r3.)         1052  >comment.queue  ;

: (.r0.r1.r2.r3.a'.--.)                  1053  >comment.queue  ;
: (.r0.r1.r2.r3.a'.--.r0.)               1054  >comment.queue  ;
: (.r0.r1.r2.r3.a'.--.r0.r1.)            1055  >comment.queue  ;
: (.r0.r1.r2.r3.a'.--.r0.r1.r2.)         1056  >comment.queue  ;
: (.r0.r1.r2.r3.a'.--.r0.r1.r2.r3.)      1057  >comment.queue  ;

: (.--.a.bit.)                           1058  >comment.queue  ;
: (.PA.BIT15.OUTPUT.--.)                 1059  >comment.queue  ;

: .comment(special)  ( n -- )
  case     1001  of   ."comment    (.char.n.--.f.) "            endof
           1002  of   ."comment    (.char.--.f.)   "            endof
           1003  of   ."comment    (.--.char.) "                endof
           1004  of   ."comment    (.n.--.n.n./.0.) "           endof
           1005  of   ."comment    (.n.n.--.d.) "               endof
           1006  of   ."comment    (.12345678.--.56781234.) "   endof
           1007  of   ."comment    (.#.--.32#.) "               endof
           1008  of   ."comment    (.32#.--.) "                 endof
           1009  of   ."comment    (.#.--.#'.) "                endof
           100a  of   ."comment    (.24#.--.5,s10#2,j,j11#.) "  endof
           100b  of   ."comment    (.n1.--.n2.) "               endof
           100c  of   ."comment    (.24#.--.) "                 endof
           100d  of   ."comment    (.a.--.) "                   endof
           100e  of   ."comment    (.a.--.char.) "              endof
           100f  of   ."comment    (.a.--.a+1.len.) "           endof

           1010  of   ."comment    (.a.--.n.n.) "               endof
           1011  of   ."comment    (.n.n.--.a.) "               endof
           1012  of   ."comment    (.n.--.a.) "                 endof
           1013  of   ."comment    (.--.here+100.) "            endof

           1014  of   ."comment    (.--.a.) "                   endof
           1015  of   ."comment    (.n.a.--.) "                 endof
           1016  of   ."comment    (.n.n.a.--.) "               endof
           1017  of   ."comment    (.from.length.--.) "         endof
           1018  of   ."comment    (.0~F.--.'0'~'F'.) "         endof
           1019  of   ."comment    (.a.len.--.) "               endof
           101a  of   ."comment    (.a.--.n.) "                 endof
           101b  of   ."comment    (.a.--.f.) "                 endof
           101c  of   ."comment    (.x1.y1.x2.y2.--.) "         endof
           101d  of   ."comment    (.x.y.--.) "                 endof
           101e  of   ."comment    (.x.y.radius.--.) "          endof
           101f  of   ."comment    (.to.length.--.)    "        endof


           1020  of   ."comment    (.a'.--.) "                            endof
           1021  of   ."comment    (.a'.--.r0.) "                         endof
           1022  of   ."comment    (.a'.--.r0.r1.) "                      endof
           1022  of   ."comment    (.a'.--.r0.r1.r2.) "                   endof
           1023  of   ."comment    (.a'.--.r0.r1.r2.r3.) "                endof

           1024  of   ."comment    (.a'.r0.--.) "                         endof
           1025  of   ."comment    (.a'.r0.--.r0.) "                      endof
           1026  of   ."comment    (.a'.r0.--.r0.r1.) "                   endof
           1027  of   ."comment    (.a'.r0.--.r0.r1.r2.) "                endof
           1028  of   ."comment    (.a'.r0.--.r0.r1.r2.r3.) "             endof

           1029  of   ."comment    (.a'.r0.r1.--.) "                      endof
           102a  of   ."comment    (.a'.r0.r1.--.r0.) "                   endof
           102b  of   ."comment    (.a'.r0.r1.--.r0.r1.) "                endof
           102c  of   ."comment    (.a'.r0.r1.--.r0.r1.r2.) "             endof
           102d  of   ."comment    (.a'.r0.r1.--.r0.r1.r2.r3.) "          endof

           103e  of   ."comment    (.a'.r0.r1.r2.--..) "                  endof
           103f  of   ."comment    (.a'.r0.r1.r2.--.r0.) "                endof
           1030  of   ."comment    (.a'.r0.r1.r2.--.r0.r1.) "             endof
           1031  of   ."comment    (.a'.r0.r1.r2.--.r0.r1.r2.) "          endof
           1032  of   ."comment    (.a'.r0.r1.r2.--.r0.r1.r2.r3.) "       endof

           1033  of   ."comment    (.a'.r0.r1.r2.r3.--.) "                endof
           1034  of   ."comment    (.a'.r0.r1.r2.r3.--.r0.) "             endof
           1035  of   ."comment    (.a'.r0.r1.r2.r3.--.r0.r1.) "          endof
           1036  of   ."comment    (.a'.r0.r1.r2.r3.--.r0.r1.r2.) "       endof
           1037  of   ."comment    (.a'.r0.r1.r2.r3.--.r0.r1.r2.r3.) "    endof


           1040  of   ."comment    (.a'.--.) "                            endof
           1041  of   ."comment    (.a'.--.r0.) "                         endof
           1042  of   ."comment    (.a'.--.r0.r1.) "                      endof
           1042  of   ."comment    (.a'.--.r0.r1.r2.) "                   endof
           1043  of   ."comment    (.a'.--.r0.r1.r2.r3.) "                endof

           1044  of   ."comment    (.r0.a'.--.) "                         endof
           1045  of   ."comment    (.r0.a'.--.r0.) "                      endof
           1046  of   ."comment    (.r0.a'.--.r0.r1.) "                   endof
           1047  of   ."comment    (.r0.a'.--.r0.r1.r2.) "                endof
           1048  of   ."comment    (.r0.a'.--.r0.r1.r2.r3.) "             endof

           1049  of   ."comment    (.r0.r1.a'.--.) "                      endof
           104a  of   ."comment    (.r0.r1.a'.--.r0.) "                   endof
           104b  of   ."comment    (.r0.r1.a'.--.r0.r1.) "                endof
           104c  of   ."comment    (.r0.r1.a'.--.r0.r1.r2.) "             endof
           104d  of   ."comment    (.r0.r1.a'.--.r0.r1.r2.r3.) "          endof

           104e  of   ."comment    (.r0.r1.r2.a'.--..) "                  endof
           104f  of   ."comment    (.r0.r1.r2.a'.--.r0.) "                endof
           1050  of   ."comment    (.r0.r1.r2.a'.--.r0.r1.) "             endof
           1051  of   ."comment    (.r0.r1.r2.a'.--.r0.r1.r2.) "          endof
           1052  of   ."comment    (.r0.r1.r2.a'.--.r0.r1.r2.r3.) "       endof

           1053  of   ."comment    (.r0.r1.r2.r3.a'.--.) "                endof
           1054  of   ."comment    (.r0.r1.r2.r3.a'.--.r0.) "             endof
           1055  of   ."comment    (.r0.r1.r2.r3.a'.--.r0.r1.) "          endof
           1056  of   ."comment    (.r0.r1.r2.r3.a'.--.r0.r1.r2.) "       endof
           1057  of   ."comment    (.r0.r1.r2.r3.a'.--.r0.r1.r2.r3.) "    endof
           1058  of   ."comment    (.--.a.bit.) "                         endof
           1059  of   ."comment    (.PA.BIT15.OUTPUT.--.)"                endof
  endcase  ;


variable   show.comment?     show.comment?  on

: sh   show.comment?  dup  if  off   else   on  then  ;

: show.comment  ( nfa' -- )  show.comment?  @  0=  if  drop  exit  then
  comment.QUEUE.COUNTER  @   0
  ?do      comment.QUEUE  i  +  @   over  =
      if   comment.QUEUE  i  +  4  +  @  dup  .comment(common)   .comment(special)   leave
      then   8
  +loop    drop  ;

VARIABLE T:QUEUE.COUNTER.old
VARIABLE T:nfa.QUEUE.COUNTER.old
VARIABLE T:nfa.QUEUE.COUNTER.old*

VARIABLE  TABLE.OFFSET      0 TABLE.OFFSET !
: MEM.TOP       7FF       ;

: T:QUEUE(headless).MAX    200  ;
VARIABLE T:QUEUE(headless).COUNTER
CREATE   T:QUEUE(headless)                        T:QUEUE(headless).MAX 6 * ALLOT
:  ERASE.T:QUEUE(headless)     T:QUEUE(headless)  T:QUEUE(headless).MAX 6 * ERASE    ;

       : {:NFA.QUEUE.MAX    1000 ( 200 )  ;
VARIABLE {:NFA.QUEUE.COUNTER
CREATE   {:NFA.QUEUE               {:NFA.QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.{:NFA.QUEUE  {:NFA.QUEUE  {:NFA.QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;

       : T:QUEUE.MAX    2000 ( 200 )  ;
VARIABLE T:QUEUE.COUNTER
CREATE   T:QUEUE           T:QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.T:QUEUE  T:QUEUE  T:QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;

VARIABLE  PROGRAM.MEMORY.R.SIZE    1000 PROGRAM.MEMORY.R.SIZE  !
: R:QUEUE.MAX     PROGRAM.MEMORY.R.SIZE  @  8 /  ;

VARIABLE R:QUEUE.COUNTER
CREATE   R:QUEUE           R:QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.R:QUEUE  R:QUEUE  R:QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;
   ERASE.R:QUEUE

VARIABLE  LAYER    0 LAYER !
: LAYER'  LAYER @  0 < IF   0 LAYER !  THEN  LAYER  ;

variable   name.in.nfa.queue

VARIABLE   T:NFA.QUEUE.LENGTH         20000  T:NFA.QUEUE.LENGTH  !
CREATE     T:NFA.QUEUE                      T:NFA.QUEUE.LENGTH  @  ALLOT
VARIABLE   T:NFA.QUEUE.COUNTER
VARIABLE   former.T:NFA.QUEUE.addr
: ERASE.T:NFA.QUEUE     T:NFA.QUEUE         T:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.T:NFA.QUEUE



VARIABLE   T:NFA.QUEUE.LENGTH*        20000  T:NFA.QUEUE.LENGTH*  !
CREATE     T:NFA.QUEUE*                      T:NFA.QUEUE.LENGTH*  @  ALLOT
VARIABLE   T:NFA.QUEUE.COUNTER*
VARIABLE   former.T:NFA.QUEUE.addr*
: ERASE.T:NFA.QUEUE*     T:NFA.QUEUE*         T:NFA.QUEUE.LENGTH*  @  ERASE  ;
  ERASE.T:NFA.QUEUE*


VARIABLE     LAYER               0 LAYER !
: LAYER'     LAYER @     0 < IF  0 LAYER !   THEN  LAYER  ;

VARIABLE     LAYER.ON?
: LAYER.ON   LAYER.ON? @  IF  0  ELSE  1  THEN  LAYER.ON? !  ;
  LAYER.ON

VARIABLE  space/layer                  1  space/layer  !
: LAYER.ON                space/layer  @  space/layer  !  ;
: LAYER.OFF               space/layer  @  space/layer  !  ;
: S/L  ( n -- )                           space/layer  !  ;



: \.3f---    cr  layer.off  ."   \ "  4f  0  do  '-'  emit  loop  ;
: \.3f***    cr  layer.off  ."   \ "  4f  0  do  '*'  emit  loop  ;
: \.3f***.no.cr  layer.off  ."   \ "  4f  0  do  '*'  emit  loop  ;
: \.3f---.no.cr  layer.off  ."   \ "  4f  0  do  '-'  emit  loop  ;

VARIABLE   #.counter

: dump.T:QUEUE  ( -- )     0  >r                      #.counter  off
  begin   base @ >r  decimal   \.3f---  cr  ."   ("   #.counter  @    9 u.r  ."  )  "   1  #.counter +!   r> base  !
         10 ?y   r@       dup  8 u.r    T:QUEUE       +          @  \ dup  0=  if  ."  **** not allowed here, it has to have cfa' with this t: ****"  then
                                                                      0a  u.r              \  cfa'
     cr  10 ?y   r@  4 +  dup  8 u.r    T:QUEUE       +          @    0a  u.r              \  lfa'
     cr  10 ?y   r@  8 +  dup  8 u.r    T:QUEUE       +  10   spaces  count  1f  and dup>r  type  \  nfa'
                 r>  9 +  r>  +  dup>r  T:QUEUE.COUNTER          @    >=
  until          r>drop   ;

variable  4*?              4*?   on

































variable  4*?                4*?   on
\ variable  head.start         8000  stm32f407.sF?  @  #if  0 ( 08000000 )  +  #then  head.start  !
\ variable  head.start*    20004000                                             head.start* !

: lfa'+head.start   ( -- )     0  >r                  #.counter  off
  begin  \  base @  >r  decimal   \.3f---  cr  ."   ("   #.counter  @    9 u.r  ."  )  "   1  #.counter +!   r> base  !
      4*?  @  if  r>   3 +  fffffffc  and  >r  then
      r@  4 +  dup head.start  @ +  >r   T:NFA.QUEUE  +  @  head.start  @ +    r>  32!'    \  lfa'
      r@  8 +                            T:NFA.QUEUE  +  count  1f  and dup>r  2drop       \  nfa'
      r>  9 +  r>  +  dup>r              T:NFA.QUEUE.COUNTER    @   >=
  until   r>drop   ;

: lfa'+head.start*  ( -- )     0  >r                  #.counter  off
  begin  \  base @  >r  decimal   \.3f---  cr  ."   ("   #.counter  @    9 u.r  ."  )  "   1  #.counter +!   r> base  !
      4*?  @  if  r>   3 +  fffffffc  and  >r  then
      r@  4 +  dup head.start* @ +  >r   T:NFA.QUEUE* +  @  head.start* @ +    r>  32!'    \  lfa'
      r@  8 +                            T:NFA.QUEUE* +  count  1f  and dup>r  2drop       \  nfa'
      r>  9 +  r>  +  dup>r              T:NFA.QUEUE.COUNTER*   @   >=
  until   r>drop   ;

: .nfa.value  ( nfa  -- )   dup  c@  dup>r  1f  and  1+  bounds  do  i  c@  .xx  loop
  r@  80 and   if   66 ?y  ." immediate"  then  r>  40  and   if  70 ?y  ." compile_only"  then  ;

: type+space ( a len -- )  bounds   do  space  i  c@  emit  loop  ;

: dump.T:NFA.QUEUE    ( -- )    0  >r                 #.counter  off
  begin  \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal)  ."  )  "   1  #.counter +!
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup head.start   @ +  8 u.r   T:NFA.QUEUE   +       @                    0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup head.start   @ +  8 u.r   T:NFA.QUEUE   +       @   head.start  @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup head.start   @ +  8 u.r   T:NFA.QUEUE   +   6 spaces   dup    .nfa.value
                 cr     20  ?y   count  1f  and  dup>r  type+space    \ nfa'
                 r>  9 +  r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                                                        T:NFA.QUEUE.COUNTER   @   >=
  until          r>drop   ;

: dump.T:NFA.QUEUE*   ( -- )    0  >r                 #.counter  off
  begin  \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal)  ."  )  "   1  #.counter +!
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +       @                    0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +       @   head.start  @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +   6 spaces   dup    .nfa.value
                 cr     20  ?y   count  1f  and  dup>r  type+space    \ nfa'
                 r>  9 +  r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                                                        T:NFA.QUEUE.COUNTER*  @   >=
  until          r>drop   ;

: dump.T:NFA.QUEUE    ( -- )    0  >r                 #.counter  off
  begin  \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal)  ."  )  "   1  #.counter +!
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup head.start   @ +  8 u.r   T:NFA.QUEUE   +       @                    0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup head.start   @ +  8 u.r   T:NFA.QUEUE   +       @   head.start  @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup head.start   @ +  8 u.r   T:NFA.QUEUE   +    6  spaces   dup    .nfa.value
                 cr     20  ?y   count  1f  and  dup>r  type+space    \ nfa'
                 r>  9 +  r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                                                        T:NFA.QUEUE.COUNTER   @   >=
  until          r>drop         0  >r                 #.counter  off
  begin  \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal)  ."  )  "   1  #.counter +!
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +       @                    0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +       @   head.start* @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +    6  spaces   dup    .nfa.value
                 cr     20  ?y   count  1f  and  dup>r  type+space    \ nfa'
                 r>  9 +  r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                                                        T:NFA.QUEUE.COUNTER*  @   >=
  until          r>  drop   ;

: .T:NFA.addr  ( a -- a )  ."  ("  dup  0a  u.r ."  )"  ;

: head.example  ( -- )   cr   cr
  cr  ."     example of HEAD portion construction :"
  cr          ."   \ -------------------------------------------------------------------------------"
  cr  6  ?y   ." pcfa -->      D558 (     A9438 )      69C8
  cr  6  ?y   ."  lfa -->      D55C (     A943C )      D554
  cr  6  ?y   ."  nfa -->      D560 (     A9440 )      027446
  cr  6  ?y   ."                                          t F"
  cr          ."   \ -------------------------------------------------------------------------------"
  cr  cr  cr  ;

: dump.T:NFA.QUEUE    ( -- )    head.example
  cr  ."     head in flash ROM/RAM   t:NFA.queue     DATA"
                                0  >r                   #.counter  off
  begin  \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal)  ."  )  "  1  #.counter +!
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup head.start   @ +  8 u.r   T:NFA.QUEUE   +   .T:NFA.addr   @                    0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup head.start   @ +  8 u.r   T:NFA.QUEUE   +   .T:NFA.addr   @  head.start  @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup head.start   @ +  8 u.r   T:NFA.QUEUE   +   .T:NFA.addr   6  spaces   dup    .nfa.value
                 cr     2e  ?y   count  1f  and  dup>r  type+space    \ nfa'
                 r>  9 +  r> +  dup>r  4*? @  if   3 +  fffffffc  and   then
                                                        T:NFA.QUEUE.COUNTER   @   >=
  until          r>drop         0  >r                \  #.counter  off
  begin  \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal)  ."  )  "  1  #.counter +!
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +   .T:NFA.addr   @                    0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +   .T:NFA.addr   @  head.start* @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup head.start*  @ +  8 u.r   T:NFA.QUEUE*  +   .T:NFA.addr   6  spaces   dup    .nfa.value
                 cr     2e  ?y   count  1f  and  dup>r  type+space    \ nfa'
                 r>  9 +  r> +  dup>r  4*? @  if   3 +  fffffffc  and   then
                                                        T:NFA.QUEUE.COUNTER*  @   >=
  until          r>  drop   ;

: dump.T:    ( -- )   cr        0  >r                 #.counter  off
  begin  (   \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal*  ."  *  "  )   1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
    cr   ."   ( "  base @   #.counter  @  decimal  5 u.r  ."  )"   base  !
       ( 10 ?y ) r@      ( dup head.start   @ +  8 u.r ) T:NFA.QUEUE   +       @   0a  u.r ."   org  t:  "   \ pcfa  pointer to cfa'
\    cr  10 ?y   r@  4 +   dup head.start   @ +  8 u.r   T:NFA.QUEUE   +       @   head.start  @ +  0a  u.r  \ lfa'
   ( cr  10 ?y ) r@  8 + ( dup head.start   @ +  8 u.r ) T:NFA.QUEUE   +  ( 6 spaces   dup    .nfa.value )
               ( cr     20  ?y )  count  1f  and  dup>r  type    \ nfa'
                 r>  9 +  r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                                                         T:NFA.QUEUE.COUNTER   @   >=
  until          r>drop         0  >r               \ #.counter  off
  begin  (   \.3f---  cr  ."   ("   #.counter  @    9 u.r(decimal*  ."  *  "  )   1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
    cr   ."   ( "  base @   #.counter  @  decimal  5 u.r  ."  )"   base  !
       ( 10 ?y ) r@      ( dup head.start   @ +  8 u.r ) T:NFA.QUEUE*  +       @   0a  u.r ."   org  t:  "   \ pcfa  pointer to cfa'
\    cr  10 ?y   r@  4 +   dup head.start   @ +  8 u.r   T:NFA.QUEUE*  +       @   head.start  @ +  0a  u.r  \ lfa'
   ( cr  10 ?y ) r@  8 + ( dup head.start   @ +  8 u.r ) T:NFA.QUEUE*  +  ( 6 spaces   dup    .nfa.value )
               ( cr     20  ?y )  count  1f  and  dup>r  type    \ nfa'
                 r>  9 +  r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                                                         T:NFA.QUEUE.COUNTER*  @   >=
  until          r>drop    ;


\ dtq*     dump.T:QUEUE*       ;
: dnq*     dump.T:NFA.QUEUE*   ;

: dtq      dump.T:QUEUE        ;
: dnq      dump.T:NFA.QUEUE    ;

\     T:NFA.QUEUE.counter  @
\         cfa'   0
\         lfa'   4
\         nfa'   8
\ -----------------------
\         cfa'
\         lfa'
\         nfa'


: head>target   ( -- )   T:NFA.QUEUE.COUNTER  @    0
  ?do                    T:NFA.QUEUE  i  +   c@    head.start  @   i  +   c!'
  loop  lfa'+head.start
                         T:NFA.QUEUE.COUNTER* @    0
  ?do                    T:NFA.QUEUE* i  +   c@    head.start* @   i  +   c!'
  loop  lfa'+head.start* ;

: aligned(2*)  ( n1 -- n2 )  1 +  fffffffe and  ;
: aligned(4*)  ( n1 -- n2 )  3 +  fffffffc and  ;


\ HERE  0F +  FFFFfff0  AND  0c +  DP  !   \ adjusting LFA+NFA+CFA.ARRAY to the boundary of XXXXxxx0
  HERE  0F +  FFFFfff0  AND  0c +  DP  !   \ adjusting LFA+NFA+CFA.ARRAY to the boundary of XXXXxxx0

variable  lfa+nfa+cfa.array.size              200000  lfa+nfa+cfa.array.size  !

: here=xxxxxx00  ( -- )  here  ff  and  1fc  swap  -  dup  101  >  if  100  -  then  allot  ;    here=xxxxxx00

\ here  1ffd  +  fffff000  and  4  -  dp  !    \ adjusting LFA+NFA+CFA.ARRAY to the boundary of XXXXx000
\ here 1fffd  +  ffff0000  and  4  -  dp  !    \ adjusting LFA+NFA+CFA.ARRAY to the boundary of XXXX0000

  here  ffff  and  0  fffb  between  #if  fffc  #else  1fffc  #then  here  or  dp  !

create    lfa+nfa+cfa.array                           lfa+nfa+cfa.array.size  @  allot  \ 2 mega byte  \ head portion in win32forth side. not target image territory.
:   erase.lfa+nfa+cfa.array        lfa+nfa+cfa.array  lfa+nfa+cfa.array.size  @  ff  fill  ;
    erase.lfa+nfa+cfa.array

create    lfa+nfa+cfa.array'                          lfa+nfa+cfa.array.size  @  allot  \ 2 mega byte  \ head portion in win32forth side. not target image territory.
:   erase.lfa+nfa+cfa.array'       lfa+nfa+cfa.array' lfa+nfa+cfa.array.size  @  ff  fill  ;
    erase.lfa+nfa+cfa.array'

variable  lfa+nfa+cfa.counter

variable  head.spacing       100 ( 80 ) head.spacing  !
: get.total.words(adjacent)    lfa+nfa+cfa.COUNTER  @  head.spacing  @  /  ;

variable  last'(adjacent)   \  20005440  last'(adjacent)  !


variable    hp'
:  cp0'*    head.start*  @    ;     cp0'*  hp'   !
:  here'*   hp'          @    ;
:  allot'*  hp'   +!          ;
:   8,'*    here'*   8!'   1  allot'*  ;
:  32,'*    here'*  32!'   4  allot'*  ;

: lfa*.to.cfa*.spacing  ( -- n )   head.spacing  @  10  -  ;
: lfa*.to.nfa*.spacing  ( -- n )   10  ;

: n->lfa*      ( n -- lfa* )     lfa+nfa+cfa.array  +   ;
: n->nfa*      ( n -- cfa* )     n->lfa*  10  +  ;
: n->cfa*      ( n -- cfa* )     n->lfa*  lfa*.to.cfa*.spacing  +  ;

: lfa*->nfa*   ( lfa* -- nfa* )  10  +  ;
: lfa*->cfa*   ( lfa* -- cfa* )  lfa*.to.cfa*.spacing  +  ;

: nfa*->lfa*   ( nfa* -- lfa* )  10  -  ;
: nfa*->cfa*   ( nfa* -- cfa* )  nfa*->lfa*    lfa*.to.cfa*.spacing  +  ;

: cfa*->lfa*   ( cfa* -- lfa* )  lfa*.to.cfa*.spacing  -  ;
: cfa*->nfa*   ( cfa* -- nfa* )  lfa*.to.cfa*.spacing  -  10  +  ;

: n->lfa*      ( n -- lfa* )     lfa+nfa+cfa.array  +  ;
: n->nfa*      ( n -- nfa* )     n->lfa*  10  +  ;
: n->cfa*      ( n -- cfa* )     n->lfa*  lfa*.to.cfa*.spacing  +  ;

: lfa*->n      ( lfa* -- n )     lfa+nfa+cfa.array  -  ;
: nfa*->n      ( nfa* -- n )     nfa*->lfa*   lfa*->n  ;
: cfa*->n      ( cfa* -- n )     cfa*->lfa*   lfa*->n  ;

: valid.lfa*?  ( lfa* -- f )     0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  =
     if    drop   -1  swap  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.nfa*?   ( nfa* -- f )    10                    -  valid.lfa*?  ;
: valid.cfa*?   ( cfa* -- f )    lfa*.to.cfa*.spacing  -  valid.lfa*?  ;

: lfa*->lfa'    ( lfa* -- lfa' -1 / 0 )  dup  valid.lfa*?
  if                   @  dup  -1  =
     if    drop  0
     else  -1
     then
  else     drop  0
  then     ;

: lfa*->nfa'    ( lfa* -- nfa' -1 / 0 )  dup  valid.lfa*?
  if       lfa*->nfa*  @  dup  -1  =
     if    drop  0
     else  -1
     then
  else     drop  0
  then     ;

: lfa*->cfa'    ( lfa* -- cfa' -1 / 0 )  dup  valid.lfa*?
  if       lfa*->cfa*  @       -1
  else     drop  0
  then     ;

: lfa'->lfa*   ( lfa' -- lfa* -1 / 0 ) ; \ dup  valid.lfa'?  if              @  -1  else  drop  0  then  ;
: lfa'->nfa*   ( lfa' -- nfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->nfa*  @  -1  else  drop  0  then  ;
: lfa'->cfa*   ( lfa' -- cfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->cfa*  @  -1  else  drop  0  then  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )  >r  0  swap  r>
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )   0  swap  0
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )   0  swap  10
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )   0  swap  lfa*.to.cfa*.spacing
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;


: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )  0                     valid.xfa'?  ;
: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )  8                     valid.xfa'?  if  8 + -1  exit  then  0  ;
: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )  lfa*.to.cfa*.spacing  valid.xfa'?  ;
: cfa'->nfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->nfa*  -1  else  0  then  ;
: cfa'->lfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->lfa*  -1  else  0  then  ;


: lfa'->n  ( lfa' -- n -1 / 0 )   lfa'->lfa*?  if  lfa*->n  -1  else  0  then  ;
: nfa'->n  ( nfa' -- n -1 / 0 )   nfa'->nfa*?  if  nfa*->n  -1  else  0  then  ;
: cfa'->n  ( cfa' -- n -1 / 0 )   cfa'->cfa*?  if  cfa*->n  -1  else  0  then  ;






: nfa'->lfa'  ( nfa' -- lfa' )  nfa'-lfa'  -  ;

\ nfa'->cfa'  ( nfa' -- cfa' )  count'  +  ALIGNED(4*)  ;
: nfa'->cfa'  ( nfa' -- cfa' )  nfa'->nfa*?  0=  abort" ****** invalid nfa' ******"  nfa*->cfa*  @  ;

: nfa*->lfa'       ( nfa* -- lfa' )  8  -  @   nfa'->lfa'  ;
: lfa*->next.cfa*  ( lfa* -- next.cfa* )  head.spacing  @   +  lfa*->cfa*  ;
: lfa*->next.nfa*  ( lfa* -- next.nfa* )  head.spacing  @   +  lfa*->nfa*  ;
: lfa*->next.lfa'  ( lfa* -- next.lfa' )  lfa*->next.nfa*      nfa*->lfa'  ;
: lfa*->next.cfa'  ( lfa* -- next.cfa' )  lfa*->next.cfa*      @        ;



: nfa*->lfa'       ( nfa* -- lfa' )  dup  nfa*->lfa*  8 +  @  dup  -1  =  swap  here'  =  or
  if    drop  here'  exit
  then  8  -  @   nfa'->lfa'  ;

: nfa*->cfa' (  nfa* -- cfa' )   nfa*->cfa*   @  ;

: nfa*->lfa'/cfa'/here'  ( nfa* -- lfa' )  >r   r@  nfa*->lfa*  8 +  @  -1  =
  if      r>     nfa*->cfa'   exit
  then    r>  8  -  @  nfa'->lfa'   ;

: lfa*->next.lfa'/cfa'/here'  ( nfa* -- lfa' )  lfa*->next.nfa*   nfa*->lfa'/cfa'/here'  ;

: lfa*->next.cfa*  ( lfa* -- next.cfa* )  head.spacing  @   +  lfa*->cfa*  ;
: lfa*->next.nfa*  ( lfa* -- next.nfa* )  head.spacing  @   +  lfa*->nfa*  ;
: lfa*->next.lfa'  ( lfa* -- next.lfa' )  lfa*->next.nfa*      nfa*->lfa'  ;
: lfa*->next.cfa'  ( lfa* -- next.cfa' )  lfa*->next.cfa*      @        ;

: lfa*->cfa'       ( lfa* -- cfa' )       lfa*->cfa*    @   ;

: lfa*->next.lfa'/here'  ( lfa* -- next.lfa'/here' )  lfa*->next.cfa'  dup  -1  =  if  drop  here'  exit  then  ;
: lfa*->next.lfa'/here'  ( lfa* -- next.lfa'/here' )  lfa*->next.lfa'/cfa'/here'  dup  fffffffb -1  between  if  drop  here'  exit  then  ;






: cfa*-lfa*   head.spacing  @  10  -   ;
: lfa*        lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @   +       ;
: nfa*        lfa*        10     +   ;
: cfa*        cfa*-lfa*   lfa*   +   ;

: lfa*.to.cfa*.spacing  ( -- n )   head.spacing  @  10  -  ;
: lfa*.to.nfa*.spacing  ( -- n )   10  ;

: check.n(lnc) ( n -- n )
  dup  head.spacing         @  mod  abort"  *** n in lnc should be multiple of 100 ***"
  dup  lfa+nfa+cfa.COUNTER  @  u>   abort"  *** n in lnc should be smaller than  maximum words ***"  ;

: lfa*->nfa*   ( lfa* -- nfa* )  10  +  ;
: lfa*->cfa*   ( lfa* -- cfa* )  lfa*.to.cfa*.spacing  +  ;

: nfa*->lfa*   ( nfa* -- lfa* )  10  -  ;
: nfa*->cfa*   ( nfa* -- cfa* )  nfa*->lfa*    lfa*.to.cfa*.spacing  +  ;

: cfa*->lfa*   ( cfa* -- lfa* )  lfa*.to.cfa*.spacing  -  ;
: cfa*->nfa*   ( cfa* -- nfa* )  lfa*.to.cfa*.spacing  -  10  +  ;

: n->lfa*      ( n -- lfa* )     check.n(lnc)   lfa+nfa+cfa.array  +  ;
: n->nfa*      ( n -- nfa* )     check.n(lnc)   n->lfa*  10  +  ;
: n->cfa*      ( n -- cfa* )     check.n(lnc)   n->lfa*  lfa*.to.cfa*.spacing  +  ;

: n->lfa'      ( n -- cfa' )     n->lfa*   8                     +  @  4  -  ;
: n->nfa'      ( n -- cfa' )     n->lfa*   8                     +  @        ;
: n->cfa'      ( n -- cfa' )     n->lfa*   lfa*.to.cfa*.spacing  +  @        ;

: lfa*->n      ( lfa* -- n )     lfa+nfa+cfa.array  -  ;
: nfa*->n      ( nfa* -- n )     nfa*->lfa*   lfa*->n  ;
: cfa*->n      ( cfa* -- n )     cfa*->lfa*   lfa*->n  ;

: valid.lfa*?  ( lfa* -- f )     0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  =
     if    drop   -1  swap  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.nfa*?   ( nfa* -- f )    10                    -  valid.lfa*?  ;
: valid.cfa*?   ( cfa* -- f )    lfa*.to.cfa*.spacing  -  valid.lfa*?  ;

: valid.lfa'?   ( lfa' -- lfa* -1 / 0 )   0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  @  =
     if    drop    i  -1  rot  leave
     then  head.spacing   @
  +loop    drop  ;

: nfa'-lfa' ( -- n )  forward.link?  @   if  6  exit  then  4  ;

: nfa*->nfa'  ( nfa* -- lfa' -1 / 0 )   valid.lfa'?  @   if  nfa'-lfa'  +  then   ;

: lfa*->lfa'  ( lfa* -- lfa' -1 / 0 )   lfa*->nfa*   @  nfa*->nfa'  nfa'-lfa'  ;
            
: lfa*->nfa'    ( lfa* -- nfa' -1 / 0 )  dup  valid.lfa*?
  if       dup    lfa*->nfa*  @   -1  =
     if    drop      0
     else  8  +  @  -1
     then
  else     drop      0
  then     ;

: lfa*->lfa'    ( lfa* -- lfa' -1 / 0 )  lfa*->nfa'  dup  if   4  -   -1  then   ;

: lfa*->cfa'    ( lfa* -- cfa' -1 / 0 )  dup  valid.lfa*?
  if       lfa*->cfa*  @       -1
  else     drop  0
  then     ;

: lfa*->lfa' ( lfa* -- lfa' -1 / 0 )  dup  valid.lfa*?  if  lfa*->nfa*  nfa*->nfa'  nfa'-lfa' - else  drop  0  then  ;

: check.first.and.last.lfc'  ( lfc' -- lfa* -1 / 0 )
  forward.link?  @
  if      lfa+nfa+cfa.array           ( first.lfa* )  lfa*->lfa'
  else    lfa*   head.spacing  @  -   (  last.lfa* )  lfa*->lfa'
  then    ;

: valid.lfa'?   ( lfa' -- lfa* -1 / 0 )  dup  check.first.and.last.lfc'  if  nip  -1  exit  then
  0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  @  =
     if    drop    i  -1  rot  leave
     then  head.spacing   @
  +loop    drop  ;















: lfa'->lfa*   ( lfa' -- lfa* -1 / 0 ) ; \ dup  valid.lfa'?  if              @  -1  else  drop  0  then  ;
: lfa'->nfa*   ( lfa' -- nfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->nfa*  @  -1  else  drop  0  then  ;
: lfa'->cfa*   ( lfa' -- cfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->cfa*  @  -1  else  drop  0  then  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )  >r  0  swap  r>
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )   0  swap  0
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )   0  swap  10
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )   0  swap  lfa*.to.cfa*.spacing
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;


: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )  0                      valid.xfa'?  ;
: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )  8                      valid.xfa'?  ;
: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )  lfa*.to.cfa*.spacing   valid.xfa'?  ;
: cfa'->nfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->nfa*  -1  else  0  then  ;
: cfa'->lfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->lfa*  -1  else  0  then  ;


: lfa'->n  ( lfa' -- n -1 / 0 )   lfa'->lfa*?  if  lfa*->n  -1  else  0  then  ;
: nfa'->n  ( nfa' -- n -1 / 0 )   nfa'->nfa*?  if  nfa*->n  -1  else  0  then  ;
: cfa'->n  ( cfa' -- n -1 / 0 )   cfa'->cfa*?  if  cfa*->n  -1  else  0  then  ;

: lfa*.to.cfa*.spacing  ( -- n )   head.spacing  @  10  -  ;
: lfa*.to.nfa*.spacing  ( -- n )   10  ;

: check.n(lnc) ( n -- n )
  dup  head.spacing         @  mod  abort"  *** n in lnc should be multiple of 100 ***"
  dup  lfa+nfa+cfa.COUNTER  @  u>   abort"  *** n in lnc should be smaller than  maximum words ***"  ;

: lfa*->nfa*   ( lfa* -- nfa* )  10  +  ;
: lfa*->cfa*   ( lfa* -- cfa* )  lfa*.to.cfa*.spacing  +  ;

: nfa*->lfa*   ( nfa* -- lfa* )  10  -  ;
: nfa*->cfa*   ( nfa* -- cfa* )  nfa*->lfa*    lfa*.to.cfa*.spacing  +  ;

: cfa*->lfa*   ( cfa* -- lfa* )  lfa*.to.cfa*.spacing  -  ;
: cfa*->nfa*   ( cfa* -- nfa* )  lfa*.to.cfa*.spacing  -  10  +  ;

: n->lfa*      ( n -- lfa* )     check.n(lnc)   lfa+nfa+cfa.array  +  ;
: n->nfa*      ( n -- nfa* )     check.n(lnc)   n->lfa*  10  +  ;
: n->cfa*      ( n -- cfa* )     check.n(lnc)   n->lfa*  lfa*.to.cfa*.spacing  +  ;

: n->lfa'      ( n -- cfa' )     n->lfa*   8                     +  @  4  -  ;
: n->nfa'      ( n -- cfa' )     n->lfa*   8                     +  @        ;
: n->cfa'      ( n -- cfa' )     n->lfa*   lfa*.to.cfa*.spacing  +  @        ;

: lfa*->n      ( lfa* -- n )     lfa+nfa+cfa.array  -  ;
: nfa*->n      ( nfa* -- n )     nfa*->lfa*   lfa*->n  ;
: cfa*->n      ( cfa* -- n )     cfa*->lfa*   lfa*->n  ;
\ -----------------------------------------------------------------------------------------
: lfa*         lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +          ;
: nfa*         lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +                   10 +  ;
: cfa*         lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  head.spacing @ + 10 -  ;

: valid.lfa*?  ( lfa* -- f )     0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  =
     if    drop   -1  swap  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.nfa*?   ( nfa* -- f )    10                    -  valid.lfa*?  ;
: valid.cfa*?   ( cfa* -- f )    lfa*.to.cfa*.spacing  -  valid.lfa*?  ;

: lfa*->nfa'    ( lfa* -- nfa' -1 / 0 )  dup  valid.lfa*?
  if       dup    lfa*->nfa*  @   -1  =
     if    drop      0
     else  8  +  @  -1
     then
  else     drop      0
  then     ;

: lfa*->lfa'    ( lfa* -- lfa' -1 / 0 )  lfa*->nfa'  dup  if   4  -   -1  then   ;

: lfa*->cfa'    ( lfa* -- cfa' -1 / 0 )  dup  valid.lfa*?
  if       lfa*->cfa*  @       -1
  else     drop  0
  then     ;


: lfa*->cfa'   ( lfa* -- cfa' )  lfa*->cfa'  0=  abort" *** invalid  cfa' ***"   ;
: lfa*->nfa'   ( lfa* -- nfa' )  lfa*->nfa'  0=  abort" *** invalid  nfa' ***"   ;

: lfa'->lfa*   ( lfa' -- lfa* -1 / 0 )  dup  valid.lfa'?  if              @  -1  else  drop  0  then  ;
: lfa'->nfa*   ( lfa' -- nfa* -1 / 0 )  dup  valid.lfa'?  if  lfa*->nfa*  @  -1  else  drop  0  then  ;
: lfa'->cfa*   ( lfa' -- cfa* -1 / 0 )  dup  valid.lfa'?  if  lfa*->cfa*  @  -1  else  drop  0  then  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )  >r  0  swap  r>
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )   0  swap  0
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )   0  swap  10
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )   0  swap  lfa*.to.cfa*.spacing
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;


: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )  0                     valid.xfa'?  ;
: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )  8                     valid.xfa'?  ;
: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )  lfa*.to.cfa*.spacing  valid.xfa'?  ;
: cfa'->nfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->nfa*  -1  else  0  then  ;
: cfa'->lfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->lfa*  -1  else  0  then  ;


: lfa'->n  ( lfa' -- n -1 / 0 )   lfa'->lfa*?  if  lfa*->n  -1  else  0  then  ;
: nfa'->n  ( nfa' -- n -1 / 0 )   nfa'->nfa*?  if  nfa*->n  -1  else  0  then  ;
: cfa'->n  ( cfa' -- n -1 / 0 )   cfa'->cfa*?  if  cfa*->n  -1  else  0  then  ;



















\ : even.aligned           ( a1' --- a2' )   1+  fffffffe  and  ;
\ : multiple.of.4.aligned  ( a1' --- a2' )   3+  fffffffc  and  ;

variable  here'.even.aligned?      here'.even.aligned?  on
variable  here'.muliple.of.n.aligned?
  : here'.even.aligned             here'.even.aligned? @  if  here'  1 and  if   0  c,' then   then  ;
  : here'.muliple.of.4.aligned     here'.even.aligned? @  if  here'  3 and  if   4  here'  3 and - 0  ?do  0  c,'   loop  then   then  ;
  : here'.muliple.of.4.aligned*    here'.even.aligned? @  if  here'* 3 and  if   4  here'* 3 and - 0  ?do  0  8,'*  loop  then   then  ;

  : here'.muliple.of.n.aligned  ( n -- )  >r  here'.muliple.of.n.aligned?  @  if  here' r@  1-  and  if   here'  r@  1- and  0  ?do  0  c,'  loop  then   then  r>drop  ;

variable  multiple.of.2?
variable  multiple.of.4?
variable  multiple.of.n?

  : here'.aligned    multiple.of.4?  @  if   here'.muliple.of.4.aligned   exit  then
                     multiple.of.2?  @  if   here'.even.aligned                 then  ;

  : here'.even            here'    here'.even.aligned? @  if     1+  0fffffffe  then  ;

: here'.aligned*2    here'  1+   ffffFFFE  and  cp'  !  ;
: here'.aligned*4    here'  3 +  ffffFFFE  and  cp'  !  ;

: here'.align*2      here'  1+   ffffFFFE  and  cp'  !  ;
: here'.align*4      here'  3 +  ffffFFFc  and  cp'  !  ;

: ALIGN*2  ( n1 -- n2 )   1  +  ffffFFFe  and  ;
: ALIGN*4  ( n1 -- n2 )   3  +  ffffFFFc  and  ;




\ variable   here'.align*n

: align  ( -- )
               align*n   @
  case  2  of  ALIGN*2   endof
        4  of  ALIGN*4   endof
  endcase  ;

: here'.align  ( -- )
               here'.align*n   @
  case  2  of  HERE'.ALIGN*2   endof
        4  of  HERE'.ALIGN*4   endof
  endcase  ;





: do.+08000000  ;






































: cfa*-lfa*   head.spacing  @  10  -   ;
: lfa*        lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @   +       ;
: nfa*        lfa*        10     +   ;
: cfa*        cfa*-lfa*   lfa*   +   ;

: lfa*.to.cfa*.spacing  ( -- n )   head.spacing  @  10  -  ;
: lfa*.to.nfa*.spacing  ( -- n )   10  ;

: check.n(lnc) ( n -- n )
  dup  head.spacing         @  mod  abort"  *** n in lnc should be multiple of 100 ***"
  dup  lfa+nfa+cfa.COUNTER  @  u>   abort"  *** n in lnc should be smaller than  maximum words ***"  ;

: lfa*->nfa*   ( lfa* -- nfa* )  10  +  ;
: lfa*->cfa*   ( lfa* -- cfa* )  lfa*.to.cfa*.spacing  +  ;

: nfa*->lfa*   ( nfa* -- lfa* )  10  -  ;
: nfa*->cfa*   ( nfa* -- cfa* )  nfa*->lfa*    lfa*.to.cfa*.spacing  +  ;

: cfa*->lfa*   ( cfa* -- lfa* )  lfa*.to.cfa*.spacing  -  ;
: cfa*->nfa*   ( cfa* -- nfa* )  lfa*.to.cfa*.spacing  -  10  +  ;

: n->lfa*      ( n -- lfa* )     check.n(lnc)   lfa+nfa+cfa.array  +  ;
: n->nfa*      ( n -- nfa* )     check.n(lnc)   n->lfa*  10  +  ;
: n->cfa*      ( n -- cfa* )     check.n(lnc)   n->lfa*  lfa*.to.cfa*.spacing  +  ;

: n->lfa'      ( n -- cfa' )     n->lfa*   8                     +  @  4  -  ;
: n->nfa'      ( n -- cfa' )     n->lfa*   8                     +  @        ;
: n->cfa'      ( n -- cfa' )     n->lfa*   lfa*.to.cfa*.spacing  +  @        ;

: lfa*->n      ( lfa* -- n )     lfa+nfa+cfa.array  -  ;
: nfa*->n      ( nfa* -- n )     nfa*->lfa*   lfa*->n  ;
: cfa*->n      ( cfa* -- n )     cfa*->lfa*   lfa*->n  ;
















: valid.lfa*?  ( lfa* -- f )     0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  =
     if    drop   -1  swap  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.nfa*?   ( nfa* -- f )    10                    -  valid.lfa*?  ;
: valid.cfa*?   ( cfa* -- f )    lfa*.to.cfa*.spacing  -  valid.lfa*?  ;

: lfa*->nfa'    ( lfa* -- nfa' -1 / 0 )  dup  valid.lfa*?
  if       dup    lfa*->nfa*  @   -1  =
     if    drop      0
     else  8  +  @  -1
     then
  else     drop      0
  then     ;

: lfa*->lfa'    ( lfa* -- lfa' -1 / 0 )  lfa*->nfa'  dup  if   4  -   -1  then   ;

: lfa*->cfa'    ( lfa* -- cfa' -1 / 0 )  dup  valid.lfa*?
  if       lfa*->cfa*  @       -1
  else     drop  0
  then     ;

: lfa'->lfa*   ( lfa' -- lfa* -1 / 0 ) ; \ dup  valid.lfa'?  if              @  -1  else  drop  0  then  ;
: lfa'->nfa*   ( lfa' -- nfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->nfa*  @  -1  else  drop  0  then  ;
: lfa'->cfa*   ( lfa' -- cfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->cfa*  @  -1  else  drop  0  then  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )  >r  0  swap  r>
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )   0  swap  0
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )   0  swap  10
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )   0  swap  lfa*.to.cfa*.spacing
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;


: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )  0                     valid.xfa'?  ;
: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )  8                     valid.xfa'?  ;
: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )  lfa*.to.cfa*.spacing  valid.xfa'?  ;
: cfa'->nfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->nfa*  -1  else  0  then  ;
: cfa'->lfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->lfa*  -1  else  0  then  ;


: lfa'->n  ( lfa' -- n -1 / 0 )   lfa'->lfa*?  if  lfa*->n  -1  else  0  then  ;
: nfa'->n  ( nfa' -- n -1 / 0 )   nfa'->nfa*?  if  nfa*->n  -1  else  0  then  ;
: cfa'->n  ( cfa' -- n -1 / 0 )   cfa'->cfa*?  if  cfa*->n  -1  else  0  then  ;






























: lfa*.to.cfa*.spacing  ( -- n )   head.spacing  @  10  -  ;
: lfa*.to.nfa*.spacing  ( -- n )   10  ;

: check.n(lnc) ( n -- n )
  dup  head.spacing         @  mod  abort"  *** n in lnc should be multiple of 100 ***"
  dup  lfa+nfa+cfa.COUNTER  @  u>   abort"  *** n in lnc should be smaller than  maximum words ***"  ;

: lfa*->nfa*   ( lfa* -- nfa* )  10  +  ;
: lfa*->cfa*   ( lfa* -- cfa* )  lfa*.to.cfa*.spacing  +  ;

: nfa*->lfa*   ( nfa* -- lfa* )  10  -  ;
: nfa*->cfa*   ( nfa* -- cfa* )  nfa*->lfa*    lfa*.to.cfa*.spacing  +  ;

: cfa*->lfa*   ( cfa* -- lfa* )  lfa*.to.cfa*.spacing  -  ;
: cfa*->nfa*   ( cfa* -- nfa* )  lfa*.to.cfa*.spacing  -  10  +  ;

: n->lfa*      ( n -- lfa* )     check.n(lnc)   lfa+nfa+cfa.array  +  ;
: n->nfa*      ( n -- nfa* )     check.n(lnc)   n->lfa*  10  +  ;
: n->cfa*      ( n -- cfa* )     check.n(lnc)   n->lfa*  lfa*.to.cfa*.spacing  +  ;

: n->lfa'      ( n -- cfa' )     n->lfa*   8                     +  @  4  -  ;
: n->nfa'      ( n -- cfa' )     n->lfa*   8                     +  @        ;
: n->cfa'      ( n -- cfa' )     n->lfa*   lfa*.to.cfa*.spacing  +  @        ;

: lfa*->n      ( lfa* -- n )     lfa+nfa+cfa.array  -  ;
: nfa*->n      ( nfa* -- n )     nfa*->lfa*   lfa*->n  ;
: cfa*->n      ( cfa* -- n )     cfa*->lfa*   lfa*->n  ;
\ -----------------------------------------------------------------------------------------
: lfa*        lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +          ;
: nfa*        lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +                   10 +  ;
: cfa*        lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  head.spacing @ + 10 -  ;





: valid.lfa*?  ( lfa* -- f )     0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  =
     if    drop   -1  swap  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.nfa*?   ( nfa* -- f )    10                    -  valid.lfa*?  ;
: valid.cfa*?   ( cfa* -- f )    lfa*.to.cfa*.spacing  -  valid.lfa*?  ;

: lfa*->nfa'    ( lfa* -- nfa' -1 / 0 )  dup  valid.lfa*?
  if       dup    lfa*->nfa*  @   -1  =
     if    drop      0
     else  8  +  @  -1
     then
  else     drop      0
  then     ;

: lfa*->lfa'    ( lfa* -- lfa' -1 / 0 )  lfa*->nfa'  dup  if   4  -   -1  then   ;

: lfa*->cfa'    ( lfa* -- cfa' -1 / 0 )  dup  valid.lfa*?
  if       lfa*->cfa*  @       -1
  else     drop  0
  then     ;

: nfa*->nfa'    ( nfa* -- nfa' )  8  -  @  ; 
: lfa*->cfa'    ( lfa* -- cfa' )  lfa*->cfa'  0=  abort" *** invalid  cfa' ***"   ;
: lfa*->nfa'    ( lfa* -- nfa' )  lfa*->nfa'  0=  abort" *** invalid  nfa' ***"   ;

: lfa*->lfa' ( lfa* -- lfa' -1 / 0 )  dup  valid.lfa*?  if  lfa*->nfa*  nfa*->nfa'  nfa'-lfa' - else  drop  0  then  ;

: check.first.and.last.lfc'  ( lfc' -- lfa* -1 / 0 )
  forward.link?  @
  if      lfa+nfa+cfa.array           ( first.lfa* )  lfa*->lfa'
  else    lfa*   head.spacing  @  -   (  last.lfa* )  lfa*->lfa'
  then    ;

: valid.lfa'?   ( lfa' -- lfa* -1 / 0 )  dup  check.first.and.last.lfc'  if  nip  -1  exit  then
  0  swap
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  bounds
  do       dup  i  @  =
     if    drop    i  -1  rot  leave
     then  head.spacing   @
  +loop    drop  ;






: lfa'->lfa*   ( lfa' -- lfa* -1 / 0 ) ; \ dup  valid.lfa'?  if              @  -1  else  drop  0  then  ;
: lfa'->nfa*   ( lfa' -- nfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->nfa*  @  -1  else  drop  0  then  ;
: lfa'->cfa*   ( lfa' -- cfa* -1 / 0 ) ; \ dup  valid.lfa'?  if  lfa*->cfa*  @  -1  else  drop  0  then  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;

: valid.xfa'?  ( xfa' offset -- xfa* -1 / 0 )  >r  0  swap  r>
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )   0  swap  0
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )   0  swap  10
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot   leave
     then  head.spacing  @
  +loop    drop  ;

: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )   0  swap  lfa*.to.cfa*.spacing
  lfa+nfa+cfa.array   +  lfa+nfa+cfa.COUNTER   @  bounds
  do       dup   i    @  =
     if    drop  i   -1  rot  leave
     then  head.spacing  @
  +loop    drop  ;


: lfa'->lfa*?  ( lfa' -- lfa* -1 / 0 )  0                     valid.xfa'?  ;
: nfa'->nfa*?  ( nfa' -- nfa* -1 / 0 )  8                     valid.xfa'?  ;
: cfa'->cfa*?  ( cfa' -- cfa* -1 / 0 )  lfa*.to.cfa*.spacing  valid.xfa'?  ;
: cfa'->nfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->nfa*  -1  else  0  then  ;
: cfa'->lfa*?  ( cfa' -- cfa* -1 / 0 )  cfa'->cfa*?  if  cfa*->lfa*  -1  else  0  then  ;


: lfa'->n  ( lfa' -- n -1 / 0 )   lfa'->lfa*?  if  lfa*->n  -1  else  0  then  ;
: nfa'->n  ( nfa' -- n -1 / 0 )   nfa'->nfa*?  if  nfa*->n  -1  else  0  then  ;
: cfa'->n  ( cfa' -- n -1 / 0 )   cfa'->cfa*?  if  cfa*->n  -1  else  0  then  ;


: cfa'->nfa*  ( cfa' -- cfa* )     cfa'->nfa*?  0=  abort" ***** invalid  cfa' ******"  ; 

\ nfa'->lfa'  ( nfa' -- lfa' )   nfa'-lfa'  -  ;

:  former.lfa*         ( -- a )     lfa*   head.spacing  @  -  ;
:  former.former.lfa'  ( -- lfa' )  former.lfa*  head.spacing  @  - 8  +  @  nfa'->lfa'  ;
:  former.lfa*+8       ( -- a )     former.lfa*  8  +  ;
: (former.lfa*+8)      ( -- nfa' )  former.lfa*+8   @  ;
:  former.nfa'         ( -- nfa' )  former.lfa*+8   @  ;
:  former.lfa'         ( -- lfa' )  former.nfa'  nfa'->lfa'  ;
:  lfa*+8              ( -- a )     lfa*   8  +  ;















































variable  *n

: JAM.INTO.lfa+nfa+cfa.array(head)        ( ADDR  LENGTH  HERE' ... ADDR  LENGTH )           *n  off
                         lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  head.spacing  @  10  -  +  !  \ cfa'
  0  begin 1 *n +! drop  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  head.spacing  @  *n  @  *  -  8  +  @  DUP  -1 <>
     until               lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +       !  \ lfa*
  LAST'(ADJACENT)   @    lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  8 +  !  \ nfa*
                    dup  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  + 10 + c!  \ length*
                   2dup  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  + 11 + swap  cmove
  head.spacing      @    lfa+nfa+cfa.counter    +!   ;

: JAM.INTO.lfa+nfa+cfa.array(headless)    ( ADDR  LENGTH  HERE' ... ADDR  LENGTH )
                         lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  head.spacing  @  10  -  +  !  \ cfa'
               FFFFFFFF  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +       !  \ lfa*
               FFFFFFFF  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  8 +  !  \ nfa*
                    dup  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  + 10 + c!  \ length*
                   2dup  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  + 11 + swap  cmove
  head.spacing        @  lfa+nfa+cfa.counter    +!   ;

variable  with.head?     with.head?  on

:       JAM.INTO.lfa+nfa+cfa.array  ( ADDR  LENGTH  HERE' ... ADDR  LENGTH )   with.head?  @
  if    JAM.INTO.lfa+nfa+cfa.array(head)
  else  JAM.INTO.lfa+nfa+cfa.array(headless)
  then  ;













: nth.word's.lfa'+nfa'+cfa''   ( n -- )   head.spacing  @  *  LFA+NFA+CFA.ARRAY  +  >r
         r@    @  -1  =
  if     r@                          @  ." ( lfa'=   "  .xxxxxxxx
         r@                          @  ."    nfa'= "   .xxxxxxxx
         r@    head.spacing @ 10 - + @  ."    cfa'= ) " .xxxxxxxx  ."    org  L:  "
  else   r@    @                        ." ( lfa'= ) "  .xxxxxxxx
         r@    @  2  +                  ."  ( nfa'= "   .xxxxxxxx
         r@    head.spacing @ 10 - + @  ."    cfa'=   " .xxxxxxxx  ."  ) org  t:  "
  then   r>    10 +  count  1f  and  type  ;

: words'.lnc  ( -- )   GET.TOTAL.WORDS(ADJACENT)   0
  ?do    cr   i    nth.word's.lfa'+nfa'+cfa''
  loop   cr   ;
















: JAM.INTO.T:NFA.QUEUE   ( ADDR  LENGTH  HERE' ... )  DUP>R  JAM.INTO.lfa+nfa+cfa.array
                              r> T:NFA.QUEUE  T:NFA.QUEUE.COUNTER @  +  !   4  T:NFA.QUEUE.COUNTER  +!  >R      \ CFA'=T:ADDR
  former.T:NFA.QUEUE.addr @   \  head.Forth?  @  not  if   HEAD.START   @   +  then
                                 T:NFA.QUEUE  T:NFA.QUEUE.COUNTER @  +  !   4  T:NFA.QUEUE.COUNTER  +!          \ LFA'
  T:NFA.QUEUE.COUNTER @   former.T:NFA.QUEUE.addr     !    R@                                                   \
  T:NFA.QUEUE.COUNTER @          T:NFA.QUEUE  +      C!                     1  T:NFA.QUEUE.COUNTER  +!          \ LENGTH
  T:NFA.QUEUE.COUNTER @          T:NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                \ NAME
  T:NFA.QUEUE.COUNTER @   R>  +  4*? @  if  aligned(4*)  then                  T:NFA.QUEUE.COUNTER  !  ;

: JAM.INTO.T:NFA.QUEUE*   ( ADDR  LENGTH  HERE' ... )  DUP>R  JAM.INTO.lfa+nfa+cfa.array
                              R>  T:NFA.QUEUE*  T:NFA.QUEUE.COUNTER* @  +  !  4  T:NFA.QUEUE.COUNTER*  +!  >R      \ CFA'=T:ADDR
  former.T:NFA.QUEUE.addr* @      T:NFA.QUEUE*  T:NFA.QUEUE.COUNTER* @  +  !  4  T:NFA.QUEUE.COUNTER*  +!          \ LFA'
  T:NFA.QUEUE.COUNTER* @   former.T:NFA.QUEUE.addr*     !    R@                                                    \
\ T:NFA.QUEUE.COUNTER* @   cp0'*  @     last'   !
  T:NFA.QUEUE.COUNTER* @          T:NFA.QUEUE*  +      C!                     1  T:NFA.QUEUE.COUNTER*  +!          \ LENGTH
  T:NFA.QUEUE.COUNTER* @          T:NFA.QUEUE*  +      dup   name.in.nfa.queue     !  R@      CMOVE                \ NAME
  T:NFA.QUEUE.COUNTER* @   R>  +  4*? @  if  aligned(4*)  then                   T:NFA.QUEUE.COUNTER*   !  ;
\ ===================================================================
: JAM.INTO.T:NFA.QUEUE.rom/ram   ( ADDR  LENGTH  HERE'/here* ... )  dup   RAM.START  @    RAM.END  @  between
  if      JAM.INTO.T:NFA.QUEUE*
  else    JAM.INTO.T:NFA.QUEUE
  then    ;

VARIABLE   p:NFA.QUEUE.LENGTH            4000     p:NFA.QUEUE.LENGTH  !
CREATE     p:NFA.QUEUE                            p:NFA.QUEUE.LENGTH  @  ALLOT
VARIABLE   p:NFA.QUEUE.COUNTER
VARIABLE   former.p:NFA.QUEUE.addr
: ERASE.p:NFA.QUEUE     p:NFA.QUEUE               p:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.p:NFA.QUEUE

VARIABLE   defer':NFA.QUEUE.LENGTH            4000     defer':NFA.QUEUE.LENGTH  !
CREATE     defer':NFA.QUEUE                            defer':NFA.QUEUE.LENGTH  @  ALLOT
VARIABLE   defer':NFA.QUEUE.COUNTER
VARIABLE   former.defer':NFA.QUEUE.addr
: ERASE.defer':NFA.QUEUE     defer':NFA.QUEUE          defer':NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.defer':NFA.QUEUE


: JAM.INTO.defer':NFA.QUEUE   ( ADDR  LENGTH  HERE' ... )
                                 defer':NFA.QUEUE  defer':NFA.QUEUE.COUNTER @  +  !   4  defer':NFA.QUEUE.COUNTER  +!  >R      \ CFA'=T:ADDR
  former.defer':NFA.QUEUE.addr @   \  head.Forth?  @  not  if   HEAD.START   @   +  then
                                 defer':NFA.QUEUE  defer':NFA.QUEUE.COUNTER @  +  !   4  defer':NFA.QUEUE.COUNTER  +!          \ LFA'
  defer':NFA.QUEUE.COUNTER @   former.defer':NFA.QUEUE.addr     !    R@                                                   \
  defer':NFA.QUEUE.COUNTER @          defer':NFA.QUEUE  +      C!                     1  defer':NFA.QUEUE.COUNTER  +!          \ LENGTH
  defer':NFA.QUEUE.COUNTER @          defer':NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                \ NAME
  defer':NFA.QUEUE.COUNTER @   R>  +  4*? @  if  aligned(4*)  then                  defer':NFA.QUEUE.COUNTER  !  ;


: defer'  ( -- )   bl  word  count  1f  and  here'  JAM.INTO.defer':NFA.QUEUE   -1  32,'   ;
: _  defer'  ( -- )  ;

variable  defer'.start

: dump.defer':NFA.QUEUE  ( -- )      0  >r            #.counter  off
  begin  base @  >r  decimal   \.3f---  cr  ."   ("   #.counter  @    9 u.r  ."  )  "   1  #.counter +!    r>  base  !
         4*?  @  if  r>   3 +  fffffffc  and  >r  then
         10 ?y   r@       dup defer'.start  @ +   8 u.r   defer':NFA.QUEUE   +      @                      0a  u.r  \ pcfa  pointer to cfa'
     cr  10 ?y   r@  4 +  dup defer'.start  @ +   8 u.r   defer':NFA.QUEUE   +      @   defer'.start  @ +  0a  u.r  \ lfa'
     cr  10 ?y   r@  8 +  dup defer'.start  @ +   8 u.r   defer':NFA.QUEUE   +  10  spaces  count  1f  and dup>r   type     \ nfa'
                 r>  9 +  r>  +  dup>r                    defer':NFA.QUEUE.COUNTER  @   >=
  until          r>  drop   ;

: ddnq   dump.defer':NFA.QUEUE  ;

defer  _cfa'>nfa'
defer  _count'
defer  _nfa'>cfa'
defer  _rcall
 \ COMPARE  ( adr1 len1 adr2 len2 -- n )

create   STRING>UPPER.buffer     100 allot

6.14? @  #if  : toUPPER ( char -- char' )  dup 'a' 'z' between  if  0df  and  then  ;  #then

: STRING>UPPER   ( a len -- STRING>UPPER.buffer len )  dup>r  0  ?do  dup  i + c@  toUPPER  STRING>UPPER.buffer  i +  c!  loop  drop  STRING>UPPER.buffer  r>  ;

: defer'>call.cfa' ( adr len -- )   \  swap  defer':NFA.QUEUE  +  swap  \ _cfa'>nfa'  if  _count'  else   exit   then
  0  >r            #.counter  off
  begin    4*?  @  if  r>   3 +  fffffffc  and  >r  then
       r@  8 +     defer':NFA.QUEUE   +   count  1f  and dup>r     STRING>UPPER   3 pick   3 pick  compare \ nfa'
       0=  if      here'    r>  r@  swap    >r   insert{   defer':NFA.QUEUE   +  @  org  _rcall  }insert   then
                   r>  9 +  r>  +  dup>r                   defer':NFA.QUEUE.COUNTER  @   >=
  until            r>  drop        2drop  ;

variable  defer'>call.cfa'?        defer'>call.cfa'?  on

VARIABLE   inst:NFA.QUEUE.LENGTH         8000  inst:NFA.QUEUE.LENGTH  !
CREATE     inst:NFA.QUEUE                      inst:NFA.QUEUE.LENGTH  @  ALLOT
VARIABLE   inst:NFA.QUEUE.COUNTER
VARIABLE   former.inst:NFA.QUEUE.addr
: ERASE.inst:NFA.QUEUE     inst:NFA.QUEUE      inst:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.inst:NFA.QUEUE

VARIABLE   {:NFA.QUEUE.LENGTH            8000     {:NFA.QUEUE.LENGTH  !
CREATE     {:NFA.QUEUE                            {:NFA.QUEUE.LENGTH  @  ALLOT
VARIABLE   {:NFA.QUEUE.COUNTER
VARIABLE   former.{:NFA.QUEUE.addr
: ERASE.{:NFA.QUEUE     {:NFA.QUEUE               {:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.{:NFA.QUEUE

create  header.string         40 allot
:      >header.string         ( a length -- )  dup header.string    c!    header.string    1+  swap  cmove  ;
create  header.string.p       40 allot
:      >header.string.p       ( a length -- )  dup header.string.p  c!    header.string.p  1+  swap  cmove  ;
create  header.string.defer'  40 allot
:      >header.string.defer'  ( a length -- )  dup header.string.p  c!    header.string.p  1+  swap  cmove  ;

VARIABLE   former.p:NFA.QUEUE.addr
: ERASE.p:NFA.QUEUE     p:NFA.QUEUE         p:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.p:NFA.QUEUE

VARIABLE   former.{:NFA.QUEUE.addr
: ERASE.{:NFA.QUEUE     {:NFA.QUEUE         {:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.{:NFA.QUEUE

VARIABLE   former.inst:NFA.QUEUE.addr
: ERASE.inst:NFA.QUEUE     inst:NFA.QUEUE         inst:NFA.QUEUE.LENGTH  @  ERASE  ;
  ERASE.inst:NFA.QUEUE

: JAM.INTO.inst:NFA.QUEUE  ( ADDR  LENGTH  cfa ... )
  inst:NFA.QUEUE.COUNTER @          inst:NFA.QUEUE  +       !                        4  inst:NFA.QUEUE.COUNTER  +!  >R   \ CFA'=inst;ADDR
  former.inst:NFA.QUEUE.addr @      inst:NFA.QUEUE  inst:NFA.QUEUE.COUNTER @  +  !   4  inst:NFA.QUEUE.COUNTER  +!       \ LFA'
  inst:NFA.QUEUE.COUNTER @   former.inst:NFA.QUEUE.addr     !    R@                                                      \
  inst:NFA.QUEUE.COUNTER @          inst:NFA.QUEUE  +      C!                        1  inst:NFA.QUEUE.COUNTER  +!       \ LENGTH
  inst:NFA.QUEUE.COUNTER @          inst:NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                   \ NAME
  inst:NFA.QUEUE.COUNTER @   R>  +  inst:NFA.QUEUE.COUNTER  !
  header.string   dup>r          inst:NFA.QUEUE.COUNTER @        inst:NFA.QUEUE  +   r@  c@ 1+   cmove
                       r> c@ 1+  inst:NFA.QUEUE.COUNTER +!    ;

: JAM.INTO.{:NFA.QUEUE  ( ADDR  LENGTH  cfa ... )
  {:NFA.QUEUE.COUNTER @          {:NFA.QUEUE  +       !                              4  {:NFA.QUEUE.COUNTER  +!  >R      \ CFA'={;ADDR
  former.{:NFA.QUEUE.addr @      {:NFA.QUEUE    {:NFA.QUEUE.COUNTER @  + !           4  {:NFA.QUEUE.COUNTER  +!          \ LFA'
  {:NFA.QUEUE.COUNTER @   former.{:NFA.QUEUE.addr     !    R@                                                            \
  {:NFA.QUEUE.COUNTER @          {:NFA.QUEUE  +      C!                              1  {:NFA.QUEUE.COUNTER  +!          \ LENGTH
  {:NFA.QUEUE.COUNTER @          {:NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                         \ NAME
  {:NFA.QUEUE.COUNTER @   R>  +  {:NFA.QUEUE.COUNTER  !
  header.string   dup>r          {:NFA.QUEUE.COUNTER @        {:NFA.QUEUE  +   r@  c@ 1+   cmove
                       r> c@ 1+  {:NFA.QUEUE.COUNTER +!    ;
\ ---------------------------------------------------------------------------------------------------
VARIABLE former.{{:NFA.QUEUE.addr     \ super Macro instruction
\ variable   name.in.nfa.queue

       : {{:NFA.QUEUE.MAX    1000 ( 200 )  ;
VARIABLE {{:NFA.QUEUE.COUNTER
CREATE   {{:NFA.QUEUE                {{:NFA.QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.{{:NFA.QUEUE  {{:NFA.QUEUE  {{:NFA.QUEUE.MAX  2 CELLS ( 6 ) * ERASE    ;


: JAM.INTO.{{:NFA.QUEUE  ( ADDR  LENGTH  cfa ... )
  {{:NFA.QUEUE.COUNTER @          {{:NFA.QUEUE  +       !                              4  {{:NFA.QUEUE.COUNTER  +!  >R      \ CFA'={{;ADDR
  former.{{:NFA.QUEUE.addr @      {{:NFA.QUEUE    {{:NFA.QUEUE.COUNTER @  + !          4  {{:NFA.QUEUE.COUNTER  +!          \ LFA'
  {{:NFA.QUEUE.COUNTER @   former.{{:NFA.QUEUE.addr     !    R@                                                            \
  {{:NFA.QUEUE.COUNTER @          {{:NFA.QUEUE  +      C!                              1  {{:NFA.QUEUE.COUNTER  +!          \ LENGTH
  {{:NFA.QUEUE.COUNTER @          {{:NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                         \ NAME
  {{:NFA.QUEUE.COUNTER @   R>  +  {{:NFA.QUEUE.COUNTER  !
  header.string   dup>r           {{:NFA.QUEUE.COUNTER @       {{:NFA.QUEUE  +   r@  c@ 1+   cmove
                        r> c@ 1+  {{:NFA.QUEUE.COUNTER +!    ;
\ ---------------------------------------------------------------------------------------------------
: JAM.INTO.p:NFA.QUEUE  ( ADDR  LENGTH  cfa ... )
  p:NFA.QUEUE.COUNTER @          p:NFA.QUEUE  +       !                              4  p:NFA.QUEUE.COUNTER  +!  >R      \ CFA'=p;ADDR
  former.p:NFA.QUEUE.addr @      p:NFA.QUEUE    p:NFA.QUEUE.COUNTER @  + !           4  p:NFA.QUEUE.COUNTER  +!          \ LFA'
  p:NFA.QUEUE.COUNTER @   former.p:NFA.QUEUE.addr     !    R@                                                            \
  p:NFA.QUEUE.COUNTER @          p:NFA.QUEUE  +      C!                              1  p:NFA.QUEUE.COUNTER  +!          \ LENGTH
  p:NFA.QUEUE.COUNTER @          p:NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                         \ NAME
  p:NFA.QUEUE.COUNTER @   R>  +  p:NFA.QUEUE.COUNTER  !
  header.string.p dup>r          p:NFA.QUEUE.COUNTER  @      p:NFA.QUEUE  +   r@  c@ 1+   cmove
                       r> c@ 1+  p:NFA.QUEUE.COUNTER +!    ;

: JAM.INTO.defer':NFA.QUEUE  ( ADDR  LENGTH  cfa ... )
  defer':NFA.QUEUE.COUNTER @          defer':NFA.QUEUE  +       !                              4  defer':NFA.QUEUE.COUNTER  +!  >R      \ CFA'=defer';ADDR
  former.defer':NFA.QUEUE.addr @      defer':NFA.QUEUE    defer':NFA.QUEUE.COUNTER @  + !           4  defer':NFA.QUEUE.COUNTER  +!          \ LFA'
  defer':NFA.QUEUE.COUNTER @   former.defer':NFA.QUEUE.addr     !    R@                                                            \
  defer':NFA.QUEUE.COUNTER @          defer':NFA.QUEUE  +      C!                              1  defer':NFA.QUEUE.COUNTER  +!          \ LENGTH
  defer':NFA.QUEUE.COUNTER @          defer':NFA.QUEUE  +      dup   name.in.nfa.queue    !  R@      CMOVE                         \ NAME
  defer':NFA.QUEUE.COUNTER @   R>  +  defer':NFA.QUEUE.COUNTER  !
  header.string.defer' dup>r          defer':NFA.QUEUE.COUNTER  @      defer':NFA.QUEUE  +   r@  c@ 1+   cmove
                       r> c@ 1+  defer':NFA.QUEUE.COUNTER +!    ;
\ ^^^^^^^^^^^^^^^^^^^  ???????????
: <-macro        ( -- )  here'  dup>r  last @   name>  dup>r   execute  here'  over  - ( a length )  r>  rot a'>a -rot  JAM.INTO.{:NFA.QUEUE   r> org ;
: <-p     ( -- )  here  8 -  4  last @   name>  JAM.INTO.p:NFA.QUEUE   ;

: <-macro.SUPPER ( -- )  here'  dup>r  last @   name>  dup>r   execute  here'  over  - ( a length )  r>  rot a'>a -rot  JAM.INTO.{{:NFA.QUEUE  r> org ;


:  data:QUEUE.MAX   20000  ;

VARIABLE data:QUEUE.COUNTER
CREATE   data:QUEUE              data:QUEUE.MAX  2 CELLS ( 6 ) * ALLOT
:  ERASE.data:QUEUE  data:QUEUE  data:QUEUE.MAX  2 CELLS ( 6 ) * ERASE    data:QUEUE.COUNTER off ;
   ERASE.data:QUEUE

:  >data:QUEUE    ( a' -- )  data:QUEUE.COUNTER  @   data:QUEUE.max  >=  abort" **** data.queue is not big enough ( 64k )****
               data:QUEUE    data:QUEUE.COUNTER  @  +    !    4  data:QUEUE.COUNTER  +!  ;

0  value  (a')
variable  addr(data.from)

:  >data:QUEUE    ( a' from -- )  data:QUEUE.COUNTER  @   data:QUEUE.max  >=  abort" **** data.queue is not big enough ( 64K )****
    swap  data:QUEUE    data:QUEUE.COUNTER  @  +   2!    8  data:QUEUE.COUNTER  +!  ;




VARIABLE  S"=?

: S"= ( STRING1 STRING2 ... F )   ROT OVER =     \ STRING == ADDR LENGTH
  IF    0     -1 S"=? !   \ ADDR1 ADDR2 LENGTH   \ LENGTH = LENGTH1 = LENGTH2
        DO    OVER I + C@   OVER I + C@  <>
              IF     0 S"=? !   LEAVE
              THEN
        LOOP  2DROP    S"=? @
  ELSE  2DROP DROP   0
  THEN  ;

'  s"=  is  _s"=

: S"=(caseLESS)  ( STRING1 STRING2 ... F )   ROT OVER =     \ STRING == ADDR LENGTH
  IF    0     -1 S"=? !   \ ADDR1 ADDR2 LENGTH   \ LENGTH = LENGTH1 = LENGTH2
        DO    OVER I + C@  upc  OVER I + C@  upc  <>
              IF     0 S"=? !   LEAVE
              THEN
        LOOP  2DROP    S"=? @
  ELSE  2DROP DROP   0
  THEN  ;

: S=(caseLESS)   S"=(caseLESS)  ;
: S=    S"=      ;
: S<>   S=  NOT  ;

variable  head.line
variable  head.counter

: DUMP.HEAD.IMAGE  ( ... )    former.T:NFA.QUEUE.addr @        head.counter off
  BEGIN   KEY?  IF   DROP  EXIT   THEN                       1 head.counter  +!
          CR    base @  >r   decimal  head.counter @  ." ("  4  .r  ."  )"   r> base !
                DUP  T:NFA.QUEUE  +  8  -   @   0A U.R               \ T:ADDR   cfa'
                DUP  T:NFA.QUEUE  +  4  -   @   0A U.R   9 SPACES    \ LFA
                DUP  T:NFA.QUEUE  +  count  1f  and TYPE    ( .NAME )        \ NAME
                     T:NFA.QUEUE  +  4  -   @   ?DUP  0=
  UNTIL   ;

: DUMP.HEAD.IMAGE.msp430  ( ... )    former.T:NFA.QUEUE.addr @     cr   1 head.line  !  50 ?y     head.counter off
  BEGIN   1 head.counter +!
          getxy drop 38 > if cr ." ("  base @ >r  decimal  head.line @  1 head.line +!  4 .r  r> base !  ."  )" then   2 spaces
                DUP  T:NFA.QUEUE  +  count  1f  and TYPE    ( .NAME )        \ NAME
                     T:NFA.QUEUE  +  4  -   @   ?DUP  0=
  UNTIL  ;


variable  cfa'>.ID?
variable  cfa.inst>.ID?

: is.it.doLIT/branch/nex./abor./."|/s"|/...?(cfa')  ( cfa' -- f )
   case   cfa'.of.doLIT     @   of   -1   endof
          cfa'.of.branch    @   of   -1   endof
          cfa'.of.?branch   @   of   -1   endof
          cfa'.of.nex.      @   of   -1   endof
          cfa'.of.abor."    @   of   -1   endof
          cfa'.of.."|       @   of   -1   endof
          cfa'.of.$"|       @   of   -1   endof
          cfa'.of.(do)      @   of   -1   endof
          cfa'.of.(loop)    @   of   -1   endof
          cfa'.of.(+loop)   @   of   -1   endof

          cfa'.of.doLIT*    @   of   -1   endof
          cfa'.of.branch*   @   of   -1   endof
          cfa'.of.?branch*  @   of   -1   endof
          cfa'.of.nex.*     @   of   -1   endof
          cfa'.of.abor."*   @   of   -1   endof
          cfa'.of.."|*      @   of   -1   endof
          cfa'.of.$"|*      @   of   -1   endof
          cfa'.of.(do)      @   of   -1   endof
          cfa'.of.(loop)    @   of   -1   endof
          cfa'.of.(+loop)   @   of   -1   endof

          cfa'.of.IF       @   of    1   endof
          cfa'.of.ELSE     @   of    1   endof
          cfa'.of.THEN     @   of    1   endof
          cfa'.of.BEGIN    @   of    1   endof
          cfa'.of.WHILE    @   of    1   endof
          cfa'.of.REPEAT   @   of    1   endof
          cfa'.of.UNTIL    @   of    1   endof
          cfa'.of.AGAIN    @   of    1   endof
          cfa'.of.AHEAD    @   of    1   endof
                                     0   swap
  endcase  ;

variable  .":"?         .":"?  on

: .":"  ( a' -- )  dup>r   is.it.doLIT/branch/nex./abor./."|/s"|/...?(cfa')  \  ?dup                     \ ???????????
  r>     cfa'.of.nex. @   =   if  drop  then     .":"?  @   and
  if     case  -1  of  '''   emit   endof
                1  of  ','   emit   endof
         endcase
  then  .":"?  off  ;  \  one shot

variable  cfa'.temp

: CFA'IN.NFA.QUEUE?  ( new )   ( cfa' -- f )    cfa'.temp  !    0  >r     #.counter  off
  begin        1  #.counter +!               4*?  @    if  r>   3 +  fffffffc  and  >r  then
     r@        T:NFA.QUEUE   +   @    cfa'.temp   @ =  if  r>drop  -1  exit    then
     r@  8 +   T:NFA.QUEUE   +   count  1f  and  nip  9 +  r>  +  dup>r  4*?  @  if  3 +  fffffffc  and  then
               T:NFA.QUEUE.COUNTER   @   >=
  until        r>drop                                           0  >r     #.counter  off
  begin        1  #.counter +!               4*?  @    if  r>   3 +  fffffffc  and  >r  then
     r@        T:NFA.QUEUE*  +   @    cfa'.temp   @ =  if  r>drop  -1  exit then  \ pcfa  pointer to cfa'
     r@  8 +   T:NFA.QUEUE*  +   count  1f  and  nip  9 +  r>  +  dup>r  4*?  @  if  3 +  fffffffc  and  then
               T:NFA.QUEUE.COUNTER*  @   >=
  until        r>drop    0   ;




: CFA'>.ID          ( new )   ( cfa' -- f )    cfa'.temp  !    0  >r     #.counter  off
  begin        1  #.counter +!               4*?  @    if  r>   3 +  fffffffc  and  >r  then
     r@        T:NFA.QUEUE   +   @    cfa'.temp   @ =
if   r>  8 +   T:NFA.QUEUE   +   count   1f  and  type   cfa'.temp @  .":"   cfa'>.ID?  on   -1  exit
then r@  8 +   T:NFA.QUEUE   +   count   1f  and  nip  9 +  r>  +  dup>r  4*?  @  if  3 +  fffffffc  and  then
               T:NFA.QUEUE.COUNTER   @   >=
  until        r>drop                                           0  >r     #.counter  off
  begin        1  #.counter +!               4*?  @    if  r>   3 +  fffffffc  and  >r  then
     r@        T:NFA.QUEUE*  +   @    cfa'.temp   @ =
if   r>  8 +   T:NFA.QUEUE*  +   count   1f  and  type   cfa'.temp @  .":"   cfa'>.ID?  on   -1  exit
then r@  8 +   T:NFA.QUEUE*  +   count   1f  and  nip  9 +  r>  +  dup>r  4*?  @  if  3 +  fffffffc  and  then
               T:NFA.QUEUE.COUNTER*  @   >=
  until        r>drop    0   ;

:   xfa'>n(lnc)  (  xfa'-- n -1 / 0 )   >r   0   r@
    lfa+nfa+cfa.counter @     0
    do      dup     i   lfa+nfa+cfa.array   +      head.spacing   @   +    10  -    @    =
            if      2drop    i    -1    0   leave
            then    head.spacing  @
    +loop   drop    dup   0=   if   r>  swap   else   r>drop   then   ;

variable    xfa'.match?
variable    xfa.offset

: xfa'>n(lnc)   ( xfa' -- n -1 / 0 )   xfa'.match?  off
  lfa+nfa+cfa.counter @   0
  ?do     dup     i   xfa.offset  @  +   @   =
          if      i   swap   xfa'.match?   on  leave
          then    head.spacing  @
  +loop   drop    xfa'.match?   @  ;

: >xfa.offset  ( n -- )     lfa+nfa+cfa.array  +  xfa.offset  !  ;

: lfa'   0  ;
: nfa'   8  ;
: cfa'   head.spacing  @   10  -  ;

: lfa'>n(lnc)  ( lfa' -- n -1 / 0 )  lfa'  >xfa.offset   xfa'>n(lnc)  ;
: nfa'>n(lnc)  ( nfa' -- n -1 / 0 )  nfa'  >xfa.offset   xfa'>n(lnc)  ;
: cfa'>n(lnc)  ( cfa' -- n -1 / 0 )  cfa'  >xfa.offset   xfa'>n(lnc)  ;

: n>lfa'(lnc)  ( n -- lfa'  )  LFA+NFA+CFA.ARRAY  +                       8  +  @  4  -  ;
: n>nfa'(lnc)  ( n -- nfa'  )  LFA+NFA+CFA.ARRAY  +                @      2  +           ;
: n>nfa'(lnc)  ( n -- nfa'  )  LFA+NFA+CFA.ARRAY  +  8  +          @                     ;
: n>cfa'(lnc)  ( n -- cfa'  )  LFA+NFA+CFA.ARRAY  +  head.spacing  @  +  10  -  @        ;

: lfa'>nfa'(lnc)  ( lfa' -- nfa' -1 / 0 )  lfa'>n(lnc)  dup  if  n>nfa'(lnc)  -1  then  ;
: lfa'>cfa'(lnc)  ( lfa' -- cfa' -1 / 0 )  lfa'>n(lnc)  dup  if  n>cfa'(lnc)  -1  then  ;

: nfa'>lfa'(lnc)  ( nfa' -- lfa' -1 / 0 )  nfa'>n(lnc)  dup  if  n>lfa'(lnc)  -1  then  ;
: nfa'>cfa'(lnc)  ( nfa' -- cfa' -1 / 0 )  nfa'>n(lnc)  dup  if  n>cfa'(lnc)  -1  then  ;

: cfa'>lfa'(lnc)  ( cfa' -- lfa' -1 / 0 )  cfa'>n(lnc)  if  n>lfa'(lnc)  -1  else  0  then  ;
: cfa'>nfa'(lnc)  ( cfa' -- nfa' -1 / 0 )  cfa'>n(lnc)  if  n>nfa'(lnc)  -1  else  0  then  ;

: CFA'IN.NFA.QUEUE?   ( new )   ( cfa' -- f )     0   GET.TOTAL.WORDS(ADJACENT)   0
  do     over  i  head.spacing  @  *  N>CFA'(LNC)  =  if   drop  -1  leave  then
  loop   nip   ;

: CFA'>.ID          ( new )   ( cfa' -- f )    cfa'.temp  !    0  >r     #.counter  off
  begin        1  #.counter +!               4*?  @    if  r>   3 +  fffffffc  and  >r  then
     r@        T:NFA.QUEUE   +   @    cfa'.temp   @ =
if   r>  8 +   T:NFA.QUEUE   +   count   1f  and  type   cfa'.temp @  .":"   cfa'>.ID?  on   -1  exit
then r@  8 +   T:NFA.QUEUE   +   count   1f  and  nip  9 +  r>  +  dup>r  4*?  @  if  3 +  fffffffc  and  then
               T:NFA.QUEUE.COUNTER   @   >=
  until        r>drop                                           0  >r     #.counter  off
  begin        1  #.counter +!               4*?  @    if  r>   3 +  fffffffc  and  >r  then
     r@        T:NFA.QUEUE*  +   @    cfa'.temp   @ =
if   r>  8 +   T:NFA.QUEUE*  +   count   1f  and  type   cfa'.temp @  .":"   cfa'>.ID?  on   -1  exit
then r@  8 +   T:NFA.QUEUE*  +   count   1f  and  nip  9 +  r>  +  dup>r  4*?  @  if  3 +  fffffffc  and  then
               T:NFA.QUEUE.COUNTER*  @   >=
  until        r>drop    0   ;

: count' ( a' -- a+1' n )   dup   1+      swap  c@'   ;  \ a'>a  count 1f and
: type'  ( a' n ------- )   swap  a'>a    swap  type  ;

: CFA'>.ID           ( new )   ( cfa' -- f )
  dup   CFA'IN.NFA.QUEUE? 
  if    CFA'>NFA'(LNC)
     if  ?dup
        if   dup  -1  =
             if    2drop    0   exit
             else  count'  1f   and  type'
             then
        then
     then  -1
  else  drop   0
  then  ;

defer  _N>.ID(LNC)

: NFA'>.ID(LNC)  ( nfa' -- )   NFA'>N(LNC)     if  _N>.ID(LNC)     then  ;   \ ?????????
            
headless.tF(ice40)?  @
#if     : cfa'>.id(LNC)  ( cfa' -- )   cfa'>n(LNC)     if    _n>.id(LNC)   then  ;  \ ice40
#else   : CFA'>.ID(LNC)  ( cfa' -- )   cfa'>nfa'(lnc)  if  NFA'>.ID(LNC)   then  ;
#then

: NFA'>.ID       ( nfa' -- )   NFA'>N(LNC)     if  _N>.ID(LNC)     then  ;   \ ?????????
: CFA'>.ID*      ( cfa' -- )   CFA'>N(LNC)     if  _N>.ID(LNC)     then  ;   \ ?????????

: CFA'>.ID????????       ( cfa' -- f )
  dup     CFA'IN.NFA.QUEUE?
  if      dup    CFA'>NFA'(LNC)
     if  ?dup
        if   dup   -1  =
             if    drop    CFA'>.ID*    -1  exit
             else  count'  1f   and  type'  drop
             then
        then
     then    drop  -1
  else       drop   0
  then  ;

: cfa.in.inst.NFA.QUEUE?   ( cfa -- f )   inst:NFA.QUEUE     cfa.inst>.ID?  off
  inst:NFA.QUEUE.counter  @   8  /    0
  ?do     2dup     @  =
     if            cfa.inst>.ID?  on    leave
     then          8  +  count  1f  and   +   4*?  @    if   aligned(4*)    then
  loop    2drop    cfa.inst>.ID?  @  ;

: cfa.inst>.ID   ( cfa -- f )  inst:NFA.QUEUE     cfa.inst>.ID?  off  \   '. swapb.r  cfa.inst>.ID  .. -1
  inst:NFA.QUEUE.counter  @   8  /    0
  ?do     2dup     @  =
     if    dup     8  +  count  1f  and   type     cfa.inst>.ID?  on    leave
     then          8  +  count  1f  and   +   4*?  @    if   aligned(4*)    then
  loop    2drop    cfa.inst>.ID?  @  ;

: show.cfa  ( cfa' -- )  show.cfa?  @   .(.8a?  @  and  if  5e ( 51 ) ?y  ." \ cfa= " 8 u.r  else   drop  then  ;

: show.cfa+comment  ( cfa' -- )  dup  _cfa'>nfa'  if  show.comment  then   show.cfa  ;

: \.48---   ."   \ "  48  0  do  '-' emit  loop  ;

variable  first.layer?

defer  _(.12345678..12345678.......)
defer  _(.12345678..55.66.77.88.99.AA.)NFA

\ defer  _cfa'>head(lnc)

: cfa'>head  ( cfa'-- )   mecrisp32F429/407?  @  not  if   dup  3   and  2  =  if   drop   exit  then   ( aligned.4*  instead of even.aligned )  then
  dup>r    T:NFA.QUEUE
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @      -   -2 0 between
     if         \.3f---.no.cr      layer  off     first.layer?  on   cr  make.macro? @ if  ." \"  then
          head.forth?  @
       if       dup    @  _cfa'>nfa'
          if    dup    8  -      _(.12345678..12345678.......)        \ pcfa
                dup    4  -  cr  _(.12345678..12345678.......)        \ lfa
                dup          cr  _(.12345678..55.66.77.88.99.AA.)NFA  \ nfa
                cr  \.48---  cr
                40 ?y   c@'  dup  80 and  if  ."   immediate" then  dup  40 and if ."   compile-only"  then   20 and if ."   smudge"  then
          then
       then     23 ( 1e )  ?y  ."  t:  "  dup  8  +  count  1f  and   type   over  show.cfa+comment    cr     leave
     then                                      8  +  count  1f  and   +     4*? @  if   aligned(4*)    else   aligned(2*)  then
  loop      2drop         r>       T:NFA.QUEUE*
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @      -   -2 0 between
     if         \.3f---.no.cr      layer  off     first.layer?  on   cr  make.macro? @ if  ." \"  then
          head.forth?  @
       if       dup    @  _cfa'>nfa'
          if    dup    8  -      _(.12345678..12345678.......)        \ pcfa
                dup    4  -  cr  _(.12345678..12345678.......)        \ lfa
                dup          cr  _(.12345678..55.66.77.88.99.AA.)NFA  \ nfa
                cr  \.48---  cr
                40 ?y   c@'  dup  80 and  if  ."   immediate" then  dup  40 and if ."   compile-only"  then   20 and if ."   smudge"  then
          then
       then     23 ( 1e )  ?y  ."  t:  "  dup  8  +  count  1f  and   type   over  show.cfa+comment    cr     leave
     then                                      8  +  count  1f  and   +     4*? @  if   aligned(4*)    else   aligned(2*)  then
  loop    2drop    ;




mecrisp32F429/407?  @
#if
: cfa'>head  ( cfa'-- )   mecrisp32F429/407?  @  not  if   dup  3   and  2  =  if   drop   exit  then   ( aligned.4*  instead of even.aligned )  then
  dup>r    T:NFA.QUEUE
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @      -   -2 0 between
     if         \.3f---.no.cr      layer  off     first.layer?  on   cr  make.macro? @ if  ." \"  then
          head.forth?  @
       if       dup    @  _cfa'>nfa'
          if    dup    8  -      _(.12345678..12345678.......)        \ pcfa
                dup    4  -  cr  _(.12345678..12345678.......)        \ lfa
                dup          cr  _(.12345678..55.66.77.88.99.AA.)NFA  \ nfa
                cr  \.48---  cr
                40 ?y   c@'  dup  80 and  if  ."   immediate" then  dup  40 and if ."   compile-only"  then   20 and if ."   smudge"  then
          then
       then     23 ( 1e )  ?y  ."  t:  "  dup  8  +  count  1f  and   type   over  show.cfa+comment    cr     leave
     then                                      8  +  count  1f  and   +     4*? @  if   aligned(4*)    else   aligned(2*)  then
  loop      2drop         r>       T:NFA.QUEUE*
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @      -   -2 0 between
     if         \.3f---.no.cr      layer  off     first.layer?  on   cr  make.macro? @ if  ." \"  then
          head.forth?  @
       if       dup    @  _cfa'>nfa'
          if    dup    8  -      _(.12345678..12345678.......)        \ pcfa
                dup    4  -  cr  _(.12345678..12345678.......)        \ lfa
                dup          cr  _(.12345678..55.66.77.88.99.AA.)NFA  \ nfa
                cr  \.48---  cr
                40 ?y   c@'  dup  80 and  if  ."   immediate" then  dup  40 and if ."   compile-only"  then   20 and if ."   smudge"  then
          then
       then     23 ( 1e )  ?y  ."  t:  "  dup  8  +  count  1f  and   type   over  show.cfa+comment    cr     leave
     then                                      8  +  count  1f  and   +     4*? @  if   aligned(4*)    else   aligned(2*)  then
  loop    2drop    ;
#then



mecrisp32F429/407?  @
#if
: cfa'>head  ( cfa'-- )   mecrisp32F429/407?  @  not  if   dup  3   and  2  =  if   drop   exit  then   ( aligned.4*  instead of even.aligned )  then
  dup>r    T:NFA.QUEUE
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @      -    0=  \  -2 0 between
     if         \.3f---.no.cr      layer  off     first.layer?  on   cr  make.macro? @ if  ." \"  then
          head.forth?  @
       if       dup    @  _cfa'>nfa'
          if    dup    8  -      _(.12345678..12345678.......)        \ pcfa
                dup    4  -  cr  _(.12345678..12345678.......)        \ lfa
                dup          cr  _(.12345678..55.66.77.88.99.AA.)NFA  \ nfa
                cr  \.48---  cr
                40 ?y   c@'  dup  80 and  if  ."   immediate" then  dup  40 and if ."   compile-only"  then   20 and if ."   smudge"  then
          then
       then     23 ( 1e )  ?y  ."  t:  "  dup  8  +  count  1f  and   type   over  show.cfa+comment    cr     leave
     then                                      8  +  count  1f  and   +     4*? @  if   aligned(4*)    else   aligned(2*)  then
  loop      2drop         r>       T:NFA.QUEUE*
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @      -    0=  \   -2 0 between
     if         \.3f---.no.cr      layer  off     first.layer?  on   cr  make.macro? @ if  ." \"  then
          head.forth?  @
       if       dup    @  _cfa'>nfa'
          if    dup    8  -      _(.12345678..12345678.......)        \ pcfa
                dup    4  -  cr  _(.12345678..12345678.......)        \ lfa
                dup          cr  _(.12345678..55.66.77.88.99.AA.)NFA  \ nfa
                cr  \.48---  cr
                40 ?y   c@'  dup  80 and  if  ."   immediate" then  dup  40 and if ."   compile-only"  then   20 and if ."   smudge"  then
          then
       then     23 ( 1e )  ?y  ."  t:  "  dup  8  +  count  1f  and   type   over  show.cfa+comment    cr     leave
     then                                      8  +  count  1f  and   +     4*? @  if   aligned(4*)    else   aligned(2*)  then
  loop    2drop    ;


#then                

: .id'(t:)    ( cfa'-- )  T:NFA.QUEUE
  T:QUEUE.counter  @   8  /    0
  ?do     2dup     @  =
     if                          dup  8  +  count  1f  and  type        leave
     then                             8  +  count  1f  and  +     4*?  @   if   aligned(4*)    then
  loop    2drop    ;

: emit.port.name' ( port -- f )  >r   former.p:NFA.QUEUE.addr  @   p:NFA.QUEUE   +
  begin   4 -  @   dup  0<>
  while   p:NFA.QUEUE  +  dup  1+   @   r@  =
      if   r>drop  ( getxy 2>r  55 ?y ." \ " )  5  +  count   type  ( 2r> gotoxy )  -1  exit
      then
  repeat   r>drop  drop  0  ;

' emit.port.name'  is  _emit.port.name'

variable  total.of.name.of.#.to.print

: emit.port.name ( port -- )  >r   former.p:NFA.QUEUE.addr  @   p:NFA.QUEUE   +
  begin   4 -  @   dup  0<>
  while   p:NFA.QUEUE  +  dup  1+   @   r@  =
     if   r>drop   getxy  2>r  total.of.name.of.#.to.print  @  1  =
         if    65 ?y   15 spaces   67 ?y
         else  70 ?y ." \ "
         then  5  +  count   type  2r> gotoxy  1 total.of.name.of.#.to.print +!   exit
     then
  repeat  drop  r>drop  ;

: dump.port.name  ( ------- ) ( cls )  former.p:NFA.QUEUE.addr  @   p:NFA.QUEUE   +
  begin   4 -  @   dup  0<>
  while   p:NFA.QUEUE  + dup   cr ."   :p  "  5  +  count   type  dup 1 + @  28 ?y  9 u.r  ."   p; "
  repeat  drop  r>drop   ;

' emit.port.name  is  _emit.port.name

variable  CFA'.OF._T:?

: CFA'>NFA   ( CFA' ... NFA' -1 /0 )  0 CFA'.OF._T:?  !
        T:QUEUE.MAX   2 CELLS  ( 6 ) *  0
        DO     DUP    T:QUEUE  I + ( 2 + ) @  ( 16@ ) =
               IF     T:QUEUE  I +  CELL ( 2 ) +  @   -1 CFA'.OF._T:?  !  SWAP  LEAVE
               THEN   2 CELLS  ( 6 )
       +LOOP   DROP        CFA'.OF._T:?  @   ;

: CFA'>CFA    CFA'>NFA   IF   NAME>  -1  ELSE  0  THEN  ;

VARIABLE   ENGLISH?     ENGLISH? ON
variable  (cfa')

: CFA'>NFA'  ( cfa' -- nfa' -1 / 0 )   dup>r  (cfa')   !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@        T:NFA.QUEUE   +  @    (cfa')  @  =
     if      r>  8 +   head.start  @ +     -1      r>drop    exit
     then    r@  8 +   T:NFA.QUEUE   +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER  @   >=
  until          r>drop                  r>  (cfa')   !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@        T:NFA.QUEUE*  +  @    (cfa')  @  =
     if      r>  8 +   head.start* @ +     -1   exit
     then    r@  8 +   T:NFA.QUEUE*  +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER* @   >=
  until          r>  drop     0  ;

variable   addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*

: CFA'>NFA'+NFA'.in.t:nfa.queue   ( cfa' -- nfa' NFA'.t:nfa.queue -1 / 0 )    dup  0=  if  exit  then
  addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*  off
  dup>r  (cfa')   !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@        T:NFA.QUEUE   +  @    (cfa')  @  =
     if      r@        T:NFA.QUEUE   +  addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*  !
             r>  8 +   head.start  @ +     -1      r>drop    exit
     then    r@  8 +   T:NFA.QUEUE   +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER  @   >=
  until          r>drop                  r>  (cfa')   !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@        T:NFA.QUEUE*  +  @    (cfa')  @  =
     if      r@        T:NFA.QUEUE*  +  addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*  !
             r>  8 +   head.start* @ +     -1   exit
     then    r@  8 +   T:NFA.QUEUE*  +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER* @   >=
  until          r>  drop     0  ;

: CFA'>addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*   ( cfa' -- NFA'.in.t:nfa.queue -1 / 0 )   dup  0=  if  exit  then
  addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*  off
  dup>r  (cfa')   !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@        T:NFA.QUEUE   +  @    (cfa')  @  =
     if      r>        T:NFA.QUEUE   +  8  + \   addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*  !
           ( r>  8 +   head.start  @ +  )   -1      r>drop    exit
     then    r@  8 +   T:NFA.QUEUE   +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER  @   >=
  until          r>drop                  r>  (cfa')   !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@        T:NFA.QUEUE*  +  @    (cfa')  @  =
     if      r>        T:NFA.QUEUE*  +  8  +
           ( r>  8 +   head.start* @ +  )   -1   exit
     then    r@  8 +   T:NFA.QUEUE*  +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER* @   >=
  until          r>  drop     0  ;

variable  (nfa')

: nfa'>cfa'(queue)  ( nfa' -- cfa -1 / 0 )   dup>r  (nfa')  !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@  8 +   head.start  @ +       (nfa')  @  =
     if      r>        T:NFA.QUEUE   +  @   -1   r>drop  exit
     then    r@  8 +   T:NFA.QUEUE   +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER  @   >=
  until          r>drop   r>                 (nfa')  !     0  >r      #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@  8 +   head.start  @ +       (nfa')  @  =
     if      r>        T:NFA.QUEUE   +  @   -1   exit
     then    r@  8 +   T:NFA.QUEUE   +      count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r      T:NFA.QUEUE.COUNTER  @   >=
  until          r>  drop     0  ;

\ : count' ( a' -- a+1' n )   dup   1+      swap  c@'   ;
\ : type'  ( a' n ------- )   swap  a'>a    swap  type  ;

: even.aligned           ( a1' --- a2' )   1+   fffffffe  and  ;
: multiple.of.4.aligned  ( a1' --- a2' )   3 +  fffffffc  and  ;

: nfa'>cfa'(adjacent)    (  nfa' -- cfa' )  count'  1f  and  +  MULTIPLE.OF.4.ALIGNED  ;
: nfa'>cfa'(adjacent)2*  (  nfa' -- cfa' )  count'  1f  and  +  even.aligned           ;
: nfa'>cfa'(adjacent)4*  (  nfa' -- cfa' )  count'  1f  and  +  MULTIPLE.OF.4.ALIGNED  ;

: nfa'>cfa'   stm32F407eF720?  @  if  nfa'>cfa'(adjacent)4*  else  nfa'>cfa'(adjacent)  then  ;


variable   t:*4?

MECRISP32F429/407?  @
#if
: nfa'>cfa'               nfa'>cfa'(adjacent)2*  ;
: nfa'>cfa'(adjacent)     nfa'>cfa'(adjacent)2*  ;


: nfa'>cfa'               t:*4?  @  if   nfa'>cfa'(adjacent)4*   else   nfa'>cfa'(adjacent)2*  then  ;
: nfa'>cfa'(adjacent)     t:*4?  @  if   nfa'>cfa'(adjacent)4*   else   nfa'>cfa'(adjacent)2*  then  ;

#then



variable  bit.to.convert

: >smudge/immediate/compile-only  ( bit nfa' --  )
  (nfa') !   bit.to.convert !   0   >r   #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@  8 +   head.start  @ +       (nfa')  @  =
     if      r>  8 +   T:NFA.QUEUE   +       dup    c@        bit.to.convert @    or  swap  c!  -1   exit
     then    r@  8 +   T:NFA.QUEUE   +       count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r       T:NFA.QUEUE.COUNTER  @   >=
  until          r>drop         0   >r   #.counter  off
  begin      4*?  @  if  r>   3 +  fffffffc  and  >r  then
             r@  8 +   head.start* @ +       (nfa')  @  =
     if      r>  8 +   T:NFA.QUEUE*  +       dup    c@        bit.to.convert @    or  swap  c!  -1   exit
     then    r@  8 +   T:NFA.QUEUE*  +       count  1f  and   dup>r  2drop
                 r>  9 +  r>  +  dup>r       T:NFA.QUEUE.COUNTER* @   >=
  until          r>drop   -1 abort" *** this nfa' is not valid for smudge/immediate/compile-only bit ***"  ;

: smudge/immediate/compile-only  ( bit -- )  LAST' @  >smudge/immediate/compile-only
  0=  abort" *** not nfa' ???? ***"   ;

\ variable  last'(adjacent)   \  20005440  last'(adjacent)  !

: smudge/immediate/compile-only  ( bit -- )  DUP>R
  LAST' @  >smudge/immediate/compile-only
  LAST'(adjacent)  @   DUP  C@'  R>  OR   SWAP   C!'
  0=  abort" *** not nfa' ???? ***"   ;


: smudge''          20  smudge/immediate/compile-only  ;
: compile-only''    40  smudge/immediate/compile-only  ;
: immediate''       80  smudge/immediate/compile-only  ;


: smudge'           20  smudge/immediate/compile-only  ;
: compile-only'     40  smudge/immediate/compile-only  ;
: immediate'        80  smudge/immediate/compile-only  ;

: cfa'>lfa'  ( cfa' -- lfa' )    CFA'>NFA'   3  -     ;

: CFA>NFA'  ( CFA  ... NFA' )   4 + @  ( CFA>CFA' )  CFA'>NFA'  dup  0=  ABORT"  *** CFA'>NFA' failed *** "  ;

:    .ID(original)        ( NFA .......... )  ?DUP 0<> IF  NAME>  CFA>NFA'  T:NFA.QUEUE  +  count  1f  and   TYPE  THEN  ;
: GET.ID(original).LENGTH ( NFA ... LENGTH )   DUP 0<> IF  NAME>  CFA>NFA'  T:NFA.QUEUE  +  count  1f  and   NIP   THEN  ;
\ **********************************************************************************************************
DEFER  _[J]

create  temp.{{    100  allot
: here'>temp.{{    ( -- )  here'    temp.{{  100  0  do  over  i  +  c@'  over  i  +  c!   loop  2drop  ;
: temp.{{>here'    ( -- )  temp.{{  here'    100  0  do  over  i  +  c@   over  i  +  c!'  loop  2drop  ;

: _HEADER'p     7D0 ( 2000 )    ?MEMCHK BL WORD COUNT 2dup >header.string.p  "HEADER ;
: _HEADER'      7D0 ( 2000 )    ?MEMCHK BL WORD COUNT 2dup >header.string    "HEADER ;
: :{                            PARMS-INIT _HEADER'   HIDE DOCOL , !CSP ] ;
: :{      here'>temp.{{         PARMS-INIT _HEADER'   HIDE DOCOL , !CSP ] ;
: :{{                           PARMS-INIT _HEADER'   HIDE DOCOL , !CSP ] ;
: :{{     here'>temp.{{         PARMS-INIT _HEADER'   HIDE DOCOL , !CSP ] ;

: :p      PARMS-INIT _HEADER'p  HIDE DOCOL , !CSP ] ;

: };            ( -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Methods must END in ;M !"
                ?CSP REVEAL
                PARMS
                IF      COMPILE UNNESTP
                ELSE    COMPILE UNNEST
                THEN    [COMPILE] [ 0 TO PARMS DO-;CHAIN  <-macro         temp.{{>here'  ; IMMEDIATE

: }};            ( -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Methods must END in ;M !"
                ?CSP REVEAL
                PARMS
                IF      COMPILE UNNESTP
                ELSE    COMPILE UNNEST
                THEN    [COMPILE] [ 0 TO PARMS DO-;CHAIN  <-macro.SUPPER  temp.{{>here'  ; IMMEDIATE

: p;            ( -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Methods must END in ;M !"
                ?CSP REVEAL
                PARMS
                IF      COMPILE UNNESTP
                ELSE    COMPILE UNNEST
                THEN    [COMPILE] [ 0 TO PARMS DO-;CHAIN  <-p      ; IMMEDIATE

: [[       here'   ;   \ 1234  16,'
: ]]       here'   over  -  negate  allot'  org   ;

CREATE  :"  80 ALLOT

: CREATE.ANOTHER.COLON.INSTRUCTION        7D0   ?MEMCHK BL WORD    COUNT  >R
  :"   1+   R@  CMOVE        '"'  :"  C!      '"'  R@ 1+  :" +  C!     :"  R>    2 +    "HEADER   DOVAR ,  ;

: CREATE.ACI    CREATE.ANOTHER.COLON.INSTRUCTION  ;

create  temp.mnemonic                  40  allot
: erase.temp.mnemonic   temp.mnemonic  40  erase  ;
: >temp.mnemonic  ( from len -- )    erase.temp.mnemonic  ( from len ) dup  temp.mnemonic  c!   temp.mnemonic 1+  swap  cmove  ;

: CREATE.ANOTHER.COLON.INSTRUCTION.328    7D0   ?MEMCHK BL WORD    COUNT   >R    dup  r@  ( a len ) >temp.mnemonic
  :" ( 1+ ) R@  CMOVE      ( '"'  :"  C!      '"'  R@ 1+  :" +  C! )  :"   R>  ( 2 + )  "HEADER   DOVAR ,  ;

: CREATE.ACI.328    CREATE.ANOTHER.COLON.INSTRUCTION.328   ;

:  8,'  c,'   ;

  :    (CREATE)inst  7D0 ( 2000 ) ?MEMCHK   BL WORD COUNT  2dup  HERE   JAM.INTO.inst:NFA.QUEUE  "HEADER   DOVAR  ,  ; ( headless        )

                              variable  last.nfa'(head).length                      variable  last.cfa'(head)

  :    (CREATE)  7D0 ( 2000 ) ?MEMCHK   BL WORD COUNT  2dup  here'.aligned  HERE'  dup        last.cfa'(head)  !
                 over  last.nfa'(head).length  !  JAM.INTO.T:NFA.QUEUE.rom/ram     "HEADER   DOVAR  ,
                 hp0'   @  ( 20004000 )   T:NFA.QUEUE.COUNTER* @   +   hp'   !   ;





  :    (CREATE)'''''''''''  7D0 ( 2000 ) ?MEMCHK   BL WORD COUNT  2dup  here'.aligned  HERE'  dup        last.cfa'(head)  !
                 over  last.nfa'(head).length  !  JAM.INTO.T:NFA.QUEUE.rom/ram     "HEADER   DOVAR  ,
                 hp0'   @  ( 20004000 )   T:NFA.QUEUE.COUNTER* @   +   hp'   !
                 TEMP.MNEMONIC   LFA+NFA+CFA.ARRAY  10  +  ( to = nfa.in.lnc )  head.spacing  @  20  - ( length ) cmove  ;






  :    (CREATE)'     7D0 ( 2000 ) ?MEMCHK   BL WORD COUNT  2dup  2dup + 1-  dup  c@ 80 or  swap  c!
           HERE'   JAM.INTO.T:NFA.QUEUE.rom/ram    "HEADER   DOVAR  ,  ; ( headless        )
\ -------------------------------------------------------------------------------------------------------------
defer  _24#>5..10#2.j.j11#

cortex.m4?  @   mips32?  @   and
#if     : ,'.call.addr'  ( cfa' -- )   dup>r   32@'  ffff  and  10 N.BIT.EXTEND>32BIT   r>  4 +  +   op.code.of.rcall  @  +  32,'  ;
        : ,'.call.addr'  ( cfa' -- )   here' 4 +  -  4 /  ffff  and  op.code.of.rcall  @  +  32,'  ;
#else   : ,'.call.addr'  ( cfa' -- )   _24#>5..10#2.j.j11#   op.code.of.call  @   +   0~15<->16~31  32,'  ;
#then

\  ,nop   cortex.m0?  @  if  b080  else  bf00  then  16,'  ;
:  ,nop                      b080                    16,'  ;   \  rp-0  status flags are not affected.

: T:   \ headless tForth
          >IN @  >R     CREATE.ACI   HERE'  ,   _[J]     R>  >IN !
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +     !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +  CELL  +  !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!
          here'    here'(t:)  !
          DOES>    @  op.code.of.call @  ( 12b0 ) ( As=3 R0 )  0~15<->16~31  32,'  ;  \  16,'  16,'  ;   \  (r0+)  ( RCALL ) CALL'    ;

: 24rel.check.cm4  ( a' -- 24# )  here'   4+  -  dup  -7ffffff  7ffffff  between  not abort" **** relative jump should be within 24# ****"  2/  ;

: T:      here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +     !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +  CELL  +  !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!
          here'    here'(t:)  !
          DOES>  \ here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
\         DOES>    dup  @  here' - abs 0fffff > if  @  0  10000 um/mod swap 1+ 0 swap _R=#16  ?dup if 0 swap _Rt=# then  0  _call_r   exit   then

                   @    24rel.check.cm4    _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;  \  16,'    16,'  ;   \  (r0+)  ( RCALL ) CALL'    ;

variable  pcfa'
variable  cfa'.of.doCOLON
variable  cfa'.of.exit
variable  code.of.ret'
variable  code.of.end-code

: ef:     last' @  32,' ( lfa' )  ( ff 8,' )   here'  last'  !         \  from avr328
          >IN @  >R     CREATE.ACI.328         HERE'  ,   _[J]     R>  >IN  !
          last  @  nfa-count  dup 8,'   dup>r  here'  a'>a   swap  cmove  r>   allot'  here'.even.aligned  \ nfa
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +           !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +  CELL  +  !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!
          here'   here'(t:)  !     4000e92d  32,'  ( ,push're )
          DOES>   @    24rel.check.cm4    _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;  \  16,'    16,'  ;   \  (r0+)  ( RCALL ) CALL'    ;


: ef:'    last' @  32,' ( lfa' )  ( ff 8,' )   here'  last'  !         \  from avr328
          >IN @  >R     CREATE.ACI.328         HERE'  ,   _[J]     R>  >IN  !
          last  @  nfa-count  dup 8,'   dup>r  here'  a'>a   swap  cmove  r>   allot'  here'.even.aligned  \ nfa
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +           !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +  CELL  +  !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!
          here'   here'(t:)  !
          DOES>   @    24rel.check.cm4    _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;  \  16,'    16,'  ;   \  (r0+)  ( RCALL ) CALL'    ;



: ef;     bd00      16,'  ;   \    pc pop{}

: ef:'    t:  ;


: T:'  \ headless tForth
          >IN @  >R     CREATE.ACI   HERE'  ,   _[J]     R>  >IN !
          (CREATE)' HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +     !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +  CELL  +  !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!
          DOES>    @  op.code.of.call @  0~15<->16~31  32,'  ;  \   ( 12b0 ) ( As=3 R0 )   16,'  16,'  ;   \  (r0+)  ( RCALL ) CALL'    ;

: 32:  t:  ;
\ ------------------------------------------------------------------------------------------------
: 2+  2 + ;   : 2-  2 - ;
: 3+  3 + ;   : 3-  3 - ;
: 4+  4 + ;   : 4-  4 - ;
: 5+  5 + ;   : 5-  5 - ;

variable  former.instruction's.nfa
variable  instruction.n

: nfa'>lfa'(mecrisp)  (  nfa' -- lfa' )  1+  count'  +  even.aligned  ;
: lfa'>cfa'(mecrisp)  (  lfa' -- cfa' )  2+  ;
: cfa'>lfa'(mecrisp)  (  cfa' -- lfa' )  2-  ;
: nfa'>cfa'(mecrisp)  (  nfa' -- lfa' )  nfa'>lfa'(mecrisp)  lfa'>cfa'(mecrisp)  ;

\ : get.total.(adjacent)     lfa+nfa+cfa.COUNTER  @  head.spacing  @  /  ;

variable  nnnn?

: get.total.instruction(propForth)   ( -- n )   nnnn?  off  last'  @
  begin   1  nnnn?  +!   2 -   16@'  dup  0  =
  until   drop  nnnn?  @  ;


: nfa'>cfa'(pFth)      ( nfa' -- cfa' )  count'  1f and  +  ALIGNED(4*)   ;
: nfa'>cfa'(propforth) ( nfa' -- cfa' )  count'   7 and  +  EVEN.ALIGNED  ;
: cfa'>nfa'(propforth) ( cfa' -- nfa' )  1-   begin   1-  dup  c@'  20  7f  between  not  until  ;
: cfa'>nfa'(pFth)      ( cfa' -- nfa' )  1-   begin   1-  dup  c@'  20  7f  between  not  until  ;
: cfa'>nfa'(pFth)      ( cfa' -- nfa' )  3 -  begin   1-  dup  c@'  20  7f  between  not  until  ;

propForth?  @
#if      4252  last'  !
#then

: get.propForth.org  ( -- )  ( 4252  last' ! )   nnnn?  off   last'  @
  begin   cr   >r    1  nnnn?  +!
          ."  ( "  nnnn?  @  4  .R(DECIMAL)  ."    nfa:"  r@  5 u.r   ."    cfa:"  r@  nfa'>cfa'(propforth)  5 u.r   ."    lfa: ) "
          r@   2 -   6 u.r   ."   org   t:  "   r@  count' ( a' len )  7  and   type'
          r>   2 -   16@'  dup  0  =
  until   drop  ;

: get.total.instructions'                         ( -- n )  last' @  1  instruction.n   !   \ cortex M3/4
  begin   cell-  32@'   dup    0=   over  ffffffff  =  or            1  instruction.n  +!
  until   drop     instruction.n   @  ;

: get.total.instructions ( -- n )  T:queue.counter  @  8 /  ;

: find.next.instruction's.nfa^  ( nfa1 -- nfa2 no | 0 )     last' @      instruction.n   off   \  stm8s
  begin       >r  r@  2-    @^  former.instruction's.nfa  !           1  instruction.n   +!
              r>      2-    @^  dup  0=  if  2drop  0  exit  then  2dup  =
  until   2drop ( former.instruction's.nfa  @ ) last' @  instruction.n   @  1-  0
  ?do     2-    @^
  loop    ;

: find.next.instruction's.nfa   ( nfa1 -- nfa2 no | 0 )     last' @      instruction.n   off   \  8051
  begin       >r  r@  2-    @'  former.instruction's.nfa  !           1  instruction.n   +!
              r>      2-    @'  dup  0=  if  2drop  0  exit  then  2dup  =
  until   2drop ( former.instruction's.nfa  @ ) last' @  instruction.n   @  1-  0
  ?do     2-    @'
  loop    ;

head.Forth?  @
#if
:  CFA'>NFA'  ( CFA' ... NFA' -1 /  0  )   >R
   former.T:NFA.QUEUE.addr @
   BEGIN         DUP   T:NFA.QUEUE  +  8  -   @   R@   =
            IF   DUP   T:NFA.QUEUE  +  4  -   @   DUP
                       T:NFA.QUEUE  +  8  -   @   R@   =
                 IF      R>DROP   ENGLISH? @  IF  NIP  ELSE  DROP  THEN
                 ELSE    R>DROP   DROP
                 THEN    -1  EXIT
            THEN       T:NFA.QUEUE  +  4  -   @   ?DUP  0=
   UNTIL    R>DROP   0   ;
#then

variable  last.cfa'
variable  next.instruction's.cfa'

\ : u>=     u<  not  ;

: find.next.instruction's.cfa'  ( nfa1' -- cfa2' no | 0 )              next.instruction's.cfa'  off
  T:QUEUE.counter  @  0  \   (  last.cfa' @ )     instruction.n   off   \  8051
  do       T:QUEUE    i         +  @    over  =
           over  here'  u>=  or
     if    T:QUEUE    i  8  -   +  @    next.instruction's.cfa'  !      leave
     then
           T:QUEUE    i         +  @    here'  u>=
     if                         here'   next.instruction's.cfa'  !      leave
     then       10
  +loop    drop   next.instruction's.cfa'  @   ?dup  if   -1   else  0  then   ;


\ variable  +pcfa?          \  +pcfa?       on    \  pointer to cfa is added.
\ variable  head.Forth?        head.Forth?  on    \  eForth === head.Forth <---> headless.Forth === swiftForth

variable  last'.word?

head.Forth?  @
#if
: find.next.instruction's.nfa'.or.here' ( nfa1 -- nfa2 | 0 )     last'.word?  off
  dup  last' @  =  if   drop  here'     last'.word?  on  exit  then
  last' @      instruction.n   off   \  8051
  begin   >r  r@  cell-   32@'  former.instruction's.nfa  !              1  instruction.n   +!
          r>      cell-   32@'  dup  0=  if  2drop  0  exit  then  2dup  =
  until   2drop ( former.instruction's.nfa  @ ) last' @  instruction.n   @  1-  0
  ?do             cell-   32@'
  loop    ;
#else
: find.next.instruction's.nfa'.or.here' ( nfa1 -- nfa2 | 0 )     last'.word?  off
  dup  last' @  =  if   drop  here'     last'.word?  on  exit  then
  last' @      instruction.n   off   \
  begin   >r  r@  cell-  T:NFA.QUEUE  +  @  former.instruction's.nfa  !              1  instruction.n   +!
          r>      cell-  T:NFA.QUEUE  +  @  dup  0=  if  2drop  0  exit  then  2dup  =
  until   2drop ( former.instruction's.nfa  @ ) last' @  instruction.n   @  1-  0
  ?do             cell-  T:NFA.QUEUE  +  @
  loop    ;
#then


: find.next.instruction's.nfa'.or.here'mecrisp4F120 ( nfa1 -- nfa2 | 0 )       last'.word?  off
  dup  last' @  =  if   drop  here'     last'.word?  on  exit  then
  last' @      instruction.n   off
  begin   dup>r   cell-  32@'  6 +   former.instruction's.nfa  !               1  instruction.n   +!
          r>      cell-  32@'  dup            0=   if  2drop  0   exit  then  6 +  2dup   =
  until   2drop   last'    @                     instruction.n    @  1-  0
  ?do             cell-  32@'
  loop    ;


: find.next.instruction's.nfa'.or.here'mecrisp4F120(seperate) ( nfa1 -- nfa2 | 0 )       last'.word?  off
  dup  last' @  =  if   drop  here'     last'.word?  on  exit  then
  last' @      instruction.n   off
  begin   dup>r   cell-  32@'  6 +   former.instruction's.nfa  !               1  instruction.n   +!
          r>      cell-  32@'  dup   4000 = ( 0= ) if  2drop  0   exit  then  6 +  2dup   =
  until   2drop   last'    @   6 - ( lfa'-2 )    instruction.n    @  1-  0
  ?do           \ cell-  32@'  ( combine.head.and.body )
                  2+  ( lfa' )   32@'  ( upper's.lfa'-2 )
  loop            6   +  ;






: nfa'>lfa'(430eForthAL03)  ( nfa' -- lfa' )   4 - ( 2-  ) ;  \  msp430  2-    cortex m4 4 -
: nfa'>lfa'  ( nfa' -- lfa' )   avr328? @  if  2-  else  4 -  then ( 2-  ) ;  \  msp430  2-    cortex m4 4 -

: cfa'>nfa'(430eForthAL03)  ( cfa' -- nfa' -1 / x 0 )  last' @  ( d90c )  ( start.of.dictionary.link  @ )   0
  get.total.instructions                0
  do    drop  dup>r   nfa'>cfa'           over  =  if   drop  r>  -1  leave   else   r>  nfa'>lfa'  16@'  0  then
  loop  ;

: cfa'>nfa'(cortex.m4)    cfa'>nfa'(430eForthAL03)  ;


: don't.use.same.name   ( --)  last' @     \ >name'    nfa of COLD ===> 955e        last' @ decompile
  begin     dup>r    count'  1f and   2>r  \ type'
            cr  ."   defer "  2r@  type'  ." ."  20 ?y ." ' "  2r@ type'   3b ?y ." is "  2r@  type'  ." . "   56 ?y ."  : "  2r>  type'  ."  don't.use  ; "
                     r>   2-  @'  ?dup   0=   key?  or
  until  ;

: don't.use.same.name^  ( --)  last' @     \ >name'    nfa of COLD ===> 955e        last' @ decompile
  begin     dup>r    count'  1f and   2>r  \ type'
            cr  ."   defer "  2r@  type'  ." ."  20 ?y ." ' "  2r@ type'   3b ?y ." is "  2r@  type'  ." . "   56 ?y ."  : "  2r>  type'  ."  don't.use  ; "
                     r>   2-  @^  ?dup   0=   key?  or
  until  ;


: find.current.instruction's.nfa   ( cfa1 -- nfa2 no | 0 )   last' @       instruction.n   off
  begin   >r  r@  2-    @'  former.instruction's.nfa  !         1  instruction.n   +!
          r>      2-    @'  dup  0=  if  2drop  0  exit  then   2dup  u>
  until   2drop ( former.instruction's.nfa  @ ) last' @  instruction.n   @ ( 1+ )  0
  ?do     2-    @'
  loop    ;

: find.current.instruction's.nfa^  ( cfa1 -- nfa2 no | 0 )   last' @       instruction.n   off
  begin   >r  r@  2-    @^  former.instruction's.nfa  !         1  instruction.n   +!
          r>      2-    @^  dup  0=  if  2drop  0  exit  then   2dup  u>
  until   2drop ( former.instruction's.nfa  @ ) last' @  instruction.n   @ ( 1+ )  0
  ?do     2-    @^
  loop    ;

variable   xxx

: name>'   ( nfa' -- cfa' )   count'  1f  and  +  aligned(4*)   ;

variable  name'.counter

: >name'   ( cfa' -- nfa' | 0 )   name'.counter  off     \ find.current.instruction's.nfa  ;
  last'    @                           \ cfa nfa
  begin    dup                         \ cfa nfa nfa
     if    dup     name>'  >r  over  r>   xor       \ cfa nfa cfa<>cfa'
           if      4 -   32@'   dup  ffff  u>
                if       2drop  0    exit
                else            0      \              cfa nfa'
                then
           else    nip   exit          \
           then                        \
     else               -1             \
     then  1  name'.counter  +!    name'.counter  @  1000  >  and
  until    2drop   0  ;


: >name^   ( cfa' -- nfa' | 0 ) \ find.current.instruction's.nfa  ;
  last'    @                           \ cfa nfa
  begin    dup                         \ cfa nfa nfa
     if    dup     name>'  >r  over  r>   xor       \ cfa nfa cfa<>cfa'
           if      2 -   @^   0        \              cfa nfa'
           else    nip   exit          \
           then                        \
     else               -1             \
     then
  until    2drop   0  ;

variable    .''?   \  .''?  on

: .id'(cfa'.in.t:nfa.queue)  ( cfa' -- )   >r    t:nfa.queue
  begin     dup  @  r@  =
     if     .''?  @  if     2b ?y  ."  ''  "  then
            r>drop   8  +   count  1f and     type    exit
     then            8  +   count  1f and  +  dup  @  0=
  until     r>drop   drop   ;


: .id'        ( nfa' -- )  nfa'>cfa'  ?dup  if  .id'(cfa'.in.t:nfa.queue)  else  8 u.r  then  ;
: .$'         ( a' -- )               count'  type'  ;

STM32F407?  @
#IF
: .$'         ( n1 a' -- n2 )  space  count'  type' ( 1+ )        ALIGNED(4*)   ;
#ELSE
: .$'         ( n1 a' -- n2 )  space  count'  type'   1+     EVEN.ALIGNED       ;
#THEN

: .$'         ( n1 a' -- n2 )  space  count'  type'   1+     EVEN.ALIGNED       ;

: .$'(fram)   ( a' -- n )  count'  2dup  +  1-  8@'  0=  if  1-  then  type'      ;  ( fram )
: .$'(fram)   ( a' -- n )  count'  2dup  +  1-  8@'  0=  if  1-  then  type'  2+  ;  ( fram )

: .$'(eforth) ( a' -- n )  0 >r   begin   dup  c@'  while   dup  c@'  emit  1+   r>  1+  >r  repeat  drop  r> 3 +  EVEN.ALIGNED  ;
      \ 0 ending

: .\.(      ( ---- )  make.macro? @  if   ." \ (  "   else  ."   (  "  then  ;
: .\..      ( ---- )                      ."   \  "   ;


: (.1234.................)    ( a -) .\.(       .xxxx  space                                         12 spaces ."  ) " ;
: (.1234..??????????????.)  ( a n -) .\.(  over .xxxx  space     bounds  do  space  i  c@' .xx  loop           ."  ) " ;
: (.1234..55.............)    ( a -) .\.(  dup  .xxxx  space  1  bounds  do  space  i  c@' .xx  loop 0f spaces ."  ) " ;
: (.1234..55.66..........)    ( a -) .\.(  dup  .xxxx  space  2  bounds  do  space  i  c@' .xx  loop 0c spaces ."  ) " ;
: (.1234..55.66.77.......)    ( a -) .\.(  dup  .xxxx  space  3  bounds  do  space  i  c@' .xx  loop  9 spaces ."  ) " ;
: (.1234..55.66.77.88....)    ( a -) .\.(  dup  .xxxx  space  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " ;
: (.1234..55.66.77.88....)    ( a -) .\.(  dup  .xxxx  space  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " ;

: (.1234..55.66.77.88.99.)    ( a -) .\.(  dup  .xxxx  space  5  bounds  do  space  i  c@' .xx  loop           ."  ) " ;


: (.1234..55.66.77.88.99.)nfa   ( a -) .\.(  dup  .xxxx  space  dup    count' nip 1f and 1+    5 min dup>r bounds
                                                do  space  i  c@' .xx  loop  5 r> - 3 * spaces        3 spaces ."  ) " ;

: (.1234..55.66.77.88.99.)nfa.m ( a -) .\.(  dup  .xxxx  space  dup 1+ count' nip 1f and 1+ 1+ 6 min dup>r bounds
                                                do  space  i  c@' .xx  loop  6 r> - 3 * spaces                 ."  ) " ;


: (.1234..55.66.77.88.99.aa.) ( a -) .\.(   dup  .xxxx  space  6  bounds  do  space  i  c@' .xx  loop          ."  )" ;


:  (.12345678..55.66.77.88.......)    ( a -) .\.(  dup  .xxxxxxxx  space  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " ;
:  (.12345678..55.66.77.88.99.aa.)    ( a -)  .(.8A? @  if  .\.(  dup  .xxxxxxxx  space  6  bounds  do  space  i  c@' .xx  loop  ."  ) "  else  drop  then ;

:  (.12345678..55.66.77.88.99.aa.)nfa   ( a' -- )
.\.(  dup  .xxxxxxxx  space  dup    count' nip 1f and 1+   6 ( 5 ) min dup>r bounds
                                                do  space  i  c@' .xx  loop   6 ( 5 ) r> - 3 * spaces  ( 3 spaces ) ."  ) " ;

' (.12345678..55.66.77.88.99.aa.)nfa  is  _(.12345678..55.66.77.88.99.aa.)nfa

: set..b=1?  ( a' -- )  >r   r@  check.b=1.or.not   r> 16@' 40  and   and   if  .b=1? on  else  .b=1? off  then  ;

: %0   dup  dup set..b=1? (.1234.................)     34y ;  ( a' -- a' )
: %1   dup  dup set..b=1? (.1234..55.............)     34y ;
: %2   dup  dup set..b=1? (.1234..55.66..........)     34y ;
: %3   dup  dup set..b=1? (.1234..55.66.77.......)     34y ;
: %4   dup  dup set..b=1? (.1234..55.66.77.88....)     34y ;
: %5   dup  dup set..b=1? (.1234..55.66.77.88.99.)     34y ;
: %5n  dup  dup set..b=1? (.1234..55.66.77.88.99.)nfa  34y ;
: %6   dup  dup set..b=1? (.1234..55.66.77.88.99.aa.)  34y ;


\ cortex m4
: (.12345678.................)    ( a -)  .(.8a? @  if  .\.(       .xxxxxxxx  space                                         12 spaces ."  ) " exit then 10 ?y  drop ;
: (.12345678..??????????????.)  ( a n -)  .(.8a? @  if  .\.(  over .xxxxxxxx  space     bounds  do  space  i  c@' .xx  loop           ."  ) " exit then 10 ?y 2drop ;
: (.12345678..55.............)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  1  bounds  do  space  i  c@' .xx  loop 0f spaces ."  ) " exit then 10 ?y  drop ;
: (.12345678..55.66..........)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  2  bounds  do  space  i  c@' .xx  loop 0c spaces ."  ) " exit then 10 ?y  drop ;
: \.12345678..55.66...........    ( a -)  .(.8a? @  if  .\..  dup  .xxxxxxxx  space  2  bounds  do  space  i  c@' .xx  loop 0c spaces ."    " exit then 10 ?y  drop ;



: (.12345678..55.66.77.......)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  3  bounds  do  space  i  c@' .xx  loop  9 spaces ."  ) " exit then 10 ?y  drop ;
: (.12345678..55.66.77.88....)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " exit then 10 ?y  drop ;
\ (.12345678..55.66.77.88....)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " exit then 10 ?y  drop ;
: (.12345678..55.66.77.88.99.)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  5  bounds  do  space  i  c@' .xx  loop  3 spaces ."  ) " exit then 10 ?y  drop ;
: (.12345678..55.66.77.88.99+)    ( a -)  .(.8a? @  if  .\.(  dup  .xxxxxxxx  space  6  bounds  do  space  i  c@' .xx  loop           ."  ) " exit then 10 ?y  drop ;

: (.1234..55.66..........).328    ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  2  bounds  do  space  i  c@' .xx  loop 0c spaces ."  ) " ;
: (.1234..55.66.77.......).328    ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  3  bounds  do  space  i  c@' .xx  loop  9 spaces ."  ) " ;
: (.1234..55.66.77.88....).328    ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " ;
: (.1234..55.66.77.88.99.).328    ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  5  bounds  do  space  i  c@' .xx  loop           ."  ) " ;
: (.1234..55.66.77.88.99.).328nfa ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  dup count' nip 1f and 1+ 5 min dup>r bounds
                                                do  space  i  c@' .xx  loop  5 r> - 3 * spaces             3 spaces ."  ) " ;

: (.1234..55.66.77.88.......).328 ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " ;
: (.1234..55.66.77.88.99.aa.).328 ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  6  bounds  do  space  i  c@' .xx  loop          ."  )" ;

0  value  (a')
0  value  <<byte>>

: (0     dup  dup set..b=1? (.12345678.................)    0  swap  34y   2dup   to (a')   to <<byte>>   ;  ( a' -- a' n )
: (1     dup  dup set..b=1? (.12345678..55.............)    1  swap  34y   2dup   to (a')   to <<byte>>   ;
: (2     dup  dup set..b=1? (.12345678..55.66..........)    2  swap  34y   2dup   to (a')   to <<byte>>   ;
: (3     dup  dup set..b=1? (.12345678..55.66.77.......)    3  swap  34y   2dup   to (a')   to <<byte>>   ;
: (4     dup  dup set..b=1? (.12345678..55.66.77.88....)    4  swap  34y   2dup   to (a')   to <<byte>>   ;
: (5     dup  dup set..b=1? (.12345678..55.66.77.88.99.)    5  swap  34y   2dup   to (a')   to <<byte>>   ;
: (6     dup  dup set..b=1? (.12345678..55.66.77.88.99+)    6  swap  34y   2dup   to (a')   to <<byte>>   ;
: (7     dup  dup set..b=1? (.12345678..55.66.77.88.99+)    7  swap  34y   2dup   to (a')   to <<byte>>   ;
: (8     dup  dup set..b=1? (.12345678..55.66.77.88.99+)    8  swap  34y   2dup   to (a')   to <<byte>>   ;
: (82    dup  dup set..b=1? (.12345678..55.66.77.88.99+)    8  swap  34y   2dup   to (a') drop 2  to <<byte>>   ;

comment:
: (10    dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0a  swap  34y   2dup   to (a')   to <<byte>>   ;
: (12    dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0c  swap  34y   2dup   to (a')   to <<byte>>   ;
: (14    dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0e  swap  34y   2dup   to (a')   to <<byte>>   ;
: (16    dup  dup set..b=1? (.12345678..55.66.77.88.99+)   10  swap  34y   2dup   to (a')   to <<byte>>   ;

: (10,2  dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0a  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
: (12,2  dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0c  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
: (14,2  dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0e  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
: (16,2  dup  dup set..b=1? (.12345678..55.66.77.88.99+)   10  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
comment;

: (A     dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0a  swap  34y   2dup   to (a')   to <<byte>>   ;
: (C     dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0c  swap  34y   2dup   to (a')   to <<byte>>   ;
: (E     dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0e  swap  34y   2dup   to (a')   to <<byte>>   ;
: (10    dup  dup set..b=1? (.12345678..55.66.77.88.99+)   10  swap  34y   2dup   to (a')   to <<byte>>   ;
                         
: (A,2   dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0a  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
: (C,2   dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0c  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
: (E,2   dup  dup set..b=1? (.12345678..55.66.77.88.99+)   0e  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;
: (10,2  dup  dup set..b=1? (.12345678..55.66.77.88.99+)   10  swap  34y   2dup   to (a')  drop 2  to <<byte>>   ;

: (.12345678..12345678.)        ( a' -- )   dup  ."   (  "  .xxxxxxxx  2 spaces  32@'  .xxxxxxxx     space   ." )"  ; 

: (.12345678..12345678.......)  ( a' -- )   dup  ."   (  "  .xxxxxxxx  2 spaces  32@'  .xxxxxxxx  0a spaces  ." )"  ;

: %0   dup  dup set..b=1? (.12345678.................)     34y ;  ( a' -- a' )
: %1   dup  dup set..b=1? (.12345678..55.............)     34y ;
: %2   dup  dup set..b=1? (.12345678..55.66..........)     34y ;
: %3   dup  dup set..b=1? (.12345678..55.66.77.......)     34y ;
: %4   dup  dup set..b=1? (.12345678..55.66.77.88....)     34y ;
: %5   dup  dup set..b=1? (.12345678..55.66.77.88.99.)     34y ;
\ %5n  dup  dup set..b=1? (.12345678..55.66.77.88.99.)nfa  34y ;
\ %6   dup  dup set..b=1? (.12345678..55.66.77.88.99.aa.)  34y ;

' (.12345678..12345678.......)  is  _(.12345678..12345678.......)

: dump.(.12345678..55.66..........)  ( a' len -- )  bounds
  do      cr  i    (.12345678..55.66..........)  2
  +loop   ;

: dump.(.12345678..55.66.77.88....)  ( a' len -- )  bounds
  do      cr  i    (.12345678..55.66.77.88....)  4
  +loop   ;

: dump16  ( a' len -- )  dump.(.12345678..55.66..........)  ;
: dump32  ( a' len -- )  dump.(.12345678..55.66.77.88....)  ;

: n>%n   ( n -- )
  case     1  of   %1   endof
           2  of   %2   endof
           3  of   %3   endof
           4  of   %4   endof
           5  of   %5   endof
           6  of   %5   endof  \  %6
         ( drop )  %5          \  %6
  endcase  ;

: n>(n   ( a' n -- a' a' n )    \  n>*n
  case     1  of   (1   endof
           2  of   (2   endof
           3  of   (3   endof
           4  of   (4   endof
           5  of   (5   endof
           6  of   (6   endof
           7  of   (7   endof
           8  of   (8   endof
      \    drop  dup  (6   20 ?y '+' emit  \ (6+
           over       (5   .(.8a?  @  if   1d ?y '+' emit  rot  5 - .xx   else   rot  drop  then  \ (6+
  endcase  ;




 





VARIABLE ?branch.START?
VARIABLE ?branch.START.ADDR'
VARIABLE ?branch.QUEUE.DEEP     1000  ?branch.QUEUE.DEEP !     ( 400 )
CREATE   ?branch.QUEUE                ?branch.QUEUE.DEEP @ 8 *  ALLOT  \ to record the data range

VARIABLE  branch.START?
VARIABLE  branch.START.ADDR'
VARIABLE  branch.QUEUE.DEEP     1000   branch.QUEUE.DEEP !     ( 400 )
CREATE    branch.QUEUE                 branch.QUEUE.DEEP @ 8 *  ALLOT  \ to record the data range

VARIABLE (from->to.in.QUEUE?)
\ -----------------------------------------------------------------------------
:         from->to.in.?branch.QUEUE?  ( START END ... f )  ( 2DUP  MIN  >R  MAX  R> )    (from->to.in.QUEUE?) off
  ?branch.QUEUE.DEEP  @  8 *  0
  DO     ?branch.QUEUE  I  +  2@     2over       d=    if   (from->to.in.QUEUE?)  on  leave   then
         ?branch.QUEUE  I  +  2@  ( 64 BITS )   D0=    IF                             LEAVE   THEN
\        I  ?branch.QUEUE.DEEP @ 2 -  8 *  U>
\        IF    ABORT"  TOO MANY ?branch ( >1023 ) "  THEN
         8
  +LOOP  2drop   (from->to.in.QUEUE?)  @  ;

:       >?branch.QUEUE  ( START END ... )    2dup  from->to.in.?branch.QUEUE?  if  2drop  exit  then
\ 2DUP  MIN  >R  MAX  R>
  ?branch.QUEUE.DEEP  @  8 *  0
  DO     ?branch.QUEUE  I  +  2@  ( 64 BITS )   D0=    IF   I   LEAVE   THEN
         I  ?branch.QUEUE.DEEP @ 2 -  8 *  U>
         IF    ABORT"  TOO MANY ?branch ( >8k ) "  THEN    8
  +LOOP  ?branch.QUEUE   +  2!   ;

:  ERASE.?branch.QUEUE   ?branch.QUEUE    ?branch.QUEUE.DEEP @ 8 *  ERASE  ;
   ERASE.?branch.QUEUE
\ -----------------------------------------------------------------------------
:         from->to.in.branch.QUEUE?  ( START END ... f )  ( 2DUP  MIN  >R  MAX  R> )    (from->to.in.QUEUE?) off
  branch.QUEUE.DEEP  @  8 *  0
  DO     branch.QUEUE  I  +  2@     2over       d=    if   (from->to.in.QUEUE?)  on  leave   then
         branch.QUEUE  I  +  2@  ( 64 BITS )   D0=    IF                             LEAVE   THEN
\        I  branch.QUEUE.DEEP @ 2 -  8 *  U>
\        IF    ABORT"  TOO MANY ?branch ( >1023 ) "  THEN
         8
  +LOOP  2drop   (from->to.in.QUEUE?)  @  ;

:       >branch.QUEUE  ( START END ... )    2dup  from->to.in.branch.QUEUE?    if  2drop  exit  then
\ 2DUP  MIN  >R  MAX  R>
  branch.QUEUE.DEEP  @  8 *  0
  DO     branch.QUEUE  I  +  2@  ( 64 BITS )   D0=    IF   I   LEAVE   THEN
         I  branch.QUEUE.DEEP @ 2 -  8 *  U>
         IF    ABORT"  TOO MANY branch ( >8k ) "  THEN    8
  +LOOP  branch.QUEUE   +  2!   ;

:  ERASE.branch.QUEUE   branch.QUEUE    branch.QUEUE.DEEP @ 8 *  ERASE  ;
   ERASE.branch.QUEUE
\ -----------------------------------------------------------------------------
VARIABLE DATA.RANGE.START?
VARIABLE DATA.RANGE.START.ADDR'
VARIABLE DATA.RANGE.QUEUE.DEEP     1000  DATA.RANGE.QUEUE.DEEP !     ( 400 )
CREATE   DATA.RANGE.QUEUE                DATA.RANGE.QUEUE.DEEP @ 8 *  ALLOT  \ to record the data range
\        DATA.RANGE.QUEUE                DATA.RANGE.QUEUE.DEEP @ 8 *  0FF FILL

:       >DATA.RANGE.QUEUE  ( START END ... n' )  2DUP  MIN  >R  MAX  R>
  DATA.RANGE.QUEUE.DEEP  @  8 *  0
  DO     DATA.RANGE.QUEUE  I  +  2@  ( 64 BITS )   D0=    IF   I   LEAVE   THEN
         I  DATA.RANGE.QUEUE.DEEP @ 2 -  8 *  U>
         IF    ABORT"  TOO MANY DATA RANGE ARE ACTIVE ( >1023 ) "  THEN    8
  +LOOP  DATA.RANGE.QUEUE   +  2!   ;

: {}     ( START END ... )   >DATA.RANGE.QUEUE   ;  \ ex.  123  456 {}

:  ERASE.DATA.RANGE.QUEUE   DATA.RANGE.QUEUE    DATA.RANGE.QUEUE.DEEP @ 8 *  ERASE  ;
   ERASE.DATA.RANGE.QUEUE

\ :  {DATA    HERE'  DATA.RANGE.START.ADDR'  !   -1 DATA.RANGE.START? !  ;

:  {DATA      DATA.RANGE.START?  @  0 =
    IF     -1 DATA.RANGE.START?  !  HERE'  DATA.RANGE.START.ADDR'  !
    ELSE    0 DATA.RANGE.START?  !  ABORT"  NO END MARK ON DATA.RANGE WITH DATA} "
    THEN    ;
:   DATA{   {DATA  ;

:   DATA}     DATA.RANGE.START?  @
    IF      0 DATA.RANGE.START?  !  DATA.RANGE.START.ADDR'  @  HERE'  1-   >DATA.RANGE.QUEUE
    ELSE    0 DATA.RANGE.START?  !  ABORT"  NO START MARK ON DATA.RANGE WITH {DATA "
    THEN    ;
:   }DATA   DATA}  ;

\   ex. HERE'  {DATA   A-  IF'A=0  A+ A+  ELSE'  A- A- THEN'  A=0 A=0 RET    DATA}

: {DATA}?  ( ADDR'... -1/0 )
  DATA.RANGE.QUEUE.DEEP @ 8 *    0
  DO       DUP 0=
           IF              DROP  0   LEAVE
           ELSE    DUP  DATA.RANGE.QUEUE I + @   DATA.RANGE.QUEUE I + >CFA'   BETWEEN
                   IF      DROP -1   LEAVE
                   THEN
                   DATA.RANGE.QUEUE I + @   0  =
                   IF      DROP  0   LEAVE
                   THEN    8
           THEN
  +LOOP    ; 

: display.as.2.byte?  ( a' -- f )      >r
  r@   40                              8f                            between  if   r>drop  -1   exit   then
  r@   40  NEW.SYSTEM.OFFSET  @  +     8f  NEW.SYSTEM.OFFSET  @  +   between  if   r>drop  -1   exit   then
  r>drop   0  ;

: .0XXxx   '0' emit  .XXxx  ;

defer  _16@'

: u>=  u<  not  ;

defer  _show.===***---+++

variable  (#to)
variable  layer0           21  layer0       !

: #to  ( a' -- )         (#to) off
  ?branch.QUEUE.DEEP  @  0  do  dup  ?branch.queue   i  +  @  =  if  1  (#to)  +!  then  4  +loop
   branch.QUEUE.DEEP  @  0  do  dup   branch.queue   i  +  @  =  if  1  (#to)  +!  then  4  +loop  drop  (#to)  @  ;

variable  valid.BEGIN/THEN

: check.valid.BEGIN/THEN ( a' -- n -1 / 0 )      valid.BEGIN/THEN  off
                          ?branch.QUEUE.DEEP     @  0
  do             dup      ?branch.queue   i         +  @  =  \ to'
     if                                       1  valid.BEGIN/THEN  +!
     then   8
  +loop                    branch.QUEUE.DEEP     @  0
  do             dup       branch.queue   i         +  @  =  \ to'
     if                                       1  valid.BEGIN/THEN  +!
     then   8
  +loop          drop                            valid.BEGIN/THEN  @   dup    if  -1  then  ;

: |layer|   ( -- )  layer  @  0  max  6  min  layer  !  ;

variable  just.REPEAT?
variable  just.ELSE?

: .BEGIN/THEN  ( a' -- )
  dup  check.valid.BEGIN/THEN  0=  if  drop  exit  then  0
  do
                            ?branch.QUEUE.DEEP     @  0
    do             dup      ?branch.queue   i  4   +  +  @  =  \ from'
       if                   ?branch.queue   i  +  2@    u>=
          if       just.ELSE? @   just.REPEAT? @  or
             if    just.ELSE? off  just.REPEAT? off
             else  cr  -1 layer +!     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." THEN"
             then
          else  cr                     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." BEGIN"  1 layer +!
          then              ?branch.queue   i  +  2@   _show.===***---+++
       then        dup      ?branch.queue   i         +  @  =  \ to'
       if                   ?branch.queue   i  +  2@    u<
          if       just.ELSE? @   just.REPEAT? @  or
             if    just.ELSE? off  just.REPEAT? off
             else  cr  -1 layer +!     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." THEN"
             then
          else  cr                     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." BEGIN"  1 layer +!
          then              ?branch.queue   i  +  2@   _show.===***---+++
       then   8
    +loop                    branch.QUEUE.DEEP     @  0
    do             dup       branch.queue   i  4   +  +  @  =  \ from'
       if                    branch.queue   i  +  2@    u>=
          if       just.ELSE? @   just.REPEAT? @  or
             if    just.ELSE? off  just.REPEAT? off
             else  cr  -1 layer +!     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." THEN"
             then
          else  cr                     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." BEGIN"  1 layer +!
          then               branch.queue   i  +  2@   _show.===***---+++
       then        dup       branch.queue   i         +  @  =  \ to'
       if                    branch.queue   i  +  2@    u<
          if       just.ELSE? @   just.REPEAT? @  or
             if    just.ELSE? off  just.REPEAT? off
             else  cr  -1 layer +!     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." THEN"
             then
          else  cr                     layer0 @  |layer|  layer  @  space/layer  @  * +  ?y  ." BEGIN"  1 layer +!
          then               branch.queue   i  +  2@   _show.===***---+++
       then   8
    +loop
  loop     drop  ;


variable  show.===***---+++?   show.===***---+++?  on

: +-*/    show.===***---+++?   dup  @  if   off   else   on   then  ;

\ : .from->to  ( from to -- )    swap  .xxxx  ."  --> "    .xxxx  2  spaces  ;

:  n+n>****   ( from to -- )
   0  swap  7  0  do  10 /mod   >r  +  r>  loop  +  >r
   0  swap  7  0  do  10 /mod   >r  +  r>  loop  +  r>  +  1f  and
   dup      3  and
         case  0  of   '*'    endof
               1  of   '='    endof
               2  of   '-'    endof
               3  of   '+'    endof
         endcase        swap  2+     1f  min
   0  ?do    dup  emit  loop  drop  ;

variable  .n#?     8  .n#?  !

: .n#    ( #  -- )    .n#?  @
  case     4  of   .xxxx       endof
                   .xxxxXXXX
  endcase  ;

: .n#    ( #  -- )    .n#?  @
  case     4  of   .xxxx       endof
           swap    .xxxxXXXX
  endcase  ;

: .from->to   ( from to -- )    .\.8a? @
   if         2dup   45 ?y    ." \ "   swap     .n#     ."  --> "    .n#       space  n+n>****
   else       2drop
   then       ;

: show.===***---+++  ( a' to --  )    show.===***---+++?  @   0=   if   2drop  exit   then
  2dup  .from->to   +   7  mod   dup
  case    0  of  '+'   endof
          1  of  '-'   endof
          2  of  '*'   endof
          3  of  '/'   endof
          4  of  '='   endof
          5  of  '!'   endof
          6  of  '@'   endof
          7  of  '#'   endof
          8  of  '$'   endof
          9  of  '%'   endof
         0a  of  '^'   endof
         0b  of  '&'   endof
         0c  of  '('   endof
         0d  of  ')'   endof
         0e  of  '>'   endof
         0f  of  '?'   endof
  endcase    swap  3 *  3 +   0  do   dup  emit  loop   drop  ;

' show.===***---+++  is  _show.===***---+++

variable  if?

: then.of.IF.THEN?  ( a' --- f )     if?  off
  ?branch.queue  ?BRANCH.QUEUE.DEEP  @   0
  do         2dup   i  +   @   =   \ to
     if       dup   i  +  2@   u<
         if   if?   on       \ IF
         then
     then    8
  +loop  2drop   if?  @   ;

: BEGIN.of.FOR.NEXT?  ( a' --- f )     if?  off
  ?branch.queue  ?BRANCH.QUEUE.DEEP    @    0
  do         2dup   i  +   @   =   \ to
     if       dup   i  +  2@   u<
         if   if?   on       \ IF
         then
     then    8
  +loop  2drop   if?  @   ;


: find.addr'.of.IF/WHILE.from.then   ( a' -- a'.of.if  -1/0  )   if?  off
  ?branch.queue  ?BRANCH.QUEUE.DEEP  @   0
  do         2dup   i  +        @   =   \ to
     if       dup   i  +       2@   u<
         if   dup   i  +  4  +  @   -rot   if?   on  \ IF
         then
     then    8
  +loop  2drop   if?  @   ;

: check.while  ( to --  f )  5  -  dup>r  c@'  12 ( Lcall ) =  r> 1+  16@' ( 0~7<->8~15 )  cfa'.of.branch  @ ( '' ?branch )  =  and  ;  \ AGAIN?   ;
: check.repeat ( a' --- f )  5  +  then.of.IF.THEN?  ;

: again?  ( a' -- f )  >r
  r@        c@'   12 ( Lcall ) =
  r@   1+  16@' ( 0~7<->8~15 )   cfa'.of.branch   @ ( ''  branch )  =  and
  r@   3 + 16@' ( to )  r> ( from )  u<  and  ;

: if(while)?    ( a' -- f )  >r
  r@        c@'   12 ( Lcall ) =
  r@   1+  16@' ( 0~7<->8~15 )   cfa'.of.?branch  @ ( '' ?branch )  =  and
  r@   3 + 16@' ( to )  r> ( from )  u>  and  ;

: check.begin.(WHILE).repeat   ( a' --  f )  >r
  r@    if(while)?                      0=   if   r>drop   0  exit   then
  r@    3  +  16@'    5   -    again?   0=   if   r>drop   0  exit   then
  r@    3  +  16@'    2   -    16@'   ( begin )   r> ( a'.of.while )  u<   ;

: check.begin.while.(REPEAT)   ( a' -- f )   5  +  ( addr' of then )  find.addr'.of.IF/WHILE.from.then
  if    check.begin.(WHILE).repeat
  else  0
  then  ;


: check.begin.while.(repeat)'''   ( from to --  f )   2dup  u>  if  2drop  0  exit  then       swap >r
  5  -  dup>r  c@'  12 ( Lcall ) =  r@ 1+  16@' ( 0~7<->8~15 )  cfa'.of.branch  @ ( '' branch )  =  and
                                    r> 3 + 16@' ( addr' of branch to ) r> ( from )  u<  and  ;

: check.begin.while.repeat  ( from to --  f )   2dup  u>  if  2drop  0  exit  then       swap >r
  5  -  dup>r  c@'  12 ( Lcall ) =  r@ 1+  16@' ( 0~7<->8~15 )  cfa'.of.branch  @ ( '' branch )  =  and
                                    r> 3 + 16@' ( addr' of branch to ) r> ( from )  u<  and  ;
: check.repeat ( a' --- f )  5  +  then.of.IF.THEN?  ;

variable   cfa'.of.nex.    \  0196  cfa'.of.nex.  !

: nex.?  ( a' -- f )  dup>r   c@'  12 =  r> 1+ 16@'  ( 0~7<->8~15 )   cfa'.of.nex.  @  =  and  ;

: .if/while/until    ( a' to --  )
   2dup  U<
   if        2dup   check.begin.while.repeat
      if     -1  layer +!  |layer|   layer0  @  layer @  3 min  space/layer @ * + ?y  ." WHILE"     1  layer +!  |layer|
      else                          ." IF"        1  layer +!  |layer|
      then
   else      -1 layer +!  |layer|    layer0  @  layer @  3 min  space/layer @ * + ?y
             over    nex.?
      if     ." NEXT"
      else   ." UNTIL"
      then
   then      show.===***---+++  ;

variable  cfa'.of.>R     \  0254  cfa'.of.>R  !

: >R?     ( a' -- )  dup>r  c@'  12  ( Lcall )  =   r>  1+  16@'  ( 0~7<->8~15 )  cfa'.of.>R      @  =  and  ;
: branch? ( a' -- )  dup>r  c@'  12  ( Lcall )  =   r>  1+  16@'  ( 0~7<->8~15 )  cfa'.of.branch  @  =  and  ;
: ahead?  ( a' -- )  dup>r  branch?   r@  3 +  16@'  ( branch to )  r>  u>   and  ;

: check.>R.AHEAD.next  ( a' -- f )    >r       \  FOR  AFT  ...  THEN  NEXT
  r@        >R?                  0=   if   0   r>drop  exit  then
  r@   3 +  ahead?               0=   if   0   r>drop  exit  then
  r@   6 +  16@'  nex.?          0=   if   0   r>drop  exit  then
  r@   6 +  16@'  3  +  16@'  r>   8   +   =   ;

: check.FOR.next       ( a' -- f )    >r       \  FOR  ...  NEXT
  r@        >R?                  0=   if   0   r>drop  exit  then
  r>   3 +  BEGIN.of.FOR.NEXT?   0=   ;   \ if   0   r>drop  exit  then
\ r@   3 +  BEGIN<nex.  16@'  nex.?        0=  if   0  r>drop  exit  then
\ r@   6 +  16@'  3  +  16@'  r>   8   +   =   ;

\ ' check.FOR.NEXT  is  _check.FOR.NEXT

: check.(if).else.(then)   ( from to --  f )   over  5 + find.addr'.of.IF/WHILE.from.then  0=  if  2drop  0  exit  else  drop  then
  2dup  u>  if  2drop  0  exit  then           drop
  dup>r  c@'  12 ( Lcall ) =  r@ 1+  16@' ( 0~7<->8~15 )  cfa'.of.branch  @ ( '' branch )  =    and
                              r@ 3 + 16@'             ( addr' of branch to ) r>  u>         and  ;

: .AHEAD/ELSE/AGAIN  ( a' to --  )     just.repeat?  off    \ 1AD2 --> 1ADD
   2dup  U<
   if   2dup  check.(if).else.(then)
       if    -1  layer +!  |layer|  ." ELSE"      just.ELSE?     on
       else                         ." AHEAD"
       then   1  layer +!  |layer|
   else   -1  layer +!  |layer|  layer0  @  layer @  3 min  space/layer @ * + ?y
      over  check.repeat
      if       ." REPEAT"                         just.REPEAT?   on
      else     ." AGAIN"
      then
   then  show.===***---+++  ;

: >branch.queue+.AHEAD/ELSE/AGAIN  ( a' to --  )  2dup   >branch.queue  layer0 @  layer @  3 min  space/layer @ * + ?y   .AHEAD/ELSE/AGAIN   32 ?y  ." \"  ;
: >?branch.queue+.if/while/until   ( a' to --  )  2dup  >?branch.queue  layer0 @  layer @  3 min  space/layer @ * + ?y   .if/while/until     32 ?y  ." \"  ;



: .a.range.of.2.byte.data  ( from' to' -- )    swap  ?do   cr  i   %2   drop   i  @'  3c ?y  .xxxx   2  +loop  ;
: .a.range.of.2.byte.data  ( from' to' -- )    swap  ?do       i   %2   drop   i  @'  3c ?y  .xxxx   2  +loop  ;

defer _disassem

: check.special.literal ( a' -- n -1 | a' 0 )  dup>r    16@'  8324  =   r@ 2+ 16@'  40B4  =         r@ 6 + 16@'  0 =  and  and
  if    r>  4  +  16@'  -1
  else  r>               0
  then  ;

defer  _disassem.special

defer  _5..10#2.j.j11#>24#

0  value  (j1)
0  value  (j2)
0  value  (i1)
0  value  (i2)

: a'>24#'  ( a' -- 24# )   32@'  0~15<->16~31  _5..10#2.j.j11#>24#  ;

: check.special.instruction?   ( a' -- n | 0 ) dup  ( 2- )  16@'  154E ( cfa'.of.compile @ '' COMPILE ) = if  drop  0  exit  then
  mecrispForth?
  if   check.special.literal if  3C ?y  .xxxx  ."   ... "   8  exit  then
  then
\ dup      2+    16@'  ( ?branch  doLit )
  dup    ( 4+ )  32@'  ( ?branch  doLit )  0~15<->16~31   _5..10#2.j.j11#>24#  \ drop    C0A6 ( dolit )
  case   cfa'.of.?branch  @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.branch   @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.?branch* @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.branch*  @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(loop)   @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(+loop)  @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.doCON    @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.nex.     @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
         cfa'.of.doLit    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
         cfa'.of.lit      @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
         cfa'.of.doVAR    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
         cfa'.of.doUSER   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
         cfa'.of.doDOES   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
         cfa'.of.compile  @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
         cfa'.of.."|      @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\        cfa'.of.,"|      @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
         cfa'.of.$"|      @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
         cfa'.of.abor."   @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.(IS")    @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

         cfa'.of.?branch* @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.branch*  @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(loop)   @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(+loop)  @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.doCON    @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.nex.*    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
         cfa'.of.doLit*   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
         cfa'.of.lit      @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
         cfa'.of.doVAR*   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
         cfa'.of.doUSER*  @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
         cfa'.of.doDOES   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
         cfa'.of.compile  @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
         cfa'.of.."|*     @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\        cfa'.of.,"|*     @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
         cfa'.of.$"|*     @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
         cfa'.of.abor."*  @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.(IS")    @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

         cfa'.of.exit     @  of     drop   \.3f---                             0  endof  \  exit
         drop   0   swap
  endcase   ;









variable        multiple.decompile?    \  multiple.decompile?  on
\ : md  ( -- )  multiple.decompile?  dup  @   if  off  else  on  then  last.u  @  _u  drop  ;

\ variable  disassem.special?

: cfa=  ( -- )  bl  word  count  string>number  if  branch.offset  !  then  ;   \  cfa= 1234

variable   doCOLON?

: .immediate/compile-only/smudge  ( nfa' -- )    >r
   r@  c@'  20  and  if  cr  30 ?y  ." smudge'"          then
   r@  c@'  80  and  if  cr  30 ?y  ." immediate'"       then
   r@  c@'  40  and  if  cr  30 ?y  ." compile-only'"    then
   r>drop   ;

defer  rjmp_(-;)

defer  _.n.line.program

variable   mask.of.5cs10#2cjcj11#     f800d000  mask.of.5cs10#2cjcj11#  !

: .?ef  ( a' -- )   c000  d762  between  if   5d ?y  ." ?"  then  ;



: decompile.a.range.instruction  ( upper lower -- )  2dup  max  -rot  min  \   no.\..XXXX..RCALL  off
  do    0 \ i   430eForthAL03.headless.word?
     if     i   over   _.n.line.program  drop  100  +  \  .headless.word
     else       i  32@'  0~15<->16~31    mask.of.5cs10#2cjcj11#  @  and
        case    op.code.of.call @ ( call )  of cr i  (.12345678..55.66.77.88.......)  30y  i ( 2+ )  32@'  0~15<->16~31  _5..10#2.j.j11#>24#  dup>r  dup   dup  cfa'.of.doLIST  @  =
                if      2drop
                else    cfa'>cfa  if  .":"?  on   .name  ( bs ) 8 emit  .":" ( drop ) (  .id'  drop ) else  ."  call."   ( u. )  then
                then                                      r>   i  check.special.instruction?  4+   swap 70 ?y  ." \"  dup  9 u.r  .?ef  endof
                op.code.of.jmp  @ ( jmp  )  of cr i  (.12345678..55.66.77.88.......)  30y  i ( 2+ )  32@'  0~15<->16~31  _5..10#2.j.j11#>24#  dup>r >name'  .id'   force.-;? @ if  ."   -; "  else  ."  jmp " then
                                                          r>   i  check.special.instruction?  4+   swap 70 ?y  ." \"  dup  9 u.r  .?ef  endof
                doCOLON? @
                if      cr i  (.1234..55.66..........)  30y  i  32@'  0~15<->16~31   _5..10#2.j.j11#>24#   >name'  .id'  \ 2 \ swap
                           i  check.special.instruction?  ?dup  if    else  2  then
                else    cr i   rjmp_(-;)  ?dup  if  +  else  _disassem  then  i  -  ?dup  0=   if  2  then  \   swap
                then    swap
        endcase
     then
  +loop  ;

: decompile.a.range.instruction  ( upper lower -- )  2dup  max  >r   min
  begin    _U1          dup  r@   u>
  until    drop  r>drop   ;

: decompile.a.range.instruction(seperate)  ( upper lower -- )  2dup  max  >r   min
  begin    _U1(seperate)   dup  r@   u>
  until    drop  r>drop   ;

: decompile.a.word'    ( nfa' -- )
  ?dup  0= if  exit  then       doCOLON? off        \ Dr. C. H. Ting's eForth
  dup 4-  16@'  ( 32@' )  32@'  a86212b0 ( doCOLON ) = if   doCOLON? on  then    \.3f---
  cr    >r   r@  4-  (.12345678..12345678.......)   \ lfa
  cr    r@           (.12345678..55.66.77.88.99.aa.)nfa   ."   ef:  "  r@  count'  1f and  tuck ( 2drop ) type'     r@  nfa'>cfa'  show.cfa+comment \  r@  .id'
        r@  +   1+  mips32? @  if  multiple.of.4.aligned  else  even.aligned  then
        r@      find.next.instruction's.nfa'.or.here'  dup  0=
        if      drop  50  bounds
        else    last'.word?  @
           if   last'.word?  off
           else 4-
           then           swap
        then    2dup  -   abs  2ff ( 0ff )  >   if  nip  300 ( 0FF )  bounds   then
\       then    2dup  -   abs  438 ( 0ff )  >   if  nip  438 ( 0FF )  bounds   then
  decompile.a.range.instruction
  r>  .immediate/compile-only/smudge   ;

: decompile.a.word'    ( nfa' -- )   head.Forth?  @   not  if   head>target   then
  ?dup  0= if  exit  then       doCOLON? off        \ Dr. C. H. Ting's eForth
  dup 4-  16@'  ( 32@' )  32@'  a86212b0 ( doCOLON ) = if   doCOLON? on  then    \.3f---
  >r    +pcfa? @
  if    cr         r@  8 - (.12345678..12345678.......)   \ pcfa
  then  cr         r@  4-  (.12345678..12345678.......)   \ lfa
        cr         r@      (.12345678..55.66.77.88.99.aa.)nfa   ."   ef:  "  r@  count'  1f and  tuck ( 2drop ) type'     r@  nfa'>cfa'  show.cfa+comment \  r@  .id'
\       r@   +     1+  mips32? @  if  multiple.of.4.aligned  else  even.aligned  then
\       r@         8 -  32@'  ( cfa' )  \   multiple.of.4.aligned
        r@         nfa'>cfa'
        r@         find.next.instruction's.nfa'.or.here'  dup  0=
        if         drop  50  bounds
        else       last'.word?  @
           if      last'.word?  off
           else    +pcfa? @  if  8  else  4  then  -     2-
           then              swap
        then       2dup  -   abs  2ff ( 0ff )  >   if  nip  300 ( 0FF )  bounds   then
\       then       2dup  -   abs  438 ( 0ff )  >   if  nip  438 ( 0FF )  bounds   then
  decompile.a.range.instruction
  r>  .immediate/compile-only/smudge   ;

stm32F407eF720?  @
#if
: decompile.a.word'    ( nfa' -- )   head.Forth?  @   not  if   head>target   then
  ?dup  0= if  exit  then       doCOLON? off        \ Dr. C. H. Ting's eForth
  dup 4-  16@'  ( 32@' )  32@'  a86212b0 ( doCOLON ) = if   doCOLON? on  then    \.3f---
  >r    +pcfa? @
  if    cr         r@  8 - (.12345678..12345678.......)   \ pcfa
  then  cr         r@  4-  (.12345678..12345678.......)   \ lfa
        cr         r@      (.12345678..55.66.77.88.99.aa.)nfa \ ."   ef:  "  r@  count'  1f and  tuck ( 2drop ) type'     r@  nfa'>cfa'  show.cfa+comment \  r@  .id'
\       r@   +     1+  mips32? @  if  multiple.of.4.aligned  else  even.aligned  then
\       r@         8 -  32@'  ( cfa' )  \   multiple.of.4.aligned
        r@         nfa'>cfa'
        r@         find.next.instruction's.nfa'.or.here'  dup  0=
        if         drop  50  bounds
        else       last'.word?  @
           if      last'.word?  off
           else    +pcfa? @  if  8  else  4  then  -     2-
           then              swap
        then       2dup  -   abs  2ff ( 0ff )  >   if  nip  300 ( 0FF )  bounds   then
\       then       2dup  -   abs  438 ( 0ff )  >   if  nip  438 ( 0FF )  bounds   then
  decompile.a.range.instruction
  r>  .immediate/compile-only/smudge   ;
#then










: nfa'>cfa'mecrisp4F120 ( nfa' -- cfa' )  count'  1f and  +  even.aligned  ;

: decompile.a.word'mecrisp4F120    ( nfa' -- )   head.Forth?  @   not  if   head>target   then
  ?dup  0= if  exit  then    doCOLON? off        \ Dr. C. H. Ting's eForth
  dup   4-   16@'  ( 32@' )  32@'  a86212b0 ( doCOLON ) = if   doCOLON? on  then    \.3f---
  >r    +pcfa? @   drop   0
  if    cr         r@  8 - (.12345678..12345678.......)   \ pcfa
  then  cr         r@  4-  (.12345678..12345678.......)   \ lfa
        cr         r@      (.12345678..55.66.77.88.99.aa.)nfa   ."    t:  "  r@  count'  1f and  tuck ( 2drop ) type'     r@  nfa'>cfa'  show.cfa+comment \  r@  .id'
        r@         nfa'>cfa'mecrisp4F120
        r@         find.next.instruction's.nfa'.or.here'mecrisp4F120  dup  0=
        if         drop  50  bounds
        else       last'.word?  @
           if      last'.word?  off
           else    +pcfa? @  if  8  else  4  then  -     2-
           then              swap
        then       2dup  -   abs  2ff ( 0ff )  >   if  nip  300 ( 0FF )  bounds   then
  decompile.a.range.instruction
  r>  .immediate/compile-only/smudge   ;








: DECOMPILE.A.WORD'MECRISP4F120     ( nfa' -- )       multiple.decompile? @
  if                              VIRTUE.FORTH? @      DISASSEM.SPECIAL? @ 2>r >r
          C.TYPE? @    H.MODE @
        0 C.TYPE? !  0 H.MODE ! 1 VIRTUE.FORTH? !   0  DISASSEM.SPECIAL? !     r@   DECOMPILE.A.WORD'MECRISP4F120
     swap C.TYPE? !    H.MODE ! 0 VIRTUE.FORTH? !   0  DISASSEM.SPECIAL? !     r@   DECOMPILE.A.WORD'MECRISP4F120
                                1 VIRTUE.FORTH? !   0  DISASSEM.SPECIAL? !     r@   DECOMPILE.A.WORD'MECRISP4F120
                                1 VIRTUE.FORTH? !   1  DISASSEM.SPECIAL? !     r>   DECOMPILE.A.WORD'MECRISP4F120
                              2r> VIRTUE.FORTH? !      DISASSEM.SPECIAL? !
  else   DECOMPILE.A.WORD'MECRISP4F120
  then   ;

\ variable  (nfa')
\ variable      multiple.decompile?    \  multiple.decompile?  on
\ : md  ( -- )  multiple.decompile?  dup  @   if  off  else  on  then  (nfa') @  DECOMPILE.A.WORD'MECRISP4F120  ( last.u  @  _u  drop )  ;
  : md  ( -- )  multiple.decompile?  dup  @   if  off  else  on  then   last.u  @  _u  drop  ;







: decompile.a.word   ( nfa' -- )       multiple.decompile? @
  if      C.TYPE? @    DISASSEM.SPECIAL? @    VIRTUE.FORTH? @   H.MODE @   2>r  2>r   >r
        0 C.TYPE? !  0 DISASSEM.SPECIAL? !  0 VIRTUE.FORTH? ! 0 H.MODE !   om r@   decompile.a.word'
                                                                           om r@   decompile.a.word'
        0 C.TYPE? !  0 DISASSEM.SPECIAL? !  0 VIRTUE.FORTH? ! 1 H.MODE !   om r@   decompile.a.word'
                                                                           om r@   decompile.a.word'
        0 C.TYPE? !  0 DISASSEM.SPECIAL? !  1 VIRTUE.FORTH? ! 1 H.MODE !   om r@   decompile.a.word'
                                                                           om r@   decompile.a.word'
        1 C.TYPE? !  1 DISASSEM.SPECIAL? !  1 VIRTUE.FORTH? ! 1 H.MODE !   om r@   decompile.a.word'
                                                                           om r>   decompile.a.word'
 2r> 2r>  C.TYPE? !    DISASSEM.SPECIAL? !    VIRTUE.FORTH? !   H.MODE !
  else   decompile.a.word'
  then   ;

: chech.special.number  ( from to n -- )    -rot
  2dup   max    -rot   min
  ?do    dup    i  16@'  =  if  cr   i 6 u.r   then
  loop   drop   ;

: csn   ( from to n -- )         chech.special.number  ;
: csn'  ( n --- )  0  ffff  rot  chech.special.number  ;

: disassem.a.range.instruction   ( upper lower -- )   2dup  max  -rot  min
  begin   cr   _disassem   2dup  <=
  until   2drop  ;

defer  _disassem.call/jmp?
defer  _disassem.a.range.instruction  ( upper lower -- )

: .doUSER/doCON/doVAR...  ( a' -- )   16@'
  case     cfa'.of.doCOLON     @  of  30y  ." doCOLON "    endof
           cfa'.of.doVAR       @  of  30y  ." doVAR  "     endof
           cfa'.of.doUSER      @  of  30y  ." doUSER "     endof
           cfa'.of.doDOES      @  of  30y  ." doDOES "     endof
           cfa'.of.doCOMPILE   @  of  30y  ." doCOMPILE"   endof
           cfa'.of.doCON       @  of  30y  ." doCON"       endof
\          cfa'.of.do2CONstant @  of  30y  ." do2CONSTANT" endof
  endcase  ;

: .code/:/...  ( a' -- )       nfa'>cfa'  >r
  r@  16@'  r@  -  2                  =  if  ."  code  "       r>drop   exit  then
  r@  16@'  dup    2-  16@'           =  if  ."  code  "       r>drop   exit  then
  r@  16@'  32@'   46304536           =  if  ."  code  "       r>drop   exit  then
  r@  16@' ( cfa'.of.doUSER ) e0ae    =  if  ."  USER  "       r>drop   exit  then
  r@  16@'  cfa'.of.doCOLON        @  =  if  ."     :  "       r>drop   exit  then
  r@  16@'  cfa'.of.doCON          @  =  if  ."  constant  "   r>drop   exit  then
  r@  16@'  cfa'.of.do2CONstant    @  =  if  ." 2constant  "   r>drop   exit  then
  r@  16@'  cfa'.of.doVAR          @  =  if  ."  variable  "   r>drop   exit  then
                                             ."     :  "
  r>drop    ;

: check.alias  ( a' -- )  dup>r  16@' 2-  CFA'>NFA
  if     r@  16@'  2-  r@  <>
         if      ."  '' "    .id   ."   alias "  r@ cfa'>.id  drop
         else    drop
         then
  then   r>drop  ;

: .xxxx+2more  ( n --- )  dup  .xxxx  getxy 2>r  11 ?y  ffff and  100 /mod  swap .xx  space .xx  2r>  gotoxy  ;
\ *************************************************************************
variable continue.display?

: decompile.all.cortex.m4' ( --)     base  @  >r  hex  \ 430eForthAL03
  c000   0a  _.n.line.program  drop
  get.total.instructions    dup   0  \ 1  \  0  \ 2
  ?do    dup   i  -  0   last' @  -rot
         ?do   4-    32@'
         loop            decompile.a.word          continue.display?  @  not  if  key 1b = if  leave  then  then
  loop   r>   base  !    drop   last' @  decompile.a.word ;

variable  total.instructions

: decompile.all.cortex.m4' ( --)     base  @  >r  hex  \ 430eForthAL03
  c000   0a  _.n.line.program  drop
  get.total.instructions    total.instructions  !   0  \ 1  \  0  \ 2
  ?do    total.instructions   @  i  -  0   last' @  -rot
         ?do   4-    32@'
         loop            decompile.a.word          continue.display?  @  not  if  key 1b = if  leave  then  then
  loop   r>   base  !    drop   last' @  decompile.a.word ;

: decompile.all.cortex.m4
  c000   0a  _.n.line.program  drop
  get.total.instructions    dup   0  \ 2
  ?do    dup   i  -  0   last' @  -rot
         ?do   4  -  32@'
         loop            decompile.a.word          continue.display?  @  not  if  key 1b = if  leave  then  then
  loop   r>   base  !    drop  ; \   last' @  decompile.a.word ;







: decompile.all.cortex.m4.mecrisp4F120    \ ti stellaris Launchpad
  c000   0a  _.n.line.program  drop
  get.total.instructions    dup   0  \ 2
  ?do    dup   i  -  0   last' @  -rot
         ?do   4  -  32@'
         loop            decompile.a.word          continue.display?  @  not  if  key 1b = if  leave  then  then
  loop   r>   base  !    drop  ; \   last' @  decompile.a.word ;





defer  _all

VERSION#  ( 61400 )  decimal  420000  430000  between   hex    drop  0
#if
: words''     continue.display?  on                cls     hex   MAXIZE.LIST
              cortex.m4?          @  if  decompile.all.cortex.m4           then
              avr328?             @  if  _all                              then  ;
: words'''    md  words''  ;
#else
: words''     continue.display?  on                cls     hex \ MAXIZE.LIST
              cortex.m4?          @  if  decompile.all.cortex.m4           then
              avr328?             @  if  _all                              then  ;
: words'''    md  words''  ;
#then

: decompile.all.msp430'   ( --)   base  @  >r  hex  \ msp430eForth
  get.total.instructions    dup   1  \ 2
  ?do    dup   i  -  0   last' @  -rot
         ?do   2-    @'
         loop   cr  ."   t:  "  .id'   \  key 1b = if  leave  then
  loop   r>   base  !    drop  quit  ; \  last' @   decompile.last.instruction.430ef    ;

: |      c,'  ;
: ||    32,'  ;

: hex>image8          ( from to+1 -- )     2dup  max  -rot   min   dup   cr   0a u.r  ."   org "  cr
  do     i  10 mod   0=    if   cr  ."   ( "  i 9 u.r  ."  )   "  then
         i  c@'   .xxx   ."  | "
  loop   cr    ;

: hex>image    hex>image8  ;  ( from to+1 -- )
: >h8          hex>image8  ;  ( from to+1 -- )

: msp430.eForth.hex>image          ( --)   cls
  10000  a000              cr  ."   a000 org "  cr
  do     i  10 mod   0=    if   cr  ."   ( "  i 9 u.r  ."  )   "  then
         i  c@'   .xxx   ."  | "
  loop   quit   ;

: hex>image32         ( from to+1 -- )     2dup  max  -rot   min   dup   cr   0a u.r  ."   org "  cr
  do     i  20 mod   0=    if   cr  ."   ( "  i 9 u.r  ."  )   "  then
         i  32@'    .xxxxxxxx   ."  || "      4
  +loop   cr    ;

: >h32   hex>image32  ;       ( from to+1 -- )

: msp430.eForth.hex>image          ( --)   cls
  10000  a000              cr  ."   a000 org "  cr
  do     i  10 mod   0=    if   cr  ."   ( "  i 9 u.r  ."  )   "  then
         i  c@'   .xxx   ."  | "
  loop   quit   ;
: 430eForthAL03.hex>image  ( --)   cls   e000  c000  hex>image  10000  ff00  hex>image  ;
 \ *************************************************************************
variable  xxxx?          2 xxxx?  !

: nfa'>cfa'(mecrispCMx)  ( nfa' -- cfa' )  dup>r  c@'  1f  and  r>  +  xxxx?  @  +  fffffffe  and ;

: t:words.mecrispCMx    ( last' --)  last' ! ( get.total.instructions )  nnnn?  @  \ 2482  last' !  \ stellaris LM4F120
  last' @
  nnnn?  @    0
  do     cr   base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  ."   ( " 6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa'(mecrispCMx)  dup 6  u.r  ."  ) " 6 u.r ."  org  t:  "  count'  1f and  type'
         r>    cortex.m4? @  if  4-  32@' 6 + ( lfa>nfa  ) else  2-  @'  then  ?dup   0=   key?  or
         drop
  loop   drop  cr   ;

:  20@'  ( a' -- n )   32@'  fFFFF  and  ;


: NFA'>CFA'(TACHYON)    COUNT' + 1+ ;

variable  total.instructions
\ -----------------------------------------------------------------------------------------
:  get.total.instruction.tachyon(last'=5cd7)  ( -- n )  5cd7 ( 6a9a ) 1000    0
   do      dup   32@'  0=   if   drop    i   leave   then
           nfa'>cfa'(tachyon)    2+      dup   6a99  =   if   1+   then
   loop    dup  total.instructions  ! ;
\ -----------------------------------------------------------------------------------------
: get.total.instructions.stm32F407eF720(32@')  ( -- n )  ( 2098  last' ! )   nnnn?  off  last'(adjacent)   @
  begin   1  nnnn?  +!    4  -  32@'   dup   0  =
  until   drop  nnnn?  @  dup  total.instructions  !  ;

: get.total.instructions.stm32F407eF720  ( -- n )  ( 2098  last' ! )   nnnn?  off  last'(adjacent)   @
  begin   1  nnnn?  +!    4  -  16@'   dup   0  =
  until   drop  nnnn?  @  dup  total.instructions  !  ;

: instructions.n>nfa'.stm32F407eF720'  ( n -- nfa' )   >r   nnnn?  off   last'(adjacent)  @
  begin     r@   nnnn?  @    <>
  while     1    nnnn?  +!    4  -  20@'
  repeat    r>drop   ;



: nfa'>cfa.stm32F407eF720  ( nfa' -- cfa' )   count'  1f  and  +  ALIGNED(4*)  ( EVEN.ALIGNED )  ;

create   instruction.n.table                 8000  allot  \  2048*4*2  \ to store nfa' and cfa'
create   instruction.n.table(tachyonForth)   8000  allot  \  2048*4*2  \ to store nfa' and cfa'  + pfa' + ????

: instructions.n>nfa'(tachyonForth)   ( n -- nfa' )   >r   nnnn?  off  5cd7  \ last'(adjacent)  @
  begin     r@   nnnn?  @    <>
  while     1    nnnn?  +!   nfa'>cfa'(tachyon)  2+    dup  6a99  =  if   1+   then
  repeat    r>drop   ;







variable last'.old

: update.instruction.n.table   ( -- )  last'(adjacent)  @  ( nfa' )  last'.old  @  =  if  exit  then
  get.total.instructions.stm32F407eF720      dup  0
  do     dup   i  -   instructions.n>nfa'.stm32F407eF720'   dup  nfa'>cfa.stm32F407eF720  swap  instruction.n.table  i  8  *  +  2!
  loop   drop  last'(adjacent)  @   last'.old   !  ;


defer  _>pfa'

: .id(tachyon.nfa')  ( nfa' -- )  ?dup   if  count'  type'  SPACE  then  ;   \ nfa'>cfa'(tachyon)

: update.instruction.n.table(tachyonForth)   ( -- )    5cd7  last'(adjacent) !
  last'(adjacent)  @  ( nfa' )   last'.old  @  =  if  exit  then
  get.total.instruction.tachyon(last'=5cd7)    dup  1+  0
  do     dup   i  -   instructions.n>nfa'(tachyonForth)   dup  nfa'>cfa'(tachyon)  swap  2dup  instruction.n.table(tachyonForth)  i  10  *  +       2!
         drop  dup  _>pfa' swap 16@'   instruction.n.table(tachyonForth)  i  10  *  +  8 +  2!
  loop   drop  last'(adjacent)  @   last'.old   !  ;


: instructions.n>nfa'.stm32F407eF720  ( n -- nfa' ) update.instruction.n.table  8 *  instruction.n.table  +  @  ;

: dump.instruction.n.table  ( -- )  update.instruction.n.table                  get.total.instructions.stm32F407eF720  0
  do     cr  i  5 u.r(decimal)   i  5 u.r   i   8  *  instruction.n.table  +  2@  0b u.r   0b u.r
  loop   ;

: dump.instruction.n.table(tachyonForth)  ( -- )  cr  ."                  nfa'       cfa'                       pfa' "  cr
  update.instruction.n.table(tachyonForth)      get.total.instruction.tachyon(last'=5cd7) 1+  1
  do     cr  i  5 u.r(decimal)   i  5 u.r   i  10  *  instruction.n.table(tachyonForth)  +  dup>r  2@  dup>r  0b u.r   0b u.r
         r>  r>   8 +  2@  100 /mod  swap  0b spaces  .xx   space  .xx   0b u.r      ."        \ "     .ID(TACHYON.NFA')
  loop   ;

: dump.instruction.n.table(tachyonForth)^ ( -- )  cr  ."                  nfa'       cfa'                       pfa' "  cr
  update.instruction.n.table(tachyonForth)  1   get.total.instruction.tachyon(last'=5cd7)  tuck
  do     cr  dup  i  - 1+  dup  5 u.r(decimal)    5 u.r   i  10  *  instruction.n.table(tachyonForth)  +  dup>r  2@  dup>r  0b u.r   0b u.r
         r>  r>   8 +  2@  100 /mod  swap  0b spaces  .xx   space  .xx   0b u.r      ."        \  "     .ID(TACHYON.NFA')  -1
  +loop  drop  ;





: dump.instruction.n.table(tachyonForth)  ( -- )  cr  ."                  nfa'           cfa'              pfa' "  cr
  update.instruction.n.table(tachyonForth)      get.total.instruction.tachyon(last'=5cd7) 1+  1
  do     cr       i             5 u.r(decimal)   i  5 u.r   i  10  *  instruction.n.table(tachyonForth)  +  dup>r  2@  dup>r  0b u.r  dup 1- c@' 7 spaces .xx  6 u.r
         r>  r>   8 +  2@  100 /mod  swap  2 spaces  .xx   space  .xx   0b u.r      ."        \ "     .ID(TACHYON.NFA')
  loop   ;

: dump.instruction.n.table(tachyonForth)^ ( -- )  cr  ."                  nfa'           cfa'              pfa' "  cr
  update.instruction.n.table(tachyonForth)  1   get.total.instruction.tachyon(last'=5cd7)  tuck
  do     cr  dup  i  - 1+  dup  5 u.r(decimal)      5 u.r   i  10  *  instruction.n.table(tachyonForth)  +  dup>r  2@  dup>r  0b u.r  dup 1- c@' 7 spaces .xx  6 u.r
         r>  r>   8 +  2@  100 /mod  swap  2 spaces  .xx   space  .xx   0b u.r      ."        \  "     .ID(TACHYON.NFA')  -1
  +loop  drop  ;





: instructions.n>nfa'.stm32F407eF720 ( n -- nfa' )   >r   nnnn?  off   last'(adjacent)  @
  begin     r@   nnnn?  @    <>
  while     1    nnnn?  +!    4  -  20@'
  repeat    r>drop   ;

: .head    ( nfa' -- )  ?dup  0=  if  exit  then   \.3F---
  cr  ."   ("
  ."   lfa: "   dup>r     4  -  ( nfa'>lfa' )     20@'  9 u.r
  ."   nfa: "   r@   9 u.r      r@  count'  1f  and   bounds
  ."   cfa: )"  r>  nfa'>cfa.stm32F407eF720   30  ?y 9 u.r   ."   org  t:  "   do   i c@'  emit  loop  ;

: .head        ( nfa' -- )  >r
  cr  r@  4 -  (.12345678..12345678.......)   \ lfa
  cr  r>  (.12345678..55.66.77.88.99.aa.)nfa   ;

: .n'th.word's.head  ( n -- )  dup>r   instructions.n>nfa'.stm32F407eF720
  cr  dup 4 -  (.12345678..12345678.......)
  total.instructions   @   r@  -  dup  34 ?y  ." \  ***" 4 u.r(decimal)  ."  ***"    5 u.r   r@  6 u.r(decimal)   r>  6 u.r  \ lfa
  cr           (.12345678..55.66.77.88.99.aa.)nfa   ;

: .a.word  ( n -- )  dup  0=
  if      .n'th.word's.head    last'(adjacent)  @   50 +      last'(adjacent)  @
  else    dup>r  1-  instructions.n>nfa'.stm32F407eF720   4-  r@  .n'th.word's.head
             r>      instructions.n>nfa'.stm32F407eF720
  then    nfa'>cfa.stm32F407eF720
  begin   _U1         dup  2 pick   >=
  until   2drop   ;

: words'.stm32F407eF720  ( -- )  cr  ( 2098  last' ! )   nnnn?  off  last'(adjacent)  @
  begin   \.3F---
          cr  ."   ( lfa: "   dup>r     4  -  ( nfa'>lfa' )   dup  9 u.r    2 spaces  20@'  9 u.r    ."  )"
          cr  ."   ( nfa: "   r@   9 u.r   2 spaces   r@  count'  1f  and   bounds
          2dup    do     i c@'  .xx   space  loop   ." )"
          cr  ."   ( cfa: "   r@  nfa'>cfa.stm32F407eF720   9 u.r  ."  )"  20  ?y ." t:  "  do   i c@'  emit  space  loop
          1  nnnn?  +!   r>   4  -  20@'   dup   0  =
  until   drop  ;

: words'.stm32F407eF720.org  ( -- )  cr ( 2098  last' ! )  0  nnnn?  !  last'(adjacent)  @   \ mpe407
  begin    cr  ."   ("  nnnn?  @  dup   4 u.r(decimal)    6 u.r
          ."   lfa: "   dup>r     4  -  ( nfa'>lfa' )     20@'  9 u.r
          ."   nfa: "   r@   9 u.r      r@  count'  1f  and   bounds
          ."   cfa: )"  r@  nfa'>cfa.stm32F407eF720   36  ?y 9 u.r   ."   org  t:  "   do   i c@'  emit  loop
          1  nnnn?  +!   r>   4  -  20@'   dup   0  =
  until   drop  ;

: words'.mpe407.org.single  ( -- )  cr ( 2098  last' ! )  0  nnnn?  !  last'(adjacent)  @   \ mpe407
  begin    cr  ."   ("  nnnn?  @  dup   5 u.r(decimal)    5 u.r
          ."   lfa: ) " dup>r     dup   4-  9 u.r     4-  ( nfa'>lfa' )     20@'  ."  ( "  9 u.r
          ."   nfa: "   r@   9 u.r      r@  count'  1f  and   bounds
          ."   cfa: "   r@  nfa'>cfa.stm32F407eF720   46  ?y 9 u.r   ."  ) org  t:  "   do   i c@'  emit  loop
          1  nnnn?  +!   r>   4  -  20@'   dup   0  =
  until   drop  ;

: words'.mpe407.org.all  ( -- )
  6a54   6a14
  do     i   32@'  ffffff  and  last'(adjacent)  !  words'.mpe407.org.single   4
  +loop  ;

variable  distance
variable  next.instruction's.lfa'
variable  next.instruction's.nfa'
variable  next.instruction's.cfa'

: cfa*>next.instruction's.lfa'+nfa'+cfa'.mpe407  ( cfa*1 -- lfa'2 nfa'2 cfa'2 -1 | 0 )   @   ( cfa'1 )   fffffff  distance  !   next.instruction's.cfa'  off
  LFA+NFA+CFA.COUNTER  @     0
  ?do     LFA+NFA+CFA.array  i  +  head.spacing  @  10  -  +  ( cfa* )  @  ( cfa'x )
          2dup   ( cfa'1  cfa'x )  <
          if       2dup  -  abs  dup   distance  @  <
             if    distance  !   drop
                \  LFA+NFA+CFA.array  i  +        ( lfa* ) @  dup                                        next.instruction's.lfa'  !
                \                                  dup -1  <> if  4+  then                               next.instruction's.nfa'  !
                   LFA+NFA+CFA.array  i  +  head.spacing   @  10  -  + ( cfa* ) dup  @                   next.instruction's.cfa'  !
                                                                       e8  -  ( cfa*->nfa* 8 + ) @  dup  next.instruction's.nfa'  !
                                                                                                    4-   next.instruction's.lfa'  !
             else  2drop
             then
          else     drop
          then     head.spacing    @
  +loop            drop    dup
  if      next.instruction's.lfa'  @
          next.instruction's.nfa'  @
          next.instruction's.cfa'  @   -1
  then    ;
              
\  DF16F0   cfa*>next.instruction's.lfa'+nfa'+cfa'.mpe407

: cfa'>next.instruction's.lfa'.mpe407  ( cfa' -- next.lfa' / 0 )
  cfa'->cfa*?  if  cfa*>next.instruction's.lfa'+nfa'+cfa'.mpe407  >r        2drop  r>  else  0  then  ;

: cfa'>next.instruction's.nfa'.mpe407  ( cfa' -- next.nfa' / 0 )
  cfa'->cfa*?  if  cfa*>next.instruction's.lfa'+nfa'+cfa'.mpe407  >r   rot  2drop  r>  else  0  then  ;

: cfa'>next.instruction's.cfa'.mpe407  ( cfa' -- next.cfa' / 0 )
  cfa'->cfa*?  if  cfa*>next.instruction's.lfa'+nfa'+cfa'.mpe407  >r  -rot  2drop  r>  else  0  then  ;

: words'.mpe407     ( cfa' -- )  0  >r
  begin  cr    ."   ("  r>  1+  >r  r@  5  u.r(decimal)  r@  5  u.r(hex)  ."  )"   dup  9  u.r
         cfa'>next.instruction's.cfa'.mpe407  drop  ."    "   dup  CFA'>.ID(LNC)   dup  0=
  until  drop  r>drop  ;

: words'.mpe407     ( cfa' -- )  0  >r
  begin  cr    ."   ("  r>  1+  >r  r@  5  u.r(decimal)  r@  5  u.r(hex)  ."  )"   dup  9  u.r
         ."   "   dup  CFA'>.ID(LNC)
         cfa'>next.instruction's.cfa'.mpe407  drop   dup  0=
  until  drop  r>drop  ;

defer  _u1

: decompile.mpe407.single.word  ( cfa' -- )   dup  cfa'>next.instruction's.lfa'.mpe407
  if    >r    begin  _u1  ( lower1 )  dup  r@  >=  until   r>drop
  then  drop  ;

: decompile.mpe407.part  ( cfa' -- )  0  >r
  begin  cr    ."   ("  r>  1+  >r  r@  5  u.r(decimal)  r@  5  u.r(hex)  ."  )"   dup  9  u.r
         ."   "   dup   decompile.mpe407.single.word  \  CFA'>.ID(LNC)
         cfa'>next.instruction's.cfa'.mpe407  drop   dup  0=
  until  drop  r>drop  ;

defer  _cfa'>head(lnc)

defer  _N>.HEAD(LNC)

: decompile.mpe407.part  ( cfa' -- )  0  >r
  begin  \.3F***  ."   ("  r>  1+  >r  r@  5  u.r(decimal)  r@  5  u.r(hex)  ."  )"  \  dup  9  u.r
         dup>r  CFA'>N(LNC)  if  _N>.HEAD(LNC)  then  ( CFA'>HEAD )  \  _cfa'>head(lnc)
         r@     decompile.mpe407.single.word  \  CFA'>.ID(LNC)
         r>     cfa'>next.instruction's.cfa'.mpe407  drop   dup  0=
  until  drop   r>drop  ;

: decompile.mpe407.all  ( -- )  3c8  decompile.mpe407.part  ;

\ 3c8  words'.mpe407
\ -------------------------------------------------------------------------------------
: words'.stm32F407eF720.org^ ( -- )
  cr  get.total.instructions.stm32F407eF720   1-  0  over       0  nnnn?  !
  do      i    instructions.n>nfa'.stm32F407eF720
          cr  ."   ("   over  nnnn?  @   -  dup  4 u.r(decimal) 6 u.r \   nnnn?  @  4 u.r(decimal)
          ."   lfa: "   dup>r     4  -  ( nfa'>lfa' )     20@'  9 u.r
          ."   nfa: "   r@   9 u.r      r@  count'  1f  and   bounds
          ."   cfa: )"  r>  nfa'>cfa.stm32F407eF720   36  ?y 9 u.r   ."   org  t:  "   do   i c@'  emit  loop
          1  nnnn?  +!  -1
  +loop   drop  ;


: words'.stm32F407eF720.org^(lfa') ( -- )
  cr  get.total.instructions.stm32F407eF720   1-  0  over       0  nnnn?  !
  do      i    instructions.n>nfa'.stm32F407eF720
          cr  ."   ("   over  nnnn?  @   -  dup  4 u.r(decimal) 6 u.r \   nnnn?  @  4 u.r(decimal)
          ."   lfa: "   dup>r     4  -  ( nfa'>lfa' )     20@'  9 u.r
          ."   nfa: "   r@   9 u.r      r@  count'  1f  and   bounds
          ."   cfa: "   r@   nfa'>cfa.stm32F407eF720    36  ?y 9 u.r   ."   lfa: ) "
          r>   4-  9 u.r    ."   org  t:  "   do   i c@'  emit  loop
          1  nnnn?  +!  -1
  +loop   drop  ;


defer _8u

: decompile.stm32F407eF720' ( -- )   cr  0  _8u   0  1  get.total.instructions.stm32F407eF720  1-
  do       \.3f***   i    .a.word    key?  if  leave  then   -1
  +loop    ;

: decompile.stm32F407eF720  ( -- )   cr  0  _u _u _u _u   0  get.total.instructions.stm32F407eF720  1-
  do       \.3f***   i    .a.word    key?  if  leave  then   -1
  +loop    ;

stm32F407eF720R?  @
#if
: decompile.stm32F407eF720  ( -- )   cr  0  _u _u _u _u   0  get.total.instructions.stm32F407eF720 ( the same as get.total.instructions )  1-
  do       \.3f***   i    .a.word    key?  if  leave  then   -1
  +loop    ;
#then

: words'.stm32F407eF720.all ( -- )   words'.stm32F407eF720.org    words'.stm32F407eF720.org^
  decompile.stm32F407eF720  ;

: GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   ( -- n )
  0E2/18E/156|429/407/103    last' !   nnnn?  off  last'  @  6 - begin  1  nnnn?  +!   32@'  dup  3aac  over -1 = or =  until   drop  nnnn?  @  ;


: GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   ( -- n )      0E2/18E/156|429/407/103   32@'  2D2D2D1E   <>    if   -1   exit  then
  0E2/18E/156|429/407/103    last' !   nnnn?  off  last'  @  6 - begin  1  nnnn?  +!   32@'  dup  3aac  over -1 = or =  until   drop  nnnn?  @  ;
                                                                             ( lfa' of ---.Flash.Dictionary.---  )

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)   ( -- )   0E2/18E/156|429/407/103   32@'  2D2D2D1E   <>    if  exit  then
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)
  0E2/18E/156|429/407/103     last' !   nnnn?  off   last'  @  6 -  ( lfa' )
  begin      dup>r     r@  6  +     r@  NFA'>CFA'(MECRISP)  cfa'>n(lnc)  drop  LFA+NFA+CFA.ARRAY  8  +  +  !
                                    r@  NFA'>CFA'(MECRISP)  cfa'>n(lnc)  drop  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @
                                    r>  NFA'>CFA'(MECRISP)  cfa'>n(lnc)  drop  LFA+NFA+CFA.ARRAY  0  +  +  !
             1  nnnn?  +!     32@'  dup  3aac ( -1 ) =
  until   drop  ;

: NFA'>CFA'(MECRISP)'   ( NFA' -- CFA' )   count'  ( 1f  and  1+ )  +  1+  ffffFFFE  and  ;

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)   ( -- )   GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)
  0E2/18E/156|429/407/103   32@'  2D2D2D1E   <>    if   exit  then 6  -  ( dc lfa' )
  begin   >r                        r@ 6 + NFA'>CFA'(MECRISP)'  cfa'>n(lnc) drop  LFA+NFA+CFA.ARRAY  8  +  +  !
                                    r@ 6 + NFA'>CFA'(MECRISP)'  cfa'>n(lnc) drop  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @
                                    r@ 6 + NFA'>CFA'(MECRISP)'  cfa'>n(lnc) drop  LFA+NFA+CFA.ARRAY  0  +  +  !
          r>  6  -   32@'  dup  3aac ( -1 ) =
  until   drop  ;

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)   ( -- )   GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)
  0E2/18E/156|429/407/103   32@'  2D2D2D1E   <>    if   exit  then 6  -  ( dc lfa' )
  begin   >r                        r@ 6 + dup NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                      then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @  then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  !                      then
          r>  32@'  dup  3aac ( -1 ) =
  until   drop  ;

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)(n)   ( nfa' -- )  \  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    ( 0E2/18E/156|429/407/103  )
  6  -  ( dc lfa' )
  begin   >r                        r@ 6 + dup NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                      then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @  then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  !                      then
          r>  32@'  dup  3aac ( -1 ) =
  until   drop  ;








: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)   ( -- )   GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)
  0E2/18E/156|429/407/103   6  -  ( dc lfa' )
  begin   >r                        r@ 6 + dup NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                      then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @  then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  !                      then
          r>  32@'  dup  3aac ( -1 ) =
  until   drop    2drop  ;

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)(n)   ( nfa' -- )  \  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    ( 0E2/18E/156|429/407/103  )
    6  -  ( dc lfa' )
  begin   >r                        r@ 6 + dup NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                      then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @  then
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  !                      then
          r>  32@'  dup  3aac ( -1 ) =
  until   drop  ;









: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)   ( -- )   GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)
  0E2/18E/156|429/407/103   6  -  ( dc lfa' )
  begin   >r                        r@ 6 + dup NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                      then
\                                   r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  +  @  then
                                    r@ 16@'
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  !                      then
          r>  32@'  dup  3aac ( -1 ) =
  until   drop    2drop  ;
















: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)   ( -- )   GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)
  0E2/18E/156|429/407/103    6 -  ( dc lfa' )
  begin   >r             r@  6 +  dup   NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                         then
          r@  4 +  16@'  r@  6 +        NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  head.spacing  @  + 8 - !  then
          r>       32@'  dup  dup  3aac ( -1 ) =  swap  -1  =  or
  until   drop    2drop  ;

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(103mF)(nfa')'''''''   ( nfa' -- )  \  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   ( 0E2/18E/156|429/407/103  )
   6  -  ( dc lfa' )
  begin   >r                        r@ 6 + dup NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  8  +  +  !                      then
                                    r@ 16@'
                                    r@ 6 +     NFA'>CFA'(MECRISP)'  cfa'>n(lnc) if  LFA+NFA+CFA.ARRAY  0  +  +  !                      then
          r>  32@'  dup  dup  3aac ( -1 ) =  swap  -1  =  or
  until   drop  ;

: GET.TOTAL.INSTRUCTIONS(lnc)  ( -- n )   LFA+NFA+CFA.COUNTER  @   head.spacing  @   /  ;

: get.n'th.nfa' ( n'th -- nfa' )  dup>r  GET.TOTAL.INSTRUCTIONS(lnc)  >  abort"  n'th should be smaller than total instructions"
  last'  @   r>   0   ?do   4  -  32@'   ?dup  0=  if  0   leave  then  loop  ;

: cfa'>n'th  ( cfa' -- n'th -1 / 0 )  >r  0   last'  @
  begin    dup  nfa'>cfa.stm32F407eF720   r@  <>
  while    4-   32@'  swap  1+  swap
  repeat   r>   2drop  ;

variable  cfa'>nfa'(eF)?

: cfa'>nfa'(eF)  ( cfa' -- nfa' -1 / 0 )  >r  cfa'>nfa'(eF)?  on    last'  @
  begin    dup  nfa'>cfa.stm32F407eF720   r@  <>
  while    4-   32@'  dup  0=  over  -1    =   or  if  cfa'>nfa'(eF)?  off  then
  repeat   r>   drop  cfa'>nfa'(eF)?  @   0=   if  drop  0  else  -1   then  ;




: comve'(a'>a)  ( from' to len -- )  0  do  over  i  +  c@'  over  i  +  c!  loop   2drop  ;

: APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(429eF)   ( -- )  ( last'  ! )   0  GET.TOTAL.INSTRUCTIONS(lnc)  1-   \  T:QUEUE.COUNTER @ lit "0x8" /
  ?do     i   get.n'th.nfa'  ?dup  0=
     if
     else             dup              LFA+NFA+CFA.ARRAY   8  +  i  head.spacing  @  *  +   !
          count'  1f  and  1+  >r  1-  LFA+NFA+CFA.ARRAY  10  +  i  head.spacing  @  *  +   r>  comve'(a'>a)
     then  -1
  +loop   ;

\ c458   APPEND.(LFA')+FLAG+NFA'>LNC.ARRAY(429eF)    \  c440  ( last' )




: get.total.instructions.stm32F103(mF) ( -- n )     \  0E2/18E/156|429/407/103
    156  last' !   nnnn?  off  last'  @  6 - begin  1  nnnn?  +!   32@'  dup         -1   =  until   drop  nnnn?  @  ;

: get.total.instructions.stm32F429/103'''''''''' ( -- n )
  0E2/18E/156|429/407/103    last' !   nnnn?  off  last'  @  6 - begin  1  nnnn?  +!   32@'  dup         -1   =  until   drop  nnnn?  @  ;

: t:words.mecrispCMx.stm32F429'''''    ( --)  125  nnnn?  !         0E2/18E/156|429/407/103     last' !  \ last' is actually fist instruction. ( 2dup )
( last' ! ) ( get.total.instructions.stm32F429/103 )  nnnn?  @  \ 2482  last' !  \ stellaris LM4F120
  last' @
  nnnn?  @     0
  do     cr    base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  ."   ( "  nnnn? @  swap - 1+  6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa'(mecrispCMx)  dup 6  u.r  ."  ) " 6 u.r ."  org  t:  "  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then  ?dup   FFFFFFFF =  ( 0= )  key?  or
         drop  \  until
  loop   drop  cr   ;

: t:words.mecrispCMx.stm32F429'    ( -- )  0E2/18E/156|429/407/103    last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    dup  nnnn?  !  \ last' is actually fist instruction. ( 2dup )
  last'  @
  nnnn?  @     0
  do     cr    base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  ."   ( "  nnnn? @  swap - 1+  6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa'(mecrispCMx)  dup 6  u.r  ."  ) " 6 u.r ."  org  t:  "  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then  ?dup   FFFFFFFF =  ( 0= )  key?  or
         drop  \  until
  loop   drop  cr   ;


: t:words.mecrispCMx.stm32F429''   ( -- )  0E2/18E/156|429/407/103    last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    dup  nnnn?  !  \ last' is actually fist instruction. ( 2dup )
  last'  @    nnnn?  @     0
  do     cr    swap  dup 5 mod 0= if  cr  then dup  ."   ( "  nnnn? @  swap - 1+  6  u.r(decimal)    1-  swap
         dup>r  ."   LFA':"  r@   6 -  9 u.r  ."   |  NFA':" r@  9 u.r  ."  )"  r@ nfa'>cfa'(mecrispCMx)  9  u.r ."  org  t:  "  r@  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then  ?dup   FFFFFFFF =  ( 0= )  key?   or
         drop
  loop   drop  cr   ;


: t:words.mecrispCMx.stm32F429'''   ( -- )  0E2/18E/156|429/407/103    last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)     dup  nnnn?  !  \ last' is actually fist instruction. ( 2dup )
  last'  @    nnnn?  @     0
  do     cr    swap  dup 5 mod 0= if  cr  then  ."   ("   i 1+  5  u.r(decimal)    1-  swap
         dup>r  ."   LFA':"  r@   6 -  9 u.r  ."   |  NFA':" r@  9 u.r  ."  )"  r@ nfa'>cfa'(mecrispCMx)  9  u.r ."  org  t:  "  r@  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then  ?dup   FFFFFFFF =  ( 0= )  key?   or
         drop
  loop   drop  cr   ;


: t:words.mecrispCMx.stm32F429a   ( -- )  0E2/18E/156|429/407/103      dup  last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    0           \ last' is actually fist instruction. ( 2dup )
  do     cr    ."   ("   i  1+    5  u.r(decimal)
         >r    ."   LFA':"  r@    6 -  9 u.r  ."  | NFA':" r@  9 u.r  ."  )"  r@ nfa'>cfa'(mecrispCMx)  9  u.r ."  org  t:  "  r@  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then \ ?dup   FFFFFFFF =  ( 0= )  key?   or          drop
  loop   drop  cr   ;

: t:words.mecrispCMx.stm32F429   ( -- )  0E2/18E/156|429/407/103      dup  last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   1-  0           \ last' is actually fist instruction. ( 2dup )
  do     cr    ."   ("   i  1+    5  u.r(decimal)
         >r    ."   LFA':"  r@    6 -  dup 9 u.r  32@' 9 u.r  ."  | flag:" r@ 2 - 16@' 5 u.r ."  NFA':" r@  9 u.r  ."  )"   r@ nfa'>cfa'(mecrispCMx)  9  u.r    ."  org  t:  "  r@  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then \ ?dup   FFFFFFFF =  ( 0= )  key?   or          drop
  loop   drop  cr   ;


: t:words.mecrispCMx.stm32F429   ( -- )  0E2/18E/156|429/407/103      dup  last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   1-  0           \ last' is actually fist instruction. ( 2dup )
  do     cr    ."   ("   i  1+    5  u.r(decimal)
         >r    ."   LFA':"  r@    6 -  dup 9 u.r  32@' 9 u.r  ."  | flag:" r@ 2 - 16@' 5 u.r ."  NFA':" r@  9 u.r  ."  ) "  r@ nfa'>cfa'(mecrispCMx)  .xxxxXXXX ."  org  t:  "  r@  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then \ ?dup   FFFFFFFF =  ( 0= )  key?   or          drop
  loop   drop  cr   ;


\ include  G:\win32for\mecrisp407b.f    \ G:\win32for\MECRISP32F407org1.F

: get.total.instructions.stm32F407 ( -- n )    \  13d
  18E  last' !   nnnn?  off  last'  @  6 - begin  1  nnnn?  +!   32@'  dup  -1  =  until   drop  nnnn?  @  ;

: t:words.mecrispCMx.stm32F407   ( -- )  18E   dup  last' !
  get.total.instructions.stm32F407    0           \ last' is actually fist instruction. ( 2dup )
  do     cr    ."   ("   i  1+    5  u.r(decimal)
         >r    ."   LFA':"  r@    6 -  dup 9 u.r  32@' 9 u.r  ."  | flag:" r@ 2 - 16@' 5 u.r ."  NFA':" r@  9 u.r  ."  )"  r@ nfa'>cfa'(mecrispCMx)  9  u.r ."  org  t:  "  r@  count'  1f and  type'
         r>    cortex.m4? @  if   6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then \ ?dup   FFFFFFFF =  ( 0= )  key?   or          drop
  loop   drop  cr   ;





variable  nfa'?.nfa'.match?

: is.it.NFA'?(mecrispCMx.stm32F429)   ( nfa' -- f ) \  0E2/18E/156|429/407/103
  0E2/18E/156|429/407/103    dup  last' !     nfa'?.nfa'.match?  off
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    0                       \ last' is actually fist instruction. ( 2dup )
  do     2dup  =   if   nfa'?.nfa'.match?  on  leave   then  ( nfa'>lfa' )   6 -  32@'  6 +  ( lfa'>nfa' )
  loop   2drop          nfa'?.nfa'.match?  @   ;

\ run t:words.mecrispCMx.stm32F429 to get  --->  12345678  org  t:  name  ......

: words'.stm32F429'''''''   ( -- )  0E2/18E/156|429/407/103      dup  last' !
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)    0           \ last' is actually fist instruction. ( 2dup )
  do     cr    ."   ("   i  1+    5  u.r(decimal)
         >r    ."   LFA':"  r@    6 -  dup 9  u.r  32@' 9 u.r  ."  | flag:" r@ 2 - 16@' 5 u.r ."  NFA':" r@  9 u.r  ."  )"
         r@    nfa'>cfa'(mecrispCMx)   dup 9  u.r ."  org  t:  "  r@  count'  1f and  type'
         begin  _U1          dup  r@  6 -  32@'  ( lfa' )  u>=  until  drop
         r>    cortex.m4? @  if       6 -  32@'  6 +  ( lfa>nfa  ) else  2-  @'  then
         key?  if   leave  then
  loop   drop  cr   ;

: words'.stm32F429(last')   ( last' -- )   \   ( 0E2/18E/156|429/407/103    )
  dup  last'  !   \ 108  words'.stm32F429(last')  for ease of debugging purpose
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   0           \ last' is actually fist instruction. ( 2dup )
  do     \.3F***     layer  off
         cr      >r  ."   ("  r@    6 -  dup   0a  u.r   32@'  0a  u.r  ."           )"    \ lfa
         cr          ."   ("  r@    2 -  dup   0a  u.r   16@'  0a  u.r  ."           )"    \ flags
         cr          ."   ("  r@               0a  u.r   2  spaces                         \ nfa
         r@  r@  c@'  1f  and  5 min  1+  bounds  ?do    i  c@' .xx  space  loop
         5   r@  c@'  1f  and  5 min  -   0       ?do    3  spaces          loop  ." )"
         r@      nfa'>cfa'(mecrispCMx)
         begin   _U1          dup  r@   6 -  32@'  ( lfa' )  u>=
         until   drop
         r>      cortex.m4? @  if       6 -  32@'  6 +  ( lfa>nfa  )  else   2-   @'  then
         dup  32@'  -1  =  key?  or    if   leave    then
  loop   drop    cr   ;

: words'.stm32F407(last')   ( last' -- )         \ ( 0E2/18E/156|429/407/103    )
  dup  last'  !   \ 108  words'.stm32F429(last')   to ease of debugging purpose
  get.total.instructions.stm32F407   0           \ last' is actually fist instruction. ( 2dup )
  do     \.3F***     layer  off
         cr      >r  ."   ("  r@    6 -  dup   0a  u.r   32@'  0a  u.r  ."           )"    \ lfa
         cr          ."   ("  r@    2 -  dup   0a  u.r   16@'  0a  u.r  ."           )"    \ flags
         cr          ."   ("  r@               0a  u.r   2  spaces                         \ nfa
         r@  r@  c@'  1f  and  5 min  1+  bounds  ?do    i  c@' .xx  space  loop
         5   r@  c@'  1f  and  5 min  -   0       ?do    3  spaces          loop  ." )"
         r@      nfa'>cfa'(mecrispCMx)
         begin   _U1          dup  r@   6 -  32@'  ( lfa' )  u>=
         until   drop
         r>      cortex.m4? @  if       6 -  32@'  6 +  ( lfa>nfa  )  else   2-   @'  then
         dup  32@'  -1  =  key?  or    if   leave    then
  loop   drop    cr   ;

: words'.stm32F407 ( -- )  18e  words'.stm32F407(last')  ;  \ new  include  MECRISP32F407org1.F  words'.stm32F407
: words'.stm32F429 ( -- )  0E2/18E/156|429/407/103     words'.stm32F429(last')  ;

: t:words.mecrispCMx.stm32f4   ( -- )   0d2  nnnn?  !   2450  t:words.mecrispCMx  ;
: t:words.mecrispCMx.LM4F120   ( -- )   0d4  nnnn?  !   2482  t:words.mecrispCMx  ;
 \ *************************************************************************
variable  #n.line

: words.1  ( --) \  d5f2 last' !    \ msp430eForth
  base   @  >r  last' @ decimal  cr  1  #n.line   !  ."   ("   #n.line @  3 .r  ."  )  "
  begin  getxy   drop  4a >  if  cr  1  #n.line  +!  ."   ("   #n.line @  3 .r  ."  )  "    then
         dup   count'  1f and  type' 2 spaces
         2-    @'   dup   0=
  until  drop  r>   base  !    cr  ;

\   new  hex>    words.8051camelForth

variable  total.instructions.8051camelForth

: words.1.8051camelForth  ( --) ( 1958  last'  ! )  \  d5f2 last' !    \ msp430eForth    \ 1958  last'  !  ( 8051camelForth )
  total.instructions.8051camelForth  off
  base   @  >r  last' @ decimal  cr  1  #n.line   !  ."   ("   #n.line @  3 .r  ."  )  "
  begin  getxy   drop  4a >  if  cr  1  #n.line  +!  ."   ("   #n.line @  3 .r  ."  )  "    then
         dup   count'  1f and  type' 2 spaces     1  total.instructions.8051camelForth  +!
         3 -   @'   dup   0=
  until  drop  r>   base  !    cr  ;







defer _DISASSEM.macro




























  : nfa'>cfa'8051camelForth  ( nfa' -- cfa' )  dup  count'  1f and  +   ;
\ : nfa'>cfa'mecrisp4F120    ( nfa' -- cfa' )  dup  count'  1f and  +   ;

\   new  hex>    words.2.8051camelForth
: words.2.8051camelForth    ( --)  ( get.total.instructions.8051camelForth )
  words.1.8051camelForth                 total.instructions.8051camelForth  @
  ( 1958  last'  !  )   last' @
  begin  cr \  base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  6  u.r    1-  swap  r>  base  !
\        dup>r   ."   ( nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa'8051camelForth   6  u.r  ."  )   "  count'  1f and  type'
         dup>r   ."   ( nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa'8051camelForth
         ."  )  "   6  u.r  ."   org  t:   "  count'  1f and  type'
               r>   3 -  @'  ?dup   0=   key?  or
  until  drop  cr   ;

: words.2.8051camelForth^   ( --)  ( get.total.instructions.8051camelForth )
  words.1.8051camelForth                 total.instructions.8051camelForth  @   0
  do         i   0
     ?do     0   last'  @   begin  3  -  @'  swap  1+   tuck  i  =  until   nip
             cr     ."   ( nfa':"  dup 6 u.r  ."   |  cfa':"  dup  nfa'>cfa'8051camelForth
                    ."  )  "   6  u.r  ."   org  t:   "  count'  1f and  type'
     loop
  loop   ;

: words.2    ( --)  get.total.instructions    last' @
  begin  cr   base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  6  u.r    1-  swap  r>  base  !
         dup>r   ."   ( nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa'  6  u.r  ."  )   "  count'  1f and  type'
               r>   2-  @'  ?dup   0=   key?  or
  until  drop  cr   ;

: t:words.2    ( --)  get.total.instructions    last' @
  begin  cr   base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  ."   ( " 6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa' dup 6  u.r  ."  ) " 6 u.r ."  org  t:  "  count'  1f and  type'
         r>    cortex.m4? @  if  4-  32@'  else  2-  @'  then  ?dup   0=   key?  or
  until  drop  cr   ;


: t:words.2(lnc)    ( --)  get.total.instructions(lnc)    last' @
  begin  cr   base  @  >r  decimal  swap   dup 5 mod 0=
     if  cr   then
     dup  ."   ( "    6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"    dup  6 u.r
                 ."   |  cfa':" dup  nfa'>cfa' dup 6  u.r  ."  ) " 6 u.r ."  org  t:  "  count'  1f and  type'
         r>    cortex.m4? @  if  4-  32@'  else  2-  @'  then  ?dup   0=   key?  or
  until  drop  cr   ;

: t:words.2(lnc)/   ( --)  get.total.instructions(lnc)    last' @
  begin  cr   base  @  >r  decimal  swap   dup 5 mod 0=
     if  cr   then
     dup  ."   ( "    6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"    dup  6 u.r
                 ."   |  cfa':" dup  nfa'>cfa' dup 6  u.r  ."  ) " 6 u.r ."   gcc:  "    count'  1f and  type'
         r>    cortex.m4? @  if  4-  32@'  else  2-  @'  then  ?dup   0=   key?  or
  until  drop  cr   ;

: t:words.2(lnc)/   ( --)  0  get.total.instructions(lnc)  1-
  do     last'  @   i   0
         ?do    dup  cortex.m4? @  if    4-  else  2-  then   32@'    ?dup  0=   if   leave  else  nip  then
         loop   cr   base  @  >r  decimal  swap   dup 5 mod 0=   if    cr   then
         dup    ."   ( "            6  u.r    1-  swap  r>  base  !
                ."   nfa':"    dup  9  u.r
                ."   |  cfa':" dup  nfa'>cfa' dup 9  u.r  ."  )   "  .xxxxXXXX  ."   gcc:  "    count'  1f and  type'  -1
  +loop   ;

: t:words.2(lnc)/   ( --)  0  get.total.instructions(lnc)  1-
  do     last'  @   i   0
         ?do    dup  cortex.m4? @  if  4-  else  2-  then   32@'    ?dup  0=
         if     leave  else  nip  then
         loop   cr
         ."   ( "       i    6  u.r(DECIMAL)
         ."   nfa':"    dup  9  u.r
         ."   |  cfa':" dup  nfa'>cfa' dup 9  u.r  ."  )   "  .xxxxXXXX   ."   gcc:  "    count'  1f and  type'  -1
  +loop  ;

: t:words.2(lnc)/''??????    ( --)  0  get.total.instructions(lnc)  1-
  do     cr     last'  @   i   0
         ?do    dup  cortex.m4? @  if  4-  else  2-  then   32@'    ?dup  0=
            if     drop   leave
            else   nip
                   ."   ( "       i    6  u.r(DECIMAL)
                   ."   nfa':"    dup  9  u.r
                   ."   |  cfa':" dup  nfa'>cfa' dup 9  u.r  ."  )   "   .xxxxXXXX  ."   gcc:  "    count'  1f and  type'
            then
         loop   -1
  +loop  ;

: words'(lnc)   t:words.2(lnc)/  ;

: words'      t:words.2   ;   \  : >org.f  t:words.2  ;    : >image.f   ;

: words'.1   ( -- )
  cr      1  4 u.r
       0  T:queue.counter    @   8  -  \ 0
  do      T:queue    i   +   @   ?dup
          if         getxy   drop     3f ( 60 )  >
              if     cr   T:queue.counter  @  8  /    i  8  /  -  base @  >r  decimal   5  u.r   r>  base  !
              then   2  spaces        cfa'>.id  drop
          then  -8
  +loop   cr     ;


: words'.1/  ( -- )
  cr      1  4 u.r
          T:queue.counter    @ ( 8  - )  0
  do      T:queue    i   +   @   ?dup
          if         getxy   drop     3f ( 60 )  >
              if     cr  i   8   /    base @  >r  decimal   4  u.r   r>  base  !
              then   2  spaces        cfa'>.id  drop
          then   8
  +loop   cr     ;


variable  print.width

: words*' ( n -- )   print.width  !
  cr      1  4 u.r
          T:queue.counter    @   8  -   0
  do      T:queue    i   +   @   ?dup
          if         dup     cfa'>nfa'
              if     count'  nip  1f  and   getxy  drop  +  print.width  @  >
              else   0
              then
              if     cr  i   8   /    base @  >r  decimal   4  u.r   r>  base   !
              then   1   spaces       cfa'>.id  drop
          then   8
  +loop   cr     ;

: words*' ( n -- )   print.width  !
  cr      1  4 u.r
          T:queue.counter    @ ( 8  - ) 0
  do      T:queue    i   +   @   ?dup
          if         dup     cfa'>nfa'
              if     count'  nip  1f  and   getxy  drop  +  print.width  @  >
              else   0
              then
              if     cr  i   8   /    base @  >r  decimal   4  u.r   r>  base   !
              then   1   spaces       cfa'>.id  drop
          then   8
  +loop   cr     ;

: words*''  7c   words*'  ;





variable  words'.1.counter

: words'.11  ( -- )  cr  words'.1.counter  off   1  words'.1.counter  +!   base @   words'.1.counter  @   decimal  2  .r   base  !
  0         T:queue.counter @  8  -
  do        T:queue  i   +  @     ?dup
     if     getxy    drop   60    >
        if     cr    1  words'.1.counter  +!     base @   words'.1.counter   @   decimal  2  .r   base  !
        then   2  spaces   cfa'>.id  drop
     then   -8
  +loop   cr   ;

variable  word'.counter

comment:
:   .(decimal)  ( n -- )      base @  >r   decimal   .    r>  base !  ;
:  .r(decimal)  ( n1 n2 -- )  base @  >r   decimal   .r   r>  base !  ;
: u.r(decimal)  ( n1 n2 -- )  base @  >r   decimal  u.r   r>  base !  ;
comment;

variable     cfa'=0.counter

: words'.2   ( -- )    HEAD.FORTH?  @  >r   HEAD.FORTH? on    cfa'=0.counter  off
\ T:queue.counter  @   8  /  \ dup   cr ."  *** tF has "  .(decimal)  ." instructions in total ***"
  1  word'.counter  !
  cr       0    T:queue.counter     @   8  -
  do            T:queue    i   +    @   ?dup
          if    cr    word'.counter @      ."   ("  5 .r(decimal)
              head.forth? @
              if    ."   nfa' = "  dup  cfa'>nfa' if  dup  8  u.r  c@'  3 .r  ."  )  "    else  dup   8  u.r  ."  )  "   then
              else  ."   cfa' = "  dup    8  u.r   ."  )  "
              then                 dup    8  u.r   ."   org   t:  "  cfa'>.id  drop   1  word'.counter +!
          else  1  cfa'=0.counter  +!
          then  -8
  +loop   cr   T:queue.counter  @   8  /   cfa'=0.counter  @   -   ."  *** tF has "  .(decimal)  ."  instructions in total *** "
  r>  HEAD.FORTH?  !  ;

: words'.2/  ( -- )    HEAD.FORTH?  @  >r   HEAD.FORTH? on   cfa'=0.counter  off
\ T:queue.counter  @   8  /  \ dup   cr ."  *** tF has "  .(decimal)  ." instructions in total ***"
  1  word'.counter  !
  cr            T:queue.counter     @   0
  do            T:queue    i   +    @   ?dup
          if    cr    word'.counter @      ."   ("  5 .r(decimal)
              head.forth? @
              if    ."   nfa' = "  dup  cfa'>nfa' if  dup  8  u.r  c@'  3 .r  ."  )  "    else  dup   8  u.r  ."  )  "   then
              else  ."   cfa' = "  dup    8  u.r   ."  )  "
              then                 dup    8  u.r   ."   org   t:  "  cfa'>.id  drop   1  word'.counter +!
          else  1  cfa'=0.counter  +!
          then  8
  +loop   cr   T:queue.counter  @   8  /   cfa'=0.counter  @   -   ."  *** tF has "  .(decimal)  ."  instructions in total *** "
  r>  HEAD.FORTH?  !  ;

: words'.3  ( -- )    T:queue.counter  @   8  /   dup   cr ."  *** tF has "  .(decimal)  ." instructions in total ***"
  word'.counter  !
  cr       0   T:queue.counter  @   8  -
  ?do  \  getxy   drop    40  >   if  cr   then  2 spaces
          cr   T:queue    i   +   @    word'.counter @      ."   ("  5 .r(decimal)    ."   cfa' = "  dup   .xxxxXXXX  ."  )  "
          cfa'>.id  drop  -1  word'.counter +!   ( cfa'>nfa   if   nfa-count  type   then  )
          T:queue    i   +   @   dup   FIND.NEXT.INSTRUCTION'S.CFA'
          if    _DISASSEM.A.RANGE.INSTRUCTION
          else  drop
          then  -8
  +loop   cr    ;

\  ******************************************************************************
variable  PREFIX?
\ ---------------------------------------------------------------------------------------
VARIABLE            TEMP.HERE'
: INSERT{   HERE'   TEMP.HERE' !       ;
: }INSERT           TEMP.HERE' @  ORG  ;
\ ---------------------------------------------------------------------------------------
: DUMPC@'  a'>a DUMPC@  ;

: DUMP'         OVER +NO-WRAP DUP ROT
                ?DO     CR I 4 U.R SPACE SPACE I  10 +NO-WRAP OVER UMIN I 2DUP
                        DO      I DUMPC@'  H.2 SPACE I J 7 + =
                                IF      SPACE
                                THEN
                        LOOP    2DUP -  10 OVER -  3 * SWAP  8 < - 1+ SPACES
                        DO      I DUMPC@'  EMIT.
                        LOOP    NUF? ?LEAVE SCREENDELAY MS  10
                +LOOP   DROP ;

: du    0  200  dump'   ;

: DUMP'         OVER +NO-WRAP DUP ROT
                ?DO     CR I 4 U.R SPACE SPACE I  10 +NO-WRAP OVER UMIN I 2DUP
                        DO      I DUMPC@'  H.2 SPACE I J 7 + =   I J 3 +  =  I J 0B +   =  or  or
                                IF     2 SPACEs
                                THEN
                        LOOP    2DUP -  10 OVER -  3 * SWAP  8 < - 1+ SPACES
                        DO      I DUMPC@'  EMIT.
                        LOOP    NUF? ?LEAVE SCREENDELAY MS  10
                +LOOP   DROP ;

: du    0  200  dump'   ;

: get.total.instructions.eF430     ( -- n )  last' @  instruction.n   off    \  8051
  begin   2-   @'   dup    0=               1  instruction.n   +!
  until   drop   instruction.n   @  ;

: t:words.2.eF430Wang1 ( --)  get.total.instructions.eF430   ( D75E ) last' @
  begin  cr   base  @  >r  decimal  swap   dup 5 mod 0= if  cr  then dup  ."   ( " 6  u.r    1-  swap  r>  base  !
         dup>r   ."   nfa':"  dup 6 u.r  ."   |  cfa':" dup  nfa'>cfa' dup 6  u.r  ."  ) " 6 u.r ."  org  t:  "  count'  1f and  type'
               r>   2-  @'  ?dup   0=   key?  or
  until  drop  cr   ;

: image.430eForthWang1  ( -- )  cls
  cr  ." \ 430eForthWang1 "
  cr  ." \ cls   .(  insert{ )  t:words.2.eF430Wang1  1000 1017  hex>image  c000 10000 hex>image .( }insert  \s ) c000 2000 dump'"
  cr  ." \ cls                  t:words.2.eF430Wang1  1000 1017  hex>image  c000 10000 hex>image  .               c000 2000 dump'"
  cr  ." \ t:words.2.eF430Wang1         \  (  abort" '"' emit ."  next  --->  ~ ` abor." '"' emit  ."  nex. "  cr  cr
  cr  ."   insert{ "  t:words.2.eF430Wang1  1000 1017  hex>image c000  10000  hex>image  cr ." }insert  \s "  1000 16 dump'  c000 2000 dump'  ;

: image  ( -- )   image.430eForthWang1  ;

: fill'   ( from' length char -- )  -rot  bounds
  do      dup   i  c!'
  loop    drop  ;

\ comment:
0  value  \?
0  value  len
:  \...      ( from1 len1 -- from2 len2 )     dup  to  len     0  to  \?    0
   ?do       dup   len  +  i  -  1-  c@  '\'  =   if   i   to  \?   leave  then
   loop      len   \?   -  +  ( from2 )   \?  ( len2 )   ;
\            12345\56\789   \   \? @ == 3      s". 12345\56\789"  \...    .s.    type.
\              9876543210
:  place'    ( from' len to' -- )  rot  a'>a  -rot  a'>a  ( from len to )  place  ;  \ 1234 5  678 place'
:  place.>'  ( from. len to' -- )                   a'>a  ( from len to )  place  ;  \ s".  test"        '' hi 0a +.  place.>'
:  place\    ( from. len to' -- )  >r   \...   r>   a'>a  ( from len to )  place  ;  \ cur-file  count.  '' hi 0a +.  place\
:  place\__  ( from. len to' -- )  dup  count'  20  fill'
                                   dup>r  c@'  -rot  \...   r@  a'>a  ( from len to )  place
                                   r>     c!'   ;

\  0a  value  'hi'.sign.on.message.offset

\  s". 12345\56\789"   '' hi  0a  +. place\    cur-file  count.  cfa'.of.hi  @  'hi'.sign.on.message.offset ( 0a )  +.  place\__

  : replace.sign.on.message  ( -- )  cur-file  count  cfa'.of.hi  @  'hi'.sign.on.message.offset ( 0a )  +  place\__  ;
\ : replace.sign.on.message  ( offset -- )  >r  cur-file  count  cfa'.of.hi  @  r>  ( 0a )  +  place\__  ;
\ : rm   replace.sign.on.message  ( offset -- )  ;
\ comment;

variable  data.range.buffer.size      1000  data.range.buffer.size  !
create    data.range.buffer                 data.range.buffer.size  @  allot
variable  data.range.buffer.counter
:        >data.range.buffer  ( a' len -- )  data.range.buffer.counter @   data.range.buffer.size  @   >=  abort" data.range.buffer.size is too small"
          data.range.buffer  data.range.buffer.counter @  +  2!
                          8  data.range.buffer.counter    +!  ;

:   erase.data.range.buffer  ( -- )   data.range.buffer  data.range.buffer.size    @  0  fill  ;
    erase.data.range.buffer

variable  cancel?

: cancel.data.range ( a' len -- )     data.range.buffer.counter  @   0
  do      2dup  data.range.buffer  i  +   2@   d=
          if      cr  ." *** cancel done ***"  0  0  data.range.buffer  i  +   2!   cancel?  on
          then    8
  +loop   2drop   cancel? @   0=  if   cr  ." *** no cancel being done ***"   then  cancel?  off  ;

:  cdr    cancel.data.range ( a' len -- )  ;

: erase'  ( from' length -- )  0ff  fill'  ;   \  00

\ : erase.LFA+NFA+CFA.ARRAY    LFA+NFA+CFA.ARRAY  LFA+NFA+CFA.COUNTER  @   ERASE  ;

: new     ERASE.T:QUEUE                     ERASE.T:NFA.QUEUE    ( f800  800 ) program.start @   program.length @  erase'  \ ERASE.data:QUEUE
                T:QUEUE.COUNTER  off              T:NFA.QUEUE.COUNTER  off
          ERASE.FROM->TO.QUEUE
                FROM->TO.QUEUE.COUNTER  off
          ERASE.FROM->TO.QUEUE(C=0?...)
                FROM->TO.QUEUE(C=0?...).COUNTER  off
          ERASE.data:QUEUE
                data:QUEUE.COUNTER               off
          ERASE.DATA.RANGE.BUFFER
                DATA.RANGE.BUFFER.COUNTER        off
          erase.LFA+NFA+CFA.ARRAY
                LFA+NFA+CFA.COUNTER              off  ;






: new.(erase.eForth)     a000  6000 erase'   ;
: new'    ERASE.T:QUEUE  new.(erase.eForth)  0 ffff  erase'  ;
\ ----------------------------------------------------------------------------------------
CREATE  N>2^N.TABLE      \ N= 0 ~ F
   1         ,    2         ,   4         ,    8         ,
   10        ,    20        ,   40        ,    80        ,
   100       ,    200       ,   400       ,    800       ,
   1000      ,    2000      ,   4000      ,    8000      ,
   10000     ,    20000     ,   40000     ,    80000     ,
   100000    ,    200000    ,   400000    ,    800000    ,
   1000000   ,    2000000   ,   4000000   ,    8000000   ,
   10000000  ,    20000000  ,   40000000  ,    80000000  ,

CREATE  N>2^N.TABLE/     \ N= 0 ~ F
   FFFFFFFE  ,    FFFFFFFD  ,   FFFFFFFB  ,    FFFFFFF7  ,
   FFFFFFEF  ,    FFFFFFDF  ,   FFFFFFBF  ,    FFFFFF7F  ,
   FFFFFEFF  ,    FFFFFDFF  ,   FFFFFBFF  ,    FFFFF7FF  ,
   FFFFEFFF  ,    FFFFDFFF  ,   FFFFBFFF  ,    FFFF7FFF  ,
   FFFEFFFF  ,    FFFDFFFF  ,   FFFBFFFF  ,    FFF7FFFF  ,
   FFEFFFFF  ,    FFDFFFFF  ,   FFBFFFFF  ,    FF7FFFFF  ,
   FEFFFFFF  ,    FDFFFFFF  ,   FBFFFFFF  ,    F7FFFFFF  ,
   EFFFFFFF  ,    DFFFFFFF  ,   BFFFFFFF  ,    7FFFFFFF  ,

: N>2^N   ( N ... 2^N )  4 *  N>2^N.TABLE   +  @  ;   \ 1  swap  lshift
: N>2^N/  ( N ... 2^N )  4 *  N>2^N.TABLE/  +  @  ;

: Mb=1?  ( ADDR BIT.n ... F )  N>2^N  SWAP C@   AND  0<>  ;
: Mb=0?  ( ADDR BIT.n ... F )  Mb=1?  NOT   ;
\ ---------------------------------------------------------------------------------------
: REL        ( a ..... )  HERE' 1+  -   DUP  ABS  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "   C,' ;
: REL8,      ( A ..... )  HERE' 1+  -   DUP  ABS  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "   C,' ;
: REL.10     ( A ..... )  HERE' 1+  -   DUP  ABS  3FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "   C,' ;

\ variable  cal.REL.10.430''?     cal.REL.10.430''?  on
: cal.REL.8        ( A ..... )  HERE' 2+  -                                  DUP  ABS  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "  ;
: cal.REL.8 ( cortex ) ( a' --) HERE'     -       4  /  1-                   dup  abs  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "  0ff and ;
: cal.REL.8 ( cortex ) ( a' --) HERE' 2+  -       2  /                       dup  abs  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "  0ff and ;

: cal.REL.10.430   ( A ..... )  HERE' 2+  -                                  DUP  ABS  3FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "  ;
: cal.REL.10.430'  ( A ..... )  HERE' 2+  -  branch.offset @ +               DUP  ABS  3FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "  ;
: cal.REL.10.430'' ( A ..... )  HERE' 2+  -  branch.offset @ - here'(t:) @ + DUP  ABS  3FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "  ;

: cal.REL.10.430+os     cal.REL.10.430''?  @  if  cal.REL.10.430''   else  cal.REL.10.430'  then  ;

:    REL.check  ( A ... a )  HERE' 1+  -   DUP  ABS  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ;
:    REL.check  ( A ... a )  dup  HERE' 1+  -   ABS  0FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ;
:     3b.CHECK  ( b ... b )  dup  0   7       BETWEEN   NOT   ABORT"  b RANGE IS NOT  0 ~ 7 "        ;
:     3r.CHECK  ( R ... R )  dup  0   7       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ 7 "        ;
:     4r.CHECK  ( R ... R )  dup  0  0f       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ F "        ;
:     8a.CHECK  ( D ... D )  dup  0  0FF      BETWEEN   NOT   ABORT"  a RANGE IS NOT  0 ~ FF "       ;
:     5b.CHECK  ( D ... D )  dup  0   1F      BETWEEN   NOT   ABORT"  b RANGE IS NOT  0 ~ 1F "       ;
:     5p.CHECK  ( D ... D )  dup  0   1F      BETWEEN   NOT   ABORT"  p RANGE IS NOT  0 ~ 1F "       ;
:     6p.CHECK  ( D ... D )  dup  0   3F      BETWEEN   NOT   ABORT"  p RANGE IS NOT  0 ~ 3F "       ;

:     6b.CHECK  ( D ... D )  dup  0   3F      BETWEEN   NOT   ABORT"  b RANGE IS NOT  0 ~ 3F "       ;
:     8b.CHECK  ( D ... D )  dup  0  0FF      BETWEEN   NOT   ABORT"  b RANGE IS NOT  0 ~ FF "       ;
:     8p.CHECK  ( D ... D )  dup  0  0FF      BETWEEN   NOT   ABORT"  p RANGE IS NOT  0 ~ FF "       ;

:     8r.CHECK  ( D ... D )  dup  0  0FF      BETWEEN   NOT   ABORT"  r RANGE IS NOT  0 ~ FF "       ;

:     9R.CHECK  ( D ... D )  dup  0  1FF      BETWEEN   NOT   ABORT"  R  RANGE IS NOT  0 ~ 1FF "     ;
:     9Rd.CHECK ( D ... D )  dup  0  1FF      BETWEEN   NOT   ABORT"  Rd RANGE IS NOT  0 ~ 1FF "     ;
:     9Rs.CHECK ( D ... D )  dup  0  1FF      BETWEEN   NOT   ABORT"  Rs RANGE IS NOT  0 ~ 1FF "     ;

:     3#.CHECK  ( # ... # )  dup  0  07       BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ 7  "       ;
:     5#.CHECK  ( # ... # )  dup  0  01F      BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ 1F "       ;
:     6#.CHECK  ( # ... # )  dup  0  03F      BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ 3F "       ;
:     7#.CHECK  ( # ... # )  dup  0  07F      BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ 7F "       ;
:     8#.CHECK  ( # ... # )  dup  0  0FF      BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FF "       ;
:    12#.CHECK  ( # ... # )  dup  0  0FFF     BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFF"       ;

:    16r.CHECK  ( # ... # )  dup  0  0FFFF    BETWEEN   NOT   ABORT"  r RANGE IS NOT  0 ~ FFFF "     ;
:    16a.CHECK  ( # ... # )  dup  0  0FFFF    BETWEEN   NOT   ABORT"  a RANGE IS NOT  0 ~ FFFF "     ;
:    16#.CHECK  ( # ... # )  dup  0  0FFFF    BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFFF "     ;
:    20#.CHECK  ( # ... # )  dup  0  0FFFFF   BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFFFF "    ;
:    22#.CHECK  ( # ... # )  dup  0  3FFFFF   BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ 3FFFFF "   ;

:    24a.CHECK  ( # ... # )  dup  0  0FFFFFF  BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFFFFF "   ;
: 3A5C8A.CHECK^ ( a ... a )  dup  0  0FFFF    BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFFF "
                             dup  f800 and    here'  f800  and  <> abort"  **** ajmp not within the same 2k range ****" ;

:   8REL.check  ( A ... a )  dup  HERE' 1+  -   ABS        7F  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ;
:  11REL.check  ( A ... a )  dup  HERE' 1+  -   ABS       3FF  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ;
:  20REL.check  ( A ... a )  dup  HERE' 1+  -   ABS    7FFFFF  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ;
:  24REL.check  ( A ... a )  dup  HERE' 1+  -   ABS  07FFFFFF  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ;

:     4d.CHECK  ( R ... R )  dup  0  0f       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ F "        ;
:     4s.CHECK  ( R ... R )  dup  0  0f       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ F "        ;
\ -----------------------------------------------------------------------------------------
: 1disasm.f     s" 1disasm.f"  R/W  new.file  to fhd  ;

variable  disasmbuf,counter
:         disasmbuf.size      100000  ;
create    disasmbuf        disasmbuf.size    allot
: >disasmbuf ( char -- )   disasmbuf,counter @   disasmbuf.size  >= abort"  **** exceed disasmbuf.size **** "
   disasmbuf               disasmbuf,counter @ + c!  ;

: byte>FILE  ( DATA ... )  s>d <# # # #> fhd write.file        ;

: string>file ( a l --- )  bounds  do  i  c@  byte>file  loop  ;
: emit+       ( char -- )  s" 1disasm.f"  R/W  new.file  to fhd  dup emit   (   byte>FILE )  fhd open.file ;
: type+       ( a l --- )  s" 1disasm.f"  R/W  new.file  to fhd  2dup type  ( string>file )  fhd open.file ;

: emit+       ( char -- )  s" 1disasm.f"  R/W  new.file  to fhd  dup emit      byte>FILE   fhd open.file ;
\ ---------------------------------------------------------------------------------
: 8>16bit.sign.extend  ( n1 -- n2 )   0ff and  dup 7f u>  if  ff00 +  then ;
: .rel8   ( n -- ) 8>16bit.sign.extend  + .xxxx  ;
\ -------------------------------------------------------------------------
variable  symbol.stack.counter
create    symbol.stack       4 4 * allot
: and!    ( n a -- )  dup>r   @   and   r>  !  ;

: >symbol.stack   ( n -- )   4 symbol.stack.counter +!  0c  symbol.stack.counter  and!  symbol.stack  symbol.stack.counter  @ +  !  ;
:  symbol.stack>  ( -- n )   symbol.stack  symbol.stack.counter  @ +  @  -4 symbol.stack.counter +!  0c  symbol.stack.counter  and!   ;

variable  total.`.operator
variable  tib'.stack.counter
create    tib'.stack       4 4 * allot
: and!    ( n a -- )  dup>r   @   and   r>  !  ;

: >tib'.stack   ( n -- )   4 tib'.stack.counter +!  0c  tib'.stack.counter  and!  tib'.stack  tib'.stack.counter  @ +  !  ;
:  tib'.stack>  ( -- n )   tib'.stack  tib'.stack.counter  @ +  @  -4 tib'.stack.counter +!  0c  tib'.stack.counter  and!   ;
\ --------------------------------------------------------------------------
variable  disassem.number.stack.counter
create    disassem.number.stack      4 4 * allot
: and!    ( n a -- )  dup>r   @   and   r>  !  ;

: >disassem.number.stack   ( n -- )   4 disassem.number.stack.counter +!  0c  disassem.number.stack.counter  and!  disassem.number.stack  disassem.number.stack.counter  @ +  !  ;
:  disassem.number.stack>  ( -- n )   disassem.number.stack  disassem.number.stack.counter  @ +  @  -4 disassem.number.stack.counter +!  0c  disassem.number.stack.counter  and!   ;
'  disassem.number.stack>  is  _disassem.number.stack>
' >disassem.number.stack   is  _>disassem.number.stack
: du1     dup       ;   \ to be used in disassembler.
: du2     dup  dup  ;   \ to be used in disassembler.

: du1     dup  ;
: du2     dup  ;

: @3r            c@'    7 and ;
: @4r            c@'   0f and ;
: @5c            c@'  0f8 and ;    \ 5c3r:        cccc crrr
: @5x            c@'   1f and ;    \ 3a5c8a:^     aaac cccc aaaa aaaa
: dup.@3r      13 ?y ." dup @3r"     ;
: dup.@5c      13 ?y ." dup @5c"     ;
: dup.@5c      13 ?y ." dup @5c"     ;
: dup.@5x      13 ?y ." dup @5x"     ;

: .last.name    last @  nfa-count     type  ;
: .last.name    temp.mnemonic  count  type  ; \ last @  name> ( nfa> ) cfa>cfa'  cfa'>.id  drop  (  nfa-count  type ) ;

: .last.name?   last @  nfa-count  0f and 0 ?do i 3 = if '#' else dup i + c@ then emit loop drop  ; \ R=0 1 2 4 8 -1

\ : .last.name    last @  name> 4 + @  cfa.inst>.ID    drop  ;
\ : .last.name?   last @  nfa-count  0f and 0 ?do i 3 = if '#' else dup i + c@ then emit loop drop  ; \ R=0 1 2 4 8 -1


: .last.name"  .last.name   '"' emit  61 ?y ;   :  .name"    .last.name"   ;
: .last.name"? .last.name" ;                    :  .name"?   .last.name"?  ;


: :.name_      cr  ." : "  .last.name   '_' emit  ;
: get.name     bl word  count  type  ;
: get.name?    bl word  count 07 and 0  ?do  i 3 = if '#' else  dup i + c@  then  emit  loop  drop  ; \ ( fecth 0 1 2 4 8 - )
: get.name?    bl word  count 07 and 0  ?do   '#' emit  loop  drop  ; \ ( fecth 0 1 2 4 8 - )

\ : get.name     last @   name>  4 + @  cfa.inst>.id  drop  ;
\ : get.name?    bl word  count 07 and 0  ?do  i 3 = if '#' else  dup i + c@  then  emit  loop  drop  ; \ ( fecth 0 1 2 4 8 - )
\ : get.name?    bl word  count 07 and 0  ?do   '#' emit  loop  drop  ; \ ( fecth 0 1 2 4 8 - )


: dup..@'.f030.and  ."  dup @' f030 and" ;
: dup..@'.fff0.and  ."  dup @' fff0 and" ;
: dup..@'.fc00.and  ."  dup @' fc00 and" ;

: dup.@a0      dup 2+ @' 0= if  dup  @'  f0b0  and  else  0  then ;
: dup..@a      dup  @'  f0b0  and  ;

: dup.@b0      dup 2+ @' 0= if  dup  @'  ffb0  and  else  0  then ;
: dup..@b      dup  @'  ffb0  and  ;
: dup..@c      dup  @'  fc00  and  ;
: dup..@d      dup  @'  ffbf  and  ;
: dup..@e      dup  @'  f0bf  and  ;

: dup..@1  13 ?y  ." dup..@a" ;
: dup.@10  13 ?y  ." dup.@a0" ;
: dup..@2  13 ?y  ." dup..@b" ;
: dup.@20  13 ?y  ." dup.@b0" ;

: dup..@3  13 ?y  ." dup..@c" ;
: dup..@4  13 ?y  ." dup..@d" ;
: dup..@5  13 ?y  ." dup..@e" ;

: dup.c@'      13 ?y ." dup c@'"     ;     \ R8+1_'  length=6    R8
: dup.c@'      13 ?y ." dup c@'"     ;
: dup..@'      13 ?y ." dup  @'"     ;
: dup.2@'      13 ?y ." dup 2@'"     ;
: dup..@'n"    13 ?y ." dup @'n"     ;
: 1cy..XXXXxx     1c ?y  .XXXXxx     ;
: 1cy..XXXXxxxx   1b ?y  .XXXXxxxx   ;
: get.name.1cy..XXXXxx    get.name   1cy..XXXXxx    ;
: get.name.1cy..XXXXxxxx  get.name   1cy..XXXXxxxx  ;
: get.name.1cy..XXXXxxxx? get.name?  1cy..XXXXxxxx  ;    \ R+1 R+2 R+4 R+8 R+0 ...
: @name    get.name.1cy..XXXXxxxx    ;
: @name?   get.name.1cy..XXXXxxxx?   ;
: .'"'    '"'  emit  ;
: =.if.%1.     ."  = if %1"   ;
: =.if.%2.     ."  = if %2"   ;
: =.if.%3.     ."  = if %3"   ;
: =.if.%4.     ."  = if %4"   ;
: =.if.%5.     ."  = if %5"   ;
: =.if.%6.     ."  = if %6"   ;
: =.if.%7.     ."  = if %7"   ;
: =.if.%8.     ."  = if %8"   ;

:    .1".      50  ?y  ." 1"   .'"'     space   ;
:    .2".      50  ?y  ." 2"   .'"'     space   ;
:    .3".      50  ?y  ." 3"   .'"'     space   ;
:    .4".      56  ?y  ." 4"   .'"'     space   ;

: 1.exit.then.0.;     68 ?y  ." 1 exit then 0 ;" ;  \ 68 ?y
: 2.exit.then.0.;     68 ?y  ." 2 exit then 0 ;" ;
: 3.exit.then.0.;     68 ?y  ." 3 exit then 0 ;" ;
: 4.exit.then.0.;     68 ?y  ." 4 exit then 0 ;" ;
: 5.exit.then.0.;     68 ?y  ." 5 exit then 0 ;" ;
: 6.exit.then.0.;     68 ?y  ." 6 exit then 0 ;" ;

: 2rel8    ( a1' -- a2' )   dup>r  1+  c@'  1f  sign.extend  r> 2+  +  ;  \  5c3r8rel   8c8rel
: 3rel8    ( a1' -- a2' )   dup>r  2+  c@'  1f  sign.extend  r> 3+  +  ;  \  8c8r8rel
: 4rel8    ( a1' -- a2' )   dup>r  3+  c@'  1f  sign.extend  r> 4+  +  ;  \ 16c8r8rel

: 1,2rel8  ( a1' -- a2' )   dup>r  1+  c@'  1f  sign.extend  r> 2+  +  ;  \  5c3r8rel   8c8rel

: 1,3rel8  ( a1' -- a2' )   dup>r  1+  c@'  1f  sign.extend  r> 3+  +  ;  \
: 2,3rel8  ( a1' -- a2' )   dup>r  2+  c@'  1f  sign.extend  r> 3+  +  ;  \

: 1,4rel8  ( a1' -- a2' )   dup>r  1+  c@'  1f  sign.extend  r> 4+  +  ;  \
: 2,4rel8  ( a1' -- a2' )   dup>r  2+  c@'  1f  sign.extend  r> 4+  +  ;  \
: 3,4rel8  ( a1' -- a2' )   dup>r  3+  c@'  1f  sign.extend  r> 4+  +  ;  \

: 6.10rel  ( a1' -- a2' )   dup         @'  3ff and  dup 200 and if fffffc00  or then 2* 2+  +  ; \ msp430 16 bit addr
                                                  \  0000 0000 0000 0000 xxxx xxaa aaaa aaaa
                                                  \                      1111 1100 0000 0000
                                                  \   f    f    f    f    f    c    0    0
: 4.4.4.4d ( a1' -- n   )   @'    0f  and         ;
: 4.4s4.4. ( a1' -- n   )   @'  0f00  and  100 /  ;

: 1p  1d ?y  ;
: 2p  26 ?y  ;
: 3p  2f ?y  ;
: 4p  38 ?y  ;   \ 37

: 1p  28 ?y  ;
: 2p  32 ?y  ;
: 3p  3c ?y  ;
: 4p  46 ?y  ;   \ 37

: 0,0~7,1       dup    c@'          dup  >disassem.number.stack  1p  .?xx(h)    ;
: 0,0~7,2       dup    c@'          dup  >disassem.number.stack  2p  .?xx(h)    ;
: 0,0~7,3       dup    c@'          dup  >disassem.number.stack  3p  .?xx(h)    ;
: 0,0~7,4       dup    c@'          dup  >disassem.number.stack  4p  .?xx(h)    ;

: 1,0~7,1       dup 1+ c@'          dup  >disassem.number.stack  1p  .?xx(h)    ;
: 1,0~7,2       dup 1+ c@'          dup  >disassem.number.stack  2p  .?xx(h)    ;
: 1,0~7,3       dup 1+ c@'          dup  >disassem.number.stack  3p  .?xx(h)    ;
: 1,0~7,4       dup 1+ c@'          dup  >disassem.number.stack  4p  .?xx(h)    ;

: 2,0~7,1       dup 2+ c@'          dup  >disassem.number.stack  1p  .?xx(h)    ;
: 2,0~7,2       dup 2+ c@'          dup  >disassem.number.stack  2p  .?xx(h)    ;
: 2,0~7,3       dup 2+ c@'          dup  >disassem.number.stack  3p  .?xx(h)    ;
: 2,0~7,4       dup 2+ c@'          dup  >disassem.number.stack  4p  .?xx(h)    ;

: 3,0~7,1       dup 3+ c@'          dup  >disassem.number.stack  1p  .?xx(h)    ;
: 3,0~7,2       dup 3+ c@'          dup  >disassem.number.stack  2p  .?xx(h)    ;
: 3,0~7,3       dup 3+ c@'          dup  >disassem.number.stack  3p  .?xx(h)    ;
: 3,0~7,4       dup 3+ c@'          dup  >disassem.number.stack  4p  .?xx(h)    ;

: 0,5c3r,1      dup    c@'  7  and  dup  >disassem.number.stack  1p  .?xx(h)    ;
: 0,5c3r,2      dup    c@'  7  and  dup  >disassem.number.stack  2p  .?xx(h)    ;
: 0,5c3r,3      dup    c@'  7  and  dup  >disassem.number.stack  3p  .?xx(h)    ;
: 0,5c3r,4      dup    c@'  7  and  dup  >disassem.number.stack  4p  .?xx(h)    ;

: 1,5c3r,1      dup 1+ c@'  7  and  dup  >disassem.number.stack  1p  .?xx(h)    ;
: 1,5c3r,2      dup 1+ c@'  7  and  dup  >disassem.number.stack  2p  .?xx(h)    ;
: 1,5c3r,3      dup 1+ c@'  7  and  dup  >disassem.number.stack  3p  .?xx(h)    ;
: 1,5c3r,4      dup 1+ c@'  7  and  dup  >disassem.number.stack  4p  .?xx(h)    ;

: 2,5c3r,1      dup 2+ c@'  7  and  dup  >disassem.number.stack  1p  .?xx(h)    ;
: 2,5c3r,2      dup 2+ c@'  7  and  dup  >disassem.number.stack  2p  .?xx(h)    ;
: 2,5c3r,3      dup 2+ c@'  7  and  dup  >disassem.number.stack  3p  .?xx(h)    ;
: 2,5c3r,4      dup 2+ c@'  7  and  dup  >disassem.number.stack  4p  .?xx(h)    ;

: 3,5c3r,1      dup 3+ c@'  7  and  dup  >disassem.number.stack  1p  .?xx(h)    ;
: 3,5c3r,2      dup 3+ c@'  7  and  dup  >disassem.number.stack  2p  .?xx(h)    ;
: 3,5c3r,3      dup 3+ c@'  7  and  dup  >disassem.number.stack  3p  .?xx(h)    ;
: 3,5c3r,4      dup 3+ c@'  7  and  dup  >disassem.number.stack  4p  .?xx(h)    ;

: 0,0~15,1      dup     @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 0,0~15,2      dup     @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 0,0~15,3      dup     @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 0,0~15,4      dup     @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~15,1      dup 1+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 1,0~15,2      dup 1+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 1,0~15,3      dup 1+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 1,0~15,4      dup 1+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 2,0~15,1      dup 2+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 2,0~15,2      dup 2+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 2,0~15,3      dup 2+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 2,0~15,4      dup 2+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 3,0~15,1      dup 3+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 3,0~15,2      dup 3+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 3,0~15,3      dup 3+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 3,0~15,4      dup 3+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 4,0~15,1      dup 4+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 4,0~15,2      dup 4+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 4,0~15,3      dup 4+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 4,0~15,4      dup 4+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 4,0~15^,1     dup 4+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 4,0~15^,2     dup 4+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 4,0~15^,3     dup 4+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 4,0~15^,4     dup 4+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;
\ *************************************************************************
\  15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
\ |  opcode   |   S-Reg   |Ad| B| As  | D-Reg     |  \ Ad ????  ===> d
\      4c         4s       d   b  as    4d        4c4sdbAs4d:

: @RsAs>n  ( code -- n )    0ff0  and
  case    0220  of  4  endof
          0230  of  8  endof
          0300  of  0  endof
          0310  of  1  endof
          0320  of  2  endof
          0330  of -1  endof
                    0  swap
  endcase    ;

: 0,0~15,1?     dup     @'   @RsAs>n   dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 0,0~15,2?     dup     @'   @RsAs>n   dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 0,0~15,3?     dup     @'   @RsAs>n   dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 0,0~15,4?     dup     @'   @RsAs>n   dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~15,1?     dup     @'   @RsAs>n   dup  >disassem.number.stack  1p  .xxxx(h)  ;   \ ???? 1 2 3???
: 1,0~15,2?     dup     @'   @RsAs>n   dup  >disassem.number.stack  2p  .xxxx(h)  ;   \
: 1,0~15,3?     dup     @'   @RsAs>n   dup  >disassem.number.stack  3p  .xxxx(h)  ;   \
: 1,0~15,4?     dup     @'   @RsAs>n   dup  >disassem.number.stack  4p  .xxxx(h)  ;   \

: 2,0~15,1?     dup     @'   @RsAs>n   dup  >disassem.number.stack  1p  .xxxx(h)  ;   \
: 2,0~15,2?     dup     @'   @RsAs>n   dup  >disassem.number.stack  2p  .xxxx(h)  ;   \
: 2,0~15,3?     dup     @'   @RsAs>n   dup  >disassem.number.stack  3p  .xxxx(h)  ;   \
: 2,0~15,4?     dup     @'   @RsAs>n   dup  >disassem.number.stack  4p  .xxxx(h)  ;   \

: 3,0~15,1?     dup     @'   @RsAs>n   dup  >disassem.number.stack  1p  .xxxx(h)  ;   \  ???/ 1 2 3 ??/
: 3,0~15,2?     dup     @'   @RsAs>n   dup  >disassem.number.stack  2p  .xxxx(h)  ;   \
: 3,0~15,3?     dup     @'   @RsAs>n   dup  >disassem.number.stack  3p  .xxxx(h)  ;   \
: 3,0~15,4?     dup     @'   @RsAs>n   dup  >disassem.number.stack  4p  .xxxx(h)  ;   \

: 0,0~15,1'    dup     @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 0,0~15,2'    dup     @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 0,0~15,3'    dup     @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 0,0~15,4'    dup     @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~15,1'    dup 1+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 1,0~15,2'    dup 1+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 1,0~15,3'    dup 1+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 1,0~15,4'    dup 1+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 2,0~15,1'    dup 2+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 2,0~15,2'    dup 2+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 2,0~15,3'    dup 2+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 2,0~15,4'    dup 2+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 3,0~15,1'    dup 3+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 3,0~15,2'    dup 3+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 3,0~15,3'    dup 3+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 3,0~15,4'    dup 3+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 0,0~15,1     dup     @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 0,0~15,2     dup     @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 0,0~15,3     dup     @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 0,0~15,4     dup     @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~15,1     dup 1+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 1,0~15,2     dup 1+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 1,0~15,3     dup 1+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 1,0~15,4     dup 1+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 2,0~15,1     dup 2+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 2,0~15,2     dup 2+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 2,0~15,3     dup 2+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 2,0~15,4     dup 2+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 3,0~15,1     dup 3+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 3,0~15,2     dup 3+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 3,0~15,3     dup 3+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 3,0~15,4     dup 3+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 4,0~15,1     dup 4+  @'          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 4,0~15,2     dup 4+  @'          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 4,0~15,3     dup 4+  @'          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 4,0~15,4     dup 4+  @'          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 0,0~15,1^    dup     @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 0,0~15,2^    dup     @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 0,0~15,3^    dup     @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 0,0~15,4^    dup     @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~15,1^    dup 1+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 1,0~15,2^    dup 1+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 1,0~15,3^    dup 1+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 1,0~15,4^    dup 1+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 2,0~15,1^    dup 2+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 2,0~15,2^    dup 2+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 2,0~15,3^    dup 2+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 2,0~15,4^    dup 2+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 3,0~15,1^    dup 3+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 3,0~15,2^    dup 3+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 3,0~15,3^    dup 3+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 3,0~15,4^    dup 3+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 4,0~15,1^    dup 4+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 4,0~15,2^    dup 4+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 4,0~15,3^    dup 4+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 4,0~15,4^    dup 4+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 0,0~15^,1    dup     @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 0,0~15^,2    dup     @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 0,0~15^,3    dup     @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 0,0~15^,4    dup     @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~15^,1    dup 1+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 1,0~15^,2    dup 1+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 1,0~15^,3    dup 1+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 1,0~15^,4    dup 1+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 2,0~15^,1    dup 2+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 2,0~15^,2    dup 2+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 2,0~15^,3    dup 2+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 2,0~15^,4    dup 2+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 3,0~15^,1    dup 3+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 3,0~15^,2    dup 3+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 3,0~15^,3    dup 3+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 3,0~15^,4    dup 3+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 4,0~15^,1"   dup 4+  @^          dup  >disassem.number.stack  1p  .xxxx(h)  ;
: 4,0~15^,2"   dup 4+  @^          dup  >disassem.number.stack  2p  .xxxx(h)  ;
: 4,0~15^,3"   dup 4+  @^          dup  >disassem.number.stack  3p  .xxxx(h)  ;
: 4,0~15^,4"   dup 4+  @^          dup  >disassem.number.stack  4p  .xxxx(h)  ;

: 1,0~3,1      dup 1+ @3r          dup  >disassem.number.stack  1p  .?xx(h)    ;
: 1,0~3,2      dup 1+ @3r          dup  >disassem.number.stack  2p  .?xx(h)    ;
: 1,0~3,3      dup 1+ @3r          dup  >disassem.number.stack  3p  .?xx(h)    ;
: 1,0~3,4      dup 1+ @3r          dup  >disassem.number.stack  4p  .?xx(h)    ;

: 12.4r,1      dup    @4r          dup  >disassem.number.stack  1p  .?xx(h)    ;
: 12.4r,2      dup    @4r          dup  >disassem.number.stack  2p  .?xx(h)    ;
: 12.4r,3      dup    @4r          dup  >disassem.number.stack  3p  .?xx(h)    ;
: 12.4r,4      dup    @4r          dup  >disassem.number.stack  4p  .?xx(h)    ;

variable  free.rjmp

variable  u.r(.id)?     u.r(.id)?  on

defer   _t:?

: name,  ( cfa' -- )
  case    cfa'.of.IF       @   of    1   endof
          cfa'.of.ELSE     @   of    1   endof
          cfa'.of.THEN     @   of    1   endof
          cfa'.of.BEGIN    @   of    1   endof
          cfa'.of.WHILE    @   of    1   endof
          cfa'.of.REPEAT   @   of    1   endof
          cfa'.of.UNTIL    @   of    1   endof
          cfa'.of.AGAIN    @   of    1   endof
          cfa'.of.AHEAD    @   of    1   endof   0   swap
  endcase
  if       ','  emit
  then  ;

: u.r(.id) ( a' n -- )  over   cfa'in.NFA.QUEUE?
  if    drop   dup   30 ?y    .ID'(CFA'.IN.T:NFA.QUEUE)   name,   free.rjmp on
  else  u.r
  then  ;



: u.r'     ( a' n -- )  u.r(.id)?  @  if  u.r(.id)  else  u.r  then  ;
\ ------------------------------------------------------------------------------------------------------------
: check.macro.normal   ( a' --  a -1 / 0 )  former.{:NFA.QUEUE.addr @   {:NFA.QUEUE   +
  begin    2dup   dup>r  count  rot  a'>a   over  s=
     if    2drop  r> -1  exit
     then  drop   r> 4 -  @  dup   {:NFA.QUEUE  +  swap  0=
  until    2drop  0   ;

variable  s=(ffff)?

: s=(ffff)    ( a' a1 a1+1 len1 a2 len2 - a' a1 f )  s=(ffff)?  on
  rot   over   <>  if   2drop  0  exit then  0
\ rot   drop  ( a' a1 a1+1 a2 len2 )  0
  do    3 pick  i  +  ffffFFFE  and  16@'  ff00  and  4800 ( r=# )  <>
        if    over    i  +   c@    over  i  +   c@  <>  if   s=(ffff)?  off  leave  then
        then
  loop  2drop  s=(ffff)?  @  ;  \  :{ test.macro   0 [. ` adc1_base ]. literal. r=#   1 0  r=(r) };


: check.macro(ffff)   ( a' --  a -1 / 0 )  former.{:NFA.QUEUE.addr @   {:NFA.QUEUE   +
  begin    2dup   dup>r  count  rot  a'>a   over  s=(ffff)
     if    2drop  r> -1  exit
     then  drop   r> 4 -  @  dup   {:NFA.QUEUE  +  swap  0=
  until    2drop  0   ;

 
variable  check.macro(ffff)?   check.macro(ffff)?  on    \  r=# related

: check.macro  ( -- )
        check.macro(ffff)?  @
  if    check.macro(ffff)
  else  check.macro.normal
  then  ;

: check.macro  ( -- )  check.macro.normal  ;


: check.macro.SUPPER   ( a' --  a -1 / 0 )  former.{{:NFA.QUEUE.addr @   {{:NFA.QUEUE   +
  begin    2dup   dup>r  count  rot  a'>a   over  s=
     if    2drop  r> -1  exit
     then  drop   r> 4 -  @  dup   {{:NFA.QUEUE  +  swap  0=
  until    2drop  0   ;

variable  disassem.macro?                         disassem.macro?         on
variable  disassem.macro.SUPPER?                  disassem.macro.SUPPER?  on

: disassem.macro  ( a1' -- a2' length / a1' 0 )   disassem.macro?  @  0=  if  0  exit  then
  dup   check.macro
  if  \ 2dup  c@  dup>r  n>(n   drop  abreast? @
        2dup  c@  dup>r  n>(n  2drop  abreast? @
        if    34 ( 30 )  else   3f  then  ?y  r@  +  1+  count  type   r>
        over  32@'   code.of.end-code   @  ( 46304536 )  =   if   \.3f---   then    exit
        over  16@'   code.of.exit(fram) @  (     e04c )  =   if   \.3f---   then    exit
  then  0  ;

' DISASSEM.macro  is  _DISASSEM.macro

mecrisp32F429/407?  @
#if
: NFA'>CFA'  ( nfa' -- cfa' | 0 )   dup  is.it.NFA'?(mecrispCMx.stm32F429)  if   nfa'>cfa'(mecrispCMx)   exit  then  drop  0  ;
#then

variable  abreast?             abreast?  on

: append.\.3F---   ( a' -- )  \   mecrisp32F429/407?   @   if  dup  4  mod   if  drop  exit  then   then
  >r
  r@    16@'       4770   ( ret' )  =
  r@    16@'       BD00   ( ret' )  =   or
  if    r@   8  +  NFA'>CFA'   CFA'>ADDR.OF.NFA'.IN.T:NFA.QUEUE/T:NFA.QUEUE*
        if         drop   r>drop              exit
        then              r>drop    \.3f---   exit
  then
  r@    32@'   FB04F852   ( ret  )  =
  if    r@  0a  +  NFA'>CFA'   CFA'>ADDR.OF.NFA'.IN.T:NFA.QUEUE/T:NFA.QUEUE*
        if         drop   r>drop              exit
        then              r>drop    \.3f---   exit
  then  r>drop     ;

: append.\.3F---   ( a' -- )  drop  ;  \ ??????????????????????????


: disassem.macro.NEW          ( a1' -- a2' length / a1' 0 )   disassem.macro?         @  0=  if  0  exit  then
  dup   check.macro
  if    2dup  c@  dup>r  n>(n  2drop  abreast? @
        if    34 ( 30 )  else   3f  then  ?y  r@  +  1+  count  type  dup   r>  +   swap   append.\.3F---   -1   exit
        over   8@'      @  ( 46304536 )  =   if   \.3f---   then    exit
\       over  32@'   code.of.end-code   @  ( 46304536 )  =   if   \.3f---   then    exit
\       over  16@'   code.of.exit(fram) @  (     e04c )  =   if   \.3f---   then    exit
  then  0  ;

: disassem.macro  ( a1' -- a2' length / a1' 0 )  \ disassem.macro?  @  0=  if  0  exit  then  @  0=  if  0  exit  then
  disassem.macro.NEW   ?dup  if  exit  then 0 ;

: disassem.macro.SUPPER.NEW   ( a1' -- a2' length / a1' 0 )   disassem.macro.SUPPER?  @  0=  if  0  exit  then
  dup   check.macro.SUPPER
  if    2dup  c@  dup>r  n>(n  2drop  abreast? @
        if    34 ( 30 )  else   3f  then  ?y  r@  +  1+  count  type  dup  r>  +    swap   append.\.3F---   -1   exit
        over   8@'      @  ( 46304536 )  =   if   \.3f---    then                   exit
  then  0  ;

: disassem.macro.SUPPER  ( a1' -- a2' length / a1' 0 )  \ disassem.macro.SUPPER?  @  0=  if  0  exit  then  @  0=  if  0  exit  then
  disassem.macro.SUPPER.NEW   ?dup  if  exit  then 0 ;













VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if
' _memit  is  emit      ' _mtype  is  type   \   ` _mcrtab  is  cr
#then

: c/   ;

hex

variable  .s=1.ok??

: `16.op.code       ( a' op.code.mask -- a' op.code )  >r   dup  16@'  r>  and  ;
: `16       `16.op.code  ;


:  32@^   32@'   0~15<->16~31  ;
: `32.op.code                        >r  dup 32@^  ( .s=1.ok?? )  r>  and  ;  ( a' -- a' op.code )
: `32.op.code+.s=1.ok??              >r  dup 32@^    .s=1.ok??    r>  and  ;  ( a' -- a' op.code )
: `32.op.code+.s=1.ok??+.p|w.ok??    >r  dup 32@^    .s=1.ok??    r>  and  ;  ( a' -- a' op.code )

: `32       `32.op.code  ;                    \  '  `32.op.code  alias  `32
: `32s      `32.op.code+.s=1.ok??   ;
: `32spw    `32.op.code+.s=1.ok??+.p|w.ok??  ;

0  value  (a)
0  value  (p)
0  value  (b)
0  value  (#)   0  value  (w)
0  value  (Rd)
0  value  (Rn)
0  value  (Rm)
0  value  (n)
0  value  (op.code)

0  value  (n0)
0  value  (n1)
0  value  (n2)
0  value  (n3)
0  value  (n4)
0  value  (n5)
0  value  (n6)
0  value  (n7)
0  value  (n8)
0  value  (n9)
0  value  (n)
0  value  (x)

0  value  <<x0>>
0  value  <<x1>>
0  value  <<x2>>
0  value  <<x3>>
0  value  <<x4>>
0  value  <<y0>>
0  value  <<y1>>
0  value  <<y2>>
0  value  <<y3>>
0  value  <<y4>>
0  value  <<a'>>
0  value  <<p>>

: 32,^           0~15<->16~31  32,' ;
: 32@^      32@' 0~15<->16~31       ;

: n1~n2>|n1-n2|~0  ( n1 n2 -- |n1-n2| 0 )   max.min   2dup  -   0  ;
: ?~?>|?-?|~0      ( n1 n2 -- |n1-n2| 0 )   max.min   2dup  -   0  ;

: n>?~?  ( n n1~n2 -- n3 )    min  lshift  ;

: >10~8  ( n1 -- n2 )   0a ( 10 ) 8   n>?~?  ;

: 2,?~?       ( a' ? ? -- n )   ?~?.mask  swap  16@'  and  ;

tachyonForth?  @     tachyon.assembler?  @  and   esp32?  @  or
#if
: 4,?~?       ( a' ? ? -- n )   ?~?.mask  swap  <<byte>> 2 = if  16@'  else  32@'  then  and  ;
#else
: 4,?~?       ( a' ? ? -- n )   ?~?.mask  swap  <<byte>> 2 = if  16@'  else  32@^  then  and  ;
: 4,?~?       ( a' ? ? -- n )
  z80?  @
  if      ?~?.mask  swap  <<byte>> case  1  of   8@'  endof
                                         2  of  16@'  endof
                                         3  of  24@'  endof
                                         4  of  32@'  endof
                                   endcase                         and  
  else    ?~?.mask  swap  <<byte>> 2 = if  16@'  else  32@^  then  and
  then    ;
#then
: 2,?~?>|?-?|~0  ( a' ? ? -- |?-?| 0 )    2dup  2>r   2,?~?   2r>  nip  rshift  ;
: 4,?~?>|?-?|~0  ( a' ? ? -- |?-?| 0 )    2dup  2>r   4,?~?   2r>  nip  rshift  ;

: ?~?>|?-?|~0    ( a' ? ? -- |?-?| 0 )    <<byte>>
  case   2  of   2,?~?>|?-?|~0   endof
         4  of   4,?~?>|?-?|~0   endof
         -1 abort" **** number of byte undeterminded ****"
  endcase   ;

tachyonForth?  @     tachyon.assembler?  @  and    esp32?  @  or
#if    : a'@    (  -- @ )    (a')  32@'  ;
#else  : a'@    (  -- @ )    (a')  32@^  ;
#then

: ?~?+?~?+?~?+?~?+?~?>   ( a' n9 n8 n7 n6 n5 n4 n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)   to (n4)   to (n5)   to (n6)   to (n7)   to (n8)   to (n9)    a'@  to (op.code)
  (a') (n1) (n0)  4,?~?  (n0)               rshift
  (a') (n3) (n2)  4,?~?  (n2)  (n1)  -  1-  rshift  +
  (a') (n5) (n4)  4,?~?  (n2)  (n1)  -  1-  rshift  (n4)  (n3)  -  1-  rshift  +
  (a') (n7) (n6)  4,?~?  (n2)  (n1)  -  1-  rshift  (n4)  (n3)  -  1-  rshift  (n6)  (n5)  -  1-  rshift  +
  (a') (n9) (n8)  4,?~?  (n2)  (n1)  -  1-  rshift  (n4)  (n3)  -  1-  rshift  (n6)  (n5)  -  1-  rshift  (n8)  (n7)  -  1-  rshift  +  ;

: ?~?+?~?+?~?+?~?>       ( a'       n7 n6 n5 n4 n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)   to (n4)   to (n5)   to (n6)   to (n7)                        a'@  to (op.code)
  (a') (n1) (n0)  4,?~?  (n0)               rshift
  (a') (n3) (n2)  4,?~?  (n2)  (n1)  -  1-  rshift  +
  (a') (n5) (n4)  4,?~?  (n2)  (n1)  -  1-  rshift  (n4)  (n3)  -  1-  rshift  +
  (a') (n7) (n6)  4,?~?  (n2)  (n1)  -  1-  rshift  (n4)  (n3)  -  1-  rshift  (n6)  (n5)  -  1-  rshift  +  ;

: ?~?+?~?+?~?>           ( a'             n5 n4 n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)   to (n4)   to (n5)                                           a'@  to (op.code)
  (a') (n1) (n0)  4,?~?  (n0)               rshift
  (a') (n3) (n2)  4,?~?  (n2)  (n1)  -  1-  rshift  +
  (a') (n5) (n4)  4,?~?  (n2)  (n1)  -  1-  rshift  (n4)  (n3)  -  1-  rshift  +  ;

: ?~?+?~?>               ( a'                   n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)                                                               a'@  to (op.code)
  (a') (n1) (n0)  4,?~?  (n0)               rshift
  (a') (n3) (n2)  4,?~?  (n2)  (n1)  -  1-  rshift  +  ;

: ?~?>                   ( a'                         n1 n0 -- n' )
  to (n0)   to (n1)                                                                                   a'@  to (op.code)
  (a') (n1) (n0)  4,?~?  (n0)               rshift     ;
\ ------------------------------------------------------------------------------
: >?~?   ( n n1 n2 -- n' )   nip  lshift  ;

: 1<<?-?1+./mod.swap.>?~?  ( n n1 n2 -- q n' )  2>r  1  2r@ -   1+  lshift  /mod  swap  2r>  >?~?  ;

: >?~?+?~?+?~?+?~?+?~?   ( n n9 n8 n7 n6 n5 n4 n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)   to (n4)   to (n5)   to (n6)   to (n7)   to (n8)   to (n9)  \  to (n)
  (n1) (n0)  1<<?-?1+./mod.swap.>?~?  >r
  (n3) (n2)  1<<?-?1+./mod.swap.>?~?  >r
  (n5) (n4)  1<<?-?1+./mod.swap.>?~?  >r
  (n7) (n6)  1<<?-?1+./mod.swap.>?~?  >r
  (n9) (n8)  1<<?-?1+./mod.swap.>?~?  >r     abort" **** number too large ****"  r>  r>  r>  r>  r>  + + + +  ;

: >?~?+?~?+?~?+?~?       ( n n7 n6 n5 n4 n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)   to (n4)   to (n5)   to (n6)   to (n7)   \  to (n)
  (n1) (n0)  1<<?-?1+./mod.swap.>?~?  >r
  (n3) (n2)  1<<?-?1+./mod.swap.>?~?  >r
  (n5) (n4)  1<<?-?1+./mod.swap.>?~?  >r
  (n7) (n6)  1<<?-?1+./mod.swap.>?~?  >r     abort" **** number too large ****"  r>  r>  r>  r>  + + +  ;

: >?~?+?~?+?~?           ( n n5 n4 n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)   to (n4)   to (n5)   \  to (n)
  (n1) (n0)  1<<?-?1+./mod.swap.>?~?  >r
  (n3) (n2)  1<<?-?1+./mod.swap.>?~?  >r
  (n5) (n4)  1<<?-?1+./mod.swap.>?~?  >r     abort" **** number too large ****"  r>  r>  r>  + +  ;

: >?~?+?~?               ( n n3 n2 n1 n0 -- n' )
  to (n0)   to (n1)   to (n2)   to (n3)    \  to (n)
  (n1) (n0)  1<<?-?1+./mod.swap.>?~?  >r
  (n3) (n2)  1<<?-?1+./mod.swap.>?~?  >r     abort" **** number too large ****"  r>  r>  +  ;

: >?~?                   ( n n1 n0 -- n' )
  to (n0)   to (n1)   \  to (n)
  (n1) (n0)  1<<?-?1+./mod.swap.>?~?  >r     abort" **** number too large ****"  r>  ;

: 1p  ( n1 n2 -- )   <<byte>>  1  =  if  28  else  24  then  ?y  dup >DISASSEM.NUMBER.STACK  .XXXX(H) ;
: 2p  ( n1 n2 -- )   <<byte>>  2  =  if  32  else  2e  then  ?y  dup >DISASSEM.NUMBER.STACK  .XXXX(H) ;
: 3p  ( n1 n2 -- )   <<byte>>  3  =  if  3c  else  38  then  ?y  dup >DISASSEM.NUMBER.STACK  .XXXX(H) ;
: 4p  ( n1 n2 -- )   <<byte>>  4  =  if  46  else  42  then  ?y  dup >DISASSEM.NUMBER.STACK  .XXXX(H) ;

: 1p  ( n1 n2 -- )   <<byte>>  1  =  if  24  else  24  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;
: 2p  ( n1 n2 -- )   <<byte>>  2  =  if  2e  else  2e  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;
: 3p  ( n1 n2 -- )   <<byte>>  3  =  if  38  else  38  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;
: 4p  ( n1 n2 -- )   <<byte>>  4  =  if  42  else  42  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;


variable  >ultra.stack?       >ultra.stack?  on

defer    _>ultra.stack

: ultra  ( n -- n )  >ultra.stack? @  if  dup  _>ultra.stack  then   ;

: 1p  ( n1 n2 -- )   <<byte>>  1  =  if  24  else  24  then  ?y  dup >DISASSEM.NUMBER.STACK  ultra  .xxxxXXXX(H) ;
: 2p  ( n1 n2 -- )   <<byte>>  2  =  if  2e  else  2e  then  ?y  dup >DISASSEM.NUMBER.STACK  ultra  .xxxxXXXX(H) ;
: 3p  ( n1 n2 -- )   <<byte>>  3  =  if  38  else  38  then  ?y  dup >DISASSEM.NUMBER.STACK  ultra  .xxxxXXXX(H) ;
: 4p  ( n1 n2 -- )   <<byte>>  4  =  if  42  else  42  then  ?y  dup >DISASSEM.NUMBER.STACK  ultra  .xxxxXXXX(H) ;


: 1p  ( n1 n2 -- )  ultra   <<byte>>  1  =  if  24  else  24  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;
: 2p  ( n1 n2 -- )  ultra   <<byte>>  2  =  if  2e  else  2e  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;
: 3p  ( n1 n2 -- )  ultra   <<byte>>  3  =  if  38  else  38  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;
: 4p  ( n1 n2 -- )  ultra   <<byte>>  4  =  if  42  else  42  then  ?y  dup >DISASSEM.NUMBER.STACK  .xxxxXXXX(H) ;




: ?p  ( n -- )
  case      1 of  1p   endof
            2 of  2p   endof
            3 of  3p   endof
            4 of  4p   endof
  endcase   ;




variable  initialize.value  12345678   initialize.value  !

  10  TABLE  REG       \   : initilize.reg   initialize.value  @  10  0  do   dup  i  reg  !  loop  drop  ;

: initialize.???  ( value cfa.of.table.name items -- )  cells  0  do  2dup  i  +  !  cell  +loop  2drop  ;

\                 12345678  reg  10
: initilize.reg   12345678  0 reg  10   initialize.???  ;

: dump.table  ( cfa.of.table.name items -- )  cells  0  do  cr  ."   ( "  i  cell /  3 .r  ."  )"  i  over +  @  0b u.r  cell  +loop  drop  ;

\ 0 reg  10  dump.table
: reg!  ( n r -- )   reg  !  ;   \  123  4  reg!   or   123  4  reg  !

: extract.number  ( bit.n1 bit n2 -- )  ;

: extract.register.and.number  ( bit.n1.of.R  bit.n2.of.R  bit.n3.of.#  bit.n4.of.# -- R # )
  extract.number    -rot   extract.number  ;

variable      ultra.stack.counter
variable  max.ultra.stack.counter             10  max.ultra.stack.counter  !
create        ultra.stack                         max.ultra.stack.counter  @  allot

: fill.ultra.stack.with.special.number  ( n -- )  max.ultra.stack.counter  @  0
  do     dup   ultra.stack   i  +  !    4
  +loop  drop  ;

\ 8879576  fill.ultra.stack.with.special.number

\ circular ultra.stack
: >ultra.stack   ( n -- )                               ultra.stack  ultra.stack.counter  @  +  !     4  ultra.stack.counter  +!
   ultra.stack.counter  @  max.ultra.stack.counter  @   u>=  if                              0    ultra.stack.counter  !  then     ;


: >ultra.stack   ( n -- )  4   ultra.stack.counter  +!
   ultra.stack.counter  @  max.ultra.stack.counter  @    >=  if                              0    ultra.stack.counter  !  then
   ultra.stack  ultra.stack.counter  @  +  !    ;



' >ultra.stack   is  _>ultra.stack

:  ultra.stack>  ( -- n )  -4  ultra.stack.counter  +!
   ultra.stack.counter  @                           0    <   if  max.ultra.stack.counter  @  4 -  ultra.stack.counter  !  then
   ultra.stack  ultra.stack.counter  @  +  @  ;




:  ultra.stack>  ( -- n )      ultra.stack  ultra.stack.counter  @  +  @
                           -4  ultra.stack.counter  +!
   ultra.stack.counter  @                           0    <   if  max.ultra.stack.counter  @  4 -  ultra.stack.counter  !  then  ;

: dump.ultra.stack'   ( -- )   ultra.stack   ultra.stack.counter  @
  max.ultra.stack.counter  @   0
  do     2dup   i  +   dup   max.ultra.stack.counter  @   >=
     if                      max.ultra.stack.counter  @   -
     then       +  @   0a  u.r   4
  +loop  2drop  ;

: dump.ultra.stack    ( -- )   ultra.stack   ultra.stack.counter  @
  max.ultra.stack.counter  @   0
  do  ultra.stack   i   +  @   0a  u.r   4
  +loop  2drop  ;

: erase.ultra.stack   ( -- )   ultra.stack   max.ultra.stack.counter  @   erase  ;
: eua   erase.ultra.stack  ;

\ variable  >ultra.stack?       >ultra.stack?  on
variable  #.byte
0  value  (?p)

:  a'+2     (a')   2 +  to (a')  ;
:  a'+4     (a')   4 +  to (a')  ;
:  a'+6     (a')   6 +  to (a')  ;
:  a'+8     (a')   8 +  to (a')  ;
:  a'+10    (a')  0a +  to (a')  ;

:  11p      ( n1 n2 -- )                 1  to (?p)  ?~?>     1p  ;
:  12p      ( n1 n2 -- )                 2  to (?p)  ?~?>     2p  ;
:  13p      ( n1 n2 -- )                 3  to (?p)  ?~?>     3p  ;
:  14p      ( n1 n2 -- )                 4  to (?p)  ?~?>     4p  ;
:  14p+1    ( n1 n2 -- )                 4  to (?p)  ?~?>  1+ 4p  ;

:  11p,2    ( n1 n2 -- )  2 to <<BYTE>>  1  to (?p)  ?~?>  1p  ;
:  12p,2    ( n1 n2 -- )  2 to <<BYTE>>  2  to (?p)  ?~?>  2p  ;
:  13p,2    ( n1 n2 -- )  2 to <<BYTE>>  3  to (?p)  ?~?>  3p  ;
:  14p,2    ( n1 n2 -- )  2 to <<BYTE>>  4  to (?p)  ?~?>  4p  ;

:  11p,4    ( n1 n2 -- )  4 to <<BYTE>>  1  to (?p)  ?~?>  1p  ;
:  12p,4    ( n1 n2 -- )  4 to <<BYTE>>  2  to (?p)  ?~?>  2p  ;
:  13p,4    ( n1 n2 -- )  4 to <<BYTE>>  3  to (?p)  ?~?>  3p  ;
:  14p,4    ( n1 n2 -- )  4 to <<BYTE>>  4  to (?p)  ?~?>  4p  ;

:  11p+2    ( n1 n2 -- )                 1  to (?p)  ?~?>  1p  a'+2  ;
:  12p+2    ( n1 n2 -- )                 2  to (?p)  ?~?>  2p  a'+2  ;
:  13p+2    ( n1 n2 -- )                 3  to (?p)  ?~?>  3p  a'+2  ;
:  14p+2    ( n1 n2 -- )                 4  to (?p)  ?~?>  4p  a'+2  ;

:  11p+4    ( n1 n2 -- )                 1  to (?p)  ?~?>  1p  a'+4  ;
:  12p+4    ( n1 n2 -- )                 2  to (?p)  ?~?>  2p  a'+4  ;
:  13p+4    ( n1 n2 -- )                 3  to (?p)  ?~?>  3p  a'+4  ;
:  14p+4    ( n1 n2 -- )                 4  to (?p)  ?~?>  4p  a'+4  ;

:  11p+6    ( n1 n2 -- )                 1  to (?p)  ?~?>  1p  a'+6  ;
:  12p+6    ( n1 n2 -- )                 2  to (?p)  ?~?>  2p  a'+6  ;
:  13p+6    ( n1 n2 -- )                 3  to (?p)  ?~?>  3p  a'+6  ;
:  14p+6    ( n1 n2 -- )                 4  to (?p)  ?~?>  4p  a'+6  ;

:  11p+8    ( n1 n2 -- )                 1  to (?p)  ?~?>  1p  a'+8  ;
:  12p+8    ( n1 n2 -- )                 2  to (?p)  ?~?>  2p  a'+8  ;
:  13p+8    ( n1 n2 -- )                 3  to (?p)  ?~?>  3p  a'+8  ;
:  14p+8    ( n1 n2 -- )                 4  to (?p)  ?~?>  4p  a'+8  ;

:  11p+10   ( n1 n2 -- )                 1  to (?p)  ?~?>  1p  a'+10 ;
:  12p+10   ( n1 n2 -- )                 2  to (?p)  ?~?>  2p  a'+10 ;
:  13p+10   ( n1 n2 -- )                 3  to (?p)  ?~?>  3p  a'+10 ;
:  14p+10   ( n1 n2 -- )                 4  to (?p)  ?~?>  4p  a'+10 ;

:  11p,2+2  ( n1 n2 -- )  2 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+2   ;
:  12p,2+2  ( n1 n2 -- )  2 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+2   ;
:  13p,2+2  ( n1 n2 -- )  2 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+2   ;
:  14p,2+2  ( n1 n2 -- )  2 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+2   ;

:  11p,2+4  ( n1 n2 -- )  2 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+4   ;
:  12p,2+4  ( n1 n2 -- )  2 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+4   ;
:  13p,2+4  ( n1 n2 -- )  2 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+4   ;
:  14p,2+4  ( n1 n2 -- )  2 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+4   ;

:  11p,2+6  ( n1 n2 -- )  2 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+6   ;
:  12p,2+6  ( n1 n2 -- )  2 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+6   ;
:  13p,2+6  ( n1 n2 -- )  2 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+6   ;
:  14p,2+6  ( n1 n2 -- )  2 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+6   ;

:  11p,2+8  ( n1 n2 -- )  2 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+8   ;
:  12p,2+8  ( n1 n2 -- )  2 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+8   ;
:  13p,2+8  ( n1 n2 -- )  2 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+8   ;
:  14p,2+8  ( n1 n2 -- )  2 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+8   ;

:  11p,2+10 ( n1 n2 -- )  2 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+10  ;
:  12p,2+10 ( n1 n2 -- )  2 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+10  ;
:  13p,2+10 ( n1 n2 -- )  2 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+10  ;
:  14p,2+10 ( n1 n2 -- )  2 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+10  ;


:  11p,4+2  ( n1 n2 -- )  4 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+2   ;
:  12p,4+2  ( n1 n2 -- )  4 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+2   ;
:  13p,4+2  ( n1 n2 -- )  4 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+2   ;
:  14p,4+2  ( n1 n2 -- )  4 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+2   ;

:  11p,4+4  ( n1 n2 -- )  4 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+4   ;
:  12p,4+4  ( n1 n2 -- )  4 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+4   ;
:  13p,4+4  ( n1 n2 -- )  4 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+4   ;
:  14p,4+4  ( n1 n2 -- )  4 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+4   ;

:  11p,4+6  ( n1 n2 -- )  4 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+6   ;
:  12p,4+6  ( n1 n2 -- )  4 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+6   ;
:  13p,4+6  ( n1 n2 -- )  4 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+6   ;
:  14p,4+6  ( n1 n2 -- )  4 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+6   ;

:  11p,4+8  ( n1 n2 -- )  4 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+8   ;
:  12p,4+8  ( n1 n2 -- )  4 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+8   ;
:  13p,4+8  ( n1 n2 -- )  4 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+8   ;
:  14p,4+8  ( n1 n2 -- )  4 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+8   ;

:  11p,4+10 ( n1 n2 -- )  4 to <<BYTE>>  1  to (?p)  ?~?>  1p   a'+10  ;
:  12p,4+10 ( n1 n2 -- )  4 to <<BYTE>>  2  to (?p)  ?~?>  2p   a'+10  ;
:  13p,4+10 ( n1 n2 -- )  4 to <<BYTE>>  3  to (?p)  ?~?>  3p   a'+10  ;
:  14p,4+10 ( n1 n2 -- )  4 to <<BYTE>>  4  to (?p)  ?~?>  4p   a'+10  ;

                                                          






comment:
:  11p    ( n1 n2 -- )  1  to (?p)  ?~?>  >ultra.stack? @  if  dup  >ultra.stack  then  1p  ;
:  12p    ( n1 n2 -- )  2  to (?p)  ?~?>  >ultra.stack? @  if  dup  >ultra.stack  then  2p  ;
:  13p    ( n1 n2 -- )  3  to (?p)  ?~?>  >ultra.stack? @  if  dup  >ultra.stack  then  3p  ;
:  14p    ( n1 n2 -- )  4  to (?p)  ?~?>  >ultra.stack? @  if  dup  >ultra.stack  then  4p  ;
comment;



create register.array   40  allot

: >R(register.array)  ( n r -- )    4*  register.array  +  !  ;

: >y0    0  >R(register.array)  ;
: >y1    1  >R(register.array)  ;
: >y2    2  >R(register.array)  ;
: >y3    3  >R(register.array)  ;
: >y4    4  >R(register.array)  ;
: >y5    5  >R(register.array)  ;
: >y6    6  >R(register.array)  ;
: >y7    7  >R(register.array)  ;
: >y8    8  >R(register.array)  ;
: >y9    9  >R(register.array)  ;
: >ya   0a  >R(register.array)  ;
: >yb   0b  >R(register.array)  ;
: >yc   0c  >R(register.array)  ;
: >yd   0d  >R(register.array)  ;
: >ye   0e  >R(register.array)  ;
: >yf   0f  >R(register.array)  ;
         
: dump.register.array  ( -- )   cr  dump.ultra.stack   cr
  40  0  do   cr  ."   R"  i  4  /  .   ." : "  i   register.array  +  @   0a  u.r   4  +loop  ;

: dra    dump.register.array  ;

: erase.register.array   ( -- )   register.array  40  erase  ;
: era   erase.register.array  ;

variable  show.reg?  \  show.reg?  on

:  so     show.reg?  dup  @  if  off  else  on  then  last.u @  _U ;

: deal.R=#      ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( 400048B0) ultra.stack> ( R0 ) 4*  register.array  +  !  ;  \ R0=400048B0

: deal.R=(pc+#8')  ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( 400048B0) ultra.stack> ( R0 ) 4*  register.array  +  !  ;  \ R0=400048B0



defer  _.io.name
defer  _.io.name(tachyonForth)



: deal.R=R+#12   ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( 0CC )     ultra.stack> ( R0 ) 4*  register.array  +  @  +
  -4  to  +#    dup  _.IO.NAME 60 ?y ." \  "  dup  .xxxxXXXX  ultra.stack> ( R2 ) 4*  register.array  +  !  ;  \ R2=R0+0CC

: show.port.name  ( a' -- )   58  ?y   9 u.r  ."  <-- port.name??? "  ;   \  #>.id  ;

: deal.(R+#5)=R   ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( R1 ) 4*  register.array  +  @  drop  \   drop for now ????
                                     ultra.stack> ( 4  )
                                     ultra.stack> ( R2 ) 4*  register.array  +  @  +
                     -4  to  +#      dup  _.IO.NAME    60 ?y   ." \  "   .xxxxXXXX    ;
                                     \ _.IO.NAME  ( show.port.name )  ;  \ (R2+4)=R1

: deal.(R+#12)=R   ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( R1 ) 4*  register.array  +  @  drop  \   drop for now ????
                                     ultra.stack> ( 4  )
                                     ultra.stack> ( R2 ) 4*  register.array  +  @  +
                     -4  to  +#      dup  _.IO.NAME    60 ?y   ." \  "   .xxxxXXXX    ;
                                     \ _.IO.NAME  ( show.port.name )  ;  \ (R2+4)=R1


: deal.R=(R+#12)   ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( 4  )
                                     ultra.stack> ( R2 ) 4*  register.array  +  @  +
                                     ultra.stack> ( R1 ) 4*  register.array  +  @  drop
                     -4  to  +#      dup  _.IO.NAME    60 ?y   ." \  "   .xxxxXXXX    ;
                                     \ _.IO.NAME  ( show.port.name )  ;  \ R1=(R2+4)


: deal.R=(R+#5)    ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( 4  )
                                     ultra.stack> ( R2 ) 4*  register.array  +  @  +
                                     ultra.stack> ( R1 ) 4*  register.array  +  @  drop
                     -4  to  +#      dup  _.IO.NAME    60 ?y   ." \  "   .xxxxXXXX    ;
                                     \ _.IO.NAME  ( show.port.name )  ;  \ R1=(R2+4)




: deal.(R+#5)oR   ( -- )
  show.reg?  @  not  if  exit  then  ultra.stack> ( R1 ) 4*  register.array  +  @  drop  \   drop for now ????
                                     ultra.stack> ( 4  )
                                     ultra.stack> ( R2 ) 4*  register.array  +  @  +
                     -4  to  +#      dup  _.IO.NAME    60 ?y   ." \  "   .xxxxXXXX    ;
                                     \ _.IO.NAME  ( show.port.name )  ;  \ (R2+4)=R1














: disassem.registers ( -- )  ;

tachyonForth?  @     tachyon.assembler?  @  and  \ 0 and
#if


:  #>name1   ( # -- )  drop  40 ?y  ." \ tachyon register" ; \  only applicable in tachyonForth
:  #>name2   ( # -- )  drop  48 ?y  ." \ tachyon register" ; \  only applicable in tachyonForth4
:  #>name3   ( # -- )  drop  50 ?y  ." \ tachyon register" ; \  only applicable in tachyonForth
:  #>name4   ( # -- )  drop  58 ?y  ." \ tachyon register" ; \  only applicable in tachyonForth4

:  11p+name ( n1 n2 -- )  1  to (?p)  ?~?>   dup   1p  #>name1  ;
:  12p+name ( n1 n2 -- )  2  to (?p)  ?~?>   dup   2p  #>name2  ;
:  13p+name ( n1 n2 -- )  3  to (?p)  ?~?>   dup   3p  #>name3  ;
:  14p+name ( n1 n2 -- )  4  to (?p)  ?~?>   dup   4p  #>name4  ;

:  11p   11p+name ;  \  ( n1 n2 -- )  1  to (?p)  ?~?>   dup   1p  #>name1   ;
:  12p   12p+name ;  \  ( n1 n2 -- )  2  to (?p)  ?~?>   dup   2p  #>name2   ;
:  13p   13p+name ;  \  ( n1 n2 -- )  3  to (?p)  ?~?>   dup   3p  #>name3   ;
:  14p   14p+name ;  \  ( n1 n2 -- )  4  to (?p)  ?~?>   dup   4p  #>name4   ;

:  11p'   ( n1 n2 -- )  1  to (?p)  ?~?>   dup   1p  _.io.name  ;
:  12p'   ( n1 n2 -- )  2  to (?p)  ?~?>   dup   2p  _.io.name  ;
:  13p'   ( n1 n2 -- )  3  to (?p)  ?~?>   dup   3p  _.io.name  ;
:  14p'   ( n1 n2 -- )  4  to (?p)  ?~?>   dup   4p  _.io.name  ;

\  11p    ( n1 n2 -- )  1  to (?p)  ?~?>   dup   1p  dup  100  1ff  between  if  0 to +#  _.io.name(tachyonForth)  else  drop then  ;
\  12p    ( n1 n2 -- )  2  to (?p)  ?~?>   dup   2p  dup  100  1ff  between  if  0 to +#  _.io.name(tachyonForth)  else  drop then  ;
:  13p    ( n1 n2 -- )  3  to (?p)  ?~?>   dup   3p  dup  100  1ff  between  if  0 to +#  _.io.name(tachyonForth)  else  drop then  ;
:  14p    ( n1 n2 -- )  4  to (?p)  ?~?>   dup   4p  dup  100  1ff  between  if 10 to +#  _.io.name(tachyonForth)  else  drop then  ;
                                                        ( 199 )
#then


:  12p*2       ( n1 n2 -- )  2  to (?p)  ?~?>  2*         3p  ;
:  12p*4       ( n1 n2 -- )  2  to (?p)  ?~?>  4 *        3p  ;
:  12p*2+18    ( n1 n2 -- )  2  to (?p)  ?~?>  2* 18 +    3p  ;
:  12p+10      ( n1 n2 -- )  2  to (?p)  ?~?>     10 +    3p  ;

:  13p*2       ( n1 n2 -- )  3  to (?p)  ?~?>  2*         3p  ;
:  13p*4       ( n1 n2 -- )  3  to (?p)  ?~?>  4 *        3p  ;
:  13p*2+18    ( n1 n2 -- )  3  to (?p)  ?~?>  2* 18 +    3p  ;
:  13p+10      ( n1 n2 -- )  3  to (?p)  ?~?>     10 +    3p  ;

:  14p*2       ( n1 n2 -- )  4  to (?p)  ?~?>  2*         4p  ;
:  14p*4       ( n1 n2 -- )  4  to (?p)  ?~?>  4 *        4p  ;

:  13p*2,2     ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  2*         3p  ;
:  13p*4,2     ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  4 *        3p  ;
:  13p*2+18,2  ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  2* 18 +    3p  ;
:  13p+10,2    ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>     10 +    3p  ;
:  14p*2,2     ( n1 n2 -- )  2 to <<byte>>  4  to (?p)  ?~?>  2*         4p  ;
:  14p*4,2     ( n1 n2 -- )  2 to <<byte>>  4  to (?p)  ?~?>  4 *        4p  ;  

:  13p*2,4     ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  2*         3p  ;
:  13p*4,4     ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  4 *        3p  ;
:  13p*2+18,4  ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  2* 18 +    3p  ;
:  13p+10,4    ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>     10 +    3p  ;
:  14p*2,4     ( n1 n2 -- )  4 to <<byte>>  4  to (?p)  ?~?>  2*         4p  ;
:  14p*4,4     ( n1 n2 -- )  4 to <<byte>>  4  to (?p)  ?~?>  4 *        4p  ;












:  12p*2,a'+2       ( n1 n2 -- )  2  to (?p)  ?~?>  2*         3p  a'+2  ;
:  12p*4,a'+2       ( n1 n2 -- )  2  to (?p)  ?~?>  4 *        3p  a'+2  ;
:  12p*2+18,a'+2    ( n1 n2 -- )  2  to (?p)  ?~?>  2* 18 +    3p  a'+2  ;
:  12p+10,a'+2      ( n1 n2 -- )  2  to (?p)  ?~?>     10 +    3p  a'+2  ;

:  13p*2,a'+2       ( n1 n2 -- )  3  to (?p)  ?~?>  2*         3p  a'+2  ;
:  13p*4,a'+2       ( n1 n2 -- )  3  to (?p)  ?~?>  4 *        3p  a'+2  ;
:  13p*2+18,a'+2    ( n1 n2 -- )  3  to (?p)  ?~?>  2* 18 +    3p  a'+2  ;
:  13p+10,a'+2      ( n1 n2 -- )  3  to (?p)  ?~?>     10 +    3p  a'+2  ;

:  14p*2,a'+2       ( n1 n2 -- )  4  to (?p)  ?~?>  2*         4p  a'+2  ;
:  14p*4,a'+2       ( n1 n2 -- )  4  to (?p)  ?~?>  4 *        4p  a'+2  ;

:  13p*2,2,a'+2     ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  2*         3p  a'+2  ;
:  13p*4,2,a'+2     ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  4 *        3p  a'+2  ;
:  13p*2+18,2,a'+2  ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  2* 18 +    3p  a'+2  ;
:  13p+10,2,a'+2    ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>     10 +    3p  a'+2  ;
:  14p*2,2,a'+2     ( n1 n2 -- )  2 to <<byte>>  4  to (?p)  ?~?>  2*         4p  a'+2  ;
:  14p*4,2,a'+2     ( n1 n2 -- )  2 to <<byte>>  4  to (?p)  ?~?>  4 *        4p  a'+2  ;

:  13p*2,4,a'+2     ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  2*         3p  a'+2  ;
:  13p*4,4,a'+2     ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  4 *        3p  a'+2  ;
:  13p*2+18,4,a'+2  ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  2* 18 +    3p  a'+2  ;
:  13p+10,4,a'+2    ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>     10 +    3p  a'+2  ;
:  14p*2,4,a'+2     ( n1 n2 -- )  4 to <<byte>>  4  to (?p)  ?~?>  2*         4p  a'+2  ;
:  14p*4,4,a'+2     ( n1 n2 -- )  4 to <<byte>>  4  to (?p)  ?~?>  4 *        4p  a'+2  ;








:  12p*2,a'+4       ( n1 n2 -- )  2  to (?p)  ?~?>  2*         3p  a'+4  ;
:  12p*4,a'+4       ( n1 n2 -- )  2  to (?p)  ?~?>  4 *        3p  a'+4  ;
:  12p*2+18,a'+4    ( n1 n2 -- )  2  to (?p)  ?~?>  2* 18 +    3p  a'+4  ;
:  12p+10,a'+4      ( n1 n2 -- )  2  to (?p)  ?~?>     10 +    3p  a'+4  ;

:  13p*2,a'+4       ( n1 n2 -- )  3  to (?p)  ?~?>  2*         3p  a'+4  ;
:  13p*4,a'+4       ( n1 n2 -- )  3  to (?p)  ?~?>  4 *        3p  a'+4  ;
:  13p*2+18,a'+4    ( n1 n2 -- )  3  to (?p)  ?~?>  2* 18 +    3p  a'+4  ;
:  13p+10,a'+4      ( n1 n2 -- )  3  to (?p)  ?~?>     10 +    3p  a'+4  ;

:  14p*2,a'+4       ( n1 n2 -- )  4  to (?p)  ?~?>  2*         4p  a'+4  ;
:  14p*4,a'+4       ( n1 n2 -- )  4  to (?p)  ?~?>  4 *        4p  a'+4  ;

:  13p*2,2,a'+4     ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  2*         3p  a'+4  ;
:  13p*4,2,a'+4     ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  4 *        3p  a'+4  ;
:  13p*2+18,2,a'+4  ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>  2* 18 +    3p  a'+4  ;
:  13p+10,2,a'+4    ( n1 n2 -- )  2 to <<byte>>  3  to (?p)  ?~?>     10 +    3p  a'+4  ;
:  14p*2,2,a'+4     ( n1 n2 -- )  2 to <<byte>>  4  to (?p)  ?~?>  2*         4p  a'+4  ;
:  14p*4,2,a'+4     ( n1 n2 -- )  2 to <<byte>>  4  to (?p)  ?~?>  4 *        4p  a'+4  ;

:  13p*2,4,a'+4     ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  2*         3p  a'+4  ;
:  13p*4,4,a'+4     ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  4 *        3p  a'+4  ;
:  13p*2+18,4,a'+4  ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>  2* 18 +    3p  a'+4  ;
:  13p+10,4,a'+4    ( n1 n2 -- )  4 to <<byte>>  3  to (?p)  ?~?>     10 +    3p  a'+4  ;
:  14p*2,4,a'+4     ( n1 n2 -- )  4 to <<byte>>  4  to (?p)  ?~?>  2*         4p  a'+4  ;
:  14p*4,4,a'+4     ( n1 n2 -- )  4 to <<byte>>  4  to (?p)  ?~?>  4 *        4p  a'+4  ;





variable  data.already.in.queue?

:  a'>data:QUEUE     ( a' -- )     data.already.in.queue?  off
   data:QUEUE   data:QUEUE.counter  @  bounds
   ?do    dup   i  @  =
          if    data.already.in.queue?  on   leave
          then  8
   +loop  data.already.in.queue? @
   if     drop
   else   >data:QUEUE
   then   ;

variable  addr(data.from)
variable  data:to.be.removed

:  check.data.in.queue  ( a' --  f )     data.already.in.queue?  off
      data:QUEUE.counter  @   0
   ?do    dup    data:QUEUE   i  +   @   =
          if     data.already.in.queue?  on
                 data:QUEUE  i  +  4  +  @   addr(data.from)  !  leave
          then   8
   +loop  drop   data.already.in.queue?  @  ;

\ :  mark.data  ( a' -- a' )  dup  check.data.in.queue  if  24 ?y  ."  data:"   then  ;

:  mark.data  ( a' -- a' )  dup  check.data.in.queue
   if  2c ( 24 ) ?y  ."  data:"    49 ?y   .(.8A?  @
       if     ." \ from "   addr(data.from) @  8 u.r
       then
   then  ;

:  check.mark.data  ( a' -- f )   dup  check.data.in.queue
   if     addr(data.from) @  =
   else   drop  0
   then   ;

:  mark.data  ( a' -- a' )  dup  check.data.in.queue
   if     dup   addr(data.from) @  =
     if   _DISASSEM
     else
       2c ( 24 ) ?y  ."  data:"    49 ?y   .(.8A?  @
       if     ." \ from "   addr(data.from) @  8 u.r
       then
     then
   then  ;

:  remove.mark."data:"  ( a' -- f )      data.already.in.queue?  off
      data:QUEUE.counter  @   0
   ?do    dup    data:QUEUE   i  +   @   =
          if     data.already.in.queue?  on
                 data:QUEUE  i  +    @   32@'   data:to.be.removed  !
                 data:QUEUE  i  +    @          addr(data.from)     !
         -1  -1  data:QUEUE  i  +   2!  leave
          then   8
   +loop  drop   data.already.in.queue?  @
   if     cr     ." data: "  data:to.be.removed  @  9 u.r   ."   marked from address "
                             addr(data.from)     @  9 u.r   ."   has been removed to become FFFFffff"
   then   ;

:  rmd    remove.mark."data:"  ;

:  remove.mark."data:".range  ( from length --- )  bounds  do  i  remove.mark."data:"  loop  ;   \ 0 4000 rmdr
:  rmdr   remove.mark."data:".range  ;








:  14p+.(pc+#)     ( n1 n2 -- )  4  to (?p)  ?~?>      (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 4p  a'>data:QUEUE ;
:  14p+.(pc-#)     ( n1 n2 -- )  4  to (?p)  ?~?>      (a') - dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 4p  a'>data:QUEUE ;


\  defer  _.io.name


:  14p*4+.(pc+#)   ( n1 n2 -- )  4  to (?p)  ?~?>  4 * (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup dup 4p 32@' _.io.name  (a') a'>data:QUEUE ;
:  14p*4+.(pc+#)   ( n1 n2 -- )  4  to (?p)  ?~?>  4 *                       (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@'
                                                      8 u.L  dup dup 4p 32@' dup (PC+offset) ! _.io.name  (a') a'>data:QUEUE ;


:  14p*4+.(pc+#)   ( n1 n2 -- )  4  to (?p)  ?~?>  4 *                       (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@'
   8 u.L  dup dup 4p  ultra.stack>  drop  32@'  dup  >ultra.stack dup (PC+offset) ! _.io.name  (a') a'>data:QUEUE ;


:  14p*4+.(pc+#)   ( n1 n2 -- )  4  to (?p)  ?~?>  4 *                       (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@'
   8 u.L  dup dup 32@' 4p  ultra.stack>  drop  32@'  dup  >ultra.stack dup (PC+offset) ! _.io.name  (a') a'>data:QUEUE ;










\  14p*4+.(pc+#)   ( n1 n2 -- )  4  to (?p)  ?~?>  4 *   ." pc+"  dup  .xxx  (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ "  dup .xxxxXXXX          ;
:  14p*4=pc+#*4    ( n1 n2 -- )  4  to (?p)  ?~?>  4 *   ." pc+"  dup  .xxx  (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ "  dup .xxxxXXXX          ;
:  14p*4=pc+#*4    ( n1 n2 -- )  4  to (?p)  ?~?>  4 * ( ." pc+") (a') 4 mod if 2+ else 4 + then ( dup .xxx) DUP >DISASSEM.NUMBER.STACK + 60 ?y ." \ "  .xxxxXXXX  (a')        ;


:  14p*4+.(pc+#)''   ( n1 n2 -- )  4  to (?p)  ?~?>  4 * (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 4p (a') a'>data:QUEUE ;

:  14p+.(pc+#)     ( n1 n2 -- )  4  to (?p)  ?~?>      (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 4p (a') a'>data:QUEUE ;
:  14p+.(pc-#)     ( n1 n2 -- )  4  to (?p)  ?~?>      (a') - dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 4p (a') a'>data:QUEUE ;


:  14p+.(pc+#)     ( n1 n2 -- )  4  to (?p)  ?~?>      (a') + dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 32@' 4p (a') a'>data:QUEUE ;
:  14p+.(pc-#)     ( n1 n2 -- )  4  to (?p)  ?~?>      (a') - dup  4 mod if 2+ else 4 + then  60 ?y ." \ (" dup .xxxxXXXX  ." )="  dup  32@' 8 u.r  dup 32@' 4p (a') a'>data:QUEUE ;









:  21p    ( n1 n2 -- )  1  to (?p)  ?~?+?~?>              1p  ;
:  22p    ( n1 n2 -- )  2  to (?p)  ?~?+?~?>              2p  ;
:  23p    ( n1 n2 -- )  3  to (?p)  ?~?+?~?>              3p  ;
:  24p    ( n1 n2 -- )  4  to (?p)  ?~?+?~?>              4p  ;
:  24p*2  ( n1 n2 -- )  4  to (?p)  ?~?+?~?> 2* (a') 4+ + 4p  ;

:  31p    ( n1 n2 -- )  1  to (?p)  ?~?+?~?+?~?>          1p  ;
:  32p    ( n1 n2 -- )  2  to (?p)  ?~?+?~?+?~?>          2p  ;
:  33p    ( n1 n2 -- )  3  to (?p)  ?~?+?~?+?~?>          3p  ;
:  34p    ( n1 n2 -- )  4  to (?p)  ?~?+?~?+?~?>          4p  ;

: 1#3#8#>n ( -- n )  >r   r@  0  ff  between  if   r>  exit  then            \  0 ~ ff
  r@  f00  and
  case   100  of   r@  ff  and                     dup  10 lshift  +  -1  endof  \  00xy00xy
         200  of   r@  ff  and        8 lshift     dup   8 lshift  +  -1  endof  \  xy00xy00
         300  of   r@  ff  and   dup  8 lshift  +  dup  10 lshift  +  -1  endof  \  xyxyxyxy
         0  swap
  endcase
  if     r>drop
  else   r@  7f  and   80   or   r>  f80 and   7 rshift   20  swap  -  lshift    \  shifted.8.bit.value
  then   ;










: 1#3#8#>n ( -- n )  >r   r@  0  ff  between  if   r>  exit  then                \  0 ~ ff
  r@  f00  and
  case   100  of   r@  ff  and                     dup  10 lshift  +  -1  endof  \  00xy00xy
         200  of   r@  ff  and        8 lshift     dup  10 lshift  +  -1  endof  \  xy00xy00  \ 8 --> 10
         300  of   r@  ff  and   dup  8 lshift  +  dup  10 lshift  +  -1  endof  \  xyxyxyxy
         0  swap
  endcase
  if     r>drop
  else   r@  7f  and   80   or   r>  f80 and   7 rshift   20  swap  -  lshift    \  shifted.8.bit.value
  then   ;











:  34p1#3#8#  ( n1 n2 -- )                4 to (?p)  ?~?+?~?+?~?>   1#3#8#>n  4p  ;
:  34p138     ( n1 n2 -- )                4 to (?p)  ?~?+?~?+?~?>   1#3#8#>n  4p  ;
:  33p138     ( n1 n2 -- )                3 to (?p)  ?~?+?~?+?~?>   1#3#8#>n  3p  ;
:  33p138,4   ( n1 n2 -- )  4 to <<byte>> 3 to (?p)  ?~?+?~?+?~?>   1#3#8#>n  3p  ;



\  34p138     ( n1 n2 -- )                4 to (?p)  ?~?+?~?+?~?>   1#3#8#>n  >ultra.stack? @  IF  DUP  >ULTRA.STACK  THEN  4p  ;
:  34p138,4   ( n1 n2 -- )  4 to <<byte>> 4 to (?p)  ?~?+?~?+?~?>   1#3#8#>n  4p  ;

:  34p^ ( n1 n2 -- )  4  to (?p)  ?~?+?~?+?~?>  0~15<->16~31  4p  ;   \ avr328

:  41p  ( n1 n2 -- )  1  to (?p)  ?~?+?~?+?~?+?~?>      1p  ;
:  42p  ( n1 n2 -- )  2  to (?p)  ?~?+?~?+?~?+?~?>      2p  ;
:  43p  ( n1 n2 -- )  3  to (?p)  ?~?+?~?+?~?+?~?>      3p  ;
:  44p  ( n1 n2 -- )  4  to (?p)  ?~?+?~?+?~?+?~?>      4p  ;

:  51p  ( n1 n2 -- )  1  to (?p)  ?~?+?~?+?~?+?~?+?~?>  1p  ;
:  52p  ( n1 n2 -- )  2  to (?p)  ?~?+?~?+?~?+?~?+?~?>  2p  ;
:  53p  ( n1 n2 -- )  3  to (?p)  ?~?+?~?+?~?+?~?+?~?>  3p  ;
:  54p  ( n1 n2 -- )  4  to (?p)  ?~?+?~?+?~?+?~?+?~?>  4p  ;

: .'"'    '"'  emit  ;

 
:  xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 0xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 1xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 2xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 3xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 4xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 5xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;
: 6xt0        cr  62 ( 70 )   ?y  ." exit then 0 ;" ;

: .1#        ( N ... )  0 <#                #  #>  TYPE  ;
: .2#        ( N ... )  0 <#              # #  #>  TYPE  ;
: .3#        ( N ... )  0 <#            # # #  #>  TYPE  ;
: .4#        ( N ... )  0 <#          # # # #  #>  TYPE  ;
: .5#        ( N ... )  0 <#        # # # # #  #>  TYPE  ;
: .6#        ( N ... )  0 <#      # # # # # #  #>  TYPE  ;
: .7#        ( N ... )  0 <#    # # # # # # #  #>  TYPE  ;
: .8#        ( N ... )  0 <#  # # # # # # # #  #>  TYPE  ;

: .16#       ( d ... )   .8#  .8#  '.'  EMIT  ;

: .\.(      ( ---- )  make.macro? @  if   ." \ (  "   else  ."   (  "  then  ;

:  gn#   ( n -- )          bl  word  count  type   1d ( 25 ) ?y   .8#  space  ;                         \  32 bit

:  gn#   ( n -- )            bl  word  count  type   1d ( 25 ) ?y   .8#  space  ;
:  gn#   ( n -- )  >in @ >r  bl  word  count  type  r> >in !  1d ( 25 ) ?y   .8#  space  ;
:  gn#   ( n -- )            bl  word  count  type             1d ( 29 ) ?y   .8#  space  ;
:  gn#   ( n -- ) ( >in @ >r bl  word  count  type  r> >in ! ) 1d ( 29 ) ?y   .8#  space  ;




: 2gn#   ( D -- ) ( L H )  bl  word  count  type   1d ( 25 ) ?y  ( swap ) .8#  space   .8#  space   ;   \  64 bit
: 2gn#   ( D -- ) ( L H )  bl  word  count  type   1d ( 25 ) ?y  .16#  space  ;                         \  64 bit
: 4gn#   ( DL DH -- )      bl  word  count  type   1d ( 25 ) ?y  2swap   .16#  space  .16#  space   ;   \ 128 bit

: q=  ( DL1 DH1 DL2 DH2 -- )   2rot  d=  >r  d=  r>  and  ;   \ 128 bit comparison  


: :.mnem_      cr  ." : "          .last.name  '_' emit  original.mnemonic? @
  if     34 ( 30 ) ?y  ." original.mnemonic? @  not  if  0  exit  then"
  then   cr  2 ?y  ;

:  gn#'      gn#  ." = if ( "   ;
:  #=if      gn#  ." = if ( "   ;
:  #=if1     gn#  ." = if (1"   ;
:  #=if2     gn#  ." = if (2 "  ;
:  #=if3     gn#  ." = if (3 "  ;
:  #=if4     gn#  ." = if (4 "  ;
:  #=if6     gn#  ." = if (6 "  ;
:  #=if8     gn#  ." = if (8 "  ;

:    .0"      5f ?y  ." 0"      .'"'     space   ;
:    .1"      5f ?y  ." 1"      .'"'     space   ;
:    .2"      5f ?y  ." 2"      .'"'     space   ;
:    .3"      5f ?y  ." 3"      .'"'     space   ;
:    .4"      5f ?y  ." 4"      .'"'     space   ;

generate.simulator?  @
#if
: :.mnem_      cr  ." : execute."  .last.name   original.mnemonic? @
  if     34 ( 30 ) ?y  ." original.mnemonic? @  not  if  0  exit  then"
  then   cr  2 ?y  ;

:  gn#'      gn#  ." = if ( "  ;
:  #=if      gn#  ." = if ( "  ;
:  #=if1     gn#  ." = if pc+1"  ;
:  #=if2     gn#  ." = if pc+2"  ;
:  #=if3     gn#  ." = if pc+3"  ;
:  #=if4     gn#  ." = if pc+4"  ;
:  #=if5     gn#  ." = if pc+5"  ;
:  #=if6     gn#  ." = if pc+6"  ;
:  #=if7     gn#  ." = if pc76"  ;
:  #=if8     gn#  ." = if pc+8"  ;

:    .0"      5f ?y  ." x0"            space   ;
:    .1"      5f ?y  ." x1"            space   ;
:    .2"      5f ?y  ." x2"            space   ;
:    .3"      5f ?y  ." x3"            space   ;
:    .4"      5f ?y  ." x4"            space   ;
#then

generate.execute.xx?  @
#if 
: :.mnem_      cr  ."   execute."  .last.name               28 ?y  ."   ?dup if  +  exit  then"   cr  ;
#then

generate.dis?  @
#if
: :.mnem_      cr  ."   "          .last.name  '_' emit     28 ?y  ."   ?dup if  +  exit  then"   cr  ;
#then

variable  (pc)
variable  (sp)
create     a.reg    20  4 *  allot      \ 32 register  ar in esp32
create    br.reg    20  4 *  allot      \ 32 register  br in esp32
create    fr.reg    20  4 *  allot      \ 32 register  br in esp32

: (r)     4  *   a.reg  +   ;     \   7  (r)
: (br)    4  *  br.reg  +   ;     \  0f  (br)
: (fr)    4  *  fr.reg  +   ;     \  0f  (br)

: pc+0  0 (pc)  +!  ;
: pc+1  1 (pc)  +!  ;
: pc+2  2 (pc)  +!  ;
: pc+3  3 (pc)  +!  ;
: pc+4  4 (pc)  +!  ;
: pc+5  5 (pc)  +!  ;
: pc+6  6 (pc)  +!  ;
: pc+7  7 (pc)  +!  ;
: pc+8  8 (pc)  +!  ;
: pc+9  9 (pc)  +!  ;

: (r)     4  *   a.reg  +   ;     \   7  (r)
: (br)    4  *  br.reg  +   ;     \  0f  (br)
: (fr)    4  *  fr.reg  +   ;     \  0f  (br)


: 2#=if6    2gn#  ." d= if (6 "  ;
: 2#=if8    2gn#  ." d= if (8 "  ;
: 2#=if82   2gn#  ." d= if (8 "  ;

: 4#=if10   4gn#  ." q= if (10 "  ;

\ :  #=if2     bl word count type 1d ?y .8#  ."  = if (2 "    2  <<byte>>  !  ;
\ :  #=if4     bl word count type 1d ?y .8#  ."  = if (4 "    4  <<byte>>  !  ;
\    #=if6     bl word count type 1d ?y .8#  ."  = if (6 "    6  <<byte>>  !  ;
\    #=if8     bl word count type 1d ?y .8#  ."  = if (8 "    8  <<byte>>  !  ;

variable  current.1c2r3# 

: .(r18~1e),3   4  ;

: _HEADER'      ( -<name>- )    \ build a header, but check available memory
                2000 ?MEMCHK
                BL WORD   COUNT   2dup  >temp.mnemonic   "HEADER ;

variable  temp.last
  : CREATE        _HEADER'  DOVAR ,     last @  temp.last  !   ;




: a'.is.n?    ( a' -- n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +   head.spacing  @  10  -  +  @  =
     if     drop   i  -1  leave
     then   head.spacing  @
  +loop     nip    ;

: a'.is.L:?   ( a' -- n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +   head.spacing  @  10  -  +  @  =
     if            i  lfa+nfa+cfa.array  +      +  @  swap  -1  leave
     then   head.spacing  @
  +loop     nip    ;

: a'.is.L:?   ( a' -- n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +   head.spacing  @  10  -  +  @  =
     if     drop   i  swap   -1  leave
     then   head.spacing  @
  +loop     nip    ;
                     
: a'.is.t:?   ( a' -- n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +   head.spacing  @  10  -  +  @  =
     if            i  lfa+nfa+cfa.array  +         @  -1  =  if  drop  0  else  drop  i  swap  -1  then  leave
     then   head.spacing  @
  +loop     nip    ;

: (a').is.ubranch?        ( a' -- f )  1fff  and  16@'  0  0fff  between    ;
: (a').is.else?           ( a' -- f )  1fff  and  dup>r  16@'  dup>r  0  0fff  between  r> 1fff and  2*  r>  u>  and  ;

: (a').is.xxx...;?        ( a' -- f )  1fff  and  16@'  6c8c  and  6c8c  =  ;

: (a').is.ubranch.or.;?   ( a' -- f )  1fff  and  16@'  dup  0  0fff  between  swap  6c8c  and  6c8c  =  or  ;

: (a').is.ubranch.or.;?   ( a' -- f )  dup  (a').is.ubranch?  swap  (a').is.xxx...;?  or  ;

: ."L:orT:"    ( a' --  )
  lfa+nfa+cfa.counter   @   0
  ?do         dup    i  n->cfa*  @  =
     if              i  n->lfa*  @  -1  =
        if           i  n->cfa*  @   2  -  (a').is.ubranch.or.;?    if  \.3f***  then
              cr  24 ?y  ." L:  "   layer  off   i  n->nfa*  count  type    \  L:
        then  leave
     then     head.spacing  @
  +loop       drop  ;

defer  _decompile.a.word(cfa'.of.ice40)


\ defer  _n>.head(lnc)

variable  dis?
variable  ?branch/branch

variable  .structure?            .structure?  on
: st      .structure?  @   not   .structure?  !     last.u  @  _u   ;

: check.?branch/branch  ( a' -- a' from1 to1 a' from2 to2 a' from3 to3 ... n | 0 )
  to (a')  ?branch/branch   @  >r
  from->to.QUEUE.COUNTER    @    0
  ?do         (a')  from->to.QUEUE            i  +   @  =
       if     (a')  from->to.QUEUE            i  +   i  4  and  -   2@
              1     ?branch/branch   +!       leave
       then   4
  +loop             ?branch/branch   @    r>  =   if   0   else   ?branch/branch   @   then  ;   \   dup  0=  if  nip  then   ;

esp32?  @
#if
#else
\ include  ice40asmdisasm1.f


\ ******************************************************************************************************
ice40?  @
  #if  
 
 
 
: cfa'>nth.word  ( cfa' -- n -1 / 0 )   0  swap
  get.total.words.ice40          total.instructions.8051camelForth @   0
  do        i     nTH.WORD.ICE40  ( n -- lfa' cfa'.len -1 | 0 )
     if     drop  lfa'>cfa'(ice40)  over  =
         if    drop  i  -1  rot  leave
         then
     then
  loop   drop  ;

: decompile.a.word(cfa'.of.ice40)  ( cfa' -- )   cfa'>nth.word
  if    decompile.nth.word   drop
  then  cr  ;

: dw  decompile.a.word(cfa'.of.ice40)  ( cfa' -- )  ;

' decompile.a.word(cfa'.of.ice40)  is   _decompile.a.word(cfa'.of.ice40)

: see.ice40  ' cfa>cfa'   decompile.a.word(cfa'.of.ice40)  ;



: decompile.part.ice40  ( from to -- )  2dup  max  -rot  min
  ?do    cr  ."   \ "  i  9  _.r(decimal)  i  7 .r   i   decompile.nth.word   drop  \ key  drop
  loop   quit  ;

: decompile.all.ice40' ( -- )   cr  get.total.words.ice40      total.instructions.8051camelForth @   0
  decompile.part.ice40   ;

: decompile.part.ice40  ( upper lower -- )
  do   \  cr  ."   \ "  i  9  _.r(decimal)  i  7 .r
         i   decompile.nth.word   drop  \ key  drop
  loop   quit  ;

: dpi    decompile.part.ice40  ;

: decompile.all.ice40  ( -- )   cr  get.total.words.ice40   0  DIS.ICE40   total.instructions.8051camelForth @  0
  decompile.part.ice40  ;

: words.ice40  ( -- )           get.total.words.ice40      total.instructions.8051camelForth @  0
  do     cr  ."   ( "  i  4  _.r(decimal)  i  6 .r  ."  )  "
         i   nth.word's.lfa'+nfa'+cfa''
  loop   cr  ;







: nth.word's.cfa'->variable   ( n -- )  nTH.WORD.ICE40  ( n -- lfa' cfa'.len -1 | 0 )
  if     over +  next.lfa'  !   \ lfa'
         >r
       \ dup>r                     ." ( lfa'= )  "  .xxxx
       \ r@  2+                  ."   ( nfa'= "     .xxxx
         r@  lfa'>cfa'(ice40)    (  ."   cfa'= " )  .xxxx  ."   variable.  "
         r>  2+  ( current.nfa' )  dup  ." cfa'.of." .id(ice40)         4e ?y  ." cfa'.of." .id(ice40)  77 ?y  ."  !."
  then   ;

: words.ice40.cfa'->variable  ( -- ) get.total.words.ice40          total.instructions.8051camelForth @    0
  do     cr  ."   ( "  i  4  _.r(decimal)  i  6 .r  ."  )  "    i  nth.word's.cfa'->variable
  loop   cr  ;

: 40v   words.ice40.cfa'->variable  ;

: ws40'    words.ice40           ( -- )  ;
: ws40     words.ice40  decompile.all.ice40  ;

: words'(mecrispForth-ic40)  ( last'  @  2- )  0fb4
  begin  cr  dup  2 +  .id(ice40)   16@'  ffe and  dup  000  =
  until  drop  ;
\ ***************************************************************************************
\ ice40simulator5.f
\ ***************************************************************************************
hex
: .r(10)   ( n1 n2 -- )  base @  >r  decimal  .r   r>  base  !  ;

: |........|   2 spaces  61  0  do  i  18  mod  0=  if  '|'  else  '-'  then  emit  loop  ;
\ --------------------------------------------------------------------------------
: .14~13.alu    ( op.code -- )  e000  and
case               0000  of  ."                    "  endof
\ jmp           )  0000  of  ."     ***** jmp *****"  endof
\ ujmp          )  2000  of  ."     ***** ujmp ****"  endof
\ call          )  4000  of  ."     ***** call ****"  endof
( alu           )  6000  of  ."     ***** alu *****"  endof
endcase  ;

: .14~13.0jmp    ( op.code -- )  e000  and
case
( jmp           )  0000  of  ."     ***** 0jmp *****"  endof
endcase  ;

: .14~13.jmp   ( op.code -- )  e000  and
case
( ujmp          )  2000  of  ."     ***** jmp ****"  endof
endcase  ;

: .14~13.call   ( op.code -- )  e000  and
case
( call          )  4000  of  ."     ***** call ****"  endof
endcase  ;
\ --------------------------------------------------------------------------------
: .12~12        ( op.code -- )  1000  and
case
(               )  0000  of  ."        "  endof
( R->PC         )  1000  of  ."  R->PC "  endof
endcase  ;
\ --------------------------------------------------------------------------------
: .11~8  ( op.code -- )  0f00  and
  case
( T            )  0000  of  ."   ******* T'= T *******"  endof
( N            )  0100  of  ."   ******* T'= N *******"  endof
( T+N          )  0200  of  ."   ****** T'= T+N ******"  endof
( T&N          )  0300  of  ."   ****** T'= T&N ******"  endof
( T|N          )  0400  of  ."   ****** T'= T|N ******"  endof
( T^N          )  0500  of  ."   ****** T'= T^N ******"  endof
( ~T           )  0600  of  ."   ****** T'= ~T *******"  endof
( N==T         )  0700  of  ."   ****** T'= N==T *****"  endof
( N<T          )  0800  of  ."   ****** T'= N<T ******"  endof
( T2/          )  0900  of  ."   ****** T'= T2/ ******"  endof
( T2*          )  0a00  of  ."   ****** T'= T2* ******"  endof
( rT           )  0b00  of  ."   ****** T'= rT  ******"  endof
( [T]          )  0c00  of  ."   ****** T'= [T] ******"  endof
( io[T]        )  0d00  of  ."   ***** T'= io[T] *****"  endof
( status       )  0e00  of  ."   ***** T'= status ****"  endof
( Nu<T         )  0f00  of  ."   ***** T'= Nu<T ******"  endof
  endcase   ;
\ --------------------------------------------------------------------------------
: .7~7    ( op.code -- )  0080  and
case
    ( RET          )  0000  of  ."         "  endof
    ( RET          )  0080  of  ."    RET  "  endof
endcase  ;
\ --------------------------------------------------------------------------------
: .6~4  ( op.code -- )  70  and
case                    00  of  ."                    "  endof
    ( T->N         )  0010  of  ." ****** T->N *****  "  endof
    ( T->R         )  0020  of  ." ****** T->R *****  "  endof
    ( N->[T]       )  0030  of  ." ***** N->[T] ****  "  endof
    ( N->io[T]     )  0040  of  ." **** N->io[T] ***  "  endof
    ( T=io[T]      )  0050  of  ." ***** T=io[T]****  "  endof
                        60  of  ." ?????????????????  "  endof
                        70  of  ." ?????????????????  "  endof
endcase    ;
\ --------------------------------------------------------------------------------
: .3~2    ( op.code -- )  000c  and
case
( d+1          )  0000  of   ."             " endof
( r+1          )  0004  of   ." ** r+1 **   " endof
( r-2          )  0008  of   ." ** r-2 **   " endof
( r-1          )  000c  of   ." ** r-1 **   " endof
endcase  ;
\ --------------------------------------------------------------------------------
: .1~0    ( op.code -- )  0003  and
case
( d-1          )  0000  of   ."          " endof
( d+1          )  0001  of   ." ** d+1 **" endof
( d-1          )  0002  of   ."          " endof
( d-1          )  0003  of   ." ** d-1 **" endof
endcase  ;
\ --------------------------------------------------------------------------------
: ice40.instruction.encoding.alu   ( op.code -- )   dup>r
  cr  0  0f  do  i  6 .r(10)             -1  +loop
  cr  |........|
  cr  r@ .14~13.alu   r@ .12~12   r@ .11~8   r@ .7~7   r@ .6~4   r@ .3~2   r@ .1~0
  cr  |........|
  cr  10  0  do  dup  8000  and  if  1  else  0  then  6 .r  1  lshift  loop  ."        <--"  r>  6 .r  \ .xxxx
  cr  drop   ;

: .n*  ( n -- )  0  do  '*'  emit  loop  ;

: ice40.instruction.encoding  ( op.code -- )      dup>r
  cr  0  0f  do  i  6 .r(10)             -1  +loop
  cr  |........|
  case     e000  and
     0000  of  cr   ."     ***** jmp *****   "  4b  .n*  endof
     2000  of  cr   ."     **** 0jmp *****   "  4b  .n*  endof
     4000  of  cr   ."     **** call *****   "  4b  .n*  endof
     6000  of  cr   r@ .14~13.alu   r@ .12~12  r@ .11~8   r@ .7~7   r@ .6~4   r@ .3~2   r@ .1~0  endof
     8000  of  cr   ."     imm   "              57  .n*  endof
     a000  of  cr   ."     imm   "              57  .n*  endof
     c000  of  cr   ."     imm   "              57  .n*  endof
     e000  of  cr   ."     imm   "              57  .n*  endof
  endcase  r@  ( op.code )
  cr  |........|
  cr  10  0  do  dup  8000  and  if  1  else  0  then  6 .r  1  lshift  loop  drop ."     <--"  r>  6 .r  \ .xxxx
  cr  ;

: 40i  ( op.code -- )         ice40.instruction.encoding  ;
\ 619c     40i   \  {swap}

: 40x  ( a' -- )   dup  16@'  ice40.instruction.encoding  cr  dis.ice40  drop  cr  ;
\ '' swap  40x

: 40xx     cls   cac 40x    c8e 40x    c84 40x    c86 40x    c94 40x  ;
\ *********************************************************************************************************
0 value (pc)
0 value (T)
0 value (T')
0 value (N)
0 value (N')
0 value (R)
0 value (R')
0 value (sp)
0 value (rp)
0 value (status)

variable  instruction.step

: pc+2       (pc)  2+  to  (pc)  ;
: sp+2       (sp)  2+  to  (sp)  ;
: sp-2       (sp)  2-  to  (sp)  ;
: sp+4       (sp)  4+  to  (sp)  ;
: sp-4       (sp)  4-  to  (sp)  ;
: rp+2       (rp)  2+  to  (rp)  ;
: rp-2       (rp)  2-  to  (rp)  ;
: rp+4       (rp)  4+  to  (rp)  ;
: rp-4       (rp)  4-  to  (rp)  ;

create     data.stack   100  allot
create   return.stack   100  allot

:     N=(sp)       ( -- )                  data.stack  (sp) 2* +  @  to  (N)  ;
:     R=(rp)       ( -- )                return.stack  (rp) 2* +  @  to  (R)  ;
:       (sp)=N'    ( -- )         (N')     data.stack  (sp) 2* +  !  ;
:       (sp)=N     ( -- )         (N)      data.stack  (sp) 2* +  !  ;
:       (rp)=R'    ( -- )         (R')   return.stack  (rp) 2* +  !  ;
:       (rp)=R     ( -- )         (R)    return.stack  (rp) 2* +  !  ;

:  rp+2,(rp)=R     ( -- )   rp+2  (R)    return.stack  (rp) 2* +  !  ;  \ <-- push.r   \  call = pc+2,push.r

:    dump.data.stack  ( -- )    data.stack  100     dump  ;   : dx    dump.data.stack  ;
:   erase.data.stack  ( -- )    data.stack  100  0  fill  ;
: erase.return.stack  ( -- )  return.stack  100  0  fill  ;
:  dump.return.stack  ( -- )  return.stack  100     dump  ;   : rx  dump.return.stack  ;

: reset.cpu  ( -- )   instruction.step  off
  0  to  (pc)
  0  to  (T)
  0  to  (T')
  0  to  (N)
  0  to  (N')
  0  to  (R)
  0  to  (R')
  0  to  (sp)
  0  to  (rp)
  0  to  (status)
  erase.data.stack
  erase.return.stack  ;

: rst   reset.cpu   ( -- )  ;

: .id'(cfa'.ice40)  ( cfa' -- )   cfa'>nfa'(ice40)     if  34  ?y  ." \    "  .id(ice40)  then  ;

:   show.data.stack     cr  ."    data.stack:"  (sp)   2*  dup  0<  abort"   data stack underflow"
  dup       4  =  if    (T)  9  u.r                    drop  exit  then
  dup       8  =  if    (N)  9  u.r       (T)  9  u.r  drop  exit  then
  dup       8  >
  if       1+  0c
     do     data.stack  i  +  @  9  u.r   4
     +loop                  (N)  9  u.r       (T)  9  u.r
  else  drop
  then  ;

: show.return.stack     cr  ."  return.stack:"  (rp)   2*  dup  0<  abort" return stack underflow"
  dup       4  =  if    (R)  9  u.r                    drop  exit  then
  dup       4  >  if    1+   8
  ?do                   return.stack  i  +  @  9  u.r     4
  +loop                 (R)  9  u.r
                  else  drop
                  then  ;

: show.cpu  ( -- )
  cr  ."   (pc)      "   (pc)      9 .r    (pc)  .id'(cfa'.ice40)
  cr  ."   (T)       "   (T)       9 .r
  cr  ."   (T')      "   (T')      9 .r
  cr  ."   (N)       "   (N)       9 .r
  cr  ."   (N')      "   (N)       9 .r
  cr  ."   (R)       "   (R)       9 .r
  cr  ."   (R')      "   (R')      9 .r
  cr  ."   (sp)      "   (sp)      9 .r
  cr  ."   (rp)      "   (rp)      9 .r
  cr  ."   (status)  "   (status)  9 .r
  cr  show.return.stack   show.data.stack
  \.3F---  ;

: su   show.cpu  ( -- )  ;
\ ----------------------------------------------------
: io.port  ( n -- a )
  create  here  ,   200  allot
  does>  ( n a )  over 2* 0 200  between not abort" it execeeds the maximum number of io.port"  @  +  ; \ 0  io.port  Port.0

: io.port  ( n -- a )
  create  200  allot
  does>  ( n a )  over 2* 0 200  between not abort" it execeeds the maximum number of io.port"  @  +  ; \ 0  io.port  Port.0

create io.table  8000 allot
: io.port ( n -- )  2 * io.table + ;


: io@   ( io# -- n )  io.port  @  ;
: io!   ( n io# -- )  io.port  !  ;

: `T'=T         (T)                FFFF  and  to  (T')  ;  \  0
: `T'=N         (N)                FFFF  and  to  (T')  ;  \  1
: `T'=T+N       (T) (N)    +       FFFF  and  to  (T')  ;  \  2
: `T'=T&N       (T) (N)    and     FFFF  and  to  (T')  ;  \  3
: `T'=T|N       (T) (N)    or      FFFF  and  to  (T')  ;  \  4
: `T'=T^N       (T) (N)    xor     FFFF  and  to  (T')  ;  \  5
: `T'=~T        (T)        invert  FFFF  and  to  (T')  ;  \  6
: `T'=N==T      (T) (N)    =       FFFF  and  to  (T')  ;  \  7
: `T'=N<T       (N) (T)    <       FFFF  and  to  (T')  ;  \  8
: `T'=T2/       (T)        2/      FFFF  and  to  (T')  ;  \  9
: `T'=T2*       (T)        2*      FFFF  and  to  (T')  ;  \  A
: `T'=rT        (R)                FFFF  and  to  (T')  ;  \  B   ??????   `T'=R
: `T'=[T]       (T)      16@'      FFFF  and  to  (T')  ;  \  c
: `T'=io[T]     (T)      io@       FFFF  and  to  (T')  ;  \  D
: `T'=status    (status)   @       FFFF  and  to  (T')  ;  \  E
: `T'=Nu<T      (N) (T)    u<      FFFF  and  to  (T')  ;  \  F

: `T'=T         (T)                  to  (T')  ;  \  0
: `T'=N         (N)                  to  (T')  ;  \  1
: `T'=T+N       (T) (N)    +         to  (T')  ;  \  2
: `T'=T&N       (T) (N)    and       to  (T')  ;  \  3
: `T'=T|N       (T) (N)    or        to  (T')  ;  \  4
: `T'=T^N       (T) (N)    xor       to  (T')  ;  \  5
: `T'=~T        (T)        invert    to  (T')  ;  \  6
: `T'=N==T      (T) (N)    =         to  (T')  ;  \  7
: `T'=N<T       (N) (T)    <         to  (T')  ;  \  8
: `T'=T2/       (T)        2/        to  (T')  ;  \  9
: `T'=T2*       (T)        2*        to  (T')  ;  \  A
: `T'=rT        (R)                  to  (T')  ;  \  B   ??????
: `T'=[T]       (T)      16@'        to  (T')  ;  \  c
: `T'=io[T]     (T)      io@         to  (T')  ;  \  D
: `T'=status    (status)   @         to  (T')  ;  \  E
: `T'=status    (sp)       2/        to  (T')  ;  \  E   ????
: `T'=Nu<T      (N) (T)    u<        to  (T')  ;  \  F
\ ------------------------------------------------------
: alu.operation(bit11~8)  ( op.code.11~8 -- )   0f00  and
  case
( T            )  0000  of  `T'=T          endof
( N            )  0100  of  `T'=N          endof
( T+N          )  0200  of  `T'=T+N        endof
( T&N          )  0300  of  `T'=T&N        endof
( T|N          )  0400  of  `T'=T|N        endof
( T^N          )  0500  of  `T'=T^N        endof
( ~T           )  0600  of  `T'=~T         endof
( N==T         )  0700  of  `T'=N==T       endof
( N<T          )  0800  of  `T'=N<T        endof
( T2/          )  0900  of  `T'=T2/        endof
( T2*          )  0a00  of  `T'=T2*        endof
( rT           )  0b00  of  `T'=rT         endof
( [T]          )  0c00  of  `T'=[T]        endof
( io[T]        )  0d00  of  `T'=io[T]      endof
( status       )  0e00  of  `T'=status     endof
( Nu<T         )  0f00  of  `T'=Nu<T       endof
  endcase   ;
\ ---------------------------------------------------------------------------------
variable  T->N?
variable  T->R?
variable  N->[T]?
variable  N->io[T]?
variable  T=io[T]?
variable  RET?

: `pc=R      (R)  to  (pc)  ;
: `N'=N      (N)           to (N')   ;
: `R'=R      (R)           to (R')   ;
: `N=T       (T)           to (N)    ;
: `R=T       (T)           to (R)    ;
: `R=(rp)    (rp) return.stack + @  to  (R) ;
: `T->N      (N)           to (N')      (T)          to (N)    T->N?      on  ;
: `T->R      (R)           to (R')      (T)          to (R)    T->R?      on  ;
: `N->[T]    (N)  (T) 16@' 16!'      N->[T]?    on  ;   \ ??????????
: `N->[T]    (N)  (T)      16!'      N->[T]?    on  ;
: `N->io[T]  (N)  (T) io!            N->io[T]?  on  ;
\ `T=io[T]            io@  to (T)    T=io[T]?   on  ;   \ ?????????????
: `T=io[T]   (T)      io@  to (T)    T=io[T]?   on  ;   \ ?????????????

: `RET(7)    (R)           to (pc)   R=(rp)          RET?       on  ; \ rp-2  ????

: `(sp)=N'   (N')  to  (sp)  ;
: `(rp)=R'   (R')  to  (rp)  ;

: `sp-2     (sp)  2-  to  (sp)  ;
: `N=(sp)   (sp)  data.stack  +  @  to  (N)  ;

: `d+1...(sp)=N,sp+2  T->N? @  sp+2  if  (sp)=N' else  (sp)=N  then  ;
: `r+1...rp+2,(rp)=R  T->R? @  rp+2  if  (rp)=R' else  (rp)=R  then  ;

: `d-1...sp-2,N=(sp)                     N=(sp)  sp-2         ;
: `r-1...R=(rp),rp-2                     R=(rp)         rp-2  ;

: `r-2...R=(rp),rp-2,R=(rp),rp-2         R=(rp)         rp-2
                                         R=(rp)         rp-2  ;

: `ret   `pc=R    `R=(rp)   `r-1...R=(rp),rp-2  ;
\ --------------------------------------------------------------------------
: alu.operation(bit7~7)  ( op.code.7~7 -- )     0080  and
  case
( RET          )  0080  of   `RET(7)    endof
  endcase   ;

: alu.operation(bit6~4)  ( op.code.7~0 -- )     0070  and
  case
( T->N         )  0010  of   `T->N      endof
( T->R         )  0020  of   `T->R      endof
( N->[T]       )  0030  of   `N->[T]    endof
( N->io[T]     )  0040  of   `N->io[T]  endof
( T=io[T]      )  0050  of   `T=io[T]   endof  \ T=io[T] --> io@
  endcase   ;

: alu.operation(bit3~2)  ( op.code.3~2 -- )     000c  and
  case
( r-1          )  000c  of   `r-1...R=(rp),rp-2                   endof
( r-2          )  0008  of   `r-2...R=(rp),rp-2,R=(rp),rp-2       endof
( r+1          )  0004  of   `r+1...rp+2,(rp)=R                   endof
  endcase   ;

: alu.operation(bit1~0)  ( op.code.1~0 -- )     0003  and
  case
( d-1          )  0003  of   `d-1...sp-2,N=(sp)       endof
( d+1          )  0001  of   `d+1...(sp)=N,sp+2       endof
  endcase   ;

:     alu.operation(bit11~0)  ( op.code -- )  >r
  r@  alu.operation(bit11~8)
  r@  alu.operation(bit7~7)     \ T->N T->R later after d+1 or r+1 has finished.     (T') to (T)  ;
  r@  alu.operation(bit6~4)     \ T->N T->R later after d+1 or r+1 has finished.     (T') to (T)  ;
  r@  alu.operation(bit3~2)     \ d+1  for the purpose of `d+1 first before T->N
  r>  alu.operation(bit1~0)  ;  \ r-1  for the purpose of `r+1 first before T->R
\ ---------------------------------------------------------------------------------
: all.xxx?.off   ( -- )
  T->N?       off
  T->R?       off
  N->[T]?     off
  N->io[T]?   off
  T=io[T]?    off
  RET?        off  ;

: alu'       (pc) 16@'  pc+2  alu.operation(bit11~0)  all.xxx?.off  (T')  to (T)  ;
\ ----------------------------------------------------------------------------------
: `T=T'      (T')  to  (T)  ;

: execute.dup'      `T'=T             `d+1...(sp)=N,sp+2   `T->N  ;
: execute.dup'      `T'=T    `T->N    `d+1...(sp)=N,sp+2          ;
: execute.drop'     `T'=N             `d-1...sp-2,N=(sp)          ;  \  `T=T'

: ubranch'                     (pc) 16@' 1fff  and  2*  to (pc)                                         all.xxx?.off                ;  \    0000 or tcode, ;
: 0branch'   (T)  0=   if      (pc) 16@' 1fff  and  2*  to (pc)  else  pc+2  then                       all.xxx?.off                ;  \    2000 or tcode, ;
: 0branch'   (T)  0=   if      (pc) 16@' 1fff  and  2*  to (pc)  else  pc+2  then   execute.drop' (T') to (T)     all.xxx?.off                ;  \    2000 or tcode, ;

: scall'     (pc) 2+  (rp)  !  (pc) 16@' 1fff  and  2*  to (pc)  rp+2                                   all.xxx?.off                ;  \    4000 or tcode, ;
: scall'     rp+2,(rp)=R       (pc) 2+  to  (R)  (pc) 16@' 1fff  and  2*  to (pc)                       all.xxx?.off                ;  \    4000 or tcode, ;

: imm'   execute.dup'  (pc) 16@'  7fff  and  to (T)  pc+2  all.xxx?.off  ;  \    8000 or tcode, ;

: .pc(30y)   ( a' -- )  30  ?y  ."  pc    --> "  (pc)  .xxxx  ;
:  .s(40y)   ( -- )     40  ?y  ."  stack --> "        .s     ;
\ ----------------------------------------------------------------------------------
variable  emit?    emit?  on
: xn   emit?  on   ;
: xf   emit?  off  ;

variable   in(1000)
variable  out(1000)

\ comment:
\ **********************************************************************************
\ *******************************************************************
\   debugger
\ *******************************************************************
\ **********************************************************************************
create        break.point.array   10000 allot
:       erase.break.point.array   break.point.array  10000  ff  fill  ;
        erase.break.point.array
: ebp   erase.break.point.array  ;
variable      break.point.array.counter

: set.break.point  ( a' -- )      break.point.array.counter  @  10000  u>=  abort" break.point.array.counter overflow !"
  break.point.array   break.point.array.counter  @  +  !  4  break.point.array.counter  +!  ;

: sbp    set.break.point  ;

: set.break.point.range   ( from to -- )  max.min  do  i   set.break.point  loop  ;

: sbpr   set.break.point.range  ;

variable  is.break.point?

: show.break.point   ( pc -- )     is.break.point?  off   10000  0
  do        break.point.array  i  +   @  -1  =
     if     leave
     then
     dup    break.point.array  i  +   @   =
     if     ." break.point: "  6 .r    show.cpu   .s  key  leave
     then   4
  +loop     drop  ;

variable go.through.break.point?

: show.break.point'''''   ( pc -- )   go.through.break.point? off  is.break.point?  off   10000  0
  do        dup  break.point.array  i  +   @        dup  -1  =  if   go.through.break.point?  on  leave  then        =
     if     ." break.point: "  6 .r    show.cpu     .s  key          go.through.break.point?  on  leave
     then   4
  +loop    go.through.break.point?  @  if drop  else  2drop 2drop  then ;
\ ******************************************************************************
: execute.'...'   ( n -- )  execute.dup'  to  (T)  ;

variable  cfa'.of.tF(ice40)
variable  cfa'.of.emit(ice40)
variable  cfa'.of.key(ice40)
variable  show.dis.ice40?
: sdi     show.dis.ice40?  dup  @  if  off   ." off "   else  on  ."  on "  then  ;
variable  cfa'.of..S(tF.ice40)     88790576  cfa'.of..S(tF.ice40)  !
variable  single.step?
: stn     single.step?  on   ;
: stf     single.step?  off  ;

: sdi  ( -- )  show.dis.ice40?  dup  @  if  off   ." off "   else  on  ."  on "  then  ;
: pc=  to  (pc)  ;       \  '' tF  pc=  run

variable  op.code.of.call.key
variable  op.code.of.call.emit
variable  op.code.of.jmp.emit
variable  cfa'.of.accept
variable  op.code.of.call.@
variable  op.code.of.jmp.@

: con  ( -- )   \  continue running from any address  \  reset.cpu  ( rst )  4650  0  16!'
  begin   (pc)  16@'  dup  op.code.of.call.@  ( 40AB ) @  =  swap  op.code.of.jmp.@  ( 00AB ) =  or
if        (T)   16@'  to  (T)   (pc)  16@'  op.code.of.call.@  =  if  pc+2  else  `ret  then
else
    (pc)  cfa'.of..S(tF.ice40)  @  =
    if            show.data.stack       `ret  \ : `ret  `pc=R  `R=(rp)  `r-1...R=(rp),rp-2  ;
    else          single.step?  @
      if          \.3F***    show.data.stack           (pc)  cfa'>nfa'(ice40)  if  6a ?y  .id(ice40)  then
                  1  instruction.step  +!      60 ?y   instruction.step  @  8 .r(10)  \ 2f .r  \ 400  ms
                  cr   (pc)  dis.ice40  drop
      then        key?  if  key  1b ( esc ) =  if  exit  then  then
            (pc)  show.break.point
            (pc)  cfa'.of.accept @ ( 4f8 ) = if    exit  then  \ call 22bc  ??????????
            (pc)  16@'  ( 4069 )  op.code.of.call.key  @    ( call.0d2 )   =
      if    (pc)  2+  to  (pc)  key  dup  1b ( esc )  =  if  drop  exit  then  execute.'...'   single.step?  @  if  6a ?y  ." key"  then
      then  (pc)  16@' ( 4072 )  op.code.of.call.emit  @ ( call.e4 )  =
            (pc)  16@' ( 0072 )  op.code.of.jmp.emit   @ (  jmp.e4 )  =  or
      if    (pc)  16@' ( 0072 )  op.code.of.jmp.emit   @  =
        if        `ret  (T)  emit  execute.drop'  (T')  to  (T)
        else      pc+2  (T)  emit  execute.drop'  (T')  to  (T)                     single.step?  @  if  6a ?y  ." emit" then
        then
      else  (pc)  16@'   dup    8000  and  \  fetch instruction
        if        drop   imm'
        else                    6000  and
           case
              0000  of    ubranch'  endof
              2000  of    0branch'  endof  \  alu.operation
              4000  of    scall'    endof
              6000  of    alu'      endof
           endcase
        then    \  (pc)  0b8  =  if  -1    0bc to (pc)  .s(40y)  then
      then
    then
then
  again   ;

: run  ( a' -- )  pc=  con  ;

: run0  ( -- )   reset.cpu  ( rst )  4650  0  16!'  0  run  ;

  #then

#then

: T111   ;

 




: ,call(pijForth)   ( a' -- )  2/  4000  or  16,'  ( ,call )  ;


variable  cfa'(LNC)

: t:(pijForth)       here'  REMAP>0?  @  if  FFFe  and  then  dup
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
                       here'      r@                       !   \  lfa'
                       r@  head.spacing @ -  @  r@   8  +  !   \ (lfa')
                       here'     4   +          r@  10  +  !   \  nfa'
  BL  WORD  COUNT      dup  r@  10   +  c!      r@  11  +  swap  cmove
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +          dup  cfa'(LNC)  !      !  R>  >IN  !      drop
  create      here'.muliple.of.4.aligned   here'  dup   cp'  !  >r
              last' @  4-  ffff   and   32,' ( content of LFA' )       r>  4+  last'  !   ( current last' )
              last  @  nfa-count  dup>r  c,' ( length )  here'  r@  cmove(.>')  r>  allot'  here'.muliple.of.4.aligned 
              here'  cfa'(LNC)  @  !
              here'    ( cfa' )    ,
  does>       @   ,call(pijForth)  ;

\ : t:  pijForth?  @   drop  -1  if  t:(pijForth)  else  t:(ice40)  then  ;
















eForth(-1)/swiftForth?(0)?  @
#if
: r0      0  ;  \ r2,
: r1      1  ;
: r2      2  ;
: r3      3  ;
: R4      4  ;   \  y
: sp      5  ;   \  eForth  s=5
: w       6  ;   \  "
: T       7  ;   \  "       T=7
: r8      8  ;
: r9      9  ;
: ra     0a  ;
: rb     0b  ;
: rc     0c  ;
: rp     0d  ;
: lr     0e  ;
: pc     0f  ;

: temp0   6  ;
: temp1   7  ;
: temp2   8  ;
: temp3   9  ;

: x      0c  ;

#else    mpe407?  @
  #if
: r0      0  ;  \ r2,
: r1      1  ;
: r2      2  ;
: UP      3  ;   \ 720 new eForth cht
: r4      4  ;
: r5      5  ;
: r6      6  ;
: r7      7  ;
: Y      r4  ;   \ y
: W      r5  ;   \ swiftxForth
: T      r7  ;   \  "
: SP     r6  ;   \  "
: r8      8  ;
: r9      9  ;
: ra     0a  ;
: rb     0b  ;
: rc     0c  ;
: rp     0d  ;
: lr     0e  ;
: pc     0f  ;
  #else
: r0      0  ;  \ r2,
: r1      1  ;
: r2      2  ;
: UP      3  ;   \ 720 new eForth cht
: r4      4  ;
: r5      5  ;
: r6      6  ;
: r7      7  ;
: Y      r4  ;   \ y
: W      r5  ;   \ swiftxForth
: T      r6  ;   \  "
: SP     r7  ;   \  "
: r8      8  ;
: r9      9  ;
: ra     0a  ;
: rb     0b  ;
: rc     0c  ;
: rp     0d  ;
: lr     0e  ;
: pc     0f  ;
  #then
#then

generate.execute.xx?  @   generate.dis?  @  or 
#if     :  xt0    0 ?y  80  spaces   ;
#else   :  xt0    cr  62 ( 70 )   ?y  ." exit then 0 ;" ;   \ 0 is included in (0   ?????
#then


: X1" ( -- n1 n2 )  _DISASSEM.NUMBER.STACK>   ;
: X2" ( -- n1 n2 )  _DISASSEM.NUMBER.STACK> _DISASSEM.NUMBER.STACK> ;
: X3" ( -- n1 n2 )  _DISASSEM.NUMBER.STACK> _DISASSEM.NUMBER.STACK>   _DISASSEM.NUMBER.STACK> ;
: X4" ( -- n1 n2 )  _DISASSEM.NUMBER.STACK> _DISASSEM.NUMBER.STACK>   _DISASSEM.NUMBER.STACK> _DISASSEM.NUMBER.STACK> ;
: X5" ( -- n1 n2 )  _DISASSEM.NUMBER.STACK> _DISASSEM.NUMBER.STACK>    _DISASSEM.NUMBER.STACK> _DISASSEM.NUMBER.STACK>  _DISASSEM.NUMBER.STACK>   ;

: XSR_R,R,R"  ( -- )   (br)  @  swap  (br)  @  xor  swap  (br)  ! ;
: XSR_R,R,R"  ( -- )    (r)  @  swap   (r)  @  xor  swap   (r)  ! ;
    
: x1  x1" ;
: x2  x2" ;
: x3  x3" ;
: x4  x4" ;
: x4  x4" ;
: x5  x5" ;

variable  <Rd>    variable  <Rt>    \  Rt === Rd  in str
variable  <Rm>
variable  <Rn>
variable  (s)
variable  <#>
variable  <16#>
variable  (i)
variable  <shift>

0  value  (#)       0  value  (#)' 
0  value  (Rd)
0  value  (Rn)
0  value  (Rm)
0  value  (R?)
0  value  (n)

: ?p  ( n -- )
  case      1 of  1p   endof
            2 of  2p   endof
            3 of  3p   endof
            4 of  4p   endof
  endcase   ;


: 5#*4.check  ;

:  2#.check  ;
:  4#.check  ;
:  4r.check  ;

: 18#.check  ;
: mnem"    .last.name   '"' emit  50 ( 61 ) ?y ;
\ : 32C:_gene    :.MNEM_ ." `32c" #=if4 ."  " .1" MNEM" xt0 ;

: `16c  ( a' -- a' op.code )  dup  16@'  ;
:  16C:_GENE      :.MNEM_ ." `16c" #=if2 ."  " .1" MNEM"  XT0 ;
:  16C:  CREATE  DUP , 16C:_GENE
        DOES>   @ 16,' ;







\ include  THUMB2asm865a3.F   ( test.assembler?  @ ) \ \s   \ to generate disassembler or dis with generate.dis? on

esp32?  @
#if   cls    include  ESP32asm23.F
             include  ESP32disasm22.F
             include  ESP32simulator5.f        inf    \s   \ to generate disassembler to use \s

: rp+#7   rp  R+#  ;
: r=#/   ( r # -- )  invert  R=#(-32..95)  ;

: rcall_#24   call4_#   ;


#else
\  include  THUMB2asm865a2.F   ( test.assembler?  @ ) \ \s   \ to generate disassembler or dis with generate.dis? on
\ thumb34asm.f  -->  thumb2asm35.f
\ THUMB2 assembler+disassembler+....    thumb19.f         in conjuction with  STM32F1XX62.F

: r0~r7?  ( r -- f )  0 7 between ;
















: _HEADER'      ( -<name>- )    \ build a header, but check available memory
                2000 ?MEMCHK
                BL WORD   COUNT   2dup  >temp.mnemonic   "HEADER ;

variable  temp.last
\ : CREATE        _HEADER'  DOVAR , ;
  : CREATE        _HEADER'  DOVAR ,     last @  temp.last  !   ;
warning off

:  8rel.check  here' over - 2/  -80 80  between  not  abort" **** relative jmp should be within -80~80 ****"  -1 ;

: 16,'  dup  0  ffff  between  not  abort" **** number must be between 0 ~ ffff ****"   16,'  ;

comment:
0  value  (#)       0  value  (#)' 
0  value  (Rd)
0  value  (Rn)
0  value  (Rm)
0  value  (R?)
0  value  (n)
comment;

: ?p  ( n -- )
  case      1 of  1p   endof
            2 of  2p   endof
            3 of  3p   endof
            4 of  4p   endof
  endcase   ;

: 32,^           0~15<->16~31  32,' ;
: 32@^      32@' 0~15<->16~31       ;

: max.min  ( n1 n2 -- max min )  2dup  max  -rot  min  ;

: ?~?.mask ( bit.n1 bit.n2 -- mask )   max.min  2>r   ffffffff  r> lshift   ffffffff  1f  r>  -  rshift  and  ;

: n1~n2>|n1-n2|~0  ( n1 n2 -- |n1-n2| 0 )   max.min   2dup  -   0  ;
: ?~?>|?-?|~0      ( n1 n2 -- |n1-n2| 0 )   max.min   2dup  -   0  ;

: n>?~?  ( n n1~n2 -- n3 )    min  lshift  ;

: >10~8  ( n1 -- n2 )   0a ( 10 ) 8   n>?~?  ;

: 2,?~?>|?-?|~0  ( a' ? ? -- |?-?| 0 )    2dup  2>r   2,?~?   2r>  nip  rshift  ;
: 4,?~?>|?-?|~0  ( a' ? ? -- |?-?| 0 )    2dup  2>r   4,?~?   2r>  nip  rshift  ;

: ?~?>|?-?|~0    ( a' ? ? -- |?-?| 0 )    <<byte>>
  case   2  of   2,?~?>|?-?|~0   endof
         4  of   4,?~?>|?-?|~0   endof
         -1 abort" **** number of byte undeterminded ****"
  endcase   ;
\ -------------------------------------------------------------------------------
: 2,?~?,p     2 to <<byte>>   ( a'                         x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<a'>>
  <<a'>>  <<x0>>  <<y0>>   2,?~?                       <<y0>>        rshift
  dup  >disassem.number.stack  .xxxx(h)      <<a'>>  ;

: 2,?~?,p*4  2 to <<byte>>    ( a'                         x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<a'>>
  <<a'>>  <<x0>>  <<y0>>   2,?~?                       <<y0>>        rshift  4  *  ( 2 lshift )
  dup  >disassem.number.stack  .xxxx(h)      <<a'>>  ;

: 2,?~?+?~?,p              ( a'                   x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<a'>>
  <<a'>>  <<x1>>  <<y1>>   2,?~?             <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   2,?~?    +                  <<y0>>        rshift
  dup  >disassem.number.stack  .xxxx(h)      <<a'>>  ;

: 2,?~?+?~?+?~?,p          ( a'             x2 y2 x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<a'>>
  <<a'>>  <<x2>>  <<y2>>   2,?~?             <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   2,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   2,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxx(h)      <<a'>>  ;

: 2,?~?+?~?+?~?+?~?,p      ( a'       x3 y3 x2 y2 x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<y3>>  to <<x3>>  to <<a'>>
  <<a'>>  <<x3>>  <<y3>>   2,?~?             <<y3>>    <<x2>> 1+  -  rshift
  <<a'>>  <<x2>>  <<y2>>   2,?~?    +        <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   2,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   2,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxx(h)      <<a'>>  ;

: 2,?~?+?~?+?~?+?~?+?~?,p  ( a' x4 y4 x3 y3 x2 y2 x1 y1 x0 y0 p -- a' )  ?p
to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<y3>>  to <<x3>>  to <<y4>>  to <<x4>>  to <<a'>>
  <<a'>>  <<x4>>  <<y4>>   2,?~?             <<y4>>    <<x3>> 1+  -  rshift
  <<a'>>  <<x3>>  <<y3>>   2,?~?    +        <<y3>>    <<x2>> 1+  -  rshift
  <<a'>>  <<x2>>  <<y2>>   2,?~?    +        <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   2,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   2,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxx(h)      <<a'>>  ;
\ -------------------------------------------------------------------------------
: 4,#12>n  ( #12 -- n )  >r                    \ for disassembler use only
  r@  000  0ff  between  if   r>  0ff and                                      exit  then  \ 0 ~ ff
  r@  100  1ff  between  if   r>  0ff and                   dup  10 lshift  +  exit  then  \ 00xy00xy
  r@  200  2ff  between  if   r>  0ff and      8 lshift     dup  10 lshift  +  exit  then  \ xy00xy00
  r@  300  3ff  between  if   r>  0ff and  dup 8 lshift  +  dup  10 lshift  +  exit  then  \ xyxyxyxy
  r@  7f  and  80 or   20  r>  f80  and  -  7 rshift ( left rotate )  lshift  ;

: 4,?~?,p    4 to <<byte>>    ( a'                         x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<a'>>
  <<a'>>  <<x0>>  <<y0>>   4,?~?                       <<y0>>        rshift
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;

: 4,?~?,p*4  4 to <<byte>>    ( a'                         x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<a'>>
  <<a'>>  <<x0>>  <<y0>>   4,?~?                       <<y0>>        rshift  4  *  ( 2 lshift )
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;

: 4,?~?+?~?,p              ( a'                   x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<a'>>
  <<a'>>  <<x1>>  <<y1>>   4,?~?             <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;





: 4,?~?+?~?,p              ( a'                   x1 y1 x0 y0 p -- a' )  >r   to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<a'>>
  <<a'>>  <<x1>>  <<y1>>   4,?~?             <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  +  r>  ?p  ;





: 4,?~?+?~?,p              ( a'                   x1 y1 x0 y0 p -- a' )  >r   to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<a'>>
  <<a'>>  <<x1>>  <<y1>>   4,?~?             <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack
  \   .xxxxxxxx(h)
   <<a'>> swap  r>  ?p   ;






: 4,?~?+?~?+?~?,p          ( a'              x2 y2 x1 y1 x0 y0 p-- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<a'>>
  <<a'>>  <<x2>>  <<y2>>   4,?~?             <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   4,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;

: 4,?~?+?~?+?~?,p'         ( a'             x2 y2 x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<a'>>
  <<a'>>  <<x2>>  <<y2>>   4,?~?             <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   4,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift  4,#12>n
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;

\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  |1 1 1 1|0 i 0 0|0 1 0 S|1 1 1 1|0imm3|==Rd====|====imm8=======|  5c#5cs5c3#4r8#

: 4,?~?+?~?+?~?+?~?,p      ( a'       x3 y3 x2 y2 x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<y3>>  to <<x3>>  to <<a'>>
  <<a'>>  <<x3>>  <<y3>>   4,?~?             <<y3>>    <<x2>> 1+  -  rshift
  <<a'>>  <<x2>>  <<y2>>   4,?~?    +        <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   4,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;

: 4,?~?+?~?+?~?+?~?+?~?,p  ( a' x4 y4 x3 y3 x2 y2 x1 y1 x0 y0 p -- a' )  ?p  to <<y0>>  to <<x0>>  to <<y1>>  to <<x1>>  to <<y2>>  to <<x2>>  to <<y3>>  to <<x3>>  to <<y4>>  to <<x4>>  to <<a'>>
  <<a'>>  <<x4>>  <<y4>>   4,?~?             <<y4>>    <<x3>> 1+  -  rshift
  <<a'>>  <<x3>>  <<y3>>   4,?~?    +        <<y3>>    <<x2>> 1+  -  rshift
  <<a'>>  <<x2>>  <<y2>>   4,?~?    +        <<y2>>    <<x1>> 1+  -  rshift
  <<a'>>  <<x1>>  <<y1>>   4,?~?    +        <<y1>>    <<x0>> 1+  -  rshift
  <<a'>>  <<x0>>  <<y0>>   4,?~?    +        <<y0>>                  rshift
  dup  >disassem.number.stack  .xxxxxxxx(h)  <<a'>>  ;
\ ------------------------------------------------------------------------------
\ ------------------------------------------------------------------------------
: b,?~?,p                  ( a' b m n p --------------- a' )  3  roll
  case     2  of  2  to  <<byte>>    2,?~?,p               endof
           4  of  4  to  <<byte>>    4,?~?,p               endof
          -1  abort"  *** It must be 2 ( for 16 bit op.code ) or 4 ( for 32 bit op.code ) *** "
  endcase  ;

: b,?~?,p*4                ( a' b m n p --------------- a' )  3  roll
  case     2  of  2  to  <<byte>>    2,?~?,p*4             endof
           4  of  4  to  <<byte>>    4,?~?,p*4             endof
          -1  abort"  *** It must be 2 ( for 16 bit op.code ) or 4 ( for 32 bit op.code ) *** "
  endcase  ;

: b,?~?+?~?,p              ( a' b m n x y p ----------- a' )  5  roll
  case     2  of  2  to  <<byte>>    2,?~?+?~?,p           endof
           4  of  4  to  <<byte>>    4,?~?+?~?,p           endof
          -1  abort"  *** It must be 2 ( for 16 bit op.code ) or 4 ( for 32 bit op.code ) *** "
  endcase  ;





: b,?~?+?~?,p              ( a' b m n x y p ----------- a' )  5  roll     \ 2016.9.1
  case     2  of  2  to  <<byte>>    2,?~?+?~?,p           endof
           4  of  4  to  <<byte>>    4,?~?+?~?,p           endof
          -1  abort"  *** It must be 2 ( for 16 bit op.code ) or 4 ( for 32 bit op.code ) *** "
  endcase  ;





: b,?~?+?~?+?~?,p          ( a' b m n v w x y  p ------ a' )  7  roll
  case     2  of  2  to  <<byte>>    2,?~?+?~?+?~?,p       endof
           4  of  4  to  <<byte>>    4,?~?+?~?+?~?,p       endof
          -1  abort"  *** It must be 2 ( for 16 bit op.code ) or 4 ( for 32 bit op.code ) *** "
  endcase  ;

: b,?~?+?~?+?~?+?~?,p      ( a' b m n x y v w a b p --- a' )  7  roll
  case     2  of  2  to  <<byte>>    2,?~?+?~?+?~?+?~?,p   endof
           4  of  4  to  <<byte>>    4,?~?+?~?+?~?+?~?,p   endof
          -1  abort"  *** It must be 2 ( for 16 bit op.code ) or 4 ( for 32 bit op.code ) *** "
  endcase  ;

: 2,10~8,3       2  0a   8   3   b,?~?,p  ;
: 2,10~8,4       2  0a   8   4   b,?~?,p  ;
: 2,7~0,3        2   7   0   3   b,?~?,p  ;
: 2,7~0,4        2   7   0   4   b,?~?,p  ;
: 2,7~0,4*4      2   7   0   4   b,?~?,p*4  ;

: 4,6~3,3        4   6   3   3   b,?~?,p  ;
: 4,7~3,3        4   7   3   3   b,?~?,p  ;
: 4,7~3,4        4   7   3   4   b,?~?,p  ;

: 4,11~8,1       4  0b   8   1   b,?~?,p  ;
: 4,11~8,2       4  0b   8   2   b,?~?,p  ;
: 4,11~8,3       4  0b   8   3   b,?~?,p  ;
: 4,11~8,4       4  0b   8   4   b,?~?,p  ;

: 4,19~16,1      4  13  10   1   b,?~?,p  ;
: 4,19~16,2      4  13  10   2   b,?~?,p  ;
: 4,19~16,3      4  13  10   3   b,?~?,p  ;
: 4,19~16,4      4  13  10   4   b,?~?,p  ;

: `3cC4c4o4r4r4p3o4r  ;

: 4,3~0,1        4   3   0   1   b,?~?,p   ;
: 4,3~0,2        4   3   0   2   b,?~?,p   ;
: 4,3~0,3        4   3   0   3   b,?~?,p   ;
: 4,3~0,4        4   3   0   4   b,?~?,p   ;
: 4,2~0,4        4   2   0   4   b,?~?,p   ;
: 4,2~0,3        4   2   0   3   b,?~?,p   ;
: 4,4~0,3        4   4   0   3   b,?~?,p   ;
: 4,6~0,4        4   6   0   4   b,?~?,p   ;
: 4,7~0,2        4   7   0   2   b,?~?,p   ;
: 4,7~0,4        4   7   0   4   b,?~?,p   ;
: 2,2~0,2        2   2   0   2   b,?~?,p   ;
: 2,5~3,2        2   5   3   2   b,?~?,p   ;

: 2,5~3,3        2   5   3   3   b,?~?,p   ;
: 2,5~3,4        2   5   3   4   b,?~?,p   ;
: 2,6~8,4        2   8   6   4   b,?~?,p   ;
: 2,8~6,4        2   8   6   4   b,?~?,p   ;
\ 2,7~0,4        2   7   0   4   b,?~?,p   ;
: 2,10~0,4       2  0a   0   4   b,?~?,p   ;
: 2,10~6,3       2  0a   6   3   b,?~?,p   ;
: 2,10~6,4       2  0a   6   4   b,?~?,p   ;
: 2,10~6,2*4     2  0a   6   2   b,?~?,p*4 ;
: 2,10~6,3*4     2  0a   6   3   b,?~?,p*4 ;
: 2,10~6,4*4     2  0a   6   4   b,?~?,p*4 ;
: 2,10~8,3       2  0a   8   3   b,?~?,p   ;
\ 2,7~0,4        2   7   0   4   b,?~?,p   ;
: 4,7~0,4        4   7   0   4   b,?~?,p   ;

: 2,8~8,4        2   8   8   4   b,?~?,p   ;  \ ????????????????     lr

: .{r0~r7+lr}     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ." , "  then   loop  drop
                                           100  and  if  ." lr, "   then  ." }" ;

: .{r0~r7+pc}     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ." , "  then   loop  drop
                                           100  and  if  ." pc, "   then  ." }" ;


: .{r0~r7+lr+pc}  ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  then   loop  drop
                                      dup  100  and  if  ." lr, "   then
                                          8000  and  if  ." pc, "   then  ;

: .{r0~r12+lr}    ( a' -- a' )  H.MODE @   if   3c   else  24   then  ?y
                                      dup  32@^    dup  1fff  and  0d  0  do  2 /mod  swap  if  'R' emit  i .  then   loop  drop
                                          4000  and  if  ." lr"   then  ;

: .{r0~r12+pc+lr} ( a' -- a' )  H.MODE @   if   3c   else  24   then  ?y
                                      dup  32@^    dup  1fff  and  0d  0  do  2 /mod  swap  if  'R' emit  i .  then   loop  drop
                                      dup 4000  and  if  ." lr"   then
                                      dup 8000  and  if  ." pc"   then
                                          c000  and  c000 = if  ." *** pc and lr shouldn't be present at the same time ***"  then  ;


: .{r0~r7}.rn     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  then   loop  drop
                                      dup  700     and    if   'R' emit  700 and  100 / .   then  ;

: .{r0~r12+pc+lr} ( a' -- a' )  H.MODE @   if   3c   else  24   then  ?y  ." { "
                                      dup  32@^    dup  ffff  and  10  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop   ." } "
                                      dup 4000  and  if  ." lr"   then
                                      dup 8000  and  if  ." pc"   then
                                          c000  and  c000 = if  ." *** pc and lr shouldn't be present at the same time ***"  then  ;





: .{r0~r12+pc+lr} ( a' -- a' )  H.MODE @   if   3c   else  24   then  ?y  ." { "
                                      dup  32@^    dup  ffff  and  10  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop   ." } "
                                 \    dup 4000  and  if  ." lr"   then
                                 \    dup 8000  and  if  ." pc"   then
                                          c000  and  c000 = if  ." *** pc and lr shouldn't be present at the same time ***"  then   ;
                                   



: .{r0~r12+pc+lr}+rn ( a' -- a' )  H.MODE @   if   3c   else  24   then  ?y  ." { "
                                      dup  32@^    dup  ffff  and  10  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop   ." } "
                                 \    dup 4000  and  if  ." lr"   then
                                 \    dup 8000  and  if  ." pc"   then
                                          c000  and  c000 = if  ." *** pc and lr shouldn't be present at the same time ***"  then
                                          32@^  f0000 and  10000 /   'R' emit  .   ;


: .{r0~r12+pc+lr}+rn ( a' -- a' )  H.MODE @   if   3c   else  24   then  ?y  ." { "
                                      dup  32@^    dup  ffff  and  10  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop   ." } "
                                 \    dup 4000  and  if  ." lr"   then
                                 \    dup 8000  and  if  ." pc"   then
                                          c000  and  c000 = if  ." *** pc and lr shouldn't be present at the same time ***"  then
                                      dup 32@^  f0000 and  10000 /   'R' emit  .   ;


: .{r0~r7+pc}     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop   ." } "
                                           100  and  if  ." pc, "   then  ;

: .{r0~r7+pc}     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop
                                           100  and  if  ." pc, "   then   ." } "  ;

: .{r0~r7}.rn     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if  'R' emit  i .  8 emit  ( bs ) ." , "  then   loop  drop   ." } "
                                   \  dup  700     and    if   'R' emit  700 and  100 / .   then  ;
                                      dup  700     and    if   'R' emit  700 and  100 / .   else   drop   then  ;

: .{r0~r7}.rn     ( a' -- a' )  H.MODE @   if   3c   else  28   then  ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if   i   EMIT.VF.REGISTER  drop   ." , "  then   loop  drop   ." } "
                                   \  dup  700     and    if   'R' emit  700 and  100 / .   then  ;
                                      dup  700     and    if   700 and  100 /  EMIT.VF.REGISTER  drop   else   drop   then  ;

: .{r0~r7}.rn     ( a' -- a' )  H.MODE @   if   3c   else  28   then ( drop  3a ) ?y  ." { "
                                      dup  16@'    dup    ff  and   8  0  do  2 /mod  swap  if   i   EMIT.VF.REGISTER  drop   ." , "  then   loop  drop   ." } "
                                   \  dup  700     and    if   'R' emit  700 and  100 / .   then  ;
                                      dup  700     and    if   700 and  100 /  EMIT.VF.REGISTER  drop   else   drop   then   60 ?y  ;



defer  _other.ThumbExpand.#12->n

: 4,3#4.2#2.4#,4       4  0e  0c  7   6  3  0  4  b,?~?+?~?+?~?,p  ;
:   3#4.2#2.4#         4  0e  0c  7   6  3  0  4  b,?~?+?~?+?~?,p  ;
: 4,3#4.2#2.4#         4  0e  0c  7   6  3  0  4  b,?~?+?~?+?~?,p  ;

: 4,3#4.2#6.,4         4         0e  0c  7  6  4  b,?~?+?~?,p  ;
:   3#4.2#6.           4         0e  0c  7  6  4  b,?~?+?~?,p  ;
: 4,3#4.8#,4           4         0e  0c  7  0  4  b,?~?+?~?,p  ;
:   3#4.8#,4           4         0e  0c  7  0  4  b,?~?+?~?,p  ;

: 4,26~26+14~12+7~0,4     1a  1a 0e  0c  7  0  4  4,?~?+?~?+?~?,p' ;

:   14~12+7~6          4         0e  0c  7  6  4  b,?~?+?~?,p  ;
:   14~12+7~6,4        4         0e  0c  7  6  4  b,?~?+?~?,p  ;
: 4,14~12+7~6,4        4         0e  0c  7  6  4  b,?~?+?~?,p  ;
: 4,10#5.11#,4         4         19  10 0a  0  4  b,?~?+?~?,p  ;
\ 2,#.5#3.,4
: 2,9~9+7~3,4          2          9   9  7  3  4  b,?~?+?~?,p  ;
: 2,9~9+7~3,4                     9   9  7  3  24p   ;
:   9~9+7~3,4                     9   9  7  3  24p   ;



: 2x    2  exit  ; \ immediate
: 4x    4  exit  ; \ immediate

: 2,7+2~0,2   2   7   7   2   0   2   b,?~?+?~?,p   ;
: 2,7+2~0,3   2   7   7   2   0   3   b,?~?+?~?,p   ;

: 2,6~0,4     2   6   0   4    b,?~?,p   ;  \
: 2,6~0,4*4   2   6   0   4    b,?~?,p*4 ;  \
: 2,2~0,2     2   2   0   2    b,?~?,p   ;  \      0007      1   2   16mask.divide.p  ;
: 2,2~0,3     2   2   0   3    b,?~?,p   ;  \      0007      1   3   16mask.divide.p  ;
: 2,2~0,4     2   2   0   4    b,?~?,p   ;  \      0007      1   4   16mask.divide.p  ;
: 2,6~3,4     2   6   3   4    b,?~?,p   ;  \      0078      8   4   16mask.divide.p  ;
: 2,7~3,3     2   7   3   3    b,?~?,p   ;  \      0078      8   3   16mask.divide.p  ;

: 4,11~0,3    4  0b   0   3    b,?~?,p   ;  \  00000fff      1   4   32mask.divide.p  ;
: 4,11~0,4    4  0b   0   4    b,?~?,p   ;  \  00000fff      1   4   32mask.divide.p  ;
: 4,11~8,4    4  0b   8   4    b,?~?,p   ;  \  00000f00    100   4   32mask.divide.p  ;
: 4,11~8,2    4  0b   8   2    b,?~?,p   ;  \  00000f00    100   2   32mask.divide.p  ;
: 4,3~0,3     4   3   0   3    b,?~?,p   ;  \  0000000f      1   3   32mask.divide.p  ;
: 4,3~0,4     4   3   0   4    b,?~?,p   ;  \  0000000f      1   4   32mask.divide.p  ;
: 4,15~12,1   4  0f  0c   1    b,?~?,p   ;  \  0000f000   1000   2   32mask.divide.p  ;
: 4,15~12,2   4  0f  0c   2    b,?~?,p   ;  \  0000f000   1000   2   32mask.divide.p  ;
: 4,15~12,3   4  0f  0c   3    b,?~?,p   ;  \  0000f000   1000   3   32mask.divide.p  ;
: 4,15~12,4   4  0f  0c   4    b,?~?,p   ;  \  0000f000   1000   3   32mask.divide.p  ;

: 4,7~0,4     4   7   0   4    b,?~?,p   ;  \  000000ff      1   4   32mask.divide.p  ;
: 4,7~0,3*4   4   7   0   3    b,?~?,p*4 ;  \  000000ff      1   4   32mask.divide.p  ;
: 4,7~0,4*4   4   7   0   4    b,?~?,p*4 ;  \  000000ff      1   4   32mask.divide.p  ;


: mnem"    .last.name   '"' emit  50 ( 61 ) ?y ;
: mnem"?   mnem"  ;

: .om    original.mnemonic? @  not  if  0  exit  then  ;

: get.name     bl word  count  type  ;
: get.name?    bl word  count 07 and 0  ?do  i 3 = if '#' else  dup i + c@  then  emit  loop  drop  ; \ ( fecth 0 1 2 4 8 - )
: get.name?    bl word  count 07 and 0  ?do   '#' emit  loop  drop  ; \ ( fecth 0 1 2 4 8 - )

: gn#    bl word  count  type   1d ( 25 ) ?y   .8#  space  ;
:  gn#   ( n -- )            bl  word  count  type   1d ( 25 ) ?y   .8#  space  ;
:  gn#   ( n -- )  >in @ >r  bl  word  count  type  r> >in !  1d ( 25 ) ?y   .8#  space  ;
:  gn#   ( n -- )            bl  word  count  type             1d ( 29 ) ?y   .8#  space  ;
:  gn#   ( n -- ) ( >in @ >r bl  word  count  type  r> >in ! ) 1d ( 29 ) ?y   .8#  space  ;

: get.name.1cy..XXXXxx   get.name  1cy..XXXXxx    ;
: gnx    get.name   1cy..XXXXxxxx  ;
: gnx?   get.name?  1cy..XXXXxxxx  ;

: check.depth>1   ( n1 n2 -------- )    depth 1  <  abort"  **** It needs at least 1 item on the stack! ****"  ;
: check.depth>2   ( n1 n2 -------- )    depth 2  <  abort"  **** It needs at least 2 item on the stack! ****"  ;
: check.depth>3   ( n1 n2 n3 ----- )    depth 3  <  abort"  **** It needs at least 3 item on the stack! ****"  ;
: check.depth>4   ( n1 n2 n3 n4 -- )    depth 4  <  abort"  **** It needs at least 4 item on the stack! ****"  ;

:     3r?   ( # -- f )                  check.depth>1   0     7  between  ;
:     3#?   ( # -- f )                  check.depth>1   0     7  between  ;
:     4r?   ( # -- f )                  check.depth>1   0    0f  between  ;
:     4#?   ( # -- f )                  check.depth>1   0    0f  between  ;
:     5#?   ( # -- f )                  check.depth>1   0    1f  between  ;
:     5#?*4 ( # -- f )                  check.depth>1   0    7f  between  ;  \  7c

:     8#?   ( # -- f )                  check.depth>1   0   0ff  between  ;
:     8#*4? ( # -- f )                  check.depth>1   0   3ff  between  ;  \ 3fc

:     8r?   ( # -- f )                  check.depth>1   0   0ff  between  ;

:    11#?   ( # -- f )                  check.depth>1   0   7ff  between  ;
:    12#?   ( # -- f )                  check.depth>1   0  0fff  between  ;
:    16#?   ( # -- f )                  check.depth>1   0 0ffff  between  ;

:   3r3r?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     3r?      swap   3r?      and  ;
:   3r3#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     3#?      swap   3r?      and  ;
:   3r5#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     5#?      swap   3r?      and  ;
:   3r5#?*4 ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     5#?*4    swap   3r?      and  ;

:   3r8#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     8#?      swap   3r?      and  ;
:   3r8#*4? ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     8#*4?    swap   3r?      and  ;

:   4r4r?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     4r?      swap   4r?      and  ;
:   4r8#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     8#?      swap   4r?      and  ;
:  3r12#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup    12#?      swap   3r?      and  ;
:  4r12#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup    12#?      swap   4r?      and  ;
:  4r16#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup    16#?      swap   4r?      and  ;
:   4r5#?   ( n1 n2 -- n1 n2 f )        check.depth>2   2dup     5#?      swap   4r?      and  ;

:  3r3r3r?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup  3r3r?   >r  2drop  3r?  r>  and  ;
:  3r3r3#?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup  3r3#?   >r  2drop  3r?  r>  and  ;
:  4r4r8#?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup  4r8#?   >r  2drop  4r?  r>  and  ;

:  3r3r5#?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup  3r5#?   >r  2drop  3r?  r>  and  ;
:  3r3r5#?*4 ( n1 n2 n3 -- n1 n2 n3 f ) check.depth>3       3dup  3r5#?*4 >r  2drop  3r?  r>  and  ;

:  3r5#3r?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3  -rot 3dup  3r5#?   >r  2drop  3r?  r>  and  >r  rot  r>  ;

:  3r5#3r?*4 ( n1 n2 n3 -- n1 n2 n3 f ) check.depth>3  -rot 3dup  3r5#?*4 >r  2drop  3r?  r>  and  >r  rot  r>  ;


:  3r3r8#?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup   3r8#?  >r  2drop  3r?  r>  and  ;
: 3r3r12#?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup  3r12#?  >r  2drop  3r?  r>  and  ;
: 4r4r12#?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup  4r12#?  >r  2drop  4r?  r>  and  ;
: 4r12#4r?  ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3  -rot 3dup  4r12#?  >r  2drop  4r?  r>  and  >r  rot  r>  ;
: 3r4r5#?   ( n1 n2 n3 -- n1 n2 n3 f )  check.depth>3       3dup   4r5#?  >r  2drop  3r?  r>  and  ;

variable  ,s=1.ok?
variable  ,w=1.ok?
variable  ,lsl.ok?
variable  ,lsr.ok?
variable  ,asr.ok?
variable  ,ror.ok?
variable  ,rrx.ok?

variable  ,p|w=1/0.ok?
variable   p|w=1/0.ok?
variable   s=1.ok?
variable   w=1.ok?
variable   lsl.ok?
variable   lsr.ok?
variable   asr.ok?
variable   ror.ok?
variable   rrx.ok?

:  all.ok?.off
   S=1.ok?   off
   W=1.ok?   off
   lsL.ok?   off
   lsR.ok?   off
   asr.ok?   off
   rrX.ok?   off
   p|w=1/0.ok?  off ;

: ,all.ok?.off
  ,S=1.ok?   off
  ,W=1.ok?   off
  ,lsL.ok?   off
  ,lsr.ok?   off
  ,asr.ok?   off
  ,rrX.ok?   off
  ,p|w=1/0.ok?  off ;
             
: ,s=1.ok??  dup  100000 and         if  ,s=1.ok?  on  then  ;   \ ( a' -- a' )
: ,w=1.ok??  dup  200000 and  .      if  ,w=1.ok?  on  then  ;
: ,lsl.ok??  dup      30 and   00 =  if  ,lsl.ok?  on  then  ;
: ,lsr.ok??  dup      30 and   10 =  if  ,lsr.ok?  on  then  ;
: ,asr.ok??  dup      30 and   20 =  if  ,asr.ok?  on  then  ;                                   
: ,rrx.ok??  dup      30 and   30 =  if  ,rrx.ok?  on  then  ;
: ,p|w=1/0.ok??  dup 500 and         if  ,p|w=1/0.ok?  on  then  ;

: ,s=1.ok??   ;

: ,all.ok??.off
  ,s=1.ok??  off
  ,w=1.ok??  off
  ,lsl.ok??  off
  ,lsr.ok??  off
  ,asr.ok??  off
  ,rrX.ok??  off
  ,p|w=1/0.ok?  off ;

variable          shift.ok?
variable         ,shift.ok?
: ,shift.ok??    ,shift.ok?  @     ( a' -- a' )
   if  dup      30 and   00 =  if  ."  lsl"  exit  then
       dup      30 and   10 =  if  ."  lsr"  exit  then
       dup      30 and   20 =  if  ."  asr"  exit  then
       dup      30 and   30 =  if  ."  rrx"  exit  then
   then  ;

:  ,all.ok??   ( a' -- a' )
   ,s=1.ok?  @  if  ."  s=1"    then
   ,w=1.ok?  @  if  ."  w=1"    then
   ,shift.ok??  ,all.ok?.off ;

' ,all.ok??  is  _,all.ok??

:  16REL.check  ( A ... a )  dup  HERE' 1+  -   ABS  07Fff  >   ABORT" RELATIVE JMP TOO FAR. ??? "     ; 

:    a.check  ( a n -- a ) >r dup 1 r> lshift 1- dup>r u> if ."  Addr range is not within 0 ~ " r> . abort then r>drop ;
:    b.check  ( b n -- b ) >r dup 1 r> lshift 1- dup>r u> if ."     b range is not within 0 ~ " r> . abort then r>drop ;
:    r.check  ( r n -- r ) >r dup 1 r> lshift 1- dup>r u> if    ."  R range is not within 0 ~ " r> . abort then r>drop ;
:    #.check  ( # n -- # ) >r dup 1 r> lshift 1- dup>r u> if    ."  # range is not within 0 ~ " r> . abort then r>drop ;
:  #*4.check  ( # n -- # ) over  4 mod 0<> abort" **** number must be mutiple of 4 **** " >r  4 /  r>
                           >r dup 1 r> lshift 1- dup>r u> if    ."  # range is not within 0 ~ " r> . abort then r>drop ;

:   1a.check  ( a -- a )   1  a.check  ;
:   2a.check  ( a -- a )   2  a.check  ;
:   3a.check  ( a -- a )   3  a.check  ;
:   4a.check  ( a -- a )   4  a.check  ;
:   5a.check  ( a -- a )   5  a.check  ;
:   6a.check  ( a -- a )   6  a.check  ;
:   7a.check  ( a -- a )   7  a.check  ;
:   8a.check  ( a -- a )   8  a.check  ;
:   9a.check  ( a -- a )   9  a.check  ;
:  10a.check  ( a -- a )  0a  a.check  ;
:  11a.check  ( a -- a )  0b  a.check  ;
:  12a.check  ( a -- a )  0c  a.check  ;
:  13a.check  ( a -- a )  0d  a.check  ;
:  14a.check  ( a -- a )  0e  a.check  ;
:  15a.check  ( a -- a )  0f  a.check  ;
:  16a.check  ( a -- a )  10  a.check  ;
:  17a.check  ( a -- a )  11  a.check  ;
:  18a.check  ( a -- a )  12  a.check  ;
:  19a.check  ( a -- a )  13  a.check  ;
:  20a.check  ( a -- a )  14  a.check  ;
:  21a.check  ( a -- a )  15  a.check  ;
:  22a.check  ( a -- a )  16  a.check  ;
:  23a.check  ( a -- a )  17  a.check  ;
:  24a.check  ( a -- a )  18  a.check  ;
:  25a.check  ( a -- a )  19  a.check  ;
:  26a.check  ( a -- a )  1a  a.check  ;
:  27a.check  ( a -- a )  1b  a.check  ;
:  28a.check  ( a -- a )  1c  a.check  ;
:  29a.check  ( a -- a )  1d  a.check  ;
:  30a.check  ( a -- a )  1e  a.check  ;
:  31a.check  ( a -- a )  1f  a.check  ;
:  32a.check  ( a -- a )  20  a.check  ;

:   1b.check  ( b -- b )   1  b.check  ;
:   2b.check  ( b -- b )   2  b.check  ;
:   3b.check  ( b -- b )   3  b.check  ;
:   4b.check  ( b -- b )   4  b.check  ;
:   5b.check  ( b -- b )   5  b.check  ;
:   6b.check  ( b -- b )   6  b.check  ;
:   7b.check  ( b -- b )   7  b.check  ;
:   8b.check  ( b -- b )   8  b.check  ;
:   9b.check  ( b -- b )   9  b.check  ;
:  10b.check  ( b -- b )  0a  b.check  ;
:  11b.check  ( b -- b )  0b  b.check  ;
:  12b.check  ( b -- b )  0c  b.check  ;
:  13b.check  ( b -- b )  0d  b.check  ;
:  14b.check  ( b -- b )  0e  b.check  ;
:  15b.check  ( b -- b )  0f  b.check  ;
:  16b.check  ( b -- b )  10  b.check  ;
:  17b.check  ( b -- b )  11  b.check  ;
:  18b.check  ( b -- b )  12  b.check  ;
:  19b.check  ( b -- b )  13  b.check  ;
:  20b.check  ( b -- b )  14  b.check  ;
:  21b.check  ( b -- b )  15  b.check  ;
:  22b.check  ( b -- b )  16  b.check  ;
:  23b.check  ( b -- b )  17  b.check  ;
:  24b.check  ( b -- b )  18  b.check  ;
:  25b.check  ( b -- b )  19  b.check  ;
:  26b.check  ( b -- b )  1a  b.check  ;
:  27b.check  ( b -- b )  1b  b.check  ;
:  28b.check  ( b -- b )  1c  b.check  ;
:  29b.check  ( b -- b )  1d  b.check  ;
:  30b.check  ( b -- b )  1e  b.check  ;
:  31b.check  ( b -- b )  1f  b.check  ;
:  32b.check  ( b -- b )  20  b.check  ;

:   1r.check  ( r -- r )   1  r.check  ;
:   2r.check  ( r -- r )   2  r.check  ;
:   3r.check  ( r -- r )   3  r.check  ;
:   4r.check  ( r -- r )   4  r.check  ;
:   5r.check  ( r -- r )   5  r.check  ;
:   6r.check  ( r -- r )   6  r.check  ;
:   7r.check  ( r -- r )   7  r.check  ;
:   8r.check  ( r -- r )   8  r.check  ;
:   9r.check  ( r -- r )   9  r.check  ;
:  10r.check  ( r -- r )  0a  r.check  ;
:  11r.check  ( r -- r )  0b  r.check  ;
:  12r.check  ( r -- r )  0c  r.check  ;
:  13r.check  ( r -- r )  0d  r.check  ;
:  14r.check  ( r -- r )  0e  r.check  ;
:  15r.check  ( r -- r )  0f  r.check  ;
:  16r.check  ( r -- r )  10  r.check  ;
:  17r.check  ( r -- r )  11  r.check  ;
:  18r.check  ( r -- r )  12  r.check  ;
:  19r.check  ( r -- r )  13  r.check  ;
:  20r.check  ( r -- r )  14  r.check  ;
:  21r.check  ( r -- r )  15  r.check  ;
:  22r.check  ( r -- r )  16  r.check  ;
:  23r.check  ( r -- r )  17  r.check  ;
:  24r.check  ( r -- r )  18  r.check  ;
:  25r.check  ( r -- r )  19  r.check  ;
:  26r.check  ( r -- r )  1a  r.check  ;
:  27r.check  ( r -- r )  1b  r.check  ;
:  28r.check  ( r -- r )  1c  r.check  ;
:  29r.check  ( r -- r )  1d  r.check  ;
:  30r.check  ( r -- r )  1e  r.check  ;
:  31r.check  ( r -- r )  1f  r.check  ;
:  32r.check  ( r -- r )  20  r.check  ;

:  r0~r14.check  ( r -- r )  dup 0f = abort" *** r15 ( pc ) is not allowed here !? ***"   4r.check  ;

:   1#.check  ( # -- # )   1  #.check  ;
:   2#.check  ( # -- # )   2  #.check  ;
:   3#.check  ( # -- # )   3  #.check  ;
:   4#.check  ( # -- # )   4  #.check  ;
:   5#.check  ( # -- # )   5  #.check  ;
:   5#*4.check ( # -- # )  5  #*4.check  ;
:   6#.check  ( # -- # )   6  #.check  ;
:   7#.check  ( # -- # )   7  #.check  ;
:   8#.check  ( # -- # )   8  #.check  ;
:   8#*4.check  ( # -- # ) 4 /mod  swap  abort"  *** offset number should be multiple of 4 *** "   8  #.check  ;
:   9#.check  ( # -- # )   9  #.check  ;
:  10#.check  ( # -- # )  0a  #.check  ;
:  11#.check  ( # -- # )  0b  #.check  ;
:  12#.check  ( # -- # )  0c  #.check  ;
:  13#.check  ( # -- # )  0d  #.check  ;
:  14#.check  ( # -- # )  0e  #.check  ;
:  15#.check  ( # -- # )  0f  #.check  ;
:  16#.check  ( # -- # )  10  #.check  ;
:  17#.check  ( # -- # )  11  #.check  ;
:  18#.check  ( # -- # )  12  #.check  ;
:  19#.check  ( # -- # )  13  #.check  ;
:  20#.check  ( # -- # )  14  #.check  ;
:  21#.check  ( # -- # )  15  #.check  ;
:  22#.check  ( # -- # )  16  #.check  ;
:  23#.check  ( # -- # )  17  #.check  ;
:  24#.check  ( # -- # )  18  #.check  ;
:  25#.check  ( # -- # )  19  #.check  ;
:  26#.check  ( # -- # )  1a  #.check  ;
:  27#.check  ( # -- # )  1b  #.check  ;
:  28#.check  ( # -- # )  1c  #.check  ;
:  29#.check  ( # -- # )  1d  #.check  ;
:  30#.check  ( # -- # )  1e  #.check  ;
:  31#.check  ( # -- # )  1f  #.check  ;
:  32#.check  ( # -- # )  20  #.check  ;

:     8a.CHECK  ( D ... D )  dup  0   0FF     BETWEEN   NOT   ABORT"  a RANGE IS NOT  0 ~ FF "       ;
:     8b.CHECK  ( D ... D )  dup  0   0FF     BETWEEN   NOT   ABORT"  b RANGE IS NOT  0 ~ FF "       ;

:    16a.CHECK  ( # ... # )  dup  0  0FFFF    BETWEEN   NOT   ABORT"  a RANGE IS NOT  0 ~ FFFF "     ;
:    24a.CHECK  ( # ... # )  dup  0  0FFFFFF  BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFFFFF "   ;
: 3A5C8A.CHECK^ ( a ... a )  dup  0  0FFFF    BETWEEN   NOT   ABORT"  # RANGE IS NOT  0 ~ FFFF "
                             dup  f800 and    here'  f800  and  <> abort"  **** ajmp not within the same 2k range ****" ;

:     4d.CHECK  ( R ... R )  dup  0  0f       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ F "        ;
:     4s.CHECK  ( R ... R )  dup  0  0f       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ F "        ;
:     2s.CHECK  ( R ... R )  dup  0   3       BETWEEN   NOT   ABORT"  R RANGE IS NOT  0 ~ 3 "        ;

variable magic.number      12345678 magic.number !
variable Rd=Rn?

:  check.Rd=Rn  ( op.code -- op.code f )  dup>r  r@   f00 and  r>  f0000 and   8 rshift  =  dup  Rd=Rn?  !  ;
:  if.Rd<>Rn.then.forget   ( op.code -- op.code / 12345678 )   check.Rd=Rn  if  exit  then  drop magic.number  @ ;

:  11~8=15?   ( code -- code -1 / code 0 )   dup  0b  8  ?~?.mask  and  f00  =  ;
\ ***************************************************************************************
: `5c#5cs4=c3#4r8#          dup 32@^  check.Rd=Rn  if  ,s=1.ok??   FBE08000 and  exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
: `5c#5cs4rc3#4r8#          dup 32@^   11~8=15?  if  drop  12345678  exit then  ,s=1.ok??   FBE08000 and   ; ( a' -- a' op.code )

:  `8.op.code       ( a' op.code.mask -- a' op.code )  >r   dup   8@'  r>  and  ;
: `16.op.code       ( a' op.code.mask -- a' op.code )  >r   dup  16@'  r>  and  ;
:  `8     `8.op.code       ( a' op.code.mask -- a' op.code )  ;
:  `16   `16.op.code       ( a' op.code.mask -- a' op.code )  ;

: `10c3r3r          ffc0  `16  ;
: `7c3#3r3r         fe00  `16  ;
: `8c2h3r3r         ff00  `16  ;
: `5c5#3r3r         f800  `16  ;
: `9cr7#*4          ff80  `16  ;
: `5c3r8#*4         f800  `16  ;

: `5c3r8#*4+.(pc+#) f800  `16  ;
: `5c3r8#*4=pc+#*4  f800  `16  ;

: `5c3r8c*4         f800  `16  ;
: `5c3r8c           f8ff  `16  ;
: `5c3r8#           f800  `16  ;
: `9ch3r3c          ff87  `16  ;
: `9c4r3#           ff80  `16  ;
: `9c4r3r           ff80  `16  ;
: `10c3r3c          ffe7  `16  ;
: `7c3r3r3r         fe00  `16  ;
: `16c              ffff  `16  ;

:  32@^   32@'   0~15<->16~31  ;
: `32.op.code                      ( a' op.code.mask -- a' op.code )  >r  dup 32@^  ( ,s=1.ok?? )  r>  and  ;  ( a' -- a' op.code )
: `32.op.code+,s=1.ok??            ( a' op.code.mask -- a' op.code )  >r  dup 32@^    ,s=1.ok??    r>  and  ;  ( a' -- a' op.code )
: `32.op.code+,s=1.ok??+,p|w.ok??  ( a' op.code.mask -- a' op.code )  >r  dup 32@^    ,s=1.ok??    r>  and  ;  ( a' -- a' op.code )

: `32       `32.op.code  ;                    \  '  `32.op.code  alias  `32
: `32s      `32.op.code+,s=1.ok??   ;
: `32spw    `32.op.code+,s=1.ok??+,p|w.ok??  ;

: `11cs4r4#4r4#4r        ffe00000  `32s  ;  ( a' -- a' op.code )
: `11cs8c4r4c4r          ffeff0f0  `32s  ;  ( a' -- a' op.code )
: `5c#6c4#c3#4r8#        fbf08000  `32   ;  ( a' -- a' op.code )
: `5c#6c4rc3#4c8#        fbf08f00  `32   ;  ( a' -- a' op.code )
: `5c#6c4rc3#4r8#        fbf08000  `32   ;  ( a' -- a' op.code )
: `17c3#4r2#c5m          ffff8020  `32   ;  ( a' -- a' op.code )
: `12c4rc3#4r2#c5m       fff08020  `32   ;  ( a' -- a' op.code )
: `5cs10#2cjcj11#        f800d000  `32s  ;  ( a' -- a' op.code )
: `12c4r4r4r4c4r         fff000f0  `32   ;  ( a' -- a' op.code )
: `12c4r4c4r4c4r         fff0f0f0  `32   ;  ( a' -- a' op.code )
: `12c4=4c4r4c4r         fff0f0f0  `32   ;  ( a' -- a' op.code )

: `11cs4r4c4r4c4r        ffe0f0f0  `32   ;  ( a' -- a' op.code )
: `12c4r4r12#            fff00000  `32   ;  ( a' -- a' op.code )

: `12cpc4r12#            ffff0000  `32   ;  ( a' -- a' op.code )  \ Rn=pc

: `12c4r4r4c8#           fff00f00  `32   ;  ( a' -- a' op.code )
: `12c4r4r4c8#'          fff00f00  `32   ;  ( a' -- a' op.code )
: `12c4r4c12#            fff0f000  `32   ;  ( a' -- a' op.code )
\ `12c4r4r8#             fff00000  `32   ;  ( a' -- a' op.code )
: `12c4r8c8#             fff0ff00  `32   ;  ( a' -- a' op.code )
: `12c4r4r4r8#           fff00000  `32   ;  ( a' -- a' op.code )
: `12c4r10c2s4r          fff0ffc0  `32   ;  ( a' -- a' op.code )
: `12c4#16c              fff0ffff  `32   ;  ( a' -- a' op.code )
: `12c4r16c              fff0ffff  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#       fe500000  `32   ;  ( a' -- a' op.code )

: `7cPUcWc4r4r4r8#0      fff00000  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#1      fff00000  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#2      fff00000  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#3      fff00000  `32   ;  ( a' -- a' op.code )

: `7cPUcWc4r4r4r8#4      fff00000  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#5      fff00000  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#6      fff00000  `32   ;  ( a' -- a' op.code )
: `7cPUcWc4r4r4r8#7      fff00000  `32   ;  ( a' -- a' op.code )

: `12c4r4c4r2c2o4r       fff0f0c0  `32   ;  ( a' -- a' op.code )
: `12c4r4r6c2s4r         fff00fc0  `32   ;  ( a' -- a' op.code )
: `12c4r4r6c2s4r'        fff00fc0  `32   ;  ( a' -- a' op.code )
: `12c4r12c4r            fff0fff0  `32   ;  ( a' -- a' op.code )
: `5c#5c4rc3#4c8#        fbe10f00  `32   ;  ( a' -- a' op.code )
: `11cR8c4r8c            ffeff0ff  `32   ;  ( a' -- a' op.code )
: `11cR4r4c4m8c          ffe0f0ff  `32   ;  ( a' -- a' op.code )
: `12c4r4c4r2c2s4r       fff0f0c0  `32   ;  ( a' -- a' op.code )

: `12c4c4c4r2c2s4r       fffff0c0  `32   ;  ( a' -- a' op.code )   \ 2016.9.1  added

: `12c4rc3#4c2#ty4r      fff08f00  `32   ;  ( a' -- a' op.code )
: `12c4rc3#4r2#ty4r      fff08000  `32   ;  ( a' -- a' op.code )
\ 1111 1111 1111 0000 1000 1111 0000 0000      fff08f00
: `12c4rc3#4r2#ty4#      fff08000  `32   ;  ( a' -- a' op.code )
\ 1111 1111 1111 0000 1000 0000 0000 0000      fff08000
: `5c#6c4rc3#4r8#        f8f08000  `32   ;  ( a' -- a' op.code )
\ 1111 1011 1111 0000 1000 0000 0000 0000      f8f08000
: `28c4opt               fffffff0  `32   ;  ( a' -- a' op.code )
: `20c12#                fffff000  `32   ;  ( a' -- a' op.code )
: `24c8#                 ffffff00  `32   ;  ( a' -- a' op.code )
: `20c4r2c2o4r           fffff0c0  `32   ;  ( a' -- a' op.code )
: `10csc4rc3#4r2#c5s     ffb08020  `32s  ;  ( a' -- a' op.code )

: `32c                   ffffffff  `32   ;

:  5c#5cs4=c3#4r8#:_gene  :.mnem_ ." `5c#5cs4=c3#4r8#" #=if2 ."  0b  8  13p             1a 1a 0e 0c 7 0 34p138"    .2" mnem"  xt0 ;
:  5c#5cs4rc3#4r8#:_gene  :.mnem_ ." `5c#5cs4rc3#4r8#" #=if4 ."  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138"    .3" mnem"  xt0 ;
:  5c#5cs4rc3#4r8#:_gene  :.mnem_ ." `5c#5cs4rc3#4r8#" #=if4 ."  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138" .3" mnem"  xt0 ;

:         10c3r3c:_gene   :.mnem_ ." `10c3r3c"         #=if2 ."              2  0  13p      5  3  14p"   .2"  mnem"  xt0 ;
:         10c3r3r:_gene   :.mnem_ ." `10c3r3r"         #=if2 ."              2  0  13p      5  3  14p"   .2"  mnem"  xt0 ;
:        7c3#3r3r:_gene   :.mnem_ ." `7c3#3r3r"        #=if2 ."   2  0  12p  5  3  13p      8  6  14p"   .3"  mnem"  xt0 ;
:        7c3r3r3r:_gene   :.mnem_ ." `7c3r3r3r"        #=if2 ."   2  0  12p  5  3  13p      8  6  14p"   .3"  mnem"  xt0 ;
:        7c3r3r3r:_gene'  :.mnem_ ." `7c3r3r3r'"       #=if2 ."   5  3  12p  6  8  13p      2  0  14p"   .3"  mnem"  xt0 ;
:        8c2h3r3r:_gene   :.mnem_ ." `8c2h3r3r"        #=if2 ."              2  0  13p      5  3  14p"   .2"  mnem"  xt0 ;

\        8c2h3r3r:_gene   :.mnem_ ." `8c2h3r3r"        #=if2 ."           6 6 2 0  23p  7 7 5 3  24p"   .2"  mnem"  xt0 ;
:        8c2h3r3r:_gene   :.mnem_ ." `8c2h3r3r"        #=if2 ."           7 7 2 0  23p      6 3  14p"   .2"  mnem"  xt0 ;


:        5c5#3r3r:_gene   :.mnem_ ." `5c5#3r3r"        #=if2 ."   2  0  12p  5  3  13p     0a  6  14p"   .3"  mnem"  xt0 ;
:        5c5#3r3r:_gene'  :.mnem_ ." `5c5#3r3r"        #=if2 ."   5  3  12p 0a  6  13p      2  0  14p"   .3"  mnem"  xt0 ;
:       5c5#3r3r:_gene*4  :.mnem_ ." `5c5#3r3r*4"      #=if2 ."   2  0  12p  5  3  13p     0a  6  14p*4" .3"  mnem"  xt0 ;
:       5c5#3r3r:_gene*4' :.mnem_ ." `5c5#3r3r*4"      #=if2 ."   5  3  12p 0a  6  13p*4    2  0  14p"   .3"  mnem"  xt0 ;
:         9cr7#*4:_gene   :.mnem_ ." `9cr7#*4"         #=if2 ."                             5  3  14p"   .2"  mnem"  xt0 ;
:        5c3r8#*4:_gene   :.mnem_ ." `5c3r8#*4"        #=if2 ."             0a  8  13p      7  0  14p*4" .2"  mnem"  xt0 ;

\  2019.7.25
:        5c3r8#*4:_gene'  :.mnem_ ." `5c3r8#*4"        #=if2 ."             7   0  13p*4   0a  8  14p"   .2"  mnem"  2xt0 ;
\        5c3r8#*4:_gene'  :.mnem_ ." `5c3r8#*4'"       #=if2 ."             0a  8  13p*4    7  0  14p"   .2"  mnem"  2xt0 ;
\  2019.7.24

: 5c3r8#*4+.(pc+#):_gene  :.mnem_ ." `5c3r8#*4+.(pc+#)" #=if2 ."            0a  8  13p      7  0  14p*4+.(pc+#)" .2"  mnem"  xt0 ;
: 5c3r8#*4=pc+#*4:_gene   :.mnem_ ." `5c3r8#*4=pc+#*4" #=if2 ."             0a  8  13p      7  0  14p*4=pc+#"    .2"  mnem"  xt0 ;

:        5c3r8c*4:_gene   :.mnem_ ." `5c3r8c*4"        #=if2 ."                            0a  8  14p"   .1"  mnem"  xt0 ;
:          5c3r8#:_gene   :.mnem_ ." `5c3r8#"          #=if2 ."             0a  8  13p      7  0  14p"   .2"  mnem"  xt0 ;
:          5c3r8#:_gene'  :.mnem_ ." `5c3r8#"          #=if2 ."              7  0  13p     0a  8  14p"   .2"  mnem"  xt0 ;
\         9ch3r3c:_gene   :.mnem_ ." `9ch3r3c"         #=if2 ."                             5  3  14p"   .1"  mnem"  xt0 ;

:         9ch3r3c:_gene   :.mnem_ ." `9ch3r3c"         #=if2 ."                             6  3  14p"   .1"  mnem"  xt0 ;

\  5c#5cs5c3#4r8#:_gene   :.mnem_ ." `5c#5cs5c3#4r8#"  #=if4 ."  0a  8  13p       1a 1a 0e 0c 7 0 14p"   .2"  mnem"  xt0 ;
:  5c#5cs5c3#4r8#:*4_gene :.mnem_ ." `5c#5cs5c3#4r8#"  #=if4 ."  0a  8  13p       1a 1a 0e 0c 7 0 14p"   .2"  mnem"  xt0 ;
:  5c#5cs5c3#4r8#:_gene   :.mnem_ ." `5c#5cs5c3#4r8#"  #=if4 ."  0a  8  13p       1a 1a 0e 0c 7 0 14p"   .2"  mnem"  xt0 ;

: 10c3r3r:   ( Rd Rm op.code -- )     \  cccccccccc   Rn   Rd    \  Rd=Rn+#
  create  dup  ,   10c3r3r:_gene      \  cccccccccc   rrr  rrr
  does>   @  swap  3r.check ( Rm ) 8 *  +
             swap  3r.check ( Rd )      +   16,'  all.ok?.off  ;

: 7c3#3r3r:  ( Rd Rn # op.code -- )   \  ccccccc  ###  Rn   Rd    \  Rd=Rn+#
  create  dup  ,   7c3#3r3r:_gene     \  ccccccc  ###  rrr  rrr
  does>   @  swap  3#.check ( 3# ) 40 *  +
             swap  3r.check ( Rn )  8 *  +
             swap  3r.check ( Rd )       +  16,'  all.ok?.off  ;

: 7c3r3r3r:  ( Rd Rn Rm op.code -- )  \  ccccccc  Rm   Rn   Rd    \  Rd=Rn+Rm
  create  dup  ,   7c3r3r3r:_gene     \  ccccccc  rrr  rrr  rrr
  does>   @  swap  3r.check ( Rm ) 40 *  +
             swap  3r.check ( Rn )  8 *  +
             swap  3r.check ( Rd )       +  16,'  all.ok?.off  ;

: 7c3r3r3r:' ( Rd Rn Rm op.code -- )  \  ccccccc  Rm   Rn   Rd    \  Rd=Rn+Rm
  create  dup  ,   7c3r3r3r:_gene     \  ccccccc  rrr  rrr  rrr
  does>   @  -rot
             swap  3r.check ( Rm ) 40 *  +
             swap  3r.check ( Rn )  8 *  +
             swap  3r.check ( Rd )       +  16,'  all.ok?.off  ;


: set.H1,H2 ( Rd Rm -- n )  swap
  ( Rd )  0  7  between     swap  ( Rm )  0  7  between  and  abort"  not allowed Rd=0~7  Rm=0~7 at the same time"
  ( Rd )  0  7  between     swap  ( Rm )  0  f  between  and  if   40 ( 01.. .... )   exit  then
  ( Rd )  0  f  between     swap  ( Rm )  0  7  between  and  if   80 ( 10.. .... )   exit  then
  ( Rd )  0  f  between     swap  ( Rm )  0  f  between  and  if   c0 ( 11.. .... )   exit  then
  -1 abort"  **** either Rd or Rm isn't in the range allowed ****"   ;


: set.H1,H2    ( Rd Rm -- n )    swap  2>r
  2r@  ( Rd )  0  7  between     swap  ( Rm )  0  7  between  and  abort"  not allowed Rd=0~7  Rm=0~7 at the same time"
  2r@  ( Rd )  0  7  between     swap  ( Rm )  0  f  between  and  if   40 ( 01.. .... )  2r>  2drop  exit  then
  2r@  ( Rd )  0  f  between     swap  ( Rm )  0  7  between  and  if   80 ( 10.. .... )  2r>  2drop  exit  then
  2r@  ( Rd )  0  f  between     swap  ( Rm )  0  f  between  and  if   c0 ( 11.. .... )  2r>  2drop  exit  then
  -1 abort"  **** either Rd or Rm isn't in the range allowed ****"   ;

: 8c2h3r3r: ( Rd Rm op.code -- )    \  ccccccccH1H2   Rm   Rd    \  Rd=Rn+#
  create  dup  ,   8c2h3r3r:_gene   \  cccccccc00     rrr  rrr
  does>   @   -rot  2dup  set.H1,H2   +  ( op.code+H1,H2 )  swap ( Rm ) 8  *  +   +   16,'  all.ok?.off  ;









: 8c2h3r3r: ( Rd Rm op.code -- )    \  ccccccccH1H2   Rm   Rd    \  Rd=Rn+#
  create  dup  ,   8c2h3r3r:_gene   \  cccccccc00     rrr  rrr
  does>   @   -rot  2dup  set.H1,H2   rot  ( Rd )  7  and   +  ( op.code+H1,H2 )  swap ( Rm )  7 and  8  *  +   +   16,'  all.ok?.off  ;




















: 8#*4.check  ( # -- )  dup  4 /mod  swap  0<> abort"  **** address number should be multiple of 4 **** "
  0  ff  between  0=  abort"  **** address number should be the multiple 4 of 0 ~ ff ****"       4  /  ;





: 8{}.check  ( n -- n )  dup 0 ff between 0= abort" **** { It should be R0 ~ R7 } ****"  ;

variable  {}?
\ 13P           lit "0x3" TO (?P) ?~?> 3P ;

: #8->{}   ( n -- )  8  0  ?do  2  /mod  swap  if  ." R"   i .x   ','  emit  space   then  loop   drop  ;

: .XXXXXXXX(H){}  ( n -- )      H.MODE  @  0<>
  IF   DROP   50  ?Y  exit ( _EXIT )  then   28 ?y   ." { "  #8->{}   ." }"  {}?  off  ;

: 1P{}  <<BYTE>>  3 =
                IF      0x38
                ELSE    0x38
                THEN    ?Y   DUP  >DISASSEM.NUMBER.STACK   .XXXXXXXX(H){}  ;

: 11P{}                1  TO (?P) ?~?> 1P{}  {}?  on  ;

: `5c3r8{}  f800  `16  ;

: 5c3r8{}:_gene  :.mnem_ ." `5c3r8{}"         #=if2 ."              7  0  11p{}   0a  8  14p"   .2"  mnem"  xt0 ;

\ 5c3r8#:_gene'  :.mnem_ ." `5c3r8#"          #=if2 ."              7  0  13p     0a  8  14p"   .2"  mnem"  xt0 ;

: 5c3r8{}:  ( Rd {} op.code -- )    \  ccccc    Rd   {}        \  Rd+#
  create  dup  ,    5c3r8{}:_gene   \  ccccc    rrr  ########
  does>   @   swap  8{}.check  ( {}8 )         +
              swap   3r.check  ( Rd  ) 100  *  +  16,'
              all.ok?.off  ;


: 5c3r8#:   ( Rd # op.code -- )     \  ccccc    Rd   #8        \  Rd+#
  create  dup  ,    5c3r8#:_gene    \  ccccc    rrr  ########
  does>   @   swap  8#.check   ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'
              all.ok?.off  ;

: 5c3r8#:'  ( Rd # op.code -- )     \  ccccc    Rd   #8        \  Rd+#
  create  dup  ,    5c3r8#:_gene'   \  ccccc    rrr  ########
  does>   @   >r    swap   r>
              swap  8#.check   ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'
              all.ok?.off  ;

 
: 5c3r8#:*4  ( Rd # op.code -- )     \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8#*4:_gene  \  ccccc    rrr  ########
  does>   @   swap  8#*4.check ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;

: 5c3r8#:*4+.(pc+#)  ( Rd # op.code -- )     \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8#*4+.(pc+#):_gene  \  ccccc    rrr  ########
  does>   @   swap  8#*4.check ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;

: 5c3r8#:*4=pc+#*4  ( Rd # op.code -- )     \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8#*4=pc+#*4:_gene   \  ccccc    rrr  ########
  does>   @   swap  8#*4.check ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;

: 5c3r8#:*4' ( Rd # op.code -- )    \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8#*4:_gene  \  ccccc    rrr  ########
  does>   @   >r    swap   r>
              swap  8#*4.check ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;

: 5c3r8c:*4' ( Rd op.code -- )      \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8c*4:_gene  \  ccccc    rrr  ########
  does>   @   swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;
                                                     

: 5c3r8#*4:  ( Rd # op.code -- )    \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8#*4:_gene  \  ccccc    rrr  ########
  does>   @   swap  8#*4.check ( #8 )          +
              swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;

: 5c3r8#*4:' ( Rd # op.code -- )    \  ccccc    Rd   #8        \  Rd=pc+#
  create  dup  ,    5c3r8#*4:_gene  \  ccccc    rrr  ########
  does>   @   >r    swap   r>       \  ( Rd # a )  to (a)  8#*4.check  to (#)  3r.check  to (Rd)                             \ (a)     @
              swap  8#*4.check ( #8 )          +                        \ (Rd) 0a 8 >?~? +
              swap  3r.check   ( Rd )  100  *  +  16,'  all.ok?.off  ;  \ (#)   7 0 >?~? +  16,'  ;

: 7#*4.check  ( # -- )  dup  4 /mod  swap  0<> abort"  **** address number should be multiple of 4 **** "
  0  7f  between  0=  abort"  **** address number should be the multiple 4 of 0 ~ 7f ****"       4  /  ;

: 9c7#*4:  ( Rd # op.code -- )      \  ccccccccc   #7           \  rp+#
  create  dup  ,    9cr7#*4:_gene   \  ccccccccc   #######
  does>   @   swap  7#*4.check ( #7 )  +  16,'  all.ok?.off  ;

: 5c5#3r3r:  ( Rd Rn # op.code -- ) \  ccccccc  ###  Rn   Rd    \  Rd=Rn+#
  create  dup  ,   5c5#3r3r:_gene   \  ccccccc  ###  rrr  rrr
  does>   @  swap  5#.check ( 3# ) 40 *  +
             swap  3r.check ( Rn )  8 *  +
             swap  3r.check ( Rd )       +  16,'  all.ok?.off  ;
 
: 5c5#3r3r:' ( Rn # Rt op.code -- ) \  ccccccc  ###  Rn   Rd    \  (Rn+#)=Rt
  create  dup  ,   5c5#3r3r:_gene'  \  ccccccc  ###  rrr  rrr
  does>   @  >r  ( Rn # Rt )  -rot  r>
             swap  5#.check ( 3# ) 40 *  +
             swap  3r.check ( Rn )  8 *  +
             swap  3r.check ( Rt )       +  16,'  all.ok?.off  ;




: set.H2    ( Rd -- n )
  ( Rd )  0  7  between  if   40 ( 01.. .... )   exit  then
  ( Rd )  8  f  between  if   80 ( 10.. .... )   exit  then
  -1 abort"  **** Rd isn't in the range 0~f ****"   ;



: set.H2    ( Rd -- n )
  ( Rd )  0  7  between  if   00 ( 01.. .... )   exit  then
  ( Rd )  8  f  between  if   40 ( 10.. .... )   exit  then
  -1 abort"  **** Rd isn't in the range 0~f ****"   ;




: 9c1h3r3c:  \ 010001111  h  Rm  000 === 0100 0111 1hrr r000 === 4780
  create   dup  ,  9ch3r3c:_gene
  does>    @   over ( Rd )  set.H2   +   swap ( Rd )  8  *  +  16,'  all.ok?.off  ;



: 9c1h3r3c:   ( Rm )  \ 010001111  h  Rm  000 === 0100 0111 1hrr r000 === 4780
  create   dup  ,  9ch3r3c:_gene
  does>    @  ( op.code )   over ( Rd )  set.H2   +   swap ( Rm )  8  *  +  16,'  all.ok?.off  ;


\ comment:
: 9c1h3r3c: ( Rd ) \ 010001111  h  Rm  000 === 0100 0111 1hrr r000 === 4780
  create   dup  ,  9ch3r3c:_gene
  does>    to (a')  dup  set.H2   drop  to (Rd)
              (a')  @  ( op.code )
           (Rd)     6 6 5 3  >?~?+?~?   +  16,'  all.ok?.off  ;
\ comment;



: 10c3r3c: ( Rd op.code -- )  \ 0100001011  Rd  000 === 0100 0010 11rr r000 === 42c0
  create   dup  ,  10c3r3c:_gene
  does>    @    swap ( Rd )  8  *  +  16,'   all.ok?.off  ;

: 7c3r3r3r: ( Rd Rn Rm op.code -- )  \  ccccccc  Rm   Rn   Rd    \  Rd=Rn+Rm
  create  dup  ,   7c3r3r3r:_gene    \  ccccccc  rrr  rrr  rrr
  does>   @  swap  3r.check ( Rm ) 40 *  +
             swap  3r.check ( Rn )  8 *  +
             swap  3r.check ( Rd )       +  16,'   all.ok?.off  ;

\ Thumb2
\ ------------------------------------------------------------------------------
comment:
variable  <Rd>    variable  <Rt>    \  Rt === Rd  in str
variable  <Rm>
variable  <Rn>
variable  (s)
variable  <#>
variable  <16#>
variable  (i)
variable  <shift>
comment;

\ referring to section 4.2  Immediate constant
: @4,15~08    ( 32.bit.op.code -- n )  ff00  and   8 rshift ;  \   100 /
: @4,7~0      ( 32.bit.op.code -- n )    ff  and            ;
: @4,14~12    ( 32.bit.op.code -- n )  7000  and   1000  /  ;  \  1000 /  can be replaced by 0c ( 12 ) rshift

:   .deal.#12 ( -- )  (  nn ?y )  ."  deal.#12"  ;

\ ===3rd=== ===2nd=== ===1st=== ===0th===  byte order for 4,7~0,4
\                                                         *               4 byte number
\                                                           **            bit 07
\                                                              **         bit 00
\         deal.#12                                                        *       position 4
\ ------------------------------------------------------------------------------
\ 3322 2222 2222 1111 1111 1100 0000 0000
\ 1098 7654 3210 9876 5432 1098 7654 3210
\ 1111 0i01 010s =Rn= 0### =Rd= #########
\ 1111 1011 1110 0000 0000 0000 0000 0000  mask === fbe00000
\ --------- --------- --------- ---------
\  addr+1    addr+0    addr+3    addr+2    ===  instruction byte order in memory
\     f1        40       00        00      ===  f1400000
\     56        78       12        34      ===  12345678
\    4    3    2    1    8    7    6    5  ===  43218765  --->  87654321
\     43        21       87        65      ===  87654321
\     11        00       33        22      ===  11003322  --->  33221100

:   r.check  ( r n -- r ) >r dup 1 r> lshift 1- dup>r u> if  ."  R range is not within 0 ~ " r> . abort then r>drop ;
:   #.check  ( # n -- # ) >r dup 1 r> lshift 1- dup>r u> if  ."  # range is not within 0 ~ " r> . abort then r>drop ;
:  4r.check  ( r ---- r )  4        r.check  ;
: 11#.check  ( r ---- r ) 0b ( 11 ) #.check  ;

: 32@~   32@^  ;

variable       last.instruction.addr

: set'   ( string  n mask  xxx.ok? -- )    @
  if     last.instruction.addr @  dup>r  32@^  and  or  0~15<->16~31   r>  32!'  2drop  exit
  then   2drop   cr  ."  **** "   type   ."  is not allowed in this instruction ****"  key  drop  ;

: s=1    s"  s=1"  00100000  ffefffff    s=1.ok?   set'  ;
: w=1    s"  w=1"  00200000  ffefffff    w=1.ok?   set'  ;

\ 1110 1011 010s =Rn= 0### =Rd= ##ty =Rm=
: lsl    s"  lsl"  00000000  ffefffff    lsl.ok?   set'  ;   \ ty=00  0
: lsr    s"  lsr"  00000010  ffefffff    lsr.ok?   set'  ;   \ ty=01  1
: asr    s"  asr"  00000020  ffefffff    asr.ok?   set'  ;   \ ty=10  2
: rrx    s"  rrx"  00000030  ffefffff    rrx.ok?   set'  ;   \ ty=11  3

variable  Thumb2.version

: 00xy00xy.type ( n -- f )  dup>r  10 rshift  dup  r@ ffff and  =  swap  r>   ff and ( 00xy ) =  ;
: xy00xy00.type ( n -- f )  dup>r  10 rshift  dup  r@ ffff and  =  swap  r> ff00 and ( xy00 ) =  ;
: xyxyxyxy.type ( n -- f )  dup>r  10 rshift  dup  r@ ffff and  =  swap  r@ ffff and ( xyxy ) =  r> ffff and 100 /mod = and ;

: 00xy00xy.type ( # -- f )  dup>r  10 rshift  dup  r@ ffff and  =  swap  r> 00ff and ( 00xy ) =  and  ;
: xy00xy00.type ( # -- f )  dup>r  10 rshift  dup  r@ ffff and  =  swap  r> ff00 and ( xy00 ) =  and  ;
: xyxyxyxy.type ( # -- f )  dup>r  10 rshift  dup  r@ ffff and  =  swap  r@ ffff and ( xyxy ) =  and  r> ffff and 100 /mod = and ;

: n->valid.ThumbExpand.#12 ( # -- n i -1 / 0 ) dup  0  ff between  if  drop  0  exit  then  \ # = 100 ~ ffff,ffff
  18     0
  do     dup  80000000  and
         if   dup  dup  ff000000  and  =
              if    18  rshift    7f and   i 8 + 7 lshift ( i*80 )  +   -1
              else      drop   0
              then      leave
         then   2*
  loop   ;             \ 1200,0000 ---> 90 ( bit7=1 )  ---> 10 ( bit7=0 ) -->     10
                       \ i=3h=11, i 7 lshift ( i*80 )  ---> 1.1000.0000   -->   + 180     10+180=190h

: other.ThumbExpand.#12->n  ( # -- 400~ffff,ffff -1 / 0 )   \ # = 400~fff
  dup   400   fff   between
  if    >r    r@    7f   and   80  or   ( n )
        r>    80    /  ( shift )   20  swap  -  lshift   -1  exit
  then  drop  0  ;

' other.ThumbExpand.#12->n  is  _other.ThumbExpand.#12->n

: n->ThumbExpand.#12 ( n -- imm12 )   >r
  r@   n->valid.ThumbExpand.#12   if  r>drop                                               exit  then
  r@   0  ff  within              if  r>                                                   exit  then
  r@   00xy00xy.type              if  r>  00ff and              100 ( b11~b8: 0001 )  +    exit  then
  r@   xy00xy00.type              if  r>  ff00 and    8 rshift  200 ( b11~b8: 0010 )  +    exit  then
  r@   xyxyxyxy.type              if  r>  00ff and              300 ( b11~b8: 0011 )  +    exit  then
\ r@   n->valid.ThumbExpand.#12   if  r>drop                                               exit  then
  r>drop   -1 abort"  **** illeagle number ****" ;

: n->ThumbExpand.#12 ( n -- imm12 )   >r
  r@   n->valid.ThumbExpand.#12   if  r>drop                                               exit  then
  r@   0  3ff   between           if  r>                                                   exit  then
  r@   00xy00xy.type              if  r>  00ff and              100 ( b11~b8: 0001 )  +    exit  then
  r@   xy00xy00.type              if  r>  ff00 and    8 rshift  200 ( b11~b8: 0010 )  +    exit  then
  r@   xyxyxyxy.type              if  r>  00ff and              300 ( b11~b8: 0011 )  +    exit  then
\ r@   n->valid.ThumbExpand.#12   if  r>drop                                               exit  then
  r>drop   -1 abort"  **** illeagle number ****" ;

\ : n->ThumbExpand.#12 ( n -- imm12 )   ThumbExpand.#12  ;

: ThumbExpand.#12->n  ( # -- 0~ffff,ffff -1 / 0 )
  dup     0    ff  between  if                                                  -1  exit  then
  dup   100   1ff  between  if   00ff and  dup  10 lshift  +                    -1  exit  then   \  00xy00xy
  dup   200   2ff  between  if   00ff and  dup  10 lshift  +        8 lshift    -1  exit  then   \  xy00xy00
  dup   300   3ff  between  if   00ff and  dup   8 lshift  +  dup  10 lshift +  -1  exit  then   \  xyxyxyxy
  other.ThumbExpand.#12->n  ;

\    4,5c#6c4rc3#4c8#>12#
\    0000 0#00 0000 0000 0### 0000 #### ####
\                             #### #### ####
\          #----------------->#                   i
\                         ###->###               3#
\                                  #### ####     8#
:  5c#6c4rc3#4c8#>12#   ( op.code -- 12# )  >r
   r@  04000000  and   0f   rshift
   r@  00007000  and    4   rshift    +
   r>        ff  and (  0   rshift )  +   ;

\ variable  original.mnemonic?
\ : om  ( -- )   original.mnemonic?  @   dup   if   off  exit  then  on  ;
\ ******************************************************************************
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.1   ADC(immediate) T1     ThumbExpandImm(i:imm3:imm8)

\ Add with Carry (immediate) adds an immediate value and the carry flag value to a register value, and writes
\ the result to the destination register. It can optionally update the condition flags based on the result.
\ T1 ADC{S}<c> <Rd>,<Rn>,#<const>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 i 0 1 0 1 0 s ===Rn== 0 imm3 ===Rd=== =====imm8======    -->  5c#5cs4rc3#4r8#
\
\ d = UInt(Rd); n = UInt(Rn); setflags = (s == '1');
\ imm32 = ThumbExpandImm(i:imm3:imm8);
\ if BadReg(d) || BadReg(n) then UNPREDICTABLE;
\ Architecture
\ ------------------------------------------------------------------------------
\ 33222222222222221111110000000000
\ 10987654321098765432109876543210
\
\ 111111          111111
\ 54321098765432105432109876543210
\
\ 11110i01010s=Rn=0imm=Rd==imm8===
\ ccccc#cccccsrrrrc###rrrr########      -->  5c#5cs4rc3#4r8#
\ ------------------------------------------------------------------------------
\ 31302828272625242322212019181716
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 1|0 # 0 1|0 1 0 s|==Rn===|0 # # #|==Rd===|# # # #|# # # #|     5c#5cs4rc3#4r8#
\ |1 1 1 1|0 * 0 1|0 1 0 *|* * * *|0 * * *|* * * *|* * * *|* * * *|  op.code = F1400000
\ |1 1 1 1|1 * 1 1|1 1 1 *|* * * *|1 * * *|* * * *|* * * *|* * * *|     mask = FBE08000
\

:  5c#5cs4=c3#4r8#:
   create  dup  ,  5c#5cs4=c3#4r8#:_gene
   does>   >r   ( Rd # --- )      n->ThumbExpand.#12  12#.check <#> !   4r.check  dup <Rn> !   <Rd> !
      r>  @                                          \ op.code
     <Rn> @ 10000 *  +                               \ op.code+Rn       <Rn> >4,19~16
     <Rd> @   100 *  +                               \ op.code+Rn+Rd    <Rd> >4,11~8
     <#>  @   800  /mod  >r  100  /mod ( 8# 3# ) 1000 *  + ( # )  r>  04000000 *  +  + \ <#> >4,26~26+14~12+7~0
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr !         all.ok?.off    s=1.ok?  on  ;
\    0~15<->16~31          here'        last.instruction.addr !   32,'  all.ok?.off    s=1.ok?  on  ;

comment:
:  gn#'    gn#  ." = if ("  ;
:  #=if    gn#  ." = if ("  ;
:  #=if2   gn#  ." = if (2"  ;
:  #=if4   gn#  ." = if (4"  ;
comment;

\ :  #=if4     BL WORD COUNT TYPE 1D ?Y .8#  ."  = if (4 "    4  <<byte>>  !  ;

variable  current.1c2r3#







comment:
original.mnemonic? on      f1400000   5c#5cs4=c3#4r8#:   adc_R,#
                           f1500000   5c#5cs4=c3#4r8#:   adcs_R,#,s
original.mnemonic? off     f1400000   5c#5cs4=c3#4r8#:   R+#+c
                           f1500000   5c#5cs4=c3#4r8#:   R+#+c,s
comment;

\ ******************************************************************************
\ 4.6.1 ADC (immediate)
: `5c#5cc4rc3#4r8#          dup 32@^   11~8=15?  if  drop  12345678  exit then  ,s=1.ok??   FBf08000 and   ; ( a' -- a' op.code )
:  5c#5cc4rc3#4r8#:_gene  :.mnem_ ." `5c#5cc4rc3#4r8#" #=if4 ."  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138" .3" mnem"  xt0 ;
:  5c#5cc4rc3#4r8#:
   create  dup  ,  5c#5cc4rc3#4r8#:_gene
   does>   >r   ( Rd Rn # --- )   n->ThumbExpand.#12  12#.check <#> !   4r.check <Rn> !   4r.check <Rd> !
      r>  @                                          \ op.code
     <Rn> @ 10000 *  +                               \ op.code+Rn
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
\    <#>  @   100  /mod ( 8# 3# ) 1000 *  + ( # ) +  \ op.code+Rn+Rd+#
\    <#>  @   800  /mod  ( i imm3+imm8 )  100  /mod ( 8# 3# ) 1000 *  + ( # )  swap  04000000 *  +  + \ op.code+Rn+Rd+#
     <#>  @   800  /mod  >r  100  /mod ( 8# 3# ) 1000 *  + ( # )  r>  04000000 *  +  + \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr !   all.ok?.off    s=1.ok?  on  ;


: `5c#5cc4rc3#4r8#'''        dup 32@^   11~8=15?  if  drop  12345678  exit then  ,s=1.ok??   FBf08000 and   ; ( a' -- a' op.code )
:  5c#5cc4rc3#4r8#:_gene'''  :.mnem_ ." `5c#5cc4rc3#4r8#'''" #=if4 ."  0b  8  12p 1a 1a 0e 0c 7 0 33p 13 10 14p " .3" mnem"  xt0 ;
:  5c#5cc4rc3#4r8#:'''
   create  dup  ,  5c#5cc4rc3#4r8#:_gene'''
   does>   >r   ( Rd # Rn --- )  4r.check <Rn> !  n->ThumbExpand.#12  12#.check <#> !     4r.check <Rd> !
      r>  @                                          \ op.code
     <Rn> @ 10000 *  +                               \ op.code+Rn
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
\    <#>  @   100  /mod ( 8# 3# ) 1000 *  + ( # ) +  \ op.code+Rn+Rd+#
\    <#>  @   800  /mod  ( i imm3+imm8 )  100  /mod ( 8# 3# ) 1000 *  + ( # )  swap  04000000 *  +  + \ op.code+Rn+Rd+#
     <#>  @   800  /mod  >r  100  /mod ( 8# 3# ) 1000 *  + ( # )  r>  04000000 *  +  + \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr !   all.ok?.off    s=1.ok?  on  ;




\ : `5c#5cs4rc3#4r8#          dup 32@^   11~8=15?  if  drop  12345678  exit then  ,s=1.ok??   FBE08000 and   ; ( a' -- a' op.code )
\ :  5c#5cs4rc3#4r8#:_gene  :.mnem_ ." `5c#5cs4rc3#4r8#" #=if4 ."  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138" .3" mnem"  xt0 ;
:  5c#5cs4rc3#4r8#:
   create  dup  ,  5c#5cs4rc3#4r8#:_gene
   does>   >r   ( Rd Rn # --- )   n->ThumbExpand.#12  12#.check <#> !   4r.check <Rn> !   4r.check <Rd> !
      r>  @                                          \ op.code
     <Rn> @ 10000 *  +                               \ op.code+Rn
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
\    <#>  @   100  /mod ( 8# 3# ) 1000 *  + ( # ) +  \ op.code+Rn+Rd+#
\    <#>  @   800  /mod  ( i imm3+imm8 )  100  /mod ( 8# 3# ) 1000 *  + ( # )  swap  04000000 *  +  + \ op.code+Rn+Rd+#
     <#>  @   800  /mod  >r  100  /mod ( 8# 3# ) 1000 *  + ( # )  r>  04000000 *  +  + \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr !   all.ok?.off    s=1.ok?  on  ;



original.mnemonic? on    f1400000   5c#5cs4rc3#4r8#:   adc_R,R,#
                         f1500000   5c#5cc4rc3#4r8#:   adcs_R,R,#
original.mnemonic? off   f1400000   5c#5cs4rc3#4r8#:   R=R+#+c
                         f1500000   5c#5cc4rc3#4r8#:   R=R+#+c,s

:  R+#+c      >r  dup  r>   R=R+#+c    ;
:  R+#+c,s    >r  dup  r>   R=R+#+c,s  ;
\ ******************************************************************************
\ 4.6.2   ADC(register)  T1         ????????????????????

\ T1      ADCS   <Rdn>,<Rm> Outside IT block.
\         ADC<c> <Rdn>,<Rm> Inside IT block.
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\ |0 0 0 1|1 0 0 =Rm== =Rn== =Rd==|      1800  fe00  7c3r3r3r
\ d = UInt(Rdn); n = UInt(Rdn); m = UInt(Rm); setflags = !InITBlock();
\ (shift_t, shift_n) = (SRType_None, 0);

original.mnemonic?  on         4140  10c3r3r:  adc_R,R
\                              4140  10c3r3r:  adcs_R,R
original.mnemonic?  off        4140  10c3r3r:  R+R+c
\                              4140  10c3r3r:  R+R+c,s
\     1    2  R+R+c
\  1  2  345  R=R+#+c
\ : R=R+#+c  ( Rd Rn # -- )   -rot  2dup  =  if  drop  swap  R+#+c  else  R=R+#+c~  then  ;
\ ------------------------------------------------------------------------------
\ 4.6.2   ADC(register)  T2     T1 ??????????
\
\  T2     ADC{S}<c>.W <Rd>,<Rn>,<Rm>{,<shift>}
\         d = UInt(Rd); n = UInt(Rn); m = UInt(Rm); setflags = (S == '1');
\         (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\         if BadReg(d) || BadReg(n) || BadReg(m) THEN UNPREDICTABLE;

\ 4R=4R+4R+C<<#_ `11cs4rc3#4r2#ty4r EB400000 = if (2 0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p138 1" 4R=4R+4R+C<<#" 2x then 0 ;

\ `5c#5cs4=c3#4r8#           dup 32@^  check.Rd=Rn  if  ,s=1.ok??   FBE08000 and  exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
: `11cc4=c3#4r2#ty4r         dup 32@^  check.Rd=Rn  if  ,s=1.ok??   FFf08000 and  exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
:  11cc4=c3#4r2#ty4r:_gene   :.mnem_  ." `11cc4=c3#4r2#ty4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4=c3#4r2#ty4r:
   create  dup   ,    11cc4=c3#4r2#ty4r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check dup <Rn> !  <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;


\ original.mnemonic?  on     eb400000  11cc4=c3#4r2#ty4r:  adcs_R,R
\ original.mnemonic?  off    eb400000  11cc4=c3#4r2#ty4r:  R+R+c,s

: `11cs4=c3#4r2#ty4r         dup 32@^  check.Rd=Rn  if  ,s=1.ok??   FFE08000 and  exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
:  11cs4=c3#4r2#ty4r:_gene   :.mnem_  ." `11cs4=c3#4r2#ty4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cs4=c3#4r2#ty4r:
   create  dup   ,    11cs4=c3#4r2#ty4r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check dup <Rn> !  <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

\ original.mnemonic?  on     eb400000  11cs4=c3#4r2#ty4r:  adc_R,R
\ original.mnemonic?  off    eb400000  11cs4=c3#4r2#ty4r:  R+R+c

: `11cs4rc3#4r2#ty4r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFE08000 and  ;  ( a' -- a' op.code )
:  11cs4rc3#4r2#ty4r:_gene   :.mnem_  ." `11cs4rc3#4r2#ty4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cs4rc3#4r2#ty4r:
   create  dup   ,    11cs4rc3#4r2#ty4r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;








: `11cc4rc3#4r2#ty4r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08000  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#ty4r:_gene   :.mnem_  ." `11cc4rc3#4r2#ty4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#ty4r:
   create  dup   ,    11cc4rc3#4r2#ty4r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;






: `11cc4rc3#4r2#004r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#004r:_gene   :.mnem_  ." `11cc4rc3#4r2#004r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#004r:
   create  dup   ,    11cc4rc3#4r2#004r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4rc3#4r2#014r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#014r:_gene   :.mnem_  ." `11cc4rc3#4r2#014r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#014r:
   create  dup   ,    11cc4rc3#4r2#014r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4rc3#4r2#104r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#104r:_gene   :.mnem_  ." `11cc4rc3#4r2#104r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#104r:
   create  dup   ,    11cc4rc3#4r2#104r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4rc3#4r2#114r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#114r:_gene   :.mnem_  ." `11cc4rc3#4r2#114r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#114r:
   create  dup   ,    11cc4rc3#4r2#114r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;






















:  4r.check(Rd<>15)   dup  0f = abort" Rd shouldn't be 15 ( pc or 0F )"  4r.check  ;

: `11cc4rc3#4r2#004r(Rd<>15)   dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#004r(Rd<>15):_gene   :.mnem_  ." `11cc4rc3#4r2#004r(Rd<>15)" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#004r(Rd<>15):
   create  dup   ,    11cc4rc3#4r2#004r(Rd<>15):_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4rc3#4r2#014r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#014r:_gene   :.mnem_  ." `11cc4rc3#4r2#014r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#014r:
   create  dup   ,    11cc4rc3#4r2#014r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4rc3#4r2#104r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#104r:_gene   :.mnem_  ." `11cc4rc3#4r2#104r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#104r:
   create  dup   ,    11cc4rc3#4r2#104r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4rc3#4r2#114r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4rc3#4r2#114r:_gene   :.mnem_  ." `11cc4rc3#4r2#114r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4rc3#4r2#114r:
   create  dup   ,    11cc4rc3#4r2#114r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;
























\ -------------------------------------------------------------------------
original.mnemonic?  on       eb400000  11cc4rc3#4r2#004r:  adc_R,R,R,lsl,#
original.mnemonic?  on       eb400010  11cc4rc3#4r2#014r:  adc_R,R,R,lsr,#
original.mnemonic?  on       eb400020  11cc4rc3#4r2#104r:  adc_R,R,R,asr,#
original.mnemonic?  on       eb400030  11cc4rc3#4r2#114r:  adc_R,R,R,ror,#

original.mnemonic?  off      eb400000  11cc4rc3#4r2#004r:  R=R+R+c<<#
original.mnemonic?  off      eb400010  11cc4rc3#4r2#014r:  R=R+R+c>>#
original.mnemonic?  off      eb400020  11cc4rc3#4r2#104r:  R=R+R+c,a>>#
original.mnemonic?  off      eb400030  11cc4rc3#4r2#114r:  R=R+R+c>>>#

original.mnemonic?  on       eb500000  11cc4rc3#4r2#004r:  adcs_R,R,R,lsl,#
original.mnemonic?  on       eb500010  11cc4rc3#4r2#014r:  adcs_R,R,R,lsr,#
original.mnemonic?  on       eb500020  11cc4rc3#4r2#104r:  adcs_R,R,R,asr,#
original.mnemonic?  on       eb500030  11cc4rc3#4r2#114r:  adcs_R,R,R,ror,#

original.mnemonic?  off      eb500000  11cc4rc3#4r2#004r:  R=R+R+c<<#,s
original.mnemonic?  off      eb500010  11cc4rc3#4r2#014r:  R=R+R+c>>#,s
original.mnemonic?  off      eb500020  11cc4rc3#4r2#104r:  R=R+R+c,a>>#,s
original.mnemonic?  off      eb500030  11cc4rc3#4r2#114r:  R=R+R+c>>>#,s

: R=R+R+c      ( r r r -- )                   0  R=R+R+c<<#     ;
: R+R+c<<#     ( r r # -- )  2>r  dup  2r>       R=R+R+c<<#     ;
: R+R+c        ( r r ---- )                   0    R+R+c<<#     ;

\  : R+R+c,s      ( r r -- )     >r  dup   r>  0    R+R+c<<#,s   ;
\ : R+R+c<<,s    ( r r -- )    2>r  dup  2r>     R=R+R+c<<#,s   ;
\ : R+R+c,s      ( r r ---- )                 0    R+R+c<<#,s   ;

: R=R+R+c,s    ( r r r -- )                   0  R=R+R+c<<#,s   ;
: R+R+c<<,s    ( r r # -- )  2>r  dup  2r>       R=R+R+c<<#,s   ;
\ : R+R+c,s      ( r r ---- )                   0    R+R+c<<#,s   ;
\ --------------------------------------------------------------------------
: R+R+c    3r3r?   if   adc_R,R   exit   then   >r   dup  r>   R=R+R+c   ;

: shift.type  ( type -- )          >r     bl word  count  string>number  0= abort"  *** invalid number *** "
       5#.check   10  /mod   10 * +  40 *                 last.instruction.addr @  32@^
       ffff8f3f ( 70c0 )  and  or  r> +    0~15<->16~31   last.instruction.addr @  32!'   ;

: <<    00  shift.type ;
: >>    10  shift.type ;
: a>>   20  shift.type ;
: >>>   30  shift.type ;
\ ------------------------------------------------------------------------------
\  T3     ADD{S}<c>.W <Rd>,<Rn>,<Rm>{,<shift>}
\ 1f 1e 1d 1c 1b 1a 19 18
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0  15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  1  1  1  0  1  0  1  1  0  1  0  s  ====Rn==== (0) ==imm3== =====Rd==== =imm2 =type =====Rm====
\ 3322 2222 2222 1111 1111 1100 0000 0000
\ 1098 7654 3210 9876 5432 1098 7654 3210
\ 1110 1011 010s =Rn= 0### =Rd= ##ty =Rm=
\ cccc cccc cccs rrrr 0### rrrr ##ty rrrr   ===   11cs4rc3#4r2#ty4r:
\ 1110 1011 0100 0000 0000 0000 0000 0000   ===   eb40 0000
\ ******************************************************************************
\ 4.6.3   ADD(immediate)  T1
\ ------------------------------------------------------------------------------
\ : 7c3#3r3r:_gene   drop  ;
\ : 7c3#3r3r:
\   create    dup  ,   7c3#3r3r:_gene
\   does>   >r   ( Rd Rm # )   3#.check   swap  3r.check  +  swap  3r.check  +  r>  +  16,'  ;
original.mnemonic?  on         1c00  7c3#3r3r:  adds_R,R,#
original.mnemonic?  on         1c00  7c3#3r3r:  adds_R,R,#3
original.mnemonic?  on         1c00  7c3#3r3r:  add_R,R,#3
                               1c00  7c3#3r3r:  add_R,R,#3,s
original.mnemonic?  off        1c00  7c3#3r3r:  R=R+#,s
original.mnemonic?  off        1c00  7c3#3r3r:  R=R+#3,s
                               1c00  7c3#3r3r:  R=R+#3
\ ------------------------------------------------------------------------------
\ 4.6.3   ADD(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on         3000    5c3r8#:  adds_R,#
original.mnemonic?  on         3000    5c3r8#:  adds_R,#8
                               3000    5c3r8#:  add_R,#8
                               3000    5c3r8#:  add_R,#8,s
original.mnemonic?  off        3000    5c3r8#:  R+#,s
original.mnemonic?  off        3000    5c3r8#:  R+#8
                               3000    5c3r8#:  R+#8,s
\ : R+#   3r8#?  if  R+#8  else  R=R+#8  then  ;
\ ------------------------------------------------------------------------------
\ 4.6.3   ADD(immediate)  T3    ThumbExpandImm(i:imm3:imm8)     0~ffffffff  xy00xy00  00xy00xy  xyxyxyxy
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f1000000   5c#5cc4rc3#4r8#:  add_R,R,#138
original.mnemonic?  on       f1100000   5c#5cc4rc3#4r8#:  adds_R,R,#138
original.mnemonic?  off      f1000000   5c#5cc4rc3#4r8#:  R=R+#138
original.mnemonic?  off      f1100000   5c#5cc4rc3#4r8#:  R=R+#138,s
\ ------------------------------------------------------------------------------
\ 4.6.3   ADD(immediate)  T4    ZeroExtend(i:imm3:imm8, 32);    0~fff  #12
\ ------------------------------------------------------------------------------
: `5c#5cc4rc3#4r8#.b14=0          dup 32@^   11~8=15?  if  drop  12345678  exit then  ,s=1.ok??   FBf08000 and   ; ( a' -- a' op.code )
:  5c#5cc4rc3#4r8#.b14=0:_gene  :.mnem_ ." `5c#5cc4rc3#4r8#.b14=0" #=if4 ."  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138" .3" mnem"  xt0 ;
:  5c#5cc4rc3#4r8#.b14=0:
   create  dup  ,  5c#5cc4rc3#4r8#.b14=0:_gene
   does>   >r   ( Rd Rn # --- )  ( n->ThumbExpand.#12 )  12#.check <#> !   4r.check <Rn> !   4r.check <Rd> !
      r>  @                                          \ op.code
     <Rn> @ 10000 *  +                               \ op.code+Rn
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
     <#>  @   800  /mod  >r  100  /mod ( 8# 3# ) 1000 *  + ( # )  r>  04000000 *  +  + \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr !   all.ok?.off    s=1.ok?  on  ;

original.mnemonic?  on       f2000000   5c#5cc4rc3#4r8#.b14=0:  addw_R,R,#12
original.mnemonic?  off      f2000000   5c#5cc4rc3#4r8#.b14=0:  R=R+#12

: R=R+#      3r3r3#? if          R=R+#3    exit  then
            4r4r12#? if          R=R+#12   exit  then
                                 R=R+#138     ;

: R=R+#,s    3r3r3#? if          R=R+#3,s  exit  then
\           4r4r12#? if          R=R+#12   exit  then    \ no s for #12
                                 R=R+#138,s   ;

: R+#,s     3r8#?    if          R+#8,s    exit  then
            >r    dup      r>    R=R+#,s   ;

: R+#       3r8#?    if          R+#8      exit  then
            >r    dup      r>    R=R+#     ;

: R+        1   R+#   ;
: R+1       1   R+#   ;
: R+2       2   R+#   ;

: R+1,s     1   R+#   ;
: R+2,s     2   R+#   ;
\ ******************************************************************************
\ 4.6.4   ADD(register)   T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         1800  7c3r3r3r:  add_R,R,R
                        \      1800  7c3r3r3r:  ADDs.R,R,R
original.mnemonic?  off        1800  7c3r3r3r:  R=R+R
                        \      1800  7c3r3r3r:  R=R+R,s
\ ------------------------------------------------------------------------------
\ 4.6.4   ADD(register)   T2
\ ------------------------------------------------------------------------------
\  DN  Rdn  == R0~Rf      DN is high bit of Rdn ( Rd=Rn  so  Rd=Rn+Rm === Rd+Rm )

: `8cDN4r3r         dup   16@'  ff00  and  ;
:  8cDN4r3r:_gene   :.mnem_ ." `8cDN4r3r"  #=if2 ."          7 7 2 0 23p      6  3  14p"  .2"  mnem"  xt0 ;
:  8cDN4r3r:
   create   dup  ,  8cDN4r3r:_gene
   does>    >r   ( Rd Rm )   4r.check  8 *  swap  4r.check  8 /mod  80 *  +    +  r>  @  +  16,'
            here'  2  -  last.instruction.addr !   all.ok?.off  ;

:  8cDN4r3r:
   create   dup  ,  8cDN4r3r:_gene
   does>    ( Rd Rm a )  to (a)    4r.check  to (Rm)    4r.check  to (Rd)
     (Rd)   7  7  2  0   >?~?+?~?
     (Rm)         6  3   >?~?      +
     (a)    @  ( op.code)          +
     16,'   here'  2  -  last.instruction.addr !   all.ok?.off  ;

original.mnemonic?  on         4400  8cDN4r3r:  add_R,R
original.mnemonic?  off        4400  8cDN4r3r:  R+R

:  R+R    2dup  =   if   dup  0d ( rp ) =  abort"  rp+rp ??? "  then  R+R  ;
\ :  R+R    3r3r?     if   >r  dup  r>  R=R+R  else  R+R  then  ;
\ ------------------------------------------------------------------------------
\ 4.6.4   ADD(register)  T3      DecodeImmShift(type, imm3:imm2)

\ T3 ADD{S}<c>.W <Rd>,<Rn>,<Rm>{,<shift>}
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 0|1 0 1 1|0 0 0 S|==Rn===|0 imm3=|==Rd===imm2type|===Rm==|    11cs4rc3#4r2#ty4r:
\ ------------------------------------------------------------------------------
original.mnemonic?  on       eb100000   11cc4rc3#4r2#ty4r:   add_R,R,R,#.lsl,s
original.mnemonic?  off      eb100000   11cc4rc3#4r2#ty4r:   R=R+R<<#,s

original.mnemonic?  on       eb000000   11cs4rc3#4r2#ty4r:   add_R,R,R,#,lsl
original.mnemonic?  off      eb000000   11cs4rc3#4r2#ty4r:   R=R+R<<#
\ -------------------------------------------------------------------------
original.mnemonic?  on       eb000000  11cc4rc3#4r2#004r:  add_R,R,R,lsl,#
original.mnemonic?  on       eb000010  11cc4rc3#4r2#014r:  add_R,R,R,lsr,#
original.mnemonic?  on       eb000020  11cc4rc3#4r2#104r:  add_R,R,R,asr,#
original.mnemonic?  on       eb000030  11cc4rc3#4r2#114r:  add_R,R,R,ror,#

original.mnemonic?  off      eb000000  11cc4rc3#4r2#004r:  R=R+R<<#
original.mnemonic?  off      eb000010  11cc4rc3#4r2#014r:  R=R+R>>#
original.mnemonic?  off      eb000020  11cc4rc3#4r2#104r:  R=R+R,a>>#
original.mnemonic?  off      eb000030  11cc4rc3#4r2#114r:  R=R+R>>>#

original.mnemonic?  on       eb100000  11cc4rc3#4r2#004r:  adds_R,R,R,lsl,#
original.mnemonic?  on       eb100010  11cc4rc3#4r2#014r:  adds_R,R,R,lsr,#
original.mnemonic?  on       eb100020  11cc4rc3#4r2#104r:  adds_R,R,R,asr,#
original.mnemonic?  on       eb100030  11cc4rc3#4r2#114r:  adds_R,R,R,ror,#

original.mnemonic?  off      eb100000  11cc4rc3#4r2#004r:  R=R+R<<#,s
original.mnemonic?  off      eb100010  11cc4rc3#4r2#014r:  R=R+R>>#,s
original.mnemonic?  off      eb100020  11cc4rc3#4r2#104r:  R=R+R,a>>#,s
original.mnemonic?  off      eb100030  11cc4rc3#4r2#114r:  R=R+R>>>#,s

: R=R+R      ( r r r -- )  3r3r3r? if  add_R,R,R   exit  then  0  R=R+R<<#  ;
: R+R<<#    ( r r # -- )  2>r  dup  2r>   R=R+R<<#     ;
: R+R        ( r r ---- )  4r4r?   if  add_R,R     exit  then  0    R+R<<#    ;

: R=R+R,s    ( r r r -- )              0   R=R+R<<#,s   ;
: R+R<<#,s  ( r r # -- )  2>r  dup  2r>   R=R+R<<#,s   ;
: R+R,s      ( r r ---- )              0     R+R<<#,s   ;
\ --------------------------------------------------------------------------
: R+R       3r3r?   if    >r   dup  r>   R=R+R   exit  then  R+R  ;
: rla.R     dup     R+R   ;
\ ******************************************************************************
\ 4.6.5   ADD(rp plus immediate)  T1
\ This instruction adds an immediate value to the rp value, and writes the result to the destination register
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 0 1 0|1 ===Rd==|=====imm8====|
\ d = UInt(Rd); setflags = FALSE; imm32 = ZeroExtend(imm8:'00', 32);
\ ------------------------------------------------------------------------------
: `5c3r8#+rp          dup   16@'  f800  and  ;
:  5c3r8#+rp:_gene    :.mnem_ ." `5c3r8#+rp"  #=if2 ."          0a  8  13p      7  0  14p"  .2"  mnem"  xt0 ;
:  5c3r8#+rp:
   create    dup  ,   5c3r8#+rp:_gene
   does>   >r  ( Rd # )   8#*4.check   swap  3r.check  +  r> @  +  16,'  here'  2  -  last.instruction.addr !   all.ok?.off   ;

original.mnemonic?  on       a800   5c3r8#:*4   add_R,rp,#
                      \ ???  a800   5c3r8#:*4   add_rp,#
original.mnemonic?  off      a800   5c3r8#:*4   R=rp+#8
                             a800   5c3r8#:*4   R=rp+#
\ ------------------------------------------------------------------------------
\ 4.6.5   ADD(rp plus immediate)  T2
\ ------------------------------------------------------------------------------
: `9c7#*4         dup   16@'       ff80  and  ;
:  9c7#*4:_gene   :.mnem_ ." `9c7#*4"  #=if2 ."                 6 0  14p*4"  .1"  mnem"  xt0 ;
:  9c7#*4:   create   dup  ,  9c7#*4:_gene    does>    >r   7#*4.check   r>  @   +   16,' here'  2  -  last.instruction.addr !   all.ok?.off  ;

: `9c7#       dup   16@'       ff80  and  ;
:  9c7#:_gene   :.mnem_ ." `9c7#"  #=if2 ."                       6 0  14p"  .1"  mnem"  xt0 ;
:  9c7#:     create   dup  ,  9c7#:_gene      does>    >r   7#.check     r>  @   +   16,' here'  2  -  last.instruction.addr !   all.ok?.off  ;

original.mnemonic?  on       b000  9c7#*4:  add_rp,#
                             b000  9c7#*4:  add_rp,#7
original.mnemonic?  off      b000  9c7#*4:  rp+#7
\ ------------------------------------------------------------------------------
\ 4.6.5   ADD(rp plus immediate)  T3     ARMv7-M

\ T3 ADD{S}<c>.W <Rd>,rp,#<const>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 1|0 i 0 1|0 0 0 S|1 1 0 1|0 =imm3 ==Rd=== =====imm8======|    f10d0000
\ d = UInt(Rd); setflags = (S == '1');
\ imm32 = ThumbExpandImm(i:imm3:imm8);
\ if d == 15 && setflags then SEE cmn (immediate) on page 4-68;
\ if d == 15 then UNPREDICTABLE;
: 12#>5c#6c4rc3#4c8#  ( 12# -- 5c#6c4rc3#4c8# )
  800 /mod ( i ) 04000000 * swap  100  /mod ( 8# 3# ) 1000 *  + ( # )  +  ;

: `5c#5cs5c3#4r8#          dup 32@^ ( check.Rd=Rn   if ) ,s=1.ok??  fbef8000  and ; \ exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
:  5c#5cs5c3#4r8#:_gene  :.mnem_ ." `5c#5cs5c3#4r8#" #=if4 ."  0b  8  13p 1a 1a 0e 0c 7 0 34p138" .2" mnem"  xt0 ;
:  5c#5cs5c3#4r8#:
   create  dup  ,  5c#5cs5c3#4r8#:_gene
   does>   >r   ( Rd # --- )      n->ThumbExpand.#12  12#.check <#> !   4r.check  <Rd> !
      r>  @                                          \ op.code
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
     <#>  @   12#>5c#6c4rc3#4c8#  +   0~15<->16~31   32,'   here'  4  -  last.instruction.addr !
     all.ok?.off    s=1.ok?  on  ;

: `5c#5cs5c3#4r8#          dup 32@^ ( check.Rd=Rn   if ) ,s=1.ok??  fbef8000  and ; \ exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
:  5c#5cs5c3#4r8#:_gene  :.mnem_ ." `5c#5cs5c3#4r8#" #=if4 ."  0b  8  13p 1a 1a 0e 0c 7 0 34p" .2" mnem"  xt0 ;

:  5c#5cs5c3#4r8#:_gene  :.mnem_ ." `5c#5cs5c3#4r8#" #=if4 ."  0b  8  13p 1a 1a 0e 0c 7 0 34p138" .2" mnem"  xt0 ;
\ ???????????????????

:  5c#5cs5c3#4r8#:
   create  dup  ,  5c#5cs5c3#4r8#:_gene
   does>   >r   ( Rd # --- )      n->ThumbExpand.#12  12#.check <#> !   4r.check  <Rd> !
      r>  @                                          \ op.code
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
     <#>  @   12#>5c#6c4rc3#4c8#  +   0~15<->16~31   32,'   here'  4  -  last.instruction.addr !
     all.ok?.off    s=1.ok?  on  ;

: `5c#5cs5c3#4r8#*4        dup 32@^ ( check.Rd=Rn   if ) ,s=1.ok??  fbef8000  and ; \ exit  then  drop  magic.number  @  ; ( a' -- a' op.code )
:  5c#5cs5c3#4r8#:*4_gene  :.mnem_ ." `5c#5cs5c3#4r8#*4" #=if4 ."  0b  8  13p 1a 1a 0e 0c 7 0 34p138" .2" mnem"  xt0 ;
:  5c#5cs5c3#4r8#:*4
   create  dup  ,  5c#5cs5c3#4r8#:*4_gene
   does>   >r   ( Rd # --- )      n->ThumbExpand.#12  12#.check <#> !   4r.check  <Rd> !
      r>  @                                          \ op.code
     <Rd> @   100 *  +                               \ op.code+Rn+Rd
     <#>  @   12#>5c#6c4rc3#4c8#  +   0~15<->16~31   32,'   here'  4  -  last.instruction.addr !
     all.ok?.off    s=1.ok?  on  ;

original.mnemonic?  on       f10d0000  5c#5cs5c3#4r8#:*4  add_R,rp,#12
original.mnemonic?  off      f10d0000  5c#5cs5c3#4r8#:*4  R=rp+#12
\ ------------------------------------------------------------------------------
\ 4.6.5   ADD(rp plus immediate)  T4     ARMv7-M
\ T4 ADDW<c> <Rd>,rp,#<imm>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 1|0 i 1 0|0 0 0 0|1 1 0 1|0 imm3 |==Rd===|=====imm8======|      5c#11c3#4r8#
\ d = UInt(Rd); setflags = FALSE; imm32 = ZeroExtend(i:imm3:imm8, 32);
\ if d == 15 then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
: `5c#11c3#4r8#       dup   32@^  fbff8000  and  ;
:  5c#11c3#4r8#:_gene    :.mnem_ ." `5c#11c3#4r8#"    #=if4 ."                       0b 8 14p"  .2"  mnem"  xt0 ;
:  5c#11c3#4r8#:
   create   dup  ,   5c#11c3#4r8#:_gene
   does>    >r  ( Rd # )    n->ThumbExpand.#12   swap  4r.check  +  r> @  +
            0~15<->16~31  32,'  here'  4  -  last.instruction.addr !   all.ok?.off  ;

original.mnemonic?  on       f20b0000  5c#11c3#4r8#:  add_R,rp,#12
original.mnemonic?  off      f20b0000  5c#11c3#4r8#:  R=rp+#12
\ ******************************************************************************
\ 4.6.6   ADD(rp plus register)  T1
\ This instruction adds an optionally-shifted register value to the rp value, and writes the result to the
\ destination register.
\ T1 ADD<c> <Rdm>, rp, <Rdm>
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\ |0 1 0 0|0 1 0 0|DM1 1 0|1 =Rdm=|
\ d = UInt(DM:Rdm); m = UInt(DM:Rdm); setflags = FALSE;
\ (shift_t, shift_n) = (SRType_None, 0);
\ ------------------------------------------------------------------------------
: `8cDM4c3r           dup   16@'        ff78  and  ;
:  8cDM4c3r:_gene           :.mnem_ ." `8cDM4c3r"   #=if2 ."                       2 0  14p"   .1"  mnem"  xt0 ;
:  8cDM4c3r:
   create    dup  ,   8cDM4c3r:_gene
   does>     swap     4r.check  7 /mod  80 *  +   +  16,'  here'  2  -  last.instruction.addr !   all.ok?.off  ;

original.mnemonic?  on         4468  8cDM4c3r:  add_R,rp
original.mnemonic?  off        4468  8cDM4c3r:  R+rp
\ ------------------------------------------------------------------------------
\ 4.6.6   ADD(rp plus register)  T2
\ ------------------------------------------------------------------------------
: `9c4r3c             dup   16@'    ff87   and   ( ,s=1.ok?? ) ;
:  9c4r3c:_gene     :.mnem_ ." `9c4r3c"    #=if2 ."                       2,6~3,4"   .1"  mnem"  xt0 ;
:  9c4r3c:
   create  dup  ,   9c4r3c:_gene
   does>   >r  ( Rd # )  4r.check   r>  @  8  *  +  16,'   here'  2  -  last.instruction.addr !   all.ok?.off  ;

: `9c4r3c             dup   16@'    ff87   and   ( ,s=1.ok?? ) ;
:  9c4r3c:_gene     :.mnem_ ." `9c4r3c"    #=if2 ."                        6 3 14p"      .1"  mnem"  xt0 ;
:  9c4r3c:
   create  dup  ,   9c4r3c:_gene
   does>   >r  ( Rd # )  4r.check   r>  @  8  *  +  16,'   here'  2  -  last.instruction.addr !   all.ok?.off  ;

:  9c4r3c:
   create  dup  ,   9c4r3c:_gene
   does>   ( r a )  to  (a)   4r.check  to (rd)
      (rd)  6  3   >?~?
      (a)   @ ( op.code )  +  16,'
      here'  2  -  last.instruction.addr !   all.ok?.off  ;

:  9c4r3c:'''''''''''
   create  dup  ,   9c4r3c:_gene
   does>   >r  ( Rd )  4r.check   8  *  r>  @  +  16,'   here'  2  -  last.instruction.addr !   all.ok?.off  ;

original.mnemonic?  on       4485  9c4r3c:   add_rp,R
original.mnemonic?  off      4485  9c4r3c:   rp+R
\ ------------------------------------------------------------------------------
\ 4.6.6   ADD(rp plus register)  T3
\ T3 ADD{S}<c>.W <Rd>,rp,<Rm>{,<shift>}
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  1  1  1  0  1  0  1  1  0  0  0  S  1  1  0  1  0 --imm3-- -----Rd----  imm2  type -----Rm----
\ d = UInt(Rd); m = UInt(Rm); setflags = (S == '1');
\ (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\ if d == 15 || BadReg(m) then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
 
: `11cs5c3#4r2#ty4r   dup   32@^  ,s=1.ok??   ,SHIFT.OK??   ffef8000   and  ;
:  11cs5c3#4r2#ty4r:_gene   :.mnem_ ." `11cs5c3#4r2#ty4r" #=if4 ."  0b  8  12p  3 0 13p  0e 0c 7 6  24p"  .3"  mnem"  xt0 ;
:  11cs5c3#4r2#ty4r:
   create  dup   ,    11cs5c3#4r2#ty4r:_gene
   does>   @  ( op.code )  >r  5#.check  <#> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <#>  @     4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
\    <Rm> @          +                                           \ op.code+Rn+Rd+#+Rm
      0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off  ,SHIFT.OK?  ;




: `11cc4cc3#4r2#ty4r   dup   32@^  ,s=1.ok??   ,SHIFT.OK??   ffef8000   and  ;
:  11cc4cc3#4r2#ty4r:_gene   :.mnem_ ." `11cc4cc3#4r2#ty4r" #=if4 ."  0b  8  12p  3 0 13p  0e 0c 7 6  24p"  .3"  mnem"  xt0 ;
:  11cc4cc3#4r2#ty4r:
   create  dup   ,    11cc4cc3#4r2#ty4r:_gene
   does>   @  ( op.code )  >r  5#.check  <#> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <#>  @     4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
\    <Rm> @          +                                           \ op.code+Rn+Rd+#+Rm
      0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off  ,SHIFT.OK?  ;






comment:
original.mnemonic?  on       eb0d0000  11cs5c3#4r2#ty4r:  add_R,rp,R
                             eb0d0000  11cs5c3#4r2#ty4r:  add_R,rp
                             eb0d0000  11cs5c3#4r2#ty4r:  add_R,R,rp
original.mnemonic?  off      eb0d0000  11cs5c3#4r2#ty4r:  R=rp+R
                             eb0d0000  11cs5c3#4r2#ty4r:  R=R+rp
 
original.mnemonic?  on       eb0d0000  11cs5c3#4r2#ty4r:  add_R,rp,R,#
                          \  eb0d0000  11cs5c3#4r2#ty4r:  add_R,rp,#
                          \  eb0d0000  11cs5c3#4r2#ty4r:  add_R,R,rp,#
original.mnemonic?  off      eb0d0000  11cs5c3#4r2#ty4r:  R=rp+R<<#
                          \  eb0d0000  11cs5c3#4r2#ty4r:  R=R+rp


original.mnemonic?  on       ea000000  11cc4rc3#4r2#004r:  and_R,R,R,lsl,#
original.mnemonic?  on       ea000010  11cc4cc3#4r2#014r:  and_R,R,R,lsr,#
original.mnemonic?  on       ea000020  11cc4rc3#4r2#104r:  and_R,R,R,asr,#
original.mnemonic?  on       ea000030  11cc4cc3#4r2#114r:  and_R,R,R,ror,#

original.mnemonic?  off      ea000000  11cc4rc3#4r2#004r:  R=RnR<<#
original.mnemonic?  off      ea000010  11cc4cc3#4r2#014r:  R=RnR>>#
original.mnemonic?  off      ea000020  11cc4rc3#4r2#104r:  R=RnR,a>>#
original.mnemonic?  off      ea000030  11cc4cc3#4r2#114r:  R=RnR>>>#

original.mnemonic?  on       ea100000  11cc4rc3#4r2#004r:  ands_R,R,R,lsl,#
original.mnemonic?  on       ea100010  11cc4cc3#4r2#014r:  ands_R,R,R,lsr,#
original.mnemonic?  on       ea100020  11cc4rc3#4r2#104r:  ands_R,R,R,asr,#
original.mnemonic?  on       ea100030  11cc4cc3#4r2#114r:  ands_R,R,R,ror,#

original.mnemonic?  off      ea100000  11cc4rc3#4r2#004r:  R=RnR<<#,s
original.mnemonic?  off      ea100010  11cc4cc3#4r2#014r:  R=RnR>>#,s
original.mnemonic?  off      ea100020  11cc4rc3#4r2#104r:  R=RnR,a>>#,s
original.mnemonic?  off      ea100030  11cc4cc3#4r2#114r:  R=RnR>>>#,s

comment;






: `11cc4cc3#4r2#004r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08000  and  ;  ( a' -- a' op.code )
:  11cc4cc3#4r2#004r:_gene   :.mnem_  ." `11cc4cc3#4r2#004r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4cc3#4r2#004r:
   create  dup   ,    11cc4cc3#4r2#004r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4cc3#4r2#014r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08010  and  ;  ( a' -- a' op.code )
:  11cc4cc3#4r2#014r:_gene   :.mnem_  ." `11cc4cc3#4r2#014r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4cc3#4r2#014r:
   create  dup   ,    11cc4cc3#4r2#014r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4cc3#4r2#104r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08020  and  ;  ( a' -- a' op.code )
:  11cc4cc3#4r2#104r:_gene   :.mnem_  ." `11cc4cc3#4r2#104r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4cc3#4r2#104r:
   create  dup   ,    11cc4cc3#4r2#104r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;

: `11cc4cc3#4r2#114r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08030  and  ;  ( a' -- a' op.code )
:  11cc4cc3#4r2#114r:_gene   :.mnem_  ." `11cc4cc3#4r2#114r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  11cc4cc3#4r2#114r:
   create  dup   ,    11cc4cc3#4r2#114r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off    s=1.ok?  on    shift.ok? on  ;




original.mnemonic?  on       eb0d0000  11cc4cc3#4r2#004r:  add_R,R,R,lsl,#
original.mnemonic?  on       eb0d0010  11cc4cc3#4r2#014r:  add_R,R,R,lsr,#
original.mnemonic?  on       eb0d0020  11cc4cc3#4r2#104r:  add_R,R,R,asr,#
original.mnemonic?  on       eb0d0030  11cc4cc3#4r2#114r:  add_R,R,R,ror,#

original.mnemonic?  off      eb0d0000  11cc4cc3#4r2#004r:  R=R+R<<#
original.mnemonic?  off      eb0d0010  11cc4cc3#4r2#014r:  R=R+R>>#
original.mnemonic?  off      eb0d0020  11cc4cc3#4r2#104r:  R=R+R,a>>#
original.mnemonic?  off      eb0d0030  11cc4cc3#4r2#114r:  R=R+R>>>#

original.mnemonic?  on       eb1d0000  11cc4cc3#4r2#004r:  adds_R,R,R,lsl,#
original.mnemonic?  on       eb1d0010  11cc4cc3#4r2#014r:  adds_R,R,R,lsr,#
original.mnemonic?  on       eb1d0020  11cc4cc3#4r2#104r:  adds_R,R,R,asr,#
original.mnemonic?  on       eb1d0030  11cc4cc3#4r2#114r:  adds_R,R,R,ror,#

original.mnemonic?  off      eb1d0000  11cc4cc3#4r2#004r:  R=R+R<<#,s
original.mnemonic?  off      eb1d0010  11cc4cc3#4r2#014r:  R=R+R>>#,s
original.mnemonic?  off      eb1d0020  11cc4cc3#4r2#104r:  R=R+R,a>>#,s
original.mnemonic?  off      eb1d0030  11cc4cc3#4r2#114r:  R=R+R>>>#,s








\ : R+rp   ( r -- )  dup  R=R+rp  ;
\ ******************************************************************************
\ 4.6.7   ADR(immediate)  T1

\ Address to Register adds an immediate value to the PC value, and writes the result to the destination register.
\ d = UInt(Rd); imm32 = ZeroExtend(imm8:'00', 32); add = TRUE;
comment:
original.mnemonic?  on       a000       5c3r8#:*4  adr_R,pc+#8
original.mnemonic?  off      a000       5c3r8#:*4  R=(pc+#)
                             a000       5c3r8#:*4  R=(pc+#8)



original.mnemonic?  on       a000       5c3r8#:*4=pc+#*4  adr_R,pc+#8
original.mnemonic?  off      a000       5c3r8#:*4=pc+#*4  R=pc+#*4
                             a000       5c3r8#:*4=pc+#*4  R=pc+#
comment;


original.mnemonic?  on       a000       5c3r8#:*4=pc+#*4  adr_R,pc+#8
original.mnemonic?  off      a000       5c3r8#:*4=pc+#*4  R=pc+#*4
                             a000       5c3r8#:*4=pc+#*4  R=pc+#


original.mnemonic?  on       a000       5c3r8#:*4+.(pc+#)  adr_R,pc+#8
original.mnemonic?  off      a000       5c3r8#:*4+.(pc+#)  R=(pc+#)
                             a000       5c3r8#:*4+.(pc+#)  R=(pc+#8)



original.mnemonic?  on       a000       5c3r8#:*4=pc+#*4  adr_R,pc+#8
original.mnemonic?  off      a000       5c3r8#:*4=pc+#*4  R=pc+#*4
                             a000       5c3r8#:*4=pc+#*4  R=pc+#
\ ------------------------------------------------------------------------------
\ 4.6.7   ADR(immediate)  T2        ARMv7-M
\ T2 ADR<c>.W <Rd>,<label>          <label> before current instruction
\ SUB <Rd>,PC,#0                    Special case for zero offset
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 i 1 0 1 0 1 0 1 1 1 1 0 imm3 Rd imm8
\ d = UInt(Rd); imm32 = ZeroExtend(i:imm3:imm8, 32); add = FALSE;
\ if BadReg(d) then UNPREDICTABLE;

original.mnemonic?  on         f2af0000   5c#11c3#4r8#:  adr_R,#12
original.mnemonic?  off        f2af0000   5c#11c3#4r8#:  R=(pc-#12)
\                              f2af0000   5c#11c3c4r8#:  R=(pc-#)    \ ??????
\ ------------------------------------------------------------------------------
\ 4.6.7   ADR(immediate)  T3        ARMv7-M

\ T3 ADR<c>.W <Rd>,<label> <label> after current instruction
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 i 1 0 0 0 0 0 1 1 1 1 0 imm3 Rd imm8

\ d = UInt(Rd); imm32 = ZeroExtend(i:imm3:imm8, 32); add = TRUE;
\ if BadReg(d) then UNPREDICTABLE;

original.mnemonic?  on       f20f0000   5c#11c3#4r8#:  adr_R,pc+#12
original.mnemonic?  off      f20f0000   5c#11c3#4r8#:  R=pc+#12
\ ******************************************************************************
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.8  and(immediate)  T1         ARMv7-M
\ This instruction performs a bitwise and of a register value and an immediate value, and writes the result
\ to the destination register.
\ T1 and{S}<c> <Rd>,<Rn>,#<const>
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 i 0 0 0 0 0 S Rn 0 imm3 Rd imm8
\ d = UInt(Rd); n = UInt(Rn); setflags = (S == '1');
\ (imm32, carry) = ThumbExpandImmWithC(i:imm3:imm8, APSR.C);
\ if d == 15 && setflags then SEE TST (immediate) on page 4-397;
\ if BadReg(d) || BadReg(n) then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
original.mnemonic?  on         f0100000  5c#5cc4rc3#4r8#:  ands_R,R,#
original.mnemonic?  off        f0100000  5c#5cc4rc3#4r8#:  R=Rn#11,s
original.mnemonic?  on         f0000000  5c#5cs4rc3#4r8#:  and_R,R,#
original.mnemonic?  off        f0000000  5c#5cs4rc3#4r8#:  R=Rn#11

: Rn#,s     >r   dup   r>      R=Rn#11,s  ;
: Rn#       >r   dup   r>      R=Rn#11    ;
\ ******************************************************************************
\ 4.6.9   and(register)  T1
\ This instruction performs a bitwise and of a register value and an optionally-shifted register value, and
\ writes the result to the destination register. It can optionally update the condition flags based on the result.
\ T1 andS <Rdn>,<Rm> Outside IT block.
\ and<c> <Rdn>,<Rm> Inside IT block.
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 0 1 0 0 0 0 0 0 0 0 Rm Rdn
\ d = UInt(Rdn); n = UInt(Rdn); m = UInt(Rm); setflags = !InITBlock();
\ (shift_t, shift_n) = (SRType_None, 0);
\ ------------------------------------------------------------------------------
original.mnemonic?  on         4000  10c3r3r:  and_R,R
original.mnemonic?  off        4000  10c3r3r:  RnR
\ ------------------------------------------------------------------------------
\ 4.6.9   and(register)  T2
\ T2 and{S}<c>.W <Rd>,<Rn>,<Rm>{,<shift>}
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 0 1 0 1 0 0 0 0 S Rn (0) imm3 Rd imm2 type Rm
\ d = UInt(Rd); n = UInt(Rn); m = UInt(Rm); setflags = (S == '1');
\ (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\ if d == 15 && setflags then SEE TST (register) on page 4-399;
\ if BadReg(d) || BadReg(n) || BadReg(m) THEN UNPREDICTABLE;
\ ------------------------------------------------------------------------------
original.mnemonic?  on       ea000000  11cs4rc3#4r2#ty4r:  and_R,R,R<<#
original.mnemonic?  off      ea000000  11cs4rc3#4r2#ty4r:  R=RnR<<#

original.mnemonic?  on       eb000000  11cc4rc3#4r2#ty4r:  and_R,R,R<<#,s
original.mnemonic?  off      eb000000  11cc4rc3#4r2#ty4r:  R=RnR<<#,s
 
\ -------------------------------------------------------------------------
original.mnemonic?  on       ea000000  11cc4rc3#4r2#004r:  and_R,R,R,lsl,#
original.mnemonic?  on       ea000010  11cc4rc3#4r2#014r:  and_R,R,R,lsr,#
original.mnemonic?  on       ea000020  11cc4rc3#4r2#104r:  and_R,R,R,asr,#
original.mnemonic?  on       ea000030  11cc4rc3#4r2#114r:  and_R,R,R,ror,#

original.mnemonic?  off      ea000000  11cc4rc3#4r2#004r:  R=RnR<<#
original.mnemonic?  off      ea000010  11cc4rc3#4r2#014r:  R=RnR>>#
original.mnemonic?  off      ea000020  11cc4rc3#4r2#104r:  R=RnR,a>>#
original.mnemonic?  off      ea000030  11cc4rc3#4r2#114r:  R=RnR>>>#

original.mnemonic?  on       ea100000  11cc4rc3#4r2#004r:  ands_R,R,R,lsl,#
original.mnemonic?  on       ea100010  11cc4rc3#4r2#014r:  ands_R,R,R,lsr,#
original.mnemonic?  on       ea100020  11cc4rc3#4r2#104r:  ands_R,R,R,asr,#
original.mnemonic?  on       ea100030  11cc4rc3#4r2#114r:  ands_R,R,R,ror,#

original.mnemonic?  off      ea100000  11cc4rc3#4r2#004r:  R=RnR<<#,s
original.mnemonic?  off      ea100010  11cc4rc3#4r2#014r:  R=RnR>>#,s
original.mnemonic?  off      ea100020  11cc4rc3#4r2#104r:  R=RnR,a>>#,s
original.mnemonic?  off      ea100030  11cc4rc3#4r2#114r:  R=RnR>>>#,s

: R=RnR      ( r r r -- )                 0  R=RnR<<#    ;
: RnR<<#     ( r r # -- )  2>r  dup  2r>     R=RnR<<#    ;
: RnR        ( r r ---- )                 0    RnR<<#    ;

: R=RnR,s    ( r r r -- )                 0  R=RnR<<#,s  ;
: RnR<<#,s   ( r r # -- )  2>r  dup  2r>     R=RnR<<#,s  ;
: RnR,s      ( r r ---- )   >r  dup   r>  0  R=RnR<<#,s  ;
\ --------------------------------------------------------------------------
: RnR       3r3r?   if   and_R,R  exit   then    >r   dup  r>   R=RnR  ;
\ ******************************************************************************
\ 4.6.10  asr(immediate)  T1

\ Arithmetic Shift Right (immediate) shifts a register value right by an immediate number of bits, shifting in
\ copies of its sign bit, and writes the result to the destination register. It can optionally update the condition
\ flags based on the result.
\ T1 asrS <Rd>,<Rm>,#<imm5> Outside IT block.
\ asr<c> <Rd>,<Rm>,#<imm5> Inside IT block.
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\ |0 0 0 1|0 ==imm5=== ==Rm= ==Rd=

\ d = UInt(Rd); m = UInt(Rm); setflags = !InITBlock();
\ (-, shift_n) = DecodeImmShift('10', imm5);

\ ------------------------------------------------------------------------------
: `5c5#3r3r           dup  16@'  f800  and  ;
:  5c5#3r3r:_gene     :.mnem_ ." `5c5#3r3r"     #=if2 ."       2  0  12p  5  3  13p  0a  6  14p" .3"  mnem"  xt0 ;
:  5c5#3r3r:
   create   dup  ,    5c5#3r3r:_gene
   does>    >r  ( Rd Rn # )
            5#.check  40 *   swap  3r.check  8 *  +   swap  3r.check  +  r> @  +  16,'  all.ok?.off ;

: `5c5#3r3r*4         dup  16@'  f800  and  ;
:  5c5#3r3r:_gene*4   :.mnem_ ." `5c5#3r3r*4"   #=if2 ."    2  0  12p  5  3  13p  0a  6  14p*4" .3"  mnem"  xt0 ;
:  5c5#3r3r:*4
   create   dup  ,    5c5#3r3r:_gene*4
   does>    >r   ( Rd Rn # )         4 /mod  swap  abort" *** number should be multiple of 4 ***"
            5#.check  40 *   swap    3r.check  8 *  +   swap  3r.check  +  r> @  +  16,'  all.ok?.off ;

: `5c5#3r3r*4'        dup  16@'  f800  and  ;
:  5c5#3r3r:_gene*4'  :.mnem_ ." `5c5#3r3r*4'"  #=if2 ."    5  3  12p  0a  6  13p*4  2 0  14p" .3"  mnem"  xt0 ;
:  5c5#3r3r:*4'
   create   dup  ,    5c5#3r3r:_gene*4'
   does>    >r   ( Rn # Rd ) -rot    4 /mod  swap  abort" *** number should be multiple of 4 ***"
            5#.check  40 *   swap    3r.check  8 *  +   swap  3r.check  +  r> @  +  16,'  all.ok?.off ;

original.mnemonic?  on       1000  5c5#3r3r:   asr_R,R,#5
original.mnemonic?  off      1000  5c5#3r3r:   R=R,a>>#5
                             1000  5c5#3r3r:   R=R,a>>#
\ ------------------------------------------------------------------------------
\ 4.6.10  asr(immediate)  T2       ARMv7-M
\         asr{S}<c>.W <Rd>,<Rm>,#<imm5>

\  151413121110 9 8 7 6 5 4 3 2 1 01514131211 10 9 8 7 6 5 4 3 2 1 0
\   1 1 1 0 1 0 1 0 0 1 0 S 1 1 1 1(0) imm3 ===Rd===imm2 1 0 ===Rm==
\ d = UInt(Rd); m = UInt(Rm); setflags = (S == 1);
\ (-, shift_n) = DecodeImmShift(10, imm3:imm2);
\ if d IN {13,15} || m IN {13,15} then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
: `11cs5c3#4r2#2c4r     dup  32@^  ,s=1.ok??  ffef8030  and  ;
:  11cs5c3#4r2#2c4r:_gene  :.mnem_  ." `11cs5c3#4r2#2c4r" #=if4 ."  0b  8  12p  3 0 13p 0e 0c 7 6  24p" .3" mnem" xt0 ;

\  11cs5c3#4r2#ty4r:
:  11cs5c3#4r2#2c4r:
   create  dup   ,    11cs5c3#4r2#2c4r:_gene
   does>   @  ( op.code )  >r  5#.check  <#> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <#>  @     4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
\    <Rm> @          +                                           \ op.code+Rn+Rd+#+Rm
      0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   s=1.ok?  on  ;

:  11cs5c3#4r2#2c4r:
   create  dup   ,    11cs5c3#4r2#2c4r:_gene
   does>  ( Rd Rm # a )  to (a)  5#.check  to (#)   4R.check  to (Rm)  4R.check  to (Rd)
     (Rd)    0b   8        >?~?
     (Rm)     3   0        >?~?      +                                            
     (#)     0e  0c  7  6  >?~?+?~?  +
     (a)      @                      +
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr  !  all.ok?.off   s=1.ok?  on  ;

original.mnemonic?  on       ea4f0020  11cs5c3#4r2#ty4r:  asr_R,R,#5'
original.mnemonic?  off      ea4f0020  11cs5c3#4r2#ty4r:  R=R,a>>#5'
                             ea4f0020  11cs5c3#4r2#ty4r:  R=R,a>>#5

: R=R,a>>#  3r3r5#?  if   R=R,a>>#   exit  then   R=R,a>>#5  ;
: R=R,a>>1             1  R=R,a>>#  ;
:   R,a>>1      dup    1  R=R,a>>#  ;
:   rra.R       dup    1  R=R,a>>#  ;
\ ******************************************************************************
\ 4.6.11  asr(register)  T1
\ Arithmetic Shift Right (register) shifts a register value right by a variable number of bits, shifting in copies
\ of its sign bit, and writes the result to the destination register. The variable number of bits is read from the
\ bottom byte of a register. It can optionally update the condition flags based on the result.

\ T1 asrS   <Rdn>,<Rm> Outside IT block.
\    asr<c> <Rdn>,<Rm> Inside IT block.
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 0 1 0 0 0 0 0 1 0 0 Rm Rdn

\ d = UInt(Rdn); n = UInt(Rdn); m = UInt(Rm); setflags = !InITBlock();
\ ------------------------------------------------------------------------------
original.mnemonic?  on       4100  10c3r3r:  asr_R,R
original.mnemonic?  on       4100  10c3r3r:  asr.R,R
original.mnemonic?  off      4100  10c3r3r:  R,a>>R
\ ------------------------------------------------------------------------------
\ 4.6.11  asr(register)  T2

\ T2      asr{S}<c>.W <Rd>,<Rn>,<Rm>
\  151413121110 9 8 7 6 5 4 3 2 1 0 151413121110 9 8 7 6 5 4 3 2 1 0
\   1 1 1 1 1 0 1 0 0 1 0 S ==Rn===  1 1 1 1===Rd=== 0 0 0 0===Rm===
\ d = UInt(Rd); n = UInt(Rn); m = UInt(Rm); setflags = (S == 1);
\ if d IN {13,15} || n IN {13,15} || m IN {13,15} then UNPREDICTABLE;
\ ------------------------------------------------------------------------------

\ : `11cs4r4#4r4#4r     dup 32@^  0~15<->16~31  ,s=1.ok??  ffe00000  and  ;  ( a' -- a' op.code )

: 11cs4r4#4r4#4r:_gene    :.mnem_  ." `11cs4r4#4r4#4r" #=if4 ."  0b  8  12p 13 10 13p 3 0 14p " .3" mnem" xt0 ;

: 11cs4r4#4r4#4r: ( Rd Rn Rm # --- )   \  >=M2   R=R+R+c << #
  create  dup   ,   11cs4r4#4r4#4r:_gene
  does>   @  ( op.code )  >r  4#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <#>  @     4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm> @          +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   s=1.ok?  on  ;


\  eb400000   11cs4r4#4r4#4r:  R=R+R+c
\  eb400000   11cs4r4#4r4#4r:  R=R+R+c


: 11cs4r4c4r4c4r:_gene    :.mnem_  ." `11cs4r4c4r4c4r" #=if4 ."  0b  8  12p 13 10 13p 3 0 14p " .3" mnem" xt0 ;
: 11cs4r4c4r4c4r: ( Rd Rn Rm --- )
  create  dup   ,   11cs4r4c4r4c4r:_gene
  does>   @  ( op.code )  >r    4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
\    <#>  @     4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm> @          +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'    ,s=1.ok?     here'   4  -  last.instruction.addr  !  all.ok?.off   s=1.ok?  on  ;

\ original.mnemonic?  on     eb400000   11cs4r4c4r4c4r:  R=R+R+c
\ original.mnemonic?  off    eb400000   11cs4r4c4r4c4r:  R=R+R+c

  original.mnemonic?  on     fa40f000   11cs4r4c4r4c4r:  asr_R,R,R
  original.mnemonic?  off    fa40f000   11cs4r4c4r4c4r:  R=R,a>>R

\ original.mnemonic?  on     fa40f000   11cc4r4c4r4c4r:  asrs_R,R,R
\ original.mnemonic?  off    fa40f000   11cc4r4c4r4c4r:  R=R,a>>R,s
\ ******************************************************************************
\ ******************************************************************************
\ ******************************************************************************                          dup  >disassem.number.stack  .xxxxxxxx(h)
\ 4.6.12   B              T1
\ ------------------------------------------------------------------------------
comment:
:  7#.check.rel ( 7# -- # ) here'  2+  -  2/  dup  -3f  40  between  not  abort" **** relative jmp should be within +/-40 ****" 7f and ;

:  14p.rel  ( n1 n2 -- n )  2dup  ?~?.MASK  >r  ?~?>   (a')  2/   +   1+   r>   and   2*  4p   ;

: `6c7#3c.rel   ( a' -- a' op.code )  dup  16@'  fc07  and  ;
:  6c7#3c.rel:
   create    dup  ,   :.mnem_  ." `6c7#3c.rel"  #=if2 ."    9  3  14p.rel"            .1" mnem"  xt0
   does>  ( # a )    to (a)   7#.check.rel to (#)
   (#)    9  3          >?~?
   (a)    @                       +      16,'
   here'  last.instruction.addr   !  ;

:  8#.check.rel ( 7# -- # ) here'  2+  -  2/  dup  -7f  80  between  not  abort" **** relative jmp should be within +/-80 ****" ff and ;

:  14p.rel  ( n1 n2 -- n )  2dup  ?~?.MASK  >r  ?~?>   (a')  2/   +   1+   r>   and   2*  4p   ;

: `8c8#.rel   ( a' -- a' op.code )  dup  16@'  ff00  and  ;
:  8c8#.rel:
   create    dup  ,   :.mnem_  ." `8c8#.rel"  #=if2 ."   7  0  14p.rel"            .1" mnem"  xt0
   does>  ( # a )     to  (a)   8#.check.rel  to (#)
   (#)    7  0          >?~?
   (a)    @                       +      16,'
   here'  last.instruction.addr   !  ;
comment;

\ 2,7~0rel,3  ( a' -- a' )  2 to <<byte>>  dup  16@'  ff  and  dup   80 and  if  ffffff00  or  then 1+ 4 * over   +  42 ?y ( 3p ) .xxxxxxxx(h)  ;
: 2,7~0rel,3  ( a' -- a' )  2 to <<byte>>  dup  16@'  ff  and  dup   80 and  if  ffffff00  or  then 1+ 2*  over   +  42 ?y ( 3p )  dup  >disassem.number.stack  .xxxxxxxx(h)  ;

\  8C8REL:_GENE   :.NAME_ DUP.C@' @NAME =.IF.%2. |1,2REL8,2| .1". .NAME" 2.EXIT.THEN.0.; ;  ok
: `8c8rel     dup  16@'   ff00   and  ;
:  8C8REL:_GENE   :.mnem_   ." `8c8rel"  gn#  ." = IF (2   2,7~0rel,3"  .1" mnem" xt0 ;
\  8C8REL:_GENE   :.mnem_   ." `8c8rel"  gn#  ." = IF (2   1,2REL8,4"   .1" mnem" xt0 ;

:  8C8REL:
   CREATE  DUP , 8C8REL:_GENE
   DOES>   >R    ( here' - )     ( -80 ~ +80 )  \  1111 1111    #8
           8REL.CHECK  r> @  +  16,'  ( 8,'  REL8, )  all.ok?.off  ;

:  8C8REL:
   CREATE  DUP , 8C8REL:_GENE
   DOES>   >R    ( here' - ) 2/  ( -80 ~ +80 )  \  1111 1111    #8
           8REL.CHECK  r> @  +  16,'  ( 8,'  REL8, )  all.ok?.off  ;


comment:
variable  ?.byte

: check.b=1.ok  ( code -- code )  >r
        r@    f000  and  4000 f000 between
  if    -1
  else  r@    ff80  and
        case  1000  of   -1  endof
              1100  of   -1  endof
              1200  of   -1  endof
                          0  swap
        endcase
  then     r> swap  0= abort"  b=1, b=0 not allowed for this instruction! "  ;

: b=1   here'   ?.byte @  ?dup 0=  abort" **** byte.mode not allowed in this instruction ****"
        -  dup>r   16@'  ( check.b=1.ok ) 40  or  r>  !'  ;
: byte  b=1  ;
: .b    b=1  ;
comment;


\ 6c10rel: (create)inst  dup ,    6c10rel:_gene
\          does>   >r   cal.REL.10.430   ( rel.10 ) 0a extend  and  2/  r>  @  +  16,'   0 ?.byte !   ;

: 8c8rel:  (create)inst  dup ,    8c8rel:_gene
           does>   >r   cal.REL.8        ( rel.8  )   8 extend  and  2/   r>  @  +  16,' ( 0 ?.byte ! ) ;

: 8c8#.rel:  create  dup ,    8c8rel:_gene
           does>   >r   cal.REL.8        ( rel.8  ) ( 8 extend  and  2/ ) r>  @  or 16,' ( 0 ?.byte ! ) ;

:  8#.check.rel ( 7# -- # ) here'  2+  -  2/  dup  -7f  80  between  not  abort" **** relative jmp should be within +/-80 ****" ff and ;
:  8#.check.rel ( 7# -- # ) here'  4+  -  2/  dup  -7f  80  between  not  abort" **** relative jmp should be within +/-80 ****" ff and ;

code  arshift  ( n shift -- n2 )  mov  ecx, ebx    pop ebx    sar ebx, cl   next  c;

:  14p.rel   ( len a' n1 n2 -- len a' n )  2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   1+   r>   and  +  2*  4p   ;
:  14p.rel   ( len a' n1 n2 -- len a' n )  2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   1+   r>   and  7 SIGN.EXTEND.N swap 2/  +  2*  4p   ;
\  14p.rel   ( len a' n1 n2 -- len a' n )  2>r  16@'  1f r@  -  dup>r  lshift  2r> +  arshift  ;
:  14p.rel8  ( len a' n1 n2 -- len a' n )  dup to (a') 2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   2 +   r>   and  7 SIGN.EXTEND.N swap 2/  +  2*  4p   ;
\ ?????????????????
:  14p.rel11 ( len a' n1 n2 -- len a' n )  dup to (a') 2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   2 +   r>   and  7 SIGN.EXTEND.N swap 2/  +  2*  4p   ;
:  14p.rel20 ( len a' n1 n2 -- len a' n )  dup to (a') 2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   2 +   r>   and  7 SIGN.EXTEND.N swap 2/  +  2*  4p   ;
:  14p.rel24 ( len a' n1 n2 -- len a' n )  dup to (a') 2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   2 +   r>   and  7 SIGN.EXTEND.N swap 2/  +  2*  4p   ;
:  14p.rel   ( len a' n1 n2 -- len a' n )  dup to (a') 2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   2 +   r>   and  7 SIGN.EXTEND.N swap 2/  +  2*  4p   ;
:  14p.rel   ( len a' n1 n2 -- len a' n )  2>r to (a') 2r> ?~?> 2* 0b SIGN.EXTEND.N (a') 4+  +  4p   (a') ; \ <<byte>>  +  ;



:  14p.rel8  ( len a' n1 n2 -- len a' n )  2>r to (a') 2r> ?~?> 2*  8 SIGN.EXTEND.N (a') 4+  +  4p   (a') ; \ <<byte>>  +  ;
:  14p.rel11 ( len a' n1 n2 -- len a' n )  2>r to (a') 2r> ?~?> 2* 0b SIGN.EXTEND.N (a') 4+  +  4p   (a') ; \ <<byte>>  +  ;
:  14p.rel20 ( len a' n1 n2 -- len a' n )  2>r to (a') 2r> ?~?> 2* 14 SIGN.EXTEND.N (a') 4+  +  4p   (a') ; \ <<byte>>  +  ;
:  14p.rel24 ( len a' n1 n2 -- len a' n )  2>r to (a') 2r> ?~?> 2* 18 SIGN.EXTEND.N (a') 4+  +  4p   (a') ; \ <<byte>>  +  ;

 
:  14p.rel   ( len a' n1 n2 -- len a' n )  2>r  >r
   r@  16@'  f000  and  e000  =  if   r>   2r>  14p.rel8   exit  then
   r@  16@'  f800  and  d100  =  if   r>   2r>  14p.rel11  exit  then
(  r@  32@'    fff800  and  d100  =  if   r>   2r>  14p.rel11  exit  then )
(  r@  32@'  ff000000  and  d100  =  if   r>   2r>  14p.rel11  exit  then )  -1 abort" **** rel jmp ????? ****"  ;


:  14p.rel   ( len a' n1 n2 -- len a' n )  2>r to (a') 2r> ?~?> 2*   0b SIGN.EXTEND.N  (a') 4+  +  4p   (a')  <<byte>>  +  ;





\ 2>r to (a') 2r> ?~?> 2* 0b SIGN.EXTEND.N (a') 4+  +  4p   (a')  <<byte>>  +  ;

\  :  14p.rel  ( len a' n1 n2 -- len a' n )  rot dup to (a') -rot  2>r  dup 2r>  2dup  ?~?.MASK  >r   ?~?>   (a')  2/   +   2 +   r>   and  0a SIGN.EXTEND.N swap 2/  +  2*  4p   (a')  <<byte>>  +  ;
\ ???????????

: `8c8#.rel   ( a' -- a' op.code )  dup  16@'  ff00  and  ;
:  8c8#.rel:
   create    dup  ,   :.mnem_  ." `8c8#.rel"  #=if2 ."   7  0  14p.rel8"            .1" mnem"  xt0
   does>  ( # a )     to  (a)   8#.check.rel  to (#)
   (#)    7  0          >?~?
   (a)    @                       +      16,'
   here'  last.instruction.addr   !  ;

comment:
   d000  8c8#.rel:  #....z=1?(=?)
   d100  8c8#.rel:  #....z=0?(<>?)
   d200  8c8#.rel:  #....c=1?(u<?)
   d300  8c8#.rel:  #....c=0?(u>=?)
   d400  8c8#.rel:  #....n=1?(-?)
   d500  8c8#.rel:  #....n=0?(+?)
   d600  8c8#.rel:  #....v=1?
   d700  8c8#.rel:  #....v=0?
   d800  8c8#.rel:  #....u>?
   d900  8c8#.rel:  #....u<=?
   da00  8c8#.rel:  #....>=?
   db00  8c8#.rel:  #....<?
   dc00  8c8#.rel:  #....>?
   dd00  8c8#.rel:  #....<=?
   de00  8c8#.rel:  #....jmp
   de00  8c8#.rel:  #....rjmp

   d000  8c8#.rel:    z=1?(=?)____#
   d100  8c8#.rel:   z=0?(<>?)____#
   d200  8c8#.rel:   c=1?(u<?)____#
   d300  8c8#.rel:  c=0?(u>=?)____#
   d400  8c8#.rel:    n=1?(-?)____#
   d500  8c8#.rel:    n=0?(+?)____#
   d600  8c8#.rel:        v=1?____#
   d700  8c8#.rel:        v=0?____#
   d800  8c8#.rel:         u>?____#
   d900  8c8#.rel:        u<=?____#
   da00  8c8#.rel:         >=?____#
   db00  8c8#.rel:          <?____#
   dc00  8c8#.rel:          >?____#
   dd00  8c8#.rel:         <=?____#
   de00  8c8#.rel:         jmp____#
   de00  8c8#.rel:        rjmp____#


   d000  8c8#.rel:  #....z=1?
   d100  8c8#.rel:  #....bne
   d200  8c8#.rel:  #....c=1?
   d300  8c8#.rel:  #....c=0?
   d400  8c8#.rel:  #....n=1?
   d500  8c8#.rel:  #....n=0?
   d600  8c8#.rel:  #....v=1?
   d700  8c8#.rel:  #....v=0?
   d800  8c8#.rel:  #....u>?
   d900  8c8#.rel:  #....u<=?
   da00  8c8#.rel:  #....>=?
   db00  8c8#.rel:  #....<?
   dc00  8c8#.rel:  #....>?
   dd00  8c8#.rel:  #....<=?
   de00  8c8#.rel:  #....jmp
   de00  8c8#.rel:  #....rjmp
comment;

   d000  8c8#.rel:  #....z=1?(=?)
   d100  8c8#.rel:  #....z=0?(<>?)
   d200  8c8#.rel:  #....c=1?(u<?)
   d300  8c8#.rel:  #....c=0?(u>=?)
   d400  8c8#.rel:  #....n=1?(-?)
   d500  8c8#.rel:  #....n=0?(+?)
   d600  8c8#.rel:  #....v=1?
   d700  8c8#.rel:  #....v=0?
   d800  8c8#.rel:  #....u>?
   d900  8c8#.rel:  #....u<=?
   da00  8c8#.rel:  #....>=?
   db00  8c8#.rel:  #....<?
   dc00  8c8#.rel:  #....>?
   dd00  8c8#.rel:  #....<=?
   de00  8c8#.rel:  #....jmp
   de00  8c8#.rel:  #....rjmp


   d000  8c8#.rel:  #....z=1?
   d100  8c8#.rel:  #....bne
   d200  8c8#.rel:  #....c=1?
   d300  8c8#.rel:  #....c=0?
   d400  8c8#.rel:  #....n=1?
   d500  8c8#.rel:  #....n=0?
   d600  8c8#.rel:  #....v=1?
   d700  8c8#.rel:  #....v=0?
   d800  8c8#.rel:  #....u>?
   d900  8c8#.rel:  #....u<=?
   da00  8c8#.rel:  #....>=?
   db00  8c8#.rel:  #....<?
   dc00  8c8#.rel:  #....>?
   dd00  8c8#.rel:  #....<=?
   de00  8c8#.rel:  #....jmp
   de00  8c8#.rel:  #....rjmp
   
   d000  8c8#.rel:  z=1?
   d100  8c8#.rel:  bne
   d200  8c8#.rel:  c=1?
   d300  8c8#.rel:  c=0?
   d400  8c8#.rel:  n=1?
   d500  8c8#.rel:  n=0?
   d600  8c8#.rel:  v=1?
   d700  8c8#.rel:  v=0?
   d800  8c8#.rel:  u>?
   d900  8c8#.rel:  u<=?
   da00  8c8#.rel:  >=?
   db00  8c8#.rel:  <?
   dc00  8c8#.rel:  >?
   dd00  8c8#.rel:  <=?
   de00  8c8#.rel:  jmp_#8
   de00  8c8#.rel:  rjmp

   d000  8c8#.rel:  z=1?
   d100  8c8#.rel:  z=0?
   d200  8c8#.rel:  c=1?
   d300  8c8#.rel:  c=0?
   d400  8c8#.rel:  n=1?
   d500  8c8#.rel:  n=0?
   d600  8c8#.rel:  v=1?
   d700  8c8#.rel:  v=0?
   d800  8c8#.rel:  u>?
   d900  8c8#.rel:  u<=?
   da00  8c8#.rel:  >=?
   db00  8c8#.rel:  <?
   dc00  8c8#.rel:  >?
   dd00  8c8#.rel:  <=?
   de00  8c8#.rel:  jmp_#8
   de00  8c8#.rel:  rjmp
\  df00  ?????????      
\ ------------------------------------------------------------------------------
\ 4.6.12   B              T2
\ ------------------------------------------------------------------------------
:  2,10~0rel,4  ( a' -- a' )  dup 2+  over  16@'  7ff  and  dup  400 and  if  fffff800  or  then  here'  +  4p  .xxxxxxxx(h)  ;
:  2,10~0rel,4  ( a' -- a' )  dup 2+  over  16@'  7ff  and  dup  400 and  if  fffff800  or  then  (a')   +  4p  .xxxxxxxx(h)  ;

: `5c11#            dup  16@'  f800  and  ;
:  5c11#:_gene    :.mnem_  ." `5c11#" #=if2 ."  0a 0 14p.rel11" .1" mnem" xt0 ;

:  get.jmp.to.address'.from.jmp_#11  ( a' -- jmp.to.address' -1 / 0 )     `5C11#   e000 =
   if     0a    0    2>R TO (A') 2R> ?~?> 2*   0b  SIGN.EXTEND.N (A')  4+  +  -1
   else   drop  0
   then   ;


comment:
:  5c11#:
   create   dup  ,   5c11#:_gene
   does>    >r       (  here'  - )  ( -400 ~ +400 )  \  0111 1111 1111    #11
            11rel.check     r>  @  +  16,'  all.ok?.off  ;

:  5c11#:
   create   dup  ,   5c11#:_gene
   does>    >r       (  a'  - )  ( -400 ~ +400 )  \  0111 1111 1111    #11
            11rel.check   here' 2+  -  fff and  2/  r>  @  +  16,'  all.ok?.off  ;
comment;


:  5c11#:
   create   dup  ,   5c11#:_gene
   does>    >r       (  a'  - )  ( -400 ~ +400 )  \  0111 1111 1111    #11
            11rel.check   here' 4 + -  fff and  2/  r>  @  +  16,'  all.ok?.off  ;

     e000  5c11#:  jmp_#11
\ ------------------------------------------------------------------------------
\ 4.6.12   B              T3     imm32 = SignExtend(S:J2:J1:imm6:imm11:'0', 32);
\
\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\   1 1 1 1|0 S ==cond= ===imm6====|1 0J1 0J2 =========imm11=======     5cs4con6#2cjcj11#
\   1 1 1 1|0 0 0 0|0 0 0 0|0 0 0 0|1 0 1 0|0 0 0 0|0 0 0 0|0 0 0 0     f000a000
\                           sJ2J1 ====imm6=== =========imm11=======     #20
\   1 1 1 1|1 1 1 1|1 1 1 1|1 0 0 0|0 0 0 0|0 0 0 0|0 0 0 0|0 0 0 0     fff80000
\ imm32 = SignExtend(S:J2:J1:imm6:imm11:'0', 32);
\ if cond<3:1> == '111' then
\ SEE Branches, miscellaneous control instructions on page 3-31;
\ if InITBlock() then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
\ f0008000  5cs4con6#2cjcj11#:  jmp_#20
\ hex  fffff  decimal u.  1048575        1.048575 M        -524,288 ~ +524,287

:  20rel,4  ( a' -- a' )   dup   32@^  >r
\  r@   04000000  and  ( s   ) \ 7 rshift

   r@        800  and  ( j2  )   7 lshift
   r@       2000  and  ( j1  )   4 lshift   +
   r@   003f0000  and  ( #6  )   5 rshift   +
   r@   000007ff  and  ( #11 ) ( 0 rshift ) +
   r@   04000000  and  ( s   ) ( 7 rshift )
   if   fff80000  or   then   r>  or  4p  .xxxxxxxx(h)  ;

: `5cs4con6#2cjcj11#     dup  32@'  f800d000  and  ;
:  5cs4con6#2cjcj11#:_gene      :.mnem_  ." `5cs4con6#2cjcj11#"  gn#  ." = if (4  20rel,4" .1" mnem" xt0 ;
:  5cs4con6#2cjcj11#:
   create   dup  ,     5cs4con6#2cjcj11#:_gene
   does>    >r           ( here'  - )  ( -0040,0000 ~ +0040,0000 )
            20rel.check  >r                  0
   r@   00080000  and  ( s   )   if   04000000  +  then
   r@   00040000  and  ( J1  )   if       2000  +  then
   r@   00020000  and  ( J2  )   if        800  +  then
   r@   0001f800  and  (  6# )   9 lshift       +
   r>   000007ff  and  ( 11# )                  +
   r>   @                                       +  0~15<->16~31   32,'  all.ok?.off  ;

   f000a000  5cs4con6#2cjcj11#:  jmp_#20
\ ------------------------------------------------------------------------------
\ 4.6.12   B              T4

\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\   1 1 1 1 0 S ======imm10======== 1 0J1 1J2 =======imm11=========    5cs10#2cjcj11#
\   1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0    f0009000
\   1 1 1 1 0       SI1I2 ======imm10======== =======imm11=========    #24
\   1 1 1 1|1 1 1 1|1 0 0 0|0 0 0 0|0 0 0 0|0 0 0 0|0 0 0 0|0 0 0 0|   ff800000
\ I1 = NOT(J1 EOR S); I2 = NOT(J2 EOR S);
\ imm32 = SignExtend(S:I1:I2:imm10:imm11:'0', 32);
\ if InITBlock() && !LastInITBlock() then UNPREDICTABLE;      I=not(JxS)  -->  J=not(IxS)    S=not(IxJ)
\ ------------------------------------------------------------------------------
\ f0009000  5cs10#2cjcj11#:     jmp_#24
\ hex ffffff  decimal u. 16777215       16.777215 M      -8,388,608 ~ +8388607

comment:
:  24rel,4  ( a' -- a' )    dup  4+  over  32@^  >r
   r@   04000000  and  ( s   ) ( 7 rshift )
if r@        800  and  ( j2  )   if  ( s=1 j2=1 )  800  else  ( s=1 j2=0 )     0           then  \  s=1  j2
   r@       2000  and  ( j1  )   if  ( s=1 j1=1 ) 2000  else  ( s=1 j1=0 )     0           then  +
else
   r@        800  and  ( j2  )   if  ( s=0 j2=1 )    0  else  ( s=0 j2=0 )   800 7 lshift  then  \  s=0  j2
   r@       2000  and  ( j1  )   if  ( s=0 j1=1 )    0  else  ( s=0 j1=0 )  2000 4 lshift  then  +
then
   r@   03ff0000  and  ( #10 )   5 rshift   +
   r@   000007ff  and  ( #11 ) ( 0 rshift ) +
   r>   04000000  and  ( s   ) ( 7 rshift )
   if   ff800000  or   then      4p  .xxxxxxxx(h)  ;
comment;


0  value  <i1>
0  value  <i2>
0  value  <j1>
0  value  <j2>
0  value  <s>

:  20rel,4  ( a' -- a' )  to (a')                  \  T3
   15 10  0a  0   ?~?+?~?>    1  lshift  ( 2* )
   0d 0d  ( j1 )      ?~?>   12  lshift  +
   0b 0b  ( j2 )      ?~?>   13  lshift  +
   1a 1a  ( s  )      ?~?>   14  lshift  +   15  N.BIT.EXTEND>32BIT  4p  (a')  ;

comment:
:  24rel,4  ( a' -- a' )     to  (a')
   19 10  0a  0   ?~?+?~?>    1  lshift  ( 2* )    \  T4
   1a 1a  ( s  )      ?~?>   >r
   0b 0b  ( j2 )      ?~?>   r@   xor  0=  if  1 ( <i2> )  16  lshift  +   then  \  I2 = NOT(J2 EOR S)
   0d 0d  ( j1 )      ?~?>   r@   xor  0=  if  1 ( <i1> )  17  lshift  +   then  \  I1 = NOT(J1 EOR S)
                             r>                            18  lshift  +   19  N.BIT.EXTEND>32BIT (a') +  4+  4p  (a')  ;
comment;

:  a'>24#   ( a' -- a' 24# )     to  (a')
   19 10  0a  0   ?~?+?~?>    1  lshift  ( 2* )    \  T4
   1a 1a  ( s  )      ?~?>   >r
   0b 0b  ( j2 )      ?~?>   r@   xor  0=  if  1 ( <i2> )  16  lshift  +   then  \  I2 = NOT(J2 EOR S)
   0d 0d  ( j1 )      ?~?>   r@   xor  0=  if  1 ( <i1> )  17  lshift  +   then  \  I1 = NOT(J1 EOR S)
                             r>                            18  lshift  +   19  N.BIT.EXTEND>32BIT (a') +  4+ ; \ 4p  (a')  ;

:  24rel,4>cfa'  ( a' -- cfa' )     to  (a')
   19 10  0a  0   ?~?+?~?>    1  lshift  ( 2* )    \  T4
   1a 1a  ( s  )      ?~?>   >r
   0b 0b  ( j2 )      ?~?>   r@   xor  0=  if  1 ( <i2> )  16  lshift  +   then  \  I2 = NOT(J2 EOR S)
   0d 0d  ( j1 )      ?~?>   r@   xor  0=  if  1 ( <i1> )  17  lshift  +   then  \  I1 = NOT(J1 EOR S)
                             r>                            18  lshift  +   19  N.BIT.EXTEND>32BIT (a') +  4+  ;

:  24rel,4  ( a' -- a' )     to  (a')
   19 10  0a  0   ?~?+?~?>    1  lshift  ( 2* )    \  T4
   1a 1a  ( s  )      ?~?>   >r
   0b 0b  ( j2 )      ?~?>   r@   xor  0=  if  1 ( <i2> )  16  lshift  +   then  \  I2 = NOT(J2 EOR S)
   0d 0d  ( j1 )      ?~?>   r@   xor  0=  if  1 ( <i1> )  17  lshift  +   then  \  I1 = NOT(J1 EOR S)
                             r>                            18  lshift  +   19  N.BIT.EXTEND>32BIT (a') +  4+  4p  (a')  ;



:  a'>24rel,4  ( a' -- a' )     to  (a')
   19 10  0a  0   ?~?+?~?>    1  lshift  ( 2* )    \  T4
   1a 1a  ( s  )      ?~?>   >r
   0b 0b  ( j2 )      ?~?>   r@   xor  0=  if  1 ( <i2> )  16  lshift  +   then  \  I2 = NOT(J2 EOR S)
   0d 0d  ( j1 )      ?~?>   r@   xor  0=  if  1 ( <i1> )  17  lshift  +   then  \  I1 = NOT(J1 EOR S)
                             r>                            18  lshift  +   19  N.BIT.EXTEND>32BIT (a') +  4+  ;  \ 4p  (a')  ;

variable  24rel.<s>
variable  24rel.<j1>
variable  24rel.<j2>
variable  24rel.<#10>
variable  24rel.<#11>
variable  24rel.<I1>
variable  24rel.<I2>

\ 0000 0000 sjj# #### #### #### #### ####
\           sii=====10#=====*****11#*****       --> 24#

\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\   1 1 1 1 0 S ======imm10======== 1 0J1 1J2 =======imm11=========    5cs10#2cjcj11#

\     5.s10#2.j.j11#   ( 24# --> 5..10#2.j.j11# )
: 24#>5..10#2.j.j11#   ( 24# --> 5.s10#2.j.j11# )   >r
\        r@   00800000  and  ( s   )   if           04000000  else              0     then    \  s
         r@   00800000  and  ( s   )   3 lshift                                               \  s
         r@   00800000  and  ( s   )
if       r@   00400000  and  ( I1  )   if  ( s=1 I1=1 )                      2000  +  then    \  s=1  J1
         r@   00200000  and  ( I2  )   if  ( s=1 I2=1 )                       800  +  then    \  s=1  J2
else     r@   00400000  and  ( I1  )   if  ( s=0 I1=1 )  else  ( s=0 I1=0 )  2000  +  then    \  s=0  J1
         r@   00200000  and  ( I2  )   if  ( s=0 I2=1 )  else  ( s=0 I2=0 )   800  +  then    \  s=0  J2
then     r@   001ff800  and  ( 10# )   5 lshift   +
         r>   000007ff  and  ( 11# )              +    ;







: 24#>5..10#2.j.j11#   ( 24# --> 5.s10#2.j.j11# )   >r
         r@   00800000  and  ( s   )   3 lshift                                               \  s
         r@   00800000  and  ( s   )
if       r@   00400000  and  ( I1  )   if  ( s=1 I1=1 )                      2000  +  then    \  s=1  J1
         r@   00200000  and  ( I2  )   if  ( s=1 I2=1 )                       800  +  then    \  s=1  J2
else     r@   00400000  and  ( I1  )   if  ( s=0 I1=1 )  else  ( s=0 I1=0 )  2000  +  then    \  s=0  J1
         r@   00200000  and  ( I2  )   if  ( s=0 I2=1 )  else  ( s=0 I2=0 )   800  +  then    \  s=0  J2
then     r@   001ff800  and  ( 10# )   5 lshift   +
         r>   000007ff  and  ( 11# )              +    ;












' 24#>5..10#2.j.j11#  is  _24#>5..10#2.j.j11#

\ 5.s10#2.j.j11#       ( 5..10#2.j.j11# --> 24# )
: 5..10#2.j.j11#>24#   ( 5.s10#2.j.j11# --> 24# )   >r
         r@   04000000  and  ( s   ) ( 7 rshift )
if       r@        800  and  ( j2  )   if  ( s=1 j2=1 )  800  else  ( s=1 j2=0 )     0           then  \  s=1  j2
         r@       2000  and  ( j1  )   if  ( s=1 j1=1 ) 2000  else  ( s=1 j1=0 )     0           then  +
else     r@        800  and  ( j2  )   if  ( s=0 j2=1 )    0  else  ( s=0 j2=0 )   800 7 lshift  then  \  s=0  j2
         r@       2000  and  ( j1  )   if  ( s=0 j1=1 )    0  else  ( s=0 j1=0 )  2000 4 lshift  then  +
then     r@   03ff0000  and  ( #10 )   5 rshift   +
         r@   000007ff  and  ( #11 ) ( 0 rshift ) +
         r>   04000000  and  ( s   ) ( 7 rshift )
         if   ff800000  or   then      ;


0 value  (ss)

: 5..10#2.j.j11#>24#'''   ( a' code  -- a' n )  drop  dup  to (a')
  4                       to <<byte>>
  1a 1a             ?~?>  to (ss)
  0d 0d             ?~?>  to (j1)
  0b 0b             ?~?>  to (j2)
  (ss)                                  17 lshift     \ s
  (j1) (ss)  xor  if  0  else  1  then  16 lshift  +  \ i1
  (j2) (ss)  xor  if  0  else  1  then  15 lshift  +  \ i2
  19 10  0a  0  ?~?+?~?>                           +    2*
  18  SIGN.EXTEND.n    +   4+   ;
 

'  5..10#2.j.j11#>24#   is  _5..10#2.j.j11#>24#

: `5cs10#2cjcj11#:     dup  32@'  f800d000  and  ;
:  5cs10#2cjcj11#:_gene     :.mnem_  ." `5cs10#2cjcj11#"  gn#  ." = if (4  24rel,4" .1" mnem" xt0 ;
:  5cs10#2cjcj11#:
   create   dup  ,     5cs10#2cjcj11#:_gene
   does>    >r          ( here' - ) ( -0400,0000 ~ +0400,0000 )
            24rel.check.cm4 ( here' - ) ( pc+rel24 )  5..10#2.j.j11#>24#  r>  @ ( op.code )  +  0~15<->16~31   32,'  all.ok?.off  ;

:  5cs10#2cjcj11#:         \  ''''
   create   dup  ,     5cs10#2cjcj11#:_gene
   does>    >r          ( here' - ) ( -0400,0000 ~ +0400,0000 )
            24rel.check.cm4 ( here' - ) ( pc+rel24 )  24#>5..10#2.j.j11#  r>  @ ( op.code )  +  0~15<->16~31   32,'  all.ok?.off  ;

   f0009000  5cs10#2cjcj11#:  jmp_#24

: jmp_#  ( a' -- )   ( align.to.4* )
         dup   here'  4+  -   -7ff    7ff     between   if  jmp_#11   exit  then
         dup   here'  4+  -   -7ffff  7ffff   between   if  jmp_#20   exit  then
         dup   here'  4+  -   -7fffff 7fffff  between   if  jmp_#24   exit  then   abort"  jmp exceeds 24# "  ;
\ ******************************************************************************
\ 4.6.13   BFC            T1

\ Bit Field Clear clears any number of adjacent bits at any position in a register, without affecting the other
\ bits in the register.
\ : 17c3#4r2#c5m:
\  create   dup  ,   17c3#4r2#c5m:_gene
\  does>
\ BFC R4, #8, #12 ; Clear bit 8 to bit 19 (12 bits) of R4 to 0
\ BFI R9, R2, #8, #12 ; Replace bit 8 to bit 19 (12 bits) of R9 with bit 0 to bit 11 from R2
\ ------------------------------------------------------------------------------
: 5#>14~12,7~6  ( n1 -- n2 )
  dup   1c and     4 lshift
  swap   3 and  +  6 lshift  ;

: 17c3#4r2#c5m:_gene   :.mnem_  ." `17c3#4r2#c5m" #=if4 ."  0b  8  12p  4 0 13p 0e 0c 7 6  24p" .3" mnem" xt0 ;

: 17c3#4r2#c5m:
  create   dup  ,   17c3#4r2#c5m:_gene
  does>    @    ( op.code r # # )             >r  ( op.code )
           2dup  max  5#.check                >r  ( m )
                 min  5#.check  5#>14~12,7~6      ( lsb )    r>   swap  -  >r  ( m )
                      4r.check  ( Rd ) 100 *  r>  ( lsb ) +  r> ( m )  +  r> ( op.code )  +  0~15<->16~31   32,'  all.ok?.off  ;

: max.min    ( m n -- max min )   2dup min  >r  max  r> ;
: bit.n~m=0  ( m n -- mask.# )     max.min  2>r  ffffffff  20 r> - lshift
                                                 ffffffff     r>   rshift   and   ffffffff  xor ;

\ : Rn#32
\    |<-msb                 |<-lsb 
\ 1110 0000 0000 0000 0000 0011
\ ---_ ____ ____ ____ ____ __--
original.mnemonic?  on        f36f0000   17c3#4r2#c5m:  bfc_R,#,#
original.mnemonic?  on        f36f0000   17c3#4r2#c5m:  bfc.R,#,#
                            \ f36f0000   17c3#4r2#c5m:  Rbit#~#=0
original.mnemonic?  off       f36f0000   17c3#4r2#c5m:  bfc_R,#,#
original.mnemonic?  off       f36f0000   17c3#4r2#c5m:  bfc.R,#,#

\           Rn#
\ ******************************************************************************
\ 4.6.14   BFI            T1         ???????????????????

\ T1 BFC<c> <Rd>,#<lsb>,#<width>
\ 151413121110 9 8 7 6 5 4 3 2 1 015 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0(0)1 1 0 1 1 0 1 1 1 1 0 ==imm3== ====Rd===imm2(0)===msb===
\  d = UInt(Rd); msbit = UInt(msb); lsbit = UInt(imm3:imm2);
\  if BadReg(d) then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
\ : 12c4rc3#4r2#c5m:_gene
\   :.mnem_  ." `12c4rc3#4r2#c5m" #=if4 ."  0b 8 11p 13 10  12p 4 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;

: 12c4rc3#4r2#c5m:_gene  :.mnem_  ." `12c4rc3#4r2#c5m" #=if4 ."  0b 8 11p 13 10  12p 4 0 13p 3#4.2#6." .4" mnem" xt0 ;
: 12c4rc3#4r2#c5m:
  create   dup  ,   12c4rc3#4r2#c5m:_gene
  does>    @    ( Rd Rn lsb m op.code )       >r  ( op.code )
                      5#.check                >r  ( m )
                      5#.check  5#>14~12,7~6  >r  ( lsb )
                      4r.check ( Rn )   100 * >r  ( Rn )
                      4r.check ( Rd ) 10000 * r>  ( Rn ) +  r> ( lsb ) +  r> ( m )  +  r> ( op.code )  +  0~15<->16~31   32,' all.ok?.off  ;

  f3600000  12c4rc3#4r2#c5m:  bfi.R,R,#,#
\ ******************************************************************************
\ 4.6.15   bic            T1
\ Bit Clear (immediate) performs a bitwise and of a register value and the complement of an immediate
\ value, and writes the result to the destination register. It can optionally update the condition flags based on
\ the result.
\ T1 bic{S}<c> <Rd>,<Rn>,#<const>
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 i 0 0 0 0 1 S Rn 0 imm3 Rd imm8
\ d = UInt(Rd); n = UInt(Rn); setflags = (S == '1');
\ (imm32, carry) = ThumbExpandImmWithC(i:imm3:imm8, APSR.C);
\ if BadReg(d) || BadReg(n) then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
original.mnemonic?  on     f0300000  5c#5cc4rc3#4r8#:  bics_R,R,#12
original.mnemonic?  off    f0300000  5c#5cc4rc3#4r8#:  R=Rn#12/,s
original.mnemonic?  on     f0200000  5c#5cs4rc3#4r8#:  bic_R,R,#12
original.mnemonic?  off    f0200000  5c#5cs4rc3#4r8#:  R=Rn#12/

: r=Rn#/,s              R=Rn#12/,s  ;  \ . causing the problem
: r=Rn#/s               R=Rn#12/,s  ;
: r=Rn#/                R=Rn#12/    ;

: Rn#/,s   >r  dup  r>  R=Rn#12/,s  ;  \ . causing the problem
: Rn#/s    >r  dup  r>  R=Rn#12/,s  ;
: Rn#/     >r  dup  r>  R=Rn#12/    ;
\ ******************************************************************************
\ 4.6.16   bic            T1
\ Bit Clear (register) performs a bitwise and of a register value and the complement of an optionally-shifted
\ register value, and writes the result to the destination register. It can optionally update the condition flags
\ based on the result.
\ T1 bicS <Rdn>,<Rm> Outside IT block.
\ bic<c> <Rdn>,<Rm> Inside IT block.
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 0 1 0 0 0 0 1 1 1 0 Rm Rdn
\ d = UInt(Rdn); n = UInt(Rdn); m = UInt(Rm); setflags = !InITBlock();
\ (shift_t, shift_n) = (SRType_None, 0);
\ ------------------------------------------------------------------------------
original.mnemonic?  on     4380  10c3r3r:  bic_R,R
original.mnemonic?  off    4380  10c3r3r:  RnR/
\ ------------------------------------------------------------------------------
\ 4.6.16   bic            T2
\ ------------------------------------------------------------------------------
\ T2 bic{S}<c>.W <Rd>,<Rn>,<Rm>{,<shift>}
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 0 1 0 1 0 0 0 1 S Rn (0) imm3 Rd imm2 type Rm
\ d = UInt(Rd); n = UInt(Rn); m = UInt(Rm); setflags = (S == '1');
\ (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\ if BadReg(d) || BadReg(n) || BadReg(m) THEN UNPREDICTABLE;

comment:
original.mnemonic?  on      ea200000  11cs4rc3#4r2#ty4r:  bic_R,R,R
original.mnemonic?  off     ea200000  11cs4rc3#4r2#ty4r:  R=RnR/

: RnR/   3r3r?  if  RnR/   exit  then  4r4r?  if  >r dup r>  R=RnR/  then  -1 abort" *** R should be 0~F (15) ***" ;
comment;
 
\ -------------------------------------------------------------------------
original.mnemonic?  on       ea200000  11cc4rc3#4r2#004r:  bic_R,R,R,lsl,#
original.mnemonic?  on       ea200010  11cc4rc3#4r2#014r:  bic_R,R,R,lsr,#
original.mnemonic?  on       ea200020  11cc4rc3#4r2#104r:  bic_R,R,R,asr,#
original.mnemonic?  on       ea200030  11cc4rc3#4r2#114r:  bic_R,R,R,ror,#

original.mnemonic?  off      ea200000  11cc4rc3#4r2#004r:  R=RnR/<<#
original.mnemonic?  off      ea200010  11cc4rc3#4r2#014r:  R=RnR/>>#
original.mnemonic?  off      ea200020  11cc4rc3#4r2#104r:  R=RnR/,a>>#
original.mnemonic?  off      ea200030  11cc4rc3#4r2#114r:  R=RnR/>>>#

original.mnemonic?  on       ea300000  11cc4rc3#4r2#004r:  bics_R,R,R,lsl,#
original.mnemonic?  on       ea300010  11cc4rc3#4r2#014r:  bics_R,R,R,lsr,#
original.mnemonic?  on       ea300020  11cc4rc3#4r2#104r:  bics_R,R,R,asr,#
original.mnemonic?  on       ea300030  11cc4rc3#4r2#114r:  bics_R,R,R,ror,#

original.mnemonic?  off      ea300000  11cc4rc3#4r2#004r:  R=RnR/<<#,s
original.mnemonic?  off      ea300010  11cc4rc3#4r2#014r:  R=RnR/>>#,s
original.mnemonic?  off      ea300020  11cc4rc3#4r2#104r:  R=RnR/,a>>#,s
original.mnemonic?  off      ea300030  11cc4rc3#4r2#114r:  R=RnR/>>>#,s

: R=RnR/      ( r r r -- )              0  R=RnR/<<#    ;
: RnR/<<#     ( r r # -- )  2>r  dup  2r>  R=RnR/<<#    ;
\ RnR/        ( r r ---- )              0    RnR/<<#    ;

: R=RnR/,s    ( r r r -- )              0  R=RnR/<<#,s  ;
: RnR/<<#,s   ( r r # -- )  2>r  dup  2r>  R=RnR/<<#,s  ;
: RnR/,s      ( r r ---- )              0    RnR/<<#,s  ;
\ --------------------------------------------------------------------------   
\ ******************************************************************************
\ 4.6.17   BKPT           T1

\ Breakpoint causes a software breakpoint to occur.
\ Encodings
\ imm32 = ZeroExtend(imm8, 32);
\ // imm32 is for assembly/disassembly only and is ignored by hardware.
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from v5 onwards.
\ T1 BKPT #<imm8>
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 0 1 1 1 1 1 0 ======imm8=====
\ ------------------------------------------------------------------------------
: `8c8#      dup 16@'  ff00  and  ;
:  8c8#:_gene   :.mnem_  ." `8c8#" #=if2 ."  7  0  14p" .1" mnem" xt0 ;
:  8c8#:
   create   dup  ,   8c8#:_gene
   does>    >r       8#*4.check    r>  @   +  16,'  all.ok?.off  ;

      be00 8c8#:   bkpt
\ ******************************************************************************
\ 4.6.18 BL, blx (immediate)      T1

\ Branch with Link (immediate) calls a subroutine at a PC-relative address.
\ T1 BL<c> <label> Outside or last in IT block
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 S =======imm10======= 1 1J1 1J2 =========imm11=======
\ I1 = NOT(J1 EOR S); I2 = NOT(J2 EOR S);
\ imm32 = SignExtend(S:I1:I2:imm10:imm11:'0', 32);
\ toARM = FALSE;
\ if InITBlock() && !LastInITBlock() then UNPREDICTABLE;    -16777216 to 16777214  ==  -100.0000 to FF,FFFE
\ ------------------------------------------------------------------------------
\ : 5cs10#2cjcj11#:_gene  :.mnem_  ." `5cs10#2cjcj11#" #=if4 ."  4,10#5.11#,4" .1" mnem" xt0 ;
\   5.s10#2.j.j11#           ( 24# --> 5..10#2.j.j11# )
\ : 24#>5..10#2.j.j11#       ( 24# --> 5.s10#2.j.j11# )  ;
                                         \ bit 12 =1  cortex Mx mode
original.mnemonic?  on       f000d000  5cs10#2cjcj11#:  BL_#24
original.mnemonic?  off      f000d000  5cs10#2cjcj11#:  rcall_#24
                             f000d000  5cs10#2cjcj11#:  rcall
                             f000d000  5cs10#2cjcj11#:   call.#24
                           \ f000d000  5cs10#2cjcj11#:  rcall.#24
\ ------------------------------------------------------------------------------
\ 4.6.18 BL, blx (immediate)      T2      used in ARM mode

\ T2 blx<c> <label> Outside or last in IT block
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 S imm10H 1 1 J1 0 J2 imm10L 0
\ I1 = NOT(J1 EOR S); I2 = NOT(J2 EOR S);
\ imm32 = SignExtend(S:I1:I2:imm10H:imm10L:'00', 32);
\ toARM = TRUE;
\ if InITBlock() && !LastInITBlock() then UNPREDICTABLE;
                                        \ bit 12 =0  ARM mode
\ ******************************************************************************
\ 4.6.19   blx(register)  T1

comment:
blx (register)
Branch and Exchange calls a subroutine at an address and instruction set specified by a register.
Encodings
m = UInt(Rm);
if m == 15 then UNPREDICTABLE;
if InITBlock() && !LastInITBlock() then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set from v5 onwards.
T1 blx<c> <Rm> Outside or last in IT block
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
0 1 0 0 0 1 1 1 1 Rm (0)(0)(0)
comment;
\ ------------------------------------------------------------------------------
: 9c4r3#:_gene    :.mnem_  ." `9c4r3#" #=if2 ."   6  3 13p 2 0 14p" .2" mnem" xt0 ;
: 9c4r3#:
  create  dup  ,  9c4r3#:_gene
  does>   >r  ( R # ) 3#.check   swap  4r.check  +  r>  @  +  16,'  all.ok?.off  ;

original.mnemonic?  on    4780  9c4r3c:  blx_R
original.mnemonic?  on    4780  9c4r3c:  blx.R
original.mnemonic?  off   4780  9c4r3c:  call_R
\ ******************************************************************************
\ 4.6.20   bx             T1

comment:
4.6.20 bx
Branch and Exchange causes a branch to an address and instruction set specified by a register.
Encodings
m = UInt(Rm);
if InITBlock() && !LastInITBlock() then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set.
T1 bx<c> <Rm> Outside or last in IT block
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
0 1 0 0 0 1 1 1 0 Rm (0)(0)(0)
comment;
\ ------------------------------------------------------------------------------
original.mnemonic?  on      4700  9c4r3c:  bx_R
original.mnemonic?  on      4700  9c4r3c:  bx.R
original.mnemonic?  off     4700  9c4r3c:  jmp_R
original.mnemonic?  off     4700  9c4r3c:  jmp_R


\   4700  9c4r3c:  call.R
\ ******************************************************************************
\ 4.6.21   bxJ  (register)  T1
comment:
4.6.21 bxJ
Branch and Exchange Jazelle attempts to change to Jazelle state. If the attempt fails, it branches to an
address and instruction set specified by a register as though it were a bx instruction.
Encodings
m = UInt(Rm);
if BadReg(m) then UNPREDICTABLE;
if InITBlock() && !LastInITBlock() then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
T1 bxJ<c> <Rm> Outside or last in IT block
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 1 0 0 1 1 1 1 0 0 Rm 1 0 (0) 0 (1)(1)(1)(1)(0)(0)(0)(0)(0)(0)(0)(0)
comment;

\   f3c0  12c4r16c:  bxJ.R
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.22   cbnz.R         T1
\ 4.6.22 cbnz
\ Compare and Branch on Non-Zero compares the value in a register with zero, and conditionally branches
\ forward a constant value. It does not affect the condition flags.
\ Encodings
\ n = UInt(Rn); imm32 = ZeroExtend(i:imm5:'0', 32);
\ if InITBlock() then UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
\
\ T1 cbnz <Rn>,<label> Not allowed in IT block.
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\  1 0 1 1|1 0 i 1|==imm5=== ==Rn=|       -->  6c#c5#3r
\         |    #  |# # # #|#      |
\         |       |    i #|# # # #|

:  #>6.i.5#3.  ( # -- 6.i.5#3. )  dup>r   20 and  4 lshift  r>  1f  and  3 lshift  or  ;  \  3f  #>6.i.5#3.  --> 2f8
:  6.i.5#3.>#  ( 6.i.5#3. -- # )  dup>r  200 and  4 rshift  r>  f8  and  3 rshift  or  ;  \ 2f8  6.i.5#3.>#  -->  3f
\ ------------------------------------------------------------------------------
\  2,#.5#3.,4  ( a' -- a' # )   dup    16@'  2780 and  2000 /mod  40 *   swap  8 /  +  ;
\  2,#.5#3.,4  ( a' -- a' # )   dup>r  16@'  dup>r  200 and  4 rshift  r>  f8 and 3 rshift  +  r> 2+  +  .xxxxxxxx(h)  4p ;
\  2,#.5#3.,4  ( a' -- a' )     dup>r  16@'  6.i.5#3.>#      r@ 2+  +  43 ?y  .xxxxxxxx(h)   ( 4p )  r> ;
:  2,#.5#3.,4  ( a' -- a' )     dup>r  16@'  6.i.5#3.>#  2*  r@ 4 + +  43 ?y  .xxxxxxxx(h)   ( 4p )  r> ;

:  5rel.check  drop  ;
: `6c#c5#3r    dup  16@'  fd00  and  ;  ( a' -- a' op.code )


:  6c#c5#3r:_gene    :.mnem_  ." `6c#c5#3r" #=if2 ."   2  0  13p   2,9~9+7~3,4"   .2" mnem" xt0 ;
:  6c#c5#3r:_gene    :.mnem_  ." `6c#c5#3r" #=if2 ."   2  0  13p   9 9 7 3 24p*2" .2" mnem" xt0 ;

:  6c#c5#3r:
   create   dup  ,   6c#c5#3r:_gene
   does>    ( r # a )  to (a)     6#.check  to (#)     3r.check  to (Rd)
       (Rd)   2 0       >?~?
       (#)    9 9  7 3  >?~?+?~?   +
       (a)    @                    +     16,'  all.ok?.off  ;

:  6c#c5#3r:
   create   dup  ,   6c#c5#3r:_gene
   does>    @  ( op.code R rel8 ) >r   here' 2+  -  6#.check   #>6.i.5#3.  swap  3r.check  +  r> +  16,'  all.ok?.off  ;


variable  if_R?0.pc+#?

:  6c#c5#3r:if  ( -- here'-2 )
   create   dup  ,   6c#c5#3r:_gene
   does>    @  ( op.code R rel8 ) >r  5#*4.check  swap  3r.check  r> +  +  16,'  all.ok?.off  ( here'  2- ) if_R?0.pc+#? on   ;

original.mnemonic?  on      b900  6c#c5#3r:    cbnz_R,#
original.mnemonic?  on      b900  6c#c5#3r:    cbnz.R,#
original.mnemonic?  off     b900  6c#c5#3r:if  if_R=0.pc+#

:  if_R=0   here'     if_R=0.pc+#    here'  ;   \  cr.  here'  3  here' 2+  if_R=0.pc+#   then'  dis
\ ******************************************************************************
\ 4.6.23   CBZ.R          T1

\ Compare and Branch on Zero compares the value in a register with zero, and conditionally branches forward
\ a constant value. It does not affect the condition flags.
\ ------------------------------------------------------------------------------
original.mnemonic?  on      b100  6c#c5#3r:    CBZ_R,#
original.mnemonic?  on      b100  6c#c5#3r:    CBZ.R,#
\                           b100  6c#c5#3r:    CBZ.R,#
original.mnemonic?  off     b100  6c#c5#3r:if  if_R<>0.pc+#


:  if_R<>0  here'     if_R<>0.pc+#   here'  ;   \  cr.  here'  7  here' 2+  if_R<>0.pc+#  then'  dis
\ ******************************************************************************
\ 4.6.24   CDP,CDP2       T1

\ Coprocessor Data Processing tells a coprocessor to perform an operation that is independent of ARM
\ registers and memory.
\ If no coprocessor can execute the instruction, an Undefined Instruction exception is generated.
\ ------------------------------------------------------------------------------
comment:
:                  3cC4c4o4r4r4p3o4r:_gene
  :.mnem_      ." `3cC4c4o4r4r4p3o4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .4" mnem" xt0 ;
:                  3cC4c4o4r4r4p3o4r:
  create   dup  ,  3cC4c4o4r4r4p3o4r:_gene
  does>   \
   32@^   32,'  ;
   ee000000  3cC4c4o4r4r4p3o4r:  CDP
comment;
\ ******************************************************************************
\ 4.6.25   clrex             T1
\ Clear Exclusive clears the local record of the executing processor that an address has had a request for an
\ exclusive access.
\ ------------------------------------------------------------------------------
\ comment:
: `32c            dup 32@^  ;
:  32c:_gene      :.mnem_  ." `32c" #=if4 ."  " .1" mnem" xt0 ;

:  32c:
   create   dup  ,   32c:_gene
   does>    32@^   32,'  all.ok?.off  ;

   f3bf8f2f  32c:  clrex
\ comment;
\ ******************************************************************************
\ 4.6.26   CLZ               T1          \  0000 001x xxxx xxxx xxxx  xxxx xxxx xxxx    n0?
\  T1      CLZ<c> <Rd>,<Rm>
\ Count Leading Zeros returns the number of binary zero bits before the first binary one bit in a value.
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 1 0 1 0 1 0 1 1 ==Rm2== 1 1 1 1 ===Rd== 1 0 0 0 ===Rm==
\ d = UInt(Rd); m = UInt(Rm); m2 = UInt(Rm2);
\ if BadReg(d) || BadReg(m) || m2 != m then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
: 12c4r4c4r4c4r:_gene  :.mnem_  ." `12c4r4c4r4c4r" #=if4 ."  0b  8  12p 13 10 13p 3 0 14p" .3" mnem" xt0 ;
: 12c4r4c4r4c4r: ( Rd Rn Rm --- )
  create  dup   ,   12c4r4c4r4c4r:_gene
  does>   @  ( op.code )  >r ( rd rn rm )   4r.check  <Rm> !    4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rm
     <Rd> @   100 *  +                                           \ op.code+Rm+Rd
     <Rm> @          +                                           \ op.code+Rm+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   ;

: 12c4=4c4r4c4r:_gene  :.mnem_  ." `12c4=4c4r4c4r" #=if4 ."  0b  8  13p  3 0 14p" .2" mnem" xt0 ;
: 12c4=4c4r4c4r: ( Rd Rm --- )
  create  dup   ,   12c4=4c4r4c4r:_gene
  does>   @  ( op.code )  >r     4r.check  <Rm> !   4r.check <Rd> !   r>
     <Rm> @ 10000 *  +                                           \ op.code+Rm
     <Rd> @   100 *  +                                           \ op.code+Rm+Rd
     <Rm> @          +                                           \ op.code+Rm+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   ;

\ ( ?????????  )   fab0f080   12c4=4c4r4c4r:   CLZ_R,R,R
  ( ?????????  )   fab0f080   12c4=4c4r4c4r:   CLZ_R,R
\ ******************************************************************************
\ 4.6.27    cmn(immediate)   T1
\  T1       cmn<c> <Rn>,#<const>

\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 i 0 1 0 0 0 1 ===Rn== 0=imm3= 1 1 1 1 =====imm8======      -->  5c#6c4rc3#4c8#
\ Compare Negative (immediate) adds a register value and an immediate value. It updates the condition flags
\ based on the result, and discards the result.
\ n = UInt(Rn); imm32 = ThumbExpandImm(i:imm3:imm8);
\ if n == 15 then UNPREDICTABLE;
\ : 12#>5c#6c4rc3#4c8#  ( 12# -- 5c#6c4rc3#4c8# )
\   800 /mod ( i ) 04000000 * swap  100  /mod ( 8# 3# ) 1000 *  + ( # )  +  ;
\ >r  r@  800 and  0f lshift   r@  700 and  4 lshft   r>  ff  and   or  or  ;
 
:  5c#6c4rc3#4c8#>12#   ( op.code -- 12# )  >r
   r@  04000000  and   0f   rshift
   r@  00007000  and    4   rshift    +
   r>        ff  and (  0   rshift )  +    ;

\ : 4,5.#6.4..3#4.8#>n,4  ( a' -- a' )  dup 32@^  5c#6c4rc3#4c8#>12#  ThumbExpand.#12->n  ( 4p ) dup  >disassem.number.stack    43 ?y  .xxxxxxxx(h)  ;
: 4,5c#6c4rc3#4c8#>n,4  ( a' -- a' )  dup 32@^  5c#6c4rc3#4c8#>12#  ThumbExpand.#12->n  0= abort" *** invalid number *** " ( 4p ) dup  >disassem.number.stack   43 ?y .xxxxxxxx(h)  ;
\ ------------------------------------------------------------------------------
\ 5c#6c4rc3#4c8#:_gene   :.mnem_  ." `5c#6c4rc3#4c8#" #=if4 ."  0b  8  12p 13 10 13p 7 0 14p"            .3" mnem" xt0 ;
: 5c#6c4rc3#4c8#:_gene
:.mnem_  ." `5c#6c4rc3#4c8#" #=if4 ."           13 10 13p 4,5c#6c4rc3#4c8#>n,4" .2" mnem" xt0 ;

: 5c#6c4rc3#4c8#:  ( op.code -- )  \  does>  ( Rn # --- )
  create  dup  ,  5c#6c4rc3#4c8#:_gene
  does>   >r   ( Rn # --- )   n->ThumbExpand.#12  12#.check <#> !  ( no.r15.check ) 4r.check <Rn> !  \ 4r.check <Rd> !
      r>  @
     <Rn> @ 10000 *  +               \  op.code+Rn
     <#>  @  12#>5c#6c4rc3#4c8#   +  \  op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr !  all.ok?.off  ;

\ : 5c#5cs4rc3#4r8#:_gene
\ : rc3#4c8#:_gene   drop  ;
original.mnemonic?  on      f1100f00   5c#6c4rc3#4c8#:  cmn_R,#
original.mnemonic?  on      f1100f00   5c#6c4rc3#4c8#:  cmn.R,#
original.mnemonic?  off     f1100f00   5c#6c4rc3#4c8#:  R:#/
                      

    f1100f00   5c#6c4rc3#4c8#:  R:-#
\ ******************************************************************************
\ 4.6.28    cmn(register)    T1
\   T1      cmn<c> <Rn>,<Rm>
\ Compare Negative (register) adds a register value and an optionally-shifted register value. It updates the
\ condition flags based on the result, and discards the result.
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  0  1  0  0  0  0  1  0  1  1  ===Rm==  ===Rn==     -->  10c3r3r
\ n = UInt(Rn); m = UInt(Rm);
\ (shift_t, shift_n) = (SRType_None, 0);
\ ------------------------------------------------------------------------------
original.mnemonic?  on        42c0  10c3r3r:  cmn_R,R
original.mnemonic?  on        42c0  10c3r3r:  cmn.R,R
original.mnemonic?  off ( ? ) 42c0  10c3r3r:  R:R/
                              42c0  10c3r3r:  R:-R
                      
\ ------------------------------------------------------------------------------
\ 4.6.28    cmn(register)    T2
\   T2      cmn<c>.W <Rn>, <Rm> {,<shift>}
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 0 1 0 1 1 0 0 0 1 ===Rn==(0)imm3= 1 1 1 1 =#2 type===Rm==      -->  12c4rc3#4c2#ty4r
\ n = UInt(Rn); m = UInt(Rm);
\ (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\ if n == 15 || BadReg(m) then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
\ `12c4rc3#4c2#ty4r   dup 32@^   fff08f00  and  ;  ( a' -- a' op.code )
:  12c4rc3#4c2#ty4r:_gene     :.mnem_  ." `12c4rc3#4c2#ty4r" #=if4 ."  13 10  12p 3 0 13p 0e 0c 7 6  24p" .3" mnem" xt0 ;
:  12c4rc3#4c2#ty4r:
   create   dup  ,  12c4rc3#4c2#ty4r:_gene
   does>    @
           swap  5#.check  4 /mod  1000 *  swap  40 *  +   +
           swap  4r.check                                  +
           swap  4r.check  10000 *                         +   0~15<->16~31   32,'  all.ok?.off   shift.ok? on  ;

: `12c4rc3#4c2#2c4r   dup 32@^   fff08f00  and  ;  ( a' -- a' op.code )
:  12c4rc3#4c2#2c4r:_gene     :.mnem_  ." `12c4rc3#4c2#2c4r" #=if4 ."  13 10  12p 3 0 13p 0e 0c 7 6  24p" .3" mnem" xt0 ;
:  12c4rc3#4c2#2c4r:
   create   dup  ,  12c4rc3#4c2#2c4r:_gene
   does>    @
           swap  5#.check  4 /mod  1000 *  swap  40 *  +   +
           swap  4r.check                                  +
           swap  4r.check  10000 *                         +   0~15<->16~31   32,'  all.ok?.off   shift.ok? on  ;

original.mnemonic?  on     eb100f00  12c4rc3#4c2#2c4r:  cmn_R,R
original.mnemonic?  on     eb100f00  12c4rc3#4c2#2c4r:  cmn.R,R
original.mnemonic?  off    eb100f00  12c4rc3#4c2#2c4r:  R:R/
                      

comment:
   eb100f00  12c4rc3#4c2#2c4r:  R:-R.?#

   eb100f00  12c4rc3#4c2#2c4r:  R:R/<<#
   eb100f10  12c4rc3#4c2#2c4r:  R:R/>>#
   eb100f20  12c4rc3#4c2#2c4r:  R:R/,a>>#
   eb100f30  12c4rc3#4c2#2c4r:  R:R/>>>#

   eb100f00  12c4rc3#4c2#2c4r:  cmn.R,R,#.lsl
   eb100f10  12c4rc3#4c2#2c4r:  cmn.R,R,#.lsr
   eb100f20  12c4rc3#4c2#2c4r:  cmn.R,R,#.asr
   eb100f30  12c4rc3#4c2#2c4r:  cmn.R,R,#.rrx

:  R:R/   3r3r?  if   R:R/   exit  then   4r4r?  if   0  R:R/<<#   exit  then  -1 abort"  *** invalid R *** "  ;
:  R:-R   3r3r?  if   R:-R   exit  then   4r4r?  if   0  R:R/<<#   exit  then  -1 abort"  *** invalid R *** "  ;
comment;
\ ******************************************************************************
\ 4.6.29     cmp(immediate)   T1
\ 4.6.29 cmp (immediate)
\ Compare (immediate) subtracts an immediate value from a register value. It updates the condition flags
\ based on the result, and discards the result.
\ Encodings
\ n = UInt(Rdn); imm32 = ZeroExtend(imm8, 32);
\ n = UInt(Rn); imm32 = ThumbExpandImm(i:imm3:imm8);
\ if n == 15 then UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set.
\ Encoding T2 All versions of the Thumb instruction set from Thumb-2 onwards.
\
\ T1 cmp <Rn>,#<imm8>
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  0  0  1  0  1 ===Rn===  ========imm8==========    -->  5c3r8#
\
\ T2 cmp<c>.W <Rn>,#<const>
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  1  1  1  1  0  i  0  1  1  0  1  1  =====Rn===  0 ==imm3==  1  1  1  1  =========imm8========= --> 5c#6c4rc3#4c8#
\ ------------------------------------------------------------------------------
original.mnemonic?  on       2800  5c3r8#:  cmp_R,#8
original.mnemonic?  on       2800  5c3r8#:  cmp.R,#8
original.mnemonic?  off      2800  5c3r8#:  R:#8
\ ------------------------------------------------------------------------------
\ 4.6.29     cmp(immediate)   T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f1b00f00   5c#6c4rc3#4c8#:  cmp_R,#12
original.mnemonic?  on       f1b00f00   5c#6c4rc3#4c8#:  cmp.R,#12
original.mnemonic?  off      f1b00f00   5c#6c4rc3#4c8#:  R:#12
                      

: R:#    3r8#?   if   R:#8    exit  then
         4r12#?  if   R:#12   exit  then   -1  abort"  *** invalid  R *** "  ;

: R:0        0   R:#  ;
\ ******************************************************************************
\ 4.6.30    cmp(register)    T1
\ 4.6.30    cmp (register)
\ Compare (register) subtracts an optionally-shifted register value from a register value. It updates the
\ condition flags based on the result, and discards the result.
\ Encodings
\ n = UInt(Rn); m = UInt(Rm);
\ (shift_t, shift_n) = (SRType_None, 0);
\ n = UInt(N:Rn); m = UInt(Rm);
\ (shift_t, shift_n) = (SRType_None, 0);
\ if n < 8 && m < 8 then UNPREDICTABLE;
\ if n == 15 then UNPREDICTABLE;
\ n = UInt(Rn); m = UInt(Rm);
\ (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\ if n == 15 || BadReg(m) then UNPREDICTABLE;
\ Architecture versions
\ Encodings T1, T2 All versions of the Thumb instruction set.
\ Encoding T3 All versions of the Thumb instruction set from Thumb-2 onwards.
\
\ T1 cmp<c> <Rn>,<Rm> <Rn> and <Rm> both from R0-R7
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  0  1  0  0  0  0  1  0  1  0  ===Rm==  ===Rn==
\
\ T2 cmp<c> <Rn>,<Rm> <Rn> and <Rm> not both from R0-R7
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  0  1  0  0  0  1  0  1  N  ====Rm====  ===Rn==
\
\ T3 cmp<c>.W <Rn>, <Rm> {,<shift>}
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  1  1  1  0  1  0  1  1  1  0  1  1  ====Rn==== (0) ==imm3=  1  1  1  1  imm2  type  ====Rm==== --> 12c4rc3#4c2#2c4r
\ ------------------------------------------------------------------------------
original.mnemonic?  on       4280  10c3r3r:  cmp_R,R3
original.mnemonic?  on       4280  10c3r3r:  cmp.R,R3
original.mnemonic?  off      4280  10c3r3r:  R:R3
                      
\ ------------------------------------------------------------------------------
\ 4.6.30    cmp(register)    T2
\ T2 cmp<c> <Rn>,<Rm> <Rn> and <Rm> not both from R0-R7
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  0  1  0  0  0  1  0  1  N  ====Rm====  ===Rn==
\ ------------------------------------------------------------------------------
: r8~r15?  ( n -- f )  8  0f  between  ;
: r8~r15.check ( n -- n )  dup  r8~r15?  if  abort"  not between r8 ~ r15 "  then  ;
\ 4500  8cN4r3r:  cmp.R,R''
: 9c4r3r:_gene     :.mnem_  ." `9c4r3r" #=if2 ."  7 3 13p 2 0  14p" .2" mnem" xt0 ;
: 9c4r3r:
  create   dup  ,  9c4r3r:_gene
  does>  @  swap   r8~r15.check  8 *  +   swap  3r.check  +  16,'  all.ok?.off  ;

original.mnemonic?  on        4500   9c4r3r:  cmp_R,R4
original.mnemonic?  on        4500   9c4r3r:  cmp.R,R4
original.mnemonic?  off       4500   9c4r3r:      R:R4

: R:R  ( r1 r2 -- )   dup  r8~r15?  if   R:R4  else   R:R4  then  ;
\ ------------------------------------------------------------------------------



\ comment:
\ ------------------------------------------------------------------------------
\ 4.6.30    cmp(register)    T2
\ T2 cmp<c> <Rn>,<Rm> <Rn> and <Rm> not both from R0-R7
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  0  1  0  0  0  1  0  1  N  ====Rm====  ===Rn==
\ ------------------------------------------------------------------------------

: r8~r15?      ( n -- f )    8  0f  between  ;
: r8~r15.check ( n -- n )    dup  r8~r15?  if  abort"  not between r8 ~ r15 "  then  ;
: both.r<8?    ( r r -- r r f )  over r0~r7?  over  r0~r7?  and  ;

: `8cr4r3r     ( a' -- a' op.code )  dup  16@'  ff00  and  ;
:  8cr4r3r:_gene     :.mnem_  ." `8cr4r3r" #=if2 ."  7 7 2 0 23p   6 3 14p" .2" mnem" xt0 ;
:  8cr4r3r:
   create   dup  ,  8cr4r3r:_gene
   does>    ( Rn Rm a )  to (a)   both.r<8?  abort" **** <Rn> and <Rm> should not both from R0-R7 ****"  to (Rm)   to (Rn)
            (Rn)  7 7 2 0    >?~?+?~?
            (Rm)  6 3        >?~?      +
            (a)   @                    +     16,'  all.ok?.off  ;

original.mnemonic?  on        4500   8cr4r3r:  cmp.R,R4
original.mnemonic?  off       4500   8cr4r3r:      R:R4

: R:R  ( r1 r2 -- )   2dup   both.r<8?  if   R:R3  else   R:R4   then  ;

: R:R     both.r<8?  if   R:R3   exit  then
              4r4r?  if   R:R4   exit  then  -1 abort"  *** invalid R *** "  ;



\ ------------------------------------------------------------------------------
\ 4.6.30    cmp(register)    T3
\ T3 cmp<c>.W <Rn>, <Rm> {,<shift>}
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  1  1  1  0  1  0  1  1  1  0  1  1  ====Rn==== (0) ==imm3=  1  1  1  1  imm2  type  ====Rm==== --> 12c4rc3#4c2#2c4r
\ ------------------------------------------------------------------------------
   ebb00f00  12c4rc3#4c2#2c4r:  3R:R3<<#
   ebb00f00  12c4rc3#4c2#2c4r:  R333:R333<<#

original.mnemonic?  on

   ebb00f00  12c4rc3#4c2#2c4r:  cmn_R,R,#,lsl
   ebb00f10  12c4rc3#4c2#2c4r:  cmn_R,R,#,lsr
   ebb00f20  12c4rc3#4c2#2c4r:  cmn_R,R,#,asr
   ebb00f30  12c4rc3#4c2#2c4r:  cmn_R,R,#,rrx

   ebb00f00  12c4rc3#4c2#2c4r:  cmn.R,R,#,lsl
   ebb00f10  12c4rc3#4c2#2c4r:  cmn.R,R,#,lsr
   ebb00f20  12c4rc3#4c2#2c4r:  cmn.R,R,#,asr
   ebb00f30  12c4rc3#4c2#2c4r:  cmn.R,R,#,rrx
original.mnemonic?  off
   ebb00f00  12c4rc3#4c2#2c4r:  R:R<<#
   ebb00f10  12c4rc3#4c2#2c4r:  R:R>>#
   ebb00f20  12c4rc3#4c2#2c4r:  R:R,a>>#
   ebb00f30  12c4rc3#4c2#2c4r:  R:R>>>#
                      
\ :  R:R    3r3r?  if   R:R    exit  then   4r4r?  if   0  R:R<<#   exit  then  -1 abort"  *** invalid R *** "  ;


\ ******************************************************************************
\ 4.6.31     CPS
\ 4.6.31     CPS        T1
\ Change Processor State changes one or more of the A, I, and F interrupt disable bits and the mode bits of
\ the CPSR, without changing the other CPSR bits.
\
\ T1         CPS<effect> <iflags> Not allowed in IT block.
\   15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\    1  0  1  1  0  1  1  0  0  1  1  im 0  A  I  F
\   151413121110 9 8 7 6 5 4 3 2 1 0
\   |1 0 1 1|0 1 1 0|0 1 1im|0 A I F|    11cmcAIF       b660    ffe8
:  2,m0AIF,4   ( a' -- a' )       dup  16@'  17 and  10 /mod  8 *  +  4p  .xx  ;
:  2,m0AIF,4   ( a' -- a' )  dup  dup  16@'  17 and  10 /mod  8 *  +  4p  .xx  ;

:  show.m,I,A,F  ( n -- )      >r
   r@    8  and   8  =  if  ."  im=1 "  else  ."  im=0 "  then
   r@    4  and   4  =  if  ."   A=1 "  else  ."   A=0 "  then
   r@    2  and   2  =  if  ."   I=1 "  else  ."   I=0 "  then
   r>    1  and   1  =  if  ."   F=1 "  else  ."   F=0 "  then  ;

:  2,m0AIF,4   ( a' -- a' )  dup  16@'  17 and  10 /mod  8 *  +   dup  34 ?y  ." cps_"  .xx  ."    \ "  show.m,I,A,F  ;


\  11cmcAIF:_gene

: `11cmcAIF           dup  16@'  ffe8  and  ;   ( a' -- a' )
\  11cmcAIF:_gene   :.mnem_  ." `11cmcAIF" #=if2 ."   2,m0AIF,4"  .1" mnem" xt0 ;
:  11cmcAIF:_gene   :.mnem_  ." `11cmcAIF" #=if2 ."   2,m0AIF,4"  .1" mnem" xt0 ;
:  11cmcAIF:   ( # -- )
   create   dup  ,  11cmcAIF:_gene
   does>    @    +  16,'  all.ok?.off  ;

original.mnemonic?  on      b660  11cmcAIF:   cps_#4
original.mnemonic?  off     b660  11cmcAIF:   mAIF=#4

:  cps_# ( # --  )   cps_#4   ;
:  iAIF  ( # --  )   dup 4#?  if  8 /mod  10 *  +   mAIF=#4   exit  then  ;  \  0f iAIF
:  mAIF  ( # --  )   dup 4#?  if  8 /mod  10 *  +   mAIF=#4   exit  then  ;  \  0f iAIF

comment:
:  F=0   1  invert  b660  and   16,'  ;
:  A=0   2  invert  b660  and   16,'  ;
:  I=0   4  invert  b660  and   16,'  ;
:  m=0   8  invert  b660  and   16,'  ;

:  F=1   1          b660  or    16,'  ;
:  A=1   2          b660  or    16,'  ;
:  I=1   4          b660  or    16,'  ;
:  m=1   8          b660  or    16,'  ;
comment;
\ ------------------------------------------------------------------------------
\ 4.6.31     CPS        T2                            ??????????????????????????
\  T2        CPS<effect>.W <iflags>{,#<mode>} Not allowed in IT block.
\            CPS #<mode> Not allowed in IT block.
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 0 1 1 1 0 1  (1 1 1 1)1 0(0)0(0)imodM A I F ===mode==
\ enable = (imod == '10'); disable = (imod == '11'); changemode = (M == '1');
\ affectA = (A == '1'); affectI = (I == '1'); affectF = (F == '1');
\ if imod == '00' && M == '0' then
\ SEE Branches, miscellaneous control instructions on page 3-31;
\ if imod == '01' then UNPREDICTABLE;
\ if InITBlock() then UNPREDICTABLE;
\ ------------------------------------------------------------------------------
comment:
:  2,m0AIF,4   ( a' -- a' )  dup  16@'  17 and  10 /mod  8 *  +  4p  .xx  ;
\  11cmcAIF:_gene
: `11cmcAIF           dup  16@'  ffe8  and  ;   ( a' -- a' )
:  11cmcAIF:_gene   :.mnem_  ." `11cmcAIF" #=if2 ."   2,m0AIF,4"  .1" mnem" xt0 ;
:  11cmcAIF:   ( # -- )
   create   dup  ,  11cmcAIF:_gene
   does>    @    +  16,'  all.ok?.off  ;

   b660  11cmcAIF:   mAIF=#4
:  iAIF  ( # --  )   dup 4#?  if  8 /mod  10 *  +   mAIF=#4   exit  then  ;  \  0f iAIF
comment;
\ ******************************************************************************
\ 4.6.32    CPY     Copy is a pre-UAL synonym for MOV (register).
\ ------------------------------------------------------------------------------
\  :  cpy  R=R  ;
\     CPY <Rd>, <Rn>     \ This is equivalent to:
\     MOV <Rd>, <Rn>
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.33    DBG          T1
\ 4.6.33 DBG
\ Debug Hint provides a hint to debug and related systems. See their documentation for what use (if any) they
\ make of this instruction.
\ Encodings
\ // Do nothing
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from v7 onwards.
\ T1 DBG<c> #<option>
\ 151413121110 9 8 7 6 5 4 3 2 1 0 151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 0 1 1 1 0 1 0(1 1 1 1) 1 0(0)0(0)0 0 0 1 1 1 1 option     -->  28c4opt
\ ------------------------------------------------------------------------------
: 4.option.check  ;
: 28c4opt:_gene     :.mnem_  ." `28c4opt" #=if4 ." " .1" mnem" xt0 ;
: 28c4opt:
  create   dup  ,   28c4opt:_gene
  does>    >r  ( option )  4.option.check   r>  @  +   0~15<->16~31   32,'  all.ok?.off  ;
  f3af80f0  28c4opt:  DBG.option
\ ******************************************************************************
\ 4.6.34    DMB          T1
\ 4.6.34    DMB
\ Data Memory Barrier acts as a memory barrier. It ensures that all explicit memory accesses that appear in
\ program order before the DMB instruction are observed before any explicit memory accesses that appear in
\ program order after the DMB instruction. It does not affect the ordering of any other instructions executing
\ on the processor.
\ Encodings
\ // Do nothing
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from v7 onwards.
\ T1 DMB<c>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 0 1 1 1 0 1 1(1 1 1 1)1 0(0)0(1 1 1 1)0 1 0 1 option
\ ------------------------------------------------------------------------------
    f3bf8f50  28c4opt:  DMB.option
\ ******************************************************************************
\ 4.6.35    DSB          T1
\ 4.6.35    DSB
\ Data Synchronization Barrier acts as a special kind of memory barrier. No instruction in program order after
\ this instruction can execute until this instruction completes. This instruction completes when:
\ E All explicit memory accesses before this instruction complete.
\ E All Cache, Branch predictor and TLB maintenance operations before this instruction complete.
\ Encodings
\ // Do nothing
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from v7 onwards.
\ T1 DSB<c>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1 0 0 1 1 1 0 1 1(1 1 1 1)1 0(0)0(1 1 1 1)0 1 0 0 option
\ ------------------------------------------------------------------------------
    f3bf8f40  28c4opt:  DSB.option
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.36    EOR (immediate)
\ Exclusive OR (immediate) performs a bitwise Exclusive OR of a register value and an immediate value, and
\ writes the result to the destination register. It can optionally update the condition flags based on the result.
\ Encodings
\ d = UInt(Rd); n = UInt(Rn); setflags = (S == '1');
\ (imm32, carry) = ThumbExpandImmWithC(i:imm3:imm8, APSR.C);
\ if d == 15 && setflags then SEE TEQ (immediate) on page 4-393;
\ if BadReg(d) || BadReg(n) then UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
\ T1 EOR{S}<c> <Rd>,<Rn>,#<const>
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 i 0 0 1 0 0 S Rn 0 imm3 Rd imm8
\ ------------------------------------------------------------------------------
original.mnemonic?  on    f0900000  5c#5cc4rc3#4r8#:  eors_R,R,#
original.mnemonic?  on    f0900000  5c#5cc4rc3#4r8#:  eors.R,R,#
original.mnemonic?  off   f0900000  5c#5cc4rc3#4r8#:  R=Rx#,s
original.mnemonic?  on    f0800000  5c#5cs4rc3#4r8#:  eor_R,R,#
original.mnemonic?  on    f0800000  5c#5cs4rc3#4r8#:  eor.R,R,#
original.mnemonic?  off   f0800000  5c#5cs4rc3#4r8#:  R=Rx#

original.mnemonic?  on    f0800000  5c#5cs4=c3#4r8#:  eor.R,#
original.mnemonic?  off   f0800000  5c#5cs4=c3#4r8#:  Rx#

: Rx#,s     >r   dup   r>     R=Rx#,s  ;
: Rx#       >r   dup   r>     R=Rx#    ;
: R/    -1  Rx#  ;
\ ******************************************************************************
\ 4.6.37    EOR (register)  T1
\ 4.6.37 EOR (register)
\ Exclusive OR (register) performs a bitwise Exclusive OR of a register value and an optionally-shifted
\ register value, and writes the result to the destination register. It can optionally update the condition flags
\ based on the result.
\ Encodings
\ d = UInt(Rdn); n = UInt(Rdn); m = UInt(Rm); setflags = !InITBlock();
\ (shift_t, shift_n) = (SRType_None, 0);
\ d = UInt(Rd); n = UInt(Rn); m = UInt(Rm); setflags = (S == '1');
\ (shift_t, shift_n) = DecodeImmShift(type, imm3:imm2);
\ if d == 15 && setflags then SEE TEQ (register) on page 4-395;
\ if BadReg(d) || BadReg(n) || BadReg(m) THEN UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set
\ Encoding T2 All versions of the Thumb instruction set from Thumb-2 onwards.

\ T1 EORS <Rdn>,<Rm> Outside IT block.
\ EOR<c> <Rdn>,<Rm> Inside IT block.
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 0 1 0 0 0 0 0 0 0 1 Rm Rdn

original.mnemonic?  on    4040  10c3r3r:  eor_R,R
original.mnemonic?  on    4040  10c3r3r:  eor.R,R
original.mnemonic?  off   4040  10c3r3r:  RxR
\ ------------------------------------------------------------------------------
\ 4.6.37    EOR (register)  T2
\ T2 EOR{S}<c>.W <Rd>,<Rn>,<Rm>{,<shift>}
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 0|1 0 1 0|1 0 0 S|==Rn===|0 imm3= ==Rd= imm2= typ ==Rm===    11cs4rc3#4r2#ty4r     ffe08000  ea800000



\ ?????????????????????????
\  original.mnemonic?  on    ea800000  11cs4rc3#4r2#ty4r:  eor_R,R,R
\  original.mnemonic?  off   ea800000  11cs4rc3#4r2#ty4r:  R=RxR

\ ea800000  11cs4=c3#4r2#ty4r:  RxR

comment:
: `12c4rc3#4r2#ty4r         dup 32@^  ,s=1.ok??  ,shift.ok??   FFf08000 and  ;  ( a' -- a' op.code )
:  12c4rc3#4r2#ty4r:_gene   :.mnem_  ." `12c4rc3#4r2#ty4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p" .4" mnem" xt0 ;
:  12c4rc3#4r2#ty4r:
   create  dup   ,    12c4rc3#4r2#ty4r:_gene  \ to be execute next  ." 12345678 ????????"
   does>   @  >r ( Rd Rn Rm # --- )  5#.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  10000 *  +                                           \ op.code+Rn
     <Rd>  @    100 *  +                                           \ op.code+Rn+Rd
     <#>   @      4 /mod ( 2# 3# ) 1000 *  swap  40  *  + ( # ) +  \ op.code+Rn+Rd+#
     <Rm>  @           +                                           \ op.code+Rn+Rd+#+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !
     all.ok?.off  ( s=1.ok?  on )  shift.ok? on  ;
comment;


\ original.mnemonic?  on    ea800000  12c4rc3#4r2#ty4r:  eor_R,R,R<<#
\ original.mnemonic?  on    ea800000  12c4rc3#4r2#ty4r:  eor.R,R,R<<#
\ original.mnemonic?  off   ea800000  12c4rc3#4r2#ty4r:  R=RxR<<#



\ : R=RxR                     0  R=RxR<<#   ;
\ : RxR       3r3r?   if   RxR       exit  then   >r   dup  r>   R=RxR       ;
\ : RxR       3r3r?   if   eor_R,R   exit  then   >r   dup  r>   eor_R,R,R   ;

\ : R/        0f ( pc )    RxR   -1    0~15<->16~31   32,'   ;









\ -------------------------------------------------------------------------
original.mnemonic?  on       ea800000  11cc4rc3#4r2#004r:  eor_R,R,R,lsl,#
original.mnemonic?  on       ea800010  11cc4rc3#4r2#014r:  eor_R,R,R,lsr,#
original.mnemonic?  on       ea800020  11cc4rc3#4r2#104r:  eor_R,R,R,asr,#
original.mnemonic?  on       ea800030  11cc4rc3#4r2#114r:  eor_R,R,R,ror,#

original.mnemonic?  off      ea800000  11cc4rc3#4r2#004r:  R=RxR<<#
original.mnemonic?  off      ea800010  11cc4rc3#4r2#014r:  R=RxR>>#
original.mnemonic?  off      ea800020  11cc4rc3#4r2#104r:  R=RxR,a>>#
original.mnemonic?  off      ea800030  11cc4rc3#4r2#114r:  R=RxR>>>#

original.mnemonic?  on       ea900000  11cc4rc3#4r2#004r:  eors_R,R,R,lsl,#
original.mnemonic?  on       ea900010  11cc4rc3#4r2#014r:  eors_R,R,R,lsr,#
original.mnemonic?  on       ea900020  11cc4rc3#4r2#104r:  eors_R,R,R,asr,#
original.mnemonic?  on       ea900030  11cc4rc3#4r2#114r:  eors_R,R,R,ror,#

original.mnemonic?  off      ea900000  11cc4rc3#4r2#004r:  R=RxR<<#,s
original.mnemonic?  off      ea900010  11cc4rc3#4r2#014r:  R=RxR>>#,s
original.mnemonic?  off      ea900020  11cc4rc3#4r2#104r:  R=RxR,a>>#,s
original.mnemonic?  off      ea900030  11cc4rc3#4r2#114r:  R=RxR>>>#,s

: R=RxR      ( r r r -- )              0  R=RxR<<#    ;
: RxR<<#    ( r r # -- )  2>r  dup  2r>  R=RxR<<#    ;
\ RxR        ( r r ---- )                              0    RxR<<#    ;
\ RxR        ( r r ---- )  3r3r? if  RxR       exit  then   0    RxR<<#    ;
: RxR        ( r r ---- )  3r3r? if  eor_R,R   exit  then   0    RxR<<#    ;



: R=RxR,s    ( r r r -- )              0  R=RxR<<#,s  ;
: RxR<<#,s  ( r r # -- )  2>r  dup  2r>  R=RxR<<#,s  ;
: RxR,s      ( r r ---- )              0    RxR<<#,s  ;
\ --------------------------------------------------------------------------

















\ ******************************************************************************
\ 4.6.38     ISB            T1
\ 4.6.38 ISB
\ Instruction Synchronization Barrier flushes the pipeline in the processor, so that all instructions following
\ the ISB are fetched from cache or memory, after the instruction has been completed. It ensures that the
\ effects of context altering operations, such as changing the ASID, or completed TLB maintenance
\ operations, or branch predictor maintenance operations, as well as all changes to the CP15 registers,
\ executed before the ISB instruction are visible to the instructions fetched after the ISB.
\ In addition, the ISB instruction ensures that any branches that appear in program order after it are always
\ written into the branch prediction logic with the context that is visible after the ISB instruction. This is
\ required to ensure correct execution of the instruction stream.
\ Encodings
\ // Do nothing
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from v7 onwards.
\ T1 ISB<c>
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 1 0 0 1 1 1 0 1 1 (1)(1)(1) (1) 1 0 (0) 0 (1)(1)(1)(1) 0 1 1 0 option
\ ------------------------------------------------------------------------------
   f3bf8f60  28c4opt:  ISB.option
\ ******************************************************************************
\ 4.6.39     IT
\ If Then makes up to four following instructions (the IT block) conditional. The conditions for the
\ instructions in the IT block can be the same, or some of them can be the inverse of others.
\ IT does not affect the condition code flags. Branches to any instruction in the IT block are not permitted,
\ apart from those performed by exception returns.
\ 16-bit instructions in the IT block, other than cmp, cmn and TST, do not set the condition code flags. The
\ AL condition can be specified to get this changed behavior without conditional execution.
\ Encodings
\ if mask == '0000' then SEE NOP-compatible hint instructions on page 3-32
\ if firstcond == '1111' then UNPREDICTABLE;
\ if firstcond == '1110' && BitCount(mask) != 1 then UNPREDICTABLE;
\ if InITBlock() then UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
\ Assembler syntax
\ IT{x{y{z}}}<q> <firstcond>
\ where:
\ <x> Specifies the condition for the second instruction in the IT block.
\ <y> Specifies the condition for the third instruction in the IT block.
\ <z> Specifies the condition for the fourth instruction in the IT block.
\ <q> See Standard assembler syntax fields on page 4-6.
\ <firstcond> Specifies the condition for the first instruction in the IT block.
\ Each of <x>, <y>, and <z> can be either:
\ T Then. The condition attached to the instruction is <firstcond>.
\ E Else. The condition attached to the instruction is the inverse of <firstcond>. The
\ condition code is the same as <firstcond>, except that the least significant bit is
\ inverted. E must not be specified if <firstcond> is AL.
\ T1 IT{x{y{z}}} <firstcond> Not allowed in IT block
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 0 1 1 1 1 1 1 firstcond mask
\ ------------------------------------------------------------------------------
\      bf00   8c4f4m:  IT
\ ******************************************************************************
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.40 LDC, LDC2
\ Load Coprocessor loads memory data from a sequence of consecutive memory addresses to a coprocessor.
\ If no coprocessor can execute the instruction, an Undefined Instruction exception is generated.
\ Encoding
\ n = UInt(Rn); cp = UInt(coproc); imm32 = ZeroExtend(imm8:'00', 32);
\ opc1 = N; opc0 = C; // LDC if C == '0', LDC2 if C == '1'
\ index = (P == '1'); add = (U == '1'); wback = (W == '1');
\ if P == '0' && U == '0' && N == '0' && W == '0' then UNDEFINED;
\ if P == '0' && U == '0' && N == '1' && W == '0' then
\ SEE MRRC, MRRC2 on page 4-175;
\ if n == 15 && wback then UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
\ Assembler syntax
\ where:
\ 2 If specified, selects the C == 1 form of the encoding. If omitted, selects the C == 0 form.
\ L If specified, selects the N == 1 form of the encoding. If omitted, selects the N == 0 form.
\ <c><q> See Standard assembler syntax fields on page 4-6.
\ <coproc> Specifies the name of the coprocessor. The standard generic coprocessor names are p0, p1,
\ ..., p15.
\ <CRd> Specifies the coprocessor destination register.
\ <Rn> Specifies the base register. This register is allowed to be the rp or PC.
\ T1 LDC{2}{L}<c> <coproc>,<CRd>,[<Rn>,#+/-<imm8>]
\ LDC{2}{L}<c> <coproc>,<CRd>,[<Rn>],#+/-<imm8>
\ LDC{2}{L}<c> <coproc>,<CRd>,[<Rn>,#+/-<imm8>]!
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 1 1 1 C 1 1 0 P U N W 1 Rn CRd coproc imm8
\ ------------------------------------------------------------------------------
\ LoaD Coprocesser
\ ******************************************************************************
\ 4.6.41 LDMDB / LDMEA
\ Load multiple Decrement Before (Load multiple Empty Ascending) loads multiple registers from
\ sequential memory locations using an address from a base register. The sequential memory locations end
\ just below this address, and the address of the first of those locations can optionally be written back to the
\ base register.
\ The registers loaded can include the PC. If they do, the word loaded for the PC is treated as an address and
\ a branch occurs to that address. Bit[0] of the loaded value determines whether execution continues after this
\ branch in ARM state or in Thumb state.
\ Encoding
\ n = UInt(Rn); registers = P:M:'0':register_list; wback = (W == '1');
\ if n == 15 || BitCount(registers) < 2 then UNPREDICTABLE;
\ if P == 1 && M == 1 then UNPREDICTABLE;
\ if registers<15> == 1 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;
\ Architecture versions
\ Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
\ Assembler syntax
\ LDMDB<c><q> <Rn>{!}, <registers>
\ where:
\ <c><q> See Standard assembler syntax fields on page 4-6.
\ <Rn> Specifies the base register. This register is allowed to be the rp.
\ ! Causes the instruction to write a modified value back to <Rn>. If ! is omitted, the
\ instruction does not change <Rn> in this way. (However, if <Rn> is included in
\ <registers>, it changes when a value is loaded into it.)
\ <registers>
\ Is a list of one or more registers, separated by commas and surrounded by { and }. It
\ specifies the set of registers to be loaded. The registers are loaded with the lowest-numbered
\ register from the lowest memory address, through to the highest-numbered register from the
\ highest memory address. If the PC is specified in the register list, the instruction causes a
\ branch to the address (data) loaded into the PC.
\ T1 LDMDB<c> <Rn>{!},<registers>
\ 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
\  1  1  1  0  1  0  0  1  0  0  W  1  ====Rn====  P  M (0) =============register_list=========== --> 10cwc4rpmc12#
\ ------------------------------------------------------------------------------
\  e9100000  10cWc4rPMc12R.list:  LDMBD
 


0  value   <<pc.check>>
variable   push.pop.list  20  allot
variable   {?

:  {  ( ---- )     push.pop.list  20  erase   {?    on   ;
:  }  ( -- n )                                {?    off  ;
\  }  ( -- n )                                {?    off  push.pop.list  @  ;

:  >push.pop.list  ( n -- )   2^n  push.pop.list  @  or  push.pop.list  !  ;

:  r0,    0   >push.pop.list    ;
:  r1,    1   >push.pop.list    ;
:  r2,    2   >push.pop.list    ;
:  r3,    3   >push.pop.list    ;
:  r4,    4   >push.pop.list    ;
:  r5,    5   >push.pop.list    ;
:  r6,    6   >push.pop.list    ;
:  r7,    7   >push.pop.list    ;
:  r8,    8   >push.pop.list    ;
:  r9,    9   >push.pop.list    ;
:  r10,  0a   >push.pop.list    ;   :  ra,   0a   >push.pop.list    ;
:  r11,  0b   >push.pop.list    ;   :  rb,   0b   >push.pop.list    ;
:  r12,  0c   >push.pop.list    ;   :  rc,   0c   >push.pop.list    ;
:  r13,  0d   >push.pop.list    ;   \  rp of native cpu
:  r14,  0e   >push.pop.list    ;   \  lr
:  r15,  0f   >push.pop.list    ;   \  pc

:  rp,   0d   >push.pop.list    ;   \  return stack pointer of native cpu
:  lr,   0e   >push.pop.list    ;
:  pc,   0f   >push.pop.list    ;

:  ra,   0a   >push.pop.list    ;
:  rb,   0b   >push.pop.list    ;
:  rc,   0c   >push.pop.list    ;
:  rd,   0d   >push.pop.list    ;
:  re,   0e   >push.pop.list    ;
:  rf,   0f   >push.pop.list    ;


:  rp,   rp   >push.pop.list    ;
:   w,    w   >push.pop.list    ;
:   t,    t   >push.pop.list    ;



: {r0~r7}.check       ( n -- n )  dup  1 0ff between not  abort" **** at least one of r0~r7 is allowable ****"  ;

: {r0~r7+pc}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or
  abort" *** POP does not support a list containing only one register ***"  r>  ;


: {r0~r7+pc}.check'''    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@        8f  and  0=
  abort" *** PUSH/POP does not support zero item ***"  r>  ;


: {r0~r7+pc}.check       ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@       8ff  and  0=
  abort" *** PUSH/POP does not support zero item ***"  r>  ;

: {r0~r7+pc}.check       ( n -- n )       \ 1... .... 1111 1111 == 80ff
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      4000  and  abort"  *** R14 ( Re ) is unallowed in push operation ***"
  r@      80ff  and  0=
  abort" *** PUSH/POP does not support zero item ***"
  r@   7f00   and   abort" **** r0~r7+pc only **** "    r>  8000   /mod   +  ;

: {r0~r7+pc}.check       ( n -- n )       \ 1... .... 1111 1111 == 80ff
  dup>r   80ff  and  0=
  abort" *** PUSH/POP does not support zero item ***"
  r@      7f00  and   abort" **** r0~r7+pc only ****"   r>  80   /mod   +  ;
 









: {r0~r7+pc}.check       ( n -- n )       \ 1... .... 1111 1111 == 80ff
  dup>r   80ff  and  0=
  abort" *** PUSH/POP does not support zero item ***"
  r@      7f00  and   abort" **** r0~r7+pc only ****"   r>  ;  \  80   /mod   +  ;
 
: {r0~r7+pc}.check       ( n -- n )   ;
      
: {r0~r7+pc}.check       ( n -- n )  dup>r   8000 80ff  between
  if      r>   0ff and  100  or
  else    r@   0  ff  between  not  abort" ******* it should be r0~r7+PC ********"  r>
  then    ;

\ : {r0~r7+lr}.check       ( n -- n )  dup>r   4000 40ff  between
\   if      r>   0ff and  100  or
\   else    r@   0  ff  between  not  abort" ******* it should be r0~r7+LR ********"  r>
\   then    ;
 
















: {r0~r12+lr}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or     r@  200 = or    r@  400 = or   r@  800 = or
  r@ 1000 = or                     r@ 4000 = or
  abort" *** PUSH does not support a list containing only one register ***"  r>  ;

: {r0~r12+lr}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@      5fff  and  0=  \ r0~r12+r14
  abort" *** PUSH does not support a list containing only one register ***"  r>  ;


: {r0~r12+pc+lr}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
\ r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@      5fff  and  0=  \ r0~r12+r14
  abort" *** PUSH does not support a list containing only one register ***"  r>  ;

variable  bit=1.count

: {r0~r12+pc+lr}.check    ( n -- n )     bit=1.count  off
  dup>r   2000  and          abort"  *** R13 ( Rd ) is unallowed in LDMIA operation ***"
  r@      c000  and  c000 =  abort"  *** R15=R14=1 ( Rf ) is unallowed in LDMIA operation ***"
  r@  10  0  do   0  2  um/mod  swap  if   1 bit=1.count +!   then   loop  drop
  bit=1.count  @  2 <  abort" *** PUSH does not support a list containing < 2 register ***"  r>  ;
                  
: `10cWc4rPMc12R.list          dup   32@^     fff02000  and  ;   \ w=?     ffd02000 ????
:  10cWc4rPMc12R.list:_gene    :.mnem_  ." `10cWc4rPMc12R.list"  #=if4 ."      .{r0~r12+pc+lr}+rn    "  .1"  mnem"  xt0  ; \ pc???
:  10cWc4rPMc12R.list:
   create   dup  ,  10cWc4rPMc12R.list:_gene
   does>    @  ( op.code )  >r   ( R )   r0~r14.check  to (Rn)    push.pop.list @  {r0~r12+pc+lr}.check    r>  +  (Rn)  13 10 >?~?  +  32,^
            here'  4  -  last.instruction.addr !   all.ok?.off  ( all.Rn.off ) ;

original.mnemonic?  on       e9100000   10cWc4rPMc12R.list:   ldmdb_R,R.list
original.mnemonic?  on       e9100000   10cWc4rPMc12R.list:   dmdb_R,R.list
original.mnemonic?  off      e9100000   10cWc4rPMc12R.list:   pop_R,R.list


comment:
: `17cMc13r         dup   32@^     ffffa000  and  ;
:  17cMc13r:_gene   :.mnem_ ." `17cMc13r"  #=if4 ."      .{r0~r12+lr}       "  .1"  mnem"  xt0 ;
:  17cMc13r:
   create   dup  ,  17cMc13r:_gene
   does>    @  ( op.code )  >r   ( R )   push.pop.list @  {r0~r12+lr}.check    r>  +  32,^
            here'  4  -  last.instruction.addr !   all.ok?.off  ( all.Rn.off ) ;

   e92d0000  17cMc13r:  push{}'

: push{}       push.pop.list  @  ff  u>  if  push{}'   exit  then   push{}  ;
comment;


: `5c3R8Rlist ( a' -- a' op.code )   dup 16@'  ,s=1.ok??  ,shift.ok??   F800 and  ;
:  5c3R8Rlist:_gene    :.mnem_  ." `5c3R8Rlist"  #=if2  ."  0a  8  11p   7  0  12p"   .2" mnem"  xt0  ;
:  5c3R8Rlist:
   create   dup  ,  5c3R8Rlist:_gene
   does>  ( R.list R a )   to  (a)   3r.check  to (Rn)   PUSH.POP.LIST @  {r0~r7}.check  to (Rm)  ( R.list )
      (Rn)      0a  8   >?~?
      (Rm)       7  0   >?~?   +
      (a)        @             +
      16,'   here'   2  -  last.instruction.addr  !  all.ok?.off  ;










: `5c3R8Rlist ( a' -- a' op.code )   dup 16@'  ,s=1.ok??  ,shift.ok??   F800 and  ;
:  5c3R8Rlist:_gene    :.mnem_  ." `5c3R8Rlist"  #=if2  ."  .{r0~r7}.rn "   .1" mnem"  xt0  ;
:  5c3R8Rlist:
   create   dup  ,  5c3R8Rlist:_gene
   does>  ( R.list R a )   to  (a)   3r.check  to (Rn)   PUSH.POP.LIST @  {r0~r7}.check  to (Rm)  ( R.list )
      (Rn)      0a  8   >?~?
      (Rm)       7  0   >?~?   +
      (a)        @             +
      16,'   here'   2  -  last.instruction.addr  !  all.ok?.off  ;

  original.mnemonic?  on       c800         5c3r8rlist:  ldm
  original.mnemonic?  on       c800         5c3r8rlist:  ldmia_R,#
  original.mnemonic?  on       c800         5c3r8rlist:  ldmia.R,#
  original.mnemonic?  on       c800         5c3r8rlist:  ldmia
  original.mnemonic?  off      c800         5c3r8rlist:  pop_R!,#
  original.mnemonic?  off      c800         5c3r8rlist:  pop.R!,#

\ original.mnemonic?  on       c800         5c3r8r:  ldmia.R,R
\ original.mnemonic?  off      c800         5c3r8r:  pop.R,R
\  e9100000  10cwc4rpmc12#:  LDMEA


\ ------------------------------------------------------------------------------
\ ******************************************************************************
comment:
  4.6.42 ldmia / LDMFD
  Load multiple Increment After loads multiple registers from consecutive memory locations using an
  address from a base register. The sequential memory locations start at this address, and the address just
  above the last of those locations can optionally be written back to the base register.
  The registers loaded can include the PC. If they do, the word loaded for the PC is treated as an address and
  a branch occurs to that address. Bit[0] of the loaded value determines whether execution continues after this
  branch in ARM state or in Thumb state.
  Encoding
  n = UInt(Rn); registers = '00000000':register_list;
  wback = (registers<n> == '0');
  if BitCount(registers) < 1 then UNPREDICTABLE;
  n = UInt(Rn); registers = P:M:'0':register_list; wback = (W == '1');
  if n == 13 && wback then SEE POP on page 4-209;
  if n == 15 || BitCount(registers) < 2 then UNPREDICTABLE;
  if P == 1 && M == 1 then UNPREDICTABLE;
  if registers<15> == 1 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;
  Architecture versions
  Encoding T1 All versions of the Thumb instruction set.
  Encoding T2 All versions of the Thumb instruction set from Thumb-2 onwards.
  Assembler syntax
  ldmia<c><q> <Rn>{!}, <registers>
  where:
  <c><q> See Standard assembler syntax fields on page 4-6.
  <Rn> Specifies the base register. This register is allowed to be the rp. If it is the rp and !
  is specified, it is treated as described in POP on page 4-209.

 T1 ldmia<c> <Rn>!,<registers> <Rn> not from <registers>
  ldmia<c> <Rn>,<registers> <Rn> from <registers>
  15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
  1 1 0 0 1 Rn register_list

: `5c3R8Rlist ( a' -- a' op.code )   dup 16@'  .s=1.ok??  .shift.ok??   F800 and  ;
:  5c3R8Rlist:_gene    :.mnem_  ." `5c3R8Rlist"  #=if2  ."  0a  8  13p   7  0  14p"   .2" mnem"  xt0  ;
:  5c3R8Rlist:
   create   dup  ,  5c3R8Rlist:_gene
   does>  ( R R.list a )   to  (a)  8r.check  to (Rm)  ( R.list )    3r.check  to (Rn)
      (Rn)      0a  8   >?~?
      (Rm)       7  0   >?~?   +
      (a)        @             +
      16,'   here'   2  -  last.instruction.addr  !  all.ok?.off  ;


\  { r0, r1, r5, r7, }  Rn  ldmia_R.list,R
: `5c3R8Rlist ( a' -- a' op.code )   dup 16@'  .s=1.ok??  .shift.ok??   F800 and  ;
:  5c3R8Rlist:_gene    :.mnem_  ." `5c3R8Rlist"  #=if2  ."  0a  8  11p   7  0  12p"   .2" mnem"  xt0  ;
:  5c3R8Rlist:
   create   dup  ,  5c3R8Rlist:_gene
   does>  ( R.list R a )   to  (a)   3r.check  to (Rn)   PUSH.POP.LIST @  {r0~r7}.check  to (Rm)  ( R.list )
      (Rn)      0a  8   >?~?
      (Rm)       7  0   >?~?   +
      (a)        @             +
      16,'   here'   2  -  last.instruction.addr  !  all.ok?.off  ;
comment;

original.mnemonic?  on       c800    5c3R8Rlist:  ldmia
original.mnemonic?  on       c800    5c3R8Rlist:  ldmia_R,R
original.mnemonic?  on       c800    5c3R8Rlist:  ldmia_R,Rlist
original.mnemonic?  on       c800    5c3R8Rlist:  ldm 
original.mnemonic?  off      c800    5c3R8Rlist:  ldm_R,R


:  LDM  ( -- )   ldm_R,R  ;  \  { r0, r1, r6, r7, }  r7  LDM
\ ------------------------------------------------------------------------------
comment:
  T2 ldmia<c>.W <Rn>{!},<registers>
  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
   1 1 1 0 1 0 0 0 1 0 W 1 ==Rn=== P M(0)======register_list======    P: pc   M: lr   13: rp


: `10cwc4rpmc13r  ( a' -- a' op.code )   dup 32@'     ffd02000  and  ;
:  10cwc4rpmc13r:_gene    :.mnem_  ." `10cwc4rpmc13r"  #=if4  ."  19  16  11p  .{r0~r12+pc+lr} "   .1" mnem"  xt0  ;
:  10cwc4rpmc13r:
   create   dup  ,  10cwc4rpmc13r:_gene
   does>  ( R.list R a )   to  (a)   4r.check  to (Rn)   PUSH.POP.LIST @  {r0~r12+pc+lr}.check  to (Rm)  ( R.list )
      (Rn)      19  16   >?~?
      (Rm)                     +
      (a)        @             +
      32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

comment;

original.mnemonic?  on       e8900000   10cWc4rPMc12R.list:   ldmia
original.mnemonic?  off      e8900000   10cWc4rPMc12R.list:   ldm

  : ldm  ( Rn -- )   dup  0  7  between  PUSH.POP.LIST @  0 ff between  and
    if     ldmia_R,Rlist
    else   ldmia
    then   ;


\ ------------------------------------------------------------------------------
\    e8900000  10cWc4rPMc12R.list:  ldmia
\ ******************************************************************************
comment:
4.6.43 LDR (immediate)
Load Register (immediate) calculates an address from a base register value and an immediate offset, loads
a word from memory, and writes it to a register. It can use offset, post-indexed, or pre-indexed addressing.
See Memory accesses on page 4-13 for information about memory accesses.
Encoding
t = UInt(Rt); n = UInt(Rn); imm32 = ZeroExtend(imm5:'00', 32);
index = TRUE; add = TRUE; wback = FALSE;
t = UInt(Rt); n = 13; imm32 = ZeroExtend(imm8:'00', 32);
index = TRUE; add = TRUE; wback = FALSE;
t = UInt(Rt); n = UInt(Rn); imm32 = ZeroExtend(imm12, 32);
index = TRUE; add = TRUE; wback = FALSE;
if n == 15 then SEE LDR (literal) on page 4-102;
if t == 15 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;
t = UInt(Rt); n = UInt(Rn); imm32 = ZeroExtend(imm8, 32);
index = (P == '1'); add = (U == '1'); wback = (W == '1');
if n == 15 then SEE LDR (literal) on page 4-102;
if P == '1' && U == '1' && W == '0' then SEE LDRT on page 4-148;
if P == '0' && W == '0' then UNDEFINED;
if wback && n == t then UNPREDICTABLE;
if t == 15 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;

T1 LDR<c> <Rt>, [<Rn>, #<imm>]
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
0 1 1 0 1 imm5 Rn Rt

T2 LDR<c> <Rt>,[rp,#<imm>]
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 0 0 1 1 Rt imm8

T3 LDR<c>.W <Rt>,[<Rn>,#<imm12>]
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 1 1 0 0 0 1 1 0 1 Rn Rt imm12

T4 LDR<c> <Rt>,[<Rn>,#-<imm8>]
LDR<c> <Rt>,[<Rn>],#+/-<imm8>
LDR<c> <Rt>,[<Rn>,#+/-<imm8>]!
15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
 1  1  1  1  1  0  0  0  0  1  0  1  ====Rn==== ====Rt=====  1  P  U  W  ========imm8==========
comment;
\ ------------------------------------------------------------------------------
\ 4.6.43     LDR(immediate)  T1

\ T1 LDR<c> <Rt>, [<Rn>, #<imm>]
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\ 0 1 1 0 1 imm5 Rn Rt                     5c5#3r3r   5#*3

original.mnemonic?  on       6800   5c5#3r3r:*4  ldr_R,[R,#5]
original.mnemonic?  off      6800   5c5#3r3r:*4  R=(R+#5)
\ ------------------------------------------------------------------------------
\ 4.6.43     LDR(immediate)  T2
comment:
  T2         LDR<c> <Rt>,[rp,#<imm>]
15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
 1  0  0  1  1 ===Rt===  ==========imm8========
t = UInt(Rt); n = 13; imm32 = ZeroExtend(imm8:'00', 32);
index = TRUE; add = TRUE; wback = FALSE;
comment;
 
original.mnemonic?  on     9800   5c3r8#:*4   ldr_R,[rp,#]
original.mnemonic?  off    9800   5c3r8#:*4   R=(rp+#)
original.mnemonic?  off    9800   5c3r8#:*4   R=(rp+#)
original.mnemonic?  off    9800   5c3r8#:*4   R=(rp+#8)

: r=(rp)    0  R=(rp+#)   ;  \ frp
: r=(rp)    0  R=(rp+#8)  ;
\ ------------------------------------------------------------------------------
\ 4.6.43     LDR(immediate)  T3
comment:
T3 LDR<c>.W <Rt>,[<Rn>,#<imm12>]
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 1 1 0 0 0 1 1 0 1 Rn Rt imm12
t = UInt(Rt); n = UInt(Rn); imm32 = ZeroExtend(imm12, 32);
index = TRUE; add = TRUE; wback = FALSE;
if n == 15 then SEE LDR (literal) on page 4-102;
if t == 15 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;
comment;

:  12cpc4r12#:gene      :.mnem_  ." `12cpc4r12#" #=if4 ."  0f 0c 13p  0b 0 14p" .2" mnem" xt0 ;
:  12cpc4r12#:    ( Rd # --- )
   create    dup  ,  12cpc4r12#:gene
   does>   @  ( op.code )  >r   12#.check <#> !   4r.check <Rd> !   r>
      0f   @ 10000 *  +   \ Rn=pc                                 \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on     f8df0000  12cpc4r12#:  ldr_R,[pc,#]
original.mnemonic?  off    f8df0000  12cpc4r12#:  R=(pc+#12)

:  12c4r4r12#:gene      :.mnem_  ." `12c4r4r12#" #=if4 ."  0f 0c 12p 13 10 13p 0b 0  14p" .3" mnem" xt0 ;
:  12c4r4r12#:    ( Rd Rn # --- )
   create    dup  ,  12c4r4r12#:gene
   does>   @  ( op.code )  >r   12#.check <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on     f8d00000  12c4r4r12#:  ldr_R,[R,#12]
original.mnemonic?  off    f8d00000  12c4r4r12#:  R=(R+#12)
\ ------------------------------------------------------------------------------
\ 4.6.43     LDR(immediate)  T4       p=index   u=1:add   w=1:write.back
comment:
T4 LDR<c> <Rt>,[<Rn>,#-<imm8>]
LDR<c> <Rt>,[<Rn>],#+/-<imm8>
LDR<c> <Rt>,[<Rn>,#+/-<imm8>]!
151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
|1 1 1 1|1 0 0 0|0 1 0 1|==Rn===|==Rt===|1 P U W|======imm8=====|
t = UInt(Rt); n = UInt(Rn); imm32 = ZeroExtend(imm8, 32);
index = (P == '1'); add = (U == '1'); wback = (W == '1');
if n == 15 then SEE LDR (literal) on page 4-102;
if P == '1' && U == '1' && W == '0' then SEE LDRT on page 4-148;
if P == '0' && W == '0' then UNDEFINED;
if wback && n == t then UNPREDICTABLE;
if t == 15 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;
comment;

: p|w=1/0   ( p1|w0 1/0 -- )    p|w=1/0.ok?  @
  if     last.instruction.addr  @  32@^  r>
         if     r>  if       400  or  else   fffffbff  and   then
         else   r>  if     10000  or  else   fffeffff  and   then
         then
  then   -1  abort"  *** not allowed! *** "  ;

: w=0    0   0   p|w=1/0  ;
: w=1    0   1   p|w=1/0  ;
: p=0    1   0   p|w=1/0  ;
: p=1    1   1   p|w=1/0  ;

 

: `12c4r4rcPUW8#0           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#0:gene      :.mnem_  ." `12c4r4rcPUW8#0" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#0:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#0:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    0     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'    here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#1           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#1:gene      :.mnem_  ." `12c4r4rcPUW8#1" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#1:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#1:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    1     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#2           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#2:gene      :.mnem_  ." `12c4r4rcPUW8#2" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#2:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#2:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    2     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#3           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#3:gene      :.mnem_  ." `12c4r4rcPUW8#3" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#3:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#3:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    3     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#4           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#4:gene      :.mnem_  ." `12c4r4rcPUW8#4" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#4:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#4:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    4     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;



: `12c4r4rcPUW8#5           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#5:gene      :.mnem_  ." `12c4r4rcPUW8#5" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#5:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#5:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    5     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#6           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#6:gene      :.mnem_  ." `12c4r4rcPUW8#6" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#6:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#6:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    6     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#7           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#7:gene      :.mnem_  ." `12c4r4rcPUW8#7" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
:  12c4r4rcPUW8#7:   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#7:gene
   does>   @  ( op.code )  >r  ( rd rn # )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    7     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;


: `12c4r4rcPUW8#0'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#0:gene'      :.mnem_  ." `12c4r4rcPUW8#0'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#0:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#0:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    0     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'    here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#1'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#1:gene'      :.mnem_  ." `12c4r4rcPUW8#1'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#1:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#1:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    1     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#2'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#2:gene'      :.mnem_  ." `12c4r4rcPUW8#2'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#2:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#2:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    2     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#3'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#3:gene'      :.mnem_  ." `12c4r4rcPUW8#3'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#3:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#3:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    3     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#4'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#4:gene'      :.mnem_  ." `12c4r4rcPUW8#4'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#4:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#4:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    4     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;



: `12c4r4rcPUW8#5'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#5:gene'      :.mnem_  ." `12c4r4rcPUW8#5'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#5:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#5:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    5     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#6'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#6:gene'      :.mnem_  ." `12c4r4rcPUW8#6'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#6:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#6:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    6     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

: `12c4r4rcPUW8#7'           dup 32@^  ( ,s=1.ok?? )  ,shift.ok??   FFf00f00 and  ;
:  12c4r4rcPUW8#7:gene'      :.mnem_  ." `12c4r4rcPUW8#7'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4rcPUW8#7:'   ( Rd Rn --- )
   create  dup  ,  12c4r4rcPUW8#7:gene'
   does>   @  ( op.code )  >r  -rot  ( rn # rt )  8#*4.check  <#> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rd>  @  1000 *  +                                           \ op.code+Rn+Rd
     <#>   @          +                                           \ op.code+Rn+Rd+#
\    7     >10~8      +                                           \ op.code+Rn+Rd+#+puw
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !   all.ok?.off   p|w=1/0.ok? on  ;

comment:
original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8500800  12c4r4rcPUW8#0:  ldr_R,[R,-#8]
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  ldr_R,[R,-#8]!
  ( p=0 u=1 w=0 )   f8500a00  12c4r4rcPUW8#2:  ldr_R,[R,#8]
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  ldr_R,[R,#8]!

  ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  ldr_R,[R],-#8
  ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  ldr_R,[R],-#8!
  ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  ldr_R,[R],#8
  ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  ldr_R,[R],#8!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8500800  12c4r4rcPUW8#0:  R=(R-#8)
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  R=(R-#8),w
  ( p=0 u=1 w=0 )   f8500a00  12c4r4rcPUW8#2:  R=(R+#8)
  ( p=0 u=1 w=1 )   f8500b80  12c4r4rcPUW8#3:  R=(R+#8),w    ???????????

  ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  R=(R-#8),p
  ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  R=(R-#8),p
  ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  R=(R+#8),p
  ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  R=(R+#8),p




original.mnemonic?  on
  ( p=1 u=0 w=0 )   f8500800  12c4r4rcPUW8#4:  ldr_R,[R],-#8
  ( p=1 u=0 w=1 )   f8500900  12c4r4rcPUW8#5:  ldr_R,[R],-#8!
  ( p=1 u=1 w=0 )   f8500a00  12c4r4rcPUW8#6:  ldr_R,[R],#8
  ( p=1 u=1 w=1 )   f8500b00  12c4r4rcPUW8#7:  ldr_R,[R],#8!

  ( p=0 u=0 w=0 )   f8500c00  12c4r4rcPUW8#0:  ldr_R,[R,-#8]
  ( p=0 u=0 w=1 )   f8500d00  12c4r4rcPUW8#1:  ldr_R,[R,-#8]!
  ( p=0 u=1 w=0 )   f8500e00  12c4r4rcPUW8#2:  ldr_R,[R,#8]
  ( p=0 u=1 w=1 )   f8500f00  12c4r4rcPUW8#3:  ldr_R,[R,#8]!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8500800  12c4r4rcPUW8#0:  R=(R-#8)
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  R=(R-#8),w
  ( p=0 u=1 w=0 )   f8500a00  12c4r4rcPUW8#2:  R=(R+#8)
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  R=(R+#8),w

  ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  R=(R-#8),p
  ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  R=(R-#8),p
  ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  R=(R+#8),p
  ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  R=(R+#8),p




original.mnemonic?  on
  ( p=1 u=0 w=0 )   f8500800  12c4r4rcPUW8#4:  ldr_R,[R],-#8
  ( p=1 u=0 w=1 )   f8500900  12c4r4rcPUW8#5:  ldr_R,[R],-#8!
  ( p=1 u=1 w=0 )   f8500a00  12c4r4rcPUW8#6:  ldr_R,[R],#8
  ( p=1 u=1 w=1 )   f8500b00  12c4r4rcPUW8#7:  ldr_R,[R],#8!

  ( p=0 u=0 w=0 )   f8500c00  12c4r4rcPUW8#0:  ldr_R,[R,-#8]
  ( p=0 u=0 w=1 )   f8500d00  12c4r4rcPUW8#1:  ldr_R,[R,-#8]!
  ( p=0 u=1 w=0 )   f8500e00  12c4r4rcPUW8#2:  ldr_R,[R,#8]
  ( p=0 u=1 w=1 )   f8500f00  12c4r4rcPUW8#3:  ldr_R,[R,#8]!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8500800  12c4r4rcPUW8#0:  R=(R)-#8
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  R=(R)-#8,w
  ( p=0 u=1 w=0 )   f8500a00  12c4r4rcPUW8#2:  R=(R)+#8
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  R=(R)+#8,w

  ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  R=(R-#8)
  ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  R=(R-#8),p
  ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  R=(R+#8)
  ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  R=(R+#8),p

comment;




original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8500800  12c4r4rcPUW8#0:  ldr_R,[R,-#]
                                             \ r=(r-#)
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  ldr_R,[R,-#]!
                                             \ r=(r-#),r-#
  ( p=0 u=1 w=0 )   f8500a00  12c4r4rcPUW8#2:  ldr_R,[R,#]
                                             \ r=(r+#)
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  ldr_R,[R,#]!
                                             \ r=(r+#),r+#

  ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  ldr_R,[R],-#
                                             \ r=(r),r-#        r=(r)-#
  ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  ldr_R,[R],-#!
                                             \ r=(r-#),r-#      r=(r)-#!
  ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  ldr_R,[R],#
                                             \ r=(r),r+#        r=(r)+#
  ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  ldr_R,[R],#!
                                             \ r=(r+#),r+#      r=(r)+#!
original.mnemonic?  off
\ ( p=0 u=0 w=0 )   f8500800  12c4r4rcPUW8#0:  R=(R-#)
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  R=(R-#),w
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  R=(R+#),p
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  R=(R-#)!
\ ( p=0 u=1 w=0 )   f8500a00  12c4r4rcPUW8#2:  R=(R+#)
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  R=(R+#),w
  ( p=0 u=1 w=1 )   f8500b00  12c4r4rcPUW8#3:  R=(R+#),p
  ( p=0 u=0 w=1 )   f8500900  12c4r4rcPUW8#1:  R=(R+#)!

\ ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  R=(R-#),p
\ ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  R=(R-#),p
\ ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  R=(R+#),p
\ ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  R=(R+#),p

  ( p=1 u=0 w=0 )   f8500c00  12c4r4rcPUW8#4:  R=(R),-#
  ( p=1 u=0 w=1 )   f8500d00  12c4r4rcPUW8#5:  R=(R),-#,p
  ( p=1 u=1 w=0 )   f8500e00  12c4r4rcPUW8#6:  R=(R),#
  ( p=1 u=1 w=1 )   f8500f00  12c4r4rcPUW8#7:  R=(R),#,p














: R=(R+#)   3r3r5#?*4  if  R=(R+#5)   exit  then
\           3r3r8#?    if  R=(R+#8)   exit  then
           4r4r12#?    if  R=(R+#12)  exit  then
\          4r4r12#?    if  over  0d = if r=(rp+#)  else  R=(R+#12)  then  exit  then
            -1  abort" **** not within valid number allowed. ****"  ;

: 3r+rp?   ( r1 r2 -- f )   rp  =  swap  3r?  and  ;

: R=(R+#)   3r3r5#?*4  if  R=(R+#5)   exit  then
\           3r3r8#?    if  R=(R+#8)   exit  then
\          4r4r12#?    if  R=(R+#12)  exit  then
           4r4r12#?    if  2 pick ( 3r ) 2 pick ( rp ) 3r+rp?  if  nip  r=(rp+#)  else  R=(R+#12)  then  exit  then
            -1  abort" **** not within valid number allowed. ****"  ;


: R=(R)     0  2 lshift  ( 4*  =  cells )  R=(R+#)  ;
: R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#)  ;  ( ?????    msp430 )  : R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+1)   1  2 lshift  ( 4*  =  cells )  R=(R+#)  ;  \
: R=(R+2)   2  2 lshift  ( 4*  =  cells )  R=(R+#)  ;  \


: R=(R)!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+)!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+1)!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+2)!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R)!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+)!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4)!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8)!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R)w    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+)w   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4)w  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8)w  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;

: R=(R)p    0  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+)p   1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;     : R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+4)p  1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+8)p  2  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;


: R=(R),!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+),!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+1),!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+2),!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R),!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+),!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4),!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8),!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R),w    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+),w   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4),w  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8),w  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;

: R=(R),p    0  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+),p   1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;    : R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+4),p  1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+8),p  2  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
\ ******************************************************************************
\ 4.6.44    LDR(lit)     T1
comment:
4.6.44 LDR (literal)
Load Register (literal) calculates an address from the PC value and an immediate offset, loads a word from
memory, and writes it to a register. See Memory accesses on page 4-13 for information about memory
accesses.
Encoding
t = UInt(Rt); imm32 = ZeroExtend(imm8:'00', 32); add = TRUE;
t = UInt(Rt); imm32 = ZeroExtend(imm12, 32); add = (U == '1');
if t == 15 && InITBlock() && !LastInITBlock() then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set
Encoding T2 All versions of the Thumb instruction set from Thumb-2 onwards.
Assembler syntax
where:
<c><q> See Standard assembler syntax fields on page 4-6.
<Rt> Specifies the destination register. This register is allowed to be the rp. It is also allowed to
be the PC, provided the instruction is either outside an IT block or the last instruction of an
IT block. If it is the PC, it causes a branch to the address (data) loaded into the PC.
<label> Specifies the label of the literal data item that is to be loaded into <Rt>. The assembler
calculates the required value of the offset from the Align(PC,4) value of this instruction
to the label.
If the offset is positive, encodings T1 and T2 are permitted with imm32 equal to the offset
and add == TRUE. Allowed values of the offset are multiples of four in the range 0 to 1020
for encoding T1 and any value in the range 0 to 4095 for encoding T2.
T1 LDR<c> <Rt>,[PC,#<imm>]
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
0 1 0 0 1 Rt imm8
T2 LDR<c>.W <Rt>,[PC,#+/-<imm12>]
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 1 1 0 0 0 U 1 0 1 1 1 1 1 Rt imm12
comment;

original.mnemonic?  on            4800   5c3r8#:*4+.(pc+#)    ldr_R,[pc,#8]
original.mnemonic?  off           4800   5c3r8#:*4+.(pc+#)    R=(pc+#8')
\ (  0000F8EA  2E 48             )                                             R0=(pc+2E)
\ ------------------------------------------------------------------------------
\ 4.6.44    LDR(lit)     T2


: `8cU7c4r12#    dup 32@^   ff7f0000  and  ( ,all.ok?? off ) ;  ( a' -- a' op.code )
:  8cU7c4r12#:gene       :.mnem_  ." `8cU7c4r12#"   #=if4 ."  0f 0c 13p 0b 0  14p" .2" mnem" xt0 ;
:  8cU7c4r12#:    ( r # -- )
   create  dup  ,  8cU7c4r12#:gene
   does>   @  ( op.code )  >r     12#.check  <#> !    4r.check <Rd> !   r>
     <Rd>  @  1000 *  +                                           \ op.code+Rd
     <#>   @          +                                           \ op.code+Rd+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;  \  all.ok?.off   ;





: `8c+7c4r12#+.(pc+#)    dup 32@^   ffff0000  and  ( ,all.ok?? off ) ;  ( a' -- a' op.code )    \ pc+#
:  8c+7c4r12#+.(pc+#):gene       :.mnem_  ." `8c+7c4r12#+.(pc+#)"   #=if4 ."  0f 0c 13p 0b 0  14p+.(pc+#)" .2" mnem" xt0 ;
:  8c+7c4r12#+.(pc+#):    ( r # -- )
   create  dup  ,  8c+7c4r12#+.(pc+#):gene
   does>   @  ( op.code )  >r     12#.check  <#> !    4r.check <Rd> !   r>
     <Rd>  @  1000 *  +                                           \ op.code+Rd
     <#>   @          +                                           \ op.code+Rd+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;  \  all.ok?.off   ;


: `8c-7c4r12#+.(pc-#)    dup 32@^   ffff0000  and  ( .all.ok?? off ) ;  ( a' -- a' op.code )    \ pc-#
:  8c-7c4r12#+.(pc-#):gene       :.mnem_  ." `8c-7c4r12#+.(pc-#)"   #=if4 ."  0f 0c 13p 0b 0  14p+.(pc+#)" .2" mnem" xt0 ;
:  8c-7c4r12#+.(pc-#):    ( r # -- )
   create  dup  ,  8c-7c4r12#+.(pc-#):gene
   does>   @  ( op.code )  >r     12#.check  <#> !    4r.check <Rd> !   r>
     <Rd>  @  1000 *  +                                           \ op.code+Rd
     <#>   @          +                                           \ op.code+Rd+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;  \  all.ok?.off   ;


original.mnemonic?  on              f85f0000  8c-7c4r12#+.(pc-#):  ldr_R,[pc,-#12]
                                    f8df0000  8c+7c4r12#+.(pc+#):  ldr_R,[pc,+#12]
original.mnemonic?  off    ( u=0 )  f85f0000  8c-7c4r12#+.(pc-#):  R=(pc-#12)
                           ( u=1 )  f8df0000  8c+7c4r12#+.(pc+#):  R=(pc+#12)




 

: R=(pc+#)   dup  100 <  if  R=(pc+#8)  else  R=(pc+#12)  then  ;
: R=(pc)     0  R=(pc+#)  ;

: R=(#)   here'  4+  -  dup    0>       \ to be replaced by LDRI  i.e.  r=#
  if             4   /  R=(pc+#)
  else    abs    4   /  R=(pc-#12)
  then    ;

\ : R=(#)   r=#  ;

\ ******************************************************************************
\ 4.6.45     LDR(register)  T1
\ ------------------------------------------------------------------------------
\     5800  7c3r3r3r:  ldr_R=(R+R)
      5800  7c3r3r3r:      R=(R+R)
\ ------------------------------------------------------------------------------
\ 4.6.45     LDR(register)  T2
\ ------------------------------------------------------------------------------
\ : LDR_R,R,R,lsl
\ `12c4r4r6c2s4r   ;
:  12c4r4r6c2s4r:gene     :.mnem_  ." `12c4r4r6c2s4r" #=if4 ."  0f 0c 11p 13 10 12p 3 0 13p 5 4 14p" .4" mnem" xt0 ;
:  12c4r4r6c2s4r:   ( r r r # -- )
  create   dup  ,   12c4r4r6c2s4r:gene
  does>    @  ( op.code )  >r   2s.check  <shift> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  00010000 *  +                                           \ op.code+Rn
     <Rd>  @      1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @              +                                           \ op.code+Rn+Rd+Rm
  <shift>  @        10 *  +                                           \ op.code+Rn+Rd+Rm+shift
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   shift.ok? on  ;

:  12c4r4r6c2s4r:gene'    :.mnem_  ." `12c4r4r6c2s4r'" #=if4 ."  13 10  11p 3 0 12p 5 4 13p 0f 0c 14p" .4" mnem" xt0 ;
:  12c4r4r6c2s4r:'   (  r r # r -- )
  create   dup  ,   12c4r4r6c2s4r:gene'
  does>    @  ( op.code )  >r  >r  -rot  r>  2s.check  <shift> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @  00010000 *  +                                           \ op.code+Rn
     <Rd>  @      1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @              +                                           \ op.code+Rn+Rd+Rm
  <shift>  @        10 *  +                                           \ op.code+Rn+Rd+Rm+shift
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   shift.ok? on  ;
                                        
original.mnemonic?  on       f8500000  12c4r4r6c2s4r:  ldr_R,[R,R<<#]
original.mnemonic?  off      f8500000  12c4r4r6c2s4r:  R=(R+R<<#)
\ ******************************************************************************
\ 4.6.46     LDRB(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on        7800  5c5#3r3r:*4    ldrb_R,[R,#5]
original.mnemonic?  off       7800  5c5#3r3r:*4    R=(R+#)b
                              7800  5c5#3r3r:*4    R=(R+#5)b
\ ------------------------------------------------------------------------------
\ 4.6.46 ?????    LDRB(immediate)  T2      \ ??????????????????????
\ ------------------------------------------------------------------------------
original.mnemonic?  on        9800  5c3r8#:*4      ldrb_R,[rp,#5]
original.mnemonic?  off       9800  5c3r8#:*4      R=(rp+#)b
                              9800  5c3r8#:*4      R=(rp+#5)b

: R=(rp)b    0  R=(rp+#)b  ;
\ ------------------------------------------------------------------------------
\ 4.6.46     LDRB(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on          f8900000  12c4r4r12#:  ldrb_R,[R,#12]
original.mnemonic?  off         f8900000  12c4r4r12#:  R=(R+#12)b

: R=(R+#)b    3r3r5#?*4  if  R=(R+#)b   exit  then   R=(R+#12)b  ;
: R=(R)b                  0  R=(R+#)b   ;
\ ------------------------------------------------------------------------------
\ 4.6.46     LDRB(immediate)  T3
comment:
T3 LDRB<c> <Rt>,[<Rn>,#-<imm8>]
LDRB<c> <Rt>,[<Rn>],#+/-<imm8>
LDRB<c> <Rt>,[<Rn>,#+/-<imm8>]!
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 1 1 0 0 0 0 0 0 1 Rn Rt 1 P U W imm8

t = UInt(Rt); n = UInt(Rn); imm32 = ZeroExtend(imm8, 32);
index = (P == '1'); add = (U == '1'); wback = (W == '1');
if n == 15 then SEE LDRB (literal) on page 4-108;
if t == 15 && P == '1' && U == '0' && W == '0' then
SEE PLD (immediate) on page 4-201;
if P == '1' && U == '1' && W == '0' then SEE LDRBT on page 4-112;
if P == '0' && W == '0' then UNDEFINED;
if BadReg(t) || (wback && n == t) then UNPREDICTABLE;
comment;

original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8100800  12c4r4rcPUW8#0:  ldrb_R,[R,-#]
  ( p=0 u=0 w=1 )   f8100900  12c4r4rcPUW8#1:  ldrb_R,[R,-#]!
  ( p=0 u=1 w=0 )   f8100a00  12c4r4rcPUW8#2:  ldrb_R,[R,#]
  ( p=0 u=1 w=1 )   f8100b00  12c4r4rcPUW8#3:  ldrb_R,[R,#]!

  ( p=1 u=0 w=0 )   f8100c00  12c4r4rcPUW8#4:  ldrb_R,[R],-#
  ( p=1 u=0 w=1 )   f8100d00  12c4r4rcPUW8#5:  ldrb_R,[R],-#!
  ( p=1 u=1 w=0 )   f8100e00  12c4r4rcPUW8#6:  ldrb_R,[R],#
  ( p=1 u=1 w=1 )   f8100f00  12c4r4rcPUW8#7:  ldrb_R,[R],#!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8100800  12c4r4rcPUW8#0:  R=(R-#),b
  ( p=0 u=0 w=1 )   f8100900  12c4r4rcPUW8#1:  R=(R-#),b,w
  ( p=0 u=1 w=0 )   f8100a00  12c4r4rcPUW8#2:  R=(R+#),b
  ( p=0 u=1 w=1 )   f8100b00  12c4r4rcPUW8#3:  R=(R+#),b,w

  ( p=1 u=0 w=0 )   f8100c00  12c4r4rcPUW8#4:  R=(R-#),b,p
  ( p=1 u=0 w=1 )   f8100d00  12c4r4rcPUW8#5:  R=(R-#),b,p
  ( p=1 u=1 w=0 )   f8100e00  12c4r4rcPUW8#6:  R=(R+#),b,p
  ( p=1 u=1 w=1 )   f8100f00  12c4r4rcPUW8#7:  R=(R+#),b,p

: R=(R),b       0  R=(R+#),b     ;
: R=(R),b,w     0  R=(R+#),b,w   ;
: R=(R),b,p     0  R=(R+#),b,p   ;

: R=(R)b        0  R=(R+#),b     ;
: R=(R)b,w      0  R=(R+#),b,w   ;
: R=(R)b,p      0  R=(R+#),b,p   ;

\ comment:

original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8100800  12c4r4rcPUW8#0:  ldrb_R,[R,-#8]
  ( p=0 u=0 w=1 )   f8100900  12c4r4rcPUW8#1:  ldrb_R,[R,-#8]!
  ( p=0 u=1 w=0 )   f8100a00  12c4r4rcPUW8#2:  ldrb_R,[R,#8]
  ( p=0 u=1 w=1 )   f8100b00  12c4r4rcPUW8#3:  ldrb_R,[R,#8]!

  ( p=1 u=0 w=0 )   f8100c00  12c4r4rcPUW8#4:  ldrb_R,[R],-#8
  ( p=1 u=0 w=1 )   f8100d00  12c4r4rcPUW8#5:  ldrb_R,[R],-#8!
  ( p=1 u=1 w=0 )   f8100e00  12c4r4rcPUW8#6:  ldrb_R,[R],#8
  ( p=1 u=1 w=1 )   f8100f00  12c4r4rcPUW8#7:  ldrb_R,[R],#8!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8100800  12c4r4rcPUW8#0:  R=(R-#8),b
  ( p=0 u=0 w=1 )   f8100900  12c4r4rcPUW8#1:  R=(R-#8),b,w
  ( p=0 u=1 w=0 )   f8100a00  12c4r4rcPUW8#2:  R=(R+#8),b
  ( p=0 u=1 w=1 )   f8100b00  12c4r4rcPUW8#3:  R=(R+#8),b,w

  ( p=1 u=0 w=0 )   f8100c00  12c4r4rcPUW8#4:  R=(R-#8),b,p
  ( p=1 u=0 w=1 )   f8100d00  12c4r4rcPUW8#5:  R=(R-#8),b,p
  ( p=1 u=1 w=0 )   f8100e00  12c4r4rcPUW8#6:  R=(R+#8),b,p
  ( p=1 u=1 w=1 )   f8100f00  12c4r4rcPUW8#7:  R=(R+#8),b,p

: R=(R),b       0  R=(R+#8),b     ;
: R=(R),b,w     0  R=(R+#8),b,w   ;
: R=(R),b,p     0  R=(R+#8),b,p   ;

: R=(R)b        0  R=(R+#8),b     ;
: R=(R)b,w      0  R=(R+#8),b,w   ;
: R=(R)b,p      0  R=(R+#8),b,p   ;

\ omment;
\ ******************************************************************************
\ 4.6.47     LDRB(literal)  T2    ????????????????????????
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f8900000     8cU7c4r12#:  ldrb_R,[pc,#]
original.mnemonic?  off      f8900000     8cU7c4r12#:  R=(pc+#)b

: R=(pc)b     0  R=(pc+#)b   ;
\ ******************************************************************************
\ 4.6.48     LDRB(literal)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on           5c00       7c3r3r3r:  ldrb_R,[R,R]
original.mnemonic?  off          5c00       7c3r3r3r:  R=(R+R)b
\ ------------------------------------------------------------------------------
\ 4.6.48     LDRB(literal)  T2        byte
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f8100000  12c4r4r6c2s4r:  ldrb_R,[R<<R]
original.mnemonic?  off      f8100000  12c4r4r6c2s4r:  R=(R+R<<#)b

:  R=(R+R)b    3r3r3r?  if    R=(R+R)b   exit  then   0  R=(R+R<<#)b  ;
\ ******************************************************************************
\ 4.6.49     LDRBT      T1

\ Load Register Byte Unprivileged calculates an address from a base register value and an immediate offset,
\ loads a byte from memory, zero-extends it to form a 32-bit word, and writes it to a register. See Memory
\ accesses on page 4-13 for information about memory accesses.
\ The memory access is restricted as if the processor were running in User mode. (This makes no difference
\ if the processor is actually running in User mode.)
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 1|1 0 0 0|0 0 0 1|==Rn===|===Rt==|1 1 1 0|=====imm8======|   f8100e00
\ ------------------------------------------------------------------------------
: 12c4r4r4c8#:gene     :.mnem_  ." `12c4r4r4c8#" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
: 12c4r4r4c8#:  ( Rd Rn # --- )
  create   dup  ,    12c4r4r4c8#:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
\    <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

: 12c4r4r4c8#:gene'     :.mnem_  ." `12c4r4r4c8#'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" xt0 ;
: 12c4r4r4c8#:'  ( Rd Rn # --- )
  create   dup  ,    12c4r4r4c8#:gene'
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
\    <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

: 12c4r4r4c8#:gene'     :.mnem_  ." `12c4r4r4c8#'" #=if4 ."  13 10  12p 7 0 13p   0f 0c 14p" .3" mnem" 4xt0 ;  \ 2019.7.24
: 12c4r4r4c8#:'  ( Rd Rn # --- )
  create   dup  ,    12c4r4r4c8#:gene'
  does>    @  ( op.code )  >r    4r.check  <Rn> !   8#*4.check  <#> !   4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
\    <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on      f8100e00  12c4r4r4c8#:  ldrbt_R,[R,#]
original.mnemonic?  on      f8100e00  12c4r4r4c8#:  ldrbt.R,[R,#]
original.mnemonic?  off     f8100e00  12c4r4r4c8#:  R=(R+#)t
                            f8100e00  12c4r4r4c8#:  R=(R+#8)t

: R=(R)t       0  R=(R+#)t  ;
\ ******************************************************************************
\ 4.6.50   LDRD(immediate)  T1
\ ------------------------------------------------------------------------------
: 7cPUcWc4r4r4r8#:gene     :.mnem_  ." `7cPUcWc4r4r4r8#" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;




: 7cPUcWc4r4r4r8#0:gene     :.mnem_  ." `7cPUcWc4r4r4r8#0" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#0:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#0:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;


: 7cPUcWc4r4r4r8#1:gene     :.mnem_  ." `7cPUcWc4r4r4r8#1" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#1:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#1:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

: 7cPUcWc4r4r4r8#2:gene     :.mnem_  ." `7cPUcWc4r4r4r8#2" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#2:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#2:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

: 7cPUcWc4r4r4r8#3:gene     :.mnem_  ." `7cPUcWc4r4r4r8#3" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#3:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#3:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;







: 7cPUcWc4r4r4r8#4:gene     :.mnem_  ." `7cPUcWc4r4r4r8#4" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#4:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#4:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;


: 7cPUcWc4r4r4r8#5:gene     :.mnem_  ." `7cPUcWc4r4r4r8#5" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#5:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#5:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

: 7cPUcWc4r4r4r8#6:gene     :.mnem_  ." `7cPUcWc4r4r4r8#6" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#6:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#6:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;


\ 7cPUcWc4r4r4r8#7:gene     :.mnem_  ." `7cPUcWc4r4r4r8#7" #=if4 ."  0b 8 11p 13 10  12p 0f 0c 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#7:gene     :.mnem_  ." `7cPUcWc4r4r4r8#7" #=if4 ."  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p  " .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#7:   ( Rd Rm Rn # --- )  ( Rt Rt2 Rn # --- )
  create   dup  ,   7cPUcWc4r4r4r8#7:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on
   ( p=0 u=0 w=0)  e8500000  7cPUcWc4r4r4r8#0:  ldrd_R,R,[R,-#]
   ( p=0 u=0 w=1)  e8700000  7cPUcWc4r4r4r8#1:  ldrd_R,R,[R,-#]!
   ( p=0 u=1 w=0)  e8b00000  7cPUcWc4r4r4r8#2:  ldrd_R,R,[R,#]
   ( p=0 u=1 w=1)  e8f00000  7cPUcWc4r4r4r8#3:  ldrd_R,R,[R,#]!

   ( p=1 u=0 w=0)  e9500000  7cPUcWc4r4r4r8#4:  ldrd_R,R,[R],-#
   ( p=1 u=0 w=1)  e9700000  7cPUcWc4r4r4r8#5:  ldrd_R,R,[R],-#!
   ( p=1 u=1 w=0)  e9d00000  7cPUcWc4r4r4r8#6:  ldrd_R,R,[R],#
   ( p=1 u=1 w=1)  e9f00000  7cPUcWc4r4r4r8#7:  ldrd_R,R,[R],#!



   ( p=0 u=0 w=0)  e8500000  7cPUcWc4r4r4r8#0:  ldrd.R,R,[R,-#]
   ( p=0 u=0 w=1)  e8700000  7cPUcWc4r4r4r8#1:  ldrd.R,R,[R,-#]!
   ( p=0 u=1 w=0)  e8d00000  7cPUcWc4r4r4r8#2:  ldrd.R,R,[R,#]
   ( p=0 u=1 w=1)  e8f00000  7cPUcWc4r4r4r8#3:  ldrd.R,R,[R,#]!

   ( p=1 u=0 w=0)  e9500000  7cPUcWc4r4r4r8#4:  ldrd.R,R,[R],-#
   ( p=1 u=0 w=1)  e9700000  7cPUcWc4r4r4r8#5:  ldrd.R,R,[R],-#!
   ( p=1 u=1 w=0)  e9d00000  7cPUcWc4r4r4r8#6:  ldrd.R,R,[R],#
   ( p=1 u=1 w=1)  e9f00000  7cPUcWc4r4r4r8#7:  ldrd.R,R,[R],#!
original.mnemonic?  off
   ( p=0 u=0 w=0)  e8500000  7cPUcWc4r4r4r8#0:  R,R=(R-#)d
   ( p=0 u=0 w=1)  e8700000  7cPUcWc4r4r4r8#1:  R,R=(R-#)d,w
   ( p=0 u=1 w=0)  e8d00000  7cPUcWc4r4r4r8#2:  R,R=(R+#)d
   ( p=0 u=1 w=1)  e8f00000  7cPUcWc4r4r4r8#3:  R,R=(R+#)d,w

   ( p=1 u=0 w=0)  e9500000  7cPUcWc4r4r4r8#4:  R,R=(R-#)d,p
   ( p=1 u=0 w=1)  e9700000  7cPUcWc4r4r4r8#5:  R,R=(R-#)d,p,w
   ( p=1 u=1 w=0)  e9d00000  7cPUcWc4r4r4r8#6:  R,R=(R+#)d,p
   ( p=1 u=1 w=1)  e9f00000  7cPUcWc4r4r4r8#7:  R,R=(R+#)d,p,w

: R,R=(R)d      0  R,R=(R-#)d     ;
: R,R=(R)d,w    0  R,R=(R-#)d,w   ;
: R,R=(R)d      0  R,R=(R+#)d     ;
: R,R=(R)d,w    0  R,R=(R+#)d,w   ;

: R,R=(R)d,p    0  R,R=(R+#)d,p   ;
\ ******************************************************************************
\ 4.6.51     LDREX            T1
\ Load Register Exclusive calculates an address from a base register value and an immediate offset, loads a
\ word from memory, writes it to a register and:
\ E if the address has the Shared Memory attribute, marks the physical address as exclusive access for
\ the executing processor in a shared monitor
\ E causes the executing processor to indicate an active exclusive access in the local monitor.
\ See Memory accesses on page 4-13 for information about memory accesses.

\ T1   LDREX<c> <Rt>,[<Rn>{,#<imm>}]
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 0|1 0 0 0|0 1 0 1|==Rn===|===Rt==|1 1 1 1|=====imm8======|   e8500f00
\ ------------------------------------------------------------------------------
: 12c4r4r4c8#:gene     :.mnem_  ." `12c4r4r4c8#" #=if4 ."  0f 0c 12p 13 10 13p 7 0 14p  " .3" mnem" xt0 ;
: 12c4r4r4c8#:   ( Rd Rn # --- )  ( Rt Rn # --- )    \  Rt is replaced with Rd.
  create   dup  ,  12c4r4r4c8#:gene
  does>    @  ( op.code )  >r     8#*4.check  <#> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <#>   @             +                                           \ op.code+Rn+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on     e8500f00  12c4r4r4c8#:  ldrex_R,[R,#]
original.mnemonic?  on     e8500f00  12c4r4r4c8#:  ldrex.R,[R,#]
original.mnemonic?  off    e8500f00  12c4r4r4c8#:  R=(R+#)ex
                           e8500f00  12c4r4r4c8#:  R=(R+#12)ex

:  R=(R)ex    0   R=(R+#)ex  ;
\ ******************************************************************************
\ 4.6.52     LDREXB           T1
comment:
4.6.52 LDREXB
Load Register Exclusive Byte derives an address from a base register value, loads a byte from memory,
zero-extends it to form a 32-bit word, writes it to a register and:
E if the address has the Shared Memory attribute, marks the physical address as exclusive access for
the executing processor in a shared monitor
E causes the executing processor to indicate an active exclusive access in the local monitor.
See Memory accesses on page 4-13 for information about memory accesses.
Encoding
t = UInt(Rt); n = UInt(Rn);
if BadReg(t) || n == 15 then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set from v6K onwards.
T1 LDREXB<c> <Rt>, [<Rn>]
151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
|1 1 1 0|1 0 0 0|1 1 0 1|===Rn==|==Rt===(1 1 1 1)0 1 0 0(1 1 1 1)  f8d00f4f
comment;
\ ------------------------------------------------------------------------------

original.mnemonic?  on     e8d00f4f   12c4r4r12#:  ldrexb_R,[R,#]
original.mnemonic?  on     e8d00f4f   12c4r4r12#:  ldrexb.R,[R,#]
original.mnemonic?  off    e8d00f4f   12c4r4r12#:  R=(R+#)exb
                           e8d00f4f   12c4r4r12#:  R=(R+#12)exb

: R=(R)exb    0  R=(R+#)exb  ;
\ ******************************************************************************
\ 4.6.53     LDREXD           T1

comment:
4.6.53 LDREXD
Load Register Exclusive Doubleword derives an address from a base register value, loads a 64-bit
doubleword from memory, writes it to two registers and:
E if the address has the Shared Memory attribute, marks the physical address as exclusive access for
the executing processor in a shared monitor
E causes the executing processor to indicate an active exclusive access in the local monitor.
See Memory accesses on page 4-13 for information about memory accesses.
Encoding
t = UInt(Rt); t2 = UInt(Rt2); n = UInt(Rn);
if BadReg(t) || BadReg(t2) || t1 == t2 || n == 15 then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set from v6K onwards.
T1 LDREXD<c> <Rt>,<Rt2>,[<Rn>]
151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
|1 1 1 0|1 0 0 0|1 1 0 1|==Rn===|==Rt===|==Rt===|0 1 1 1(1 1 1 1)       e8b0007f
comment;
                                       \ ???????????  --> 12c4r4r8c:
original.mnemonic?  on      e8b0007f     12c4r4r12#:  ldrexd_R,R,[R]
original.mnemonic?  on      e8b0007f     12c4r4r12#:  ldrexd.R,R,[R]
original.mnemonic?  off     e8b0007f     12c4r4r12#:  R,R=[R]exd
\ ******************************************************************************
\ 4.6.54     LDREXH           T1       \ ???????????  --> 12c4r4r12c:
\ ------------------------------------------------------------------------------
original.mnemonic?  on      e8d00f5f     12c4r4r12#:  ldrexh_R,[R]
original.mnemonic?  on      e8d00f5f     12c4r4r12#:  ldrexh.R,[R]
original.mnemonic?  off     e8d00f5f     12c4r4r12#:  R=(R)exh
\ ******************************************************************************
\ 4.6.55     LDRH(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on          8800       5c5#3r3r:*4  ldrh_R,[R,#]
original.mnemonic?  on          8800       5c5#3r3r:*4  ldrh.R,[R,#]
original.mnemonic?  off         8800       5c5#3r3r:*4  R=(R+#)h
                                8800       5c5#3r3r:*4  R=(R+#5),h
                                8800       5c5#3r3r:*4  R=(R+#),h
\ ------------------------------------------------------------------------------
\ 4.6.55     LDRH(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f8d00000     12c4r4r12#:  ldrh_R,[R,#12]
original.mnemonic?  on      f8d00000     12c4r4r12#:  ldrh.R,[R,#12]
original.mnemonic?  off     f8d00000     12c4r4r12#:  R=(R+#12)h
                            f8d00000     12c4r4r12#:  R=(R+#12)h

: R=(R+#),h   3r3r5#?*4  if   R=(R+#)h     exit  then   R=(R+#12)h  ;
: R=(R)h                  0   R=(R+#),h    ;
\ ------------------------------------------------------------------------------
\ 4.6.55     LDRH(immediate)  T3
original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8300800  12c4r4rcPUW8#0:  ldrh_R,[R,-#]
  ( p=0 u=0 w=1 )   f8300900  12c4r4rcPUW8#1:  ldrh_R,[R,-#]!
  ( p=0 u=1 w=0 )   f8300a00  12c4r4rcPUW8#2:  ldrh_R,[R,#]
  ( p=0 u=1 w=1 )   f8300b00  12c4r4rcPUW8#3:  ldrh_R,[R,#]!

  ( p=1 u=0 w=0 )   f8300c00  12c4r4rcPUW8#4:  ldrh_R,[R],-#
  ( p=1 u=0 w=1 )   f8300d00  12c4r4rcPUW8#5:  ldrh_R,[R],-#!
  ( p=1 u=1 w=0 )   f8300e00  12c4r4rcPUW8#6:  ldrh_R,[R],#
  ( p=1 u=1 w=1 )   f8300f00  12c4r4rcPUW8#7:  ldrh_R,[R],#! 
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8300800  12c4r4rcPUW8#0:  R=(R-#)h
  ( p=0 u=0 w=1 )   f8300900  12c4r4rcPUW8#1:  R=(R-#)h,w
  ( p=0 u=1 w=0 )   f8300a00  12c4r4rcPUW8#2:  R=(R+#)h
  ( p=0 u=1 w=1 )   f8300b00  12c4r4rcPUW8#3:  R=(R+#)h,w

  ( p=1 u=0 w=0 )   f8300c00  12c4r4rcPUW8#4:  R=(R-#)h,p
  ( p=1 u=0 w=1 )   f8300d00  12c4r4rcPUW8#5:  R=(R-#)h,p
  ( p=1 u=1 w=0 )   f8300e00  12c4r4rcPUW8#6:  R=(R+#)h,p
  ( p=1 u=1 w=1 )   f8300f00  12c4r4rcPUW8#7:  R=(R+#)h,p

  ( p=0 u=0 w=0 )   f8300800  12c4r4rcPUW8#0:  R=(R-#),h
  ( p=0 u=0 w=1 )   f8300900  12c4r4rcPUW8#1:  R=(R-#),h,w
  ( p=0 u=1 w=0 )   f8300a00  12c4r4rcPUW8#2:  R=(R+#),h
  ( p=0 u=1 w=1 )   f8300b00  12c4r4rcPUW8#3:  R=(R+#),h,w

  ( p=1 u=0 w=0 )   f8300c00  12c4r4rcPUW8#4:  R=(R-#),h,p
  ( p=1 u=0 w=1 )   f8300d00  12c4r4rcPUW8#5:  R=(R-#),h,p
  ( p=1 u=1 w=0 )   f8300e00  12c4r4rcPUW8#6:  R=(R+#),h,p
  ( p=1 u=1 w=1 )   f8300f00  12c4r4rcPUW8#7:  R=(R+#),h,p
\ ******************************************************************************
\ 4.6.56     LDRH(literal)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f83f0000     8cU7c4r12#:  ldrh_R=(pc+#12)
original.mnemonic?  off     f83f0000     8cU7c4r12#:  ldrh_R=(pc+#)
                            f83f0000     8cU7c4r12#:  ldrh_R=(pc+#12)

: ldrh_R=(pc)   0  ldrh_R=(pc+#)  ;
\ ******************************************************************************
\ 4.6.57     LDRH(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on          5a00       7c3r3r3r:  ldrh_R,[R,R]
original.mnemonic?  off         5a00       7c3r3r3r:  R=(R+R)h
\ ------------------------------------------------------------------------------
\ 4.6.57     LDRH(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f8300000  12c4r4r6c2s4r:  ldrh_R,[R,R<<#]
original.mnemonic?  off     f8300000  12c4r4r6c2s4r:  R=(R+R<<#)h

: R=(R+R)h    3r3r3r?  if  R=(R+R)h  exit  then  0  R=(R+R<<#)h  ;
\ ******************************************************************************
\ 4.6.58     LDRHT           T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f83000e0    12c4r4r4c8#:  ldrht_R,[R,#]
original.mnemonic?  off     f83000e0    12c4r4r4c8#:  R=(R+#)t
                            f83000e0    12c4r4r4c8#:  R=(R+#8)t

: R=(R)t   0  R=(R+#)t  ;
\ ******************************************************************************
\ 4.6.59     LDRSB(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f9900000     12c4r4r12#:  ldrsb_R,[R,#12]
original.mnemonic?  off     f9900000     12c4r4r12#:  R=(R+#),b
original.mnemonic?  off     f9900000     12c4r4r12#:  R=(R+#)b
                            f9900000     12c4r4r12#:  R=(R+#12),b
                            f9900000     12c4r4r12#:  R=(R+#12)b
: R=(R),b    0  R=(R+#),b   ;
: R=(R)b     0  R=(R+#)b    ;
\ ------------------------------------------------------------------------------
\ 4.6.59     LDRSB(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on
  ( p=0 u=0 w=0 )   f9100800  12c4r4rcPUW8#0:  ldrsb_R,[R,-#]
  ( p=0 u=0 w=1 )   f9100900  12c4r4rcPUW8#1:  ldrsb_R,[R,-#]!
  ( p=0 u=1 w=0 )   f9100a00  12c4r4rcPUW8#2:  ldrsb_R,[R,#]
  ( p=0 u=1 w=1 )   f9100b00  12c4r4rcPUW8#3:  ldrsb_R,[R,#]!

  ( p=1 u=0 w=0 )   f9100c00  12c4r4rcPUW8#4:  ldrsb_R,[R],-#
  ( p=1 u=0 w=1 )   f9100d00  12c4r4rcPUW8#5:  ldrsb_R,[R],-#!
  ( p=1 u=1 w=0 )   f9100e00  12c4r4rcPUW8#6:  ldrsb_R,[R],#
  ( p=1 u=1 w=1 )   f9100f00  12c4r4rcPUW8#7:  ldrsb_R,[R],#!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f9100800  12c4r4rcPUW8#0:  R=(R-#)sb
  ( p=0 u=0 w=1 )   f9100900  12c4r4rcPUW8#1:  R=(R-#)sb,w
  ( p=0 u=1 w=0 )   f9100a00  12c4r4rcPUW8#2:  R=(R+#)sb
  ( p=0 u=1 w=1 )   f9100b00  12c4r4rcPUW8#3:  R=(R+#)sb,w

  ( p=1 u=0 w=0 )   f9100c00  12c4r4rcPUW8#4:  R=(R)-#sb,p
  ( p=1 u=0 w=1 )   f9100d00  12c4r4rcPUW8#5:  R=(R)-#sb,p
  ( p=1 u=1 w=0 )   f9100e00  12c4r4rcPUW8#6:  R=(R)+#sb,p
  ( p=1 u=1 w=1 )   f9100f00  12c4r4rcPUW8#7:  R=(R)+#sb,p

  ( p=0 u=0 w=0 )   f9100800  12c4r4rcPUW8#0:  R=(R-#),sb
  ( p=0 u=0 w=1 )   f9100900  12c4r4rcPUW8#1:  R=(R-#),sb,w
  ( p=0 u=1 w=0 )   f9100a00  12c4r4rcPUW8#2:  R=(R+#),sb
  ( p=0 u=1 w=1 )   f9100b00  12c4r4rcPUW8#3:  R=(R+#),sb,w

  ( p=1 u=0 w=0 )   f9100c00  12c4r4rcPUW8#4:  R=(R)-#,sb,p
  ( p=1 u=0 w=1 )   f9100d00  12c4r4rcPUW8#5:  R=(R)-#,sb,p
  ( p=1 u=1 w=0 )   f9100e00  12c4r4rcPUW8#6:  R=(R)+#,sb,p
  ( p=1 u=1 w=1 )   f9100f00  12c4r4rcPUW8#7:  R=(R)+#,sb,p

: R=(R+#)b      4r4r8#?   if  R=(R+#)b   exit  then   R=(R+#12)b   ;
: R=(R)b     0  R=(R+#)b   ;
: R=(R+#),b     4r4r8#?   if  R=(R+#),b  exit  then   R=(R+#12),b  ;
: R=(R),b    0  R=(R+#),b  ;
: R=(R),y    0  R=(R+#),b  ;   
\ ******************************************************************************
\ 4.6.60     LDRSB(literal)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f91f0000     8cU7c4r12#:  ldrh_R,[pc,#12]
original.mnemonic?  off     f91f0000     8cU7c4r12#:  R=(pc+#)h
                            f91f0000     8cU7c4r12#:  R=(pc+#12)h
\ ******************************************************************************
\ 4.6.61     LDRSB(register)  T1                    \ 2019.8.2
\ ------------------------------------------------------------------------------
original.mnemonic?  on          5600       7c3r3r3r:  ldrsb_R,[R,R]
original.mnemonic?  off         5600       7c3r3r3r:  R=(R+R)sb
\ ------------------------------------------------------------------------------
\ 4.6.61     LDRSB(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f9100000  12c4r4r6c2s4r:  ldrsb_R,[R<<R]
original.mnemonic?  off     f9100000  12c4r4r6c2s4r:  ldrsb_R=(R<<R)b
\ ******************************************************************************
\ 4.6.62     LDRSBT           T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f9100e00    12c4r4r4c8#:  ldrsbt_R,[R,#8]
original.mnemonic?  off     f9100e00    12c4r4r4c8#:  R=(R+#)t
                            f9100e00    12c4r4r4c8#:  R=(R+#8)t
\ ******************************************************************************
\ 4.6.63     LDRSH(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f9b00000     12c4r4r12#:  ldrsh_R,[R,#12]
original.mnemonic?  off     f9b00000     12c4r4r12#:  R=(R+#)h
                            f9b00000     12c4r4r12#:  R=(R+#12)h
\ ------------------------------------------------------------------------------
\ 4.6.63     LDRSH(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on
  ( p=0 u=0 w=0 )   f9300800  12c4r4rcPUW8#0:  ldrsh_R,[R,-#]
  ( p=0 u=0 w=1 )   f9300900  12c4r4rcPUW8#1:  ldrsh_R,[R,-#]!
  ( p=0 u=1 w=0 )   f9300a00  12c4r4rcPUW8#2:  ldrsh_R,[R,#]
  ( p=0 u=1 w=1 )   f9300b00  12c4r4rcPUW8#3:  ldrsh_R,[R,#]!

  ( p=1 u=0 w=0 )   f9300c00  12c4r4rcPUW8#4:  ldrsh_R,[R],-#
  ( p=1 u=0 w=1 )   f9300d00  12c4r4rcPUW8#5:  ldrsh_R,[R],-#!
  ( p=1 u=1 w=0 )   f9300e00  12c4r4rcPUW8#6:  ldrsh_R,[R],#
  ( p=1 u=1 w=1 )   f9300f00  12c4r4rcPUW8#7:  ldrsh_R,[R],#!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f9300800  12c4r4rcPUW8#0:  R=(R-#)sh
  ( p=0 u=0 w=1 )   f9300900  12c4r4rcPUW8#1:  R=(R-#)sh,w
  ( p=0 u=1 w=0 )   f9300a00  12c4r4rcPUW8#2:  R=(R+#)sh
  ( p=0 u=1 w=1 )   f9300b00  12c4r4rcPUW8#3:  R=(R+#)sh,w

  ( p=0 u=0 w=0 )   f9300c00  12c4r4rcPUW8#4:  R=(R-#)sh,p
  ( p=0 u=0 w=1 )   f9300d00  12c4r4rcPUW8#5:  R=(R-#)sh,p
  ( p=0 u=1 w=0 )   f9300e00  12c4r4rcPUW8#6:  R=(R+#)sh,p
  ( p=0 u=1 w=1 )   f9300f00  12c4r4rcPUW8#7:  R=(R+#)sh,p

  ( p=0 u=0 w=0 )   f9300800  12c4r4rcPUW8#0:  R=(R-#),sh
  ( p=0 u=0 w=1 )   f9300900  12c4r4rcPUW8#1:  R=(R-#),sh,w
  ( p=0 u=1 w=0 )   f9300a00  12c4r4rcPUW8#2:  R=(R+#),sh
  ( p=0 u=1 w=1 )   f9300b00  12c4r4rcPUW8#3:  R=(R+#),sh,w

  ( p=0 u=0 w=0 )   f9300c00  12c4r4rcPUW8#4:  R=(R-#),sh,p
  ( p=0 u=0 w=1 )   f9300d00  12c4r4rcPUW8#5:  R=(R-#),sh,p
  ( p=0 u=1 w=0 )   f9300e00  12c4r4rcPUW8#6:  R=(R+#),sh,p
  ( p=0 u=1 w=1 )   f9300f00  12c4r4rcPUW8#7:  R=(R+#),sh,p
\ ******************************************************************************
\ 4.6.60     LDRSB(literal)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f93f0000     8cU7c4r12#:  ldrsb_R,[pc,#12]
original.mnemonic?  off     f93f0000     8cU7c4r12#:  R=(pc+#)b
                            f93f0000     8cU7c4r12#:  R=(pc+#12)b
\ ******************************************************************************
\ 4.6.61     LDRSH(register)   T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on          5e00       7c3r3r3r:  ldrsh_R,[R,R]
original.mnemonic?  off         5e00       7c3r3r3r:  R=(R+R)h
\ ------------------------------------------------------------------------------
\ 4.6.62     LDRSH(register)    T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f9300000  12c4r4r6c2s4r:  ldrsh_R,[R<<R]
original.mnemonic?  off     f9300000  12c4r4r6c2s4r:  R=(R<<R)h
\ ******************************************************************************
\ 4.6.66     LDRSHT           T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f9300e00    12c4r4r4c8#:  ldrsht_R,[R,#8]
original.mnemonic?  off     f9300e00    12c4r4r4c8#:  R=(R+#)t
                            f9300e00    12c4r4r4c8#:  R=(R+#8)t
\ ******************************************************************************
\ 4.6.67     LDRT             T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f8500e00    12c4r4r4c8#:  ldrt_R,[R,#8]
original.mnemonic?  off     f8500e00    12c4r4r4c8#:  R=(R+#)t
                            f8500e00    12c4r4r4c8#:  R=(R+#8)t
\ ******************************************************************************
\ 4.6.68     lsl(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on          0000    5c5#3r3r:  lsls_R,R,#5
original.mnemonic?  on          0000    5c5#3r3r:  lsl_R,R,#5
\                               0000    5c5#3r3r:  lsls_R,R,#5
\ (  00000006  88 02             )                    0         1        0A    lsl_R,R,#5   5 ????????
original.mnemonic?  off         0000    5c5#3r3r:  R=R<<#,s
                                0000    5c5#3r3r:  R=R<<#
                                0000    5c5#3r3r:  R=R<<#5,s
                                0000    5c5#3r3r:  R=R<<#5s
                                0000    5c5#3r3r:  R=R.u<<#
comment:
original.mnemonic?  on          0000     10c3r3r:  movs_R,R
original.mnemonic?  off         0000     10c3r3r:  R=R,s
comment;

\ : r=r   3r3r?  if  0  R=R<<#,s  then  ;  \ 0656   R6 R6 MOVS  0036 in swiftForth
\ ------------------------------------------------------------------------------
\ 4.6.68     lsl(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on      ea4f0000    11cs5c3#4r2#2c4r:  lsl_R,R,#5,w
original.mnemonic?  off     ea4f0000    11cs5c3#4r2#2c4r:  R=R<<#5'
original.mnemonic?  off     ea4f0000    11cs5c3#4r2#2c4r:  R=R,u<<#5'

: R=R<<#     ( r r # -- )   3r3r5#?    if       R=R<<#      exit   then       R=R<<#5'    ;
:   R<<#     >r  dup  r>    R=R<<#     ;
: R*2        1  R<<#    ;

\ : R=R,u<<#   ( r r # -- )   3r3r5#?    if       R=R,u<<#5'  exit   then       R=R,u<<#5'  ;  \ ????
\ :   R,u<<#   >r  dup  r>    R=R,u<<#   ;

: R=R,u<<#   ( r r # -- )   3r3r5#?    if       R=R<<#      exit   then       R=R,u<<#5'  ;  \ ????
:   R,u<<#   >r  dup  r>    R=R,u<<#   ;

: R*2u       1  R,u<<#  ;
:{  {u2*}    t  1  R,u<<#   };
\ ******************************************************************************
\ 4.6.69    lsl(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on          4080  10c3r3r:  LSLs_R,R
original.mnemonic?  on          4080  10c3r3r:  LSL_R,R
\ original.mnemonic?  on        4080  10c3r3r:  LSLs_R<<R
\ Rdn,Rm === Rd=Rn<<Rm === R<<R

original.mnemonic?  off         4080  10c3r3r:  R<<R,s
original.mnemonic?  off         4080  10c3r3r:  R<<R
original.mnemonic?  off         4080  10c3r3r:  R,u<<R
\ ------------------------------------------------------------------------------
\ 4.6.69    lsl(register)  T2
\ ------------------------------------------------------------------------------
:  11cs4r4c4r4c4r:_gene   :.mnem_  ." `11cs4r4c4r4c4r" #=if4 ."  0b  8  12p 13 10 13p 3 0 14p" .3" mnem" xt0 ;
:  11cs4r4c4r4c4r: ( Rd Rn Rm --- )
   create  dup   ,   11cs4r4c4r4c4r:_gene
   does>   @  ( op.code )  >r     4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <Rm> @          +                                           \ op.code+Rn+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off   s=1.ok?  on  ;

original.mnemonic?  on      fa00f000  11cs4r4c4r4c4r:  lsl_R,R,R
original.mnemonic?  off     fa00f000  11cs4r4c4r4c4r:  R=R<<R
original.mnemonic?  off     fa00f000  11cs4r4c4r4c4r:  R=R,u<<R

:  R<<R    3r3r?  if   R<<R     exit  then   R=R<<R    ;
:  R,u<<R  3r3r?  if   R,u<<R   exit  then   R=R,u<<R  ;
\ ******************************************************************************
\ 4.6.70     lsr(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         0800   5c5#3r3r:  lsr_R,R,#5
original.mnemonic?  off        0800   5c5#3r3r:  R=R>>#5
                               0800   5c5#3r3r:  R=R,>>#5
                               0800   5c5#3r3r:  R=R,>>#
                               0800   5c5#3r3r:  3R=3R>>#5

original.mnemonic?  off        0800   5c5#3r3r:  R=Ru>>#5
                               0800   5c5#3r3r:  R=R,u>>#5
                               0800   5c5#3r3r:  R=R,u>>#
                               0800   5c5#3r3r:  3R=3R,u>>#5
\ ------------------------------------------------------------------------------
\ 4.6.70     lsr(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on    ea2f0010  11cs5c3#4r2#2c4r:  lsr_R,R,#5
original.mnemonic?  off   ea2f0010  11cs5c3#4r2#2c4r:  R=R>>#
                          ea2f0010  11cs5c3#4r2#2c4r:  R=R,>>#'
                          ea2f0010  11cs5c3#4r2#2c4r:  R=R,>>#5
                          ea2f0010  11cs5c3#4r2#2c4r:  4R=4R>>#5


original.mnemonic?  off   ea2f0010  11cs5c3#4r2#2c4r:  R=R,u>>#
                          ea2f0010  11cs5c3#4r2#2c4r:  R=R,u>>#'
                          ea2f0010  11cs5c3#4r2#2c4r:  R=R,u>>#5
                          ea2f0010  11cs5c3#4r2#2c4r:  4R=4R,u>>#5

: R=R>>#    3r3r5#?  if  R=R,>>#    exit  then  R=R,>>#'  ;
: R=R,>>#   3r3r5#?  if  R=R,>>#    exit  then  R=R,>>#'  ;
: R>>#      >r  dup  r>  R=R>>#     ;

: R=Ru>>#   3r3r5#?  if  R=R,u>>#   exit  then  R=R,u>>#'  ;
: R=R,u>>#  3r3r5#?  if  R=R,u>>#   exit  then  R=R,u>>#'  ;
: R,u>>#    >r  dup  r>  R=R,u>>#   ;

\  :{  {u2/}    t  1  R,u>>#   };   \  ?????????????
\ :{  {u2/}    t  1 r>>#      };
\ :{  {u2/}  t t  1 r=r>>#5   };
\ ******************************************************************************
\ 4.6.71    lsr(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on        40c0  10c3r3r:         lsrs_R,R
original.mnemonic?  on        40c0  10c3r3r:         lsr_R,R
original.mnemonic?  off       40c0  10c3r3r:         R>>R,s
original.mnemonic?  off       40c0  10c3r3r:         R>>R
                          \   40c0  10c3r3r:         R,>>R

original.mnemonic?  off       40c0  10c3r3r:         Ru>>R
                          \   40c0  10c3r3r:         R.u>>R
\ ------------------------------------------------------------------------------
\ 4.6.71    lsr(register)  T2
\ ------------------------------------------------------------------------------
  original.mnemonic?  on    fa20f000  11cs4r4c4r4c4r:  lsr_R,R,R
  original.mnemonic?  off   fa20f000  11cs4r4c4r4c4r:  R=R>>R
\ original.mnemonic?  off   fa20f000  11cs4r4c4r4c4r:  R=R.u>>R
\ original.mnemonic?  off   fa20f000  11cs4r4c4r4c4r:  R=Ru>>R
\ original.mnemonic?  off   fa20f000  11cs4r4c4r4c4r:  R=R>>R

  : R>>R     3r3r?  if   R>>R     exit  then   >r  dup  r>  R=R>>R    ;
\ : R>>R    3r3r?  if   R>>R    exit  then   >r  dup  r>  R=R>>R    ;

  : R>>R     3r3r?  if   R>>R     exit  then   >r  dup  r>  R=R>>R    ;
\ : Ru>>R    3r3r?  if   Ru>>R    exit  then   >r  dup  r>  R=Ru>>R   ;
\ : R.u>>R   3r3r?  if   R.u>>R   exit  then   >r  dup  r>  R=R.u>>R  ;
\ ******************************************************************************
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.72    MCR,MCR2    T1
\ ------------------------------------------------------------------------------
\  ee000010  3cC4c4opc4r4r4cop3opc4r:  mcr.R,R,R
\ ******************************************************************************
\ 4.6.73    MCRR,MCRR2    T1
\ ------------------------------------------------------------------------------
\ ee400000  3cC4c4opc4r4r4cop3opc4r:  mcrr.R,R,R
: 3cC8c4r4r4p3o4r:_gene     :.mnem_  ." `3cC8c4r4r4p3o4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .4" mnem" xt0 ;
: 3cC8c4r4r4p3o4r:
  create   dup  ,   3cC8c4r4r4p3o4r:_gene
  does>   \  ???
  32@^   32,'   ;     \ ????????????????

\ ee400000  3cC8c4r4r4p3o4r:   mcrr.R,R,R
\ ******************************************************************************
\ 4.6.74     MLA        T1
\ ------------------------------------------------------------------------------
: 12c4r4r4r4c4r:_gene     :.mnem_  ." `12c4r4r4r4c4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .4" mnem" xt0 ;
: 12c4r4r4r4c4r:
  create   dup  ,  12c4r4r4r4c4r:_gene
  does>   >r  ( rd rn rm ra )
  ( ra )  4r.check  1000 *     swap
  ( rm )  4r.check          +  swap
  ( rn )  4r.check 10000 *  +  swap
  ( rd )  4r.check   100 *  +  r>  @  +  0~15<->16~31   32,'  all.ok?.off  ;

original.mnemonic?  on    fb000000  12c4r4r4r4c4r:  mla_R,R,R,R
original.mnemonic?  off   fb000000  12c4r4r4r4c4r:  mla.R,R,R,R
\ ******************************************************************************
\ 4.6.75     MLS        T1
\ ------------------------------------------------------------------------------
  fb000010  12c4r4r4r4c4r:  mls_R,R,R,R
\ ******************************************************************************
\ 4.6.76     MOV(immediate)  T1

\ Move (immediate) writes an immediate value to the destination register. It can optionally update the
\ condition flags based on the value.
\ T1 MOVS <Rd>,#<imm8> Outside IT block.
\ MOV<c> <Rd>,#<imm8> Inside IT block.
\ 151413121110 9 8 7 6 5 4 3 2 1 0
\  0 0 1 0 0 ==Rd= =====imm8======
\ d = UInt(Rd); setflags = !InITBlock();
\ (imm32, carry) = (ZeroExtend(imm8, 32), APSR.C);

original.mnemonic?  on          2000   5c3r8#:  mov_R,#8
                                2000   5c3r8#:  movs_R,#8
original.mnemonic?  off         2000   5c3r8#:  R=#8
                                2000   5c3r8#:  R=#8,s
\  (  0000F8F0  01 21             )                                             mov_R1,1
\ ------------------------------------------------------------------------------
\ 4.6.76     MOV(immediate)  T2

\ T2    MOV{S}<c>.W <Rd>,#<const>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  1 1 1 1|0 i 0 0|0 1 0 S|1 1 1 1|0 =imm3 ==Rd=== =====imm8======

\ d = UInt(Rd); setflags = (S == '1');
\ (imm32, carry) = ThumbExpandImmWithC(i:imm3:imm8, APSR.C);
\ if BadReg(d) then UNPREDICTABLE;

original.mnemonic?  on    f04f0000   5c#5cs5c3#4r8#:  mov_R,#12
\ here'   f04f6080  0~15<->16~31  32,'  dis   (  0000F8F2  4F F0 80 60       )   mov_R0,40000002 ok.
original.mnemonic?  off   f04f0000   5c#5cs5c3#4r8#:  R=#12
\ 0000F8FA r=#12_   (  0000F8FA  4F F0 80 60       )                             R0=40000002 ok........
\ ------------------------------------------------------------------------------
\ 4.6.76     MOV(immediate)  T3

\ T3 MOVW<c> <Rd>,#<imm16>
\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 1|0 i 1 0|0 1 0 0 =imm4== 0 imm3= ===Rd== =====imm8======     f2400000  fbf08000
\                                 |# # # #|# # # #|# # # #|# # # #|
\                                  ==imm4= i =imm3 =====imm8======
\  d = UInt(Rd); setflags = FALSE;
\ (imm32, carry) = (ZeroExtend(imm4:i:imm3:imm8, 32), APSR.C);
\ // carry is a "don't care" value
\ if BadReg(d) then UNPREDICTABLE;

:  16#>#6.4#.3#4.8#   ( 16# -- #6.4#.3#4.8# )   >r
   r@  0000f000  and     4 lshift           \ imm4
   r@  00000800  and    0f lshift     +     \ i
   r@  00000700  and     4 lshift     +     \ imm3
   r>  000000ff  and  (  0 rshift )   +  ;  \ imm8

:  #6.4#.3#4.8#>16#    (  #6.4#.3#4.8# -- 16# )   ( op.code )  >r
   r@  000f0000  and     4 rshift           \ imm4
   r@  04000000  and    0f rshift     +     \ i
   r@  00007000  and     4 rshift     +     \ imm3
   r>  000000ff  and  (  0 rshift )   +   ; \ imm8

:  4,#6.4#.3#4.8#,4   ( a' -- a' )   dup  32@' ( op.code )  >r
   r@  000f0000  and     4 rshift           \ imm4
   r@  04000000  and    0f rshift     +     \ i
   r@  00070000  and     4 rshift     +     \ imm3
   r>  000000ff  and  (  0 rshift )   +     \ imm8
 ( 4p )  43 ?y  .xxxxxxxx(h)  ;

:  4,#6.4#.3#4.8#,4   ( a' -- a' )   dup  32@' ( op.code ) 0~15<->16~31  #6.4#.3#4.8#>16#  ( dup  >disassem.number.stack )  4 to <<byte>>  4p  ; \ .xxxxxxxx(h)  ;
\ ------------------------------------------------------------------------------
comment:
T3 MOVW<c> <Rd>,#<imm16>
  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
  |1 1 1 1|0 i 1 0|0 1 0 0|==imm4=|0 =imm3|===Rd==|=====imm8======|    f2400000
d = UInt(Rd); setflags = FALSE;
(imm32, carry) = (ZeroExtend(imm4:i:imm3:imm8, 32), APSR.C);
// carry is a "don't care" value
if BadReg(d) then UNPREDICTABLE;
comment;

\ `11cs4r4#4r4#4r     dup 32@^   ( ,s=1.ok?? )     ffe00000  and  ;  ( a' -- a' op.code )
: `5c#6c4#c3#4r8#     dup 32@^   ( ,s=1.ok?? )     fbf08000  and  ;  ( a' -- a' op.code )
\  5c#6c4#c3#4r8#:       :.mnem_  ." `5c#6c4#c3#4r8#" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p138" .2" mnem" xt0 ;
:  5c#6c4#c3#4r8#:_gene  :.mnem_  ." `5c#6c4#c3#4r8#" #=if4 ."  0b  8  13p  4,#6.4#.3#4.8#,4" .2" mnem" xt0 ;

:  5c#6c4#c3#4r8#:
   create   dup  ,     5c#6c4#c3#4r8#:_gene
   does>    >r     16#.check   <16#>  !    4r.check   <rd>  !
        <rd>   @   100  *
        <16#>  @   16#>#6.4#.3#4.8#   +
           r>  @                      +    0~15<->16~31   32,'  all.ok?.off  ;

original.mnemonic?  on    f2400000  5c#6c4#c3#4r8#:  mov_R,#16
original.mnemonic?  off   f2400000  5c#6c4#c3#4r8#:  R=#16

comment:
:  R=#       3r8#?    if  R=#8    exit  then
             4r12#?   if  R=#12   exit  then
                          R=#16   ;
comment;

:  R=#'      3r8#?    if  R=#8    exit  then
             4r16#?   if  R=#16   exit  then
                          R=#12   ;


comment:

:  R=#'      3r8#?    if  R=#8    exit  then
             4r16#?   if  R=#16   exit  then
        dup  ffff u>  if  0  ( s>d )  10000  um/mod  >r  over  R=#   r>  Rt=#  exit  then
                          R=#12   ;

:  R=#   dup>r  10000 u<  if  r>  R=#'  exit  then
   dup   r@ 10000 mod   R=#'    ( 15~00 )
         r> 10000 /     Rt=#16  ( 31~16 )  ;

: (#)o#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)oF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Ro#       \  r1o#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)=#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)oF00000
  0  swap  r=#       \  r0=a'
  1  r>    r=#       \  r1=#
  0  1     (r)=r  ;  \  (r0)=r1
comment;

\ ******************************************************************************
\ 4.6.77     MOV(register)  T1
\ ------------------------------------------------------------------------------
\     4600   8cD4r3r:   R=R

original.mnemonic?  on        4600   8cDN4r3r:  mov_R,R''
original.mnemonic?  off       4600   8cDN4r3r:  R=R''
\ ------------------------------------------------------------------------------
\ 4.6.77     MOV(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on        0000  10c3r3r:  movs_R,R'
original.mnemonic?  on        0000  10c3r3r:  mov_R,R'
original.mnemonic?  off       0000  10c3r3r:  R=R,s'
original.mnemonic?  off       0000  10c3r3r:  R=R'
\ lsls_R,R,0   R=R<<0
\ ------------------------------------------------------------------------------
\ 4.6.77     MOV(register)  T3
\ ------------------------------------------------------------------------------
: 11cs8c4r4c4r:_gene     :.mnem_  ." `11cs8c4r4c4r" #=if4 ."  0b 8 13p  3 0 14p" .2" mnem"  xt0 ;

comment:
: 11cs8c4r4c4r: ( Rd Rn Rm --- )
  create  dup   ,   11cs8c4r4c4r:_gene
  does>   @  ( op.code )  >r     4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
\    <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <Rm> @          +                                           \ op.code+Rn+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;

: 11cs8c4r4c4r: ( Rd Rn Rm --- )
  create  dup   ,   11cs8c4r4c4r:_gene
  does>   ( Rd Rn a ) @  ( op.code )  >r     4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
\    <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <Rm> @          +                                           \ op.code+Rn+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;
comment;




\ : `11cc8c4r4c4r           ffeff0f0  `32s  ;  ( a' -- a' op.code )

  : `11cc8c4r4c4r           fffff0f0  `32s  ;  ( a' -- a' op.code )



:  11cc8c4r4c4r:_gene     :.mnem_  ." `11cc8c4r4c4r" #=if4 ."  0b 8 13p  3 0 14p" .2" mnem"  xt0 ;
:  11cc8c4r4c4r: ( Rd Rn --- )
   create  dup   ,   11cc8c4r4c4r:_gene
   does>   ( Rd Rn a )  to  (a)   4R.check  to (Rn)   4R.check  to (Rd)    4 to <<byte>>
      (Rd)   0b  8  >?~?
      (Rn)    3  0  >?~?    +
      (a)     @  ( op.code) +
      32,^    here'   4  -  last.instruction.addr  !  ;

: 11cs8c4r4c4r: ( Rd Rn --- )
  create   dup   ,   11cs8c4r4c4r:_gene
  does>    ( Rd Rn a )  to  (a)   4R.check  to (Rn)   4R.check  to (Rd)    4 to <<byte>>
      (Rd)   0b  8  >?~?
      (Rn)    3  0  >?~?    +
      (a)     @  ( op.code) +
      32,^    here'   4  -  last.instruction.addr  !  ;

original.mnemonic?  on    ea50f000  11cc8c4r4c4r:  movs_R,R
original.mnemonic?  off   ea50f000  11cc8c4r4c4r:  R=R,s

original.mnemonic?  on    ea40f000  11cs8c4r4c4r:  mov_R,R
original.mnemonic?  off   ea40f000  11cs8c4r4c4r:  R=R

: R=R    3r3r?  if   R=R'    exit  then      \ ???????????
         4r4r?  if   R=R''   exit  then
                     R=R     ;

: R=R    4r4r?  if   R=R''   exit  then
         3r3r?  if   R=R'    exit  then
                     R=R     ;
\ ******************************************************************************
\ 4.6.78     MOV(shifted register)  T1
\ ------------------------------------------------------------------------------

\ ******************************************************************************
\ 4.6.79     MOVT                T1

comment:
4.6.79 MOVT
Move Top writes an immediate value to the top halfword of the destination register. It does not affect the
contents of the bottom halfword.
Encodings
d = UInt(Rd); imm16 = imm4:i:imm3:imm8;
if BadReg(d) then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set from Thumb-2 onwards.
T1 MOVT<c> <Rd>,#<imm16>
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 1 0 i 1 0 1 1 0 0 imm4 0 imm3 Rd imm8
comment;

original.mnemonic?  on    f2c00000  5c#6c4#c3#4r8#:  movt_R=#
original.mnemonic?  on    f2c00000  5c#6c4#c3#4r8#:  movt_R=#16
original.mnemonic?  off   f2c00000  5c#6c4#c3#4r8#:  Rt=#
original.mnemonic?  off   f2c00000  5c#6c4#c3#4r8#:  Rt=#16
\ ******************************************************************************
\ 4.6.80     MRC,MRC2       T1
\ ------------------------------------------------------------------------------
\  ee100010  3cC4c3opc4r4r4cop3opc4r:  mrc_R,cR,cR
\ ******************************************************************************
\ 4.6.81     MRRC,MRRC2     T1
\ ------------------------------------------------------------------------------
\  ee500000  3cC8c4r4r4p3o4r:  mrrc_R,cR,cR
\ ******************************************************************************
\ 4.6.82     MRS            T1
\ ------------------------------------------------------------------------------
: 11cR8c4r8c:_gene      :.mnem_  ." `11cR8c4r8c" #=if4 ."  0b 8 14p" .1" mnem" xt0 ;
: 11cR8c4r8c:
  create    dup  ,  11cR8c4r8c:_gene
  does>  >r  ( R )  4r.check   r> @  +  0~15<->16~31   32,'   ;   \  ?

original.mnemonic?  on    f3ef8000   11cR8c4r8c:  mrs_R,cpsr
                          f3ff8000   11cR8c4r8c:  mrs_R,spsr
original.mnemonic?  off   f3ef8000   11cR8c4r8c:  R=cpsr
                          f3ff8000   11cR8c4r8c:  R=spsr
\ ******************************************************************************
\ 4.6.83     MSR(register)  T1                 ??????????????????????????
\ ------------------------------------------------------------------------------
\ 11cR4r4c4m8c:
: 11cR4r4c4m8c:_gene      :.mnem_  ." `11cR4r4c4m8c" #=if4 ."  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 11cR4r4c4m8c:
  create    dup  ,  11cR4r4c4m8c:_gene
  does>  >r  ( R )  4r.check   r> @  +  0~15<->16~31   32,'   ;   \  ?

original.mnemonic?  on  \ f3808000   11cR4r4c4m8c:  msr.#1,R
                          f3808000   11cR4r4c4m8c:  msr_cpsr,R
                          f3908000   11cR4r4c4m8c:  msr_spsr,R
original.mnemonic?  off   f3808000   11cR4r4c4m8c:  cpsr=R
                          f3908000   11cR4r4c4m8c:  spsr=R
\ ******************************************************************************
\ 4.6.84     mul             T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on        4340   10c3r3r:        mul_R,R
original.mnemonic?  off       4340   10c3r3r:        R*R'
\ ******************************************************************************
\ 4.6.84     mul             T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on    fb00f000   12c4r4c4r4c4r:  mul_R,R,R
original.mnemonic?  off   fb00f000   12c4r4c4r4c4r:  R=R*R

: R*R   3r3r?  if  R*R'   else   over  R=R*R  then  ;
\ ******************************************************************************
\ 4.6.85     MVN(immediate)  T1   \    It is 1's complement or Not (invert).
\ ------------------------------------------------------------------------------
               original.mnemonic?  on    f06f0000   5c#5cs5c3#4r8#:   mvn_R,#
\ ( ??????? )  original.mnemonic?  off   f06f0000   5c#5cs5c3#4r8#:   R=#8/
\ ( ??????? )  original.mnemonic?  off   f06f0000   5c#5cs5c3#4r8#:   R=#8/
               original.mnemonic?  off   f06f0000   5c#5cs5c3#4r8#:   R=#12/

: R=#/'   ( r # -- -1 / r # 0 )
\ dup   0   ff  between  if  R=#8/   -1  exit  then
  dup   0 ffff  between  if  R=#12/  -1  exit  then  0  ;

: R=#/    ( r # -- -1 / r # 0 )
\ dup   0   ff  between  if  R=#8/   -1  exit  then
  dup   0 ffff  between  if  R=#12/  -1  exit  then  0  ;

: R=#/'   ( r # -- -1 / r # 0 )   R=#12/  ;
: R=#/    ( r # -- -1 / r # 0 )   R=#12/  ;
\ ******************************************************************************
\ 4.6.86     MVN(register)   T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on        43c0   10c3r3r:  mvn_R,R/
original.mnemonic?  off       43c0   10c3r3r:  R=R/
\ ------------------------------------------------------------------------------
\ 4.6.86     MVN(register)   T2            put this one after ORN(register)       \ *************
\ ------------------------------------------------------------------------------  \
original.mnemonic?  on    ea6f0000   11cs5c3#4r2#ty4r:  mvn_R,R/<<#5              \
original.mnemonic?  off   ea6f0000   11cs5c3#4r2#ty4r:  R=R/,<<#5                 \
                     \    ea6f0000   11cs5c3#4r2#ty4r:  R=R<<#5                   \
                                                                                  \
: R=R/,<<#    R=R/,<<#5  ;                                                        \
: R=R/   3r3r?  if  R=R/  exit  then  0  R=R/,<<#  ;                              \ *************
\ ******************************************************************************
\ 4.6.87     NEG

comment:
Negate is a pre-UAL synonym for RSB (immediate) with an immediate value of 0. See RSB (immediate) on
page 4-249 for details.
comment;
\ ------------------------------------------------------------------------------
\  equivalent to RSBS
\  NEG  ( r -- )   dup  R=-R  ;
\  : -R   ( r -- )   dup  R=-R  ;
\ ******************************************************************************
\ 4.6.88     NOP        T1
\ ------------------------------------------------------------------------------
comment:
\ : 32C:_gene    :.MNEM_ ." `32c" #=if4 ."  " .1" MNEM" xt0 ;
: 16C:_GENE      :.MNEM_ ." `16c" #=if2 ."  " .1" MNEM"  XT0 ;
: 16C:  CREATE  DUP , 16C:_GENE
        DOES>   @ 16,' ;
comment;

     bf00    16c:  nop
     bf00    16c:  nop
\ ------------------------------------------------------------------------------
\ 4.6.88     NOP        T2
\ ------------------------------------------------------------------------------
    f3af8000  32c:  nop'
    f3af8000  32c:  nop32
\ ******************************************************************************
\ ******************************************************************************




\ 4.6.115 ROR (immediate)  conflicting with 4.6.92 ORR (register) with Rd=15 ( 0F )
  original.mnemonic?  on       ea4f0030  11cs5c3#4r2#2c4r:   ror_R,R,#
  original.mnemonic?  off      ea4f0030  11cs5c3#4r2#2c4r:   R=R>>>#








\ ******************************************************************************
\ 4.6.89     ORN(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    f0700000   5c#5cc4rc3#4r8#:  orns_R,R,#
original.mnemonic?  off   f0700000   5c#5cc4rc3#4r8#:  R=Ro#/,s
original.mnemonic?  on    f0600000   5c#5cs4rc3#4r8#:  orn_R,R,#
original.mnemonic?  off   f0600000   5c#5cs4rc3#4r8#:  R=Ro#/

: Ro#/.s   >r   dup   r>           R=Ro#/,s  ;
: Ro#/     >r   dup   r>           R=Ro#/    ;
\ ******************************************************************************
\ 4.6.90     ORN(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    ea600000   11cs4rc3#4r2#ty4r: orn_R,R,R,#
original.mnemonic?  off   ea600000   11cs4rc3#4r2#ty4r: R=RoR<<#/

: R=RoR/                    0  R=RoR<<#/   ;
: RoR/      >r   dup  r>    0  R=RoR<<#/   ;















\ -------------------------------------------------------------------------
original.mnemonic?  on       ea600000  11cc4rc3#4r2#004r:  orn_R,R,R,lsl,#
original.mnemonic?  on       ea600010  11cc4rc3#4r2#014r:  orn_R,R,R,lsr,#
original.mnemonic?  on       ea600020  11cc4rc3#4r2#104r:  orn_R,R,R,asr,#
original.mnemonic?  on       ea600030  11cc4rc3#4r2#114r:  orn_R,R,R,ror,#

original.mnemonic?  off      ea600000  11cc4rc3#4r2#004r:  R=RoR/,<<#
original.mnemonic?  off      ea600010  11cc4rc3#4r2#014r:  R=RoR/,>>#
original.mnemonic?  off      ea600020  11cc4rc3#4r2#104r:  R=RoR/,a>>#
original.mnemonic?  off      ea600030  11cc4rc3#4r2#114r:  R=RoR/,>>>#

original.mnemonic?  on       ea700000  11cc4rc3#4r2#004r:  orns_R,R,R,lsl,#
original.mnemonic?  on       ea700010  11cc4rc3#4r2#014r:  orns_R,R,R,lsr,#
original.mnemonic?  on       ea700020  11cc4rc3#4r2#104r:  orns_R,R,R,asr,#
original.mnemonic?  on       ea700030  11cc4rc3#4r2#114r:  orns_R,R,R,ror,#

original.mnemonic?  off      ea700000  11cc4rc3#4r2#004r:  R=RoR/,<<#,s
original.mnemonic?  off      ea700010  11cc4rc3#4r2#014r:  R=RoR/,>>#,s
original.mnemonic?  off      ea700020  11cc4rc3#4r2#104r:  R=RoR/,a>>#,s
original.mnemonic?  off      ea700030  11cc4rc3#4r2#114r:  R=RoR/,>>>#,s

: R=RoR/      ( r r r -- )              0  R=RoR/,<<#    ;
: RoR/,<<#    ( r r # -- )  2>r  dup  2r>  R=RoR/,<<#    ;
: RoR/        ( r r ---- )              0    RoR/,<<#    ;

: R=RoR/,s    ( r r r -- )              0  R=RoR/,<<#,s  ;
: RoR/,<<#,s  ( r r # -- )  2>r  dup  2r>  R=RoR/,<<#,s  ;
: RoR/,s      ( r r ---- )              0    RoR/,<<#,s  ;
\ --------------------------------------------------------------------------


















\ ******************************************************************************
\ 4.6.91    ORR(immediate)  T1
\ ------------------------------------------------------------------------------
\ Logical OR (immediate) performs a bitwise (inclusive) OR of a register value and an immediate value, and
\ writes the result to the destination register. It can optionally update the condition flags based on the result.

\ 151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\ |1 1 1 1|0 i 0 0|0 1 0 S|==Rn===|0 imm3= ==Rd=== =====imm8======|    f0400000

original.mnemonic?  on    f0500000   5c#5cc4rc3#4r8#:  orrs_R,R,#
original.mnemonic?  off   f0500000   5c#5cc4rc3#4r8#:  R=Ro#,s
original.mnemonic?  on    f0400000   5c#5cs4rc3#4r8#:  orr_R,R,#
original.mnemonic?  off   f0400000   5c#5cs4rc3#4r8#:  R=Ro#

: Ro#,s        >r   dup    r>    R=Ro#,s  ;
: Ro#          >r   dup    r>    R=Ro#    ;
\ ******************************************************************************
\ 4.6.92     ORR(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on        4300   10c3r3r:  orr_R,R
original.mnemonic?  off       4300   10c3r3r:  RoR
\ ------------------------------------------------------------------------------
\ 4.6.92     ORR(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on    ea400000   11cs4rc3#4r2#ty4r: orr_R,R,R,#
original.mnemonic?  off   ea400000   11cs4rc3#4r2#ty4r: R=RoR<<#

\ : R=RoR                     0   R=RoR<<#   ;
\ : RoR        3r3r?   if   RoR   exit   then  >r   dup  r>    0  R=RoR<<#  ;









\ -------------------------------------------------------------------------
original.mnemonic?  on       ea400000  11cc4rc3#4r2#004r:  orr_R,R,R,lsl,#
original.mnemonic?  on       ea400010  11cc4rc3#4r2#014r:  orr_R,R,R,lsr,#
original.mnemonic?  on       ea400020  11cc4rc3#4r2#104r:  orr_R,R,R,asr,#
original.mnemonic?  on       ea400030  11cc4rc3#4r2#114r:  orr_R,R,R,ror,#

original.mnemonic?  off      ea400000  11cc4rc3#4r2#004r:  R=RoR<<#
original.mnemonic?  off      ea400010  11cc4rc3#4r2#014r:  R=RoR>>#
original.mnemonic?  off      ea400020  11cc4rc3#4r2#104r:  R=RoR,a>>#
original.mnemonic?  off      ea400030  11cc4rc3#4r2#114r:  R=RoR>>>#

original.mnemonic?  on       ea500000  11cc4rc3#4r2#004r:  orrs_R,R,R,lsl,#
original.mnemonic?  on       ea500010  11cc4rc3#4r2#014r:  orrs_R,R,R,lsr,#
original.mnemonic?  on       ea500020  11cc4rc3#4r2#104r:  orrs_R,R,R,asr,#
original.mnemonic?  on       ea500030  11cc4rc3#4r2#114r:  orrs_R,R,R,ror,#

original.mnemonic?  off      ea500000  11cc4rc3#4r2#004r:  R=RoR<<#,s
original.mnemonic?  off      ea500010  11cc4rc3#4r2#014r:  R=RoR>>#,s
original.mnemonic?  off      ea500020  11cc4rc3#4r2#104r:  R=RoR,a>>#,s
original.mnemonic?  off      ea500030  11cc4rc3#4r2#114r:  R=RoR>>>#,s

: R=RoR      ( r r r -- )              0  R=RoR<<#    ;
: RoR<<#     ( r r # -- )  2>r  dup  2r>  R=RoR<<#    ;
: RoR        ( r r ---- )  3r3r?  if  orr_R,R   exit  then   0    RoR<<#    ;

: R=RoR,s    ( r r r -- )              0  R=RoR<<#,s  ;
: RoR<<#,s   ( r r # -- )  2>r  dup  2r>  R=RoR<<#,s  ;
: RoR,s      ( r r ---- )              0    RoR<<#,s  ;
\ --------------------------------------------------------------------------











\ ******************************************************************************
\ ******************************************************************************
\ ******************************************************************************
\ 4.6.93     PKH(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    eac00000   11cs4rc3#4r2#ty4r:  pkh_R,R,#
original.mnemonic?  on    eac00000   11cs4rc3#4r2#ty4r:  pkh
original.mnemonic?  off   eac00000   11cs4rc3#4r2#ty4r:  pkh_R,R,#
original.mnemonic?  off   eac00000   11cs4rc3#4r2#ty4r:  pkh
: 10000*   10000  *  ;











\ -------------------------------------------------------------------------
original.mnemonic?  on       eac00000  11cc4rc3#4r2#004r:  pkh_R,R,R,lsl,#
original.mnemonic?  on       eac00020  11cc4rc3#4r2#104r:  pkh_R,R,R,asr,#

original.mnemonic?  on       ead00000  11cc4rc3#4r2#004r:  pkhs_R,R,R,lsl,#
original.mnemonic?  on       ead00020  11cc4rc3#4r2#104r:  pkhs_R,R,R,asr,#
 
\ --------------------------------------------------------------------------


















\ ******************************************************************************
\ 4.6.94     PLD(immediate)  T1
\ ------------------------------------------------------------------------------
: 12c4r4c12#:gene     :.mnem_  ." `12c4r4c12#" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r4c12#:
  create   dup  ,   12c4r4c12#:gene
  does>    >r  ( r # )  12#.check  swap   4r.check  10000 *  +   r>  @  +   0~15<->16~31   32,'  ;

original.mnemonic?  on    f890f000   12c4r4c12#:  pld_[R,+#12]
original.mnemonic?  off   f890f000   12c4r4c12#:  pld_(R+#)
\ ------------------------------------------------------------------------------
\ 4.6.94     PLD(immediate)  T2
\ ------------------------------------------------------------------------------
: 12c4r8c8#:gene     :.mnem_  ." `12c4r8c8#" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r8c8#:
  create   dup  ,   12c4r8c8#:gene
  does>    >r  ( r # )   8#*4.check  swap   4r.check  10000 *  +   r>  @  +   0~15<->16~31   32,'  ;

original.mnemonic?  on    f810fc00    12c4r8c8#:  pld_[R,-#8]
original.mnemonic?  off   f810fc00    12c4r8c8#:  pld_(R-#)
\ ------------------------------------------------------------------------------
\ 4.6.94     PLD(immediate)  T3
\ ------------------------------------------------------------------------------
: 20c12#:gene     :.mnem_  ." `20c12#" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 20c12#:
  create   dup  ,   20c12#:gene
  does>    @   swap  ( n # )  12#.check   +   0~15<->16~31   32,'   ;

\ f81ff000  8cU11c12#:   pld_[pc,#12]    U=0/1
\ f81ff000  8c011c12#:   pld_[pc,#12]
\ f89ff000  8c111c12#:   pld_[pc,#12]
  f81ff000     20c12#:   pld_[pc,-#12]
  f89ff000     20c12#:   pld_[pc,+#12]
  f81ff000     20c12#:   pld_(pc-#)
  f89ff000     20c12#:   pld_(pc+#)
\ ******************************************************************************
\ 4.6.95     PLD(register)  T1
\ ------------------------------------------------------------------------------
: 12c4r10c2s4r:_gene     :.mnem_  ." `12c4r10c2s4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r10c2s4r:
  create   dup  ,  12c4r10c2s4r:_gene
  does>    >r  ( r r shift )  2#.check  10 *  swap   4r.check  +  swap  4r.check  10000  *  +  r> @ + 0~15<->16~31   32,'   ;

original.mnemonic?  on    f810f000  12c4r10c2s4r:  pld_[R,R<<#]
original.mnemonic?  off   f810f000  12c4r10c2s4r:  pld_(R+R<<#)
\ ******************************************************************************
\ 4.6.96     PLI(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    f990f000  12c4r4c12#:  pli_[R,+#12]
original.mnemonic?  off   f990f000  12c4r4c12#:  pli_(R+#)
\ ------------------------------------------------------------------------------
\ 4.6.96     PLI(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on    f910fc00   12c4r8c8#:  pli_[R,-#8]
                          f910fc00   12c4r8c8#:  pli_(R-#)
original.mnemonic?  off
\ ------------------------------------------------------------------------------
\ 4.6.96     PLI(immediate)  T3
\ ------------------------------------------------------------------------------
original.mnemonic?  on
\ f91ff000   8cU11c12#:  pli_[pc,#12]
  f91ff000      20c12#:  pli_[pc,-#12]
  f99ff000      20c12#:  pli_[pc,+#12]
  f91ff000      20c12#:  pli_(pc-#)
  f99ff000      20c12#:  pli_(pc+#)
original.mnemonic?  off
\ ******************************************************************************
\ 4.6.97     PLI(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on
  f910f000  12c4r10c2s4r:  pli_[R,R<<#]
  f910f000  12c4r10c2s4r:  pli_(R+R<<#)
original.mnemonic?  off
\ ******************************************************************************
\ 4.6.98     POP           T1
\ ------------------------------------------------------------------------------

comment:
0  value   <<pc.check>>
variable   push.pop.list  20  allot
variable   {?

:  {       push.pop.list  20  erase   {?  on  ;
:  }       {?   off  ;

:  >push.pop.list  ( n -- )   2^n  push.pop.list  @  or  push.pop.list  !  ;

:  r0,    0   >push.pop.list    ;
:  r1,    1   >push.pop.list    ;
:  r2,    2   >push.pop.list    ;
:  r3,    3   >push.pop.list    ;
:  r4,    4   >push.pop.list    ;
:  r5,    5   >push.pop.list    ;   :  sp,    5   >push.pop.list    ;
:  r6,    6   >push.pop.list    ;   :   w,    6   >push.pop.list    ;
:  r7,    7   >push.pop.list    ;   :   t,    7   >push.pop.list    ;
:  r8,    8   >push.pop.list    ;
:  r9,    9   >push.pop.list    ;
:  r10,  0a   >push.pop.list    ;   :  ra,   0a   >push.pop.list    ;
:  r11,  0b   >push.pop.list    ;   :  rb,   0b   >push.pop.list    ;
:  r12,  0c   >push.pop.list    ;   :  rc,   0c   >push.pop.list    ;
:  r13,  0d   >push.pop.list    ;   \  rp of native cpu
:  r14,  0e   >push.pop.list    ;   \  lr
:  r15,  0f   >push.pop.list    ;   \  pc

:  rp,   0d   >push.pop.list    ;   \  return stack pointer of native cpu
:  lr,   0e   >push.pop.list    ;
:  pc,   0f   >push.pop.list    ;

:  ra,   0a   >push.pop.list    ;
:  rb,   0b   >push.pop.list    ;
:  rc,   0c   >push.pop.list    ;
 : rd,   0d   >push.pop.list    ;
:  re,   0e   >push.pop.list    ;
:  rf,   0f   >push.pop.list    ;

: {r0~r7+pc}.check    ( n -- n )          \ 1... .... 1111 1111 == 80ff
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or
  abort" *** POP does not support a list containing only one register ***"  r>  ;


: {r0~r7+pc}.check'''    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@        8f  and  0=
  abort" *** PUSH/POP does not support zero item ***"  r>  ;
comment;







: `7cP8r            dup   16@'  fe00  and  ;
:  7cP8r:_gene      :.mnem_ ." `7cP8r"  #=if2 ."      .{r0~r7+pc}        "  .1"  mnem"  xt0 ;
:  7cP8r:
   create   dup  ,  7cP8r:_gene
   does>    @  ( op.code )  >r      push.pop.list @  {r0~r7+pc}.check   r>  +  16,'
            here'  2  -  last.instruction.addr !   all.ok?.off  ;


  original.mnemonic?  on      bc00  7cP8r:   pop
  original.mnemonic?  off     bc00  7cP8r:   pop
  original.mnemonic?  on      bc00  7cP8r:   pop(7cP8r)

  original.mnemonic?  on      bc00  7cP8r:   pop{}_R
  original.mnemonic?  on      bc00  7cP8r:   pop{}
  original.mnemonic?  off     bc00  7cP8r:   pop_R
                              bc00  7cP8r:   pop_R8
\ ------------------------------------------------------------------------------
\ 4.6.98     POP           T2

: {r0~r12+lr+pc}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or     r@  200 = or    r@  400 = or   r@  800 = or
  r@ 1000 = or                     r@ 4000 = or   r@ 8000 = or
  abort" *** POP does not support a list containing only one register ***"  r>  ;






: {r0~r12+lr+pc}.check(pop)    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
\ r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or     r@  200 = or    r@  400 = or   r@  800 = or
  r@ 1000 = or                     r@ 4000 = or   r@ 8000 = or
  abort" *** POP does not support a list containing only one register ***"  r>  ;






: `16cPMc13r         dup   32@^     ffff2000  and  ;
:  16cPMc13r:_gene   :.mnem_ ." `16cPMc13r"  #=if4 ."    .{r0~r12+pc+lr}      "  .1"  mnem"  xt0 ;
:  16cPMc13r:
   create   dup  ,  16cPMc13r:_gene
   does>    @  ( op.code )  >r     push.pop.list @  {r0~r12+lr+pc}.check(pop)    r>  +  32,^
            here'  4  -  last.instruction.addr !    all.ok?.off  ( all.Rn.off ) ;

   e8bd0000  16cPMc13r:  pop{}'
   e8bd0000  16cPMc13r:  pop(16cPMc13r)

\ pop{}       push.pop.list  @                    ff  u>  if         pop{}'   exit  then        pop{}   ;
: pop{}       push.pop.list  @   dup  7fff  and   ff  u>  if   drop  pop(16cPMc13r)  exit  then  drop  pop(7cP8r) ;


: pop   pop{}   ;



\ ******************************************************************************
\ 4.6.99     PUSH          T1
comment:
4.6.99 PUSH
Push multiple Registers stores a subset (or possibly all) of the general-purpose registers R0-R12 and the LR
to the stack.
Encoding
registers = '0':M:'000000':register_list;
if BitCount(registers) < 1 then UNPREDICTABLE;
registers = '0':M:'0':register_list;
if BitCount(registers) < 2 then UNPREDICTABLE;
Architecture versions
Encoding T1 All versions of the Thumb instruction set.
Encoding T2 All versions of the Thumb instruction set from Thumb-2 onwards.
T1 PUSH<c> <registers>
151413121110 9 8 7 6 5 4 3 2 1 0
 1 0 1 1 0 1 0 M register_list
comment;

: {r0~r7+lr}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or
  abort" *** POP does not support a list containing only one register ***"  r>  ;

: {r0~r7+lr}.check    ( n -- n )
  dup>r     20  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@        80  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@        8f  and  0=
  abort" *** push/POP ???? ***"  r>  ;

: {r0~r7+lr}.check    ( n -- n )     \ .1.. .... 1111 1111 == 40ff
  dup>r     20  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@        80  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@      40ff  and  0=
  abort" *** push/POP ???? ***"  r>  ;

: {r0~r7+lr}.check       ( n -- n )       \ .1.. .... 1111 1111 == 40ff
  dup>r   40ff  and  0=
  abort" *** PUSH/POP does not support zero item ***"
  r@      bf00  and   abort" **** r0~r7+lr only ****"   r>  4000   /mod  100 *  +  ;




: {r0~r7+lr}.check       ( n -- n )  dup>r   4000 40ff  between
  if      r>   0ff and  100  or
  else    r@   0  ff  between  not  abort" ******* it should be r0~r7+LR ********"  r>
  then    ;

 















: `7cM8r            dup   16@'  fe00  and  ;
:  7cM8r:_gene      :.mnem_ ." `7cM8r"  #=if2 ."      .{r0~r7+lr}        "  .1"  mnem"  xt0 ;
:  7cM8r:
   create   dup  ,  7cM8r:_gene
   does>    @  ( op.code )  >r      push.pop.list @    {r0~r7+lr}.check   r>  +  16,'
            here'  2  -  last.instruction.addr !   all.ok?.off  ;

     b400  7cM8r:   push{}
     b400  7cM8r:   push

: push.LR   b500  16,'  ;
: push_LR   b500  16,'  ;
\ ------------------------------------------------------------------------------
\ 4.6.99     PUSH          T2

comment:
T2 PUSH<c>.W <registers>
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
1 1 1 0 1 0 0 1 0 0 1 0 1 1 0 1 (0) M(0) register_list
comment;
\ ------------------------------------------------------------------------------

comment:
: {r0~r12+lr}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@    1 =        r@    2 = or    r@    4 = or   r@    8 = or
  r@   10 = or     r@   20 = or    r@   40 = or   r@   80 = or
  r@  100 = or     r@  200 = or    r@  400 = or   r@  800 = or
  r@ 1000 = or                     r@ 4000 = or
  abort" *** PUSH does not support a list containing only one register ***"  r>  ;




: {r0~r12+lr}.check    ( n -- n )
  dup>r   2000  and  abort"  *** R13 ( Rd ) is unallowed in push operation ***"
  r@      8000  and  abort"  *** R15 ( Rf ) is unallowed in push operation ***"
  r@      5fff  and  0=  \ r0~r12+r14
  abort" *** PUSH does not support a list containing only one register ***"  r>  ;
comment;











: `17cMc13r         dup   32@^     ffffa000  and  ;
:  17cMc13r:_gene   :.mnem_ ." `17cMc13r"  #=if4 ."      .{r0~r12+lr}       "  .1"  mnem"  xt0 ;
:  17cMc13r:
   create   dup  ,  17cMc13r:_gene
   does>    @  ( op.code )  >r   ( R )   push.pop.list @  {r0~r12+lr}.check    r>  +  32,^
            here'  4  -  last.instruction.addr !   all.ok?.off  ( all.Rn.off ) ;

   e92d0000  17cMc13r:  push{}'

\ : push{}     push.pop.list  @  ff  u>  if  push{}'   exit  then   push{}  ;
\ : push       push.pop.list  @  dup  8000 80ff  between  swap 0 0ff between  or  if  push{}  exit  then   push{}'  ;

: push{}     push.pop.list  @  dup  bfff  and  ff  u>                           if   drop  push{}'   exit  then  drop  push{}   ;
: push       push.pop.list  @  dup  8000 80ff  between  swap 0 0ff between  or  if         push{}    exit  then        push{}'  ;
: push       push.pop.list  @  dup  4000 40ff  between  swap 0 0ff between  or  if         push{}    exit  then        push{}'  ;
\   { r0, r6, r3, r1, lr, }   push{}
\   { r5, r3, r1, r8, pc, }   pop{}
\ : push      ( r -- )   rot  0d ( rp )  4  (r+#)=r!  ;
\ ******************************************************************************
\ 4.6.100     QADD           T1
\ ------------------------------------------------------------------------------
   fa80f080  12c4r4c4r4c4r:   qadd_R,R,R
\ ******************************************************************************
\ 4.6.101     QADD16         T1
\ ------------------------------------------------------------------------------
   fa90f010  12c4r4c4r4c4r:   qadd16_R,R,R
\ ******************************************************************************
\ 4.6.102     QADD8          T1
\ ------------------------------------------------------------------------------
   fa80f010  12c4r4c4r4c4r:   qadd8_R,R,R
\ ******************************************************************************
\ 4.6.103     QASX           T1
\ ------------------------------------------------------------------------------
   faa0f010  12c4r4c4r4c4r:   qasx_R,R,R
\ ******************************************************************************
\ 4.6.104     QDADD           T1
\ ------------------------------------------------------------------------------
   fa80f090  12c4r4c4r4c4r:   qdadd_R,R,R
\ ******************************************************************************
\ 4.6.105     QDSUB           T1
\ ------------------------------------------------------------------------------
   fa80f0b0  12c4r4c4r4c4r:   qdsub_R,R,R
\ ******************************************************************************
\ 4.6.106     QSAX            T1
\ ------------------------------------------------------------------------------
   fae0f010  12c4r4c4r4c4r:   qsax_R,R,R
\ ******************************************************************************
\ 4.6.107     QSUB           T1
\ ------------------------------------------------------------------------------
   fa80f0a0  12c4r4c4r4c4r:   qsub16_R,R,R
\ ******************************************************************************
\ 4.6.108     QSUB16         T1
\ ------------------------------------------------------------------------------
   fad0f010  12c4r4c4r4c4r:   qsub16_R,R,R
\ ******************************************************************************
\ 4.6.109     QSUB8          T1
\ ------------------------------------------------------------------------------
   fac0f010  12c4r4c4r4c4r:   qsub8_R,R,R
\ ******************************************************************************
\ 4.6.110     RBIT           T1
\ ------------------------------------------------------------------------------
   fa90f0a0  12c4r4c4r4c4r:   rbit_R,R,R
\ ******************************************************************************
\ 4.6.111     REV            T1
\ ------------------------------------------------------------------------------
      ba00        10c3r3r:  rev_R,R
\ ------------------------------------------------------------------------------
\ 4.6.111     REV            T2
\ ------------------------------------------------------------------------------
  fa90f080  12c4r4c4r4c4r:  rev_R,R,R
\ ------------------------------------------------------------------------------
\ ******************************************************************************
\ 4.6.112     REV16          T1
\ ------------------------------------------------------------------------------
      ba40        10c3r3r:  rev16_R,R
\ ------------------------------------------------------------------------------
\ 4.6.112     REV16          T2
\ ------------------------------------------------------------------------------
  fa90f090  12c4r4c4r4c4r:   rev16_R,R,R
\ ------------------------------------------------------------------------------
\ ******************************************************************************
\ 4.6.113     REVSH          T1
\ ------------------------------------------------------------------------------
      bac0        10c3r3r:   revsh_R,R
\ ------------------------------------------------------------------------------
\ 4.6.113     REVSH          T2
\ ------------------------------------------------------------------------------
  fa90f080  12c4r4c4r4c4r:   revsh_R,R,R
\ ******************************************************************************
\ 4.6.114     RFE           T1
\ ------------------------------------------------------------------------------
\    e810c000  10cWc4r16c:  rfe.R
\ ------------------------------------------------------------------------------
\ 4.6.114     RFE           T2
\ ------------------------------------------------------------------------------
\    e990c000  10cWc4r16c:  rfe.R



\ ******************************************************************************
\ 4.6.115     ROR(immediate)  T1
\ ------------------------------------------------------------------------------
\ original.mnemonic?  on       ea4f0030  11cs5c3#4r2#2c4r:   ror_R,R,#
\ original.mnemonic?  off      ea4f0030  11cs5c3#4r2#2c4r:   R=R>>>#
:  R>>>#    >r  dup  r>  R=R>>>#  ;




\ ******************************************************************************
\ 4.6.116     ROR(register)    T1
\ ------------------------------------------------------------------------------
      41c0         10c3r3r:  ror_R,R
\ ------------------------------------------------------------------------------
\ 4.6.116     ROR(register)    T2
\ ------------------------------------------------------------------------------
  fa60f000  11cs4r4c4r4c4r:  ror_R,R,R
\ ******************************************************************************
\ 4.6.117     RRX            T1
\ ------------------------------------------------------------------------------
  original.mnemonic?  on        ea5f0030  11cc8c4r4c4r:  rrxs_R,R
  original.mnemonic?  on        ea4f0030  11cs8c4r4c4r:  rrx_R,R
  original.mnemonic?  off       ea5f0030  11cc8c4r4c4r:  R=rrc_R,s
  original.mnemonic?  off       ea5f0030  11cc8c4r4c4r:  R=src_R,s
  original.mnemonic?  off       ea5f0030  11cc8c4r4c4r:  R=src_R
  original.mnemonic?  off       ea4f0030  11cs8c4r4c4r:  R=sr_R

: rrc.R    dup  R=src_R,s  ;   \  ??????????
: src.R    dup  R=src_R,s  ;   \  ??????????
: rr.R     dup  R=sr_R     ;   \  ???
: sr.R     dup  R=sr_R     ;   \  ???
\ ******************************************************************************
\ 4.6.118     RSB(immediate)   T1
\ ------------------------------------------------------------------------------
   original.mnemonic?  on        4240          10c3r3r:  rsb_R,R
   original.mnemonic?  on        4240          10c3r3r:  rsb_R,R,#0
   original.mnemonic?  off       4240          10c3r3r:  R=-R
   original.mnemonic?  off       4240          10c3r3r:  R=0-R

\ NEG  ( r -- )   dup  R=-R  ;
: -R   ( r -- )   dup  R=-R  ;
\ ------------------------------------------------------------------------------
\ 4.6.118     RSB(immediate)   T2
\ ------------------------------------------------------------------------------
  original.mnemonic?  on     f1d00000  5c#5cc4rc3#4r8#:  rsbs_R,R,#
  original.mnemonic?  off    f1d00000  5c#5cc4rc3#4r8#:  R=#-R,s
  original.mnemonic?  on     f1c00000  5c#5cs4rc3#4r8#:  rsb_R,R,#
  original.mnemonic?  off    f1c00000  5c#5cs4rc3#4r8#:  R=#-R

: R=-R,s      0  R=#-R,s  ;
: R=-R      3r3r?  if   rsb_R,R,#0   else   0  R=#-R   then  ;
: -R,s      DUP  R=-R,s   ;
: -R        DUP  R=-R     ;
\ ******************************************************************************
\ 4.6.119     RSB(register)    T1
\ ------------------------------------------------------------------------------
   ebc00000  11cs4rc3#4r2#ty4r:  rsb_R,R,R<<#
\  ebc00000  11cs4rc3#4r2#ty4r:  R=R-R<<#













\ -------------------------------------------------------------------------
original.mnemonic?  on       ebc00000  11cc4rc3#4r2#004r:  rsb_R,R,R,lsl,#
original.mnemonic?  on       ebc00010  11cc4rc3#4r2#014r:  rsb_R,R,R,lsr,#
original.mnemonic?  on       ebc00020  11cc4rc3#4r2#104r:  rsb_R,R,R,asr,#
original.mnemonic?  on       ebc00030  11cc4rc3#4r2#114r:  rsb_R,R,R,ror,#

original.mnemonic?  on       ebd00000  11cc4rc3#4r2#004r:  rsbs_R,R,R,lsl,#
original.mnemonic?  on       ebd00010  11cc4rc3#4r2#014r:  rsbs_R,R,R,lsr,#
original.mnemonic?  on       ebd00020  11cc4rc3#4r2#104r:  rsbs_R,R,R,asr,#
original.mnemonic?  on       ebd00030  11cc4rc3#4r2#114r:  rsbs_R,R,R,ror,#
 
 



\ ******************************************************************************
\ 4.6.120     SADD16           T1
\ ------------------------------------------------------------------------------
   fa90f000  12c4r4c4r4c4r:  sadd16_R,R,R
\ ******************************************************************************
\ 4.6.121     SADD8            T1
\ ------------------------------------------------------------------------------
   fa80f000  12c4r4c4r4c4r:  sadd8_R,R,R
\ ******************************************************************************
\ 4.6.122     SASX             T1
\ ------------------------------------------------------------------------------
   faa0f000  12c4r4c4r4c4r:  sasx_R,R,R
\ ******************************************************************************
\ 4.6.123     SBC(immediate)   T1
\ ------------------------------------------------------------------------------
  original.mnemonic?  on        f1700000  5c#5cc4rc3#4r8#:  sbcs_R,R,#
  original.mnemonic?  off       f1700000  5c#5cc4rc3#4r8#:  R=R-#-c,s
  original.mnemonic?  on        f1600000  5c#5cs4rc3#4r8#:  sbc_R,R,#
  original.mnemonic?  off       f1600000  5c#5cs4rc3#4r8#:  R=R-#-c

:  R-#-c,s   >r    dup    r>   R=R-#-c,s  ;
:  R-#-c     >r    dup    r>   R=R-#-c    ;
\ ******************************************************************************
\ 4.6.124    SBC(register)  T1
\ ------------------------------------------------------------------------------
  original.mnemonic?  on         4180  10c3r3r:  sbc_R,R
  original.mnemonic?  off        4180  10c3r3r:  R-R-c
\ ------------------------------------------------------------------------------
\ 4.6.124    SBC(register)  T2
\ ------------------------------------------------------------------------------
  original.mnemonic?  on          eb600000   11cs4rc3#4r2#ty4r:  sbc_R,R,R,#
  original.mnemonic?  off         eb600000   11cs4rc3#4r2#ty4r:  R=R-R-c<<#

:    R=R-R-c    0   R=R-R-c<<#  ;












\ -------------------------------------------------------------------------
original.mnemonic?  on       eb600000  11cc4rc3#4r2#004r:  sbc_R,R,R,lsl,#
original.mnemonic?  on       eb600010  11cc4rc3#4r2#014r:  sbc_R,R,R,lsr,#
original.mnemonic?  on       eb600020  11cc4rc3#4r2#104r:  sbc_R,R,R,asr,#
original.mnemonic?  on       eb600030  11cc4rc3#4r2#114r:  sbc_R,R,R,ror,#

original.mnemonic?  off      eb600000  11cc4rc3#4r2#004r:  R=R-R-c<<#
original.mnemonic?  off      eb600010  11cc4rc3#4r2#014r:  R=R-R-c>>#
original.mnemonic?  off      eb600020  11cc4rc3#4r2#104r:  R=R-R-c,a>>#
original.mnemonic?  off      eb600030  11cc4rc3#4r2#114r:  R=R-R-c>>>#

original.mnemonic?  on       eb700000  11cc4rc3#4r2#004r:  sbcs_R,R,R,lsl,#
original.mnemonic?  on       eb700010  11cc4rc3#4r2#014r:  sbcs_R,R,R,lsr,#
original.mnemonic?  on       eb700020  11cc4rc3#4r2#104r:  sbcs_R,R,R,asr,#
original.mnemonic?  on       eb700030  11cc4rc3#4r2#114r:  sbcs_R,R,R,ror,#

original.mnemonic?  off      eb700000  11cc4rc3#4r2#004r:  R=R-R-c<<#,s
original.mnemonic?  off      eb700010  11cc4rc3#4r2#014r:  R=R-R-c>>#,s
original.mnemonic?  off      eb700020  11cc4rc3#4r2#104r:  R=R-R-c,a>>#,s
original.mnemonic?  off      eb700030  11cc4rc3#4r2#114r:  R=R-R-c>>>#,s

: R=R-R-c      ( r r r -- )              0  R=R-R-c<<#    ;
: R-R-c<<#     ( r r # -- )  2>r  dup  2r>  R=R-R-c<<#    ;
: R-R-c        ( r r ---- )              0    R-R-c<<#    ;

: R=R-R-c,s    ( r r r -- )              0  R=R-R-c<<#,s  ;
: R-R-c<<#,s   ( r r # -- )  2>r  dup  2r>  R=R-R-c<<#,s  ;
: R-R-c,s      ( r r ---- )              0    R-R-c<<#,s  ;
\ --------------------------------------------------------------------------




















\ ******************************************************************************
\ 4.6.125     SBFX           T1
\ ------------------------------------------------------------------------------
\       F3400000   12c4rc3#4r2#c5w:  sbfx_R,R,#
\ ******************************************************************************
\ 4.6.126     SDIV(immediate)  T1
\ ------------------------------------------------------------------------------
          fb90f0f0   12c4r4c4r4c4r:  sdiv_R,R,R
\ ******************************************************************************
\ 4.6.127     SEL               T1
\ ------------------------------------------------------------------------------
   faa0f080   12c4r4c4r4c4r:  sel_R,R,R
\ ******************************************************************************
\ 4.6.128      SETEND           T1
\ ------------------------------------------------------------------------------
\       b650  12cE3c:  setend
\ ******************************************************************************
\ 4.6.129      SEV  T1
\ ------------------------------------------------------------------------------
     b840  16c:  sev
\ ******************************************************************************
\ 4.6.129      SEV  T1
\ ------------------------------------------------------------------------------
    f3af8004  32c:   sev,w
\ ******************************************************************************
\ 4.6.130     SHADD16             T1
\ ------------------------------------------------------------------------------
     fa90f020   12c4r4c4r4c4r:  shadd16_R,R,R
\ ******************************************************************************
\ 4.6.131     SHADD8              T1
\ ------------------------------------------------------------------------------
     fa80f020   12c4r4c4r4c4r:  shadd8_R,R,R
\ ******************************************************************************
\ 4.6.132     SHASX               T1
\ ------------------------------------------------------------------------------
     faa0f020   12c4r4c4r4c4r:  shasx_R,R,R
\ ******************************************************************************
\ 4.6.133     SHSAX               T1
\ ------------------------------------------------------------------------------
     fae0f020   12c4r4c4r4c4r:  shsax_R,R,R
\ ******************************************************************************
\ 4.6.134     SHSUB16             T1
\ ------------------------------------------------------------------------------
     fad0f020   12c4r4c4r4c4r:  shsub16_R,R,R
\ ******************************************************************************
\ 4.6.135     SHSUB8              T1
\ ------------------------------------------------------------------------------
     fac0f020   12c4r4c4r4c4r:  shsub8_R,R,R
\ ******************************************************************************
\ 4.6.136     SMC            T1
\ ------------------------------------------------------------------------------
: 12c4#16c:_gene     :.mnem_  ." `12c4#16c" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4#16c:
  create   dup  ,    12c4#16c:_gene
  does>    @   swap  4#.check  10000 *  +  0~15<->16~31   32,'   ;
  
  f7f08000  12c4#16c:   smc_#
\ ******************************************************************************
\ 4.6.137  SMLABB  SMLABT  SMLATB  SMLATT        T1
\ ------------------------------------------------------------------------------
comment:
: 12c4r4r4r4c4r:_gene     :.mnem_  ." `12c4r4r4r4c4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r4r4r4c4r:
  create   dup  ,  12c4r4r4r4c4r:_gene
  does>   >r  ( rd rn rm ra )
  ( ra )  4r.check  1000 *     swap
  ( rm )  4r.check          +  swap
  ( rn )  4r.check 10000 *  +  swap
  ( rd )  4r.check   100 *  +  r>  @  +  0~15<->16~31   32,'   ;
comment;
\       fb100000  12c4r4r4r2cNM4r:  smla_R,R,R,R
\       fb100000  12c4r4r4r2cNM4r:  R=R*R+R
\       fb100000  12c4r4r4r2c004r:  R=R*R+R.ll
\       fb100000  12c4r4r4r2c014r:  R=R*R+R.lh
\       fb100000  12c4r4r4r2c104r:  R=R*R+R,hl
\       fb100000  12c4r4r4r4c4r:    R=R*R+R,hh
       fb100000  12c4r4r4r4c4r:    R=R*R+R,ll
       fb100000  12c4r4r4r4c4r:    R=R*R+R,lh
       fb100000  12c4r4r4r4c4r:    R=R*R+R,hl
       fb100000  12c4r4r4r4c4r:    R=R*R+R,hh
\ ******************************************************************************
\ 4.6.138     SMLAD              T1
\ ------------------------------------------------------------------------------
\       fb200000  12c4r4r4r3cM4r:  smlad_R,R,R,R
\       fb200000  12c4r4r4r3c04r:  smlad_R,R,R,R
\       fb200010  12c4r4r4r3c14r:  smlad_R,R,R,R
\       fb200000  12c4r4r4r4c4r:   smlad_R,R,R,R
\       fb200010  12c4r4r4r4c4r:   smlad_R,R,R,R,exchange
        fb200000  12c4r4r4r4c4r:   smlad_R=R*R+R
\       fb200010  12c4r4r4r4c4r:   smlad_R=R*R+R,exchange
\ ******************************************************************************
\ 4.6.139     SMLAL              T1
\ ------------------------------------------------------------------------------
       fbc00000  12c4r4r4r4c4r:  smlal.R_R,R,R
\ ******************************************************************************
\ 4.6.140     SMLAL              T1
\ ------------------------------------------------------------------------------
\       fbc00080  12c4r4r4r2cNM4r:  smlal_R,R,R,R
\ ******************************************************************************
\ 4.6.141     SMLALD              T1
\ ------------------------------------------------------------------------------
\       fbc000c0  12c4r4r4r3cM4r:  smlald_R,R,R,R
\ ******************************************************************************
\ 4.6.142     SMLAW               T1
\ ------------------------------------------------------------------------------
\       fb300000  12c4r4r4r3cM4r:  smlaw_R,R,R,R
\ ******************************************************************************
\ 4.6.143     SMLSD               T1
\ ------------------------------------------------------------------------------
\       fb400000  12c4r4r4r3cM4r:  smlsd_R,R,R,R
\ ******************************************************************************
\ 4.6.144     SMlslD              T1
\ ------------------------------------------------------------------------------
\       fbd000c0  12c4r4r4r3cM4r:  smlsld_R,R,R,R
\ ******************************************************************************
\ 4.6.145     SMMLA               T1
\ ------------------------------------------------------------------------------
\       fb500000  12c4r4r4r3cM4r:  smmla_R,R,R,R
\       fb500000  12c4r4r4r3cR4r:  smmla_R,R,R,R
\ ******************************************************************************
\ 4.6.146     SMMLS               T1
\ ------------------------------------------------------------------------------
\       fb600000  12c4r4r4r3cM4r:  smmls_R,R,R,R
\       fb600000  12c4r4r4r3cR4r:  smmls_R,R,R,R
\ ******************************************************************************
\ 4.6.147     SMmul               T1
\ ------------------------------------------------------------------------------
\       fb50f000  12c4r4r4r3cM4r:  smmul_R,R,R
\       fb50f000  12c4r4r4r3cR4r:  smmul_R,R,R
\ ******************************************************************************
\ 4.6.148     SMUAD               T1
\ ------------------------------------------------------------------------------
\       fb20f000  12c4r4c4r3cM4r:  smuad_R,R,R
\ ******************************************************************************
\ 4.6.149     Smul                T1
\ ------------------------------------------------------------------------------
\       fb50f000  12c4r4c4r2cNM4r:  smul_R,R,R
\ ******************************************************************************
\ 4.6.150     SmulL               T1
\ ------------------------------------------------------------------------------
       fb800000  12c4r4r4r4c4r:  smull_R,R,R,R
\ ******************************************************************************
\ 4.6.151     SmulW               T1
\ ------------------------------------------------------------------------------
\       fb30f000  12c4r4c4r3cM4r:  smuad_R,R,R
\ ******************************************************************************
\ 4.6.152     SMUSD               T1
\ ------------------------------------------------------------------------------
\       fb40f000  12c4r4c4r3cM4r:  smusd_R,R,R
\ ******************************************************************************
\ 4.6.153     SRS                   T1
\ ------------------------------------------------------------------------------
\   e80dc000  10cW16c5m:   srsdb_r13.mode.#
\ ------------------------------------------------------------------------------
\ 4.6.153     SRS                   T2
\ ------------------------------------------------------------------------------
\   e98dc000  10cW16c5m:   srs_r13.mode.#
\ ******************************************************************************
\ 4.6.154     SSAT                 T1
\ ------------------------------------------------------------------------------
\   fb000000  10chc4rc3#4r2#c4#:  ssat_R,#,R
\ ******************************************************************************
\ 4.6.155     SSAT16               T1
\ ------------------------------------------------------------------------------
\   fb000000  12c4r4c4r4c4#:  ssat_R,#,R
\ ******************************************************************************
\ 4.6.156     SSAX                 T1
\ ------------------------------------------------------------------------------
   fbe0f000  12c4r4c4r4c4r:  ssax_R,R,R
\ ******************************************************************************
\ 4.6.157     SSUB16               T1
\ ------------------------------------------------------------------------------
   fad0f000  12c4r4c4r4c4r:  ssub16_R,#,R
\ ******************************************************************************
\ 4.6.158     SSUB8                T1
\ ------------------------------------------------------------------------------
   fac0f000  12c4r4c4r4c4r:  ssub8_R,#,R
\ ******************************************************************************
\ 4.6.159    STC,STC2             T1
\ ------------------------------------------------------------------------------
\ ******************************************************************************
\ 4.6.160   STMDB/STMFD           T1
\ ------------------------------------------------------------------------------
comment:
: BLOCK.DATA.TRANSFER ( Rn ... )  DUP 0F =  IF   ABORT" R15 should not be used as the base register. "  THEN
  R.list @ -1 = IF  ABORT" error! Register list should not be empty."  THEN
  08000000 (code) !  0A CODE.n !
  Rn !       E0000000
  Rn      @     10000  *  +
  (P*)    @   1000000  *  +   \ p=1  pre-add before transfer
  (U*)    @    800000  *  +   \ U=0  down,
\ (S*) (F*) @  400000  *  +   \ S=0  do not load psr or force user mode.  F=0
\              400000     +   \ s=1
\ (W*)    @    200000  *  +   \ w=1  write back
               200000     +   \ w=1
  (L*)    @    100000  *  +   \ L=1  Load from memory
  (code)  @               +
  PRE.PUSH/POP? @  NOT
  IF    R.list  @         +
  THEN                    0~15<->16~31   32,'
  SET.DEFAULT   PRE.PUSH/POP?  @   NOT
  IF     RESET.REGISTER.LIST  ( -1 R.list !  )
  THEN   ;  \  0 (L*) !   0 (P*) !   0 (U*) !  ;
comment;
\   e9000000  10cWc4rcMc13r:  stmfd
\   e9000000  10cWc4rcMc13r:  push
\   e9000000  10c0c4rcMc13r:  push
\   e9200000  10c1c4rcMc13r:  push_w=1
\   e9000000    12c4rcMc13r:  push
\   e9200000    12c4rcMc13r:  push_w=1
\   e9000000     12c4r3c13r:  push_R
\   e9004000     12c4r3c13r:  push_R.m=1
\   e9200000     12c4r3c13r:  push_R.w=1
\   e9204000     12c4r3c13r:  push_R.w=1.m=1

: 12c4r16c:_gene     :.mnem_  ." `12c4r16c" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r16c:
  create   dup  ,   12c4r16c:_gene
  does>    @  swap  4r.check  +  0~15<->16~31   32,'   ;

    e9000000       12c4r16c:  push_R
    e9004000       12c4r16c:  push_R.m=1
    e9200000       12c4r16c:  push_R!
    e9204000       12c4r16c:  push_R!.m=1
\ ******************************************************************************
\ 4.6.161   STMIA/STMEA           T1
\ ------------------------------------------------------------------------------
\   c000  5c3r8r:  stmia.R!
\   c000  5c3r8r:  pop_R!
: 5c3r8c:_gene     :.mnem_  ." `5c3r8c" #=if2 ."   0a  8  14p" .1" mnem" xt0 ;
: 5c3r8c:
  create   dup  ,  5c3r8c:_gene
  does>    @   swap   3r.check  100  *  +  16,'  ;

0 value  (3r)
0 value  (8r)

: .8r  ( a' -- a' )  dup  16@'  0ff  and  8  0
   do    2 /mod  swap
         if  ." R"  8 emit ( bs )   i .
         then
   loop  drop  ;

: 5c3r8r:_gene     :.mnem_  ." `5c3r8r" #=if2 ."   7  0  13p   0a  8  14p" .2" mnem" xt0 ;
: 5c3r8r:
  create   dup  ,  5c3r8r:_gene
  does>  ( 8r 3r a )  to (a)   3r.check  to (3r)    8r.check  to (8r)  
     (3r)  0a  8  >?~?
     (8r)   7  0  >?~?   +
     (a)    @            +   16,'  ;

original.mnemonic?  on       c000  5c3r8rlist:  stm 
original.mnemonic?  on       c000  5c3r8rlist:  stmia_R,#
\ original.mnemonic?  on       c000  5c3r8rlist:  stmia.R,#
original.mnemonic?  off      c000  5c3r8rlist:  pop_R!',#
\ ------------------------------------------------------------------------------
\ 4.6.161   STMIA/STMEA           T2
\ ------------------------------------------------------------------------------
\   e8800000  10cWc4rcMc8r:  stmea.R!.w

    e8800000       12c4r16c:  pop_R
    e8804000       12c4r16c:  pop_R.m=1
    e8a00000       12c4r16c:  pop_R!
    e8a04000       12c4r16c:  pop_R!.m=1
\ 0c pop_R!.m=1  r3 r5 r1 r2 r9 rc r11 r13 rd re r6 r6
\ ******************************************************************************
\ 4.6.162    STR(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         6000   5c5#3r3r:*4    str_R,[R,#5]
original.mnemonic?  off        6000   5c5#3r3r:*4'   (R+#5)=R
\ ------------------------------------------------------------------------------
\ 4.6.162    STR(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on         9000   5c3r8#:*4      str_R,[rp,#]
original.mnemonic?  off        9000   5c3r8#:*4'     (rp+#)=R
                               9001   5c3r8c:        push_R'
\ ------------------------------------------------------------------------------
\ 4.6.162    STR(immediate)  T3
\ ------------------------------------------------------------------------------
:  12c4r4r12#:gene'     :.mnem_  ." `12c4r4r12#" #=if4 ."  13 10  12p 0b 0 13p 0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4r12#:'   ( Rn # Rt --- )
   create    dup  ,  12c4r4r12#:gene'
   does> ( rn # rt a )  @  ( op.code )  >r  -rot  12#.check <#> !   4r.check  <Rn> !   4r.check <Rt> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rt>  @  1000 *  +                                           \ op.code+Rn+Rt
     <#>   @          +                                           \ op.code+Rn+Rt+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

:  12c4r4r12#:gene'     :.mnem_  ." `12c4r4r12#" #=if4 ."  13 10  12p 0b 0 13p 0f 0c 14p" .3" mnem" 4xt0 ;  \ 2019.7.25
:  12c4r4r12#:'   ( Rn # Rt --- )
   create    dup  ,  12c4r4r12#:gene'
   does> ( rn # rt a )  @  ( op.code )  >r   4r.check  <Rn> !   12#.check <#> !     4r.check <Rt> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rt>  @  1000 *  +                                           \ op.code+Rn+Rt
     <#>   @          +                                           \ op.code+Rn+Rt+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;



\ 2019.12.26
:  12c4r4r12#:gene'     :.mnem_  ." `12c4r4r12#" #=if4 ."  13 10  12p 0b 0 13p 0f 0c 14p" .3" mnem" xt0 ;
:  12c4r4r12#:'   ( Rn # Rt --- )
   create    dup  ,  12c4r4r12#:gene'
   does> ( rn # rt a )  @  ( op.code )  >r  -rot  12#.check <#> !   4r.check  <Rn> !   4r.check <Rt> !   r>
     <Rn>  @ 10000 *  +                                           \ op.code+Rn
     <Rt>  @  1000 *  +                                           \ op.code+Rn+Rt
     <#>   @          +                                           \ op.code+Rn+Rt+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on     f8c00000   12c4r4r12#:   str_R,[R,#]
original.mnemonic?  off    f8c00000   12c4r4r12#:'  (R+#12)=R

: (R+#)=R   3r5#3r?*4   if   (R+#5)=R   exit  then  (R+#12)=R  ;

: (R)=R     0  swap  (R+#)=R   ;
\ ------------------------------------------------------------------------------
\ 4.6.162    STR(immediate)  T4
\ ------------------------------------------------------------------------------

original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8400800  12c4r4rcPUW8#0:   str_R,[R,-#]
  ( p=0 u=0 w=1 )   f8400900  12c4r4rcPUW8#1:   str_R,[R,-#]!
  ( p=0 u=1 w=0 )   f8400a00  12c4r4rcPUW8#2:   str_R,[R,#]
  ( p=0 u=1 w=1 )   f8400b00  12c4r4rcPUW8#3:   str_R,[R,#]!

  ( p=1 u=0 w=0 )   f8400c00  12c4r4rcPUW8#4:   str_R,[R],-#
  ( p=1 u=0 w=1 )   f8400d00  12c4r4rcPUW8#5:   str_R,[R],-#!
  ( p=1 u=1 w=0 )   f8400e00  12c4r4rcPUW8#6:   str_R,[R],#
  ( p=1 u=1 w=1 )   f8400f00  12c4r4rcPUW8#7:   str_R,[R],#!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8400800  12c4r4rcPUW8#0:'  (R-#)=R
  ( p=0 u=0 w=1 )   f8400900  12c4r4rcPUW8#1:'  (R-#)=R,w
\ ( p=0 u=1 w=0 )   f8400a00  12c4r4rcPUW8#2:'  (R+#)=R    \ ?????????????????
  ( p=0 u=1 w=1 )   f8400b00  12c4r4rcPUW8#3:'  (R+#)=R,w

  ( p=1 u=0 w=0 )   f8400c00  12c4r4rcPUW8#4:'  (R-#)=R,p
  ( p=1 u=0 w=1 )   f8400d00  12c4r4rcPUW8#5:'  (R-#)=R,p
  ( p=1 u=1 w=0 )   f8400e00  12c4r4rcPUW8#6:'  (R+#)=R,p
  ( p=1 u=1 w=1 )   f8400f00  12c4r4rcPUW8#7:'  (R+#)=R,p

: (R)=R      0  swap  (R+#)=R    ;
: (R)=R,w    0  swap  (R+#)=R,w  ;
: (R)=R,p    0  swap  (R+#)=R,p  ;
\ ******************************************************************************
\ 4.6.163    STR(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         5000  7c3r3r3r:         str_R,[R,R]
original.mnemonic?  off        5000  7c3r3r3r:'        (R+R)=R
\ ------------------------------------------------------------------------------
\ 4.6.163    STR(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on     f8400000  12c4r4r6c2s4r:    str_R,[R,R<<#]
original.mnemonic?  off    f8400000  12c4r4r6c2s4r:'   (R+R<<#)=R

: (R+R)=R   3r3r3r?  if  (R+R)=R   exit  then   0  swap  (R+R<<#)=R  ;
\ ******************************************************************************
\ 4.6.164     STRB(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         7000  5c5#3r3r:*4       strb_R,[R,#5]
\ original.mnemonic?  on         7000  5c5#3r3r:*4       strb.R,[R,#5]
original.mnemonic?  off        7000  5c5#3r3r:*4'      (R+#)=R,b
original.mnemonic?  off        7000  5c5#3r3r:*4'      (R+#5)=R,b
\ ------------------------------------------------------------------------------
\ 4.6.164     STRB(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f8800000  12c4r4r12#:  strb_R,[R,#12]

                                     \ 12c4r4r12#:'
original.mnemonic?  off      f8800000  12c4r4r12#:' (R+#12)=R,b
\ ------------------------------------------------------------------------------
\ 4.6.164     STRB(immediate)  T3
\ ------------------------------------------------------------------------------
original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8000800  12c4r4rcPUW8#0:   strb_R,[R,-#]
  ( p=0 u=0 w=1 )   f8000900  12c4r4rcPUW8#1:   strb_R,[R,-#]!
  ( p=0 u=1 w=0 )   f8000a00  12c4r4rcPUW8#2:   strb_R,[R,#]
  ( p=0 u=1 w=1 )   f8000b00  12c4r4rcPUW8#3:   strb_R,[R,#]!

  ( p=1 u=0 w=0 )   f8000c00  12c4r4rcPUW8#4:   strb_R,[R],-#
  ( p=1 u=0 w=1 )   f8000d00  12c4r4rcPUW8#5:   strb_R,[R],-#!
  ( p=1 u=1 w=0 )   f8000e00  12c4r4rcPUW8#6:   strb_R,[R],#
  ( p=1 u=1 w=1 )   f8000f00  12c4r4rcPUW8#7:   strb_R,[R],#!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8000800  12c4r4rcPUW8#0:'  (R-#)=R,b
  ( p=0 u=0 w=1 )   f8000900  12c4r4rcPUW8#1:'  (R-#)=R,b,w
  ( p=0 u=1 w=0 )   f8000a00  12c4r4rcPUW8#2:'  (R+#)=R,b
  ( p=0 u=1 w=1 )   f8000b00  12c4r4rcPUW8#3:'  (R+#)=R,b,w

  ( p=1 u=0 w=0 )   f8000c00  12c4r4rcPUW8#4:'  (R-#)=R,b,p
  ( p=1 u=0 w=1 )   f8000d00  12c4r4rcPUW8#5:'  (R-#)=R,b,p
  ( p=1 u=1 w=0 )   f8000e00  12c4r4rcPUW8#6:'  (R+#)=R,b,p
  ( p=1 u=1 w=1 )   f8000f00  12c4r4rcPUW8#7:'  (R+#)=R,b,p


: (R+#)=R,b     3r5#3r?*4   if   (R+#5)=R,b   exit  then
                4r12#4r?    if   (R+#12)=R,b  exit  then
                                 (R+#)=R,b   ;

: (R)=R,b       0   swap  (R+#)=R,b  ;
\ ******************************************************************************
\ 4.6.165    STRB(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         5400  7c3r3r3r:        strb_R,[R,R]
original.mnemonic?  off        5400  7c3r3r3r:'       (R+R)=R,b
\ ------------------------------------------------------------------------------
\ 4.6.165    STRB(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on     f8000000  12c4r4r6c2s4r:   strb_R,[R,R<<#]
original.mnemonic?  off    f8000000  12c4r4r6c2s4r:'  (R+R<<#)=R,b

: (R+R)=R,b     3r3r3r?   if   (R+R)=R,b   exit  then   0  swap  (R+R<<#)=R,b  ;
\ ******************************************************************************
\ 4.6.166     STRBT(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     f8000e00  12c4r4r4c8#:     strbt_R,[R,#]
original.mnemonic?  off    f8000e00  12c4r4r4c8#:'    (R+#)=R,bt
\ ******************************************************************************
\ 4.6.167     STRD(immediate)  T1
\ ------------------------------------------------------------------------------
: 7cPUcWc4r4r4r8#:gene'    :.mnem_  ." `7cPUcWc4r4r4r8#" #=if4 ."  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p" .4" mnem" xt0 ;
: 7cPUcWc4r4r4r8#:'  ( Rm # Rd Rn --- )
  create   dup  ,   7cPUcWc4r4r4r8#:gene'
  does>    @  ( op.code )  >r  2swap   8#*4.check  <#> !   4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn>  @ 00010000 *  +                                           \ op.code+Rn
     <Rd>  @     1000 *  +                                           \ op.code+Rn+Rd
     <Rm>  @      100 *  +                                           \ op.code+Rn+Rd+Rm
     <#>   @             +                                           \ op.code+Rn+Rd+Rm+#
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  all.ok?.off  ;

original.mnemonic?  on
   ( p=0 u=0 w=0)  e8400000  7cPUcWc4r4r4r8#:   strd_R,R,[R,-#]
   ( p=0 u=0 w=1)  e8600000  7cPUcWc4r4r4r8#:   strd_R,R,[R,-#]!
   ( p=0 u=1 w=0)  e8c00000  7cPUcWc4r4r4r8#:   strd_R,R,[R,#]
   ( p=0 u=1 w=1)  e8e00000  7cPUcWc4r4r4r8#:   strd_R,R,[R,#]!

   ( p=1 u=0 w=0)  e9400000  7cPUcWc4r4r4r8#:   strd_R,R,[R],-#
   ( p=1 u=0 w=1)  e9600000  7cPUcWc4r4r4r8#:   strd_R,R,[R],-#!
   ( p=1 u=1 w=0)  e9c00000  7cPUcWc4r4r4r8#:   strd_R,R,[R],#
   ( p=1 u=1 w=1)  e9e00000  7cPUcWc4r4r4r8#:   strd_R,R,[R],#!
original.mnemonic?  off
   ( p=0 u=0 w=0)  e8400000  7cPUcWc4r4r4r8#:'  (R-#)=R,R,d
   ( p=0 u=0 w=1)  e8600000  7cPUcWc4r4r4r8#:'  (R-#)=R,R,d,w
   ( p=0 u=1 w=0)  e8c00000  7cPUcWc4r4r4r8#:'  (R+#)=R,R,d
   ( p=0 u=1 w=1)  e6e00000  7cPUcWc4r4r4r8#:'  (R+#)=R,R,d,w

   ( p=1 u=0 w=0)  e9400000  7cPUcWc4r4r4r8#:'  (R-#)=R,R,d,p
   ( p=1 u=0 w=1)  e9600000  7cPUcWc4r4r4r8#:'  (R-#)=R,R,d,p,w
   ( p=1 u=1 w=0)  e9c00000  7cPUcWc4r4r4r8#:'  (R+#)=R,R,d,p
   ( p=1 u=1 w=1)  e9e00000  7cPUcWc4r4r4r8#:'  (R+#)=R,R,d,p,w
\ ******************************************************************************
\ 4.6.168     STREX             T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     e8400000  12c4r4r4c8#:   strex_R,R,[R,#]
original.mnemonic?  off    e8400000  12c4r4r4c8#:'  (R+#)=R,R,ex
\ ******************************************************************************
\ 4.6.169     STREXB            T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     e8c00040  12c4r4r4c8#:   strexb_R,[R,#]
original.mnemonic?  off    e8c00040  12c4r4r4c8#:'  (R+#)=R,exb
\ ******************************************************************************
\ 4.6.170     STREXD            T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     e8c00070  12c4r4r4c8#:   strexd_R,[R,#]
original.mnemonic?  off    e8c00070  12c4r4r4c8#:'  (R+#)=R,exd
\ ******************************************************************************
\ 4.6.171     STREXH            T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     e8c00f50  12c4r4r4c8#:   strexh_R,[R,#]
original.mnemonic?  off    e8c00f50  12c4r4r4c8#:'  (R+#)=R,exh
\ ******************************************************************************
\ 4.6.172     STRH(immediate)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on        8000  5c5#3r3r:*4    strh_R,[R,#5]
original.mnemonic?  off       8000  5c5#3r3r:*4'   (R+#5)=R,h
\ ------------------------------------------------------------------------------
\ 4.6.172     STRH(immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on     f8a00000  12c4r4r12#:   strh_R,[R,#12]
original.mnemonic?  off    f8a00000  12c4r4r12#:'  (R+#12)=R,h
\ ------------------------------------------------------------------------------
\ 4.6.172     STRH(immediate)  T3
\ ------------------------------------------------------------------------------
original.mnemonic?  on
  ( p=0 u=0 w=0 )   f8200800  12c4r4rcPUW8#0:   strh_R,[R,-#]
  ( p=0 u=0 w=1 )   f8200900  12c4r4rcPUW8#1:   strh_R,[R,-#]!
  ( p=0 u=1 w=0 )   f8200a00  12c4r4rcPUW8#2:   strh_R,[R,#]
  ( p=0 u=1 w=1 )   f8200b00  12c4r4rcPUW8#3:   strh_R,[R,#]!

  ( p=1 u=0 w=0 )   f8200c00  12c4r4rcPUW8#4:   strh_R,[R],-#
  ( p=1 u=0 w=1 )   f8200d00  12c4r4rcPUW8#5:   strh_R,[R],-#!
  ( p=1 u=1 w=0 )   f8200e00  12c4r4rcPUW8#6:   strh_R,[R],#
  ( p=1 u=1 w=1 )   f8200f00  12c4r4rcPUW8#7:   strh_R,[R],#!
original.mnemonic?  off
  ( p=0 u=0 w=0 )   f8200800  12c4r4rcPUW8#0:'  (R-#)=R,h
  ( p=0 u=0 w=1 )   f8200900  12c4r4rcPUW8#1:'  (R-#)=R,h,w
  ( p=0 u=1 w=0 )   f8200a00  12c4r4rcPUW8#2:'  (R+#)=R,h
  ( p=0 u=1 w=1 )   f8200b00  12c4r4rcPUW8#3:'  (R+#)=R,h,w

  ( p=1 u=0 w=0 )   f8200c00  12c4r4rcPUW8#4:'  (R-#)=R,h,p
  ( p=1 u=0 w=1 )   f8200d00  12c4r4rcPUW8#5:'  (R-#)=R,h,p
  ( p=1 u=1 w=0 )   f8200e00  12c4r4rcPUW8#6:'  (R+#)=R,h,p
  ( p=1 u=1 w=1 )   f8200f00  12c4r4rcPUW8#7:'  (R+#)=R,h,p


: (R+#)=R,h     3r5#3r?*4   if   (R+#5)=R,h   exit  then
                4r12#4r?    if   (R+#12)=R,h  exit  then
                                 (R+#)=R,h   ;
\ ******************************************************************************
\ 4.6.173    STRH(register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      5400  7c3r3r3r:    strh_R,[R,R]
original.mnemonic?  off     5400  7c3r3r3r:'   (R+R)=R,h
\ ------------------------------------------------------------------------------
\ 4.6.173    STRH(register)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f8020000  12c4r4r6c2s4r:    strh_R,[R,R<<#]
original.mnemonic?  off      f8020000  12c4r4r6c2s4r:'   (R+R<<#)=R,h
\ ******************************************************************************
\ 4.6.174     STRHT            T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f8020e00  12c4r4r4c8#:   strht_R,[R,#]
original.mnemonic?  off     f8020e00  12c4r4r4c8#:'  (R+#)=R,ht
\ 2019.7.26
\ ******************************************************************************
\ 4.6.175     STRT             T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on      f8400e00  12c4r4r4c8#:   strt_R,[R,#]
original.mnemonic?  off     f8400e00  12c4r4r4c8#:'  (R+#)=Rt
\ ******************************************************************************
\ 4.6.176     SUB(immediate)  T1      3r3r3#?
\ ------------------------------------------------------------------------------
original.mnemonic?  on      1e00  7c3#3r3r:  sub_R,R,#3
original.mnemonic?  off     1e00  7c3#3r3r:  R=R-#3
\ ------------------------------------------------------------------------------
\ 4.6.176     SUB(immediate)  T2      3r8#?
\ ------------------------------------------------------------------------------
original.mnemonic?  on      3800   5c3r8#:  sub_R,#8
original.mnemonic?  off     3800   5c3r8#:  R-#8
\ ------------------------------------------------------------------------------
\ 4.6.176     SUB(immediate)  T3      4r4r8#?        \  imm32 = ThumbExpandImm(i:imm3:imm8);   `5c#5cc4rc3#4r8#
\ ------------------------------------------------------------------------------
comment:
original.mnemonic?  on      f1b00000   5c#5cc4rc3#4r8#:  subs_R,R,#12
original.mnemonic?  oFF     f1b00000   5c#5cc4rc3#4r8#:  R=R-#,s
                            f1b00000   5c#5cc4rc3#4r8#:  R=R-#12,s
original.mnemonic?  on      f1a00000   5c#5cs4rc3#4r8#:  sub_R,R,#12
original.mnemonic?  oFF     f1a00000   5c#5cs4rc3#4r8#:  R=R-#12
\                           f1a00000   5c#5cs4rc3#4r8#:  R=R-#
comment;

 
original.mnemonic?  on      f1b00000   5c#5cc4rc3#4r8#:  subs_R,R,#12
original.mnemonic?  oFF     f1b00000   5c#5cc4rc3#4r8#:  R=R-#,s
                            f1b00000   5c#5cc4rc3#4r8#:  R=R-#12,s
original.mnemonic?  on      f1a00000   5c#5cc4rc3#4r8#:  sub_R,R,#12
original.mnemonic?  oFF     f1a00000   5c#5cc4rc3#4r8#:  R=R-#12
                            f1a00000   5c#5cc4rc3#4r8#:  R=R-#

: R-#.s   >r  dup  r>  subs_R,R,#12  ;
: R-#     3r8#?    if  sub_R,#8   else   R=R-#12   then  ;
\ ------------------------------------------------------------------------------
\ 4.6.176     SUB(immediate)  T4      4r4r8#?
\ ------------------------------------------------------------------------------
\  f2000000   5c#5c04rc3#4r8#:  R=R-#
\ : `5c#6c4rc3#4r8#
:  5c#6c4rc3#4r8#:_gene
:.mnem_  ." `5c#6c4rc3#4r8#" #=if4 ."  0b  8  12p 13 10  12p 1a 1a 0e 0c 7 0 14p" .3" mnem" xt0 ;

:  5c#6c4rc3#4r8#:  ( op.code -- )  \ does>  ( Rd Rn # --- )
   create  dup  ,  5c#6c4rc3#4r8#:_gene
   does>   >r   ( Rd Rn # --- )   n->ThumbExpand.#12  11#.check <#> !   4r.check <Rn> !   4r.check <Rd> !
      r>   @                                          \ op.code
     <Rn>  @ 10000 *  +                               \ op.code+Rn
     <Rd>  @   100 *  +                               \ op.code+Rn+Rd
     <#>   @  1000  /mod ( 8# 3# ) 1000 *  + ( # ) +  \ op.code+Rn+Rd+#
     0~15<->16~31   32,'   here'  4  -  last.instruction.addr ! ;


comment:
original.mnemonic?  on
  f2600000   5c#6c4rc3#4r8#:   sub_R,R,#
  f2600000   5c#6c4rc3#4r8#:   sub_R,R,#12
original.mnemonic?  off
  f2600000   5c#6c4rc3#4r8#:   R=R-#
  f2600000   5c#6c4rc3#4r8#:   R=R-#12
comment;





: R=R-#    ( r r # -- )   3r3r3#?  if   R=R-#3   exit  then
                          4r4r8#?  if   R=R-#,s  exit  then                R=R-#  ;
: R-#      ( r # ---- )   3r8#?    if   R-#8     exit  then   >r  dup  r>  R=R-#  ;
: R-    1  R-#  ;
: R-1   1  R-#  ;
: R-2   2  R-#  ;
\ ******************************************************************************
\ 4.6.177   SUB(register)   T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on           1a00  7c3r3r3r:  sub_R,R,R
original.mnemonic?  off          1a00  7c3r3r3r:  R=R-R
\ ------------------------------------------------------------------------------
\ 4.6.177   SUB(register)   T2
\ ------------------------------------------------------------------------------
\ original.mnemonic?  on       eba00000   11cs4rc3#4r2#ty4r:   sub_R,R,R.shift.#
\ original.mnemonic?  off      eba00000   11cs4rc3#4r2#ty4r:   R=R-R<<#







\ -------------------------------------------------------------------------
original.mnemonic?  on       eba00000  11cc4rc3#4r2#004r:  sub_R,R,R,lsl,#
original.mnemonic?  on       eba00010  11cc4rc3#4r2#014r:  sub_R,R,R,lsr,#
original.mnemonic?  on       eba00020  11cc4rc3#4r2#104r:  sub_R,R,R,asr,#
original.mnemonic?  on       eba00030  11cc4rc3#4r2#114r:  sub_R,R,R,ror,#

original.mnemonic?  off      eba00000  11cc4rc3#4r2#004r:  R=R-R<<#
original.mnemonic?  off      eba00010  11cc4rc3#4r2#014r:  R=R-R>>#
original.mnemonic?  off      eba00020  11cc4rc3#4r2#104r:  R=R-R,a>>#
original.mnemonic?  off      eba00030  11cc4rc3#4r2#114r:  R=R-R>>>#

original.mnemonic?  on       ebb00000  11cc4rc3#4r2#004r:  subs_R,R,R,lsl,#
original.mnemonic?  on       ebb00010  11cc4rc3#4r2#014r:  subs_R,R,R,lsr,#
original.mnemonic?  on       ebb00020  11cc4rc3#4r2#104r:  subs_R,R,R,asr,#
original.mnemonic?  on       ebb00030  11cc4rc3#4r2#114r:  subs_R,R,R,ror,#

original.mnemonic?  off      ebb00000  11cc4rc3#4r2#004r:  R=R-R<<#,s
original.mnemonic?  off      ebb00010  11cc4rc3#4r2#014r:  R=R-R>>#,s
original.mnemonic?  off      ebb00020  11cc4rc3#4r2#104r:  R=R-R,a>>#,s
original.mnemonic?  off      ebb00030  11cc4rc3#4r2#114r:  R=R-R>>>#,s






: R=R-R    ( r r r -- )   3r3r3r?   if   R=R-R   exit  then    0  R=R-R<<#  ;
: R-R      ( r r ---- )   >r      dup       r>   R=R-R     ;
: R=0      dup   R-R   ;


\ : R=R-R      ( r r r -- )              0  R=R-R<<#    ;
: R-R<<#     ( r r # -- )  2>r  dup  2r>  R=R-R<<#    ;
\ R-R        ( r r ---- )              0    R-R<<#    ;

: R=R-R,s    ( r r r -- )              0  R=R-R<<#,s  ;
: R-R<<#,s   ( r r # -- )  2>r  dup  2r>  R=R-R<<#,s  ;
: R-R,s      ( r r ---- )              0    R-R<<#,s  ;
\ --------------------------------------------------------------------------


















\ ******************************************************************************
\ 4.6.178   SUB(rp plus immediate)  T1
\ ------------------------------------------------------------------------------
comment:
: 9c7#:_gene      :.mnem_  ." `9c7#" #=if2 ."    6 0  14p" .1" mnem" xt0 ;
: 9c7#:
  create  dup  ,  9c7#:_gene
  does>   @  swap   7#.check  +  16,'  ;

: 9c7#:_gene      :.mnem_  ." `9c7#" #=if2 ."    6 0  14p" .1" mnem" xt0 ;
: 9c7#:
  create  dup  ,  9c7#:_gene
  does>   @  swap   7#.check  +  16,'  ;
comment;

: 9c7#*4:_gene      :.mnem_  ." `9c7#" #=if2 ."    6 0  14p" .1" mnem" xt0 ;
: 9c7#*4:
  create  dup  ,  9c7#*4:_gene
  does>   @  swap   7#*4.check  +  16,'  ;
original.mnemonic?  on      b080  9c7#*4:  sub_rp,#7
original.mnemonic?  off     b080  9c7#*4:  rp-#7
                            b080  9c7#*4:  rp-#7*4
\ ------------------------------------------------------------------------------
\ 4.6.178   SUB(rp plus immediate)  T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f1ad0000  5c#5cs5c3#4r8#:*4  sub_rp,#12
original.mnemonic?  off      f1ad0000  5c#5cs5c3#4r8#:*4  R=rp-#12
                             f1ad0000  5c#5cs5c3#4r8#:*4  R=rp-#
\ ------------------------------------------------------------------------------
\ 4.6.178   SUB(rp plus immediate)  T3
\ ------------------------------------------------------------------------------
original.mnemonic?  on       f2ad0000  5c#11c3#4r8#:    R=rp-#,w
original.mnemonic?  off      f2ad0000  5c#11c3#4r8#:    R=rp-#,w
\ ******************************************************************************
\ 4.6.179   SUB(rp minus register)  T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on       ebab0000  11cs5c3#4r2#ty4r:  sub_R,rp
original.mnemonic?  off      ebab0000  11cs5c3#4r2#ty4r:  R=R-rp<<???

\ ******************************************************************************
\ 4.6.180     SUB PC LR           T1
\ ------------------------------------------------------------------------------
: 24c8#:_gene     :.mnem_  ." `24c8#" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 24c8#:
  create   dup  ,  24c8#:_gene
  does>    @   swap   8#*4.check   +  24,'  ;

original.mnemonic?  on       f3de8f00  24c8#:   sub_pc,lr,#
original.mnemonic?  off      f3de8f00  24c8#:   pc=lr-#
\ ******************************************************************************
\ 4.6.181     SVC                  T1
\ ------------------------------------------------------------------------------
    df00  8c8#:  svc_#
\ ******************************************************************************
\ 4.6.182    SXTAB                 T1
\ ------------------------------------------------------------------------------
: 12c4r4c4r2c2s4r:_gene     :.mnem_  ." `12c4r4c4r2c2s4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .4" mnem" xt0 ;
: 12c4r4c4r2c2s4r:
  create   dup  ,  12c4r4c4r2c2s4r:_gene
  does>    @
    ( #  ) 2#.check     10  *  +
    ( Rm ) 4r.check            +
    ( Rn ) 4r.check  10000  *  +
    ( Rd ) 4r.check    100  *  +    0~15<->16~31   32,'   ;

    fa40f080  12c4r4c4r2c2s4r:  sxtab_R,R,R,#
\ ******************************************************************************
\ 4.6.183    SXTAB16               T1
\ ------------------------------------------------------------------------------
    fa20f080  12c4r4c4r2c2s4r:  sxtab16_R,R,R,#
\ ******************************************************************************
\ 4.6.184    SXTAH                T1
\ ------------------------------------------------------------------------------
    fa00f080  12c4r4c4r2c2s4r:  sxtah_R,R,R,#
\ ******************************************************************************
\ 4.6.185    SXTB                T1
\ ------------------------------------------------------------------------------
    b240   10c3r3r:   sxtb_R,R
\ ------------------------------------------------------------------------------
: 12c4c4c4r2c2s4r:_gene     :.mnem_  ." `12c4c4c4r2c2s4r" #=if4 ."  0b 8 12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .3" mnem" xt0 ;
: 12c4c4c4r2c2s4r:
  create   dup  ,  12c4c4c4r2c2s4r:_gene
  does>    @
    ( #  ) 2#.check     10  *  +
    ( Rm ) 4r.check            +
\   ( Rn ) 4r.check  10000  *  +
    ( Rd ) 4r.check    100  *  +    0~15<->16~31   32,'   ;

\ 4.6.185    SXTB                T2
\ ------------------------------------------------------------------------------
    fa4ff080  12c4c4c4r2c2s4r:  sxtb_R,R,#
\ ******************************************************************************
\ 4.6.186    SXTB16              T1
\ ------------------------------------------------------------------------------
    fa2ff080  12c4c4c4r2c2s4r:  sxtb16_R,R,#
\ ******************************************************************************
\ 4.6.187    SXTH                T1
\ ------------------------------------------------------------------------------
    b200   10c3r3r:   sxth_R,R
\ ------------------------------------------------------------------------------
\ 4.6.187    SXTH                T2
\ ------------------------------------------------------------------------------
    fa0ff080  12c4c4c4r2c2s4r:  sxth_R,R,#
\ ******************************************************************************
\ 4.6.188    TBB                 T1
\ ------------------------------------------------------------------------------
: 12c4r12c4r:_gene     :.mnem_  ." `12c4r12c4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r12c4r:
  create   dup  ,  12c4r12c4r:_gene
  does>    @   swap  4r.check  +  swap  4r.check   10000  +  0~15<->16~31   32,'   ;

original.mnemonic?  on    e8d0f000  12c4r12c4r:  tbb_[R,R]
original.mnemonic?  off   e8d0f000  12c4r12c4r:  pc=(R+R*2),b
                          e8d0f000  12c4r12c4r:  pc=R+R*2,b
\ ******************************************************************************
\ 4.6.189    TBH                 T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    e8d0f010  12c4r12c4r:  tbh_[R,R]
original.mnemonic?  off   e8d0f010  12c4r12c4r:  pc=(R+R*2),h
                          e8d0f010  12c4r12c4r:  pc=R+R*2,h
\ ******************************************************************************
\ 4.6.190    TEQ(immediate)       T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    f0900f00  5c#6c4rc3#4c8#:  ted_R,#
original.mnemonic?  off   f0900f00  5c#6c4rc3#4c8#:  Rx#<<#,tst
\ ******************************************************************************
\ 4.6.191    TEQ(register)        T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on    ea900f00  12c4rc3#4c2#ty4r:  ted_R,R,#
original.mnemonic?  off   ea900f00  12c4rc3#4c2#ty4r:  RxR<<#,tst
\ ******************************************************************************
\ 4.6.192    TST(immediate)       T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     f0100f00  5c#6c4rc3#4c8#:  tst_R,#
original.mnemonic?  off    f0100f00  5c#6c4rc3#4c8#:  Rn#,tst
\ ******************************************************************************
\ 4.6.193    TST(register)        T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on         4200  10c3r3r:  tst_R,R
original.mnemonic?  off        4200  10c3r3r:  RnR,tst
\ ------------------------------------------------------------------------------
\ 4.6.193    TST(register)        T2
\ ------------------------------------------------------------------------------
original.mnemonic?  on     ea100f00  12c4rc3#4c2#ty4r:   tst_R,R<<#
original.mnemonic?  off    ea100f00  12c4rc3#4c2#ty4r:   RnR<<#,tst
\ ******************************************************************************
\ 4.6.194     UDD16              T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     fa90f040  12c4r4c4r4c4r:  uadd16_R,R,R
                         \ fa90f040  12c4r4c4r4c4r:  uadd16.R=R+R
original.mnemonic?  off    fa90f040  12c4r4c4r4c4r:  R=R+R.udd16
\ ******************************************************************************
\ 4.6.195     UDD8               T1
\ ------------------------------------------------------------------------------
original.mnemonic?  on     fa80f040  12c4r4c4r4c4r:  uadd8_R,R,R
                           fa80f040  12c4r4c4r4c4r:  uadd8.R=R+R
original.mnemonic?  off    fa80f040  12c4r4c4r4c4r:  R=R+R.udd8
\ ******************************************************************************
\ 4.6.196     UASX                T1
\ ------------------------------------------------------------------------------
  faa0f040  12c4r4c4r4c4r:  uasx_R,R,R
  faa0f040  12c4r4c4r4c4r:  uasx_R=R+R
\ ******************************************************************************
\ 4.6.197     UBFX                T1
\ ------------------------------------------------------------------------------
: `12c4rc3#4r2#c5w    dup 32@^   fff08020  and  ;  ( a' -- a' op.code )
:  12c4rc3#4r2#c5w:_gene     :.mnem_  ." `12c4rc3#4r2#c5w" #=if4 ."  0b 8 11p 13 10 12p 0e 0c 7 6 23p 4 0 14p" .4" mnem" xt0 ;
:  12c4rc3#4r2#c5w:
   create   dup  ,   12c4rc3#4r2#c5w:_gene
   does>    ( Rd Rn lsb width a )  to (a)  5#.check to (w)   5#.check to (#)   4r.check  to (Rn)    4r.check  to (Rd)
        (a)   @
        (Rd)  @  0b   8        >?~?      +
        (Rn)  @  13  10        >?~?      +
        (#)   @  0e  0c  7  6  >?~?+?~?  +
        (w)   @   4   0        >?~?      +
        0~15<->16~31    32,'   ;

\ f3c00000  12c4rc3#2#c5w:  uasx_R,R,lsb,m
\ f3c00000  12c4rc3#2#c5w:  uasx_R=R<<lsb,m
original.mnemonic?  on    f3c00000  12c4rc3#4r2#c5w:  ubfx_R,R,#,#
original.mnemonic?  off   f3c00000  12c4rc3#4r2#c5w:  ubfx_R=R<<#,#


\ ******************************************************************************
\ 4.6.197     UBFX                T1
\ ------------------------------------------------------------------------------
: `12c4rc3#2#c5w      dup 32@^   ffd08020  and  ;  ( a' -- a' op.code )  \ FFF08020  ???????
\ `12c4rc3#4c2#ty4r   dup 32@^   fff08f00  and  ;  ( a' -- a' op.code )

: 12c4rc3#2#c5w:_gene     :.mnem_  ." `12c4rc3#2#c5w" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .4" mnem" xt0 ;
: 12c4rc3#2#c5w:
  create   dup  ,   12c4rc3#2#c5w:_gene
  does>    @
           swap  5#.check                                  +
           swap  5#.check  4 /mod  1000 *  swap  20 *  +   +
           swap  4r.check  10000 *                         +
           swap  4r.check    100 *                         +   0~15<->16~31   32,'   ;

\ f3c00000  12c4rc3#2#c5w:  uasx_R,R,lsb,m
\ f3c00000  12c4rc3#2#c5w:  uasx_R=R<<lsb,m
original.mnemonic?  on    f3c00000  12c4rc3#2#c5w:  ubfx_R,R,#,#
original.mnemonic?  off   f3c00000  12c4rc3#2#c5w:  ubfx_R=R<<#,#





\ ******************************************************************************
\ 4.6.198     UDIV                T1
\ ------------------------------------------------------------------------------
  fbb0f0f0  12c4r4c4r4c4r:  udiv_R,R,R
\ ******************************************************************************
\ 4.6.199     UHADD16             T1
\ ------------------------------------------------------------------------------
      fa90f060  12c4r4c4r4c4r:  uhadd16_R,R,R
\ ******************************************************************************
\ 4.6.200     UHADD8              T1
\ ------------------------------------------------------------------------------
      fa80f060  12c4r4c4r4c4r:  uhadd8_R,R,R
\ ******************************************************************************
\ 4.6.201     UHASX               T1
\ ------------------------------------------------------------------------------
      faa0f060  12c4r4c4r4c4r:  uhasx_R,R,R
\ ******************************************************************************
\ 4.6.202     UHSAX               T1
\ ------------------------------------------------------------------------------
      fae0f060  12c4r4c4r4c4r:  uhsax_R,R,R
\ ******************************************************************************
\ 4.6.203    UHSUB16            T1
\ ------------------------------------------------------------------------------
      fad0f060  12c4r4c4r4c4r:  uhsub16_R,R,R
\ ******************************************************************************
\ 4.6.204    UHSUB8             T1
\ ------------------------------------------------------------------------------
      fac0f060  12c4r4c4r4c4r:  uhsub8_R,R,R
\ ******************************************************************************
\ 4.6.205    UMAAL              T1
\ ------------------------------------------------------------------------------
      fbe00060  12c4r4r4r4c4r:  umaal_R,R,R,R
\ ******************************************************************************
\ 4.6.206    UMLAL              T1
\ ------------------------------------------------------------------------------
      fbe00000  12c4r4r4r4c4r:  umlal_R,R,R,R
\ ******************************************************************************
\ 4.6.207    UmulL              T1
\ ------------------------------------------------------------------------------
      fba00000  12c4r4r4r4c4r:  umull_R,R,R,R
\ ******************************************************************************
\ 4.6.208     UQADD16               T1
\ ------------------------------------------------------------------------------
      fa90f060  12c4r4c4r4c4r:  uhqadd16_R,R,R
\ ******************************************************************************
\ 4.6.209     UQADD8                T1
\ ------------------------------------------------------------------------------
      fa80f050  12c4r4c4r4c4r:  uhqadd8_R,R,R
\ ******************************************************************************
\ 4.6.210     UQASX                T1
\ ------------------------------------------------------------------------------
      faa0f050  12c4r4c4r4c4r:  uqasx_R,R,R
\ ******************************************************************************
\ 4.6.211     UQSAX                T1
\ ------------------------------------------------------------------------------
      fae0f050  12c4r4c4r4c4r:  uqsax_R,R,R
\ ******************************************************************************
\ 4.6.212     UQSUB16              T1
\ ------------------------------------------------------------------------------
      fad0f050  12c4r4c4r4c4r:  uqsub16_R,R,R
\ ******************************************************************************
\ 4.6.213     UQSUB8               T1
\ ------------------------------------------------------------------------------
      fac0f050  12c4r4c4r4c4r:  uqsub8_R,R,R
\ ******************************************************************************
\ 4.6.214     USAD8              T1
\ ------------------------------------------------------------------------------
    fb70f000   12c4r4c4r4c4r:   usad8_R,R,R
\ ******************************************************************************
\ 4.6.215     USADA8              T1
\ ------------------------------------------------------------------------------
  fb700000   12c4r4r4r4c4r:   usada8_R,R,R,R
\ ******************************************************************************
\ 4.6.216      USAT              T1
\ ------------------------------------------------------------------------------
: 10csc4rc3#4r2#c5s:_gene     :.mnem_  ." `10csc4rc3#4r2#c5s" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 10csc4rc3#4r2#c5s:
  create   dup  ,   10csc4rc3#4r2#c5s:_gene
  does>    @  ( r # r # )
           swap  5#.check                                  +
           swap  4r.check  10000 *                         +
           swap  5#.check  4 /mod  1000 *  swap  40 *  +   +
           swap  4r.check    100 *                         +   0~15<->16~31   32,'   ;

  f3800000  10csc4rc3#4r2#c5s:  usat_R,#,R<<#
\ ******************************************************************************
\ 4.6.217      USAT16            T1
\ ------------------------------------------------------------------------------
     f3a00000  12c4r4c4r4c4r:   usat16_R,R,R
\ ******************************************************************************
\ 4.6.218      USAX              T1
\ ------------------------------------------------------------------------------
     fae0f040  12c4r4c4r4c4r:   usax_R,R,R
\ ******************************************************************************
\ 4.6.219      USUB16            T1
\ ------------------------------------------------------------------------------
     faB0f040  12c4r4c4r4c4r:   usub16_R,R,R
\ ******************************************************************************
\ 4.6.220      USUB8              T1
\ ------------------------------------------------------------------------------
     fac0f040  12c4r4c4r4c4r:   usub8_R,R,R
\ ******************************************************************************
\ 4.6.221      UXTAB              T1
\ ------------------------------------------------------------------------------
: 12c4r4c4r2c2o4r:_gene     :.mnem_  ." `12c4r4c4r2c2o4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 12c4r4c4r2c2o4r:
  create   dup  ,   12c4r4c4r2c2o4r:_gene
  does>   @  ( op.code )  >r     4r.check  <Rm> !   4r.check  <Rn> !  4r.check <Rd> !   r>
     <Rn> @ 10000 *  +                                           \ op.code+Rn
     <Rd> @   100 *  +                                           \ op.code+Rn+Rd
     <Rm> @          +                                           \ op.code+Rn+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;

   fa50f080  12c4r4c4r2c2o4r:   uxtab_R,R,R<<<#
\ ******************************************************************************
\ 4.6.222      UXTAB16            T1
\ ------------------------------------------------------------------------------
  fa30f080  12c4r4c4r2c2o4r:   uxtab16_R,R,R<<<#
\ ******************************************************************************
\ 4.6.223      UXTAH              T1
\ ------------------------------------------------------------------------------
\ fa10f080  12c4r4c4r2c2o4r:   uxtab_R,R,R<<<#,h
  fa10f080  12c4r4c4r2c2o4r:   uxtah_R,R,R<<<#
\ ******************************************************************************
\ 4.6.224      UXTB              T1
\ ------------------------------------------------------------------------------
  b2c0  10c3r3r:  uxtb_R,R
\ ------------------------------------------------------------------------------
\ 4.6.224      UXTB              T2
\ ------------------------------------------------------------------------------
  fa5ff080  12c4r4c4r2c2o4r:   uxtb_R,R,R<<<#
\ ******************************************************************************
\ 4.6.225      UXTAB16            T1
\ ------------------------------------------------------------------------------
: 20c4r2c2o4r:_gene     :.mnem_  ." `20c4r2c2o4r" #=if4 ."  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p" .1" mnem" xt0 ;
: 20c4r2c2o4r:
  create  dup  ,   20c4r2c2o4r:_gene
  does>   @  ( op.code )  >r     4r.check  <Rm> !   4r.check  <Rn> !   4r.check <Rd> !   r>
     <Rd> @   100 *  +                                           \ op.code+Rd
     <Rm> @          +                                           \ op.code+Rd+Rm
     0~15<->16~31   32,'   here'   4  -  last.instruction.addr  !  ;

  fa50f080  20c4r2c2o4r:   uxtab16_R,R,R<<<#
\ ******************************************************************************
\ 4.6.226      UXTH              T1
\ ------------------------------------------------------------------------------
      b280  10c3r3r:  uxth_R,R
\ ------------------------------------------------------------------------------
\ 4.6.226      UXTH              T2
\ ------------------------------------------------------------------------------
     fa1ff080  12c4r4c4r2c2o4r:   uxth_R,R,R<<<#
\ ******************************************************************************
\ 4.6.227    WFE                  T1
\ ------------------------------------------------------------------------------
    bf20   16c:   wfe
\ ------------------------------------------------------------------------------
\ 4.6.227    WFE                  T2
\ ------------------------------------------------------------------------------
    f3af8002   32c:  wfe_w
\ ******************************************************************************
\ 4.6.228    WFI                  T1
\ ------------------------------------------------------------------------------
    bf10   16c:   wfi
\ ------------------------------------------------------------------------------
\ 4.6.228    WFI                  T3
\ ------------------------------------------------------------------------------
    f3af8001   32c:  wfi_w
\ ******************************************************************************
\ 4.6.229    YIELD                T1
\ ------------------------------------------------------------------------------
        bf10  16c:  yield
\ ------------------------------------------------------------------------------
\ 4.6.229    YIELD                T2
\ ------------------------------------------------------------------------------
        f3af8001  32c:  yield_w
\ ******************************************************************************
\ : R=#/  ( r # -- )   dup>r   5c#6C4RC3#4C8#>12#




   original.mnemonic?  on    bfb4  16c:  itelt
   original.mnemonic?  off   bfb4  16c:  it'=<

   original.mnemonic?  on    bfcc  16c:  itegt
   original.mnemonic?  off   bfcc  16c:  it'=>

   original.mnemonic?  on    bf18  16c:  itne
   original.mnemonic?  off   bf18  16c:  it'<>

   original.mnemonic?  on    bfb8  16c:  itlt
   original.mnemonic?  off   bfb8  16c:  it'<

   original.mnemonic?  on    bfc8  16c:  itgt
   original.mnemonic?  off   bfc8  16c:  it'>

   original.mnemonic?  on    bf38  16c:  itcc
   original.mnemonic?  off   bf38  16c:  it'c=0

   original.mnemonic?  on    bf8c  16c:  itehi
   original.mnemonic?  off   bf8c  16c:  it'u>=

   original.mnemonic?  on    bf0c  16c:  iteeq
   original.mnemonic?  off   bf0c  16c:  it'==

   original.mnemonic?  on    bf34  16c:  itecc
   original.mnemonic?  off   bf34  16c:  it'=.c=0

   original.mnemonic?  on    bf04  16c:  itteq
   original.mnemonic?  off   bf04  16c:  it'=

   original.mnemonic?  on    bf3c  16c:  ittcc
   original.mnemonic?  off   bf3c  16c:  itt'c=0

   original.mnemonic?  on    bf48  16c:  itmi
   original.mnemonic?  off   bf48  16c:  it'-



















comment:
: R=#/   ( r # -- -1 / r # 0 )
\ dup  -ffff      -1        between  if  ffff  and   R=#/'   -1  exit  then
  dup   ffff0000  ffffFFFF  between  if  ffff  and   R=#/'   -1  exit  then


: R=#   R=#'  ;




































 


















 
comment;

: R=#   dup>r  10000 u<  if  r>  R=#'  exit  then
  dup   r>  0 ( s>d )  10000  um/mod   >r  Rt=#16 ( 31~16 )   r>  R=#' ( 15~00 )   ;

: R=#   dup>r  10000 u<  if  r>  R=#'  exit  then
 dup   r>  0 ( s>d )  10000  um/mod   R=#' ( 15~00 )   Rt=#16 ( 31~16 )   ;


: R=#        3r8#?    if  R=#8    exit  then
             4r16#?   if  R=#16   exit  then
        dup  ffff u>  if  0  ( s>d )  10000  um/mod  >r  2dup  R=#    drop   r>  Rt=#  exit  then
                          R=#12   ;



: (#)x#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)x#   ==>  (e000ed88)xF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Rx#       \  r1x#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)o#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)o#   ==>  (e000ed88)oF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Ro#       \  r1o#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)n#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)n#   ==>  (e000ed88)nF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Rn#       \  r1n#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)=#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)=F00000
  0  swap  r=#       \  r0=a'
  1  r>    r=#       \  r1=#
  0  1     (r)=r  ;  \  (r0)=r1

\ comment:
:  (r)o#    >r  0  over  r=(r)    0  r>  Ro#    0 (r)=r  ;
:  (r)n#/   >r  0  over  r=(r)    0  r>  Rn#/   0 (r)=r  ;


\ :{ ret       bd00 16,'  };   \   { pc, } pop{}
\ :{ ret'      4770 16,'  };   \   pc=re
\ comment;
\ \s






































comment:
\ ------------------------------------------------------------------------------
  4140      10c3r3r:  R+R+c
  4140      10c3r3r:  adc_R,R
\ ------------------------------------------------------------------------------
  1c00     7c3#3r3r:  R=R+#
  1c00     7c3#3r3r:  add_R,R,#
\ ------------------------------------------------------------------------------
  3000       5c3r8#:  R+#8
  3000       5c3r8#:  add_R,#8
\ ------------------------------------------------------------------------------
  1800     7c3r3r3r:  R+R+R
  1800     7c3r3r3r:  add_R,R,R
\ ------------------------------------------------------------------------------
  4400     8c2h3r3r:  R+R
  4400     8c2h3r3r:  add_R,R
\ ------------------------------------------------------------------------------
  c000     5c3r8#*4:  R=pc+#
  c000     5c3r8#*4:  add_R,pc+#
\ ------------------------------------------------------------------------------
  a800     5c3r8#*4:  R=rp+#
  a800     5c3r8#*4:  add_R,rp+#
\ ------------------------------------------------------------------------------
  b000       9c7#*4:  rp+#
  b000       9c7#*4:  add_rp+#
\ ------------------------------------------------------------------------------
  4000      10c3r3r:  RnR
  4000      10c3r3r:  and_R,R
\ ------------------------------------------------------------------------------
  1000     5c5#3r3r:  R=R<<#
  1000     5c5#3r3r:  asr_R,R,#
\ ------------------------------------------------------------------------------
  4100      10c3r3r:  R<<R
  4100      10c3r3r:  asr_R,R
\ ------------------------------------------------------------------------------
comment;











comment:
 
\ ------------------------------------------------------------------------------
  4380      10c3r3r:  RnR/
  4380      10c3r3r:  bic_R,R
\ ------------------------------------------------------------------------------
  e000        5c11#:  pc=#
  e000        5c11#:  jmp_#
\ ------------------------------------------------------------------------------
  be00         8c8#:  bkpt_#
\ ------------------------------------------------------------------------------

\ ------------------------------------------------------------------------------
  4780     9c1h3r3c:  blx_R
\ ------------------------------------------------------------------------------
  4700     9c1h3r3c:  bx_R
\ ------------------------------------------------------------------------------
  42c0      10c3r3c:  R+R,tst
  42c0      10c3r3c:  cmn_R,R
\ ------------------------------------------------------------------------------
  2800       5c3r8#:  R:#
  2800       5c3r8#:  cmp_R,#
\ ------------------------------------------------------------------------------
  4280      10c3r3r:  R:R'
  4280      10c3r3r:  cmp_R,R'

  4500     8c2h3r3r:  R:R~
  4500     8c2h3r3r:  cmp_R,R~

: R:R    over  0 7 between  over  0 7 between  and  if  R:R'  else   R:R~  then  ;
\ ------------------------------------------------------------------------------
  4040      10c3r3r:  eor_R,R
  4040      10c3r3r:  RxR
\ ------------------------------------------------------------------------------
  c800       5c3r8#:  pop_R,#
  c800       5c3r8#:  ldmia_R!,#


\ c800       5c3r8{}: ldm_R!,#
 

\ ------------------------------------------------------------------------------
  6800     5c5#3r3r:  R=(R+#)
  6800     5c5#3r3r:  ldr_R,(R+#)
\ ------------------------------------------------------------------------------
  5800     7c3r3r3r:  R=(R+R)
  5800     7c3r3r3r:  ldr_R,(R,R)
\ ------------------------------------------------------------------------------
  4800       5c3r8#:  R=(pc+#)
  4800       5c3r8#:  ldr_R,(pc+#)
\ ------------------------------------------------------------------------------
  9800       5c3r8#:  R=(rp+#)
  9800       5c3r8#:  ldr_R,(rp+#)
\ ------------------------------------------------------------------------------
  7800     5c5#3r3r:  R=(R+#)
  7800     5c5#3r3r:  ldrb_R,(R+#)
\ ------------------------------------------------------------------------------
  5c00     7c3r3r3r:  R=(R+R)b
  5c00     7c3r3r3r:  ldrb_R,(R+R)
\ ------------------------------------------------------------------------------
  8800     5c5#3r3r:  R=(R+#)
  8800     5c5#3r3r:  ldrh_R,(R+#)
\ ------------------------------------------------------------------------------
  5a00     7c3r3r3r:  R=(R+R)h
  5a00     7c3r3r3r:  ldrh_R,(R+R)
\ ------------------------------------------------------------------------------
  5600     7c3r3r3r:  R=(R+R)sb
  5600     7c3r3r3r:  ldrsb_R,(R+R)
\ ------------------------------------------------------------------------------
  5e00     7c3r3r3r:  R=(R+R)sh
  5e00     7c3r3r3r:  ldrsh_R,(R+R)
\ ------------------------------------------------------------------------------
  0000     5c5#3r3r:  R=R<<#
  0000     5c5#3r3r:  lsl_R,(R+#)
\ ------------------------------------------------------------------------------
  4080      10c3r3r:  R<<R
  4080      10c3r3r:  lsl_R,R
\ ------------------------------------------------------------------------------
  0800     5c5#3r3r:  R=R>>#
  0800     5c5#3r3r:  lsr_R,(R+#)
\ ------------------------------------------------------------------------------
  40c0      10c3r3r:  R>>R
  40c0      10c3r3r:  lsr_R,R
\ ------------------------------------------------------------------------------
  2000       5c3r8#:  R=#8
  2000       5c3r8#:  mov_R,#8
\ ------------------------------------------------------------------------------
  1c00      10c3r3r:  R=R'
  1c00      10c3r3r:  mov_R,R'

  2600     8c2h3r3r:  R=R~
  2600     8c2h3r3r:  mov_R,R~

: R=R    over  0 7 between  over  0 7 between  and  if  R=R'  else   R=R~  then  ;
\ ------------------------------------------------------------------------------
  4340      10c3r3r:  R*R
  4340      10c3r3r:  mul_R,R
\ ------------------------------------------------------------------------------
  43c0      10c3r3r:  R=R/
  43c0      10c3r3r:  mvn_R,R
\ ------------------------------------------------------------------------------
  4240      10c3r3r:  R=-R
  4240      10c3r3r:  neg_R,R
\ ------------------------------------------------------------------------------
  4300      10c3r3r:  RoR
  4300      10c3r3r:  orr_R,R
\ ------------------------------------------------------------------------------
\ : 7c1r8#:
  bc00         8c8#:  pop_#8
  bd00         8c8#:  pop_#8+pc
\ ------------------------------------------------------------------------------
\ : 7c1r8#:
  b400         8c8#:  push_#8
  b500         8c8#:  push_#8+pc
\ ------------------------------------------------------------------------------
  41c0      10c3r3r:  R>>R
  41c0      10c3r3r:  ror_R,R
\ ------------------------------------------------------------------------------
  4180      10c3r3r:  R-R-c
  4180      10c3r3r:  sbc_R,R
\ ------------------------------------------------------------------------------
  c000       5c3r8#:  push_R!
  c000       5c3r8#:  stmia_R!
\ ------------------------------------------------------------------------------
  6000     5c5#3r3r:  (R+#)=R
  6000     5c5#3r3r:  str_R,(R+#)
\ ------------------------------------------------------------------------------
  5000     7c3r3r3r:  (R+R)=R
  5000     7c3r3r3r:  str_R,(R+R)
\ ------------------------------------------------------------------------------
  9000       5c3r8#:  (rp+#8)=R
  9000       5c3r8#:  str_R,(rp+#8)
\ ------------------------------------------------------------------------------
  7000     5c5#3r3r:  (R+#)=R
  7000     5c5#3r3r:  strb_R,(R+#)
\ ------------------------------------------------------------------------------
  5400     7c3r3r3r:  (R+R)=R,b
  5400     7c3r3r3r:  strb_R,(R+R)
\ ------------------------------------------------------------------------------
  8000     5c5#3r3r:  (R+#)=R
  8000     5c5#3r3r:  strh_R,(R+#)
\ ------------------------------------------------------------------------------
  5200     7c3r3r3r:  (R+R)=R,h
  5200     7c3r3r3r:  strh_R,(R+R)
\ ------------------------------------------------------------------------------
  1e00     7c3#3r3r:  R-R-#
  1e00     7c3#3r3r:  sub_R,R,#
\ ------------------------------------------------------------------------------
  3800       5c3r8#:  R-#
  3800       5c3r8#:  sub_R,#
\ ------------------------------------------------------------------------------
  1a00     7c3r3r3r:  R=R-R
  1a00     7c3r3r3r:  sub_R,R,R
\ ------------------------------------------------------------------------------
  b080       9c7#*4:  rp-#
  b080       9c7#*4:  sub_rp-#
\ ------------------------------------------------------------------------------
  df00         8c8#:  swi_#
\ ------------------------------------------------------------------------------
  4200      10c3r3r:  RnR,tst
  4200      10c3r3r:  tst_R,R
\ ------------------------------------------------------------------------------

  ffffffff      32c:  undefined
  ffff          16c:  undefined

\ include  THUMB2disasm36.F

 


 
  |---------------32-------------| |--------20--------||---8---||--------------32--------------|
                                                                                                   1111111111111111111111111
          111111111222222222233333333334444444444455555555556666666666777777777788888888899999999990000000000111111111122222
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
  |---------------32-------------||---------24-----------||---8---||--------------32--------------|
: sub_R,R,#12_                     `5c#5cs4rc3#4r8#        F1A00000 = om? @ not if drop 0 exit then
  if (4            0b  8  12p           13 10 13p 1a 1a 0e 0c 7 0 34p                     3" sub_R,R,#12"       exit then 0 ;
  |-5-||-------20---------||--------20--------||--------20--------||--------20--------||---|------------32--------------|
                                                                                                   1111111111111111111111111
          111111111222222222233333333334444444444455555555556666666666777777777788888888899999999990000000000111111111122222
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234




                                                                                                   1111111111111111111111111
          111111111222222222233333333334444444444455555555556666666666777777777788888888899999999990000000000111111111122222
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
  |---------20-------||---------24-----------||---8---||--------------32--------------|                         |----14------|
: sub_R,R,#12_         `5c#5cs4rc3#4r8#        F1A00000 = om? @ not if drop 0 exit then
  if (4            0b  8  12p            13 10 13p 1a 1a 0e 0c 7 0 34p                     3" sub_R,R,#12"         exit then 0 ;
  |-5-||-------20---------||---------20--------||--------20--------||--------20--------||---|--------20--------||----14------|
                                                26~2623~2114~127~04                                                   1111111111111111111111111
          111111111222222222233333333334444444444455555555556666666666777777777788888888899999999990000000000111111111122222
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234








|---------------32-------------| |--------20--------||---8---||--------------32--------------|
                                                                                                   1111111111111111111111111
          111111111222222222233333333334444444444455555555556666666666777777777788888888899999999990000000000111111111122222
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234
: sub_R,R,#12_                     ?dup if + exit then \`5c#5cs4rc3#4r8#     F1A00000 = om? @ not if drop 0 exit then
\ if (4      0b  8  12p      13 10 13p      1a 1a 0e 0c 7 0 14p           3" sub_R,R,#12"              exit then 0 ;

comment;














































#then


                    :  rp+#     rp+#7     ;
                    :  call_r4  4 call_r  ;
                    :  T=R1     t 1 r=r   ;
                    :  r=(t)    t  r=(r)  ;
                    :  (t)=r    t  swap  (r)=r  ;

                    :  (r)=#/   0  swap  r=#/     0 (r)=r   ;
                    :  (t)=#/   t  swap             (r)=#/  ;
              \     :  (t)=#    t  swap             (r)=#   ;


z80?  @
#if   include  z80asem1.f       \s
#then

:   rcall_#24/call_r4    ( a' -- )  dup   here'  -   abs   7FFFFF   u> 
    if     4  swap  r=#    call_r4
    else                  rcall_#24
    then   ;


test.assembler? @          \ \s   \ to generate disassembler to use \s
#if                cls  include  THUMB2asm864y79d1.F
     
       quit


     cortex.m0? @  #if  include  cortex_M0.ASSEMBLER52.F                               #then     \s


#then


esp32?  @
#if
#else
\ : `16.op.code       ( a' op.code.mask -- a' op.code )  >r   dup  16@'  r>  and  ;
\ : `6c#c5#3r    dup  16@'  fd00  and  ;  ( a' -- a' op.code )

: 2,   swap  ,  ,  ;

: `(R+#)oR  ( a' -- a' 48.bit.op.code )     dup  64@' ( L H )  FFC0F8000000F800. ( f800fc000000f800. ) 2and ;
:  (R+#)oR:_gene   :.mnem_  ." `(R+#)oR" 2#=if6 ."  5  3 12p  0a 6 13p*4  2 0 14p .3" mnem" xt0 ;
:  (R+#)oR:_gene   :.mnem_  ." `(R+#)oR" 2#=if6 ." 15 13 12p  0a 6 13p*4  2 0 14p .3" mnem" xt0 ;
:  (R+#)oR:
   create   2dup  2,   (R+#)oR:_gene
   does>    ( r # r a )
   to (a)    3r.check  to (Rn)   5#*4.check  4 /  to (#)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (R?)    2  0  >?~?  +
   (#)    0a  6  >?~?  +
   (Rd)    5  3  >?~?  +   16,'                     \ 6800     R=(R+#5)_

   (a)    2+  16@  ( 2nd instruction's op.code )
   (R?)    2  0  >?~?  +
   (Rn)    5  3  >?~?  +   16,'                     \ 4300     RoR_

   (a)    4+  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R_

\  6000 ( L )  43006800 ( H )    ( 430068006000. )   (R+#)oR:  (R+#)oR


: `(R+#)nR  ( a' -- a' 48.bit.op.code )     dup  64@' ( L H )  FFC0F8000000F800. ( f800fc000000f800. ) 2and ;
:  (R+#)nR:_gene   :.mnem_  ." `(R+#)nR" 2#=if6 ." 15 13 12p  0a 6 13p*4  2 0 14p .3" mnem" xt0 ;
:  (R+#)nR:
   create   2dup  2,   (R+#)nR:_gene
   does>    ( r # r a )
   to (a)    3r.check  to (Rn)   5#*4.check  4 /  to (#)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (R?)    2  0  >?~?  +
   (#)    0a  6  >?~?  +
   (Rd)    5  3  >?~?  +   16,'                     \ 6800     R=(R+#5)_

   (a)    2+  16@  ( 2nd instruction's op.code )
   (R?)    2  0  >?~?  +
   (Rn)    5  3  >?~?  +   16,'                     \ 4000     RnR_

   (a)    4+  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R_

\  6000 ( L )  40006800 ( H )    ( 430068006000. )   (R+#)nR:  (R+#)nR


: `(R+#)xR  ( a' -- a' 48.bit.op.code )     dup  64@' ( L H )  FFC0F8000000F800. ( f800fc000000f800. ) 2and ;
:  (R+#)xR:_gene   :.mnem_  ." `(R+#)xR" 2#=if6 ." 15 13 12p  0a 6 13p*4  2 0 14p .3" mnem" xt0 ;
:  (R+#)xR:
   create   2dup  2,   (R+#)xR:_gene
   does>    ( r # r a )
   to (a)    3r.check  to (Rn)   5#*4.check  4 /  to (#)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (R?)    2  0  >?~?  +
   (#)    0a  6  >?~?  +
   (Rd)    5  3  >?~?  +   16,'                     \ 6800     R=(R+#5)_

   (a)    2+  16@  ( 2nd instruction's op.code )
   (R?)    2  0  >?~?  +
   (Rn)    5  3  >?~?  +   16,'                     \ 4040     RxR_

   (a)    4+  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R_

\  6000 ( L )  40406800 ( H )    ( 404068006000. )   (R+#)xR:  (R+#)xR

: 3=     ( n1 n2 n3 -- f )   over  =  >r  =  r>  and  ;
: 3<>    ( n1 n2 n3 -- f )   3=   not  ;
: ?~?>'  ( a' n1 n2 -- n3 )  max.min  >r  1f swap  -  >r  16@'  r@  lshift  2r> +   rshift  ;

: (R+#)oR_  ( a' -- a' )   >r
  r@      `5C5#3R3R*4   6800  <>  if  drop  r>  exit  then  drop  \  R=(R+#5)
  r@  2+  `10C3R3R      4300  <>  if  drop  r>  exit  then  drop  \  RoR
  r@  4+  `5C5#3R3R*4'  6000  <>  if  drop  r>  exit  then  drop  \  (R+#5)=R
  r@   2 0  ?~?>'   r@ 2+  2 0 ?~?>'        r@ 4+   2 0  ?~?>'    3<>   if  r>  exit  then
  r@   5 3  ?~?>'                           r@ 4+   5 3  ?~?>'     <>   if  r>  exit  then
  r@  0a 6  ?~?>'                           r@ 4+  0a 6  ?~?>'     <>   if  r>  exit  then
  r@   5 3  ?~?>'  2p  r@ 0a 6 ?~?>' 4* 3p  r@ 2+   5 3  ?~?>'  4p   ." (R+#)oR "     r>  6   +  ;
 


: 0~15  ( n -- d )              0         ;
: 16~31 ( n -- d )  10  lshift  0         ;
: 32~47 ( n -- d )              0  swap   ;
: 48~63 ( n -- d )  10  lshift  0  swap   ;


: split  ( n -- L H )   0  10000  UM/MOD  ;

: `(R+#)o# ( a' -- a' 64.bit.op.code )      dup>r
  r@      `5C5#3R3R*4        nip            32~47
  r@ 2+   `5C#5CS4RC3#4R8#   nip  split >r  48~63  d+   r> 0~15  d+
  r> 6 +  `5C5#3R3R*4'       nip            16~31  d+   ;

\ \ -------------------------------------------------------------------------------
\                                   t:  ADC_POWER_ON   ( -- )                                 \ cfa=     E45C
\ (  0000E45C  02 4C             )                              4     0E468    R=(pc+#8)        \ (0000E468)=40043000
\
\ (  0000E45E  20 6C             )                    0         4        40    R=(R+#5)     \ 31~47
\ (  0000E460  40 F0 01 00       )                    0         0         1    R=Ro#        \ 48~63   0~15
\ (  0000E464  20 64             )                    4        40         0    (R+#5)=R     \ 16~31
\
\ (  0000E466  70 47             )                                       0E    jmp_R
\ (  0000E468  00 30 04 40       )           data:  40043000             \ from     E45C
          
: 13p*4.a+2   13p*4   (a') 2 +  to (a')  ;

: `(R+#)o#  ( a' -- a' 64.bit.op.code )     dup  64@' ( L H )  FBE0F800F8008000. ( F8008000F800FBE0. ) 2and  ;
:  (R+#)o#:_gene  :.mnem_  ." `(R+#)o#" 2#=if8 ." 5 3 12p,2  0a 6 13p*4.a+2 1A 1A 0E 0C 7 0 34P138,4 .3" mnem" xt0 ;

:  (R+#)o#:
   create   2dup  2,   (R+#)o#:_gene
   does>    ( r # #' a )
   to (a)   12#.check  to (#)'   5#*4.check  4 /  to (#)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (R?)    2  0  >?~?  +
   (#)    0a  6  >?~?  +
   (Rd)    5  3  >?~?  +   16,'
\                                                   \ 4.6.43 LDR (immediate)   R0=(R4+40)      R?=(R4+10*4)
\                                                   \ 6800      R=(R+#5)_
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\                                                   \  0  1  1  0  1 ***imm5*** *Rn** *Rt**     F800  32~47

   (a)    2+  32@  ( 2nd instruction's op.code )
   (R?)   13 10  >?~?  +
   (R?)   0b  8  >?~?  +
   (#)'   1a 1a 0e 0c 7 0 >?~?+?~?+?~?  +   32,^

\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0  \ F0400000  F040 48~63  0000 0~15  op.code
\  1  1  1  1  0  i 0 0 0 1 0 S **Rn***  0 **imm3** ****Rd*** ****imm8*******  \ FBE00000  FBE0 48~63  8000 0~15  mask
                                                                               \ FBE00000  FBE0  0~15  8000 48~63 ???????

\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31  mask
   (a)   6 +  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (R?)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000      (R+#5)=R_

\  0 to. (R?)   ( 6800 32~47    F040 16~31   0000 0~15   6000 48~63 )  60000000F0406800.  (R+#)o#:   (R+#)o#  ????
\  0 to. (R?)   ( 6800 32~47    F040 16~31   0000 0~15   6000 48~63 )  F040680060000000.  (R+#)o#:   (R+#)o#  ????

\  0 to. (R?)   ( 6800  0~15    F040 16~31   0000 32~47  6000 48~63 )  60000000F0406800.  (R+#)o#:   (R+#)o#  ok


















: `(R+#)x#  ( a' -- a' 64.bit.op.code )     dup  64@' ( L H )  FBE0F800F8008000. ( F8008000F800FBE0. ) 2and  ;
:  (R+#)x#:_gene  :.mnem_  ." `(R+#)x#" 2#=if8 ." 5 3 12p,2  0a 6 13p*4.a+2 1A 1A 0E 0C 7 0 34P138,4 .3" mnem" xt0 ;
:  (R+#)x#:
   create   2dup  2,   (R+#)x#:_gene
   does>    ( r # #' a )
   to (a)   12#.check  to (#)'   5#*4.check  4 /  to (#)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (R?)    2  0  >?~?  +
   (#)    0a  6  >?~?  +
   (Rd)    5  3  >?~?  +   16,'
\                                                   \ 4.6.43 LDR (immediate)   R0=(R4+40)      R?=(R4+10*4)
\                                                   \ 6800      R=(R+#5)_
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\                                                   \  0  1  1  0  1 ***imm5*** *Rn** *Rt**     6800  op.code.of.R=(R+#5)
\                                                   \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0     F800     mask.of.R=(R+#5)
   (a)    2+  32@  ( 2nd instruction's op.code )
   (R?)   13 10  >?~?  +
   (R?)   0b  8  >?~?  +
   (#)'   1a 1a 0e 0c 7 0 >?~?+?~?+?~?  +   32,^

\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0  \ F0400000  F040 48~63  0000 0~15  op.code
\  1  1  1  1  0  i 0 0 0 1 0 S **Rn***  0 **imm3** ****Rd*** ****imm8*******  \ FBE00000  FBE0 48~63  8000 0~15  mask
                                                                               \ FBE00000  FBE0  0~15  8000 48~63 ???????

\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code.of.(R+#5)=R
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31     mask.of.(R+#5)=R
   (a)   6 +  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (R?)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000      (R+#5)=R

\  0 to. (R?)   ( 6800 32~47    F040 16~31   0000 0~15   6000 48~63 )  60000000F0406800.  (R+#)o#:   (R+#)o#  ????
\  0 to. (R?)   ( 6800 32~47    F040 16~31   0000 0~15   6000 48~63 )  F040680060000000.  (R+#)o#:   (R+#)o#  ????

\  0 to. (R?)   ( 6800  0~15    F040 16~31   0000 32~47  6000 48~63 )  60000000F0406800.  (R+#)o#:   (R+#)o#  ok



























: `(R+#)n#  ( a' -- a' 64.bit.op.code )     dup  64@' ( L H )  FBE0F800F8008000. ( F8008000F800FBE0. ) 2and  ;
:  (R+#)n#:_gene
   :.mnem_  ." `(R+#)n#" 2#=if8 ." 5 3 12p,2  0a 6 13p*4.a+2 1A 1A 0E 0C 7 0 34P138,4 .3" mnem" xt0 ;

:  (R+#)n#:
   create   2dup  2,   (R+#)n#:_gene
   does>    ( r # #' a )
   to (a)   12#.check  to (#)'   5#*4.check  4 /  to (#)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (R?)    2  0  >?~?  +
   (#)    0a  6  >?~?  +
   (Rd)    5  3  >?~?  +   16,'
\                                                   \ 4.6.43 LDR (immediate)   R0=(R4+40)      R?=(R4+10*4)
\                                                   \ 6800      R=(R+#5)_
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\                                                   \  0  1  1  0  1 ***imm5*** *Rn** *Rt**     F800  32~47

   (a)    2+  32@  ( 2nd instruction's op.code )
   (R?)   13 10  >?~?  +
   (R?)   0b  8  >?~?  +
   (#)'   1a 1a 0e 0c 7 0 >?~?+?~?+?~?  +   32,^

\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0  \ F0400000  F040 48~63  0000 0~15  op.code
\  1  1  1  1  0  i 0 0 0 1 0 S **Rn***  0 **imm3** ****Rd*** ****imm8*******  \ FBE00000  FBE0 48~63  8000 0~15  mask
                                                                               \ FBE00000  FBE0  0~15  8000 48~63 ???????

\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31  mask
   (a)   6 +  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (R?)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000      (R+#5)=R_

\  0 to. (R?)   ( 6800 32~47    F040 16~31   0000 0~15   6000 48~63 )  60000000F0406800.  (R+#)o#:   (R+#)o#  ????
\  0 to. (R?)   ( 6800 32~47    F040 16~31   0000 0~15   6000 48~63 )  F040680060000000.  (R+#)o#:   (R+#)o#  ????

\  0 to. (R?)   ( 6800  0~15    F040 16~31   0000 32~47  6000 48~63 )  60000000F0406800.  (R+#)o#:   (R+#)o#  ok
\  0 to. (R?)   ( 6800  0~15    F000 16~31   0000 32~47  6000 48~63 )  60000000F0006800.  (R+#)n#:   (R+#)n#  ok
\  0 to. (R?)   ( 6800  0~15    F080 16~31   0000 32~47  6000 48~63 )  60000000F0806800.  (R+#)x#:   (R+#)x#  ok




\ T1 ANDS <Rdn>,<Rm> Outside IT block.
\ AND<c> <Rdn>,<Rm> Inside IT block.
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  0  1  0  0  0  0 0 0 0 0 **Rm* *Rdn*     4000

\  (  0000E438  11 40             )                  R1nR2
\  (  0000E43A  19 43             )                  R1oR3

\ 4.6.92 ORR (register)
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  0  1  0  0  0  0 1 1 0 0 **Rm* *Rdn*     4300


: `RnRoR  ( a' -- a' 32.bit.op.code )     dup  32@'  FFC0FFC0  and  ;
:  RnRoR:_gene   :.mnem_  ." `RnRoR" #=if4 ." 2 0 12p  5 3 13p  15 13 14p .3" mnem" xt0 ;
:  RnRoR:
   create   dup  ,   RnRoR:_gene
   does>    ( Rd Rm Rn a )     \  ( Rd Rm a )    ( Rd Rn a )
   to (a)    3r.check  to (Rn)   3r.check  to (Rm)    3r.check  to (Rd)
   (a)        16@  ( 1st instruction's op.code )
   (Rd)    2  0  >?~?  +
   (Rm)    5  3  >?~?  +   16,'                     \ 6800     RnR

   (a)    2+  16@  ( 2nd instruction's op.code )
   (Rd)    2  0  >?~?  +
   (Rn)    5  3  >?~?  +   16,'                     \ 4300     RoR

   all.ok?.off  ;

\  43004000 ( 6800 )  RnRoR:  RnRoR
























\ 4.6.92 ORR (register)
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  0  1  0  0  0  0 1 1 0 0 **Rm* *Rdn*     4300
\
\ L:  CLK_SetHCLK
\  (  00000664  52 4A             )                  R2=40000240                                 \ (000007B0)=40000240
\  (  00000666  30 3A             )                  R2-30
\                                                                  \  (R2+10)n0F/oR1
\  (  00000668  13 69             )                  R3=(R2+10)    \  ( R? Rd #1 a )
\  (  0000066A  23 F0 0F 03       )                  R3=R3n0F/     \  ( R? R? #2 a )
\  (  0000066E  0B 43             )                  R3oR1         \  ( R? Rn a    )
\  (  00000670  13 61             )                  (R2+10)=R3    \  ( Rd #1 R? a )
\
\  (  00000672  11 68             )                  R1=(R2+0)     \  (R2+0)n7/oR0    (R2)n7/oR0
\  (  00000674  21 F0 07 01       )                  R1=R1n7/
\  (  00000678  01 43             )                  R1oR0
\  (  0000067A  11 60             )                  (R2+0)=R1
\
\  (  0000067C  FF F7 14 BE       )                  jmp_2A8
\
\ 4.6.43 LDR (immediate)
\  T1 LDR<c> <Rt>, [<Rn>, #<imm>]
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  0  1  1  0  1 ***imm5*** **Rn* **Rt*

\ T1 AND{S}<c> <Rd>,<Rn>,#<const>
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  1  1  1  1  0  i 0 0 0 0 0 S **Rn***  0 **imm3** ***Rd**** ****imm8*******   \ F0000000

\ T1 BIC{S}<c> <Rd>,<Rn>,#<const>
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  1  1  1  1  0  i 0 0 0 0 1 S ***Rn**  0 **imm3** ***Rd**** *****imm8******   \ F0200000
:  80@'  ( a' -- dL dH )  dup>r  64@' ( H )   r>  8 +  16@'  0  ( L ) ;  \ dL dH === 128bit
:  96@'  ( a' -- dL dH )  dup>r  64@' ( H )   r>  8 +  32@'  0  ( L ) ;  \ dL dH === 128bit
: 112@'  ( a' -- dL dH )  dup>r  64@' ( H )   r>  8 +  48@'     ( L ) ;  \ dL dH === 128bit
: 128@'  ( a' -- dL dH )  dup>r  64@' ( H )   r>  8 +  64@'     ( L ) ;  \ dL dH === 128bit

:  80@'  ( a' -- dL dH )  dup>r  8 +  16@'  0  ( L )  r>  64@' ( H )  ;  \ dL dH === 128bit  q  quad
:  96@'  ( a' -- dL dH )  dup>r  8 +  32@'  0  ( L )  r>  64@' ( H )  ;  \ dL dH === 128bit  q
: 112@'  ( a' -- dL dH )  dup>r  8 +  48@'     ( L )  r>  64@' ( H )  ;  \ dL dH === 128bit  q
: 128@'  ( a' -- dL dH )  dup>r  8 +  64@'     ( L )  r>  64@' ( H )  ;  \ dL dH === 128bit  q

:  80@'  ( a' -- dL dH )  dup>r  32@' ( L1 )  r@  4+  32@' ( H1 )  r> 8 + 16@' ( L2 )            0   ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------


:  96@'  ( a' -- dL dH )  dup>r  32@' ( L1 )  r@  4+  32@' ( H1 )  r> 8 + 32@' ( L2 )            0   ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------



: 112@'  ( a' -- dL dH )  dup>r  32@' ( L1 )  r@  4+  32@' ( H1 )  r@ 8 + 32@' ( L2 )  r> 0c + 16@'  ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------



: 128@'  ( a' -- dL dH )  dup>r  32@' ( L1 )  r@  4+  32@' ( H1 )  r@ 8 + 32@' ( L2 )  r> 0c + 32@'  ( H2 ) ;   \ dL dH === 128bit
\                         ------------------ dL -----------------  -------------- dH ----------------------


\  4and  ( dL1 dH1 dL2 dH2 -- dL dH )   2>r  2rot  2and  2swap  2r>  2and  ;
:  4xor  ( dL1 dH1 dL2 dH2 -- dL dH )        2rot  2xor  2>r  2xor  2r>  ;
:  4or   ( dL1 dH1 dL2 dH2 -- dL dH )        2rot  2or   2>r  2or   2r>  ;
:  4and  ( dL1 dH1 dL2 dH2 -- dL dH )        2rot  2and  2>r  2and  2r>  ;

: `(R+#)n#/oR  ( a' -- a' 80.bit.op.code )     dup  80@' ( dL dH )  FFC0F8000000F800.  6000.  4and ;

: `(R+#)n#/oR  ( a' -- a' 80.bit.op.code )     dup  80@' ( dL dH )  6000.  FFC0F8000000F800.  4and ;
:  (R+#)n#/oR:_gene :.mnem_  ." `(R+#)n#/oR" 4#=if10 ." 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p .4" mnem" xt0 ;
:  (R+#)n#/oR:
   create   2over  2,  2over  2,  (R+#)n#/oR:_gene
   does>    ( Rd #1 #2 Rn a )  \ ( R? Rd #1 a )  ( R? R? #2 a )  ( R? Rn a )  ( Rd #1 R? a )
   to (a)    3r.check  to (Rn) \ 12#.check  to (#2)  5#*4.check  4 /  to (#1)    3r.check  to (Rd)

                                                    \ T1    LDR<c> <Rt>, [<Rn>, #<imm>]
   (a)        16@  ( 1st instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (R?)    2  0  >?~?  +                            \  0  1  1  0  1 ***imm5*** **Rn* **Rt*    6800  op.code
   (Rd)    5  3  >?~?  +        \ 11p               \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask
   (#1)   0a  6  >?~?  +  16,'  \ 12p*4             \ 6800      R=(R+#5)


                                                    \ T1     BIC{S}<c> <Rd>,<Rn>,#<const>
   (a)   2 +  32@  ( 2nd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (R?)   0b  8  >?~?  +                            \  1  1  1  1  0  i 0 0 0 0 1 S **Rn***  0 **imm3** ***Rd**** *****imm8******   F0200000  op.code
   (R?)   13 10  >?~?  +                            \  1  1  1  1  1  0 1 1 1 1 1 0 0 0 0 0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0   FBE00000  mask
   (#2)   1a 1a 0e 0c 7 0  >?~?+?~?+?~?  +  32,^    \ F0200000  Rn#/     BIC{S}<c> <Rd>,<Rn>,#<const>


   (a)   6 +  16@  ( 3rd instruction's op.code )
   (R?)    2  0  >?~?  +
   (Rn)    5  3  >?~?  +   16,'                     \ 4300      RoR


   (a)   8 +  16@  ( 4th instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#1)   0a  6  >?~?  +
   (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R

\  6000. ( L )  43000000f0206800. ( H )    (R+#)n#/oR:  (R+#)n#/oR







:  LDR<c><Rt>,[<Rn>,#<imm>]                         \ T1    LDR<c> <Rt>, [<Rn>, #<imm>]
   (a)        16@  ( 1st instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (Rd)    2  0  >?~?  +                            \  0  1  1  0  1 ***imm5*** **Rn* **Rt*    6800  op.code
   (Rn)    5  3  >?~?  +          \ 11p             \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask
   (#1)   0a  6  >?~?  +  16,' ;  \ 12p*4           \ 6800      R=(R+#5)


:  LDR<c><Rt>,[PC,#<imm>]                           \ T1    LDR<c> <Rt>,[PC,#<imm>]
   (a)        16@                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (Rd)   0a  8  >?~?  +                            \  0  1  0  0  1 **Rt** *****imm8******    4800  op.code
   (#1)    7  0  >?~?  +  16,' ;    \ ?p*4          \ 6800      R=(R+#5)
                                                    \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask












:  BIC{S}<c><Rd>,<Rn>,#<const>                      \ T1     BIC{S}<c> <Rd>,<Rn>,#<const>
   (a)   2 +  32@  ( 2nd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (Rd)   0b  8  >?~?  +                            \  1  1  1  1  0  i 0 0 0 0 1 S **Rn***  0 **imm3** ***Rd**** *****imm8******   F0200000  op.code
   (Rn)   13 10  >?~?  +                            \  1  1  1  1  1  0 1 1 1 1 1 0 0 0 0 0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0   FBE00000  mask
   (#2)   1a 1a 0e 0c 7 0  >?~?+?~?+?~?  +  32,^  ; \ F0200000  Rn#/     BIC{S}<c> <Rd>,<Rn>,#<const>


:  AND{S}<c><Rd>,<Rn>,#<const>                      \ T1     AND{S}<c> <Rd>,<Rn>,#<const>
   (a)   2 +  32@  ( 2nd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (Rd)   0b  8  >?~?  +                            \  1  1  1  1  0  i 0 0 0 0 0 S **Rn***  0 **imm3** ***Rd**** *****imm8******   F0000000  op.code
   (Rn)   13 10  >?~?  +                            \  1  1  1  1  1  0 1 1 1 1 1 0 0 0 0 0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0   FBE00000  mask
   (#2)   1a 1a 0e 0c 7 0  >?~?+?~?+?~?  +  32,^  ; \ F0200000  Rn#/     BIC{S}<c> <Rd>,<Rn>,#<const>





:  ORRS<Rdn>,<Rm>                                   \ T1  ORRS <Rdn>,<Rm>
   (a)   6 +  16@  ( 3rd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (Rd)    2  0  >?~?  +                            \  0  1  0  0  0  0 1 1 0 0 **Rm* *Rdn*      4300  op,code
   (Rn)    5  3  >?~?  +   16,'  ;                  \  1  1  1  1  1  1 1 1 1 1 0 0 0 0 0 0      FFC0     mask    4300      RoR






:  AND<c><Rdn>,<Rm>                                 \ T1  ORRS <Rdn>,<Rm>
   (a)   6 +  16@  ( 3rd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
   (Rd)    2  0  >?~?  +                            \  0  1  0  0  0  0 0 0 0 0 **Rm* *Rdn*      4000  op,code
   (Rn)    5  3  >?~?  +   16,'  ;                  \  1  1  1  1  1  1 1 1 1 1 0 0 0 0 0 0      FFC0     mask    4300      RoR



\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \         STR<c> <Rt>,[<Rn>,#<imm>]
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code.of.(R+#5)=R
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31     mask.of.(R+#5)=R
:  STR<c><Rt>,[<Rn>,#<imm>]
   (a)   6 +  16@  ( 3rd instruction's op.code )
   (Rd)    5  3  >?~?  +
   (#)    0a  6  >?~?  +
   (R?)    2  0  >?~?  +   16,'  ;  \ 6000      (R+#5)=R

0  value  (a)*
0  value  (a')*
0  value  (Rd)*
0  value  (Rm)*
0  value  (Rn)*
0  value  (R?)*      0  value  (R??)*
0  value  (#1)*
0  value  (#2)*












\                                    L:  CLK_SetHCLK
\  (  00000664  52 4A             )                  R2=40000240                                 \ (000007B0)=40000240
\  (  00000666  30 3A             )                  R2-30

\  (  00000668  13 69             )                  R3=(R2+10)
\  (  0000066A  23 F0 0F 03       )                  R3=R3n0F/
\  (  0000066E  0B 43             )                  R3oR1
\  (  00000670  13 61             )                  (R2+10)=R3     \ (R2+10)n0F/oR1

\  (  00000672  11 68             )                  R1=(R2+0)
\  (  00000674  21 F0 07 01       )                  R1=R1n7/
\  (  00000678  01 43             )                  R1oR0
\  (  0000067A  11 60             )                  (R2+0)=R1      \ (R2+0)n7/oR0

\  (  0000067C  FF F7 14 BE       )                  jmp_2A8

\ 00000668 10 dump'
\  668  13 69   23 F0 0F 03   0B 43    13 61
\  672  11 68   21 F0 07 01   01 43    11 60
\       **0**   *****1*****   **2**    **3**
\       >0,2    >2,4          >6,2     >8,2    >mask
\                                              >op.code
\
create    <mask>       20  allot
create    <op.code>    20  allot
variable  len.of.op.code/mask

: >?,2  ( op.code  mask  to  -- )  dup>r  <mask>  +  16!    r>  <op.code>  +  16!  ;
: >?,4  ( op.code  mask  to  -- )  dup>r  <mask>  +  32!    r>  <op.code>  +  32!  ;
\      6800      F800    0  >?,2
\  F0200000  FBE00000    2  >?,4
\      4300      FFC0    6  >?,2
\      6000      F800    8  >?,2     0A  len.of.op.code/mask  !

:  get.op.code  ( -- d / n )  <op.code>  len.of.op.code/mask  @
   case    2  of  32@  endof
           4  of  32@  endof
           6  of  48@  endof
           8  of  64@  endof
          0a  of  80@  endof
          0c  of  96@  endof
          0e  of 112@  endof
          10  of 128@  endof
          -1 abort"  ***** invalid length of op.code *****"
   endcase   ;

:  get.mask     ( -- d / n )  <mask>     len.of.op.code/mask  @
   case    2  of  32@  endof
           4  of  32@  endof
           6  of  48@  endof
           8  of  64@  endof
          0a  of  80@  endof
          0c  of  96@  endof
          0e  of 112@  endof
          10  of 128@  endof
          -1 abort"  ***** invalid length of mask *****"
   endcase   ;

\ : 2and  ( d1 d2 -- d )    rot   and   >r   and   r>  ;   \  L1  H1  L2  H2
\ : 4and  ( q1 q2 -- q )   2rot  2and  2>r  2and  2r>  ;   \ dL1 dH1 dL2 dH2

\      6800      F800    0  >?,2
\  F0200000  FBE00000    2  >?,4
\      4300      FFC0    6  >?,2
\      6000      F800    8  >?,2     0A  len.of.op.code/mask  !

:  ^^  ( 12345678 -- 56781234 )   dup  10  rshift  >r    10 lshift   r>  or  ;
\                                          op.code     mask
2variable  op.code+mask.of.R=(R+#5)          6800        F800     op.code+mask.of.R=(R+#5)  2!
2variable  op.code+mask.of.R=Rn#/        F0200000 ^^ FBE00000 ^^  op.code+mask.of.R=Rn#/    2!
2variable  op.code+mask.of.RoR               4300        FFC0     op.code+mask.of.RoR       2!
2variable  op.code+mask.of.(R+#5)=R          6000        F800     op.code+mask.of.(R+#5)=R  2!


\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0      \ op.code  4000
\  0  1  0  0  0  0 0 0 0 0 **Rm* *Rdn*      \    mask  FFC0
2variable  op.code+mask.of.RnR               4000        FFC0     op.code+mask.of.RnR       2!

\ T1 LDR<c> <Rt>,[PC,#<imm>]
\ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0      \ op.code   4800
\  0  1  0  0  1 **Rt** *****imm8******      \    mask   F800
2variable  op.code+mask.of.R=#32             4800        F800     op.code+mask.of.R=#32     2!
\ :  LDR<c><Rt>,[PC,#<imm>]

: `(R+#)n#/oR  ( a' -- a' 80.bit.op.code )   dup  80@' ( dL dH )
      6800         F800            0  >?,2                                                   \ R3=(R2+10)   R?=(R+#5)
  F0200000 ^^  FBE00000 ^^         2  >?,4                                                   \ R3=R3n0F/    R?=R?n#/
      4300         FFC0            6  >?,2                                                   \ R3oR1        R?oR
      6000         F800            8  >?,2   0A  len.of.op.code/mask  !   get.mask  4and  ;  \ (R2+10)=R3   (R+#5)=R?


: `(R+#)n#/oR  ( a' -- a' 80.bit.op.code )   dup  80@' ( dL dH )
   op.code+mask.of.R=(R+#5)  2@    0  >?,2                                                   \ R3=(R2+10)   R?=(R+#5)
   op.code+mask.of.R=Rn#/    2@    2  >?,4                                                   \ R3=R3n0F/    R?=R?n#/
   op.code+mask.of.RoR       2@    6  >?,2                                                   \ R3oR1        R?oR
   op.code+mask.of.(R+#5)=R  2@    8  >?,2   0A  len.of.op.code/mask  !   get.mask  4and  ;  \ (R2+10)=R3   (R+#5)=R?


\ `(R+#)n#/oR  ( a' -- a' 80.bit.op.code )     dup  80@' ( dL dH )  6000.  FFC0F8000000F800.  4and ;
:  (R+#)n#/oR:_gene  :.mnem_  ." `(R+#)n#/oR" 4#=if10 ." 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p,2 .4" mnem" xt0 ;
:  (R+#)n#/oR:
   create   2over  2,  2over  2,  (R+#)n#/oR:_gene
   does>    ( Rd #1 #2 Rn a )  \ ( R? Rd #1 a )  ( R? R? #2 a )  ( R? Rn a )  ( Rd #1 R? a )
   to (a)*    3r.check  to (Rn)* \ 12#.check  to (#2)*  5#*4.check  4 /  to (#1)*    3r.check  to (Rd)*

   (R?)*  to  (Rd)    (Rd)*  to  (Rn)
   LDR<c><Rt>,[<Rn>,#<imm>]           \  >0~1
\                                                   \ T1    LDR<c> <Rt>, [<Rn>, #<imm>]
\  (a)        16@  ( 1st instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)    2  0  >?~?  +                            \  0  1  1  0  1 ***imm5*** **Rn* **Rt*    6800  op.code
\  (Rn)    5  3  >?~?  +        \ 11p               \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask
\  (#1)   0a  6  >?~?  +  16,'  \ 12p*4             \ 6800      R=(R+#5)      R?=(Rd+#5)


   (R?)*  to  (Rd)    (R?)*  to  (Rn)
   BIC{S}<c><Rd>,<Rn>,#<const>        \  >2~5
\                                                   \ T1     BIC{S}<c> <Rd>,<Rn>,#<const>
\  (a)   2 +  32@  ( 2nd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)   0b  8  >?~?  +                            \  1  1  1  1  0  i 0 0 0 0 1 S **Rn***  0 **imm3** ***Rd**** *****imm8******   F0200000  op.code
\  (Rn)   13 10  >?~?  +                            \  1  1  1  1  1  0 1 1 1 1 1 0 0 0 0 0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0   FBE00000  mask
\  (#2)   1a 1a 0e 0c 7 0  >?~?+?~?+?~?  +  32,^    \ F0200000  R=Rn#/    R?=R?n#/   BIC{S}<c> <Rd>,<Rn>,#<const>




\                                                   \ T1  ORRS <Rdn>,<Rm>
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\                                                   \  0  1  0  0  0  0 1 1 0 0 **Rm* *Rdn*   \  4300  op.code                                                                                               \  FFC0  mask
   (R?)*  to  (Rd)    (Rn)*  to  (Rn)
   ORRS<Rdn>,<Rm>                     \  >6~7
\  (a)   6 +  16@  ( 3rd instruction's op.code )
\  (Rd)    2  0  >?~?  +
\  (Rn)    5  3  >?~?  +   16,'                     \ 4300      RoR



\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \         STR<c> <Rt>,[<Rn>,#<imm>]
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code.of.(R+#5)=R
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31     mask.of.(R+#5)=R
   (Rd)*  to  (Rd)    (R?)*  to  (Rn)
   STR<c><Rt>,[<Rn>,#<imm>]           \  >8~9
\  (a)   8 +  16@  ( 4th instruction's op.code )
\  (Rd)    5  3  >?~?  +
\  (#1)   0a  6  >?~?  +
\  (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R
                                    all.ok?.off  ;

\  6000. ( L )  43000000f0206800. ( H )    (R+#)n#/oR:  (R+#)n#/oR

      6800      F800    0  >?,2
  F0200000  FBE00000    2  >?,4
      4300      FFC0    6  >?,2
      6000      F800    8  >?,2     0A  len.of.op.code/mask  !
                           get.op.code     (R+#)n#/oR:  (R+#)n#/oR







 




























\  (  0000E434  41 6C             )                    1?        0        44    R=(R+#5)         \  40043044
\  (  0000E436  03 4A             )                              2??   0E444    R=(pc+#8)        \ (0000E444)=FFFCF000
\  (  0000E438  11 40             )                              1?        2??  RnR
\  (  0000E43A  19 43             )                              1?        3    RoR
\  (  0000E43C  41 64             )                    0        44         1?   (R+#5)=R         \  40043044


: `(R+#)n#32oR  ( a' -- a' 80.bit.op.code )     dup  80@' ( dL dH )
   op.code+mask.of.R=(R+#5)  2@    0  >?,2                                                   \ R1=(R0+44)   R?=(R+#5)
   op.code+mask.of.R=#32     2@    2  >?,2                                                   \ R2=FFFCF000  R%=#32
   op.code+mask.of.RnR       2@    4  >?,2                                                   \ R1nR2        R?nR%
   op.code+mask.of.RoR       2@    6  >?,2                                                   \ R1oR3        R?oR
   op.code+mask.of.(R+#5)=R  2@    8  >?,2   0A  len.of.op.code/mask  !   get.mask  4and  ;  \ (R0+44)=R3   (R+#5)=R?


:  (R+#)n#32oR:_gene  :.mnem_  ." `(R+#)n#32oR" 4#=if10 ." 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p,2 .4" mnem" xt0 ;
:  (R+#)n#32oR:
   create   2over  2,  2over  2,  (R+#)n#32oR:_gene
   does>    ( Rd #1 #2 Rn a )  \ ( R? Rd #1 a )  ( R? R? #2 a )  ( R? Rn a )  ( Rd #1 R? a )
   to (a)*    3r.check  to (Rn)* \ 12#.check  to (#2)*  5#*4.check  4 /  to (#1)*    3r.check  to (Rd)*

   (R?)*  to  (Rd)    (Rd)*  to  (Rn)
   LDR<c><Rt>,[<Rn>,#<imm>]           \  >0~1       \ T1    LDR<c> <Rt>, [<Rn>, #<imm>]
\  (a)        16@  ( 1st instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)    2  0  >?~?  +                            \  0  1  1  0  1 ***imm5*** **Rn* **Rt*    6800  op.code
\  (Rn)    5  3  >?~?  +        \ 11p               \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask
\  (#1)   0a  6  >?~?  +  16,'  \ 12p*4             \ 6800      R=(R+#5)      R?=(Rd+#5)


   (R??)* to  (Rd)  \ (Rd)*  to  (Rn)
   LDR<c><Rt>,[PC,#<imm>]             \ >2~3        \ T1    LDR<c> <Rt>,[PC,#<imm>]
\  (a)        16@                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)   0a  8  >?~?  +                            \  0  1  0  0  1 **Rt** *****imm8******    4800  op.code
\  (#1)    7  0  >?~?  +  16,' ;      \ ?p*4        \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask



   (R?)*  to  (Rd)    (R??)*  to  (Rn)              \  T1   AND<c> <Rdn>,<Rm>
   AND<c><Rdn>,<Rm>                                 \  15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0   4000  op,code
                                                    \   0  1  0  0  0  0 0 0 0 0 **Rm* *Rdn*   FFC0     mask





\  (R?)*  to  (Rd)    (R?)*  to  (Rn)
\  AND{S}<c><Rd>,<Rn>,#<const>        \  >2~5
\                                                   \ T1     AND{S}<c> <Rd>,<Rn>,#<const>
\  (a)   2 +  32@  ( 2nd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)   0b  8  >?~?  +                            \  1  1  1  1  0  i 0 0 0 0 0 S **Rn***  0 **imm3** ***Rd**** *****imm8******   F0000000  op.code
\  (Rn)   13 10  >?~?  +                            \  1  1  1  1  1  0 1 1 1 1 1 0 0 0 0 0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0   FBE00000  mask
\  (#2)   1a 1a 0e 0c 7 0  >?~?+?~?+?~?  +  32,^    \ F0200000  R=Rn#     R?=R?n#    AND{S}<c> <Rd>,<Rn>,#<const>







\                                                   \ T1  ORRS <Rdn>,<Rm>
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\                                                   \  0  1  0  0  0  0 1 1 0 0 **Rm* *Rdn*   \  4300  op.code
   (R?)*  to  (Rd)    (Rn)*  to  (Rn)               \  1  1  1  1  1  1 1 1 1 1 0 0 0 0 0 0   \  FFC0     mask
   ORRS<Rdn>,<Rm>                     \  >6~7
\  (a)   6 +  16@  ( 3rd instruction's op.code )
\  (Rd)    2  0  >?~?  +
\  (Rn)    5  3  >?~?  +   16,'                     \ 4300      RoR

\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \         STR<c> <Rt>,[<Rn>,#<imm>]
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code.of.(R+#5)=R
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31     mask.of.(R+#5)=R
   (Rd)*  to  (Rd)    (R?)*  to  (Rn)
   STR<c><Rt>,[<Rn>,#<imm>]           \  >8~9
\  (a)   8 +  16@  ( 4th instruction's op.code )
\  (Rd)    5  3  >?~?  +
\  (#1)   0a  6  >?~?  +
\  (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R
                                    all.ok?.off  ;

\  6000. ( L )  43000000f0206800. ( H )    (R+#)n#/oR:  (R+#)n#/oR
      6800      F800    0  >?,2    \ 0~1
      6800      F800    2  >?,2    \ 0~1
      6800      F800    0  >?,2    \ 0~1
\ F0000000  FBE00000    2  >?,4    \ 2~5
      4300      FFC0    6  >?,2    \ 6~7
      6000      F800    8  >?,2    ( 8~9 )  0A  len.of.op.code/mask  !
                           get.op.code      (R+#)n#32oR:  (R+#)n#32oR





































: `(R+#)n#138oR  ( a' -- a' 80.bit.op.code )     dup  80@' ( dL dH )
   op.code+mask.of.R=(R+#5)  2@    0  >?,2                                                   \ R1=(R0+44)   R?=(R+#5)
   op.code+mask.of.R=#32     2@    2  >?,4     ( ???????? )                                  \ R2=FFFCF000  R%=#32
\  op.code+mask.of.RnR       2@    4  >?,2                                                   \ R1nR2        R?nR%
   op.code+mask.of.RoR       2@    6  >?,2                                                   \ R1oR3        R?oR
   op.code+mask.of.(R+#5)=R  2@    8  >?,2   0A  len.of.op.code/mask  !   get.mask  4and  ;  \ (R0+44)=R3   (R+#5)=R?


:  (R+#)n#138oR:_gene  :.mnem_  ." `(R+#)n#138oR" 4#=if10 ." 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p,2 .4" mnem" xt0 ;
:  (R+#)n#138oR:
   create   2over  2,  2over  2,  (R+#)n#138oR:_gene
   does>    ( Rd #1 #2 Rn a )  \ ( R? Rd #1 a )  ( R? R? #2 a )  ( R? Rn a )  ( Rd #1 R? a )
   to (a)*    3r.check  to (Rn)* \ 12#.check  to (#2)*  5#*4.check  4 /  to (#1)*    3r.check  to (Rd)*

   (R?)*  to  (Rd)    (Rd)*  to  (Rn)
   LDR<c><Rt>,[<Rn>,#<imm>]             \ >0~1      \ T1    LDR<c> <Rt>, [<Rn>, #<imm>]
\  (a)        16@  ( 1st instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)    2  0  >?~?  +                            \  0  1  1  0  1 ***imm5*** **Rn* **Rt*    6800  op.code
\  (Rn)    5  3  >?~?  +        \ 11p               \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask
\  (#1)   0a  6  >?~?  +  16,'  \ 12p*4             \ 6800      R=(R+#5)      R?=(Rd+#5)


comment:
   (R??)* to  (Rd)  \ (Rd)*  to  (Rn)
   LDR<c><Rt>,[PC,#<imm>]               \ >2~3      \ T1    LDR<c> <Rt>,[PC,#<imm>]
\  (a)        16@                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\  (Rd)   0a  8  >?~?  +                            \  0  1  0  0  1 **Rt** *****imm8******    4800  op.code
\  (#1)    7  0  >?~?  +  16,' ;        \ ?p*4      \  1  1  1  1  1  0 0 0 0 0 0 0 0 0 0 0    F800  mask



   (R?)*  to  (Rd)    (R??)*  to  (Rn)  \ >4~5      \  T1   AND<c> <Rdn>,<Rm>
   AND<c><Rdn>,<Rm>                                 \  15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0   4000  op,code
comment;                                                    \   0  1  0  0  0  0 0 0 0 0 **Rm* *Rdn*   FFC0     mask





  (R?)*  to  (Rd)    (R?)*  to  (Rn)
  AND{S}<c><Rd>,<Rn>,#<const>          \ >2~5     \ T1     AND{S}<c> <Rd>,<Rn>,#<const>
  (a)   2 +  32@  ( 2nd instruction's op.code )    \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
  (Rd)   0b  8  >?~?  +                            \  1  1  1  1  0  i 0 0 0 0 0 S **Rn***  0 **imm3** ***Rd**** *****imm8******   F0000000  op.code
  (Rn)   13 10  >?~?  +                            \  1  1  1  1  1  0 1 1 1 1 1 0 0 0 0 0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0   FBE00000  mask
  (#2)   1a 1a 0e 0c 7 0  >?~?+?~?+?~?  +  32,^    \ F0200000  R=Rn#     R?=R?n#    AND{S}<c> <Rd>,<Rn>,#<const>







\                                                   \ T1  ORRS <Rdn>,<Rm>
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
\                                                   \  0  1  0  0  0  0 1 1 0 0 **Rm* *Rdn*   \  4300  op.code
   (R?)*  to  (Rd)    (Rn)*  to  (Rn)               \  1  1  1  1  1  1 1 1 1 1 0 0 0 0 0 0   \  FFC0     mask
   ORRS<Rdn>,<Rm>                     \  >6~7
\  (a)   6 +  16@  ( 3rd instruction's op.code )
\  (Rd)    2  0  >?~?  +
\  (Rn)    5  3  >?~?  +   16,'                     \ 4300      RoR

\                                                   \ 4.6.162 STR (immediate)    (R4+40)=R0
\                                                   \         STR<c> <Rt>,[<Rn>,#<imm>]
\                                                   \ 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0     \ 6000   16~31  op.code.of.(R+#5)=R
\                                                   \  0  1  1  0  0 ***imm5*** *Rn** *Rt**     \ F800   16~31     mask.of.(R+#5)=R
   (Rd)*  to  (Rd)    (R?)*  to  (Rn)
   STR<c><Rt>,[<Rn>,#<imm>]           \  >8~9
\  (a)   8 +  16@  ( 4th instruction's op.code )
\  (Rd)    5  3  >?~?  +
\  (#1)   0a  6  >?~?  +
\  (Rn)    2  0  >?~?  +   16,'     all.ok?.off  ;  \ 6000     (R+#5)=R
                                    all.ok?.off  ;

\  6000. ( L )  43000000f0206800. ( H )    (R+#)n#/oR:  (R+#)n#/oR
      6800        F800     0  >?,2    \ 0~1
\     6800        F800     2  >?,2    \ 0~1
\     6800        F800     0  >?,2    \ 0~1
  F0000000 ^^ FBE00000 ^^  2  >?,4    \ 2~5
      4300        FFC0     6  >?,2    \ 6~7
      6000        F800     8  >?,2    ( 8~9 )  0A  len.of.op.code/mask  !
                           get.op.code      (R+#)n#138oR:  (R+#)n#138oR









































                      \ include  THUMB2disasm864y78s.F \ : test.dis  910  260 do  cr i dis  drop  2 +loop ;  : td  test.dis  ;

                      \ include  THUMB2disasm864y79e2.F

\ ***** THUMB2asm864y22.F


\ : (R+#)n#/oR_                                   macro? @  not  if  0  exit  then
\   `(R+#)n#/oR  ( 6000. 43000000F0206800. ) 430B030F F0236913 6000 0 q= if (A 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p,2 4" (R+#)n#/oR"
\                                                                                                  exit then 0 ;



: (R+#)n#/oR_                                   macro? @  not  if  0  exit  then
  `(R+#)n#/oR  F0206800 43000000 6000 0 q= if (A 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p,2 4" (R+#)n#/oR"
                                                                                                  exit then 0 ;




\ (R+#)n#oR_                                    macro? @  not  if  0  exit  then
\ `(R+#)n#/oR  F0206800 43000000 6000 0 q= if (A 5 3 11p,2  0a 6 12p*4 a'+2  1a 1a 0e 0c 7 0 33p138,4 a'+4 5 3 14p,2 4" (R+#)n#/oR"
\              ????????????????????????                                                           exit then 0 ;







: RnRoR_*                                       macro? @  not  if  0  exit  then
  `RnRoR                     43004000 = if (4 2 0 12p,2  5 3 13p  a'+2  5 3 14p 3" RnRoR"
                                                                                                  exit then 0 ;

: RnRoR_**                                      macro? @  not  if  0  exit  then
  `RnRoR                     43004000 = if (4 2 0 12p,2  5 3 13p        5 3 14p,4 3" RnRoR"
                                                                                                  exit then 0 ;

: RnRoR_                                        macro? @  not  if  0  exit  then
  `RnRoR                     43004000 = if (4 2 0 12p,2  5 3 13p+2      5 3 14p 3" RnRoR"

                                                                                                  exit then 0 ;

\                       Q
\      ************************************************
\                DH                     DL
\      ***********************  #######################
\      ----------- ***********  ########### %%%%%%%%%%%
\ 110  53 8B 5C 38 04 8B 44 3B  04 8B 1C 3B 50 8B 06 83
\ 110  2@  .s [2] 3B448B04h 385C8B53h  ok..
\ 110  2@   ud. 385C,8B53,3B44,8B04 ok..
\ 110  2@   d. 385C8B533B448B04  ok..



: (R+#)x#_                                      macro? @  not  if  0  exit  then
  `(R+#)x#         60000000 F0806800 d= if (8 5 3 12p,2  0a 6 13p*4.a+2 1A 1A 0E 0C 7 0 34P138,4 3" (R+#)x#"
                                                                                                  exit then 0 ;
: (R+#)o#_                                      macro? @  not  if  0  exit  then
  `(R+#)o#         60000000 F0406800 d= if (8 5 3 12p,2  0a 6 13p*4.a+2 1A 1A 0E 0C 7 0 34P138,4 3" (R+#)o#"
                                                                                                  exit then 0 ;
: (R+#)n#_                                      macro? @  not  if  0  exit  then
  `(R+#)n#         60000000 F0006800 d= if (8 5 3 12p,2  0a 6 13p*4.a+2 1A 1A 0E 0C 7 0 34P138,4 3" (R+#)n#"
                                                                                                  exit then 0 ;





: (R+#)xR_                                      macro? @  not  if  0  exit  then
  `(R+#)xR         00006000 40406800 d= if (6 5 3 12p,2  0a 6 13p*4,a'+2  5 3 14p 3" (R+#)xR"
                                                                                                  exit then 0 ;

: (R+#)oR_                                      macro? @  not  if  0  exit  then
  `(R+#)oR         00006000 43006800 d= if (6 5 3 12p,2  0a 6 13p*4,a'+2  5 3 14p 3" (R+#)oR"
                                                                                                  exit then 0 ;

: (R+#)oR_                                      macro? @  not  if  0  exit  then
  `(R+#)oR         00006000 43006800 d= if (6 5 3 12p,2  0a 6 13p*4,a'+2  5 3 14p 3" (R+#)oR"  deal.(R+#5)oR
                                                                                                  exit then 0 ;




: (R+#)nR_                                      macro? @  not  if  0  exit  then
  `(R+#)nR         00006000 40006800 d= if (6 5 3 12p,2  0a 6 13p*4,a'+2  5 3 14p 3" (R+#)nR"
                                                                                                  exit then 0 ;



: ubfx_R,R,#,#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#2#c5w             F3C00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" ubfx_R,R,#,#"
                                                                                                  exit then 0 ;
: ubfx_R=R<<#,#_
  `12c4rc3#2#c5w             F3C00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" ubfx_R=R<<#,#"


                                                                                                  exit then 0 ;
: ubfx_R,R,#,#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4r2#c5w           F3C00000 = if (4  0b 8 11p 13 10 12p 0e 0c 7 6 23p 4 0 14p+1      4" ubfx_R,R,#,#"
                                                                                                  exit then 0 ;
: ubfx_R=R<<#,#_
  `12c4rc3#4r2#c5w           F3C00000 = if (4  0b 8 11p 13 10 12p 0e 0c 7 6 23p 4 0 14p+1      4" ubfx_R=R<<#,#"
                                                                                                  exit then 0 ;


: adr_R,pc+#8_                                  original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4=pc+#*4          0000A000 = if (2             0a  8  13p      7  0  14p*4=pc+#*4  2" adr_R,pc+#8"
                                                                                                  exit then 0 ;
: R=pc+#*4_
  `5c3r8#*4=pc+#*4          0000A000 = if (2             0a  8  13p      7  0  14p*4=pc+#*4  2" R=pc+#"
                                                                                                  exit then 0 ;
: R=pc+#_
  `5c3r8#*4=pc+#*4          0000A000 = if (2             0a  8  13p      7  0  14p*4=pc+#*4  2" R=pc+#"
                                                                                                  exit then 0 ;












comment:
: adc_R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4=c3#4r8#           F1400000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p138   2" adc_R,#"
                                                                                                  exit then 0 ;
: adcs_R,#,s_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4=c3#4r8#           F1500000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p138   2" adcs_R,#,s"
                                                                                                  exit then 0 ;
: R+#+c_
  `5c#5cs4=c3#4r8#           F1400000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p138   2" R+#+c"
                                                                                                  exit then 0 ;
: R+#+c,s_
  `5c#5cs4=c3#4r8#           F1500000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p138   2" R+#+c,s"
                                                                                                  exit then 0 ;


comment;

: adc_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F1400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" adc_R,R,#"
                                                                                                  exit then 0 ;
: adcs_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" adcs_R,R,#"
                                                                                                  exit then 0 ;
: R=R+#+c_
  `5c#5cs4rc3#4r8#           F1400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=R+#+c"
                                                                                                  exit then 0 ;
: R=R+#+c,s_
  `5c#5cc4rc3#4r8#           F1500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R+#+c,s"
                                                                                                  exit then 0 ;
: adc_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004140 = if (2              2  0  13p      5  3  14p            2" adc_R,R"
                                                                                                  exit then 0 ;
: R+R+c_
  `10c3r3r                   00004140 = if (2              2  0  13p      5  3  14p            2" R+R+c"
                                                                                                  exit then 0 ;
: adc_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EB400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: adc_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EB400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: adc_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EB400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: adc_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EB400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R+R+c<<#_
  `11cc4rc3#4r2#004r         EB400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c<<#"
                                                                                                  exit then 0 ;
: R=R+R+c>>#_
  `11cc4rc3#4r2#014r         EB400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>#"
                                                                                                  exit then 0 ;
: R=R+R+c,a>>#_
  `11cc4rc3#4r2#104r         EB400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c,a>>#"
                                                                                                  exit then 0 ;
: R=R+R+c>>>#_
  `11cc4rc3#4r2#114r         EB400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>>#"
                                                                                                  exit then 0 ;
: adcs_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EB500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: adcs_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EB500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: adcs_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EB500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: adcs_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EB500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R+R+c<<#,s_
  `11cc4rc3#4r2#004r         EB500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c<<#,s"
                                                                                                  exit then 0 ;
: R=R+R+c>>#,s_
  `11cc4rc3#4r2#014r         EB500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>#,s"
                                                                                                  exit then 0 ;
: R=R+R+c,a>>#,s_
  `11cc4rc3#4r2#104r         EB500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c,a>>#,s"
                                                                                                  exit then 0 ;
: R=R+R+c>>>#,s_
  `11cc4rc3#4r2#114r         EB500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>>#,s"
                                                                                                  exit then 0 ;
: adds_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" adds_R,R,#"
                                                                                                  exit then 0 ;
: adds_R,R,#3_                                  original.mnemonic? @  not  if  0  exit  then
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" adds_R,R,#3"
                                                                                                  exit then 0 ;
: add_R,R,#3_                                   original.mnemonic? @  not  if  0  exit  then
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" add_R,R,#3"
                                                                                                  exit then 0 ;
: add_R,R,#3,s_                                 original.mnemonic? @  not  if  0  exit  then
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" add_R,R,#3,s"
                                                                                                  exit then 0 ;
: R=R+#,s_
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+#,s"
                                                                                                  exit then 0 ;
: R=R+#3,s_
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+#3,s"
                                                                                                  exit then 0 ;
: R=R+#3_
  `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+#3"
                                                                                                  exit then 0 ;
: adds_R,#_                                     original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" adds_R,#"
                                                                                                  exit then 0 ;
: adds_R,#8_                                    original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" adds_R,#8"
                                                                                                  exit then 0 ;
: add_R,#8_                                     original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" add_R,#8"
                                                                                                  exit then 0 ;
: add_R,#8,s_                                   original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" add_R,#8,s"
                                                                                                  exit then 0 ;
: R+#,s_
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" R+#,s"
                                                                                                  exit then 0 ;
: R+#8_
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" R+#8"
                                                                                                  exit then 0 ;
: R+#8,s_
  `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" R+#8,s"
                                                                                                  exit then 0 ;
: add_R,R,#138_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" add_R,R,#138"
                                                                                                  exit then 0 ;
: adds_R,R,#138_                                original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" adds_R,R,#138"
                                                                                                  exit then 0 ;
: R=R+#138_
  `5c#5cc4rc3#4r8#           F1000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R+#138"
                                                                                                  exit then 0 ;
: R=R+#138,s_
  `5c#5cc4rc3#4r8#           F1100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R+#138,s"
                                                                                                  exit then 0 ;
: addw_R,R,#12_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#.b14=0     F2000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" addw_R,R,#12"
                                                                                                  exit then 0 ;
: R=R+#12_
  `5c#5cc4rc3#4r8#.b14=0     F2000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138  deal.R=R+#12   3" R=R+#12"
\ deal.R=R+#12
                                                                                                  exit then 0 ;


: add_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00001800 = if (2   2  0  12p  5  3  13p      8  6  14p            3" add_R,R,R"
                                                                                                  exit then 0 ;
: R=R+R_
  `7c3r3r3r                  00001800 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+R"
                                                                                                  exit then 0 ;
: add_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `8cDN4r3r                  00004400 = if (2          7 7 2 0 23p      6  3  14p              2" add_R,R"
                                                                                                  exit then 0 ;
: R+R_
  `8cDN4r3r                  00004400 = if (2          7 7 2 0 23p      6  3  14p              2" R+R"
                                                                                                  exit then 0 ;
: add_R,R,R,#.lsl,s_                            original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#ty4r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,#.lsl,s"
                                                                                                  exit then 0 ;
: R=R+R<<#,s_
  `11cc4rc3#4r2#ty4r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#,s"
                                                                                                  exit then 0 ;
: add_R,R,R,#,lsl_                              original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,#,lsl"
                                                                                                  exit then 0 ;
: R=R+R<<#_
  `11cs4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#"
                                                                                                  exit then 0 ;
: add_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: add_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EB000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: add_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EB000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: add_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EB000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R+R<<#_
  `11cc4rc3#4r2#004r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#"
                                                                                                  exit then 0 ;
: R=R+R>>#_
  `11cc4rc3#4r2#014r         EB000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#"
                                                                                                  exit then 0 ;
: R=R+R,a>>#_
  `11cc4rc3#4r2#104r         EB000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#"
                                                                                                  exit then 0 ;
: R=R+R>>>#_
  `11cc4rc3#4r2#114r         EB000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#"
                                                                                                  exit then 0 ;
: adds_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: adds_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EB100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: adds_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EB100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: adds_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EB100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R+R<<#,s_
  `11cc4rc3#4r2#004r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#,s"
                                                                                                  exit then 0 ;
: R=R+R>>#,s_
  `11cc4rc3#4r2#014r         EB100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#,s"
                                                                                                  exit then 0 ;
: R=R+R,a>>#,s_
  `11cc4rc3#4r2#104r         EB100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#,s"
                                                                                                  exit then 0 ;
: R=R+R>>>#,s_
  `11cc4rc3#4r2#114r         EB100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#,s"
                                                                                                  exit then 0 ;
: add_R,rp,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4                  0000A800 = if (2             0a  8  13p      7  0  14p*4          2" add_R,rp,#"
                                                                                                  exit then 0 ;
: R=rp+#8_
  `5c3r8#*4                  0000A800 = if (2             0a  8  13p      7  0  14p*4          2" R=rp+#8"
                                                                                                  exit then 0 ;
: R=rp+#_
  `5c3r8#*4                  0000A800 = if (2             0a  8  13p      7  0  14p*4          2" R=rp+#"
                                                                                                  exit then 0 ;
: add_rp,#_                                     original.mnemonic? @  not  if  0  exit  then
  `9c7#*4                    0000B000 = if (2                 6 0  14p*4                       1" add_rp,#"
                                                                                                  exit then 0 ;
: add_rp,#7_                                    original.mnemonic? @  not  if  0  exit  then
  `9c7#*4                    0000B000 = if (2                 6 0  14p*4                       1" add_rp,#7"
                                                                                                  exit then 0 ;
: rp+#7_
  `9c7#*4                    0000B000 = if (2                 6 0  14p*4                       1" rp+#7"
                                                                                                  exit then 0 ;
: add_R,rp,#12_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#5cs5c3#4r8#*4          F10D0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" add_R,rp,#12"
                                                                                                  exit then 0 ;
: R=rp+#12_
  `5c#5cs5c3#4r8#*4          F10D0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=rp+#12"
                                                                                                  exit then 0 ;
: add_R,rp,#12_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#11c3#4r8#              F20B0000 = if (4                       0b 8 14p                   2" add_R,rp,#12"
                                                                                                  exit then 0 ;
: R=rp+#12_
  `5c#11c3#4r8#              F20B0000 = if (4                       0b 8 14p                   2" R=rp+#12"
                                                                                                  exit then 0 ;
: add_R,rp_                                     original.mnemonic? @  not  if  0  exit  then
  `8cDM4c3r                  00004468 = if (2                       2 0  14p                   1" add_R,rp"
                                                                                                  exit then 0 ;
: R+rp_
  `8cDM4c3r                  00004468 = if (2                       2 0  14p                   1" R+rp"
                                                                                                  exit then 0 ;
: add_rp,R_                                     original.mnemonic? @  not  if  0  exit  then
  `9c4r3c                    00004485 = if (2                        6 3 14p                   1" add_rp,R"
                                                                                                  exit then 0 ;
: rp+R_
  `9c4r3c                    00004485 = if (2                        6 3 14p                   1" rp+R"


COMMENT:                                                                                                  exit then 0 ;
: add_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#004r         EB0D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: add_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#014r         EB0D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: add_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#104r         EB0D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: add_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#114r         EB0D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R+R<<#_
  `11cc4cc3#4r2#004r         EB0D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#"
                                                                                                  exit then 0 ;
: R=R+R>>#_
  `11cc4cc3#4r2#014r         EB0D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#"
                                                                                                  exit then 0 ;
: R=R+R,a>>#_
  `11cc4cc3#4r2#104r         EB0D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#"
                                                                                                  exit then 0 ;
: R=R+R>>>#_
  `11cc4cc3#4r2#114r         EB0D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#"
                                                                                                  exit then 0 ;
: adds_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#004r         EB1D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: adds_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#014r         EB1D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: adds_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#104r         EB1D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: adds_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4cc3#4r2#114r         EB1D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R+R<<#,s_
  `11cc4cc3#4r2#004r         EB1D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#,s"
                                                                                                  exit then 0 ;
: R=R+R>>#,s_
  `11cc4cc3#4r2#014r         EB1D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#,s"
                                                                                                  exit then 0 ;
: R=R+R,a>>#,s_
  `11cc4cc3#4r2#104r         EB1D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#,s"
                                                                                                  exit then 0 ;
: R=R+R>>>#,s_
  `11cc4cc3#4r2#114r         EB1D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#,s"
COMMENT;


                                                                                                  exit then 0 ;
: adr_R,pc+#8_                                  original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4+.(pc+#)          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" adr_R,pc+#8"
                                                                                                  exit then 0 ;
: R=(pc+#)_
  `5c3r8#*4+.(pc+#)          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=(pc+#)"
                                                                                                  exit then 0 ;
: R=(pc+#8)_
  `5c3r8#*4+.(pc+#)          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=(pc+#8)"
                                                                                                  exit then 0 ;
: adr_R,#12_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#11c3#4r8#              F2AF0000 = if (4                       0b 8 14p                   2" adr_R,#12"
                                                                                                  exit then 0 ;
: R=(pc-#12)_
  `5c#11c3#4r8#              F2AF0000 = if (4                       0b 8 14p                   2" R=(pc-#12)"
                                                                                                  exit then 0 ;
: adr_R,pc+#12_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#11c3#4r8#              F20F0000 = if (4                       0b 8 14p                   2" adr_R,pc+#12"
                                                                                                  exit then 0 ;
: R=pc+#12_
  `5c#11c3#4r8#              F20F0000 = if (4                       0b 8 14p                   2" R=pc+#12"
                                                                                                  exit then 0 ;
: ands_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F0100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" ands_R,R,#"
                                                                                                  exit then 0 ;
: R=Rn#11,s_
  `5c#5cc4rc3#4r8#           F0100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=Rn#,s"
                                                                                                  exit then 0 ;
: and_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F0000000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" and_R,R,#"
                                                                                                  exit then 0 ;
: R=Rn#11_
  `5c#5cs4rc3#4r8#           F0000000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Rn#"
                                                                                                  exit then 0 ;
: and_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004000 = if (2              2  0  13p      5  3  14p            2" and_R,R"
                                                                                                  exit then 0 ;
: RnR_
  `10c3r3r                   00004000 = if (2              2  0  13p      5  3  14p            2" RnR"
                                                                                                  exit then 0 ;
: and_R,R,R<<#_                                 original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R<<#"
                                                                                                  exit then 0 ;
: R=RnR<<#_
  `11cs4rc3#4r2#ty4r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#"
                                                                                                  exit then 0 ;
: and_R,R,R<<#,s_                               original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R<<#,s"
                                                                                                  exit then 0 ;
: R=RnR<<#,s_
  `11cc4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#,s"
                                                                                                  exit then 0 ;
: and_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: and_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: and_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: and_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RnR<<#_
  `11cc4rc3#4r2#004r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#"
                                                                                                  exit then 0 ;
: R=RnR>>#_
  `11cc4rc3#4r2#014r         EA000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>#"
                                                                                                  exit then 0 ;
: R=RnR,a>>#_
  `11cc4rc3#4r2#104r         EA000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR,a>>#"
                                                                                                  exit then 0 ;
: R=RnR>>>#_
  `11cc4rc3#4r2#114r         EA000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>>#"
                                                                                                  exit then 0 ;
: ands_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: ands_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: ands_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: ands_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RnR<<#,s_
  `11cc4rc3#4r2#004r         EA100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#,s"
                                                                                                  exit then 0 ;
: R=RnR>>#,s_
  `11cc4rc3#4r2#014r         EA100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>#,s"
                                                                                                  exit then 0 ;
: R=RnR,a>>#,s_
  `11cc4rc3#4r2#104r         EA100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR,a>>#,s"
                                                                                                  exit then 0 ;
: R=RnR>>>#,s_
  `11cc4rc3#4r2#114r         EA100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>>#,s"
                                                                                                  exit then 0 ;
: asr_R,R,#5_                                   original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r                  00001000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" asr_R,R,#5"
                                                                                                  exit then 0 ;
: R=R,a>>#5_
  `5c5#3r3r                  00001000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,a>>#5"
                                                                                                  exit then 0 ;
: R=R,a>>#_
  `5c5#3r3r                  00001000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,a>>#"
                                                                                                  exit then 0 ;
: asr_R,R,#5'_                                  original.mnemonic? @  not  if  0  exit  then
  `11cs5c3#4r2#ty4r          EA4F0020 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" asr_R,R,#5'"
                                                                                                  exit then 0 ;
: R=R,a>>#5'_
  `11cs5c3#4r2#ty4r          EA4F0020 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R,a>>#5'"
                                                                                                  exit then 0 ;
: R=R,a>>#5_
  `11cs5c3#4r2#ty4r          EA4F0020 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R,a>>#5"
                                                                                                  exit then 0 ;
: asr_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004100 = if (2              2  0  13p      5  3  14p            2" asr_R,R"
                                                                                                  exit then 0 ;
: asr.R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004100 = if (2              2  0  13p      5  3  14p            2" asr.R,R"
                                                                                                  exit then 0 ;
: R,a>>R_
  `10c3r3r                   00004100 = if (2              2  0  13p      5  3  14p            2" R,a>>R"
                                                                                                  exit then 0 ;
: asr_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `11cs4r4c4r4c4r            FA40F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" asr_R,R,R"
                                                                                                  exit then 0 ;
: R=R,a>>R_
  `11cs4r4c4r4c4r            FA40F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R,a>>R"
                                                                                                  exit then 0 ;
: #....z=1?(=?)_
  `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" #....z=1?(=?)"
                                                                                                  exit then 0 ;
: #....z=0?(<>?)_
  `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" #....z=0?(<>?)"
                                                                                                  exit then 0 ;
: #....c=1?(u<?)_
  `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" #....c=1?(u<?)"
                                                                                                  exit then 0 ;
: #....c=0?(u>=?)_
  `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" #....c=0?(u>=?)"
                                                                                                  exit then 0 ;
: #....n=1?(-?)_
  `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" #....n=1?(-?)"
                                                                                                  exit then 0 ;
: #....n=0?(+?)_
  `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" #....n=0?(+?)"
                                                                                                  exit then 0 ;
: #....v=1?_
  `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" #....v=1?"
                                                                                                  exit then 0 ;
: #....v=0?_
  `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" #....v=0?"
                                                                                                  exit then 0 ;
: #....u>?_
  `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" #....u>?"
                                                                                                  exit then 0 ;
: #....u<=?_
  `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" #....u<=?"
                                                                                                  exit then 0 ;
: #....>=?_
  `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" #....>=?"
                                                                                                  exit then 0 ;
: #....<?_
  `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" #....<?"
                                                                                                  exit then 0 ;
: #....>?_
  `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" #....>?"
                                                                                                  exit then 0 ;
: #....<=?_
  `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" #....<=?"
                                                                                                  exit then 0 ;
: #....jmp_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....jmp"
                                                                                                  exit then 0 ;
: #....rjmp_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....rjmp"
                                                                                                  exit then 0 ;
: #....z=1?_
  `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" #....z=1?"
                                                                                                  exit then 0 ;
: #....bne_
  `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" #....bne"
                                                                                                  exit then 0 ;
: #....c=1?_
  `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" #....c=1?"
                                                                                                  exit then 0 ;
: #....c=0?_
  `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" #....c=0?"
                                                                                                  exit then 0 ;
: #....n=1?_
  `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" #....n=1?"
                                                                                                  exit then 0 ;
: #....n=0?_
  `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" #....n=0?"
                                                                                                  exit then 0 ;
: #....v=1?_
  `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" #....v=1?"
                                                                                                  exit then 0 ;
: #....v=0?_
  `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" #....v=0?"
                                                                                                  exit then 0 ;
: #....u>?_
  `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" #....u>?"
                                                                                                  exit then 0 ;
: #....u<=?_
  `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" #....u<=?"
                                                                                                  exit then 0 ;
: #....>=?_
  `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" #....>=?"
                                                                                                  exit then 0 ;
: #....<?_
  `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" #....<?"
                                                                                                  exit then 0 ;
: #....>?_
  `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" #....>?"
                                                                                                  exit then 0 ;
: #....<=?_
  `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" #....<=?"
                                                                                                  exit then 0 ;
: #....jmp_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....jmp"
                                                                                                  exit then 0 ;
: #....rjmp_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....rjmp"
                                                                                                  exit then 0 ;
: z=1?_
  `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" z=1?"
                                                                                                  exit then 0 ;
: bne_
  `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" bne"
                                                                                                  exit then 0 ;
: c=1?_
  `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" c=1?"
                                                                                                  exit then 0 ;
: c=0?_
  `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" c=0?"
                                                                                                  exit then 0 ;
: n=1?_
  `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" n=1?"
                                                                                                  exit then 0 ;
: n=0?_
  `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" n=0?"
                                                                                                  exit then 0 ;
: v=1?_
  `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" v=1?"
                                                                                                  exit then 0 ;
: v=0?_
  `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" v=0?"
                                                                                                  exit then 0 ;
: u>?_
  `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" u>?"
                                                                                                  exit then 0 ;
: u<=?_
  `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" u<=?"
                                                                                                  exit then 0 ;
: >=?_
  `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" >=?"
                                                                                                  exit then 0 ;
: <?_
  `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" <?"
                                                                                                  exit then 0 ;
: >?_
  `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" >?"
                                                                                                  exit then 0 ;
: <=?_
  `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" <=?"
                                                                                                  exit then 0 ;
: jmp_#8_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" jmp_#8"
                                                                                                  exit then 0 ;
: rjmp_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" rjmp"
                                                                                                  exit then 0 ;
: z=1?_
  `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" z=1?"
                                                                                                  exit then 0 ;
: z=0?_
  `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" z=0?"
                                                                                                  exit then 0 ;
: c=1?_
  `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" c=1?"
                                                                                                  exit then 0 ;
: c=0?_
  `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" c=0?"
                                                                                                  exit then 0 ;
: n=1?_
  `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" n=1?"
                                                                                                  exit then 0 ;
: n=0?_
  `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" n=0?"
                                                                                                  exit then 0 ;
: v=1?_
  `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" v=1?"
                                                                                                  exit then 0 ;
: v=0?_
  `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" v=0?"
                                                                                                  exit then 0 ;
: u>?_
  `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" u>?"
                                                                                                  exit then 0 ;
: u<=?_
  `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" u<=?"
                                                                                                  exit then 0 ;
: >=?_
  `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" >=?"
                                                                                                  exit then 0 ;
: <?_
  `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" <?"
                                                                                                  exit then 0 ;
: >?_
  `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" >?"
                                                                                                  exit then 0 ;
: <=?_
  `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" <=?"
                                                                                                  exit then 0 ;
: jmp_#8_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" jmp_#8"
                                                                                                  exit then 0 ;
: rjmp_
  `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" rjmp"
                                                                                                  exit then 0 ;
: jmp_#11_
  `5c11#                     0000E000 = if (2  0a 0 14p.rel11                                  1" jmp_#"
                                                                                                  exit then 0 ;
: jmp_#20_
  `5cs4con6#2cjcj11#         F000A000 = if (4  20rel,4                                         1" jmp_#20"   
                                                                                                  exit then 0 ;
: jmp_#24_
  `5cs10#2cjcj11#            F0009000 = if (4  24rel,4                                         1" jmp_#"
                                                                                                  exit then 0 ;
: bfc_R,#,#_                                    original.mnemonic? @  not  if  0  exit  then
  `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc_R,#,#"
                                                                                                  exit then 0 ;
: bfc.R,#,#_                                    original.mnemonic? @  not  if  0  exit  then
  `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc.R,#,#"
                                                                                                  exit then 0 ;
: bfc_R,#,#_
  `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc_R,#,#"
                                                                                                  exit then 0 ;
: bfc.R,#,#_
  `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc.R,#,#"
                                                                                                  exit then 0 ;
: bfi.R,R,#,#_
  `12c4rc3#4r2#c5m           F3600000 = if (4  0b 8 11p 13 10  12p 4 0 13p 3#4.2#6.            4" bfi.R,R,#,#"
                                                                                                  exit then 0 ;
: bics_R,R,#12_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F0300000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" bics_R,R,#12"
                                                                                                  exit then 0 ;
: R=Rn#12/,s_
  `5c#5cc4rc3#4r8#           F0300000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=Rn#12/,s"
                                                                                                  exit then 0 ;
: bic_R,R,#12_                                  original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F0200000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" bic_R,R,#12"
                                                                                                  exit then 0 ;
: R=Rn#12/_
  `5c#5cs4rc3#4r8#           F0200000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Rn#12/"
                                                                                                  exit then 0 ;
: bic_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004380 = if (2              2  0  13p      5  3  14p            2" bic_R,R"
                                                                                                  exit then 0 ;
: RnR/_
  `10c3r3r                   00004380 = if (2              2  0  13p      5  3  14p            2" RnR/"
                                                                                                  exit then 0 ;
: bic_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: bic_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA200010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: bic_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA200020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: bic_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA200030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RnR/<<#_
  `11cc4rc3#4r2#004r         EA200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/<<#"
                                                                                                  exit then 0 ;
: R=RnR/>>#_
  `11cc4rc3#4r2#014r         EA200010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>#"
                                                                                                  exit then 0 ;
: R=RnR/,a>>#_
  `11cc4rc3#4r2#104r         EA200020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/,a>>#"
                                                                                                  exit then 0 ;
: R=RnR/>>>#_
  `11cc4rc3#4r2#114r         EA200030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>>#"
                                                                                                  exit then 0 ;
: bics_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA300000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: bics_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA300010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: bics_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA300020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: bics_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA300030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RnR/<<#,s_
  `11cc4rc3#4r2#004r         EA300000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/<<#,s"
                                                                                                  exit then 0 ;
: R=RnR/>>#,s_
  `11cc4rc3#4r2#014r         EA300010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>#,s"
                                                                                                  exit then 0 ;
: R=RnR/,a>>#,s_
  `11cc4rc3#4r2#104r         EA300020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/,a>>#,s"
                                                                                                  exit then 0 ;
: R=RnR/>>>#,s_
  `11cc4rc3#4r2#114r         EA300030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>>#,s"
                                                                                                  exit then 0 ;
: bkpt_
  `8c8#                      0000BE00 = if (2  7  0  14p                                       1" bkpt"
                                                                                                  exit then 0 ;
: BL_#24_                                       original.mnemonic? @  not  if  0  exit  then
  `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" BL_#"
                                                                                                  exit then 0 ;
: rcall_#24_
  `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" rcall_#"
                                                                                                  exit then 0 ;
: rcall_
  `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" rcall"
                                                                                                  exit then 0 ;
: call.#24_
  `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" call.#"
                                                                                                  exit then 0 ;
: blx_R_                                        original.mnemonic? @  not  if  0  exit  then
  `9c4r3c                    00004780 = if (2                        6 3 14p                   1" blx_R"
                                                                                                  exit then 0 ;
: blx.R_                                        original.mnemonic? @  not  if  0  exit  then
  `9c4r3c                    00004780 = if (2                        6 3 14p                   1" blx.R"
                                                                                                  exit then 0 ;
: call_R_
  `9c4r3c                    00004780 = if (2                        6 3 14p                   1" call_R"
                                                                                                  exit then 0 ;
: bx_R_                                         original.mnemonic? @  not  if  0  exit  then
  `9c4r3c                    00004700 = if (2                        6 3 14p                   1" bx_R"
                                                                                                  exit then 0 ;
: bx.R_                                         original.mnemonic? @  not  if  0  exit  then
  `9c4r3c                    00004700 = if (2                        6 3 14p                   1" bx.R"
                                                                                                  exit then 0 ;
: jmp_R_
  `9c4r3c                    00004700 = if (2                        6 3 14p                   1" jmp_R"
                                                                                                  exit then 0 ;
: jmp_R_
  `9c4r3c                    00004700 = if (2                        6 3 14p                   1" jmp_R"
                                                                                                  exit then 0 ;
: cbnz_R,#_                                     original.mnemonic? @  not  if  0  exit  then
  `6c#c5#3r                  0000B900 = if (2   2  0  13p   9 9 7 3 24P*2                      2" cbnz_R,#"
                                                                                                  exit then 0 ;
: cbnz.R,#_                                     original.mnemonic? @  not  if  0  exit  then
  `6c#c5#3r                  0000B900 = if (2   2  0  13p   9 9 7 3 24P*2                      2" cbnz.R,#"
                                                                                                  exit then 0 ;
: if'R=0.pc+#_
  `6c#c5#3r                  0000B900 = if (2   2  0  13p   9 9 7 3 24P*2                      2" if_R=0.pc=#"
                                                                                                  exit then 0 ;
: CBZ_R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `6c#c5#3r                  0000B100 = if (2   2  0  13p   9 9 7 3 24P*2                      2" CBZ_R,#"
                                                                                                  exit then 0 ;
: CBZ.R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `6c#c5#3r                  0000B100 = if (2   2  0  13p   9 9 7 3 24P*2                      2" CBZ.R,#"
                                                                                                  exit then 0 ;
: if'R<>0.pc+#_
  `6c#c5#3r                  0000B100 = if (2   2  0  13p   9 9 7 3 24P*2                      2" if_R<>0.pc=#"
                                                                                                  exit then 0 ;
: clrex_
  `32c                       F3BF8F2F = if (4                                                  1" clrex"
                                                                                                  exit then 0 ;
: CLZ_R,R_
  `12c4=4c4r4c4r             FAB0F080 = if (4  0b  8  13p  3 0 14p                             2" CLZ_R,R"
                                                                                                  exit then 0 ;
: cmn_R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmn_R,#"
                                                                                                  exit then 0 ;
: cmn.R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmn.R,#"
                                                                                                  exit then 0 ;
: R:#/_
  `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" R:#/"
                                                                                                  exit then 0 ;
: R:-#_
  `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" R:-#"
                                                                                                  exit then 0 ;
: cmn_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" cmn_R,R"
                                                                                                  exit then 0 ;
: cmn.R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" cmn.R,R"
                                                                                                  exit then 0 ;
: R:R/_
  `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" R:R/"
                                                                                                  exit then 0 ;
: R:-R_
  `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" R:-R"
                                                                                                  exit then 0 ;
: cmn_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EB100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R"
                                                                                                  exit then 0 ;
: cmn.R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EB100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R"
                                                                                                  exit then 0 ;
: R:R/_
  `12c4rc3#4c2#2c4r          EB100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R/"
                                                                                                  exit then 0 ;
: cmp_R,#8_                                     original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00002800 = if (2             0a  8  13p      7  0  14p            2" cmp_R,#8"
                                                                                                  exit then 0 ;
: cmp.R,#8_                                     original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00002800 = if (2             0a  8  13p      7  0  14p            2" cmp.R,#8"
                                                                                                  exit then 0 ;
: R:#8_
  `5c3r8#                    00002800 = if (2             0a  8  13p      7  0  14p            2" R:#8"
                                                                                                  exit then 0 ;
: cmp_R,#12_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#6c4rc3#4c8#            F1B00F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmp_R,#12"
                                                                                                  exit then 0 ;
: cmp.R,#12_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#6c4rc3#4c8#            F1B00F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmp.R,#12"
                                                                                                  exit then 0 ;
: R:#12_
  `5c#6c4rc3#4c8#            F1B00F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" R:#12"
                                                                                                  exit then 0 ;
: cmp_R,R3_                                     original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004280 = if (2              2  0  13p      5  3  14p            2" cmp_R,R"
                                                                                                  exit then 0 ;
: cmp.R,R3_                                     original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004280 = if (2              2  0  13p      5  3  14p            2" cmp.R,R"
                                                                                                  exit then 0 ;
: R:R3_
  `10c3r3r                   00004280 = if (2              2  0  13p      5  3  14p            2" R:R"
                                                                                                  exit then 0 ;
: cmp_R,R4_                                     original.mnemonic? @  not  if  0  exit  then
  `9c4r3r                    00004500 = if (2  7 3 13p 2 0  14p                                2" cmp_R,R4"
                                                                                                  exit then 0 ;
: cmp.R,R4_                                     original.mnemonic? @  not  if  0  exit  then
  `9c4r3r                    00004500 = if (2  7 3 13p 2 0  14p                                2" cmp.R,R4"
                                                                                                  exit then 0 ;
: R:R4_
  `9c4r3r                    00004500 = if (2  7 3 13p 2 0  14p                                2" R:R4"
                                                                                                  exit then 0 ;
: cmp.R,R4_                                     original.mnemonic? @  not  if  0  exit  then
  `8cr4r3r                   00004500 = if (2  7 7 2 0 23p   6 3 14p                           2" cmp.R,R4"
                                                                                                  exit then 0 ;
: R:R4_
  `8cr4r3r                   00004500 = if (2  7 7 2 0 23p   6 3 14p                           2" R:R4"
                                                                                                  exit then 0 ;
: 3R:R3<<#_
  `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" 3R:R<<#"
                                                                                                  exit then 0 ;
: R333:R333<<#_
  `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R<<#"
                                                                                                  exit then 0 ;
: cmn_R,R,#,lsl_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,lsl"
                                                                                                  exit then 0 ;
: cmn_R,R,#,lsr_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F10 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,lsr"
                                                                                                  exit then 0 ;
: cmn_R,R,#,asr_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F20 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,asr"
                                                                                                  exit then 0 ;
: cmn_R,R,#,rrx_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F30 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,rrx"
                                                                                                  exit then 0 ;
: cmn.R,R,#,lsl_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,lsl"
                                                                                                  exit then 0 ;
: cmn.R,R,#,lsr_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F10 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,lsr"
                                                                                                  exit then 0 ;
: cmn.R,R,#,asr_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F20 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,asr"
                                                                                                  exit then 0 ;
: cmn.R,R,#,rrx_                                original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#2c4r          EBB00F30 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,rrx"
                                                                                                  exit then 0 ;
: R:R<<#_
  `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R<<#"
                                                                                                  exit then 0 ;
: R:R>>#_
  `12c4rc3#4c2#2c4r          EBB00F10 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R>>#"
                                                                                                  exit then 0 ;
: R:R,a>>#_
  `12c4rc3#4c2#2c4r          EBB00F20 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R,a>>#"
                                                                                                  exit then 0 ;
: R:R>>>#_
  `12c4rc3#4c2#2c4r          EBB00F30 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R>>>#"
                                                                                                  exit then 0 ;
: cps_#4_                                    \ original.mnemonic? @  not  if  0  exit  then
  `11cmcAIF                  0000B660 = if (2   2,m0AIF,4                                    \ 1" cps_#4"
                                                                                                  exit then 0 ;
: mAIF=#4_
  `11cmcAIF                  0000B660 = if (2   2,m0AIF,4                                    \ 1" mAIF=#4"
                                                                                                  exit then 0 ;
: DBG.option_
  `28c4opt                   F3AF80F0 = if (4                                                  1" DBG.option"
                                                                                                  exit then 0 ;
: DMB.option_
  `28c4opt                   F3BF8F50 = if (4                                                  1" DMB.option"
                                                                                                  exit then 0 ;
: DSB.option_
  `28c4opt                   F3BF8F40 = if (4                                                  1" DSB.option"
                                                                                                  exit then 0 ;
: eors_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F0900000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" eors_R,R,#"
                                                                                                  exit then 0 ;
: eors.R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F0900000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" eors.R,R,#"
                                                                                                  exit then 0 ;
: R=Rx#,s_
  `5c#5cc4rc3#4r8#           F0900000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=Rx#,s"
                                                                                                  exit then 0 ;
: eor_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F0800000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" eor_R,R,#"
                                                                                                  exit then 0 ;
: eor.R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F0800000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" eor.R,R,#"
                                                                                                  exit then 0 ;
: R=Rx#_
  `5c#5cs4rc3#4r8#           F0800000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Rx#"
                                                                                                  exit then 0 ;
: eor.R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4=c3#4r8#           F0800000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p138   2" eor.R,#"
                                                                                                  exit then 0 ;
: Rx#_
  `5c#5cs4=c3#4r8#           F0800000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p138   2" Rx#"
                                                                                                  exit then 0 ;
: eor_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004040 = if (2              2  0  13p      5  3  14p            2" eor_R,R"
                                                                                                  exit then 0 ;
: eor.R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004040 = if (2              2  0  13p      5  3  14p            2" eor.R,R"
                                                                                                  exit then 0 ;
: RxR_
  `10c3r3r                   00004040 = if (2              2  0  13p      5  3  14p            2" RxR"
                                                                                                  exit then 0 ;
\ : eor_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
\  `11cs4rc3#4r2#ty4r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R"
\                                                                                                  exit then 0 ;
\ : R=RxR_
\  `11cs4rc3#4r2#ty4r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR"
\                                                                                                  exit then 0 ;
: eor_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: eor_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA800010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: eor_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA800020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: eor_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA800030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RxR<<#_
  `11cc4rc3#4r2#004r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR<<#"
                                                                                                  exit then 0 ;
: R=RxR>>#_
  `11cc4rc3#4r2#014r         EA800010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>#"
                                                                                                  exit then 0 ;
: R=RxR,a>>#_
  `11cc4rc3#4r2#104r         EA800020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR,a>>#"
                                                                                                  exit then 0 ;
: R=RxR>>>#_
  `11cc4rc3#4r2#114r         EA800030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>>#"
                                                                                                  exit then 0 ;
: eors_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA900000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: eors_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA900010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: eors_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA900020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: eors_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA900030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RxR<<#,s_
  `11cc4rc3#4r2#004r         EA900000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR<<#,s"
                                                                                                  exit then 0 ;
: R=RxR>>#,s_
  `11cc4rc3#4r2#014r         EA900010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>#,s"
                                                                                                  exit then 0 ;
: R=RxR,a>>#,s_
  `11cc4rc3#4r2#104r         EA900020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR,a>>#,s"
                                                                                                  exit then 0 ;
: R=RxR>>>#,s_
  `11cc4rc3#4r2#114r         EA900030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>>#,s"
                                                                                                  exit then 0 ;
: ISB.option_
  `28c4opt                   F3BF8F60 = if (4                                                  1" ISB.option"
                                                                                                  exit then 0 ;
: ldmdb_R,R.list_                               original.mnemonic? @  not  if  0  exit  then
  `10cWc4rPMc12R.list        E9100000 = if (4      .{r0~r12+pc+lr}+rn                          1" ldmdb_R,R.list"
                                                                                                  exit then 0 ;
: dmdb_R,R.list_                                original.mnemonic? @  not  if  0  exit  then
  `10cWc4rPMc12R.list        E9100000 = if (4      .{r0~r12+pc+lr}+rn                          1" dmdb_R,R.list"
                                                                                                  exit then 0 ;
: pop_R,R.list_
  `10cWc4rPMc12R.list        E9100000 = if (4      .{r0~r12+pc+lr}+rn                          1" pop_R,R.list"
                                                                                                  exit then 0 ;
: ldm_                                          original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldm"
                                                                                                  exit then 0 ;
\ ldmia_R,#_                                    original.mnemonic? @  not  if  0  exit  then
\ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia_R,#"
\                                                                                                 exit then 0 ;

: ldmia_R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia"
                                                                                                  exit then 0 ;

\ ldmia.R,#_                                    original.mnemonic? @  not  if  0  exit  then
\ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia.R,#"
\                                                                                                 exit then 0 ;

: ldmia_R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia"
                                                                                                  exit then 0 ;

: ldmia_                                        original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia"
                                                                                                  exit then 0 ;
\ pop_R!,#_
\ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" pop_R!,#"
\                                                                                                 exit then 0 ;
\
: pop_R!,#_
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" pop"
                                                                                                  exit then 0 ;


: pop.R!,#_
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" pop.R!,#"
                                                                                                  exit then 0 ;
: ldmia_                                        original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia"
                                                                                                  exit then 0 ;
: ldmia_R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia_R,R"
                                                                                                  exit then 0 ;
: ldmia_R,Rlist_                                original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia_R,Rlist"
                                                                                                  exit then 0 ;
: ldm_                                          original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldm"
                                                                                                  exit then 0 ;
: ldm_R,R_
  `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldm_R,R"
                                                                                                  exit then 0 ;
: ldmia_                                        original.mnemonic? @  not  if  0  exit  then
  `10cWc4rPMc12R.list        E8900000 = if (4      .{r0~r12+pc+lr}+rn                          1" ldmia"
                                                                                                  exit then 0 ;
: ldm_
  `10cWc4rPMc12R.list        E8900000 = if (4      .{r0~r12+pc+lr}+rn                          1" ldm"
                                                                                                  exit then 0 ;
: ldr_R,[R,#5]_                                 original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00006800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldr_R,[R,#5]"
                                                                                                  exit then 0 ;
: R=(R+#5)_
  `5c5#3r3r*4                00006800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4  deal.R=(R+#5)  3" R=(R+#5)"
                                                                                                  exit then 0 ;




: ldr_R,[rp,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" ldr_R,[rp,#]"
                                                                                                  exit then 0 ;
: R=(rp+#)_
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#)"
                                                                                                  exit then 0 ;
: R=(rp+#)_
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#)"
                                                                                                  exit then 0 ;
: R=(rp+#8)_
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#8)"
                                                                                                  exit then 0 ;
: ldr_R,[pc,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12cpc4r12#                F8DF0000 = if (4  0f 0c 13p  0b 0 14p                             2" ldr_R,[pc,#]"
                                                                                                  exit then 0 ;
: R=(pc+#12)_
  `12cpc4r12#                F8DF0000 = if (4  0f 0c 13p  0b 0 14p                             2" R=(pc+#12)"
                                                                                                  exit then 0 ;
: ldr_R,[R,#12]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldr_R,[R,#12]"
                                                                                                  exit then 0 ;
: R=(R+#12)_
  `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)"
                                                                                                  exit then 0 ;
\ ldr_R,[R,-#8]_ 
: ldr_R,[R,-#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F8500800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,-#]"
                                                                                                  exit then 0 ;
: ldr_R,[R,-#]!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,-#]!"
                                                                                                  exit then 0 ;
: ldr_R,[R,#]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F8500A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,#]"
                                                                                                  exit then 0 ;
: ldr_R,[R,#]!_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,#]!"
                                                                                                  exit then 0 ;
: ldr_R,[R],-#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F8500C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],-#"
                                                                                                  exit then 0 ;
: ldr_R,[R],-#!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F8500D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],-#!"
                                                                                                  exit then 0 ;
: ldr_R,[R],#_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],#"
                                                                                                  exit then 0 ;
: ldr_R,[R],#!_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],#!"
                                                                                                  exit then 0 ;



: R=(R-#),w_
  `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),w"
                                                                                                  exit then 0 ;
: R=(R+#),p_
  `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),p"
                                                                                                  exit then 0 ;
: R=(R-#)!_
  `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)!"
                                                                                                  exit then 0 ;
: R=(R+#),w_
  `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),w"
                                                                                                  exit then 0 ;
: R=(R+#),p_
  `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),p"
                                                                                                  exit then 0 ;
: R=(R+#)!_
  `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)!"
                                                                                                  exit then 0 ;
: R=(R),-#_
  `12c4r4rcPUW8#4            F8500C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),-#"
                                                                                                  exit then 0 ;
: R=(R),-#,p_
  `12c4r4rcPUW8#5            F8500D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),-#,p"
                                                                                                  exit then 0 ;
: R=(R),#_
  `12c4r4rcPUW8#6            F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),#"
                                                                                                  exit then 0 ;
: R=(R),#,p_
  `12c4r4rcPUW8#7            F8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),#,p"
                                                                                                  exit then 0 ;
: ldr_R,[pc,#8]_                                original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4+.(pc+#)          00004800 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" ldr_R,[pc,#8]"
                                                                                                  exit then 0 ;
: ldr_R,[pc,#8]_                                original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4+.(pc+#)          00004800 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" ldr_R,#"
                                                                                                  exit then 0 ;




: R=(pc+#8')_
  `5c3r8#*4+.(pc+#)          00004800 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)   deal.R=(pc+#8') 2" R=(pc+#8')"
\ deal.R=(pc+#8')
        exit then 0 ;

: R=(pc+#8')_
  `5c3r8#*4+.(pc+#)          00004800 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)   2" R=#"
\ deal.R=(pc+#8')
        exit then 0 ;




: ldr_R,[pc,-#12]_                              original.mnemonic? @  not  if  0  exit  then
  `8c-7c4r12#+.(pc-#)        F85F0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" ldr_R,[pc,-#12]"
                                                                                                  exit then 0 ;

: ldr_R,[pc,-#12]_                              original.mnemonic? @  not  if  0  exit  then
  `8c-7c4r12#+.(pc-#)        F85F0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" ldr_R,#"
                                                                                                  exit then 0 ;





: ldr_R,[pc,+#12]_                              original.mnemonic? @  not  if  0  exit  then
  `8c+7c4r12#+.(pc+#)        F8DF0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" ldr_R,[pc,+#12]"
                                                                                                  exit then 0 ;
: ldr_R,[pc,+#12]_                              original.mnemonic? @  not  if  0  exit  then
  `8c+7c4r12#+.(pc+#)        F8DF0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" ldr_R,#"
                                                                                                  exit then 0 ;



: R=(pc-#12)_
  `8c-7c4r12#+.(pc-#)        F85F0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" R=(pc-#12)"
                                                                                                  exit then 0 ;

: R=(pc-#12)_
  `8c-7c4r12#+.(pc-#)        F85F0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" R=#"
                                                                                                  exit then 0 ;




: R=(pc+#12)_
  `8c+7c4r12#+.(pc+#)        F8DF0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" R=(pc+#12)"
                                                                                                  exit then 0 ;
: R=(pc+#12)_
  `8c+7c4r12#+.(pc+#)        F8DF0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" R=#"
                                                                                                  exit then 0 ;




: R=(R+R)_
  `7c3r3r3r                  00005800 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)"
                                                                                                  exit then 0 ;
: ldr_R,[R,R]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F8500000 = if (4  0f 0c 11p 13 10 12p 3 0 13p 5 4 14p             4" ldr_R,[R,R<<#]"
                                                                                                  exit then 0 ;
: R=(R<<R)_
  `12c4r4r6c2s4r             F8500000 = if (4  0f 0c 11p 13 10 12p 3 0 13p 5 4 14p             4" R=(R+R<<#)"
                                                                                                  exit then 0 ;
: ldrb_R,[R,#5]_                                original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00007800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldrb_R,[R,#5]"
                                                                                                  exit then 0 ;
: R=(R+#)b_
  `5c5#3r3r*4                00007800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#)b"
                                                                                                  exit then 0 ;
: R=(R+#5)b_
  `5c5#3r3r*4                00007800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#5)b"
                                                                                                  exit then 0 ;
: ldrb_R,[rp,#5]_                               original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" ldrb_R,[rp,#5]"
                                                                                                  exit then 0 ;
: R=(rp+#)b_
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#)b"
                                                                                                  exit then 0 ;
: R=(rp+#5)b_
  `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#5)b"
                                                                                                  exit then 0 ;
: ldrb_R,[R,#12]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrb_R,[R,#12]"
                                                                                                  exit then 0 ;
: R=(R+#12)b_
  `12c4r4r12#                F8900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)b"
                                                                                                  exit then 0 ;
: ldrb_R,[R,-#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F8100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,-#]"
                                                                                                  exit then 0 ;
: ldrb_R,[R,-#]!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F8100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,-#]!"
                                                                                                  exit then 0 ;
: ldrb_R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F8100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrb_R,[R,#]!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F8100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,#]!"
                                                                                                  exit then 0 ;
: ldrb_R,[R],-#_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F8100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],-#"
                                                                                                  exit then 0 ;
: ldrb_R,[R],-#!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F8100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],-#!"
                                                                                                  exit then 0 ;
: ldrb_R,[R],#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],#"
                                                                                                  exit then 0 ;
: ldrb_R,[R],#!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F8100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],#!"
                                                                                                  exit then 0 ;
: R=(R-#),b_
  `12c4r4rcPUW8#0            F8100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b"
                                                                                                  exit then 0 ;
: R=(R-#),b,w_
  `12c4r4rcPUW8#1            F8100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b,w"
                                                                                                  exit then 0 ;
: R=(R+#),b_
  `12c4r4rcPUW8#2            F8100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b"
                                                                                                  exit then 0 ;
: R=(R+#),b,w_
  `12c4r4rcPUW8#3            F8100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b,w"
                                                                                                  exit then 0 ;
: R=(R-#),b,p_
  `12c4r4rcPUW8#4            F8100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b,p"
                                                                                                  exit then 0 ;
: R=(R-#),b,p_
  `12c4r4rcPUW8#5            F8100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b,p"
                                                                                                  exit then 0 ;
: R=(R+#),b,p_
  `12c4r4rcPUW8#6            F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b,p"
                                                                                                  exit then 0 ;
: R=(R+#),b,p_
  `12c4r4rcPUW8#7            F8100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b,p"
                                                                                                  exit then 0 ;
: ldrb_R,[pc,#]_                                original.mnemonic? @  not  if  0  exit  then
  `8cU7c4r12#                F8900000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrb_R,[pc,#]"
                                                                                                  exit then 0 ;
: R=(pc+#)b_
  `8cU7c4r12#                F8900000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#)b"
                                                                                                  exit then 0 ;
: ldrb_R,[R,R]_                                 original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrb_R,[R,R]"
                                                                                                  exit then 0 ;
: R=(R+R)b_
  `7c3r3r3r                  00005C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)b"
                                                                                                  exit then 0 ;

\ ldrb_R,[R,R,lsl#]_

: ldrb_R,[R,R<<#]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F8100000 = if (4  0f 0c 11p 13 10 12p 3 0 13p 5 4 14p                    4" ldrb_R,[R,<<#]"
                                                                                                  exit then 0 ;
: R=(R+R<<#)b_
  `12c4r4r6c2s4r             F8100000 = if (4  0f 0c 11p 13 10 12p 3 0 13p 5 4 14p                    4" R=(R+R<<#)b"
                                                                                                  exit then 0 ;
: ldrbt_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrbt_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrbt.R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrbt.R,[R,#]"
                                                                                                  exit then 0 ;
: R=(R+#)t_
  `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  exit then 0 ;
: R=(R+#8)t_
  `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R,-#]_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#0          E8500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,-#]"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R,-#]!_                             original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#1          E8700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,-#]!"
                                                                                                  exit then 0 ;





: ldrd_R,R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#2          E8d00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,#]"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R,#]!_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#3          E8F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,#]!"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R],-#_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#4          E9500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],-#"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R],-#!_                             original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#5          E9700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],-#!"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R],#_                               original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#6          E9d00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],#"
                                                                                                  exit then 0 ;
: ldrd_R,R,[R],#!_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#7          E9F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],#!"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R,-#]_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#0          E8500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,-#]"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R,-#]!_                             original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#1          E8700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,-#]!"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#2          E8d00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,#]"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R,#]!_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#3          E8F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,#]!"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R],-#_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#4          E9500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],-#"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R],-#!_                             original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#5          E9700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],-#!"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R],#_                               original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#6          E9d00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],#"
                                                                                                  exit then 0 ;
: ldrd.R,R,[R],#!_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#7          E9F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],#!"
                                                                                                  exit then 0 ;
: R,R=(R-#)d_
  `7cPUcWc4r4r4r8#0          E8500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d"


                                                                                                  exit then 0 ;
: R,R=(R-#)d,w_
  `7cPUcWc4r4r4r8#1          E8700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d,w"
                                                                                                  exit then 0 ;
: R,R=(R+#)d_
  `7cPUcWc4r4r4r8#2          E8d00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d"
                                                                                                  exit then 0 ;
: R,R=(R+#)d,w_
  `7cPUcWc4r4r4r8#3          E8F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d,w"
                                                                                                  exit then 0 ;
: R,R=(R-#)d,p_
  `7cPUcWc4r4r4r8#4          E9500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d,p"
                                                                                                  exit then 0 ;
: R,R=(R-#)d,p,w_
  `7cPUcWc4r4r4r8#5          E9700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d,p,w"
                                                                                                  exit then 0 ;
: R,R=(R+#)d,p_
  `7cPUcWc4r4r4r8#6          E9d00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d,p"
                                                                                                  exit then 0 ;
: R,R=(R+#)d,p,w_
  `7cPUcWc4r4r4r8#7          E9F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d,p,w"
                                                                                                  exit then 0 ;
: ldrex_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrex_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrex.R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrex.R,[R,#]"
                                                                                                  exit then 0 ;
: R=(R+#)ex_
  `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)ex"
                                                                                                  exit then 0 ;
: R=(R+#12)ex_
  `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#12)ex"
                                                                                                  exit then 0 ;
: ldrexb_R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexb_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrexb.R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexb.R,[R,#]"
                                                                                                  exit then 0 ;
: R=(R+#)exb_
  `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#)exb"
                                                                                                  exit then 0 ;
: R=(R+#12)exb_
  `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)exb"
                                                                                                  exit then 0 ;
: ldrexd_R,R,[R]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                E8B0007F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexd_R,R,[R]"
                                                                                                  exit then 0 ;
: ldrexd.R,R,[R]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                E8B0007F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexd.R,R,[R]"
                                                                                                  exit then 0 ;
: R,R=[R]exd_
  `12c4r4r12#                E8B0007F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R,R=[R]exd"
                                                                                                  exit then 0 ;
: ldrexh_R,[R]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                E8D00F5F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexh_R,[R]"
                                                                                                  exit then 0 ;
: ldrexh.R,[R]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                E8D00F5F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexh.R,[R]"
                                                                                                  exit then 0 ;
: R=(R)exh_
  `12c4r4r12#                E8D00F5F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R)exh"
                                                                                                  exit then 0 ;
: ldrh_R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldrh_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrh.R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldrh.R,[R,#]"
                                                                                                  exit then 0 ;
: R=(R+#)h_
  `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#)h"
                                                                                                  exit then 0 ;
: R=(R+#5),h_
  `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#5),h"
                                                                                                  exit then 0 ;
: R=(R+#),h_
  `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#),h"
                                                                                                  exit then 0 ;
: ldrh_R,[R,#12]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrh_R,[R,#12]"
                                                                                                  exit then 0 ;
: ldrh.R,[R,#12]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrh.R,[R,#12]"
                                                                                                  exit then 0 ;
: R=(R+#12)h_
  `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)h"
                                                                                                  exit then 0 ;
: R=(R+#12)h_
  `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)h"
                                                                                                  exit then 0 ;
: ldrh_R,[R,-#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F8300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,-#]"
                                                                                                  exit then 0 ;
: ldrh_R,[R,-#]!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F8300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,-#]!"
                                                                                                  exit then 0 ;
: ldrh_R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F8300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrh_R,[R,#]!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F8300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,#]!"
                                                                                                  exit then 0 ;
: ldrh_R,[R],-#_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F8300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],-#"
                                                                                                  exit then 0 ;
: ldrh_R,[R],-#!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F8300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],-#!"
                                                                                                  exit then 0 ;
: ldrh_R,[R],#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F8300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],#"
                                                                                                  exit then 0 ;
: ldrh_R,[R],#!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F8300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],#!"
                                                                                                  exit then 0 ;
: R=(R-#)h_
  `12c4r4rcPUW8#0            F8300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h"
                                                                                                  exit then 0 ;
: R=(R-#)h,w_
  `12c4r4rcPUW8#1            F8300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h,w"
                                                                                                  exit then 0 ;
: R=(R+#)h_
  `12c4r4rcPUW8#2            F8300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h"
                                                                                                  exit then 0 ;
: R=(R+#)h,w_
  `12c4r4rcPUW8#3            F8300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h,w"
                                                                                                  exit then 0 ;
: R=(R-#)h,p_
  `12c4r4rcPUW8#4            F8300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h,p"
                                                                                                  exit then 0 ;
: R=(R-#)h,p_
  `12c4r4rcPUW8#5            F8300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h,p"
                                                                                                  exit then 0 ;
: R=(R+#)h,p_
  `12c4r4rcPUW8#6            F8300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h,p"
                                                                                                  exit then 0 ;
: R=(R+#)h,p_
  `12c4r4rcPUW8#7            F8300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h,p"
                                                                                                  exit then 0 ;
: R=(R-#),h_
  `12c4r4rcPUW8#0            F8300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h"
                                                                                                  exit then 0 ;
: R=(R-#),h,w_
  `12c4r4rcPUW8#1            F8300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h,w"
                                                                                                  exit then 0 ;
: R=(R+#),h_
  `12c4r4rcPUW8#2            F8300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h"
                                                                                                  exit then 0 ;
: R=(R+#),h,w_
  `12c4r4rcPUW8#3            F8300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h,w"
                                                                                                  exit then 0 ;
: R=(R-#),h,p_
  `12c4r4rcPUW8#4            F8300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h,p"
                                                                                                  exit then 0 ;
: R=(R-#),h,p_
  `12c4r4rcPUW8#5            F8300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h,p"
                                                                                                  exit then 0 ;
: R=(R+#),h,p_
  `12c4r4rcPUW8#6            F8300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h,p"
                                                                                                  exit then 0 ;
: R=(R+#),h,p_
  `12c4r4rcPUW8#7            F8300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h,p"
                                                                                                  exit then 0 ;
: ldrh_R=(pc+#12)_                              original.mnemonic? @  not  if  0  exit  then
  `8cU7c4r12#                F83F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R=(pc+#12)"
                                                                                                  exit then 0 ;
: ldrh_R=(pc+#)_
  `8cU7c4r12#                F83F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R=(pc+#)"
                                                                                                  exit then 0 ;
: ldrh_R=(pc+#12)_
  `8cU7c4r12#                F83F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R=(pc+#12)"
                                                                                                  exit then 0 ;
: ldrh_R,[R,R]_                                 original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrh_R,[R,R]"
                                                                                                  exit then 0 ;
: R=(R+R)h_
  `7c3r3r3r                  00005A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)h"
                                                                                                  exit then 0 ;
: ldrh_R,[R,R<<#]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F8300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrh_R,[R,R<<#]"
                                                                                                  exit then 0 ;
: R=(R+R<<#)h_
  `12c4r4r6c2s4r             F8300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" R=(R+R<<#)h"
                                                                                                  exit then 0 ;
: ldrht_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F83000E0 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrht_R,[R,#]"
                                                                                                  exit then 0 ;
: R=(R+#)t_
  `12c4r4r4c8#               F83000E0 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  exit then 0 ;
: R=(R+#8)t_
  `12c4r4r4c8#               F83000E0 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  exit then 0 ;
: ldrsb_R,[R,#12]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrsb_R,[R,#12]"
                                                                                                  exit then 0 ;
: R=(R+#),b_
  `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#),sb"
                                                                                                  exit then 0 ;
: R=(R+#)sb_
  `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#)sb"
                                                                                                  exit then 0 ;
: R=(R+#12),sb_
  `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12),sb"
                                                                                                  exit then 0 ;
: R=(R+#12)sb_
  `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)sb"
                                                                                                  exit then 0 ;
: ldrsb_R,[R,-#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F9100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,-#]"
                                                                                                  exit then 0 ;
: ldrsb_R,[R,-#]!_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F9100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,-#]!"
                                                                                                  exit then 0 ;
: ldrsb_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F9100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrsb_R,[R,#]!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F9100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,#]!"
                                                                                                  exit then 0 ;
: ldrsb_R,[R],-#_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F9100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],-#"
                                                                                                  exit then 0 ;
: ldrsb_R,[R],-#!_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F9100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],-#!"
                                                                                                  exit then 0 ;
: ldrsb_R,[R],#_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],#"
                                                                                                  exit then 0 ;
: ldrsb_R,[R],#!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F9100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],#!"
                                                                                                  exit then 0 ;
: R=(R-#)sb_
  `12c4r4rcPUW8#0            F9100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sb"
                                                                                                  exit then 0 ;
: R=(R-#)sb,w_
  `12c4r4rcPUW8#1            F9100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sb,w"
                                                                                                  exit then 0 ;
: R=(R+#)sb_
  `12c4r4rcPUW8#2            F9100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sb"
                                                                                                  exit then 0 ;
: R=(R+#)sb,w_
  `12c4r4rcPUW8#3            F9100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sb,w"
                                                                                                  exit then 0 ;
: R=(R)-#sb,p_
  `12c4r4rcPUW8#4            F9100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#sb,p"
                                                                                                  exit then 0 ;
: R=(R)-#sb,p_
  `12c4r4rcPUW8#5            F9100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#sb,p"
                                                                                                  exit then 0 ;
: R=(R)+#sb,p_
  `12c4r4rcPUW8#6            F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#sb,p"
                                                                                                  exit then 0 ;
: R=(R)+#sb,p_
  `12c4r4rcPUW8#7            F9100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#sb,p"
                                                                                                  exit then 0 ;
: R=(R-#),sb_
  `12c4r4rcPUW8#0            F9100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sb"
                                                                                                  exit then 0 ;
: R=(R-#),sb,w_
  `12c4r4rcPUW8#1            F9100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sb,w"
                                                                                                  exit then 0 ;
: R=(R+#),sb_
  `12c4r4rcPUW8#2            F9100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sb"
                                                                                                  exit then 0 ;
: R=(R+#),sb,w_
  `12c4r4rcPUW8#3            F9100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sb,w"
                                                                                                  exit then 0 ;
: R=(R)-#,sb,p_
  `12c4r4rcPUW8#4            F9100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#,sb,p"
                                                                                                  exit then 0 ;
: R=(R)-#,sb,p_
  `12c4r4rcPUW8#5            F9100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#,sb,p"
                                                                                                  exit then 0 ;
: R=(R)+#,sb,p_
  `12c4r4rcPUW8#6            F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#,sb,p"
                                                                                                  exit then 0 ;
: R=(R)+#,sb,p_
  `12c4r4rcPUW8#7            F9100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#,sb,p"
                                                                                                  exit then 0 ;
: ldrh_R,[pc,#12]_                              original.mnemonic? @  not  if  0  exit  then
  `8cU7c4r12#                F91F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R,[pc,#12]"
                                                                                                  exit then 0 ;
: R=(pc+#)h_
  `8cU7c4r12#                F91F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#)h"
                                                                                                  exit then 0 ;
: R=(pc+#12)h_
  `8cU7c4r12#                F91F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#12)h"
                                                                                                  exit then 0 ;
: ldrsb_R,[R,R]_                                original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005600 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrsb_R,[R,R]"
                                                                                                  exit then 0 ;
: R=(R+R)sb_
  `7c3r3r3r                  00005600 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)sb"
                                                                                                  exit then 0 ;
: ldrsb_R,[R<<R]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F9100000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrsb_R,[R<<R]"
                                                                                                  exit then 0 ;
: ldrsb_R=(R<<R)b_
  `12c4r4r6c2s4r             F9100000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrsb_R=(R<<R)b"
                                                                                                  exit then 0 ;
: ldrsbt_R,[R,#8]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsbt_R,[R,#8]"
                                                                                                  exit then 0 ;
: R=(R+#)t_
  `12c4r4r4c8#               F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  exit then 0 ;
: R=(R+#8)t_
  `12c4r4r4c8#               F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  exit then 0 ;
: ldrsh_R,[R,#12]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F9B00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrsh_R,[R,#12]"
                                                                                                  exit then 0 ;
: R=(R+#)h_
  `12c4r4r12#                F9B00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#)h"
                                                                                                  exit then 0 ;
: R=(R+#12)h_
  `12c4r4r12#                F9B00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)h"
                                                                                                  exit then 0 ;
: ldrsh_R,[R,-#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F9300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,-#]"
                                                                                                  exit then 0 ;
: ldrsh_R,[R,-#]!_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F9300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,-#]!"
                                                                                                  exit then 0 ;
: ldrsh_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F9300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,#]"
                                                                                                  exit then 0 ;
: ldrsh_R,[R,#]!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F9300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,#]!"
                                                                                                  exit then 0 ;
: ldrsh_R,[R],-#_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F9300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],-#"
                                                                                                  exit then 0 ;
: ldrsh_R,[R],-#!_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F9300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],-#!"
                                                                                                  exit then 0 ;
: ldrsh_R,[R],#_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],#"
                                                                                                  exit then 0 ;
: ldrsh_R,[R],#!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F9300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],#!"
                                                                                                  exit then 0 ;
: R=(R-#)sh_
  `12c4r4rcPUW8#0            F9300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh"
                                                                                                  exit then 0 ;
: R=(R-#)sh,w_
  `12c4r4rcPUW8#1            F9300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh,w"
                                                                                                  exit then 0 ;
: R=(R+#)sh_
  `12c4r4rcPUW8#2            F9300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh"
                                                                                                  exit then 0 ;
: R=(R+#)sh,w_
  `12c4r4rcPUW8#3            F9300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh,w"
                                                                                                  exit then 0 ;
: R=(R-#)sh,p_
  `12c4r4rcPUW8#4            F9300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh,p"
                                                                                                  exit then 0 ;
: R=(R-#)sh,p_
  `12c4r4rcPUW8#5            F9300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh,p"
                                                                                                  exit then 0 ;
: R=(R+#)sh,p_
  `12c4r4rcPUW8#6            F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh,p"
                                                                                                  exit then 0 ;
: R=(R+#)sh,p_
  `12c4r4rcPUW8#7            F9300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh,p"
                                                                                                  exit then 0 ;
: R=(R-#),sh_
  `12c4r4rcPUW8#0            F9300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh"
                                                                                                  exit then 0 ;
: R=(R-#),sh,w_
  `12c4r4rcPUW8#1            F9300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh,w"
                                                                                                  exit then 0 ;
: R=(R+#),sh_
  `12c4r4rcPUW8#2            F9300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh"
                                                                                                  exit then 0 ;
: R=(R+#),sh,w_
  `12c4r4rcPUW8#3            F9300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh,w"
                                                                                                  exit then 0 ;
: R=(R-#),sh,p_
  `12c4r4rcPUW8#4            F9300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh,p"
                                                                                                  exit then 0 ;
: R=(R-#),sh,p_
  `12c4r4rcPUW8#5            F9300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh,p"
                                                                                                  exit then 0 ;
: R=(R+#),sh,p_
  `12c4r4rcPUW8#6            F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh,p"
                                                                                                  exit then 0 ;
: R=(R+#),sh,p_
  `12c4r4rcPUW8#7            F9300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh,p"
                                                                                                  exit then 0 ;
: ldrsb_R,[pc,#12]_                             original.mnemonic? @  not  if  0  exit  then
  `8cU7c4r12#                F93F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrsb_R,[pc,#12]"
                                                                                                  exit then 0 ;
: R=(pc+#)b_
  `8cU7c4r12#                F93F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#)b"
                                                                                                  exit then 0 ;
: R=(pc+#12)b_
  `8cU7c4r12#                F93F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#12)b"
                                                                                                  exit then 0 ;
: ldrsh_R,[R,R]_                                original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrsh_R,[R,R]"
                                                                                                  exit then 0 ;
: R=(R+R)h_
  `7c3r3r3r                  00005E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)h"
                                                                                                  exit then 0 ;
: ldrsh_R,[R<<R]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F9300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrsh_R,[R<<R]"
                                                                                                  exit then 0 ;
: R=(R<<R)h_
  `12c4r4r6c2s4r             F9300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" R=(R<<R)h"
                                                                                                  exit then 0 ;
: ldrsht_R,[R,#8]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsht_R,[R,#8]"
                                                                                                  exit then 0 ;
: R=(R+#)t_
  `12c4r4r4c8#               F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  exit then 0 ;
: R=(R+#8)t_
  `12c4r4r4c8#               F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  exit then 0 ;
: ldrt_R,[R,#8]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrt_R,[R,#8]"
                                                                                                  exit then 0 ;
: R=(R+#)t_
  `12c4r4r4c8#               F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  exit then 0 ;
: R=(R+#8)t_
  `12c4r4r4c8#               F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  exit then 0 ;
: lsls_R,R,#5_                                  original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" lsls_R,R,#5"
                                                                                                  exit then 0 ;
: lsl_R,R,#5_                                   original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" lsl_R,R,#5"
                                                                                                  exit then 0 ;
: R=R<<#,s_
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#,s"
                                                                                                  exit then 0 ;
: R=R<<#_
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#"
                                                                                                  exit then 0 ;
: R=R<<#5,s_
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#5,s"
                                                                                                  exit then 0 ;
: R=R<<#5s_
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#5s"
                                                                                                  exit then 0 ;
: R=R.u<<#_
  `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R.u<<#"
                                                                                                  exit then 0 ;
: lsl_R,R,#5,w_                                 original.mnemonic? @  not  if  0  exit  then
  `11cs5c3#4r2#2c4r          EA4F0000 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" lsl_R,R,#5,w"
                                                                                                  exit then 0 ;
: R=R<<#5'_
  `11cs5c3#4r2#2c4r          EA4F0000 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R<<#5'"
                                                                                                  exit then 0 ;
: R=R,u<<#5'_
  `11cs5c3#4r2#2c4r          EA4F0000 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u<<#5'"
                                                                                                  exit then 0 ;
: LSLs_R,R_                                     original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" LSLs_R,R"
                                                                                                  exit then 0 ;
: LSL_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" LSL_R,R"
                                                                                                  exit then 0 ;
: R<<R,s_
  `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" R<<R,s"
                                                                                                  exit then 0 ;
: R<<R_
  `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" R<<R"
                                                                                                  exit then 0 ;
: R,u<<R_
  `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" R,u<<R"
                                                                                                  exit then 0 ;
: lsl_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `11cs4r4c4r4c4r            FA00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" lsl_R,R,R"
                                                                                                  exit then 0 ;
: R=R<<R_
  `11cs4r4c4r4c4r            FA00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R<<R"
                                                                                                  exit then 0 ;
: R=R,u<<R_
  `11cs4r4c4r4c4r            FA00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R,u<<R"
                                                                                                  exit then 0 ;
: lsr_R,R,#5_                                   original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" lsr_R,R,#5"
                                                                                                  exit then 0 ;
: R=R>>#5_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R>>#5"
                                                                                                  exit then 0 ;
: R=R,>>#5_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,>>#5"
                                                                                                  exit then 0 ;
: R=R,>>#_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,>>#"
                                                                                                  exit then 0 ;
: 3R=3R>>#5_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" 3R=3R>>#5"
                                                                                                  exit then 0 ;
: R=Ru>>#5_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=Ru>>#5"
                                                                                                  exit then 0 ;
: R=R,u>>#5_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,u>>#5"
                                                                                                  exit then 0 ;
: R=R,u>>#_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,u>>#"
                                                                                                  exit then 0 ;
: 3R=3R,u>>#5_
  `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" 3R=3R,u>>#5"
                                                                                                  exit then 0 ;
: lsr_R,R,#5_                                   original.mnemonic? @  not  if  0  exit  then
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" lsr_R,R,#5"
                                                                                                  exit then 0 ;
: R=R>>#_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R>>#"
                                                                                                  exit then 0 ;
: R=R,>>#'_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,>>#'"
                                                                                                  exit then 0 ;
: R=R,>>#5_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,>>#5"
                                                                                                  exit then 0 ;
: 4R=4R>>#5_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" 4R=4R>>#5"
                                                                                                  exit then 0 ;
: R=R,u>>#_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u>>#"
                                                                                                  exit then 0 ;
: R=R,u>>#'_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u>>#'"
                                                                                                  exit then 0 ;
: R=R,u>>#5_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u>>#5"
                                                                                                  exit then 0 ;
: 4R=4R,u>>#5_
  `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" 4R=4R,u>>#5"
                                                                                                  exit then 0 ;
: lsrs_R,R_                                     original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" lsrs_R,R"
                                                                                                  exit then 0 ;
: lsr_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" lsr_R,R"
                                                                                                  exit then 0 ;
: R>>R,s_
  `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" R>>R,s"
                                                                                                  exit then 0 ;
: R>>R_
  `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" R>>R"
                                                                                                  exit then 0 ;
: Ru>>R_
  `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" Ru>>R"
                                                                                                  exit then 0 ;
: lsr_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `11cs4r4c4r4c4r            FA20F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" lsr_R,R,R"
                                                                                                  exit then 0 ;
: R=R>>R_
  `11cs4r4c4r4c4r            FA20F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R>>R"
                                                                                                  exit then 0 ;
: mla_R,R,R,R_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4r4c4r             FB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" mla_R,R,R,R"
                                                                                                  exit then 0 ;
: mla.R,R,R,R_
  `12c4r4r4r4c4r             FB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" mla.R,R,R,R"
                                                                                                  exit then 0 ;
: mls_R,R,R,R_
  `12c4r4r4r4c4r             FB000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" mls_R,R,R,R"
                                                                                                  exit then 0 ;
: mov_R,#8_                                     original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" mov_R,#8"
                                                                                                  exit then 0 ;
: movs_R,#8_                                    original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" movs_R,#8"
                                                                                                  exit then 0 ;
: R=#8_
  `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" R=#8"
                                                                                                  exit then 0 ;
: R=#8,s_
  `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" R=#8,s"
                                                                                                  exit then 0 ;
: mov_R,#12_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs5c3#4r8#            F04F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" mov_R,#12"
                                                                                                  exit then 0 ;
: R=#12_
  `5c#5cs5c3#4r8#            F04F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=#12"
                                                                                                  exit then 0 ;
: mov_R,#16_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#6c4#c3#4r8#            F2400000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" mov_R,#16"
                                                                                                  exit then 0 ;
: R=#16_
  `5c#6c4#c3#4r8#            F2400000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" R=#16"
                                                                                                  exit then 0 ;
: mov_R,R''_                                    original.mnemonic? @  not  if  0  exit  then
  `8cDN4r3r                  00004600 = if (2          7 7 2 0 23p      6  3  14p              2" mov_R,R''"
                                                                                                  exit then 0 ;
: R=R''_
  `8cDN4r3r                  00004600 = if (2          7 7 2 0 23p      6  3  14p              2" R=R''"
                                                                                                  exit then 0 ;
: movs_R,R'_                                    original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" movs_R,R'"
                                                                                                  exit then 0 ;
: mov_R,R'_                                     original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" mov_R,R'"
                                                                                                  exit then 0 ;
: R=R,s'_
  `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" R=R,s'"
                                                                                                  exit then 0 ;
: R=R'_
  `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" R=R'"
                                                                                                  exit then 0 ;
: movs_R,R_                                     original.mnemonic? @  not  if  0  exit  then
  `11cc8c4r4c4r              EA50F000 = if (4  0b 8 13p  3 0 14p                               2" movs_R,R"
                                                                                                  exit then 0 ;
: R=R,s_
  `11cc8c4r4c4r              EA50F000 = if (4  0b 8 13p  3 0 14p                               2" R=R,s"
                                                                                                  exit then 0 ;
: mov_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `11cs8c4r4c4r              EA40F000 = if (4  0b 8 13p  3 0 14p                               2" mov_R,R"
                                                                                                  exit then 0 ;
: R=R_
  `11cs8c4r4c4r              EA40F000 = if (4  0b 8 13p  3 0 14p                               2" R=R"
                                                                                                  exit then 0 ;
: movt_R=#_                                     original.mnemonic? @  not  if  0  exit  then
  `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" movt_R=#"
                                                                                                  exit then 0 ;
: movt_R=#16_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" movt_R=#16"
                                                                                                  exit then 0 ;
: Rt=#_
  `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" Rt=#"
                                                                                                  exit then 0 ;
: Rt=#16_
  `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" Rt=#16"
                                                                                                  exit then 0 ;
: mrs_R,cpsr_                                   original.mnemonic? @  not  if  0  exit  then
  `11cR8c4r8c                F3EF8000 = if (4  0b 8 14p                                        1" mrs_R,cpsr"
                                                                                                  exit then 0 ;
: mrs_R,spsr_                                   original.mnemonic? @  not  if  0  exit  then
  `11cR8c4r8c                F3FF8000 = if (4  0b 8 14p                                        1" mrs_R,spsr"
                                                                                                  exit then 0 ;
: R=cpsr_
  `11cR8c4r8c                F3EF8000 = if (4  0b 8 14p                                        1" R=cpsr"
                                                                                                  exit then 0 ;
: R=spsr_
  `11cR8c4r8c                F3FF8000 = if (4  0b 8 14p                                        1" R=spsr"
                                                                                                  exit then 0 ;
: msr_cpsr,R_                                   original.mnemonic? @  not  if  0  exit  then
  `11cR4r4c4m8c              F3808000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" msr_cpsr,R"
                                                                                                  exit then 0 ;
: msr_spsr,R_                                   original.mnemonic? @  not  if  0  exit  then
  `11cR4r4c4m8c              F3908000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" msr_spsr,R"
                                                                                                  exit then 0 ;
: cpsr=R_
  `11cR4r4c4m8c              F3808000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" cpsr=R"
                                                                                                  exit then 0 ;
: spsr=R_
  `11cR4r4c4m8c              F3908000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" spsr=R"
                                                                                                  exit then 0 ;
: mul_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004340 = if (2              2  0  13p      5  3  14p            2" mul_R,R"
                                                                                                  exit then 0 ;
: R*R'_
  `10c3r3r                   00004340 = if (2              2  0  13p      5  3  14p            2" R*R'"
                                                                                                  exit then 0 ;
: mul_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FB00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" mul_R,R,R"
                                                                                                  exit then 0 ;
: R=R*R_
  `12c4r4c4r4c4r             FB00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R*R"
                                                                                                  exit then 0 ;
: mvn_R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#5cs5c3#4r8#            F06F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" mvn_R,#"
                                                                                                  exit then 0 ;
: R=#8/_
  `5c#5cs5c3#4r8#            F06F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=#8/"
                                                                                                  exit then 0 ;
: R=#12/_
  `5c#5cs5c3#4r8#            F06F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=#12/"
                                                                                                  exit then 0 ;
: mvn_R,R/_                                     original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   000043C0 = if (2              2  0  13p      5  3  14p            2" mvn_R,R/"
                                                                                                  exit then 0 ;
: R=R/_
  `10c3r3r                   000043C0 = if (2              2  0  13p      5  3  14p            2" R=R/"
                                                                                                  exit then 0 ;
: mvn_R,R/<<#5_                                 original.mnemonic? @  not  if  0  exit  then
  `11cs5c3#4r2#ty4r          EA6F0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" mvn_R,R/<<#5"
                                                                                                  exit then 0 ;
: R=R/,<<#5_
  `11cs5c3#4r2#ty4r          EA6F0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R/,<<#5"
                                                                                                  exit then 0 ;
: R=R<<#5_
  `11cs5c3#4r2#ty4r          EA6F0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R<<#5"
                                                                                                  exit then 0 ;
: nop_
  `16c                       0000BF00 = if (2                                                  1" nop"
                                                                                                  exit then 0 ;
: nop_
  `16c                       0000BF00 = if (2                                                  1" nop"
                                                                                                  exit then 0 ;
: nop'_
  `32c                       F3AF8000 = if (4                                                  1" nop'"
                                                                                                  exit then 0 ;
: nop32_
  `32c                       F3AF8000 = if (4                                                  1" nop32"
                                                                                                  exit then 0 ;
: ror_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `11cs5c3#4r2#2c4r          EA4F0030 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" ror_R,R,#"
                                                                                                  exit then 0 ;
: R=R>>>#_
  `11cs5c3#4r2#2c4r          EA4F0030 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R>>>#"
                                                                                                  exit then 0 ;
: orns_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F0700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" orns_R,R,#"
                                                                                                  exit then 0 ;
: R=Ro#/,s_
  `5c#5cc4rc3#4r8#           F0700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=Ro#/,s"
                                                                                                  exit then 0 ;
: orn_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F0600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" orn_R,R,#"
                                                                                                  exit then 0 ;
: R=Ro#/_
  `5c#5cs4rc3#4r8#           F0600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Ro#/"
                                                                                                  exit then 0 ;
: orn_R,R,R,#_                                  original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,#"
                                                                                                  exit then 0 ;
: R=RoR<<#/_
  `11cs4rc3#4r2#ty4r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#/"
                                                                                                  exit then 0 ;
: orn_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: orn_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: orn_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: orn_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RoR/,<<#_
  `11cc4rc3#4r2#004r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,<<#"
                                                                                                  exit then 0 ;
: R=RoR/,>>#_
  `11cc4rc3#4r2#014r         EA600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>#"
                                                                                                  exit then 0 ;
: R=RoR/,a>>#_
  `11cc4rc3#4r2#104r         EA600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,a>>#"
                                                                                                  exit then 0 ;
: R=RoR/,>>>#_
  `11cc4rc3#4r2#114r         EA600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>>#"
                                                                                                  exit then 0 ;
: orns_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: orns_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: orns_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: orns_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RoR/,<<#,s_
  `11cc4rc3#4r2#004r         EA700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,<<#,s"
                                                                                                  exit then 0 ;
: R=RoR/,>>#,s_
  `11cc4rc3#4r2#014r         EA700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>#,s"
                                                                                                  exit then 0 ;
: R=RoR/,a>>#,s_
  `11cc4rc3#4r2#104r         EA700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,a>>#,s"
                                                                                                  exit then 0 ;
: R=RoR/,>>>#,s_
  `11cc4rc3#4r2#114r         EA700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>>#,s"
                                                                                                  exit then 0 ;
: orrs_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F0500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" orrs_R,R,#"
                                                                                                  exit then 0 ;
: R=Ro#,s_
  `5c#5cc4rc3#4r8#           F0500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=Ro#,s"
                                                                                                  exit then 0 ;
: orr_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F0400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" orr_R,R,#"
                                                                                                  exit then 0 ;
: R=Ro#_
  `5c#5cs4rc3#4r8#           F0400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Ro#"
                                                                                                  exit then 0 ;
: orr_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004300 = if (2              2  0  13p      5  3  14p            2" orr_R,R"
                                                                                                  exit then 0 ;
: RoR_
  `10c3r3r                   00004300 = if (2              2  0  13p      5  3  14p            2" RoR"
                                                                                                  exit then 0 ;
: orr_R,R,R,#_                                  original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,#"
                                                                                                  exit then 0 ;
: R=RoR<<#_
  `11cs4rc3#4r2#ty4r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#"
                                                                                                  exit then 0 ;
: orr_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: orr_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: orr_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: orr_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RoR<<#_
  `11cc4rc3#4r2#004r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#"
                                                                                                  exit then 0 ;
: R=RoR>>#_
  `11cc4rc3#4r2#014r         EA400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>#"
                                                                                                  exit then 0 ;
: R=RoR,a>>#_
  `11cc4rc3#4r2#104r         EA400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR,a>>#"
                                                                                                  exit then 0 ;
: R=RoR>>>#_
  `11cc4rc3#4r2#114r         EA400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>>#"
                                                                                                  exit then 0 ;
: orrs_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EA500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: orrs_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EA500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: orrs_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EA500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: orrs_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EA500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=RoR<<#,s_
  `11cc4rc3#4r2#004r         EA500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#,s"
                                                                                                  exit then 0 ;
: R=RoR>>#,s_
  `11cc4rc3#4r2#014r         EA500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>#,s"
                                                                                                  exit then 0 ;
: R=RoR,a>>#,s_
  `11cc4rc3#4r2#104r         EA500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR,a>>#,s"
                                                                                                  exit then 0 ;
: R=RoR>>>#,s_
  `11cc4rc3#4r2#114r         EA500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>>#,s"
                                                                                                  exit then 0 ;
: pkh_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,#"
                                                                                                  exit then 0 ;
: pkh_                                          original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh"
                                                                                                  exit then 0 ;
: pkh_R,R,#_
  `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,#"
                                                                                                  exit then 0 ;
: pkh_
  `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh"
                                                                                                  exit then 0 ;
: pkh_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: pkh_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EAC00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: pkhs_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EAD00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkhs_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: pkhs_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EAD00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkhs_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: pld_[R,+#12]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4c12#                F890F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[R,+#12]"
                                                                                                  exit then 0 ;
: pld_(R+#)_
  `12c4r4c12#                F890F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(R+#)"
                                                                                                  exit then 0 ;
: pld_[R,-#8]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r8c8#                 F810FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[R,-#8]"
                                                                                                  exit then 0 ;
: pld_(R-#)_
  `12c4r8c8#                 F810FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(R-#)"
                                                                                                  exit then 0 ;
: pld_[pc,-#12]_
  `20c12#                    F81FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[pc,-#12]"
                                                                                                  exit then 0 ;
: pld_[pc,+#12]_
  `20c12#                    F89FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[pc,+#12]"
                                                                                                  exit then 0 ;
: pld_(pc-#)_
  `20c12#                    F81FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(pc-#)"
                                                                                                  exit then 0 ;
: pld_(pc+#)_
  `20c12#                    F89FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(pc+#)"
                                                                                                  exit then 0 ;
: pld_[R,R<<#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r10c2s4r              F810F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[R,R<<#]"
                                                                                                  exit then 0 ;
: pld_(R+R<<#)_
  `12c4r10c2s4r              F810F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(R+R<<#)"
                                                                                                  exit then 0 ;
: pli_[R,+#12]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4c12#                F990F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[R,+#12]"
                                                                                                  exit then 0 ;
: pli_(R+#)_
  `12c4r4c12#                F990F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(R+#)"
                                                                                                  exit then 0 ;
: pli_[R,-#8]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r8c8#                 F910FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[R,-#8]"
                                                                                                  exit then 0 ;
: pli_(R-#)_                                    original.mnemonic? @  not  if  0  exit  then
  `12c4r8c8#                 F910FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(R-#)"
                                                                                                  exit then 0 ;
: pli_[pc,-#12]_                                original.mnemonic? @  not  if  0  exit  then
  `20c12#                    F91FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[pc,-#12]"
                                                                                                  exit then 0 ;
: pli_[pc,+#12]_                                original.mnemonic? @  not  if  0  exit  then
  `20c12#                    F99FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[pc,+#12]"
                                                                                                  exit then 0 ;
: pli_(pc-#)_                                   original.mnemonic? @  not  if  0  exit  then
  `20c12#                    F91FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(pc-#)"
                                                                                                  exit then 0 ;
: pli_(pc+#)_                                   original.mnemonic? @  not  if  0  exit  then
  `20c12#                    F99FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(pc+#)"
                                                                                                  exit then 0 ;
: pli_[R,R<<#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r10c2s4r              F910F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[R,R<<#]"
                                                                                                  exit then 0 ;
: pli_(R+R<<#)_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r10c2s4r              F910F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(R+R<<#)"
                                                                                                  exit then 0 ;
: pop_                                          original.mnemonic? @  not  if  0  exit  then
  `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop"
                                                                                                  exit then 0 ;
: pop_
  `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop"
                                                                                                  exit then 0 ;
: pop{}_R_                                      original.mnemonic? @  not  if  0  exit  then
  `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop{}_R"
                                                                                                  exit then 0 ;
: pop{}_                                        original.mnemonic? @  not  if  0  exit  then
  `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop{}"
                                                                                                  exit then 0 ;
: pop_R_
  `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop_R"
                                                                                                  exit then 0 ;
: pop_R8_
  `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop_R8"
                                                                                                  exit then 0 ;
: pop{}'_
  `16cPMc13r                 E8BD0000 = if (4    .{r0~r12+pc+lr}                               1" pop{}'"
                                                                                                  exit then 0 ;
: push{}_
  `7cM8r                     0000B400 = if (2      .{r0~r7+lr}                                 1" push"
                                                                                                  exit then 0 ;
: push_
  `7cM8r                     0000B400 = if (2      .{r0~r7+lr}                                 1" push"
                                                                                                  exit then 0 ;
: push{}'_
  `17cMc13r                  E92D0000 = if (4      .{r0~r12+lr}                                1" push"
                                                                                                  exit then 0 ;
: qadd_R,R,R_
  `12c4r4c4r4c4r             FA80F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qadd_R,R,R"
                                                                                                  exit then 0 ;
: qadd16_R,R,R_
  `12c4r4c4r4c4r             FA90F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qadd16_R,R,R"
                                                                                                  exit then 0 ;
: qadd8_R,R,R_
  `12c4r4c4r4c4r             FA80F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qadd8_R,R,R"
                                                                                                  exit then 0 ;
: qasx_R,R,R_
  `12c4r4c4r4c4r             FAA0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qasx_R,R,R"
                                                                                                  exit then 0 ;
: qdadd_R,R,R_
  `12c4r4c4r4c4r             FA80F090 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qdadd_R,R,R"
                                                                                                  exit then 0 ;
: qdsub_R,R,R_
  `12c4r4c4r4c4r             FA80F0B0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qdsub_R,R,R"
                                                                                                  exit then 0 ;
: qsax_R,R,R_
  `12c4r4c4r4c4r             FAE0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsax_R,R,R"
                                                                                                  exit then 0 ;
: qsub16_R,R,R_
  `12c4r4c4r4c4r             FA80F0A0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsub16_R,R,R"
                                                                                                  exit then 0 ;
: qsub16_R,R,R_
  `12c4r4c4r4c4r             FAD0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsub16_R,R,R"
                                                                                                  exit then 0 ;
: qsub8_R,R,R_
  `12c4r4c4r4c4r             FAC0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsub8_R,R,R"
                                                                                                  exit then 0 ;
: rbit_R,R,R_
  `12c4r4c4r4c4r             FA90F0A0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" rbit_R,R,R"
                                                                                                  exit then 0 ;
: rev_R,R_
  `10c3r3r                   0000BA00 = if (2              2  0  13p      5  3  14p            2" rev_R,R"
                                                                                                  exit then 0 ;
: rev_R,R,R_
  `12c4r4c4r4c4r             FA90F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" rev_R,R,R"
                                                                                                  exit then 0 ;
: rev16_R,R_
  `10c3r3r                   0000BA40 = if (2              2  0  13p      5  3  14p            2" rev16_R,R"
                                                                                                  exit then 0 ;
: rev16_R,R,R_
  `12c4r4c4r4c4r             FA90F090 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" rev16_R,R,R"
                                                                                                  exit then 0 ;
: revsh_R,R_
  `10c3r3r                   0000BAC0 = if (2              2  0  13p      5  3  14p            2" revsh_R,R"
                                                                                                  exit then 0 ;
: revsh_R,R,R_
  `12c4r4c4r4c4r             FA90F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" revsh_R,R,R"
                                                                                                  exit then 0 ;
: ror_R,R_
  `10c3r3r                   000041C0 = if (2              2  0  13p      5  3  14p            2" ror_R,R"
                                                                                                  exit then 0 ;
: ror_R,R,R_
  `11cs4r4c4r4c4r            FA60F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ror_R,R,R"
                                                                                                  exit then 0 ;
: rrxs_R,R_                                     original.mnemonic? @  not  if  0  exit  then
  `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" rrxs_R,R"
                                                                                                  exit then 0 ;
: rrx_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `11cs8c4r4c4r              EA4F0030 = if (4  0b 8 13p  3 0 14p                               2" rrx_R,R"
                                                                                                  exit then 0 ;
: R=rrc_R,s_
  `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" R=rrc_R,s"
                                                                                                  exit then 0 ;
: R=src_R,s_
  `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" R=src_R,s"
                                                                                                  exit then 0 ;
: R=src_R_
  `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" R=src_R"
                                                                                                  exit then 0 ;
: R=sr_R_
  `11cs8c4r4c4r              EA4F0030 = if (4  0b 8 13p  3 0 14p                               2" R=sr_R"
                                                                                                  exit then 0 ;
: rsb_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" rsb_R,R"
                                                                                                  exit then 0 ;
: rsb_R,R,#0_                                   original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" rsb_R,R,#0"
                                                                                                  exit then 0 ;
: R=-R_
  `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" R=-R"
                                                                                                  exit then 0 ;
: R=0-R_
  `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" R=0-R"
                                                                                                  exit then 0 ;
: rsbs_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1D00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" rsbs_R,R,#"
                                                                                                  exit then 0 ;
: R=#-R,s_
  `5c#5cc4rc3#4r8#           F1D00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=#-R,s"
                                                                                                  exit then 0 ;
: rsb_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F1C00000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" rsb_R,R,#"
                                                                                                  exit then 0 ;
: R=#-R_
  `5c#5cs4rc3#4r8#           F1C00000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=#-R"
                                                                                                  exit then 0 ;


: rsb_R,R,R<<#_
  `11cs4rc3#4r2#ty4r         EBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R<<#"
                                                                                                  exit then 0 ;
\ : R=R-R<<#_
\  `11cs4rc3#4r2#ty4r         EBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#"
\                                                                                                  exit then 0 ;
 
: rsb_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: rsb_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EBC00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: rsb_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EBC00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: rsb_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EBC00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: rsbs_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EBD00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: rsbs_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EBD00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: rsbs_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EBD00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: rsbs_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EBD00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: sadd16_R,R,R_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FA90F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sadd16_R,R,R"
                                                                                                  exit then 0 ;
: sadd8_R,R,R_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FA80F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sadd8_R,R,R"
                                                                                                  exit then 0 ;
: sasx_R,R,R_                                   original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FAA0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sasx_R,R,R"
                                                                                                  exit then 0 ;
: sbcs_R,R,#_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" sbcs_R,R,#"
                                                                                                  exit then 0 ;
: R=R-#-c,s_
  `5c#5cc4rc3#4r8#           F1700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R-#-c,s"
                                                                                                  exit then 0 ;
: sbc_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c#5cs4rc3#4r8#           F1600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" sbc_R,R,#"
                                                                                                  exit then 0 ;
: R=R-#-c_
  `5c#5cs4rc3#4r8#           F1600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=R-#-c"
                                                                                                  exit then 0 ;
: sbc_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004180 = if (2              2  0  13p      5  3  14p            2" sbc_R,R"
                                                                                                  exit then 0 ;
: R-R-c_
  `10c3r3r                   00004180 = if (2              2  0  13p      5  3  14p            2" R-R-c"
                                                                                                  exit then 0 ;
: sbc_R,R,R,#_                                  original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,#"
                                                                                                  exit then 0 ;
: R=R-R-c<<#_
  `11cs4rc3#4r2#ty4r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c<<#"
                                                                                                  exit then 0 ;
: sbc_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: sbc_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EB600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: sbc_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EB600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: sbc_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EB600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R-R-c<<#_
  `11cc4rc3#4r2#004r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c<<#"
                                                                                                  exit then 0 ;
: R=R-R-c>>#_
  `11cc4rc3#4r2#014r         EB600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>#"
                                                                                                  exit then 0 ;
: R=R-R-c,a>>#_
  `11cc4rc3#4r2#104r         EB600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c,a>>#"
                                                                                                  exit then 0 ;
: R=R-R-c>>>#_
  `11cc4rc3#4r2#114r         EB600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>>#"
                                                                                                  exit then 0 ;
: sbcs_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EB700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: sbcs_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EB700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: sbcs_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EB700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: sbcs_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EB700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R-R-c<<#,s_
  `11cc4rc3#4r2#004r         EB700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c<<#,s"
                                                                                                  exit then 0 ;
: R=R-R-c>>#,s_
  `11cc4rc3#4r2#014r         EB700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>#,s"
                                                                                                  exit then 0 ;
: R=R-R-c,a>>#,s_
  `11cc4rc3#4r2#104r         EB700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c,a>>#,s"
                                                                                                  exit then 0 ;
: R=R-R-c>>>#,s_
  `11cc4rc3#4r2#114r         EB700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>>#,s"
                                                                                                  exit then 0 ;
: sdiv_R,R,R_
  `12c4r4c4r4c4r             FB90F0F0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sdiv_R,R,R"
                                                                                                  exit then 0 ;
: sel_R,R,R_
  `12c4r4c4r4c4r             FAA0F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sel_R,R,R"
                                                                                                  exit then 0 ;
: sev_
  `16c                       0000B840 = if (2                                                  1" sev"
                                                                                                  exit then 0 ;
: sev,w_
  `32c                       F3AF8004 = if (4                                                  1" sev,w"
                                                                                                  exit then 0 ;
: shadd16_R,R,R_
  `12c4r4c4r4c4r             FA90F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shadd16_R,R,R"
                                                                                                  exit then 0 ;
: shadd8_R,R,R_
  `12c4r4c4r4c4r             FA80F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shadd8_R,R,R"
                                                                                                  exit then 0 ;
: shasx_R,R,R_
  `12c4r4c4r4c4r             FAA0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shasx_R,R,R"
                                                                                                  exit then 0 ;
: shsax_R,R,R_
  `12c4r4c4r4c4r             FAE0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shsax_R,R,R"
                                                                                                  exit then 0 ;
: shsub16_R,R,R_
  `12c4r4c4r4c4r             FAD0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shsub16_R,R,R"
                                                                                                  exit then 0 ;
: shsub8_R,R,R_
  `12c4r4c4r4c4r             FAC0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shsub8_R,R,R"
                                                                                                  exit then 0 ;
: smc_#_
  `12c4#16c                  F7F08000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" smc_#"
                                                                                                  exit then 0 ;
: R=R*R+R,ll_
  `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,ll"
                                                                                                  exit then 0 ;
: R=R*R+R,lh_
  `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,lh"
                                                                                                  exit then 0 ;
: R=R*R+R,hl_
  `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,hl"
                                                                                                  exit then 0 ;
: R=R*R+R,hh_
  `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,hh"
                                                                                                  exit then 0 ;
: smlad_R=R*R+R_
  `12c4r4r4r4c4r             FB200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" smlad_R=R*R+R"
                                                                                                  exit then 0 ;
: smlal.R_R,R,R_
  `12c4r4r4r4c4r             FBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" smlal.R_R,R,R"
                                                                                                  exit then 0 ;
: smull_R,R,R,R_
  `12c4r4r4r4c4r             FB800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" smull_R,R,R,R"
                                                                                                  exit then 0 ;
: ssax_R,R,R_
  `12c4r4c4r4c4r             FBE0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ssax_R,R,R"
                                                                                                  exit then 0 ;
: ssub16_R,#,R_
  `12c4r4c4r4c4r             FAD0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ssub16_R,#,R"
                                                                                                  exit then 0 ;
: ssub8_R,#,R_
  `12c4r4c4r4c4r             FAC0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ssub8_R,#,R"
                                                                                                  exit then 0 ;
: push_R_
  `12c4r16c                  E9000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R"
                                                                                                  exit then 0 ;
: push_R.m=1_
  `12c4r16c                  E9004000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R.m=1"
                                                                                                  exit then 0 ;
: push_R!_
  `12c4r16c                  E9200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R!"
                                                                                                  exit then 0 ;
: push_R!.m=1_
  `12c4r16c                  E9204000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R!.m=1"
                                                                                                  exit then 0 ;
: stm_                                          original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C000 = if (2  .{r0~r7}.rn                                     1" stm"
                                                                                                  exit then 0 ;
: stmia_R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `5c3R8Rlist                0000C000 = if (2  .{r0~r7}.rn                                     1" stmia_R,#"
                                                                                                  exit then 0 ;
: pop_R!',#_
  `5c3R8Rlist                0000C000 = if (2  .{r0~r7}.rn                                     1" pop_R!',#"
                                                                                                  exit then 0 ;
: pop_R_
  `12c4r16c                  E8800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R"
                                                                                                  exit then 0 ;
: pop_R.m=1_
  `12c4r16c                  E8804000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R.m=1"
                                                                                                  exit then 0 ;
: pop_R!_
  `12c4r16c                  E8A00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R!"
                                                                                                  exit then 0 ;
: pop_R!.m=1_
  `12c4r16c                  E8A04000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R!.m=1"
                                                                                                  exit then 0 ;
: str_R,[R,#5]_                                 original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00006000 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" str_R,[R,#5]"
                                                                                                  exit then 0 ;
: (R+#5)=R_
  `5c5#3r3r*4'               00006000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p     deal.(R+#5)=R          3" (R+#5)=R"
\ deal.(R+#5)=R
                                                                                                  exit then 0 ;











: str_R,[rp,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `5c3r8#*4                  00009000 = if (2             0a  8  13p      7  0  14p*4          2" str_R,[rp,#]"
                                                                                                  exit then 0 ;
\ : (rp+#)=R_
\  `5c3r8#*4                  00009000 = if (2             0a  8  13p      7  0  14p*4          2" (rp+#)=R"
\                                                                                                  exit then 0 ;
\ 2019.7.23
: (rp+#)=R_
  `5c3r8#*4                  00009000 = if (2               7  0  13p*4   0a  8  14p            2" (rp+#)=R"
                                                                                                  exit then 0 ;
: push_R'_
  `5c3r8c                    00009001 = if (2   0a  8  14p                                     1" push_R'"
                                                                                                  exit then 0 ;
: str_R,[R,#]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8C00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" str_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#12)=R_
  `12c4r4r12#                F8C00000 = if (4  13 10  12p 0b 0 13p 0f 0c 14p   deal.(R+#12)=R  3" (R+#12)=R"
                                                                                                  exit then 0 ;



: str_R,[R,-#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F8400800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,-#]"
                                                                                                  exit then 0 ;
: str_R,[R,-#]!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F8400900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,-#]!"
                                                                                                  exit then 0 ;
: str_R,[R,#]_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F8400A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,#]"
                                                                                                  exit then 0 ;
: str_R,[R,#]!_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F8400B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,#]!"
                                                                                                  exit then 0 ;
: str_R,[R],-#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F8400C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],-#"
                                                                                                  exit then 0 ;
: str_R,[R],-#!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F8400D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],-#!"
                                                                                                  exit then 0 ;
: str_R,[R],#_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F8400E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],#"
                                                                                                  exit then 0 ;
: str_R,[R],#!_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F8400F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],#!"
                                                                                                  exit then 0 ;
: (R-#)=R_
  `12c4r4rcPUW8#0'           F8400800 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R"
                                                                                                  exit then 0 ;
: (R-#)=R,w_
  `12c4r4rcPUW8#1'           F8400900 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,w"
                                                                                                  exit then 0 ;
: (R+#)=R,w_
  `12c4r4rcPUW8#3'           F8400B00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,w"
                                                                                                  exit then 0 ;
: (R-#)=R,p_
  `12c4r4rcPUW8#4'           F8400C00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,p"
                                                                                                  exit then 0 ;
: (R-#)=R,p_
  `12c4r4rcPUW8#5'           F8400D00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,p"
                                                                                                  exit then 0 ;
: (R+#)=R,p_
  `12c4r4rcPUW8#6'           F8400E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,p"
                                                                                                  exit then 0 ;
: (R+#)=R,p_
  `12c4r4rcPUW8#7'           F8400F00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,p"
                                                                                                  exit then 0 ;
: str_R,[R,R]_                                  original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005000 = if (2   2  0  12p  5  3  13p      8  6  14p            3" str_R,[R,R]"
                                                                                                  exit then 0 ;
: (R+R)=R_
  `7c3r3r3r                  00005000 = if (2   2  0  12p  5  3  13p      8  6  14p            3" (R+R)=R"
                                                                                                  exit then 0 ;
: str_R,[R,R<<#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F8400000 = if (4  0f 0c 11p 13 10 12p 3 0 13p  5 4 14p            4" str_R,[R,R<<#]"
                                                                                                  exit then 0 ;
: (R+R<<#)=R_
  `12c4r4r6c2s4r'            F8400000 = if (4  13 10  11p 3 0 12p 5 4 13p 0f 0c 14p                   4" (R+R<<#)=R"
                                                                                                  exit then 0 ;
: strb_R,[R,#5]_                                original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00007000 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" strb_R,[R,#5]"
                                                                                                  exit then 0 ;
: (R+#)=R,b_
  `5c5#3r3r*4'               00007000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#)=R,b"
                                                                                                  exit then 0 ;
: (R+#5)=R,b_
  `5c5#3r3r*4'               00007000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#5)=R,b"
                                                                                                  exit then 0 ;
: strb_R,[R,#12]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8800000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" strb_R,[R,#12]"
                                                                                                  exit then 0 ;
: (R+#12)=R,b_
  `12c4r4r12#                F8800000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" (R+#12)=R,b"
                                                                                                  exit then 0 ;
\ ????????????????????????????  2016.9.1

: (R+#12)=R,b_
  `12c4r4r12#                F8800000 = if (4  13 10 12p 0b 0  13p  0f 0c 14p                  3" (R+#12)=R,b"
                                                                                                  exit then 0 ;





: strb_R,[R,-#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F8000800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,-#]"
                                                                                                  exit then 0 ;
: strb_R,[R,-#]!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F8000900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,-#]!"
                                                                                                  exit then 0 ;
: strb_R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F8000A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,#]"
                                                                                                  exit then 0 ;
: strb_R,[R,#]!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F8000B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,#]!"
                                                                                                  exit then 0 ;
: strb_R,[R],-#_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F8000C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],-#"
                                                                                                  exit then 0 ;
: strb_R,[R],-#!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F8000D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],-#!"
                                                                                                  exit then 0 ;
: strb_R,[R],#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F8000E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],#"
                                                                                                  exit then 0 ;
: strb_R,[R],#!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F8000F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],#!"
                                                                                                  exit then 0 ;
: (R-#)=R,b_
  `12c4r4rcPUW8#0'           F8000800 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b"
                                                                                                  exit then 0 ;
: (R-#)=R,b,w_
  `12c4r4rcPUW8#1'           F8000900 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b,w"
                                                                                                  exit then 0 ;
: (R+#)=R,b_
  `12c4r4rcPUW8#2'           F8000A00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b"
                                                                                                  exit then 0 ;
: (R+#)=R,b,w_
  `12c4r4rcPUW8#3'           F8000B00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b,w"
                                                                                                  exit then 0 ;
: (R-#)=R,b,p_
  `12c4r4rcPUW8#4'           F8000C00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b,p"
                                                                                                  exit then 0 ;
: (R-#)=R,b,p_
  `12c4r4rcPUW8#5'           F8000D00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b,p"
                                                                                                  exit then 0 ;
: (R+#)=R,b,p_
  `12c4r4rcPUW8#6'           F8000E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b,p"
                                                                                                  exit then 0 ;
: (R+#)=R,b,p_
  `12c4r4rcPUW8#7'           F8000F00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b,p"
                                                                                                  exit then 0 ;
: strb_R,[R,R]_                                 original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" strb_R,[R,R]"
                                                                                                  exit then 0 ;
: (R+R)=R,b_
  `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" (R+R)=R,b"
                                                                                                  exit then 0 ;
: strb_R,[R,R<<#]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F8000000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" strb_R,[R,R<<#]"
                                                                                                  exit then 0 ;
: (R+R<<#)=R,b_
  `12c4r4r6c2s4r'            F8000000 = if (4  13 10  12p 3 0 13p  0f 0c 14p                   3" (R+R<<#)=R,b"
                                                                                                  exit then 0 ;
: strbt_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F8000E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strbt_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=R,bt_
  `12c4r4r4c8#'              F8000E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,bt"
                                                                                                  exit then 0 ;
: strd_R,R,[R,-#]_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E8400000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,-#]"
                                                                                                  exit then 0 ;
: strd_R,R,[R,-#]!_                             original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E8600000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,-#]!"
                                                                                                  exit then 0 ;
: strd_R,R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E8C00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,#]"
                                                                                                  exit then 0 ;
: strd_R,R,[R,#]!_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E8E00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,#]!"
                                                                                                  exit then 0 ;
: strd_R,R,[R],-#_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E9400000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],-#"
                                                                                                  exit then 0 ;
: strd_R,R,[R],-#!_                             original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E9600000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],-#!"
                                                                                                  exit then 0 ;
: strd_R,R,[R],#_                               original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E9C00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],#"
                                                                                                  exit then 0 ;
: strd_R,R,[R],#!_                              original.mnemonic? @  not  if  0  exit  then
  `7cPUcWc4r4r4r8#           E9E00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],#!"
                                                                                                  exit then 0 ;
: (R-#)=R,R,d_
  `7cPUcWc4r4r4r8#           E8400000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d"
                                                                                                  exit then 0 ;
: (R-#)=R,R,d,w_
  `7cPUcWc4r4r4r8#           E8600000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d,w"
                                                                                                  exit then 0 ;
: (R+#)=R,R,d_
  `7cPUcWc4r4r4r8#           E8C00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d"
                                                                                                  exit then 0 ;
: (R+#)=R,R,d,w_
  `7cPUcWc4r4r4r8#           E6E00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d,w"
                                                                                                  exit then 0 ;
: (R-#)=R,R,d,p_
  `7cPUcWc4r4r4r8#           E9400000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d,p"
                                                                                                  exit then 0 ;
: (R-#)=R,R,d,p_
  `7cPUcWc4r4r4r8#           E9600000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d,p"
                                                                                                  exit then 0 ;
: (R+#)=R,R,d,p_
  `7cPUcWc4r4r4r8#           E9C00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d,p"
                                                                                                  exit then 0 ;
: (R+#)=R,R,d,p,w_
  `7cPUcWc4r4r4r8#           E9E00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d,p,w"
                                                                                                  exit then 0 ;
: strex_R,R,[R,#]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               E8400000 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strex_R,R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=R,R,ex_
  `12c4r4r4c8#'              E8400000 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,R,ex"
                                                                                                  exit then 0 ;
: strexb_R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               E8C00040 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strexb_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=R,exb_
  `12c4r4r4c8#'              E8C00040 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,exb"
                                                                                                  exit then 0 ;
: strexd_R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               E8C00070 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strexd_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=R,exd_
  `12c4r4r4c8#'              E8C00070 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,exd"
                                                                                                  exit then 0 ;
: strexh_R,[R,#]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               E8C00F50 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strexh_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=R,exh_
  `12c4r4r4c8#'              E8C00F50 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,exh"
                                                                                                  exit then 0 ;
: strh_R,[R,#5]_                                original.mnemonic? @  not  if  0  exit  then
  `5c5#3r3r*4                00008000 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" strh_R,[R,#5]"
                                                                                                  exit then 0 ;
: (R+#5)=R,h_
  `5c5#3r3r*4'               00008000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#5)=R,h"
                                                                                                  exit then 0 ;
: strh_R,[R,#12]_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4r12#                F8A00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" strh_R,[R,#12]"
                                                                                                  exit then 0 ;
: (R+#12)=R,h_
  `12c4r4r12#                F8A00000 = if (4  13 10  12p 0b 0 13p 0f 0c 14p                   3" (R+#12)=R,h"
                                                                                                  exit then 0 ;
: strh_R,[R,-#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#0            F8200800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,-#]"
                                                                                                  exit then 0 ;
: strh_R,[R,-#]!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#1            F8200900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,-#]!"
                                                                                                  exit then 0 ;
: strh_R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#2            F8200A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,#]"
                                                                                                  exit then 0 ;
: strh_R,[R,#]!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#3            F8200B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,#]!"
                                                                                                  exit then 0 ;
: strh_R,[R],-#_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#4            F8200C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],-#"
                                                                                                  exit then 0 ;
: strh_R,[R],-#!_                               original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#5            F8200D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],-#!"
                                                                                                  exit then 0 ;
: strh_R,[R],#_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#6            F8200E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],#"
                                                                                                  exit then 0 ;
: strh_R,[R],#!_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4rcPUW8#7            F8200F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],#!"
                                                                                                  exit then 0 ;
: (R-#)=R,h_
  `12c4r4rcPUW8#0'           F8200800 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h"
                                                                                                  exit then 0 ;
: (R-#)=R,h,w_
  `12c4r4rcPUW8#1'           F8200900 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h,w"
                                                                                                  exit then 0 ;
: (R+#)=R,h_
  `12c4r4rcPUW8#2'           F8200A00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h"
                                                                                                  exit then 0 ;
: (R+#)=R,h,w_
  `12c4r4rcPUW8#3'           F8200B00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h,w"
                                                                                                  exit then 0 ;
: (R-#)=R,h,p_
  `12c4r4rcPUW8#4'           F8200C00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h,p"
                                                                                                  exit then 0 ;
: (R-#)=R,h,p_
  `12c4r4rcPUW8#5'           F8200D00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h,p"
                                                                                                  exit then 0 ;
: (R+#)=R,h,p_
  `12c4r4rcPUW8#6'           F8200E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h,p"
                                                                                                  exit then 0 ;
: (R+#)=R,h,p_
  `12c4r4rcPUW8#7'           F8200F00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h,p"
                                                                                                  exit then 0 ;
: strh_R,[R,R]_                                 original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" strh_R,[R,R]"
                                                                                                  exit then 0 ;
: (R+R)=R,h_
  `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" (R+R)=R,h"
                                                                                                  exit then 0 ;
: strh_R,[R,R<<#]_                              original.mnemonic? @  not  if  0  exit  then
  `12c4r4r6c2s4r             F8020000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" strh_R,[R,R<<#]"
                                                                                                  exit then 0 ;
: (R+R<<#)=R,h_
  `12c4r4r6c2s4r'            F8020000 = if (4  13 10  12p 3 0 13p  0f 0c 14p                   3" (R+R<<#)=R,h"
                                                                                                  exit then 0 ;
: strht_R,[R,#]_                                original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F8020E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strht_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=R,h_
  `12c4r4r4c8#'              F8020E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h"
                                                                                                  exit then 0 ;
: strt_R,[R,#]_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4r4c8#               F8400E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strt_R,[R,#]"
                                                                                                  exit then 0 ;
: (R+#)=Rt_
  `12c4r4r4c8#'              F8400E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=Rt"
                                                                                                  exit then 0 ;
: sub_R,R,#3_                                   original.mnemonic? @  not  if  0  exit  then
  `7c3#3r3r                  00001E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" sub_R,R,#3"
                                                                                                  exit then 0 ;
: R=R-#3_
  `7c3#3r3r                  00001E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R-#3"
                                                                                                  exit then 0 ;
: sub_R,#8_                                     original.mnemonic? @  not  if  0  exit  then
  `5c3r8#                    00003800 = if (2             0a  8  13p      7  0  14p            2" sub_R,#8"
                                                                                                  exit then 0 ;
: R-#8_
  `5c3r8#                    00003800 = if (2             0a  8  13p      7  0  14p            2" R-#8"
                                                                                                  exit then 0 ;
: subs_R,R,#12_                                 original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1B00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" subs_R,R,#12"
                                                                                                  exit then 0 ;
: R=R-#,s_
  `5c#5cc4rc3#4r8#           F1B00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R-#,s"
                                                                                                  exit then 0 ;
: R=R-#12,s_
  `5c#5cc4rc3#4r8#           F1B00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R-#12,s"
                                                                                                  exit then 0 ;
: sub_R,R,#12_                                  original.mnemonic? @  not  if  0  exit  then
  `5c#5cc4rc3#4r8#           F1A00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" sub_R,R,#12"
                                                                                                  exit then 0 ;
: R=R-#12_
  `5c#5cc4rc3#4r8#           F1A00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R-#12"
                                                                                                  exit then 0 ;
: R=R-#_
  `5c#5cc4rc3#4r8#           F1A00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p138     3" R=R-#"
                                                                                                  exit then 0 ;
: sub_R,R,R_                                    original.mnemonic? @  not  if  0  exit  then
  `7c3r3r3r                  00001A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" sub_R,R,R"
                                                                                                  exit then 0 ;
: R=R-R_
  `7c3r3r3r                  00001A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R-R"
                                                                                                  exit then 0 ;



comment:
: sub_R,R,R.shift.#_                            original.mnemonic? @  not  if  0  exit  then
  `11cs4rc3#4r2#ty4r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R.shift.#"
                                                                                                  exit then 0 ;
: R=R-R<<#_
  `11cs4rc3#4r2#ty4r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#"
                                                                                                  exit then 0 ;
comment;


: sub_R,R,R,lsl,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: sub_R,R,R,lsr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EBA00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: sub_R,R,R,asr,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EBA00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: sub_R,R,R,ror,#_                              original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EBA00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R-R<<#_
  `11cc4rc3#4r2#004r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#"
                                                                                                  exit then 0 ;
: R=R-R>>#_
  `11cc4rc3#4r2#014r         EBA00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>#"
                                                                                                  exit then 0 ;
: R=R-R,a>>#_
  `11cc4rc3#4r2#104r         EBA00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R,a>>#"
                                                                                                  exit then 0 ;
: R=R-R>>>#_
  `11cc4rc3#4r2#114r         EBA00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>>#"
                                                                                                  exit then 0 ;
: subs_R,R,R,lsl,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#004r         EBB00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,lsl,#"
                                                                                                  exit then 0 ;
: subs_R,R,R,lsr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#014r         EBB00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,lsr,#"
                                                                                                  exit then 0 ;
: subs_R,R,R,asr,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#104r         EBB00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,asr,#"
                                                                                                  exit then 0 ;
: subs_R,R,R,ror,#_                             original.mnemonic? @  not  if  0  exit  then
  `11cc4rc3#4r2#114r         EBB00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,ror,#"
                                                                                                  exit then 0 ;
: R=R-R<<#,s_
  `11cc4rc3#4r2#004r         EBB00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#,s"
                                                                                                  exit then 0 ;
: R=R-R>>#,s_
  `11cc4rc3#4r2#014r         EBB00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>#,s"
                                                                                                  exit then 0 ;
: R=R-R,a>>#,s_
  `11cc4rc3#4r2#104r         EBB00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R,a>>#,s"
                                                                                                  exit then 0 ;
: R=R-R>>>#,s_
  `11cc4rc3#4r2#114r         EBB00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>>#,s"
                                                                                                  exit then 0 ;
: sub_rp,#7_                                    original.mnemonic? @  not  if  0  exit  then
  `9c7#                      0000B080 = if (2    6 0  14p                                      1" sub_rp,#7"
                                                                                                  exit then 0 ;
: rp-#7_
  `9c7#                      0000B080 = if (2    6 0  14p                                      1" rp-#"
                                                                                                  exit then 0 ;
: rp-#7*4_
  `9c7#                      0000B080 = if (2    6 0  14p                                      1" rp-#*4"
                                                                                                  exit then 0 ;
: sub_rp,#12_                                   original.mnemonic? @  not  if  0  exit  then
  `5c#5cs5c3#4r8#*4          F1AD0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" sub_rp,#"
                                                                                                  exit then 0 ;
: R=rp-#12_
  `5c#5cs5c3#4r8#*4          F1AD0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=rp-#"
                                                                                                  exit then 0 ;
: R=rp-#_
  `5c#5cs5c3#4r8#*4          F1AD0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=rp-#"
                                                                                                  exit then 0 ;
: R=rp-#,w_                                     original.mnemonic? @  not  if  0  exit  then
  `5c#11c3#4r8#              F2AD0000 = if (4                       0b 8 14p                   2" R=rp-#,w"
                                                                                                  exit then 0 ;
: R=rp-#,w_
  `5c#11c3#4r8#              F2AD0000 = if (4                       0b 8 14p                   2" R=rp-#,w"
                                                                                                  exit then 0 ;
: sub_R,rp_                                     original.mnemonic? @  not  if  0  exit  then
  `11cs5c3#4r2#ty4r          EBAB0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" sub_R,rp"
                                                                                                  exit then 0 ;
: R=R-rp<<???_
  `11cs5c3#4r2#ty4r          EBAB0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R-rp<<???"
                                                                                                  exit then 0 ;
: sub_pc,lr,#_                                  original.mnemonic? @  not  if  0  exit  then
  `24c8#                     F3DE8F00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" sub_pc,lr,#"
                                                                                                  exit then 0 ;
: pc=lr-#_
  `24c8#                     F3DE8F00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=lr-#"
                                                                                                  exit then 0 ;
: svc_#_
  `8c8#                      0000DF00 = if (2  7  0  14p                                       1" svc_#"
                                                                                                  exit then 0 ;
: sxtab_R,R,R,#_
  `12c4r4c4r2c2s4r           FA40F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtab_R,R,R,#"
                                                                                                  exit then 0 ;
: sxtab16_R,R,R,#_
  `12c4r4c4r2c2s4r           FA20F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtab16_R,R,R,#"
                                                                                                  exit then 0 ;
: sxtah_R,R,R,#_
  `12c4r4c4r2c2s4r           FA00F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtah_R,R,R,#"
                                                                                                  exit then 0 ;
: sxtb_R,R_
  `10c3r3r                   0000B240 = if (2              2  0  13p      5  3  14p            2" sxtb_R,R"
                                                                                                  exit then 0 ;
: sxtb_R,R,#_
  `12c4c4c4r2c2s4r           FA4FF080 = if (4  0b 8    12p 3 0 13p 1a 1a 0e 0c 7 0 34p 3" sxtb_R,R,#"
                                                                                                  exit then 0 ;
: sxtb16_R,R,#_
  `12c4c4c4r2c2s4r           FA2FF080 = if (4  0b 8    12p 3 0 13p 1a 1a 0e 0c 7 0 34p 3" sxtb16_R,R,#"
                                                                                                  exit then 0 ;
: sxth_R,R_
  `10c3r3r                   0000B200 = if (2              2  0  13p      5  3  14p            2" sxth_R,R"
                                                                                                  exit then 0 ;
: sxth_R,R,#_
  `12c4c4c4r2c2s4r           FA0FF080 = if (4  0b 8    12p 3 0 13p 1a 1a 0e 0c 7 0 34p 3" sxth_R,R,#"
                                                                                                  exit then 0 ;
: tbb_[R,R]_                                    original.mnemonic? @  not  if  0  exit  then
  `12c4r12c4r                E8D0F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" tbb_[R,R]"
                                                                                                  exit then 0 ;
: pc=(R+R*2),b_
  `12c4r12c4r                E8D0F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=(R+R*2),b"
                                                                                                  exit then 0 ;
: pc=R+R*2,b_
  `12c4r12c4r                E8D0F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=R+R*2,b"
                                                                                                  exit then 0 ;
: tbh_[R,R]_                                    original.mnemonic? @  not  if  0  exit  then
  `12c4r12c4r                E8D0F010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" tbh_[R,R]"
                                                                                                  exit then 0 ;
: pc=(R+R*2),h_
  `12c4r12c4r                E8D0F010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=(R+R*2),h"
                                                                                                  exit then 0 ;
: pc=R+R*2,h_
  `12c4r12c4r                E8D0F010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=R+R*2,h"
                                                                                                  exit then 0 ;
: ted_R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#6c4rc3#4c8#            F0900F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" ted_R,#"
                                                                                                  exit then 0 ;
: Rx#<<#,tst_
  `5c#6c4rc3#4c8#            F0900F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" Rx#<<#,tst"
                                                                                                  exit then 0 ;
: ted_R,R,#_                                    original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#ty4r          EA900F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" ted_R,R,#"
                                                                                                  exit then 0 ;
: RxR<<#,tst_
  `12c4rc3#4c2#ty4r          EA900F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" RxR<<#,tst"
                                                                                                  exit then 0 ;
: tst_R,#_                                      original.mnemonic? @  not  if  0  exit  then
  `5c#6c4rc3#4c8#            F0100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" tst_R,#"
                                                                                                  exit then 0 ;
: Rn#,tst_
  `5c#6c4rc3#4c8#            F0100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" Rn#,tst"
                                                                                                  exit then 0 ;
: tst_R,R_                                      original.mnemonic? @  not  if  0  exit  then
  `10c3r3r                   00004200 = if (2              2  0  13p      5  3  14p            2" tst_R,R"
                                                                                                  exit then 0 ;
: RnR,tst_
  `10c3r3r                   00004200 = if (2              2  0  13p      5  3  14p            2" RnR,tst"
                                                                                                  exit then 0 ;
: tst_R,R<<#_                                   original.mnemonic? @  not  if  0  exit  then
  `12c4rc3#4c2#ty4r          EA100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" tst_R,R<<#"
                                                                                                  exit then 0 ;
: RnR<<#,tst_
  `12c4rc3#4c2#ty4r          EA100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" RnR<<#,tst"
                                                                                                  exit then 0 ;
: uadd16_R,R,R_                                 original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FA90F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uadd16_R,R,R"
                                                                                                  exit then 0 ;
: R=R+R.udd16_
  `12c4r4c4r4c4r             FA90F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R+R.udd16"
                                                                                                  exit then 0 ;
: uadd8_R,R,R_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FA80F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uadd8_R,R,R"
                                                                                                  exit then 0 ;
: uadd8.R=R+R_                                  original.mnemonic? @  not  if  0  exit  then
  `12c4r4c4r4c4r             FA80F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uadd8.R=R+R"
                                                                                                  exit then 0 ;
: R=R+R.udd8_
  `12c4r4c4r4c4r             FA80F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R+R.udd8"
                                                                                                  exit then 0 ;
: uasx_R,R,R_
  `12c4r4c4r4c4r             FAA0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uasx_R,R,R"
                                                                                                  exit then 0 ;
: uasx_R=R+R_
  `12c4r4c4r4c4r             FAA0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uasx_R=R+R"
                                                                                                  exit then 0 ;
: udiv_R,R,R_
  `12c4r4c4r4c4r             FBB0F0F0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" udiv_R,R,R"
                                                                                                  exit then 0 ;
: uhadd16_R,R,R_
  `12c4r4c4r4c4r             FA90F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhadd16_R,R,R"
                                                                                                  exit then 0 ;
: uhadd8_R,R,R_
  `12c4r4c4r4c4r             FA80F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhadd8_R,R,R"
                                                                                                  exit then 0 ;
: uhasx_R,R,R_
  `12c4r4c4r4c4r             FAA0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhasx_R,R,R"
                                                                                                  exit then 0 ;
: uhsax_R,R,R_
  `12c4r4c4r4c4r             FAE0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhsax_R,R,R"
                                                                                                  exit then 0 ;
: uhsub16_R,R,R_
  `12c4r4c4r4c4r             FAD0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhsub16_R,R,R"
                                                                                                  exit then 0 ;
: uhsub8_R,R,R_
  `12c4r4c4r4c4r             FAC0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhsub8_R,R,R"
                                                                                                  exit then 0 ;
: umaal_R,R,R,R_
  `12c4r4r4r4c4r             FBE00060 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" umaal_R,R,R,R"
                                                                                                  exit then 0 ;
: umlal_R,R,R,R_
  `12c4r4r4r4c4r             FBE00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" umlal_R,R,R,R"
                                                                                                  exit then 0 ;
: umull_R,R,R,R_
  `12c4r4r4r4c4r             FBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" umull_R,R,R,R"
                                                                                                  exit then 0 ;
: uhqadd16_R,R,R_
  `12c4r4c4r4c4r             FA90F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhqadd16_R,R,R"
                                                                                                  exit then 0 ;
: uhqadd8_R,R,R_
  `12c4r4c4r4c4r             FA80F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhqadd8_R,R,R"
                                                                                                  exit then 0 ;
: uqasx_R,R,R_
  `12c4r4c4r4c4r             FAA0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqasx_R,R,R"
                                                                                                  exit then 0 ;
: uqsax_R,R,R_
  `12c4r4c4r4c4r             FAE0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqsax_R,R,R"
                                                                                                  exit then 0 ;
: uqsub16_R,R,R_
  `12c4r4c4r4c4r             FAD0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqsub16_R,R,R"
                                                                                                  exit then 0 ;
: uqsub8_R,R,R_
  `12c4r4c4r4c4r             FAC0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqsub8_R,R,R"
                                                                                                  exit then 0 ;
: usad8_R,R,R_
  `12c4r4c4r4c4r             FB70F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usad8_R,R,R"
                                                                                                  exit then 0 ;
: usada8_R,R,R,R_
  `12c4r4r4r4c4r             FB700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" usada8_R,R,R,R"
                                                                                                  exit then 0 ;
: usat_R,#,R<<#_
  `10csc4rc3#4r2#c5s         F3800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" usat_R,#,R<<#"
                                                                                                  exit then 0 ;
: usat16_R,R,R_
  `12c4r4c4r4c4r             F3A00000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usat16_R,R,R"
                                                                                                  exit then 0 ;
: usax_R,R,R_
  `12c4r4c4r4c4r             FAE0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usax_R,R,R"
                                                                                                  exit then 0 ;
: usub16_R,R,R_
  `12c4r4c4r4c4r             FAB0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usub16_R,R,R"
                                                                                                  exit then 0 ;
: usub8_R,R,R_
  `12c4r4c4r4c4r             FAC0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usub8_R,R,R"
                                                                                                  exit then 0 ;
: uxtab_R,R,R<<<#_
  `12c4r4c4r2c2o4r           FA50F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtab_R,R,R<<<#"
                                                                                                  exit then 0 ;
: uxtab16_R,R,R<<<#_
  `12c4r4c4r2c2o4r           FA30F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtab16_R,R,R<<<#"
                                                                                                  exit then 0 ;
: uxtah_R,R,R<<<#_
  `12c4r4c4r2c2o4r           FA10F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtah_R,R,R<<<#"
                                                                                                  exit then 0 ;
: uxtb_R,R_
  `10c3r3r                   0000B2C0 = if (2              2  0  13p      5  3  14p            2" uxtb_R,R"
                                                                                                  exit then 0 ;
: uxtb_R,R,R<<<#_
  `12c4r4c4r2c2o4r           FA5FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtb_R,R,R<<<#"
                                                                                                  exit then 0 ;
: uxtab16_R,R,R<<<#_
  `20c4r2c2o4r               FA50F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtab16_R,R,R<<<#"
                                                                                                  exit then 0 ;
: uxth_R,R_
  `10c3r3r                   0000B280 = if (2              2  0  13p      5  3  14p            2" uxth_R,R"
                                                                                                  exit then 0 ;
: uxth_R,R,R<<<#_
  `12c4r4c4r2c2o4r           FA1FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxth_R,R,R<<<#"
                                                                                                  exit then 0 ;
: wfe_
  `16c                       0000BF20 = if (2                                                  1" wfe"
                                                                                                  exit then 0 ;
: wfe_w_
  `32c                       F3AF8002 = if (4                                                  1" wfe_w"
                                                                                                  exit then 0 ;
: wfi_
  `16c                       0000BF10 = if (2                                                  1" wfi"
                                                                                                  exit then 0 ;
: wfi_w_
  `32c                       F3AF8001 = if (4                                                  1" wfi_w"
                                                                                                  exit then 0 ;
: yield_
  `16c                       0000BF10 = if (2                                                  1" yield"
                                                                                                  exit then 0 ;
: yield_w_
  `32c                       F3AF8001 = if (4                                                  1" yield_w"
                                                                                                  exit then 0 ;









: itelt_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BFB4 = if (2                                                  1" itelt"
                                                                                                  exit then 0 ;
: it'=<_
  `16c                       0000BFB4 = if (2                                                  1" it'=<"
                                                                                                  exit then 0 ; 

: itegt_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BFCC = if (2                                                  1" itegt"
                                                                                                  exit then 0 ;
: it'=>_
  `16c                       0000BFCC = if (2                                                  1" it'=>"
                                                                                                  exit then 0 ; 

: itne_                                             original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF18 = if (2                                                  1" itne"
                                                                                                  exit then 0 ; 

: it'<>_
  `16c                       0000BF18 = if (2                                                  1" it'<>"
                                                                                                  exit then 0 ; 

: itlt_                                             original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BFB8 = if (2                                                  1" itlt"
                                                                                                  exit then 0 ;
: it'<_
  `16c                       0000BFB8 = if (2                                                  1" it'<"
                                                                                                  exit then 0 ; 

: itgt_                                             original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BFC8 = if (2                                                  1" itgt"
                                                                                                  exit then 0 ;
: it'>_
  `16c                       0000BFC8 = if (2                                                  1" it'>"
                                                                                                  exit then 0 ; 

: itcc_                                             original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF38 = if (2                                                  1" itcc"
                                                                                                  exit then 0 ;
: it'c=0_
  `16c                       0000BF38 = if (2                                                  1" it'c=0"
                                                                                                  exit then 0 ; 

: itehi_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF8C = if (2                                                  1" itehi"
                                                                                                  exit then 0 ;
: it'u>=_
  `16c                       0000BF8C = if (2                                                  1" it'u>="
                                                                                                  exit then 0 ; 

: iteeq_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF0C = if (2                                                  1" iteeq"
                                                                                                  exit then 0 ; 

: it'==_
  `16c                       0000BF0C = if (2                                                  1" it'=="
                                                                                                  exit then 0 ; 

: itecc_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF34 = if (2                                                  1" itecc"
                                                                                                  exit then 0 ;

: it'=.c=0_
  `16c                       0000BF34 = if (2                                                  1" it'=.c=0"
                                                                                                  exit then 0 ; 

: itteq_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF04 = if (2                                                  1" itteq"
                                                                                                  exit then 0 ;

: it'=_
  `16c                       0000BF04 = if (2                                                  1" it'="
                                                                                                  exit then 0 ; 

: ittcc_                                            original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF3C = if (2                                                  1" ittcc"
                                                                                                  exit then 0 ;

: itt'c=0_
  `16c                       0000BF3C = if (2                                                  1" itt'c=0"
                                                                                                  exit then 0 ; 
  

: itmi_                                             original.mnemonic? @  not  if  0  exit  then
  `16c                       0000BF48 = if (2                                                  1" itmi"
                                                                                                  exit then 0 ; 

: it'-_
  `16c                       0000BF48 = if (2                                                  1" it'-"
                                                                                                  exit then 0 ; 

























































































































































defer  _dis.RCALL_#24

variable  depth.in
variable  dis.addr

\ ***** THUMB2asm864y22.F

: dis   ( a' -- a'+n )     dup  to (a')
  depth   depth.in  !      dup  dis.addr  !

\  _dis.RCALL_#24   ?dup if + exit then
  (R+#)n#/oR_                                         \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then
  RnRoR_                                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then

  (R+#)x#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then
  (R+#)o#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then
  (R+#)n#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then

  (R+#)oR_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then

  ubfx_R,R,#,#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#2#c5w             003C0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" ubfx_R,R,#,#"
                                                                                                 \ exit then 0 ;
  ubfx_R=R<<#,#_
  ?dup if + exit then \ `12c4rc3#2#c5w             FF43DF58 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" ubfx_R=R<<#,#"

  pop{}'_
  ?dup if + exit then \ `16cPMc13r                 E8BD0000 = if (4    .{r0~r12+pc+lr}                               1" pop{}'"

  adr_R,pc+#8_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \  `5c3r8#*4=pc+#*4          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" adr_R,pc+#8"
                                                                                                 \ exit then 0 ;
  R=pc+#*4_
  ?dup if + exit then \  `5c3r8#*4=pc+#*4          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=pc+#*4"
                                                                                                 \ exit then 0 ;
  R=pc+#_
  ?dup if + exit then \  `5c3r8#*4=pc+#*4          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=pc+#"
                                                                                              \ exit then 0 ;
comment:
  adc_R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4=c3#4r8#           F1400000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p      2" adc_R,#"
                                                                                                  \ exit then 0 ;
  adcs_R,#,s_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4=c3#4r8#           F1500000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p      2" adcs_R,#,s"
                                                                                                  \ exit then 0 ;
  R+#+c_
  ?dup if + exit then \ `5c#5cs4=c3#4r8#           F1400000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p      2" R+#+c"
                                                                                                  \ exit then 0 ;
  R+#+c,s_
  ?dup if + exit then \ `5c#5cs4=c3#4r8#           F1500000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p      2" R+#+c,s"
                                                                                                  \ exit then 0 ;
comment;


  adc_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F1400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" adc_R,R,#"
                                                                                                  \ exit then 0 ;
  adcs_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" adcs_R,R,#"
                                                                                                  \ exit then 0 ;
  R=R+#+c_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F1400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=R+#+c"
                                                                                                  \ exit then 0 ;
  R=R+#+c,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R+#+c,s"
                                                                                                  \ exit then 0 ;
  adc_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004140 = if (2              2  0  13p      5  3  14p            2" adc_R,R"
                                                                                                  \ exit then 0 ;
  R+R+c_
  ?dup if + exit then \ `10c3r3r                   00004140 = if (2              2  0  13p      5  3  14p            2" R+R+c"
                                                                                                  \ exit then 0 ;
  adc_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  adc_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  adc_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  adc_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adc_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R+R+c<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c<<#"
                                                                                                  \ exit then 0 ;
  R=R+R+c>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>#"
                                                                                                  \ exit then 0 ;
  R=R+R+c,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c,a>>#"
                                                                                                  \ exit then 0 ;
  R=R+R+c>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>>#"
                                                                                                  \ exit then 0 ;
  adcs_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  adcs_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  adcs_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  adcs_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adcs_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R+R+c<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c<<#,s"
                                                                                                  \ exit then 0 ;
  R=R+R+c>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>#,s"
                                                                                                  \ exit then 0 ;
  R=R+R+c,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=R+R+c>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R+c>>>#,s"
                                                                                                  \ exit then 0 ;
  adds_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" adds_R,R,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,#3_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" adds_R,R,#3"
                                                                                                  \ exit then 0 ;
  add_R,R,#3_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" add_R,R,#3"
                                                                                                  \ exit then 0 ;
  add_R,R,#3,s_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" add_R,R,#3,s"
                                                                                                  \ exit then 0 ;
  R=R+#,s_
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+#,s"
                                                                                                  \ exit then 0 ;
  R=R+#3,s_
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+#3,s"
                                                                                                  \ exit then 0 ;
  R=R+#3_
  ?dup if + exit then \ `7c3#3r3r                  00001C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+#3"
                                                                                                  \ exit then 0 ;
  adds_R,#_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" adds_R,#"
                                                                                                  \ exit then 0 ;
  adds_R,#8_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" adds_R,#8"
                                                                                                  \ exit then 0 ;
  add_R,#8_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" add_R,#8"
                                                                                                  \ exit then 0 ;
  add_R,#8,s_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" add_R,#8,s"
                                                                                                  \ exit then 0 ;
  R+#,s_
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" R+#,s"
                                                                                                  \ exit then 0 ;
  R+#8_
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" R+#8"
                                                                                                  \ exit then 0 ;
  R+#8,s_
  ?dup if + exit then \ `5c3r8#                    00003000 = if (2             0a  8  13p      7  0  14p            2" R+#8,s"
                                                                                                  \ exit then 0 ;
  add_R,R,#138_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" add_R,R,#138"
                                                                                                  \ exit then 0 ;
  adds_R,R,#138_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" adds_R,R,#138"
                                                                                                  \ exit then 0 ;
  R=R+#138_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R+#138"
                                                                                                  \ exit then 0 ;
  R=R+#138,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R+#138,s"
                                                                                                  \ exit then 0 ;
  addw_R,R,#12_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#.b14=0     F2000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" addw_R,R,#12"
                                                                                                  \ exit then 0 ;
  R=R+#12_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#.b14=0     F2000000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R+#12"
                                                                                                  \ exit then 0 ;
  add_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00001800 = if (2   2  0  12p  5  3  13p      8  6  14p            3" add_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R+R_
  ?dup if + exit then \ `7c3r3r3r                  00001800 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R+R"
                                                                                                  \ exit then 0 ;
  add_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cDN4r3r                  00004400 = if (2          7 7 2 0 23p      6  3  14p              2" add_R,R"
                                                                                                  \ exit then 0 ;
  R+R_
  ?dup if + exit then \ `8cDN4r3r                  00004400 = if (2          7 7 2 0 23p      6  3  14p              2" R+R"
                                                                                                  \ exit then 0 ;
  add_R,R,R,#.lsl,s_                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#ty4r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,#.lsl,s"
                                                                                                  \ exit then 0 ;
  R=R+R<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#ty4r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#,s"
                                                                                                  \ exit then 0 ;
  add_R,R,R,#,lsl_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,#,lsl"
                                                                                                  \ exit then 0 ;
  R=R+R<<#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R+R<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#"
                                                                                                  \ exit then 0 ;
  R=R+R>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#"
                                                                                                  \ exit then 0 ;
  R=R+R,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#"
                                                                                                  \ exit then 0 ;
  R=R+R>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R+R<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#,s"
                                                                                                  \ exit then 0 ;
  R=R+R>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#,s"
                                                                                                  \ exit then 0 ;
  R=R+R,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=R+R>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#,s"
                                                                                                  \ exit then 0 ;
  add_R,rp,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#*4                  0000A800 = if (2             0a  8  13p      7  0  14p*4          2" add_R,rp,#"
                                                                                                  \ exit then 0 ;
  R=rp+#8_
  ?dup if + exit then \ `5c3r8#*4                  0000A800 = if (2             0a  8  13p      7  0  14p*4          2" R=rp+#8"
                                                                                                  \ exit then 0 ;
  R=rp+#_
  ?dup if + exit then \ `5c3r8#*4                  0000A800 = if (2             0a  8  13p      7  0  14p*4          2" R=rp+#"
                                                                                                  \ exit then 0 ;
  add_rp,#_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c7#*4                    0000B000 = if (2                 6 0  14p*4                       1" add_rp,#"
                                                                                                  \ exit then 0 ;
  add_rp,#7_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c7#*4                    0000B000 = if (2                 6 0  14p*4                       1" add_rp,#7"
                                                                                                  \ exit then 0 ;
  rp+#7_
  ?dup if + exit then \ `9c7#*4                    0000B000 = if (2                 6 0  14p*4                       1" rp+#7"
                                                                                                  \ exit then 0 ;
  add_R,rp,#12_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs5c3#4r8#*4          F10D0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" add_R,rp,#12"
                                                                                                  \ exit then 0 ;
  R=rp+#12_
  ?dup if + exit then \ `5c#5cs5c3#4r8#*4          F10D0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=rp+#12"
                                                                                                  \ exit then 0 ;
  add_R,rp,#12_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#11c3#4r8#              F20B0000 = if (4                       0b 8 14p                   2" add_R,rp,#12"
                                                                                                  \ exit then 0 ;
  R=rp+#12_
  ?dup if + exit then \ `5c#11c3#4r8#              F20B0000 = if (4                       0b 8 14p                   2" R=rp+#12"
                                                                                                  \ exit then 0 ;
  add_R,rp_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cDM4c3r                  00004468 = if (2                       2 0  14p                   1" add_R,rp"
                                                                                                  \ exit then 0 ;
  R+rp_
  ?dup if + exit then \ `8cDM4c3r                  00004468 = if (2                       2 0  14p                   1" R+rp"
                                                                                                  \ exit then 0 ;
  add_rp,R_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3c                    00004485 = if (2                        6 3 14p                   1" add_rp,R"
                                                                                                  \ exit then 0 ;
  rp+R_
  ?dup if + exit then \ `9c4r3c                    00004485 = if (2                        6 3 14p                   1" rp+R"
                                                                                                  \ exit then 0 ;
  add_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#004r         EB0D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#014r         EB0D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#104r         EB0D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  add_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#114r         EB0D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" add_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R+R<<#_
  ?dup if + exit then \ `11cc4cc3#4r2#004r         EB0D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#"
                                                                                                  \ exit then 0 ;
  R=R+R>>#_
  ?dup if + exit then \ `11cc4cc3#4r2#014r         EB0D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#"
                                                                                                  \ exit then 0 ;
  R=R+R,a>>#_
  ?dup if + exit then \ `11cc4cc3#4r2#104r         EB0D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#"
                                                                                                  \ exit then 0 ;
  R=R+R>>>#_
  ?dup if + exit then \ `11cc4cc3#4r2#114r         EB0D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#004r         EB1D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#014r         EB1D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#104r         EB1D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  adds_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4cc3#4r2#114r         EB1D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" adds_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R+R<<#,s_
  ?dup if + exit then \ `11cc4cc3#4r2#004r         EB1D0000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R<<#,s"
                                                                                                  \ exit then 0 ;
  R=R+R>>#,s_
  ?dup if + exit then \ `11cc4cc3#4r2#014r         EB1D0010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>#,s"
                                                                                                  \ exit then 0 ;
  R=R+R,a>>#,s_
  ?dup if + exit then \ `11cc4cc3#4r2#104r         EB1D0020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=R+R>>>#,s_
  ?dup if + exit then \ `11cc4cc3#4r2#114r         EB1D0030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R+R>>>#,s"
                                                                                                  \ exit then 0 ;
  adr_R,pc+#8_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#*4+.(pc+#)          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" adr_R,pc+#8"
                                                                                                  \ exit then 0 ;
  R=(pc+#)_
  ?dup if + exit then \ `5c3r8#*4+.(pc+#)          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=(pc+#)"
                                                                                                  \ exit then 0 ;
  R=(pc+#8)_
  ?dup if + exit then \ `5c3r8#*4+.(pc+#)          0000A000 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=(pc+#8)"
                                                                                                  \ exit then 0 ;
  adr_R,#12_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#11c3#4r8#              F2AF0000 = if (4                       0b 8 14p                   2" adr_R,#12"
                                                                                                  \ exit then 0 ;
  R=(pc-#12)_
  ?dup if + exit then \ `5c#11c3#4r8#              F2AF0000 = if (4                       0b 8 14p                   2" R=(pc-#12)"
                                                                                                  \ exit then 0 ;
  adr_R,pc+#12_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#11c3#4r8#              F20F0000 = if (4                       0b 8 14p                   2" adr_R,pc+#12"
                                                                                                  \ exit then 0 ;
  R=pc+#12_
  ?dup if + exit then \ `5c#11c3#4r8#              F20F0000 = if (4                       0b 8 14p                   2" R=pc+#12"
                                                                                                  \ exit then 0 ;
  ands_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" ands_R,R,#"
                                                                                                  \ exit then 0 ;
  R=Rn#11,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0100000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=Rn#11,s"
                                                                                                  \ exit then 0 ;
  and_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0000000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" and_R,R,#"
                                                                                                  \ exit then 0 ;
  R=Rn#11_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0000000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Rn#11"
                                                                                                  \ exit then 0 ;
  and_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004000 = if (2              2  0  13p      5  3  14p            2" and_R,R"
                                                                                                  \ exit then 0 ;
  RnR_
  ?dup if + exit then \ `10c3r3r                   00004000 = if (2              2  0  13p      5  3  14p            2" RnR"
                                                                                                  \ exit then 0 ;
  and_R,R,R<<#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R<<#"
                                                                                                  \ exit then 0 ;
  R=RnR<<#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#"
                                                                                                  \ exit then 0 ;
  and_R,R,R<<#,s_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R<<#,s"
                                                                                                  \ exit then 0 ;
  R=RnR<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#ty4r         EB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#,s"
                                                                                                  \ exit then 0 ;
  and_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  and_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  and_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  and_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" and_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RnR<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#"
                                                                                                  \ exit then 0 ;
  R=RnR>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>#"
                                                                                                  \ exit then 0 ;
  R=RnR,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA000020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR,a>>#"
                                                                                                  \ exit then 0 ;
  R=RnR>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA000030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>>#"
                                                                                                  \ exit then 0 ;
  ands_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  ands_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  ands_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  ands_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" ands_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RnR<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR<<#,s"
                                                                                                  \ exit then 0 ;
  R=RnR>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA100010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>#,s"
                                                                                                  \ exit then 0 ;
  R=RnR,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA100020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=RnR>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA100030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR>>>#,s"
                                                                                                  \ exit then 0 ;
  asr_R,R,#5_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r                  00001000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" asr_R,R,#5"
                                                                                                  \ exit then 0 ;
  R=R,a>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00001000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,a>>#5"
                                                                                                  \ exit then 0 ;
  R=R,a>>#_
  ?dup if + exit then \ `5c5#3r3r                  00001000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,a>>#"
                                                                                                  \ exit then 0 ;
  asr_R,R,#5'_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EA4F0020 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" asr_R,R,#5'"
                                                                                                  \ exit then 0 ;
  R=R,a>>#5'_
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EA4F0020 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R,a>>#5'"
                                                                                                  \ exit then 0 ;
  R=R,a>>#5_
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EA4F0020 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R,a>>#5"
                                                                                                  \ exit then 0 ;
  asr_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004100 = if (2              2  0  13p      5  3  14p            2" asr_R,R"
                                                                                                  \ exit then 0 ;
  asr.R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004100 = if (2              2  0  13p      5  3  14p            2" asr.R,R"
                                                                                                  \ exit then 0 ;
  R,a>>R_
  ?dup if + exit then \ `10c3r3r                   00004100 = if (2              2  0  13p      5  3  14p            2" R,a>>R"
                                                                                                  \ exit then 0 ;
  asr_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA40F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" asr_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R,a>>R_
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA40F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R,a>>R"
                                                                                                  \ exit then 0 ;
  #....z=1?(=?)_
  ?dup if + exit then \ `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" #....z=1?(=?)"
                                                                                                  \ exit then 0 ;
  #....z=0?(<>?)_
  ?dup if + exit then \ `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" #....z=0?(<>?)"
                                                                                                  \ exit then 0 ;
  #....c=1?(u<?)_
  ?dup if + exit then \ `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" #....c=1?(u<?)"
                                                                                                  \ exit then 0 ;
  #....c=0?(u>=?)_
  ?dup if + exit then \ `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" #....c=0?(u>=?)"
                                                                                                  \ exit then 0 ;
  #....n=1?(-?)_
  ?dup if + exit then \ `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" #....n=1?(-?)"
                                                                                                  \ exit then 0 ;
  #....n=0?(+?)_
  ?dup if + exit then \ `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" #....n=0?(+?)"
                                                                                                  \ exit then 0 ;
  #....v=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" #....v=1?"
                                                                                                  \ exit then 0 ;
  #....v=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" #....v=0?"
                                                                                                  \ exit then 0 ;
  #....u>?_
  ?dup if + exit then \ `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" #....u>?"
                                                                                                  \ exit then 0 ;
  #....u<=?_
  ?dup if + exit then \ `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" #....u<=?"
                                                                                                  \ exit then 0 ;
  #....>=?_
  ?dup if + exit then \ `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" #....>=?"
                                                                                                  \ exit then 0 ;
  #....<?_
  ?dup if + exit then \ `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" #....<?"
                                                                                                  \ exit then 0 ;
  #....>?_
  ?dup if + exit then \ `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" #....>?"
                                                                                                  \ exit then 0 ;
  #....<=?_
  ?dup if + exit then \ `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" #....<=?"
                                                                                                  \ exit then 0 ;
  #....jmp_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....jmp"
                                                                                                  \ exit then 0 ;
  #....rjmp_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....rjmp"
                                                                                                  \ exit then 0 ;
  #....z=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" #....z=1?"
                                                                                                  \ exit then 0 ;
  #....bne_
  ?dup if + exit then \ `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" #....bne"
                                                                                                  \ exit then 0 ;
  #....c=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" #....c=1?"
                                                                                                  \ exit then 0 ;
  #....c=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" #....c=0?"
                                                                                                  \ exit then 0 ;
  #....n=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" #....n=1?"
                                                                                                  \ exit then 0 ;
  #....n=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" #....n=0?"
                                                                                                  \ exit then 0 ;
  #....v=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" #....v=1?"
                                                                                                  \ exit then 0 ;
  #....v=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" #....v=0?"
                                                                                                  \ exit then 0 ;
  #....u>?_
  ?dup if + exit then \ `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" #....u>?"
                                                                                                  \ exit then 0 ;
  #....u<=?_
  ?dup if + exit then \ `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" #....u<=?"
                                                                                                  \ exit then 0 ;
  #....>=?_
  ?dup if + exit then \ `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" #....>=?"
                                                                                                  \ exit then 0 ;
  #....<?_
  ?dup if + exit then \ `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" #....<?"
                                                                                                  \ exit then 0 ;
  #....>?_
  ?dup if + exit then \ `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" #....>?"
                                                                                                  \ exit then 0 ;
  #....<=?_
  ?dup if + exit then \ `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" #....<=?"
                                                                                                  \ exit then 0 ;
  #....jmp_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....jmp"
                                                                                                  \ exit then 0 ;
  #....rjmp_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" #....rjmp"
                                                                                                  \ exit then 0 ;
  z=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" z=1?"
                                                                                                  \ exit then 0 ;
  bne_
  ?dup if + exit then \ `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" bne"
                                                                                                  \ exit then 0 ;
  c=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" c=1?"
                                                                                                  \ exit then 0 ;
  c=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" c=0?"
                                                                                                  \ exit then 0 ;
  n=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" n=1?"
                                                                                                  \ exit then 0 ;
  n=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" n=0?"
                                                                                                  \ exit then 0 ;
  v=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" v=1?"
                                                                                                  \ exit then 0 ;
  v=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" v=0?"
                                                                                                  \ exit then 0 ;
  u>?_
  ?dup if + exit then \ `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" u>?"
                                                                                                  \ exit then 0 ;
  u<=?_
  ?dup if + exit then \ `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" u<=?"
                                                                                                  \ exit then 0 ;
  >=?_
  ?dup if + exit then \ `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" >=?"
                                                                                                  \ exit then 0 ;
  <?_
  ?dup if + exit then \ `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" <?"
                                                                                                  \ exit then 0 ;
  >?_
  ?dup if + exit then \ `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" >?"
                                                                                                  \ exit then 0 ;
  <=?_
  ?dup if + exit then \ `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" <=?"
                                                                                                  \ exit then 0 ;
  jmp_#8_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" jmp_#8"
                                                                                                  \ exit then 0 ;
  rjmp_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" rjmp"
                                                                                                  \ exit then 0 ;
  z=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D000 = if (2   7  0  14p.rel8                                 1" z=1?"
                                                                                                  \ exit then 0 ;
  z=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D100 = if (2   7  0  14p.rel8                                 1" z=0?"
                                                                                                  \ exit then 0 ;
  c=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D200 = if (2   7  0  14p.rel8                                 1" c=1?"
                                                                                                  \ exit then 0 ;
  c=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D300 = if (2   7  0  14p.rel8                                 1" c=0?"
                                                                                                  \ exit then 0 ;
  n=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D400 = if (2   7  0  14p.rel8                                 1" n=1?"
                                                                                                  \ exit then 0 ;
  n=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D500 = if (2   7  0  14p.rel8                                 1" n=0?"
                                                                                                  \ exit then 0 ;
  v=1?_
  ?dup if + exit then \ `8c8#.rel                  0000D600 = if (2   7  0  14p.rel8                                 1" v=1?"
                                                                                                  \ exit then 0 ;
  v=0?_
  ?dup if + exit then \ `8c8#.rel                  0000D700 = if (2   7  0  14p.rel8                                 1" v=0?"
                                                                                                  \ exit then 0 ;
  u>?_
  ?dup if + exit then \ `8c8#.rel                  0000D800 = if (2   7  0  14p.rel8                                 1" u>?"
                                                                                                  \ exit then 0 ;
  u<=?_
  ?dup if + exit then \ `8c8#.rel                  0000D900 = if (2   7  0  14p.rel8                                 1" u<=?"
                                                                                                  \ exit then 0 ;
  >=?_
  ?dup if + exit then \ `8c8#.rel                  0000DA00 = if (2   7  0  14p.rel8                                 1" >=?"
                                                                                                  \ exit then 0 ;
  <?_
  ?dup if + exit then \ `8c8#.rel                  0000DB00 = if (2   7  0  14p.rel8                                 1" <?"
                                                                                                  \ exit then 0 ;
  >?_
  ?dup if + exit then \ `8c8#.rel                  0000DC00 = if (2   7  0  14p.rel8                                 1" >?"
                                                                                                  \ exit then 0 ;
  <=?_
  ?dup if + exit then \ `8c8#.rel                  0000DD00 = if (2   7  0  14p.rel8                                 1" <=?"
                                                                                                  \ exit then 0 ;
  jmp_#8_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" jmp_#8"
                                                                                                  \ exit then 0 ;
  rjmp_
  ?dup if + exit then \ `8c8#.rel                  0000DE00 = if (2   7  0  14p.rel8                                 1" rjmp"
                                                                                                  \ exit then 0 ;
  jmp_#11_
  ?dup if + exit then \ `5c11#                     0000E000 = if (2  0a 0 14p.rel11                                  1" jmp_#11"
                                                                                                  \ exit then 0 ;
  jmp_#20_
  ?dup if + exit then \ `5cs4con6#2cjcj11#         F000A000 = if (4  20rel,4                                         1" jmp_#20"
                                                                                                  \ exit then 0 ;
  jmp_#24_
  ?dup if + exit then \ `5cs10#2cjcj11#            F0009000 = if (4  24rel,4                                         1" jmp_#"
                                                                                                  \ exit then 0 ;
  bfc_R,#,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc_R,#,#"
                                                                                                  \ exit then 0 ;
  bfc.R,#,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc.R,#,#"
                                                                                                  \ exit then 0 ;
  bfc_R,#,#_
  ?dup if + exit then \ `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc_R,#,#"
                                                                                                  \ exit then 0 ;
  bfc.R,#,#_
  ?dup if + exit then \ `17c3#4r2#c5m              F36F0000 = if (4  0b  8  12p  4 0 13p 0e 0c 7 6  24p              3" bfc.R,#,#"
                                                                                                  \ exit then 0 ;
  bfi.R,R,#,#_
  ?dup if + exit then \ `12c4rc3#4r2#c5m           F3600000 = if (4  0b 8 11p 13 10  12p 4 0 13p 3#4.2#6.            4" bfi.R,R,#,#"
                                                                                                  \ exit then 0 ;
  bics_R,R,#12_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0300000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" bics_R,R,#12"
                                                                                                  \ exit then 0 ;
  R=Rn#12/,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0300000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=Rn#12/,s"
                                                                                                  \ exit then 0 ;
  bic_R,R,#12_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0200000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" bic_R,R,#12"
                                                                                                  \ exit then 0 ;
  R=Rn#12/_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0200000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Rn#12/"
                                                                                                  \ exit then 0 ;
  bic_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004380 = if (2              2  0  13p      5  3  14p            2" bic_R,R"
                                                                                                  \ exit then 0 ;
  RnR/_
  ?dup if + exit then \ `10c3r3r                   00004380 = if (2              2  0  13p      5  3  14p            2" RnR/"
                                                                                                  \ exit then 0 ;
  bic_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  bic_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA200010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  bic_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA200020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  bic_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA200030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bic_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RnR/<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/<<#"
                                                                                                  \ exit then 0 ;
  R=RnR/>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA200010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>#"
                                                                                                  \ exit then 0 ;
  R=RnR/,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA200020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/,a>>#"
                                                                                                  \ exit then 0 ;
  R=RnR/>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA200030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>>#"
                                                                                                  \ exit then 0 ;
  bics_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA300000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  bics_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA300010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  bics_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA300020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  bics_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA300030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" bics_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RnR/<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA300000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/<<#,s"
                                                                                                  \ exit then 0 ;
  R=RnR/>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA300010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>#,s"
                                                                                                  \ exit then 0 ;
  R=RnR/,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA300020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=RnR/>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA300030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RnR/>>>#,s"
                                                                                                  \ exit then 0 ;
  bkpt_
  ?dup if + exit then \ `8c8#                      0000BE00 = if (2  7  0  14p                                       1" bkpt"
                                                                                                  \ exit then 0 ;
  BL_#24_                                       \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" BL_#"
                                                                                                  \ exit then 0 ;
  rcall_#24_
  ?dup if + exit then \ `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" rcall_#"
                                                                                                  \ exit then 0 ;
  rcall_
  ?dup if + exit then \ `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" rcall"
                                                                                                  \ exit then 0 ;
  call.#24_
  ?dup if + exit then \ `5cs10#2cjcj11#            F000D000 = if (4  24rel,4                                         1" call.#"
                                                                                                  \ exit then 0 ;
  blx_R_                                        \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3c                    00004780 = if (2                        6 3 14p                   1" blx_R"
                                                                                                  \ exit then 0 ;
  blx.R_                                        \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3c                    00004780 = if (2                        6 3 14p                   1" blx.R"
                                                                                                  \ exit then 0 ;
  call_R_
  ?dup if + exit then \ `9c4r3c                    00004780 = if (2                        6 3 14p                   1" call_R"
                                                                                                  \ exit then 0 ;
  bx_R_                                         \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3c                    00004700 = if (2                        6 3 14p                   1" bx_R"
                                                                                                  \ exit then 0 ;
  bx.R_                                         \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3c                    00004700 = if (2                        6 3 14p                   1" bx.R"
                                                                                                  \ exit then 0 ;
  jmp_R_
  ?dup if + exit then \ `9c4r3c                    00004700 = if (2                        6 3 14p                   1" jmp_R"
                                                                                                  \ exit then 0 ;
  jmp_R_
  ?dup if + exit then \ `9c4r3c                    00004700 = if (2                        6 3 14p                   1" jmp_R"
                                                                                                  \ exit then 0 ;
  cbnz_R,#_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `6c#c5#3r                  0000B900 = if (2   2  0  13p   9 9 7 3 24p                        2" cbnz_R,#"
                                                                                                  \ exit then 0 ;
  cbnz.R,#_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `6c#c5#3r                  0000B900 = if (2   2  0  13p   9 9 7 3 24p                        2" cbnz.R,#"
                                                                                                  \ exit then 0 ;
  if'R=0.pc+#_
  ?dup if + exit then \ `6c#c5#3r                  0000B900 = if (2   2  0  13p   9 9 7 3 24p                        2" if_R=0.pc+#"
                                                                                                  \ exit then 0 ;
  CBZ_R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `6c#c5#3r                  0000B100 = if (2   2  0  13p   9 9 7 3 24p                        2" CBZ_R,#"
                                                                                                  \ exit then 0 ;
  CBZ.R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `6c#c5#3r                  0000B100 = if (2   2  0  13p   9 9 7 3 24p                        2" CBZ.R,#"
                                                                                                  \ exit then 0 ;
  if'R<>0.pc+#_
  ?dup if + exit then \ `6c#c5#3r                  0000B100 = if (2   2  0  13p   9 9 7 3 24p                        2" if_R<>0.pc+#"
                                                                                                  \ exit then 0 ;
  clrex_
  ?dup if + exit then \ `32c                       F3BF8F2F = if (4                                                  1" clrex"
                                                                                                  \ exit then 0 ;
  CLZ_R,R_
  ?dup if + exit then \ `12c4=4c4r4c4r             FAB0F080 = if (4  0b  8  13p  3 0 14p                             2" CLZ_R,R"
                                                                                                  \ exit then 0 ;
  cmn_R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmn_R,#"
                                                                                                  \ exit then 0 ;
  cmn.R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmn.R,#"
                                                                                                  \ exit then 0 ;
  R:#/_
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" R:#/"
                                                                                                  \ exit then 0 ;
  R:-#_
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" R:-#"
                                                                                                  \ exit then 0 ;
  cmn_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" cmn_R,R"
                                                                                                  \ exit then 0 ;
  cmn.R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" cmn.R,R"
                                                                                                  \ exit then 0 ;
  R:R/_
  ?dup if + exit then \ `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" R:R/"
                                                                                                  \ exit then 0 ;
  R:-R_
  ?dup if + exit then \ `10c3r3r                   000042C0 = if (2              2  0  13p      5  3  14p            2" R:-R"
                                                                                                  \ exit then 0 ;
  cmn_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EB100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R"
                                                                                                  \ exit then 0 ;
  cmn.R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EB100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R"
                                                                                                  \ exit then 0 ;
  R:R/_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EB100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R/"
                                                                                                  \ exit then 0 ;
  cmp_R,#8_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00002800 = if (2             0a  8  13p      7  0  14p            2" cmp_R,#8"
                                                                                                  \ exit then 0 ;
  cmp.R,#8_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00002800 = if (2             0a  8  13p      7  0  14p            2" cmp.R,#8"
                                                                                                  \ exit then 0 ;
  R:#8_
  ?dup if + exit then \ `5c3r8#                    00002800 = if (2             0a  8  13p      7  0  14p            2" R:#8"
                                                                                                  \ exit then 0 ;
  cmp_R,#12_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1B00F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmp_R,#12"
                                                                                                  \ exit then 0 ;
  cmp.R,#12_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1B00F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" cmp.R,#12"
                                                                                                  \ exit then 0 ;
  R:#12_
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F1B00F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" R:#12"
                                                                                                  \ exit then 0 ;
  cmp_R,R3_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004280 = if (2              2  0  13p      5  3  14p            2" cmp_R,R3"
                                                                                                  \ exit then 0 ;
  cmp.R,R3_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004280 = if (2              2  0  13p      5  3  14p            2" cmp.R,R3"
                                                                                                  \ exit then 0 ;
  R:R3_
  ?dup if + exit then \ `10c3r3r                   00004280 = if (2              2  0  13p      5  3  14p            2" R:R3"
                                                                                                  \ exit then 0 ;
  cmp_R,R4_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3r                    00004500 = if (2  7 3 13p 2 0  14p                                2" cmp_R,R4"
                                                                                                  \ exit then 0 ;
  cmp.R,R4_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c4r3r                    00004500 = if (2  7 3 13p 2 0  14p                                2" cmp.R,R4"
                                                                                                  \ exit then 0 ;
  R:R4_
  ?dup if + exit then \ `9c4r3r                    00004500 = if (2  7 3 13p 2 0  14p                                2" R:R4"
                                                                                                  \ exit then 0 ;
  cmp.R,R4_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cr4r3r                   00004500 = if (2  7 7 2 0 23p   6 3 14p                           2" cmp.R,R4"
                                                                                                  \ exit then 0 ;
  R:R4_
  ?dup if + exit then \ `8cr4r3r                   00004500 = if (2  7 7 2 0 23p   6 3 14p                           2" R:R4"
                                                                                                  \ exit then 0 ;
  3R:R3<<#_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" 3R:R3<<#"
                                                                                                  \ exit then 0 ;
  R333:R333<<#_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R333:R333<<#"
                                                                                                  \ exit then 0 ;
  cmn_R,R,#,lsl_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,lsl"
                                                                                                  \ exit then 0 ;
  cmn_R,R,#,lsr_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F10 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,lsr"
                                                                                                  \ exit then 0 ;
  cmn_R,R,#,asr_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F20 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,asr"
                                                                                                  \ exit then 0 ;
  cmn_R,R,#,rrx_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F30 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn_R,R,#,rrx"
                                                                                                  \ exit then 0 ;
  cmn.R,R,#,lsl_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,lsl"
                                                                                                  \ exit then 0 ;
  cmn.R,R,#,lsr_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F10 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,lsr"
                                                                                                  \ exit then 0 ;
  cmn.R,R,#,asr_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F20 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,asr"
                                                                                                  \ exit then 0 ;
  cmn.R,R,#,rrx_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F30 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" cmn.R,R,#,rrx"
                                                                                                  \ exit then 0 ;
  R:R<<#_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R<<#"
                                                                                                  \ exit then 0 ;
  R:R>>#_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F10 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R>>#"
                                                                                                  \ exit then 0 ;
  R:R,a>>#_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F20 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R,a>>#"
                                                                                                  \ exit then 0 ;
  R:R>>>#_
  ?dup if + exit then \ `12c4rc3#4c2#2c4r          EBB00F30 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" R:R>>>#"
                                                                                                  \ exit then 0 ;
  cps_#4_                                       \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cmcAIF                  0000B660 = if (2   2,m0AIF,4                                      1" cps_#4"
                                                                                                  \ exit then 0 ;
  mAIF=#4_
  ?dup if + exit then \ `11cmcAIF                  0000B660 = if (2   2,m0AIF,4                                      1" mAIF=#4"
                                                                                                  \ exit then 0 ;
  DBG.option_
  ?dup if + exit then \ `28c4opt                   F3AF80F0 = if (4                                                  1" DBG.option"
                                                                                                  \ exit then 0 ;
  DMB.option_
  ?dup if + exit then \ `28c4opt                   F3BF8F50 = if (4                                                  1" DMB.option"
                                                                                                  \ exit then 0 ;
  DSB.option_
  ?dup if + exit then \ `28c4opt                   F3BF8F40 = if (4                                                  1" DSB.option"
                                                                                                  \ exit then 0 ;
  eors_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0900000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" eors_R,R,#"
                                                                                                  \ exit then 0 ;
  eors.R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0900000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" eors.R,R,#"
                                                                                                  \ exit then 0 ;
  R=Rx#,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0900000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=Rx#,s"
                                                                                                  \ exit then 0 ;
  eor_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0800000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" eor_R,R,#"
                                                                                                  \ exit then 0 ;
  eor.R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0800000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" eor.R,R,#"
                                                                                                  \ exit then 0 ;
  R=Rx#_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0800000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Rx#"
                                                                                                  \ exit then 0 ;
  eor.R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4=c3#4r8#           F0800000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p      2" eor.R,#"
                                                                                                  \ exit then 0 ;
  Rx#_
  ?dup if + exit then \ `5c#5cs4=c3#4r8#           F0800000 = if (2  0b  8  13p             1a 1a 0e 0c 7 0 34p      2" Rx#"
                                                                                                  \ exit then 0 ;
  eor_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004040 = if (2              2  0  13p      5  3  14p            2" eor_R,R"
                                                                                                  \ exit then 0 ;
  eor.R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004040 = if (2              2  0  13p      5  3  14p            2" eor.R,R"
                                                                                                  \ exit then 0 ;
  RxR_
  ?dup if + exit then \ `10c3r3r                   00004040 = if (2              2  0  13p      5  3  14p            2" RxR"
                                                                                                  \ exit then 0 ;
\  eor_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
\  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R"
\                                                                                                  \ exit then 0 ;
\  R=RxR_
\  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR"
\                                                                                                  \ exit then 0 ;
  eor_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  eor_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA800010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  eor_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA800020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  eor_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA800030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eor_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RxR<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR<<#"
                                                                                                  \ exit then 0 ;
  R=RxR>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA800010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>#"
                                                                                                  \ exit then 0 ;
  R=RxR,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA800020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR,a>>#"
                                                                                                  \ exit then 0 ;
  R=RxR>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA800030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>>#"
                                                                                                  \ exit then 0 ;
  eors_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA900000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  eors_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA900010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  eors_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA900020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  eors_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA900030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" eors_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RxR<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA900000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR<<#,s"
                                                                                                  \ exit then 0 ;
  R=RxR>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA900010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>#,s"
                                                                                                  \ exit then 0 ;
  R=RxR,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA900020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=RxR>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA900030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RxR>>>#,s"
                                                                                                  \ exit then 0 ;
  ISB.option_
  ?dup if + exit then \ `28c4opt                   F3BF8F60 = if (4                                                  1" ISB.option"
                                                                                                  \ exit then 0 ;
  ldmdb_R,R.list_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10cWc4rPMc12R.list        E9100000 = if (4      .{r0~r12+pc+lr}+rn                          1" ldmdb_R,R.list"
                                                                                                  \ exit then 0 ;
  dmdb_R,R.list_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10cWc4rPMc12R.list        E9100000 = if (4      .{r0~r12+pc+lr}+rn                          1" dmdb_R,R.list"
                                                                                                  \ exit then 0 ;
  pop_R,R.list_
  ?dup if + exit then \ `10cWc4rPMc12R.list        E9100000 = if (4      .{r0~r12+pc+lr}+rn                          1" pop_R,R.list"
                                                                                                  \ exit then 0 ;
  ldm_                                          \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldm"
                                                                                                  \ exit then 0 ;
  ldmia_R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia_R,#"
                                                                                                  \ exit then 0 ;
\ ldmia.R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
\ ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia.R,#"
\                                                                                                 \ exit then 0 ;
  ldmia_                                        \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia"
                                                                                                  \ exit then 0 ;
  pop_R!,#_
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" pop_R!,#"
                                                                                                  \ exit then 0 ;
  pop.R!,#_
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" pop.R!,#"
                                                                                                  \ exit then 0 ;
  ldmia_                                        \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia"
                                                                                                  \ exit then 0 ;
  ldmia_R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia_R,R"
                                                                                                  \ exit then 0 ;
  ldmia_R,Rlist_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldmia_R,Rlist"
                                                                                                  \ exit then 0 ;
  ldm_                                          \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldm"
                                                                                                  \ exit then 0 ;
  ldm_R,R_
  ?dup if + exit then \ `5c3R8Rlist                0000C800 = if (2  .{r0~r7}.rn                                     1" ldm_R,R"
                                                                                                  \ exit then 0 ;
  ldmia_                                        \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10cWc4rPMc12R.list        E8900000 = if (4      .{r0~r12+pc+lr}+rn                          1" ldmia"
                                                                                                  \ exit then 0 ;
  ldm_
  ?dup if + exit then \ `10cWc4rPMc12R.list        E8900000 = if (4      .{r0~r12+pc+lr}+rn                          1" ldm"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,#5]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00006800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldr_R,[R,#5]"
                                                                                                  \ exit then 0 ;
  R=(R+#5)_
  ?dup if + exit then \ `5c5#3r3r*4                00006800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#5)"
                                                                                                  \ exit then 0 ;
  ldr_R,[rp,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" ldr_R,[rp,#]"
                                                                                                  \ exit then 0 ;
  R=(rp+#)_
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#)"
                                                                                                  \ exit then 0 ;
  R=(rp+#)_
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#)"
                                                                                                  \ exit then 0 ;
  R=(rp+#8)_
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#8)"
                                                                                                  \ exit then 0 ;
  ldr_R,[pc,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12cpc4r12#                F8DF0000 = if (4  0f 0c 13p  0b 0 14p                             2" ldr_R,[pc,#]"
                                                                                                  \ exit then 0 ;
  R=(pc+#12)_
  ?dup if + exit then \ `12cpc4r12#                F8DF0000 = if (4  0f 0c 13p  0b 0 14p                             2" R=(pc+#12)"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,#]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldr_R,[R,#]"
                                                                                                  \ exit then 0 ;
  R=(R+#12)_
  ?dup if + exit then \ `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,-#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8500800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,-#]!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,#]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8500A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,#]!_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldr_R,[R],-#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8500C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldr_R,[R],-#!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8500D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldr_R,[R],#_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],#"
                                                                                                  \ exit then 0 ;
  ldr_R,[R],#!_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldr_R,[R],#!"
                                                                                                  \ exit then 0 ;
  R=(R-#),w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),w"
                                                                                                  \ exit then 0 ;
  R=(R+#),p_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),p"
                                                                                                  \ exit then 0 ;
  R=(R-#)!_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)!"
                                                                                                  \ exit then 0 ;
  R=(R+#),w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),w"
                                                                                                  \ exit then 0 ;
  R=(R+#),p_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8500B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),p"
                                                                                                  \ exit then 0 ;
  R=(R+#)!_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8500900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)!"
                                                                                                  \ exit then 0 ;
  R=(R),-#_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8500C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),-#"
                                                                                                  \ exit then 0 ;
  R=(R),-#,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8500D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),-#,p"
                                                                                                  \ exit then 0 ;
  R=(R),#_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),#"
                                                                                                  \ exit then 0 ;
  R=(R),#,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R),#,p"
                                                                                                  \ exit then 0 ;
  ldr_R,[pc,#8]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#*4+.(pc+#)          00004800 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" ldr_R,[pc,#8]"
                                                                                                  \ exit then 0 ;
  R=(pc+#8')_
  ?dup if + exit then \ `5c3r8#*4+.(pc+#)          00004800 = if (2             0a  8  13p      7  0  14p*4+.(pc+#)  2" R=(pc+#8')"
                                                                                                  \ exit then 0 ;
  ldr_R,[pc,-#12]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8c-7c4r12#+.(pc-#)        F85F0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" ldr_R,[pc,-#12]"
                                                                                                  \ exit then 0 ;
  ldr_R,[pc,+#12]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8c+7c4r12#+.(pc+#)        F8DF0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" ldr_R,[pc,+#12]"
                                                                                                  \ exit then 0 ;
  R=(pc-#12)_
  ?dup if + exit then \ `8c-7c4r12#+.(pc-#)        F85F0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" R=(pc-#12)"
                                                                                                  \ exit then 0 ;
  R=(pc+#12)_
  ?dup if + exit then \ `8c+7c4r12#+.(pc+#)        F8DF0000 = if (4  0f 0c 13p 0b 0  14p+.(pc+#)                     2" R=(pc+#12)"
                                                                                                  \ exit then 0 ;
  R=(R+R)_
  ?dup if + exit then \ `7c3r3r3r                  00005800 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)"
                                                                                                  \ exit then 0 ;
  ldr_R,[R,R]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F8500000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldr_R,[R,R]"
                                                                                                  \ exit then 0 ;
  R=(R<<R)_
  ?dup if + exit then \ `12c4r4r6c2s4r             F8500000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" R=(R<<R)"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,#5]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00007800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldrb_R,[R,#5]"
                                                                                                  \ exit then 0 ;
  R=(R+#)b_
  ?dup if + exit then \ `5c5#3r3r*4                00007800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#)b"
                                                                                                  \ exit then 0 ;
  R=(R+#5)b_
  ?dup if + exit then \ `5c5#3r3r*4                00007800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#5)b"
                                                                                                  \ exit then 0 ;
  ldrb_R,[rp,#5]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" ldrb_R,[rp,#5]"
                                                                                                  \ exit then 0 ;
  R=(rp+#)b_
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#)b"
                                                                                                  \ exit then 0 ;
  R=(rp+#5)b_
  ?dup if + exit then \ `5c3r8#*4                  00009800 = if (2             0a  8  13p      7  0  14p*4          2" R=(rp+#5)b"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,#12]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrb_R,[R,#12]"
                                                                                                  \ exit then 0 ;
  R=(R+#12)b_
  ?dup if + exit then \ `12c4r4r12#                F8900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)b"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,-#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,-#]!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,#]!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R],-#_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R],-#!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R],#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],#"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R],#!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrb_R,[R],#!"
                                                                                                  \ exit then 0 ;
  R=(R-#),b_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b"
                                                                                                  \ exit then 0 ;
  R=(R-#),b,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b,w"
                                                                                                  \ exit then 0 ;
  R=(R+#),b_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b"
                                                                                                  \ exit then 0 ;
  R=(R+#),b,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b,w"
                                                                                                  \ exit then 0 ;
  R=(R-#),b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b,p"
                                                                                                  \ exit then 0 ;
  R=(R-#),b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),b,p"
                                                                                                  \ exit then 0 ;
  R=(R+#),b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b,p"
                                                                                                  \ exit then 0 ;
  R=(R+#),b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),b,p"
                                                                                                  \ exit then 0 ;
  ldrb_R,[pc,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cU7c4r12#                F8900000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrb_R,[pc,#]"
                                                                                                  \ exit then 0 ;
  R=(pc+#)b_
  ?dup if + exit then \ `8cU7c4r12#                F8900000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#)b"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,R]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrb_R,[R,R]"
                                                                                                  \ exit then 0 ;
  R=(R+R)b_
  ?dup if + exit then \ `7c3r3r3r                  00005C00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)b"
                                                                                                  \ exit then 0 ;
  ldrb_R,[R,R<<#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F8100000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrb_R,[R<<R]"
                                                                                                  \ exit then 0 ;
  R=(R+R<<#)b_
  ?dup if + exit then \ `12c4r4r6c2s4r             F8100000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" R=(R+R<<#)b"
                                                                                                  \ exit then 0 ;
  ldrbt_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrbt_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrbt.R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrbt.R,[R,#]"
                                                                                                  \ exit then 0 ;
  R=(R+#)t_
  ?dup if + exit then \ `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  \ exit then 0 ;
  R=(R+#8)t_
  ?dup if + exit then \ `12c4r4r4c8#               F8100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R,-#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#0          E8500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R,-#]!_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#1          E8700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#2          E8B00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R,#]!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#3          E8F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R],-#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#4          E9500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R],-#!_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#5          E9700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R],#_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#6          E9B00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],#"
                                                                                                  \ exit then 0 ;
  ldrd_R,R,[R],#!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#7          E9F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd_R,R,[R],#!"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R,-#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#0          E8500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R,-#]!_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#1          E8700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#2          E8B00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R,#]!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#3          E8F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R],-#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#4          E9500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R],-#!_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#5          E9700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R],#_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#6          E9B00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],#"
                                                                                                  \ exit then 0 ;
  ldrd.R,R,[R],#!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#7          E9F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" ldrd.R,R,[R],#!"
                                                                                                  \ exit then 0 ;
  R,R=(R-#)d_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#0          E8500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d"
                                                                                                  \ exit then 0 ;
  R,R=(R-#)d,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#1          E8700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d,w"
                                                                                                  \ exit then 0 ;
  R,R=(R+#)d_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#2          E8B00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d"
                                                                                                  \ exit then 0 ;
  R,R=(R+#)d,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#3          E8F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d,w"
                                                                                                  \ exit then 0 ;
  R,R=(R-#)d,p_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#4          E9500000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d,p"
                                                                                                  \ exit then 0 ;
  R,R=(R-#)d,p,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#5          E9700000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R-#)d,p,w"
                                                                                                  \ exit then 0 ;
  R,R=(R+#)d,p_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#6          E9B00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d,p"
                                                                                                  \ exit then 0 ;
  R,R=(R+#)d,p,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#7          E9F00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" R,R=(R+#)d,p,w"
                                                                                                  \ exit then 0 ;
  ldrex_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrex_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrex.R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrex.R,[R,#]"
                                                                                                  \ exit then 0 ;
  R=(R+#)ex_
  ?dup if + exit then \ `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)ex"
                                                                                                  \ exit then 0 ;
  R=(R+#12)ex_
  ?dup if + exit then \ `12c4r4r4c8#               E8500F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#12)ex"
                                                                                                  \ exit then 0 ;
  ldrexb_R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexb_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrexb.R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexb.R,[R,#]"
                                                                                                  \ exit then 0 ;
  R=(R+#)exb_
  ?dup if + exit then \ `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#)exb"
                                                                                                  \ exit then 0 ;
  R=(R+#12)exb_
  ?dup if + exit then \ `12c4r4r12#                E8D00F4F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)exb"
                                                                                                  \ exit then 0 ;
  ldrexd_R,R,[R]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                E8B0007F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexd_R,R,[R]"
                                                                                                  \ exit then 0 ;
  ldrexd.R,R,[R]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                E8B0007F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexd.R,R,[R]"
                                                                                                  \ exit then 0 ;
  R,R=[R]exd_
  ?dup if + exit then \ `12c4r4r12#                E8B0007F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R,R=[R]exd"
                                                                                                  \ exit then 0 ;
  ldrexh_R,[R]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                E8D00F5F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexh_R,[R]"
                                                                                                  \ exit then 0 ;
  ldrexh.R,[R]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                E8D00F5F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrexh.R,[R]"
                                                                                                  \ exit then 0 ;
  R=(R)exh_
  ?dup if + exit then \ `12c4r4r12#                E8D00F5F = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R)exh"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldrh_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrh.R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" ldrh.R,[R,#]"
                                                                                                  \ exit then 0 ;
  R=(R+#)h_
  ?dup if + exit then \ `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#)h"
                                                                                                  \ exit then 0 ;
  R=(R+#5),h_
  ?dup if + exit then \ `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#5),h"
                                                                                                  \ exit then 0 ;
  R=(R+#),h_
  ?dup if + exit then \ `5c5#3r3r*4                00008800 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" R=(R+#),h"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,#12]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrh_R,[R,#12]"
                                                                                                  \ exit then 0 ;
  ldrh.R,[R,#12]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrh.R,[R,#12]"
                                                                                                  \ exit then 0 ;
  R=(R+#12)h_
  ?dup if + exit then \ `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)h"
                                                                                                  \ exit then 0 ;
  R=(R+#12)h_
  ?dup if + exit then \ `12c4r4r12#                F8D00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)h"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,-#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,-#]!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,#]!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R],-#_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R],-#!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R],#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],#"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R],#!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrh_R,[R],#!"
                                                                                                  \ exit then 0 ;
  R=(R-#)h_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h"
                                                                                                  \ exit then 0 ;
  R=(R-#)h,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h,w"
                                                                                                  \ exit then 0 ;
  R=(R+#)h_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h"
                                                                                                  \ exit then 0 ;
  R=(R+#)h,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h,w"
                                                                                                  \ exit then 0 ;
  R=(R-#)h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h,p"
                                                                                                  \ exit then 0 ;
  R=(R-#)h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)h,p"
                                                                                                  \ exit then 0 ;
  R=(R+#)h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h,p"
                                                                                                  \ exit then 0 ;
  R=(R+#)h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)h,p"
                                                                                                  \ exit then 0 ;
  R=(R-#),h_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h"
                                                                                                  \ exit then 0 ;
  R=(R-#),h,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h,w"
                                                                                                  \ exit then 0 ;
  R=(R+#),h_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h"
                                                                                                  \ exit then 0 ;
  R=(R+#),h,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h,w"
                                                                                                  \ exit then 0 ;
  R=(R-#),h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h,p"
                                                                                                  \ exit then 0 ;
  R=(R-#),h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),h,p"
                                                                                                  \ exit then 0 ;
  R=(R+#),h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h,p"
                                                                                                  \ exit then 0 ;
  R=(R+#),h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),h,p"
                                                                                                  \ exit then 0 ;
  ldrh_R=(pc+#12)_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cU7c4r12#                F83F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R=(pc+#12)"
                                                                                                  \ exit then 0 ;
  ldrh_R=(pc+#)_
  ?dup if + exit then \ `8cU7c4r12#                F83F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R=(pc+#)"
                                                                                                  \ exit then 0 ;
  ldrh_R=(pc+#12)_
  ?dup if + exit then \ `8cU7c4r12#                F83F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R=(pc+#12)"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,R]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrh_R,[R,R]"
                                                                                                  \ exit then 0 ;
  R=(R+R)h_
  ?dup if + exit then \ `7c3r3r3r                  00005A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)h"
                                                                                                  \ exit then 0 ;
  ldrh_R,[R,R<<#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F8300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrh_R,[R,R<<#]"
                                                                                                  \ exit then 0 ;
  R=(R+R<<#)h_
  ?dup if + exit then \ `12c4r4r6c2s4r             F8300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" R=(R+R<<#)h"
                                                                                                  \ exit then 0 ;
  ldrht_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F83000E0 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrht_R,[R,#]"
                                                                                                  \ exit then 0 ;
  R=(R+#)t_
  ?dup if + exit then \ `12c4r4r4c8#               F83000E0 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  \ exit then 0 ;
  R=(R+#8)t_
  ?dup if + exit then \ `12c4r4r4c8#               F83000E0 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R,#12]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrsb_R,[R,#12]"
                                                                                                  \ exit then 0 ;
  R=(R+#),sb_
  ?dup if + exit then \ `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#),b"
                                                                                                  \ exit then 0 ;
  R=(R+#)sb_
  ?dup if + exit then \ `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#)b"
                                                                                                  \ exit then 0 ;
  R=(R+#12),sb_
  ?dup if + exit then \ `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12),b"
                                                                                                  \ exit then 0 ;
  R=(R+#12)sb_
  ?dup if + exit then \ `12c4r4r12#                F9900000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)b"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R,-#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F9100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R,-#]!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F9100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F9100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R,#]!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F9100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R],-#_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F9100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R],-#!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F9100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R],#_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],#"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R],#!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F9100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsb_R,[R],#!"
                                                                                                  \ exit then 0 ;
  R=(R-#)sb_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F9100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sb"
                                                                                                  \ exit then 0 ;
  R=(R-#)sb,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F9100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sb,w"
                                                                                                  \ exit then 0 ;
  R=(R+#)sb_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F9100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sb"
                                                                                                  \ exit then 0 ;
  R=(R+#)sb,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F9100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sb,w"
                                                                                                  \ exit then 0 ;
  R=(R)-#sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F9100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#sb,p"
                                                                                                  \ exit then 0 ;
  R=(R)-#sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F9100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#sb,p"
                                                                                                  \ exit then 0 ;
  R=(R)+#sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#sb,p"
                                                                                                  \ exit then 0 ;
  R=(R)+#sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F9100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#sb,p"
                                                                                                  \ exit then 0 ;
  R=(R-#),sb_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F9100800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sb"
                                                                                                  \ exit then 0 ;
  R=(R-#),sb,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F9100900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sb,w"
                                                                                                  \ exit then 0 ;
  R=(R+#),sb_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F9100A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sb"
                                                                                                  \ exit then 0 ;
  R=(R+#),sb,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F9100B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sb,w"
                                                                                                  \ exit then 0 ;
  R=(R)-#,sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F9100C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#,sb,p"
                                                                                                  \ exit then 0 ;
  R=(R)-#,sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F9100D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)-#,sb,p"
                                                                                                  \ exit then 0 ;
  R=(R)+#,sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#,sb,p"
                                                                                                  \ exit then 0 ;
  R=(R)+#,sb,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F9100F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R)+#,sb,p"
                                                                                                  \ exit then 0 ;
  ldrh_R,[pc,#12]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cU7c4r12#                F91F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrh_R,[pc,#12]"
                                                                                                  \ exit then 0 ;
  R=(pc+#)h_
  ?dup if + exit then \ `8cU7c4r12#                F91F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#)h"
                                                                                                  \ exit then 0 ;
  R=(pc+#12)h_
  ?dup if + exit then \ `8cU7c4r12#                F91F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#12)h"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R,R]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005600 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrsb_R,[R,R]"
                                                                                                  \ exit then 0 ;
  R=(R+R)sb_
  ?dup if + exit then \ `7c3r3r3r                  00005600 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)sb"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[R<<R]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F9100000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrsb_R,[R<<R]"
                                                                                                  \ exit then 0 ;
  ldrsb_R=(R<<R)b_
  ?dup if + exit then \ `12c4r4r6c2s4r             F9100000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrsb_R=(R<<R)b"
                                                                                                  \ exit then 0 ;
  ldrsbt_R,[R,#8]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsbt_R,[R,#8]"
                                                                                                  \ exit then 0 ;
  R=(R+#)t_
  ?dup if + exit then \ `12c4r4r4c8#               F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  \ exit then 0 ;
  R=(R+#8)t_
  ?dup if + exit then \ `12c4r4r4c8#               F9100E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R,#12]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F9B00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" ldrsh_R,[R,#12]"
                                                                                                  \ exit then 0 ;
  R=(R+#)h_
  ?dup if + exit then \ `12c4r4r12#                F9B00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#)h"
                                                                                                  \ exit then 0 ;
  R=(R+#12)h_
  ?dup if + exit then \ `12c4r4r12#                F9B00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" R=(R+#12)h"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R,-#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F9300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R,-#]!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F9300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F9300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,#]"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R,#]!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F9300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R],-#_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F9300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],-#"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R],-#!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F9300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R],#_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],#"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R],#!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F9300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsh_R,[R],#!"
                                                                                                  \ exit then 0 ;
  R=(R-#)sh_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F9300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh"
                                                                                                  \ exit then 0 ;
  R=(R-#)sh,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F9300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh,w"
                                                                                                  \ exit then 0 ;
  R=(R+#)sh_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F9300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh"
                                                                                                  \ exit then 0 ;
  R=(R+#)sh,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F9300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh,w"
                                                                                                  \ exit then 0 ;
  R=(R-#)sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F9300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh,p"
                                                                                                  \ exit then 0 ;
  R=(R-#)sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F9300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#)sh,p"
                                                                                                  \ exit then 0 ;
  R=(R+#)sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh,p"
                                                                                                  \ exit then 0 ;
  R=(R+#)sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F9300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)sh,p"
                                                                                                  \ exit then 0 ;
  R=(R-#),sh_
  ?dup if + exit then \ `12c4r4rcPUW8#0            F9300800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh"
                                                                                                  \ exit then 0 ;
  R=(R-#),sh,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1            F9300900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh,w"
                                                                                                  \ exit then 0 ;
  R=(R+#),sh_
  ?dup if + exit then \ `12c4r4rcPUW8#2            F9300A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh"
                                                                                                  \ exit then 0 ;
  R=(R+#),sh,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3            F9300B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh,w"
                                                                                                  \ exit then 0 ;
  R=(R-#),sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4            F9300C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh,p"
                                                                                                  \ exit then 0 ;
  R=(R-#),sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5            F9300D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R-#),sh,p"
                                                                                                  \ exit then 0 ;
  R=(R+#),sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6            F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh,p"
                                                                                                  \ exit then 0 ;
  R=(R+#),sh,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7            F9300F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#),sh,p"
                                                                                                  \ exit then 0 ;
  ldrsb_R,[pc,#12]_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cU7c4r12#                F93F0000 = if (4  0f 0c 13p 0b 0  14p                             2" ldrsb_R,[pc,#12]"
                                                                                                  \ exit then 0 ;
  R=(pc+#)b_
  ?dup if + exit then \ `8cU7c4r12#                F93F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#)b"
                                                                                                  \ exit then 0 ;
  R=(pc+#12)b_
  ?dup if + exit then \ `8cU7c4r12#                F93F0000 = if (4  0f 0c 13p 0b 0  14p                             2" R=(pc+#12)b"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R,R]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" ldrsh_R,[R,R]"
                                                                                                  \ exit then 0 ;
  R=(R+R)h_
  ?dup if + exit then \ `7c3r3r3r                  00005E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=(R+R)h"
                                                                                                  \ exit then 0 ;
  ldrsh_R,[R<<R]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F9300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" ldrsh_R,[R<<R]"
                                                                                                  \ exit then 0 ;
  R=(R<<R)h_
  ?dup if + exit then \ `12c4r4r6c2s4r             F9300000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" R=(R<<R)h"
                                                                                                  \ exit then 0 ;
  ldrsht_R,[R,#8]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrsht_R,[R,#8]"
                                                                                                  \ exit then 0 ;
  R=(R+#)t_
  ?dup if + exit then \ `12c4r4r4c8#               F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  \ exit then 0 ;
  R=(R+#8)t_
  ?dup if + exit then \ `12c4r4r4c8#               F9300E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  \ exit then 0 ;
  ldrt_R,[R,#8]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" ldrt_R,[R,#8]"
                                                                                                  \ exit then 0 ;
  R=(R+#)t_
  ?dup if + exit then \ `12c4r4r4c8#               F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#)t"
                                                                                                  \ exit then 0 ;
  R=(R+#8)t_
  ?dup if + exit then \ `12c4r4r4c8#               F8500E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" R=(R+#8)t"
                                                                                                  \ exit then 0 ;
  lsls_R,R,#5_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" lsls_R,R,#5"
                                                                                                  \ exit then 0 ;
  lsl_R,R,#5_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" lsl_R,R,#5"
                                                                                                  \ exit then 0 ;
  R=R<<#,s_
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#,s"
                                                                                                  \ exit then 0 ;
  R=R<<#_
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#"
                                                                                                  \ exit then 0 ;
  R=R<<#5,s_
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#5,s"
                                                                                                  \ exit then 0 ;
  R=R<<#5s_
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R<<#5s"
                                                                                                  \ exit then 0 ;
  R=R.u<<#_
  ?dup if + exit then \ `5c5#3r3r                  00000000 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R.u<<#"
                                                                                                  \ exit then 0 ;
  lsl_R,R,#5,w_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA4F0000 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" lsl_R,R,#5,w"
                                                                                                  \ exit then 0 ;
  R=R<<#5'_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA4F0000 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R<<#5'"
                                                                                                  \ exit then 0 ;
  R=R,u<<#5'_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA4F0000 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u<<#5'"
                                                                                                  \ exit then 0 ;
  LSLs_R,R_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" LSLs_R,R"
                                                                                                  \ exit then 0 ;
  LSL_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" LSL_R,R"
                                                                                                  \ exit then 0 ;
  R<<R,s_
  ?dup if + exit then \ `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" R<<R,s"
                                                                                                  \ exit then 0 ;
  R<<R_
  ?dup if + exit then \ `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" R<<R"
                                                                                                  \ exit then 0 ;
  R,u<<R_
  ?dup if + exit then \ `10c3r3r                   00004080 = if (2              2  0  13p      5  3  14p            2" R,u<<R"
                                                                                                  \ exit then 0 ;
  lsl_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" lsl_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R<<R_
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R<<R"
                                                                                                  \ exit then 0 ;
  R=R,u<<R_
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R,u<<R"
                                                                                                  \ exit then 0 ;
  lsr_R,R,#5_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" lsr_R,R,#5"
                                                                                                  \ exit then 0 ;
  R=R>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R>>#5"
                                                                                                  \ exit then 0 ;
  R=R,>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,>>#5"
                                                                                                  \ exit then 0 ;
  R=R,>>#_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,>>#"
                                                                                                  \ exit then 0 ;
  3R=3R>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" 3R=3R>>#5"
                                                                                                  \ exit then 0 ;
  R=Ru>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=Ru>>#5"
                                                                                                  \ exit then 0 ;
  R=R,u>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,u>>#5"
                                                                                                  \ exit then 0 ;
  R=R,u>>#_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" R=R,u>>#"
                                                                                                  \ exit then 0 ;
  3R=3R,u>>#5_
  ?dup if + exit then \ `5c5#3r3r                  00000800 = if (2       2  0  12p  5  3  13p  0a  6  14p           3" 3R=3R,u>>#5"
                                                                                                  \ exit then 0 ;
  lsr_R,R,#5_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" lsr_R,R,#5"
                                                                                                  \ exit then 0 ;
  R=R>>#_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R>>#"
                                                                                                  \ exit then 0 ;
  R=R,>>#'_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,>>#'"
                                                                                                  \ exit then 0 ;
  R=R,>>#5_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,>>#5"
                                                                                                  \ exit then 0 ;
  4R=4R>>#5_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" 4R=4R>>#5"
                                                                                                  \ exit then 0 ;
  R=R,u>>#_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u>>#"
                                                                                                  \ exit then 0 ;
  R=R,u>>#'_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u>>#'"
                                                                                                  \ exit then 0 ;
  R=R,u>>#5_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R,u>>#5"
                                                                                                  \ exit then 0 ;
  4R=4R,u>>#5_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA2F0010 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" 4R=4R,u>>#5"
                                                                                                  \ exit then 0 ;
  lsrs_R,R_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" lsrs_R,R"
                                                                                                  \ exit then 0 ;
  lsr_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" lsr_R,R"
                                                                                                  \ exit then 0 ;
  R>>R,s_
  ?dup if + exit then \ `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" R>>R,s"
                                                                                                  \ exit then 0 ;
  R>>R_
  ?dup if + exit then \ `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" R>>R"
                                                                                                  \ exit then 0 ;
  Ru>>R_
  ?dup if + exit then \ `10c3r3r                   000040C0 = if (2              2  0  13p      5  3  14p            2" Ru>>R"
                                                                                                  \ exit then 0 ;
  lsr_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA20F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" lsr_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R>>R_
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA20F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R>>R"
                                                                                                  \ exit then 0 ;
  mla_R,R,R,R_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4r4c4r             FB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" mla_R,R,R,R"
                                                                                                  \ exit then 0 ;
  mla.R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" mla.R,R,R,R"
                                                                                                  \ exit then 0 ;
  mls_R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB000010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" mls_R,R,R,R"
                                                                                                  \ exit then 0 ;
  mov_R,#8_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" mov_R,#8"
                                                                                                  \ exit then 0 ;
  movs_R,#8_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" movs_R,#8"
                                                                                                  \ exit then 0 ;
  R=#8_
  ?dup if + exit then \ `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" R=#8"
                                                                                                  \ exit then 0 ;
  R=#8,s_
  ?dup if + exit then \ `5c3r8#                    00002000 = if (2             0a  8  13p      7  0  14p            2" R=#8,s"
                                                                                                  \ exit then 0 ;
  mov_R,#12_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs5c3#4r8#            F04F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" mov_R,#12"
                                                                                                  \ exit then 0 ;
  R=#12_
  ?dup if + exit then \ `5c#5cs5c3#4r8#            F04F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=#12"
                                                                                                  \ exit then 0 ;
  mov_R,#16_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4#c3#4r8#            F2400000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" mov_R,#16"
                                                                                                  \ exit then 0 ;
  R=#16_
  ?dup if + exit then \ `5c#6c4#c3#4r8#            F2400000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" R=#16"
                                                                                                  \ exit then 0 ;
  mov_R,R''_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `8cDN4r3r                  00004600 = if (2          7 7 2 0 23p      6  3  14p              2" mov_R,R''"
                                                                                                  \ exit then 0 ;
  R=R''_
  ?dup if + exit then \ `8cDN4r3r                  00004600 = if (2          7 7 2 0 23p      6  3  14p              2" R=R''"
                                                                                                  \ exit then 0 ;
  movs_R,R'_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" movs_R,R'"
                                                                                                  \ exit then 0 ;
  mov_R,R'_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" mov_R,R'"
                                                                                                  \ exit then 0 ;
  R=R,s'_
  ?dup if + exit then \ `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" R=R,s'"
                                                                                                  \ exit then 0 ;
  R=R'_
  ?dup if + exit then \ `10c3r3r                   00000000 = if (2              2  0  13p      5  3  14p            2" R=R'"
                                                                                                  \ exit then 0 ;
  movs_R,R_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc8c4r4c4r              EA50F000 = if (4  0b 8 13p  3 0 14p                               2" movs_R,R"
                                                                                                  \ exit then 0 ;
  R=R,s_
  ?dup if + exit then \ `11cc8c4r4c4r              EA50F000 = if (4  0b 8 13p  3 0 14p                               2" R=R,s"
                                                                                                  \ exit then 0 ;
  mov_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs8c4r4c4r              EA40F000 = if (4  0b 8 13p  3 0 14p                               2" mov_R,R"
                                                                                                  \ exit then 0 ;
  R=R_
  ?dup if + exit then \ `11cs8c4r4c4r              EA40F000 = if (4  0b 8 13p  3 0 14p                               2" R=R"
                                                                                                  \ exit then 0 ;
  movt_R=#_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" movt_R=#"
                                                                                                  \ exit then 0 ;
  movt_R=#16_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" movt_R=#16"
                                                                                                  \ exit then 0 ;
  Rt=#_
  ?dup if + exit then \ `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" Rt=#"
                                                                                                  \ exit then 0 ;
  Rt=#16_
  ?dup if + exit then \ `5c#6c4#c3#4r8#            F2C00000 = if (4  0b  8  13p  4,#6.4#.3#4.8#,4                    2" Rt=#16"
                                                                                                  \ exit then 0 ;
  mrs_R,cpsr_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cR8c4r8c                F3EF8000 = if (4  0b 8 14p                                        1" mrs_R,cpsr"
                                                                                                  \ exit then 0 ;
  mrs_R,spsr_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cR8c4r8c                F3FF8000 = if (4  0b 8 14p                                        1" mrs_R,spsr"
                                                                                                  \ exit then 0 ;
  R=cpsr_
  ?dup if + exit then \ `11cR8c4r8c                F3EF8000 = if (4  0b 8 14p                                        1" R=cpsr"
                                                                                                  \ exit then 0 ;
  R=spsr_
  ?dup if + exit then \ `11cR8c4r8c                F3FF8000 = if (4  0b 8 14p                                        1" R=spsr"
                                                                                                  \ exit then 0 ;
  msr_cpsr,R_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cR4r4c4m8c              F3808000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" msr_cpsr,R"
                                                                                                  \ exit then 0 ;
  msr_spsr,R_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cR4r4c4m8c              F3908000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" msr_spsr,R"
                                                                                                  \ exit then 0 ;
  cpsr=R_
  ?dup if + exit then \ `11cR4r4c4m8c              F3808000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" cpsr=R"
                                                                                                  \ exit then 0 ;
  spsr=R_
  ?dup if + exit then \ `11cR4r4c4m8c              F3908000 = if (4  13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p          1" spsr=R"
                                                                                                  \ exit then 0 ;
  mul_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004340 = if (2              2  0  13p      5  3  14p            2" mul_R,R"
                                                                                                  \ exit then 0 ;
  R*R'_
  ?dup if + exit then \ `10c3r3r                   00004340 = if (2              2  0  13p      5  3  14p            2" R*R'"
                                                                                                  \ exit then 0 ;
  mul_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FB00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" mul_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R*R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FB00F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R*R"
                                                                                                  \ exit then 0 ;
  mvn_R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs5c3#4r8#            F06F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" mvn_R,#"
                                                                                                  \ exit then 0 ;
  R=#8/_
  ?dup if + exit then \ `5c#5cs5c3#4r8#            F06F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=#8/"
                                                                                                  \ exit then 0 ;
  R=#12/_
  ?dup if + exit then \ `5c#5cs5c3#4r8#            F06F0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=#12/"
                                                                                                  \ exit then 0 ;
  mvn_R,R/_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   000043C0 = if (2              2  0  13p      5  3  14p            2" mvn_R,R/"
                                                                                                  \ exit then 0 ;
  R=R/_
  ?dup if + exit then \ `10c3r3r                   000043C0 = if (2              2  0  13p      5  3  14p            2" R=R/"
                                                                                                  \ exit then 0 ;
  mvn_R,R/<<#5_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EA6F0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" mvn_R,R/<<#5"
                                                                                                  \ exit then 0 ;
  R=R/,<<#5_
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EA6F0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R/,<<#5"
                                                                                                  \ exit then 0 ;
  R=R<<#5_
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EA6F0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R<<#5"
                                                                                                  \ exit then 0 ;
  nop_
  ?dup if + exit then \ `16c                       0000BF00 = if (2                                                  1" nop"
                                                                                                  \ exit then 0 ;
  nop_
  ?dup if + exit then \ `16c                       0000BF00 = if (2                                                  1" nop"
                                                                                                  \ exit then 0 ;
  nop'_
  ?dup if + exit then \ `32c                       F3AF8000 = if (4                                                  1" nop'"
                                                                                                  \ exit then 0 ;
  nop32_
  ?dup if + exit then \ `32c                       F3AF8000 = if (4                                                  1" nop32"
                                                                                                  \ exit then 0 ;
  ror_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA4F0030 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" ror_R,R,#"
                                                                                                  \ exit then 0 ;
  R=R>>>#_
  ?dup if + exit then \ `11cs5c3#4r2#2c4r          EA4F0030 = if (4  0b  8  12p  3 0 13p 0e 0c 7 6  24p              3" R=R>>>#"
                                                                                                  \ exit then 0 ;
  orns_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" orns_R,R,#"
                                                                                                  \ exit then 0 ;
  R=Ro#/,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=Ro#/,s"
                                                                                                  \ exit then 0 ;
  orn_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" orn_R,R,#"
                                                                                                  \ exit then 0 ;
  R=Ro#/_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Ro#/"
                                                                                                  \ exit then 0 ;
  orn_R,R,R,#_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,#"
                                                                                                  \ exit then 0 ;
  R=RoR<<#/_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#/"
                                                                                                  \ exit then 0 ;
  orn_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  orn_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  orn_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  orn_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orn_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RoR/,<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,<<#"
                                                                                                  \ exit then 0 ;
  R=RoR/,>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>#"
                                                                                                  \ exit then 0 ;
  R=RoR/,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,a>>#"
                                                                                                  \ exit then 0 ;
  R=RoR/,>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>>#"
                                                                                                  \ exit then 0 ;
  orns_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  orns_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  orns_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  orns_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orns_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RoR/,<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,<<#,s"
                                                                                                  \ exit then 0 ;
  R=RoR/,>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>#,s"
                                                                                                  \ exit then 0 ;
  R=RoR/,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=RoR/,>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR/,>>>#,s"
                                                                                                  \ exit then 0 ;
  orrs_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" orrs_R,R,#"
                                                                                                  \ exit then 0 ;
  R=Ro#,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F0500000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=Ro#,s"
                                                                                                  \ exit then 0 ;
  orr_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" orr_R,R,#"
                                                                                                  \ exit then 0 ;
  R=Ro#_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F0400000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=Ro#"
                                                                                                  \ exit then 0 ;
  orr_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004300 = if (2              2  0  13p      5  3  14p            2" orr_R,R"
                                                                                                  \ exit then 0 ;
  RoR_
  ?dup if + exit then \ `10c3r3r                   00004300 = if (2              2  0  13p      5  3  14p            2" RoR"
                                                                                                  \ exit then 0 ;
  orr_R,R,R,#_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,#"
                                                                                                  \ exit then 0 ;
  R=RoR<<#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#"
                                                                                                  \ exit then 0 ;
  orr_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  orr_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  orr_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  orr_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orr_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RoR<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA400000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#"
                                                                                                  \ exit then 0 ;
  R=RoR>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA400010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>#"
                                                                                                  \ exit then 0 ;
  R=RoR,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA400020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR,a>>#"
                                                                                                  \ exit then 0 ;
  R=RoR>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA400030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>>#"
                                                                                                  \ exit then 0 ;
  orrs_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  orrs_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  orrs_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  orrs_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" orrs_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=RoR<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EA500000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR<<#,s"
                                                                                                  \ exit then 0 ;
  R=RoR>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EA500010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>#,s"
                                                                                                  \ exit then 0 ;
  R=RoR,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EA500020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=RoR>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EA500030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=RoR>>>#,s"
                                                                                                  \ exit then 0 ;
  pkh_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,#"
                                                                                                  \ exit then 0 ;
  pkh_                                          \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh"
                                                                                                  \ exit then 0 ;
  pkh_R,R,#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,#"
                                                                                                  \ exit then 0 ;
  pkh_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh"
                                                                                                  \ exit then 0 ;
  pkh_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EAC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  pkh_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EAC00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkh_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  pkhs_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EAD00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkhs_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  pkhs_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EAD00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" pkhs_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  pld_[R,+#12]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c12#                F890F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[R,+#12]"
                                                                                                  \ exit then 0 ;
  pld_(R+#)_
  ?dup if + exit then \ `12c4r4c12#                F890F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(R+#)"
                                                                                                  \ exit then 0 ;
  pld_[R,-#8]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r8c8#                 F810FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[R,-#8]"
                                                                                                  \ exit then 0 ;
  pld_(R-#)_
  ?dup if + exit then \ `12c4r8c8#                 F810FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(R-#)"
                                                                                                  \ exit then 0 ;
  pld_[pc,-#12]_
  ?dup if + exit then \ `20c12#                    F81FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[pc,-#12]"
                                                                                                  \ exit then 0 ;
  pld_[pc,+#12]_
  ?dup if + exit then \ `20c12#                    F89FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[pc,+#12]"
                                                                                                  \ exit then 0 ;
  pld_(pc-#)_
  ?dup if + exit then \ `20c12#                    F81FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(pc-#)"
                                                                                                  \ exit then 0 ;
  pld_(pc+#)_
  ?dup if + exit then \ `20c12#                    F89FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(pc+#)"
                                                                                                  \ exit then 0 ;
  pld_[R,R<<#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r10c2s4r              F810F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_[R,R<<#]"
                                                                                                  \ exit then 0 ;
  pld_(R+R<<#)_
  ?dup if + exit then \ `12c4r10c2s4r              F810F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pld_(R+R<<#)"
                                                                                                  \ exit then 0 ;
  pli_[R,+#12]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c12#                F990F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[R,+#12]"
                                                                                                  \ exit then 0 ;
  pli_(R+#)_
  ?dup if + exit then \ `12c4r4c12#                F990F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(R+#)"
                                                                                                  \ exit then 0 ;
  pli_[R,-#8]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r8c8#                 F910FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[R,-#8]"
                                                                                                  \ exit then 0 ;
  pli_(R-#)_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r8c8#                 F910FC00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(R-#)"
                                                                                                  \ exit then 0 ;
  pli_[pc,-#12]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `20c12#                    F91FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[pc,-#12]"
                                                                                                  \ exit then 0 ;
  pli_[pc,+#12]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `20c12#                    F99FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[pc,+#12]"
                                                                                                  \ exit then 0 ;
  pli_(pc-#)_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `20c12#                    F91FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(pc-#)"
                                                                                                  \ exit then 0 ;
  pli_(pc+#)_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `20c12#                    F99FF000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(pc+#)"
                                                                                                  \ exit then 0 ;
  pli_[R,R<<#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r10c2s4r              F910F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_[R,R<<#]"
                                                                                                  \ exit then 0 ;
  pli_(R+R<<#)_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r10c2s4r              F910F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pli_(R+R<<#)"
                                                                                                  \ exit then 0 ;
  pop_                                          \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop"
                                                                                                  \ exit then 0 ;
  pop_
  ?dup if + exit then \ `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop"
                                                                                                  \ exit then 0 ;
  pop{}_R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop{}_R"
                                                                                                  \ exit then 0 ;
  pop{}_                                        \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop{}"
                                                                                                  \ exit then 0 ;
  pop_R_
  ?dup if + exit then \ `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop_R"
                                                                                                  \ exit then 0 ;
  pop_R8_
  ?dup if + exit then \ `7cP8r                     0000BC00 = if (2      .{r0~r7+pc}                                 1" pop_R8"
                                                                                                  \ exit then 0 ;
  pop{}'_
  ?dup if + exit then \ `16cPMc13r                 E8BD0000 = if (4    .{r0~r12+pc+lr}                               1" pop{}'"
                                                                                                  \ exit then 0 ;
  push{}_
  ?dup if + exit then \ `7cM8r                     0000B400 = if (2      .{r0~r7+lr}                                 1" push{}"
                                                                                                  \ exit then 0 ;
  push_
  ?dup if + exit then \ `7cM8r                     0000B400 = if (2      .{r0~r7+lr}                                 1" push"
                                                                                                  \ exit then 0 ;
  push{}'_
  ?dup if + exit then \ `17cMc13r                  E92D0000 = if (4      .{r0~r12+lr}                                1" push{}'"
                                                                                                  \ exit then 0 ;
  qadd_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qadd_R,R,R"
                                                                                                  \ exit then 0 ;
  qadd16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qadd16_R,R,R"
                                                                                                  \ exit then 0 ;
  qadd8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qadd8_R,R,R"
                                                                                                  \ exit then 0 ;
  qasx_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qasx_R,R,R"
                                                                                                  \ exit then 0 ;
  qdadd_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F090 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qdadd_R,R,R"
                                                                                                  \ exit then 0 ;
  qdsub_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F0B0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qdsub_R,R,R"
                                                                                                  \ exit then 0 ;
  qsax_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAE0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsax_R,R,R"
                                                                                                  \ exit then 0 ;
  qsub16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F0A0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsub16_R,R,R"
                                                                                                  \ exit then 0 ;
  qsub16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAD0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsub16_R,R,R"
                                                                                                  \ exit then 0 ;
  qsub8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAC0F010 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" qsub8_R,R,R"
                                                                                                  \ exit then 0 ;
  rbit_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F0A0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" rbit_R,R,R"
                                                                                                  \ exit then 0 ;
  rev_R,R_
  ?dup if + exit then \ `10c3r3r                   0000BA00 = if (2              2  0  13p      5  3  14p            2" rev_R,R"
                                                                                                  \ exit then 0 ;
  rev_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" rev_R,R,R"
                                                                                                  \ exit then 0 ;
  rev16_R,R_
  ?dup if + exit then \ `10c3r3r                   0000BA40 = if (2              2  0  13p      5  3  14p            2" rev16_R,R"
                                                                                                  \ exit then 0 ;
  rev16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F090 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" rev16_R,R,R"
                                                                                                  \ exit then 0 ;
  revsh_R,R_
  ?dup if + exit then \ `10c3r3r                   0000BAC0 = if (2              2  0  13p      5  3  14p            2" revsh_R,R"
                                                                                                  \ exit then 0 ;
  revsh_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" revsh_R,R,R"
                                                                                                  \ exit then 0 ;
  ror_R,R_
  ?dup if + exit then \ `10c3r3r                   000041C0 = if (2              2  0  13p      5  3  14p            2" ror_R,R"
                                                                                                  \ exit then 0 ;
  ror_R,R,R_
  ?dup if + exit then \ `11cs4r4c4r4c4r            FA60F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ror_R,R,R"
                                                                                                  \ exit then 0 ;
  rrxs_R,R_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" rrxs_R,R"
                                                                                                  \ exit then 0 ;
  rrx_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs8c4r4c4r              EA4F0030 = if (4  0b 8 13p  3 0 14p                               2" rrx_R,R"
                                                                                                  \ exit then 0 ;
  R=rrc_R,s_
  ?dup if + exit then \ `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" R=rrc_R,s"
                                                                                                  \ exit then 0 ;
  R=src_R,s_
  ?dup if + exit then \ `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" R=src_R,s"
                                                                                                  \ exit then 0 ;
  R=src_R_
  ?dup if + exit then \ `11cc8c4r4c4r              EA5F0030 = if (4  0b 8 13p  3 0 14p                               2" R=src_R"
                                                                                                  \ exit then 0 ;
  R=sr_R_
  ?dup if + exit then \ `11cs8c4r4c4r              EA4F0030 = if (4  0b 8 13p  3 0 14p                               2" R=sr_R"
                                                                                                  \ exit then 0 ;
  rsb_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" rsb_R,R"
                                                                                                  \ exit then 0 ;
  rsb_R,R,#0_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" rsb_R,R,#0"
                                                                                                  \ exit then 0 ;
  R=-R_
  ?dup if + exit then \ `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" R=-R"
                                                                                                  \ exit then 0 ;
  R=0-R_
  ?dup if + exit then \ `10c3r3r                   00004240 = if (2              2  0  13p      5  3  14p            2" R=0-R"
                                                                                                  \ exit then 0 ;
  rsbs_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1D00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" rsbs_R,R,#"
                                                                                                  \ exit then 0 ;
  R=#-R,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1D00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=#-R,s"
                                                                                                  \ exit then 0 ;
  rsb_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F1C00000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" rsb_R,R,#"
                                                                                                  \ exit then 0 ;
  R=#-R_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F1C00000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=#-R"
                                                                                                  \ exit then 0 ;

  rsb_R,R,R<<#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R<<#"
                                                                                                  \ exit then 0 ;
\  R=R-R<<#_
\  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#"
\                                                                                                  \ exit then 0 ;
 

  rsb_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  rsb_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EBC00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  rsb_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EBC00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  rsb_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EBC00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsb_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  rsbs_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EBD00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  rsbs_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EBD00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  rsbs_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EBD00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  rsbs_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EBD00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" rsbs_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  sadd16_R,R,R_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sadd16_R,R,R"
                                                                                                  \ exit then 0 ;
  sadd8_R,R,R_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sadd8_R,R,R"
                                                                                                  \ exit then 0 ;
  sasx_R,R,R_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sasx_R,R,R"
                                                                                                  \ exit then 0 ;
  sbcs_R,R,#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" sbcs_R,R,#"
                                                                                                  \ exit then 0 ;
  R=R-#-c,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1700000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R-#-c,s"
                                                                                                  \ exit then 0 ;
  sbc_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F1600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" sbc_R,R,#"
                                                                                                  \ exit then 0 ;
  R=R-#-c_
  ?dup if + exit then \ `5c#5cs4rc3#4r8#           F1600000 = if (4  0b  8  12p   13 10 13p 1a 1a 0e 0c 7 0 34p138   3" R=R-#-c"
                                                                                                  \ exit then 0 ;
  sbc_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004180 = if (2              2  0  13p      5  3  14p            2" sbc_R,R"
                                                                                                  \ exit then 0 ;
  R-R-c_
  ?dup if + exit then \ `10c3r3r                   00004180 = if (2              2  0  13p      5  3  14p            2" R-R-c"
                                                                                                  \ exit then 0 ;
  sbc_R,R,R,#_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,#"
                                                                                                  \ exit then 0 ;
  R=R-R-c<<#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c<<#"
                                                                                                  \ exit then 0 ;
  sbc_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  sbc_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  sbc_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  sbc_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbc_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R-R-c<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB600000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c<<#"
                                                                                                  \ exit then 0 ;
  R=R-R-c>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB600010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>#"
                                                                                                  \ exit then 0 ;
  R=R-R-c,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB600020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c,a>>#"
                                                                                                  \ exit then 0 ;
  R=R-R-c>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB600030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>>#"
                                                                                                  \ exit then 0 ;
  sbcs_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  sbcs_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  sbcs_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  sbcs_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sbcs_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R-R-c<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EB700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c<<#,s"
                                                                                                  \ exit then 0 ;
  R=R-R-c>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EB700010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>#,s"
                                                                                                  \ exit then 0 ;
  R=R-R-c,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EB700020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=R-R-c>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EB700030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R-c>>>#,s"
                                                                                                  \ exit then 0 ;
  sdiv_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FB90F0F0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sdiv_R,R,R"
                                                                                                  \ exit then 0 ;
  sel_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F080 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" sel_R,R,R"
                                                                                                  \ exit then 0 ;
  sev_
  ?dup if + exit then \ `16c                       0000B840 = if (2                                                  1" sev"
                                                                                                  \ exit then 0 ;
  sev,w_
  ?dup if + exit then \ `32c                       F3AF8004 = if (4                                                  1" sev,w"
                                                                                                  \ exit then 0 ;
  shadd16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shadd16_R,R,R"
                                                                                                  \ exit then 0 ;
  shadd8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shadd8_R,R,R"
                                                                                                  \ exit then 0 ;
  shasx_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shasx_R,R,R"
                                                                                                  \ exit then 0 ;
  shsax_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAE0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shsax_R,R,R"
                                                                                                  \ exit then 0 ;
  shsub16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAD0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shsub16_R,R,R"
                                                                                                  \ exit then 0 ;
  shsub8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAC0F020 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" shsub8_R,R,R"
                                                                                                  \ exit then 0 ;
  smc_#_
  ?dup if + exit then \ `12c4#16c                  F7F08000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" smc_#"
                                                                                                  \ exit then 0 ;
  R=R*R+R,ll_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,ll"
                                                                                                  \ exit then 0 ;
  R=R*R+R,lh_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,lh"
                                                                                                  \ exit then 0 ;
  R=R*R+R,hl_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,hl"
                                                                                                  \ exit then 0 ;
  R=R*R+R,hh_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB100000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" R=R*R+R,hh"
                                                                                                  \ exit then 0 ;
  smlad_R=R*R+R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" smlad_R=R*R+R"
                                                                                                  \ exit then 0 ;
  smlal.R_R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FBC00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" smlal.R_R,R,R"
                                                                                                  \ exit then 0 ;
  smull_R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" smull_R,R,R,R"
                                                                                                  \ exit then 0 ;
  ssax_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FBE0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ssax_R,R,R"
                                                                                                  \ exit then 0 ;
  ssub16_R,#,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAD0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ssub16_R,#,R"
                                                                                                  \ exit then 0 ;
  ssub8_R,#,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAC0F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" ssub8_R,#,R"
                                                                                                  \ exit then 0 ;
  push_R_
  ?dup if + exit then \ `12c4r16c                  E9000000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R"
                                                                                                  \ exit then 0 ;
  push_R.m=1_
  ?dup if + exit then \ `12c4r16c                  E9004000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R.m=1"
                                                                                                  \ exit then 0 ;
  push_R!_
  ?dup if + exit then \ `12c4r16c                  E9200000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R!"
                                                                                                  \ exit then 0 ;
  push_R!.m=1_
  ?dup if + exit then \ `12c4r16c                  E9204000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" push_R!.m=1"
                                                                                                  \ exit then 0 ;
  stm_                                          \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C000 = if (2  .{r0~r7}.rn                                     1" stm"
                                                                                                  \ exit then 0 ;
  stmia_R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3R8Rlist                0000C000 = if (2  .{r0~r7}.rn                                     1" stmia_R,#"
                                                                                                  \ exit then 0 ;
  pop_R!',#_
  ?dup if + exit then \ `5c3R8Rlist                0000C000 = if (2  .{r0~r7}.rn                                     1" pop_R!',#"
                                                                                                  \ exit then 0 ;
  pop_R_
  ?dup if + exit then \ `12c4r16c                  E8800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R"
                                                                                                  \ exit then 0 ;
  pop_R.m=1_
  ?dup if + exit then \ `12c4r16c                  E8804000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R.m=1"
                                                                                                  \ exit then 0 ;
  pop_R!_
  ?dup if + exit then \ `12c4r16c                  E8A00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R!"
                                                                                                  \ exit then 0 ;
  pop_R!.m=1_
  ?dup if + exit then \ `12c4r16c                  E8A04000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pop_R!.m=1"
                                                                                                  \ exit then 0 ;
  str_R,[R,#5]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00006000 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" str_R,[R,#5]"
                                                                                                  \ exit then 0 ;
  (R+#5)=R_
  ?dup if + exit then \ `5c5#3r3r*4'               00006000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#5)=R"
                                                                                                  \ exit then 0 ;
  str_R,[rp,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#*4                  00009000 = if (2             0a  8  13p      7  0  14p*4          2" str_R,[rp,#]"
                                                                                                  \ exit then 0 ;
  (rp+#)=R_
  ?dup if + exit then \ `5c3r8#*4                  00009000 = if (2             0a  8  13p      7  0  14p*4          2" (rp+#)=R"
                                                                                                  \ exit then 0 ;
  push_R'_
  ?dup if + exit then \ `5c3r8c                    00009001 = if (2   0a  8  14p                                     1" push_R'"
                                                                                                  \ exit then 0 ;
  str_R,[R,#]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8C00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" str_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#12)=R_
  ?dup if + exit then \ `12c4r4r12#                F8C00000 = if (4  13 10  12p 0b 0 13p 0f 0c 14p                   3" (R+#12)=R"
                                                                                                  \ exit then 0 ;
  str_R,[R,-#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8400800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  str_R,[R,-#]!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8400900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  str_R,[R,#]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8400A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,#]"
                                                                                                  \ exit then 0 ;
  str_R,[R,#]!_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8400B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  str_R,[R],-#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8400C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],-#"
                                                                                                  \ exit then 0 ;
  str_R,[R],-#!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8400D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  str_R,[R],#_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8400E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],#"
                                                                                                  \ exit then 0 ;
  str_R,[R],#!_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8400F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" str_R,[R],#!"
                                                                                                  \ exit then 0 ;
  (R-#)=R_
  ?dup if + exit then \ `12c4r4rcPUW8#0'           F8400800 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R"
                                                                                                  \ exit then 0 ;
  (R-#)=R,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1'           F8400900 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,w"
                                                                                                  \ exit then 0 ;
  (R+#)=R,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3'           F8400B00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,w"
                                                                                                  \ exit then 0 ;
  (R-#)=R,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4'           F8400C00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,p"
                                                                                                  \ exit then 0 ;
  (R-#)=R,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5'           F8400D00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6'           F8400E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7'           F8400F00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,p"
                                                                                                  \ exit then 0 ;
  str_R,[R,R]_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005000 = if (2   2  0  12p  5  3  13p      8  6  14p            3" str_R,[R,R]"
                                                                                                  \ exit then 0 ;
  (R+R)=R_
  ?dup if + exit then \ `7c3r3r3r                  00005000 = if (2   2  0  12p  5  3  13p      8  6  14p            3" (R+R)=R"
                                                                                                  \ exit then 0 ;
  str_R,[R,R<<#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F8400000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" str_R,[R,R<<#]"
                                                                                                  \ exit then 0 ;
  (R+R<<#)=R_
  ?dup if + exit then \ `12c4r4r6c2s4r'            F8400000 = if (4  13 10  12p 3 0 13p  0f 0c 14p                   3" (R+R<<#)=R"
                                                                                                  \ exit then 0 ;
  strb_R,[R,#5]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00007000 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" strb_R,[R,#5]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,b_
  ?dup if + exit then \ `5c5#3r3r*4'               00007000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#)=R,b"
                                                                                                  \ exit then 0 ;
  (R+#5)=R,b_
  ?dup if + exit then \ `5c5#3r3r*4'               00007000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#5)=R,b"
                                                                                                  \ exit then 0 ;
  strb_R,[R,#12]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8800000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" strb_R,[R,#12]"
                                                                                                  \ exit then 0 ;
  (R+#12)=R,b_
  ?dup if + exit then \ `12c4r4r12#                F8800000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" (R+#12)=R,b"
                                                                                                  \ exit then 0 ;
  strb_R,[R,-#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8000800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  strb_R,[R,-#]!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8000900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  strb_R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8000A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,#]"
                                                                                                  \ exit then 0 ;
  strb_R,[R,#]!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8000B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  strb_R,[R],-#_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8000C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],-#"
                                                                                                  \ exit then 0 ;
  strb_R,[R],-#!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8000D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  strb_R,[R],#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8000E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],#"
                                                                                                  \ exit then 0 ;
  strb_R,[R],#!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8000F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strb_R,[R],#!"
                                                                                                  \ exit then 0 ;
  (R-#)=R,b_
  ?dup if + exit then \ `12c4r4rcPUW8#0'           F8000800 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b"
                                                                                                  \ exit then 0 ;
  (R-#)=R,b,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1'           F8000900 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b,w"
                                                                                                  \ exit then 0 ;
  (R+#)=R,b_
  ?dup if + exit then \ `12c4r4rcPUW8#2'           F8000A00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b"
                                                                                                  \ exit then 0 ;
  (R+#)=R,b,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3'           F8000B00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b,w"
                                                                                                  \ exit then 0 ;
  (R-#)=R,b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4'           F8000C00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b,p"
                                                                                                  \ exit then 0 ;
  (R-#)=R,b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5'           F8000D00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,b,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6'           F8000E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,b,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7'           F8000F00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,b,p"
                                                                                                  \ exit then 0 ;
  strb_R,[R,R]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" strb_R,[R,R]"
                                                                                                  \ exit then 0 ;
  (R+R)=R,b_
  ?dup if + exit then \ `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" (R+R)=R,b"
                                                                                                  \ exit then 0 ;
  strb_R,[R,R<<#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F8000000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" strb_R,[R,R<<#]"
                                                                                                  \ exit then 0 ;
  (R+R<<#)=R,b_
  ?dup if + exit then \ `12c4r4r6c2s4r'            F8000000 = if (4  13 10  12p 3 0 13p  0f 0c 14p                   3" (R+R<<#)=R,b"
                                                                                                  \ exit then 0 ;
  strbt_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F8000E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strbt_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,bt_
  ?dup if + exit then \ `12c4r4r4c8#'              F8000E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,bt"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R,-#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8400000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,-#]"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R,-#]!_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8600000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8C00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,#]"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R,#]!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8E00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R,#]!"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R],-#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9400000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],-#"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R],-#!_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9600000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],-#!"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R],#_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9C00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],#"
                                                                                                  \ exit then 0 ;
  strd_R,R,[R],#!_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9E00000 = if (4  0f 0c 11p 0b 8  12p 13 10 13p 7 0 14p           4" strd_R,R,[R],#!"
                                                                                                  \ exit then 0 ;
  (R-#)=R,R,d_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8400000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d"
                                                                                                  \ exit then 0 ;
  (R-#)=R,R,d,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8600000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d,w"
                                                                                                  \ exit then 0 ;
  (R+#)=R,R,d_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E8C00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d"
                                                                                                  \ exit then 0 ;
  (R+#)=R,R,d,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E6E00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d,w"
                                                                                                  \ exit then 0 ;
  (R-#)=R,R,d,p_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9400000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d,p"
                                                                                                  \ exit then 0 ;
  (R-#)=R,R,d,p_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9600000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R-#)=R,R,d,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,R,d,p_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9C00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,R,d,p,w_
  ?dup if + exit then \ `7cPUcWc4r4r4r8#           E9E00000 = if (4  0f 0c 11p 7 0 12p 0b  8  13p 13 10 14p          4" (R+#)=R,R,d,p,w"
                                                                                                  \ exit then 0 ;
  strex_R,R,[R,#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               E8400000 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strex_R,R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,R,ex_
  ?dup if + exit then \ `12c4r4r4c8#'              E8400000 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,R,ex"
                                                                                                  \ exit then 0 ;
  strexb_R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               E8C00040 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strexb_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,exb_
  ?dup if + exit then \ `12c4r4r4c8#'              E8C00040 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,exb"
                                                                                                  \ exit then 0 ;
  strexd_R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               E8C00070 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strexd_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,exd_
  ?dup if + exit then \ `12c4r4r4c8#'              E8C00070 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,exd"
                                                                                                  \ exit then 0 ;
  strexh_R,[R,#]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               E8C00F50 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strexh_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,exh_
  ?dup if + exit then \ `12c4r4r4c8#'              E8C00F50 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,exh"
                                                                                                  \ exit then 0 ;
  strh_R,[R,#5]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c5#3r3r*4                00008000 = if (2    2  0  12p  5  3  13p  0a  6  14p*4            3" strh_R,[R,#5]"
                                                                                                  \ exit then 0 ;
  (R+#5)=R,h_
  ?dup if + exit then \ `5c5#3r3r*4'               00008000 = if (2    5  3  12p  0a  6  13p*4  2 0  14p             3" (R+#5)=R,h"
                                                                                                  \ exit then 0 ;
  strh_R,[R,#12]_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r12#                F8A00000 = if (4  0f 0c 12p 13 10 13p 0b 0  14p                   3" strh_R,[R,#12]"
                                                                                                  \ exit then 0 ;
  (R+#12)=R,h_
  ?dup if + exit then \ `12c4r4r12#                F8A00000 = if (4  13 10  12p 0b 0 13p 0f 0c 14p                   3" (R+#12)=R,h"
                                                                                                  \ exit then 0 ;
  strh_R,[R,-#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#0            F8200800 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,-#]"
                                                                                                  \ exit then 0 ;
  strh_R,[R,-#]!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#1            F8200900 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,-#]!"
                                                                                                  \ exit then 0 ;
  strh_R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#2            F8200A00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,#]"
                                                                                                  \ exit then 0 ;
  strh_R,[R,#]!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#3            F8200B00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R,#]!"
                                                                                                  \ exit then 0 ;
  strh_R,[R],-#_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#4            F8200C00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],-#"
                                                                                                  \ exit then 0 ;
  strh_R,[R],-#!_                               \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#5            F8200D00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],-#!"
                                                                                                  \ exit then 0 ;
  strh_R,[R],#_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#6            F8200E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],#"
                                                                                                  \ exit then 0 ;
  strh_R,[R],#!_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4rcPUW8#7            F8200F00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strh_R,[R],#!"
                                                                                                  \ exit then 0 ;
  (R-#)=R,h_
  ?dup if + exit then \ `12c4r4rcPUW8#0'           F8200800 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h"
                                                                                                  \ exit then 0 ;
  (R-#)=R,h,w_
  ?dup if + exit then \ `12c4r4rcPUW8#1'           F8200900 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h,w"
                                                                                                  \ exit then 0 ;
  (R+#)=R,h_
  ?dup if + exit then \ `12c4r4rcPUW8#2'           F8200A00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h"
                                                                                                  \ exit then 0 ;
  (R+#)=R,h,w_
  ?dup if + exit then \ `12c4r4rcPUW8#3'           F8200B00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h,w"
                                                                                                  \ exit then 0 ;
  (R-#)=R,h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#4'           F8200C00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h,p"
                                                                                                  \ exit then 0 ;
  (R-#)=R,h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#5'           F8200D00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R-#)=R,h,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#6'           F8200E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h,p"
                                                                                                  \ exit then 0 ;
  (R+#)=R,h,p_
  ?dup if + exit then \ `12c4r4rcPUW8#7'           F8200F00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h,p"
                                                                                                  \ exit then 0 ;
  strh_R,[R,R]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" strh_R,[R,R]"
                                                                                                  \ exit then 0 ;
  (R+R)=R,h_
  ?dup if + exit then \ `7c3r3r3r                  00005400 = if (2   2  0  12p  5  3  13p      8  6  14p            3" (R+R)=R,h"
                                                                                                  \ exit then 0 ;
  strh_R,[R,R<<#]_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r6c2s4r             F8020000 = if (4  0f 0c 12p 13 10 13p 3 0 14p                     3" strh_R,[R,R<<#]"
                                                                                                  \ exit then 0 ;
  (R+R<<#)=R,h_
  ?dup if + exit then \ `12c4r4r6c2s4r'            F8020000 = if (4  13 10  12p 3 0 13p  0f 0c 14p                   3" (R+R<<#)=R,h"
                                                                                                  \ exit then 0 ;
  strht_R,[R,#]_                                \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F8020E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strht_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=R,h_
  ?dup if + exit then \ `12c4r4r4c8#'              F8020E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=R,h"
                                                                                                  \ exit then 0 ;
  strt_R,[R,#]_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4r4c8#               F8400E00 = if (4  0f 0c 12p 13 10 13p 7 0 14p                     3" strt_R,[R,#]"
                                                                                                  \ exit then 0 ;
  (R+#)=Rt_
  ?dup if + exit then \ `12c4r4r4c8#'              F8400E00 = if (4  13 10  12p 7 0 13p   0f 0c 14p                  3" (R+#)=Rt"
                                                                                                  \ exit then 0 ;
  sub_R,R,#3_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3#3r3r                  00001E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" sub_R,R,#3"
                                                                                                  \ exit then 0 ;
  R=R-#3_
  ?dup if + exit then \ `7c3#3r3r                  00001E00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R-#3"
                                                                                                  \ exit then 0 ;
  sub_R,#8_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c3r8#                    00003800 = if (2             0a  8  13p      7  0  14p            2" sub_R,#8"
                                                                                                  \ exit then 0 ;
  R-#8_
  ?dup if + exit then \ `5c3r8#                    00003800 = if (2             0a  8  13p      7  0  14p            2" R-#8"
                                                                                                  \ exit then 0 ;
  subs_R,R,#12_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1B00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" subs_R,R,#12"
                                                                                                  \ exit then 0 ;
  R=R-#,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1B00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R-#,s"
                                                                                                  \ exit then 0 ;
  R=R-#12,s_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1B00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R-#12,s"
                                                                                                  \ exit then 0 ;
  sub_R,R,#12_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1A00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" sub_R,R,#12"
                                                                                                  \ exit then 0 ;
  R=R-#12_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1A00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R-#12"
                                                                                                  \ exit then 0 ;
  R=R-#_
  ?dup if + exit then \ `5c#5cc4rc3#4r8#           F1A00000 = if (4  0b  8  12p 13 10 13p 1a 1a 0e 0c 7 0 34p        3" R=R-#"
                                                                                                  \ exit then 0 ;
  sub_R,R,R_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `7c3r3r3r                  00001A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" sub_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R-R_
  ?dup if + exit then \ `7c3r3r3r                  00001A00 = if (2   2  0  12p  5  3  13p      8  6  14p            3" R=R-R"
                                                                                                  \ exit then 0 ;

comment:
  sub_R,R,R.shift.#_                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R.shift.#"
                                                                                                  \ exit then 0 ;
  R=R-R<<#_
  ?dup if + exit then \ `11cs4rc3#4r2#ty4r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#"
                                                                                                  \ exit then 0 ;
comment;

  sub_R,R,R,lsl,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  sub_R,R,R,lsr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EBA00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  sub_R,R,R,asr,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EBA00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  sub_R,R,R,ror,#_                              \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EBA00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" sub_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R-R<<#_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#"
                                                                                                  \ exit then 0 ;
  R=R-R>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EBA00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>#"
                                                                                                  \ exit then 0 ;
  R=R-R,a>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EBA00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R,a>>#"
                                                                                                  \ exit then 0 ;
  R=R-R>>>#_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EBA00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>>#"
                                                                                                  \ exit then 0 ;
  subs_R,R,R,lsl,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EBB00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,lsl,#"
                                                                                                  \ exit then 0 ;
  subs_R,R,R,lsr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EBB00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,lsr,#"
                                                                                                  \ exit then 0 ;
  subs_R,R,R,asr,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EBB00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,asr,#"
                                                                                                  \ exit then 0 ;
  subs_R,R,R,ror,#_                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EBB00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" subs_R,R,R,ror,#"
                                                                                                  \ exit then 0 ;
  R=R-R<<#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#004r         EBB00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R<<#,s"
                                                                                                  \ exit then 0 ;
  R=R-R>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#014r         EBB00010 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>#,s"
                                                                                                  \ exit then 0 ;
  R=R-R,a>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#104r         EBB00020 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R,a>>#,s"
                                                                                                  \ exit then 0 ;
  R=R-R>>>#,s_
  ?dup if + exit then \ `11cc4rc3#4r2#114r         EBB00030 = if (4  0b 8 11p 13 10  12p 3 0 13p 0e 0c 7 6  24p      4" R=R-R>>>#,s"
                                                                                                  \ exit then 0 ;
  sub_rp,#7_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `9c7#                      0000B080 = if (2    6 0  14p                                      1" sub_rp,#7"
                                                                                                  \ exit then 0 ;
  rp-#7_
  ?dup if + exit then \ `9c7#                      0000B080 = if (2    6 0  14p                                      1" rp-#7"
                                                                                                  \ exit then 0 ;
  rp-#7*4_
  ?dup if + exit then \ `9c7#                      0000B080 = if (2    6 0  14p                                      1" rp-#7*4"
                                                                                                  \ exit then 0 ;
  sub_rp,#12_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#5cs5c3#4r8#*4          F1AD0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" sub_rp,#12"
                                                                                                  \ exit then 0 ;
  R=rp-#12_
  ?dup if + exit then \ `5c#5cs5c3#4r8#*4          F1AD0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=rp-#12"
                                                                                                  \ exit then 0 ;
  R=rp-#_
  ?dup if + exit then \ `5c#5cs5c3#4r8#*4          F1AD0000 = if (4  0b  8  13p 1a 1a 0e 0c 7 0 34p138               2" R=rp-#"
                                                                                                  \ exit then 0 ;
  R=rp-#,w_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#11c3#4r8#              F2AD0000 = if (4                       0b 8 14p                   2" R=rp-#,w"
                                                                                                  \ exit then 0 ;
  R=rp-#,w_
  ?dup if + exit then \ `5c#11c3#4r8#              F2AD0000 = if (4                       0b 8 14p                   2" R=rp-#,w"
                                                                                                  \ exit then 0 ;
  sub_R,rp_                                     \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EBAB0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" sub_R,rp"
                                                                                                  \ exit then 0 ;
  R=R-rp<<???_
  ?dup if + exit then \ `11cs5c3#4r2#ty4r          EBAB0000 = if (4  0b  8  12p  3 0 13p  0e 0c 7 6  24p             3" R=R-rp<<???"
                                                                                                  \ exit then 0 ;
  sub_pc,lr,#_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `24c8#                     F3DE8F00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" sub_pc,lr,#"
                                                                                                  \ exit then 0 ;
  pc=lr-#_
  ?dup if + exit then \ `24c8#                     F3DE8F00 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=lr-#"
                                                                                                  \ exit then 0 ;
  svc_#_
  ?dup if + exit then \ `8c8#                      0000DF00 = if (2  7  0  14p                                       1" svc_#"
                                                                                                  \ exit then 0 ;
  sxtab_R,R,R,#_
  ?dup if + exit then \ `12c4r4c4r2c2s4r           FA40F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtab_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxtab16_R,R,R,#_
  ?dup if + exit then \ `12c4r4c4r2c2s4r           FA20F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtab16_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxtah_R,R,R,#_
  ?dup if + exit then \ `12c4r4c4r2c2s4r           FA00F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtah_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxtb_R,R_
  ?dup if + exit then \ `10c3r3r                   0000B240 = if (2              2  0  13p      5  3  14p            2" sxtb_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxtb_R,R,#_
  ?dup if + exit then \ `12c4r4c4r2c2s4r           FA4FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtb_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxtb16_R,R,#_
  ?dup if + exit then \ `12c4r4c4r2c2s4r           FA2FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxtb_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxth_R,R_
  ?dup if + exit then \ `10c3r3r                   0000B200 = if (2              2  0  13p      5  3  14p            2" sxth_R,R,R,#"
                                                                                                  \ exit then 0 ;
  sxth_R,R,#_
  ?dup if + exit then \ `12c4r4c4r2c2s4r           FA0FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" sxth_R,R,R,#"
                                                                                                  \ exit then 0 ;
  tbb_[R,R]_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r12c4r                E8D0F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" tbb_[R,R]"
                                                                                                  \ exit then 0 ;
  pc=(R+R*2),b_
  ?dup if + exit then \ `12c4r12c4r                E8D0F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=(R+R*2),b"
                                                                                                  \ exit then 0 ;
  pc=R+R*2,b_
  ?dup if + exit then \ `12c4r12c4r                E8D0F000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=R+R*2,b"
                                                                                                  \ exit then 0 ;
  tbh_[R,R]_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r12c4r                E8D0F010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" tbh_[R,R]"
                                                                                                  \ exit then 0 ;
  pc=(R+R*2),h_
  ?dup if + exit then \ `12c4r12c4r                E8D0F010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=(R+R*2),h"
                                                                                                  \ exit then 0 ;
  pc=R+R*2,h_
  ?dup if + exit then \ `12c4r12c4r                E8D0F010 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" pc=R+R*2,h"
                                                                                                  \ exit then 0 ;
  ted_R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F0900F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" ted_R,#"
                                                                                                  \ exit then 0 ;
  Rx#<<#,tst_
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F0900F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" Rx#<<#,tst"
                                                                                                  \ exit then 0 ;
  ted_R,R,#_                                    \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#ty4r          EA900F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" ted_R,R,#"
                                                                                                  \ exit then 0 ;
  RxR<<#,tst_
  ?dup if + exit then \ `12c4rc3#4c2#ty4r          EA900F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" RxR<<#,tst"
                                                                                                  \ exit then 0 ;
  tst_R,#_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F0100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" tst_R,#"
                                                                                                  \ exit then 0 ;
  Rn#,tst_
  ?dup if + exit then \ `5c#6c4rc3#4c8#            F0100F00 = if (4           13 10 13p 4,5c#6c4rc3#4c8#>n,4         2" Rn#,tst"
                                                                                                  \ exit then 0 ;
  tst_R,R_                                      \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `10c3r3r                   00004200 = if (2              2  0  13p      5  3  14p            2" tst_R,R"
                                                                                                  \ exit then 0 ;
  RnR,tst_
  ?dup if + exit then \ `10c3r3r                   00004200 = if (2              2  0  13p      5  3  14p            2" RnR,tst"
                                                                                                  \ exit then 0 ;
  tst_R,R<<#_                                   \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4rc3#4c2#ty4r          EA100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" tst_R,R<<#"
                                                                                                  \ exit then 0 ;
  RnR<<#,tst_
  ?dup if + exit then \ `12c4rc3#4c2#ty4r          EA100F00 = if (4  13 10  12p 3 0 13p 0e 0c 7 6  24p               3" RnR<<#,tst"
                                                                                                  \ exit then 0 ;
  uadd16_R,R,R_                                 \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uadd16_R,R,R"
                                                                                                  \ exit then 0 ;
  R=R+R.udd16_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R+R.udd16"
                                                                                                  \ exit then 0 ;
  uadd8_R,R,R_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uadd8_R,R,R"
                                                                                                  \ exit then 0 ;
  uadd8.R=R+R_                                  \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uadd8.R=R+R"
                                                                                                  \ exit then 0 ;
  R=R+R.udd8_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" R=R+R.udd8"
                                                                                                  \ exit then 0 ;
  uasx_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uasx_R,R,R"
                                                                                                  \ exit then 0 ;
  uasx_R=R+R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uasx_R=R+R"
                                                                                                  \ exit then 0 ;
  udiv_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FBB0F0F0 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" udiv_R,R,R"
                                                                                                  \ exit then 0 ;
  uhadd16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhadd16_R,R,R"
                                                                                                  \ exit then 0 ;
  uhadd8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhadd8_R,R,R"
                                                                                                  \ exit then 0 ;
  uhasx_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhasx_R,R,R"
                                                                                                  \ exit then 0 ;
  uhsax_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAE0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhsax_R,R,R"
                                                                                                  \ exit then 0 ;
  uhsub16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAD0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhsub16_R,R,R"
                                                                                                  \ exit then 0 ;
  uhsub8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAC0F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhsub8_R,R,R"
                                                                                                  \ exit then 0 ;
  umaal_R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FBE00060 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" umaal_R,R,R,R"
                                                                                                  \ exit then 0 ;
  umlal_R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FBE00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" umlal_R,R,R,R"
                                                                                                  \ exit then 0 ;
  umull_R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FBA00000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" umull_R,R,R,R"
                                                                                                  \ exit then 0 ;
  uhqadd16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA90F060 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhqadd16_R,R,R"
                                                                                                  \ exit then 0 ;
  uhqadd8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FA80F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uhqadd8_R,R,R"
                                                                                                  \ exit then 0 ;
  uqasx_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAA0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqasx_R,R,R"
                                                                                                  \ exit then 0 ;
  uqsax_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAE0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqsax_R,R,R"
                                                                                                  \ exit then 0 ;
  uqsub16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAD0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqsub16_R,R,R"
                                                                                                  \ exit then 0 ;
  uqsub8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAC0F050 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" uqsub8_R,R,R"
                                                                                                  \ exit then 0 ;
  usad8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FB70F000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usad8_R,R,R"
                                                                                                  \ exit then 0 ;
  usada8_R,R,R,R_
  ?dup if + exit then \ `12c4r4r4r4c4r             FB700000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 4" usada8_R,R,R,R"
                                                                                                  \ exit then 0 ;
  usat_R,#,R<<#_
  ?dup if + exit then \ `10csc4rc3#4r2#c5s         F3800000 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" usat_R,#,R<<#"
                                                                                                  \ exit then 0 ;
  usat16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             F3A00000 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usat16_R,R,R"
                                                                                                  \ exit then 0 ;
  usax_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAE0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usax_R,R,R"
                                                                                                  \ exit then 0 ;
  usub16_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAB0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usub16_R,R,R"
                                                                                                  \ exit then 0 ;
  usub8_R,R,R_
  ?dup if + exit then \ `12c4r4c4r4c4r             FAC0F040 = if (4  0b  8  12p 13 10 13p 3 0 14p                    3" usub8_R,R,R"
                                                                                                  \ exit then 0 ;
  uxtab_R,R,R<<<#_
  ?dup if + exit then \ `12c4r4c4r2c2o4r           FA50F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtab_R,R,R<<<#"
                                                                                                  \ exit then 0 ;
  uxtab16_R,R,R<<<#_
  ?dup if + exit then \ `12c4r4c4r2c2o4r           FA30F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtab16_R,R,R<<<#"
                                                                                                  \ exit then 0 ;
  uxtah_R,R,R<<<#_
  ?dup if + exit then \ `12c4r4c4r2c2o4r           FA10F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtah_R,R,R<<<#"
                                                                                                  \ exit then 0 ;
  uxtb_R,R_
  ?dup if + exit then \ `10c3r3r                   0000B2C0 = if (2              2  0  13p      5  3  14p            2" uxtb_R,R"
                                                                                                  \ exit then 0 ;
  uxtb_R,R,R<<<#_
  ?dup if + exit then \ `12c4r4c4r2c2o4r           FA5FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtb_R,R,R<<<#"
                                                                                                  \ exit then 0 ;
  uxtab16_R,R,R<<<#_
  ?dup if + exit then \ `20c4r2c2o4r               FA50F080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxtab16_R,R,R<<<#"
                                                                                                  \ exit then 0 ;
  uxth_R,R_
  ?dup if + exit then \ `10c3r3r                   0000B280 = if (2              2  0  13p      5  3  14p            2" uxth_R,R"
                                                                                                  \ exit then 0 ;
  uxth_R,R,R<<<#_
  ?dup if + exit then \ `12c4r4c4r2c2o4r           FA1FF080 = if (4  0b 8 11p 13 10  12p 3 0 13p 1a 1a 0e 0c 7 0 34p 1" uxth_R,R,R<<<#"
                                                                                                  \ exit then 0 ;
  wfe_
  ?dup if + exit then \ `16c                       0000BF20 = if (2                                                  1" wfe"
                                                                                                  \ exit then 0 ;
  wfe_w_
  ?dup if + exit then \ `32c                       F3AF8002 = if (4                                                  1" wfe_w"
                                                                                                  \ exit then 0 ;
  wfi_
  ?dup if + exit then \ `16c                       0000BF10 = if (2                                                  1" wfi"
                                                                                                  \ exit then 0 ;
  wfi_w_
  ?dup if + exit then \ `32c                       F3AF8001 = if (4                                                  1" wfi_w"
                                                                                                  \ exit then 0 ;
  yield_
  ?dup if + exit then \ `16c                       0000BF10 = if (2                                                  1" yield"
                                                                                                  \ exit then 0 ;
  yield_w_
  ?dup if + exit then \ `32c                       F3AF8001 = if (4                                                  1" yield_w"
                                                                                                  \ exit then 0 ;








  itelt_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BFB4 = if (2                                                  1" itelt"
                                                                                                  \ exit then 0 ;
  it'=<_
  ?dup if + exit then \ `16c                       0000BFB4 = if (2                                                  1" it'=<"
                                                                                                  \ exit then 0 ; 

  itegt_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BFCC = if (2                                                  1" itegt"
                                                                                                  \ exit then 0 ;
  it'=>_
  ?dup if + exit then \ `16c                       0000BFCC = if (2                                                  1" it'=>"
                                                                                                  \ exit then 0 ; 

  itne_                                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF18 = if (2                                                  1" itne"
                                                                                                  \ exit then 0 ;

  it'<>_
  ?dup if + exit then \ `16c                       0000BF18 = if (2                                                  1" it'<>"
                                                                                                  \ exit then 0 ; 

  itlt_                                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BFB8 = if (2                                                  1" itlt"
                                                                                                  \ exit then 0 ;
  it'<_
  ?dup if + exit then \ `16c                       0000BFB8 = if (2                                                  1" it'<"
                                                                                                  \ exit then 0 ; 

  itgt_                                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BFC8 = if (2                                                  1" itgt"
                                                                                                  \ exit then 0 ;
  it'>_
  ?dup if + exit then \ `16c                       0000BFC8 = if (2                                                  1" it'>"
                                                                                                  \ exit then 0 ; 

  itcc_                                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF38 = if (2                                                  1" itcc"
                                                                                                  \ exit then 0 ;
  it'c=0_
  ?dup if + exit then \ `16c                       0000BF38 = if (2                                                  1" it'c=0"
                                                                                                  \ exit then 0 ; 

  itehi_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF8C = if (2                                                  1" itehi"
                                                                                                  \ exit then 0 ;
  it'u>=_
  ?dup if + exit then \ `16c                       0000BF8C = if (2                                                  1" it'u>="
                                                                                                  \ exit then 0 ; 

  iteeq_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF0C = if (2                                                  1" iteeq"
                                                                                                  \ exit then 0 ; 

  it'==_
  ?dup if + exit then \ `16c                       0000BF0C = if (2                                                  1" it'=="
                                                                                                  \ exit then 0 ; 

  itecc_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF34 = if (2                                                  1" itecc"
                                                                                                  \ exit then 0 ;

  it'=.c=0_
  ?dup if + exit then \ `16c                       0000BF34 = if (2                                                  1" it'=.c=0"
                                                                                                  \ exit then 0 ; 

  itteq_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF04 = if (2                                                  1" itteq"
                                                                                                  \ exit then 0 ;

  it'=_
  ?dup if + exit then \ `16c                       0000BF04 = if (2                                                  1" it'="
                                                                                                  \ exit then 0 ; 

  ittcc_                                            \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF3C = if (2                                                  1" ittcc"
                                                                                                  \ exit then 0 ;

  itt'c=0_
  ?dup if + exit then \ `16c                       0000BF3C = if (2                                                  1" itt'c=0"
                                                                                                  \ exit then 0 ; 


  itmi_                                             \ original.mnemonic? @  not  if  0  exit  then
  ?dup if + exit then \ `16c                       0000BF48 = if (2                                                  1" itmi"
                                                                                                  \ exit then 0 ; 

  it'-_
  ?dup if + exit then \ `16c                       0000BF48 = if (2                                                  1" it'-"
                                                                                                  \ exit then 0 ; 
  dup  dis.addr  @  =  if  ."   (  ????????????????            )"    2  +  then
  dup  dis.addr  @  -  abs  4 >  if  drop   dis.addr  @  2  +  then  ;

zeptoForth407? @
#if     : dis   _dis.RCALL_#24   ?dup if + exit then   dis  ;
#then

: dis'     ( a' -- a'1 )   cr.   dis  ;
: dis.n    ( a' n -- a'1 )      0  do  cr  dis  loop  ;
: dis10    ( a' -- a'1 )   10   0  do  cr  dis  loop  ;
: dis20    ( a' -- a'1 )   20   0  do  cr  dis  loop  ;
: dis40    ( a' -- a'1 )   40   0  do  cr  dis  loop  ;
: dis80    ( a' -- a'1 )   80   0  do  cr  dis  loop  ;
: dis100   ( a' -- a'1 )  100   0  do  cr  dis  loop  ;
: dis200   ( a' -- a'1 )  200   0  do  cr  dis  loop  ;
: dis400   ( a' -- a'1 )  400   0  do  cr  dis  loop  ;
: dis800   ( a' -- a'1 )  800   0  do  cr  dis  loop  ;
: dis1000  ( a' -- a'1 )  1000  0  do  cr  dis  loop  ;
: dis2000  ( a' -- a'1 )  2000  0  do  cr  dis  loop  ;
: dis4000  ( a' -- a'1 )  4000  0  do  cr  dis  loop  ;
: dis8000  ( a' -- a'1 )  8000  0  do  cr  dis  loop  ;










































     cortex.m0? @  #if  include  cortex_M0.ASSEMBLER858x.F                             #then    \  quit
     cortex.m0? @  #if  include  cortex_M0.disASSEMBLER858x.F  ( include  HLAA1.f )    #then

#then







  :   a'.align.4*   here'  4 mod   0=   if   here' org   else   nop  here'  3  +   4  /   4  *  org   then   ;
  :   a'.align.4*   here'  4 mod   0<>  if                      nop                                   then   ;

create    data.pending.area      200 allot
variable  data.pending.counter

  :   u>=    u<   not   ;

  :   >data.pending.area   ( op.code a' r # -- )                data.pending.counter  @   200 u>=   abort"   *** data.pending.counter overflow! ***"
       data.pending.area  data.pending.counter  @   +    !   4  data.pending.counter  +!
       data.pending.area  data.pending.counter  @   +   2!   8  data.pending.counter  +!
       data.pending.area  data.pending.counter  @   +    !   4  data.pending.counter  +!    ;

  :   resolve.data.pended(2.byte)  ( -- )    a'.align.4*      data.pending.counter  @   0
      ?do    ( a'.align.4*   ) here'
               i          data.pending.area  +  @   ( #  )  32,'
               insert{
               i   8  +   data.pending.area  +  @   ( a' )  dup   org  dup  4 mod  if   2  else  4  then  +   -   4  /    ( pc.offset/4 )
               i   4  +   data.pending.area  +  @   ( r  )  100  *   +
               i  0c  +   data.pending.area  +  @   ( op.code )  ( 4800 )  ( op.code of r=# )  +    16,'
               }insert    10
      +loop    data.pending.counter  off   ;

  :   resolve.data.pended(4.byte)  ( -- )    a'.align.4*      data.pending.counter  @   0
      ?do    ( a'.align.4*   ) here'
               i          data.pending.area  +  @   ( #  )  32,'
               insert{
               i   8  +   data.pending.area  +  @   ( a' )  dup   org  dup  4 mod   if  2  else  4  then  +   -           ( pc.offset 12# )
               i   4  +   data.pending.area  +  @   ( r  )  1000   *   +
               i  0c  +   data.pending.area  +  @   ( op.code )  ( f8df0000 )  ( op.code of r=# )  +    32,^
               }insert    10
      +loop    data.pending.counter  off   ;

  :   resolve.data.pended  ( -- )                  data.pending.counter  @   10  u<    not
      if        data.pending.counter  @   0c  -    data.pending.area  +  @    8  0f    between
         if     resolve.data.pended(4.byte)
         else   resolve.data.pended(2.byte)
         then
      then      ;

  :   resolve.data.pended(2.byte)  ( n -- )     a'.align.4*      10  bounds
      ?do    ( a'.align.4*   ) here'
               i          data.pending.area  +  @   ( #  )  32,'
               insert{
               i   8  +   data.pending.area  +  @   ( a' )  dup   org  dup  4 mod  if   2  else  4  then  +    -   4  /    ( pc.offset/4 )
               i   4  +   data.pending.area  +  @   ( r  )  100  *   +
               i  0c  +   data.pending.area  +  @   ( op.code )  ( 4800 )  ( op.code of r=# )  +    16,'
               }insert    10
      +loop    ;

  :   resolve.data.pended(4.byte)  ( n -- )     a'.align.4*      10  bounds
      ?do    ( a'.align.4*   ) here'
               i          data.pending.area  +  @   ( #  )  32,'
               insert{
               i   8  +   data.pending.area  +  @   ( a' )  dup   org  dup  4 mod   if     2   else     4   then   +    -           ( pc.offset 12# )
               i   4  +   data.pending.area  +  @   ( r  )  1000   *   +
               i  0c  +   data.pending.area  +  @   ( op.code )  ( f8df0000 )  ( op.code of r=# )  +    32,^
               }insert    10
      +loop    ;

  :   resolve.data.pended''  ( -- )                  data.pending.counter  @   10  u<    if    exit   then
      data.pending.counter  @     0
      do        i    data.pending.area  +   4  +    @    8  0f    between
         if     i    resolve.data.pended(4.byte)
         else   i    resolve.data.pended(2.byte)
         then   10
      +loop     data.pending.counter  off    ;

variable  t:state?
  : -ret     insert{  RESOLVE.DATA.PENDED  T:STATE? OFF  ;
  : no.ret   insert{  RESOLVE.DATA.PENDED  T:STATE? OFF  ;
  : no.;     insert{  RESOLVE.DATA.PENDED  T:STATE? OFF  ;
  : no;      insert{  RESOLVE.DATA.PENDED  T:STATE? OFF  ;

cortex.m0?  @
#if
  :   LDRI  ( r # -- )
              4800       -rot      here'  2  allot'
              -rot       >data.pending.area  ;
#else
  :   LDRI  ( r # -- )   over   8  0f  between
      if      f8df0000   -rot      here'  4  allot'
      else    4800       -rot      here'  2  allot'
      then    -rot       >data.pending.area  ;
#then












cortex.m0?  @
#if     : r=#   dup   ff   u>  if   ldri   else   r=#   then  ;   \  ????  ffff
#else
: R=#32  ( r # -- )   LDRI  ;


: R=#        3r8#?    if  R=#8    exit  then
             4r16#?   if  R=#16   exit  then
\       dup  ffff u>  if  0  ( s>d )  10000  um/mod  >r  2dup  ldri ( R=# )  drop   r>  Rt=#  exit  then
\                         R=#12   ;
             r=#32    ;

: R=#'       3r8#?    if  R=#8    exit  then
             4r16#?   if  R=#16   exit  then
        dup  ffff u>  if  0  ( s>d )  10000  um/mod  >r  2dup  ldri ( R=# )  drop   r>  Rt=#  exit  then
                          R=#12   ;

\ r=#/  dup  fff  u>  if   ldri   else   r=#/  then  ;   \  ????  ffff

  : r=#   dup  fff   u>  if   ldri   else   r=#   then  ;   \  ????  ffff
#then












































\ R+R  ( r r -- )
\ R+R   2dup  8 <  swap  8 <  and  if  0  R+R+#   else   R+R   then  ;
: R+R   3r3r?  if  >r  dup  r>   R=R+R   else   R+R   then  ;    \ r=r+r  3r=3r+3r   r+r==4r+4r

: r0~r7,r0~r7?  ( r r -- f )  0  7  between   swap   0  7  between  and  ;
: r0~r7,r8~rf?  ( r r -- f )  8  f  between   swap   0  7  between  and  ;
: r8~rf,r0~r7?  ( r r -- f )  0  7  between   swap   8  f  between  and  ;
: r8~rf,r8~rf?  ( r r -- f )  8  f  between   swap   8  f  between  and  ;

variable    r0?
: 0/1       r0?   @   if   1   else   0   then  ;

cortex.m0?  @
#if
: R=(R+#)   ( r r -- )     over  0  f  between  over  0  f  between  and  not  abort" ***** Rn is not valid *****"  >r
  2dup  r0~r7,r0~r7?  if                                                   r>  R=(R+#)                  exit  then
  2dup  r0~r7,r8~rf?  if   over  0=  r0?  !         0/1  swap  r=r    0/1  r>  R=(R+#)                  exit  then
  2dup  r8~rf,r0~r7?  if   dup   0=  r0?  !   over  0/1  swap              r>  R=(R+#)  0/1  swap  r=r  exit  then
  2dup  r8~rf,r8~rf?  if                              0  swap  r=r   0  0  r>  R=(R+#)          0  r=r  exit  then  ;


\ R=#    over  7  >  if  0 swap r=#  0 r=r  exit  then  r=#   ;  \  >r  dup  r>  R=Rn#12/    ;
: Rx#    over  if  0  else  1  then  dup   rot   r=#    RxR   ;  \  >r  dup  r>  R=Rn#12/    ;
: Ro#    over  if  0  else  1  then  dup   rot   r=#    RoR   ;  \  >r  dup  r>  R=Rn#12/    ;
: Rn#    over  if  0  else  1  then  dup   rot   r=#    RnR   ;  \  >r  dup  r>  R=Rn#12/    ;


: Rx#,s  over  if  0  else  1  then  dup   rot   r=#    RxR   ;  \  >r  dup  r>  R=Rn#12/    ;
: Ro#,s  over  if  0  else  1  then  dup   rot   r=#    RoR   ;  \  >r  dup  r>  R=Rn#12/    ;
: Rn#,s  over  if  0  else  1  then  dup   rot   r=#    RnR   ;  \  >r  dup  r>  R=Rn#12/    ;


: 12--112   ( 1 2 -- 1 1 2 )    >r  dup       r>  ;
: 12--1112  ( 1 2 -- 1 1 1 2 )  >r  dup  dup  r>  ;

\ R=#/   over  if  0  else  1  then  over  r=#   r=r/         ;  \  >r  dup  r>  R=Rn#12/    ;
: R=#/   12--1112   r=#   r=r/         ;  \  >r  dup  r>  R=Rn#12/    ;

: Rx#/   over  if  0  else  1  then  dup   rot   r=#/   RxR   ;  \  >r  dup  r>  R=Rn#12/    ;
\ comment:
: Ro#/   over  if  0  else  1  then  dup   rot   r=#/   RoR   ;  \  >r  dup  r>  R=Rn#12/    ;

: Rn#/   over  if  0  else  1  then  dup   rot   r=#/   RnR   ;  \  >r  dup  r>  R=Rn#12/    ;
\ comment;

:  nop  b080  16,'  ;  \  bf00  in cortex.m3  might cause the unpredictable problem in cortex.m0.

#then














: R=(R)     0  2 lshift  ( 4*  =  cells )  R=(R+#)  ;
: R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#)  ;  ( ?????    msp430 )  : R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+1)   1  2 lshift  ( 4*  =  cells )  R=(R+#)  ;  \
: R=(R+2)   2  2 lshift  ( 4*  =  cells )  R=(R+#)  ;  \


: R=(R)!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+)!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+1)!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+2)!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R)!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+)!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4)!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8)!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R)w    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+)w   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4)w  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8)w  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;

: R=(R)p    0  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+)p   1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;     : R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+4)p  1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+8)p  2  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;


: R=(R),!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+),!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+1),!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+2),!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R),!    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+),!   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4),!  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8),!  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;


: R=(R),w    0  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+),w   1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+4),w  1  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;
: R=(R+8),w  2  2 lshift  ( 4*  =  cells )  R=(R+#),w  ;

: R=(R),p    0  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+),p   1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;    : R=(R+)    1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+4),p  1  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;
: R=(R+8),p  2  2 lshift  ( 4*  =  cells )  R=(R+#),p  ;


























comment:
T3 MOVW<c> <Rd>,#<imm16>
  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
  |1 1 1 1|0 i 1 0|0 1 0 0|==imm4=|0 =imm3|===Rd==|=====imm8======|    f2400000
d = UInt(Rd); setflags = FALSE;
(imm32, carry) = (ZeroExtend(imm4:i:imm3:imm8, 32), APSR.C);
// carry is a "don't care" value
if BadReg(d) then UNPREDICTABLE;

: 5c#6c4#c3#4r8#>16# ( -- ) 13 10 ?~?> 1000 *   1a 1a ?~?> 800 *   0e 0c ?~?> 100 *   7 0 ?~?>  + + + ;
16#>#6.4#.3#4.8#

:  4,#6.4#.3#4.8#,4   ( a' -- a' )   dup  32@' ( op.code ) 0~15<->16~31  #6.4#.3#4.8#>16#  ( dup  >disassem.number.stack )  4 to <<byte>>  4p  ; \ .xxxxxxxx(h)  ;
:  4,#6.4#.3#4.8#>16# ( a' -- a' )   dup  32@' ( op.code ) 0~15<->16~31  #6.4#.3#4.8#>16#  ;

comment;
:  4,#6.4#.3#4.8#>16# ( a' -- 16# )       32@' ( op.code ) 0~15<->16~31  #6.4#.3#4.8#>16#  ;

: 5c#6c4#c3#4r8#>16# ( -- ) 13 10 ?~?> 1000 *   1a 1a ?~?> 800 *   0e 0c ?~?> 100 *   7 0 ?~?>  + + + ;

     \  yes.etc
\      ' emit.ok  is  emit       ' type.ok  is  type     \  ' cr.ok  is  cr
' rcall   is   _rcall



































cortex.m0?  @
#if
  :   LDRI  ( r # -- )
              4800       -rot      here'  2  allot'
              -rot       >data.pending.area  ;
#else
  :   LDRI  ( r # -- )   over   8  0f  between
      if      f8df0000   -rot      here'  4  allot'
      else    4800       -rot      here'  2  allot'
      then    -rot       >data.pending.area  ;
#then





















cortex.m0? @
#if
\ : r=#/  dup  invert  0 ff  between if  invert   r-#  else  ldri  then  ;
#else
: r=#/  dup  1000  u<  if  r=#12/  else  ldri  then  ;
\ r=#/  dup   100  u<  if  r=#12/  else  ldri  then  ;   \ easier to disassemble
#then

: z=0?'      z=0?    ;
: c=0?'      c=0?    ;
: z=1?'      z=1?    ;
: c=1?'      c=1?    ;
: jmp_#16    jmp_#   ;
: rjmp'      jmp_#   ;
: call.#16   rcall_#24   ;
: call.#16`  rcall_#24   ;

: _rjmp_(-;)  ( a' -- a' n | a' 0 ) 0  ;
' _rjmp_(-;)  is   rjmp_(-;)

variable  a'+2?
variable  a'+n?

defer     _disassem.call/jmp

: check.call/jmp   ( a' -- f )  32@^  f800d000 and   dup  f000d000 ( rcall ) =  swap  f0008000 ( rjmp ) =  or  ;

defer  _LCALL.cfa'?

: disassem.call/jmp?  ( a1' -- a2' -1 / a1' 0  )     dup  _LCALL.CFA'?  if  -1  exit  then
  dup     check.call/jmp
  if      dup  _disassem.call/jmp ( 4 + ) a'+2?  @   if  2+  then    -1
  else    0
  then    ;










' disassem.call/jmp?   is  _disassem.call/jmp?

: get.jmp/call.addr ( a' -- jmp/call.addr)   dup  16@'  940e  =  if  2+ 16@' 2*  else  dup  16@' fff  and  2*  0c sign.extend.n  2+  +  then  ;  \ byte address

defer  _check.branch,doLit,...

: .2.byte.data  ( a' -- )  dup 1+  .a.range.of.2.byte.data  ;

create    data.area   1000 allot
variable  data.area.counter
: >data.area  ( from to -- )     data.area.counter  @   1000  >=  abort" **** data.area.size is to small ****"
  2dup  min  -rot   max
   data.area   data.area.counter @  +  !     4  data.area.counter  +!        \ max
   data.area   data.area.counter @  +  !     4  data.area.counter  +!   ;    \ min

0ea  0ff  >data.area
100  11f  >data.area
120  1ff  >data.area

: in.data.area?  ( a' -- f )    0     data.area.counter  @    0
  do     over  i  data.area  +  2@    between   or  8
  +loop  nip   ;

defer  _t:?(cfa')

defer   _R0=#,call.R0?
defer  _.R0=#,call.R0
variable   .doLIT?

defer  _r0=#,call.r0?#

defer  _disassem.n.bit.data

\ variable  cancel.data.range?       \  cancel.data.range? on
\ : cancel.data.range ( a' -- f )    8  26b   between  cancel.data.range?  @  and  ;

variable  display.literal?      \ display.literal?  on

: dL  ( -- )    display.literal?  dup  @  if  off  else  on  then  LAST.U  @  _U  ;

:   display.literal  ( a' -- a' 0 / a'+n  -1 )    dup   >r   32@'   603e3f04  =
    if          r@   4  +   16@'  ff00  and   4e00   =
       if       r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +   16@'  00ff  and   4 *    r@   8  +   fffffffc  and   +   32@'  dup  .xxxxXXXX   ."  ... "   _.IO.NAME  r>   6  +   -1  exit
       else     r@   4  +   16@'  ff00  and   2600   =
          if    r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +   16@'  00ff  and   .xxxxXXXX  ."  ... "  r>  6  +  -1  exit
          then
       then
    then        r>   0   ;

:   display.literal  ( a' -- a' 0 / a'+n  -1 )    dup   >r   32@'   603e3f04  =
    if          r@   4  +   16@'  ff00  and   4e00   =
       if       r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +   16@'  00ff  and   4 *    r@   8  +   fffffffc  and   +   32@'  dup  .xxxxXXXX   ."  ... "   _.IO.NAME  r>   6  +   -1  exit
       else     r@   4  +   16@'  ff00  and   2600   =
          if    r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +   16@'  00ff  and      .xxxxXXXX        ."  ... "  r>  6  +  -1  exit
          else  r@   4  +   `5c#6c4#c3#4r8#      f2400000  =
             if r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +    4,#6.4#.3#4.8#>16#  .xxxxXXXX  drop  ."  ... "  r>  8  +  -1  exit
             then
          then
       then
    then        r>   0   ;



defer  _.io.name/label.name

mecrisp32F429/407?  @
#if
:   display.literal  ( a' -- a' 0 / a'+n  -1 )    dup   >r   32@'  dup 603e3f04 ( '' dup 32@' ) =  swap  6d04f847 =  or  \ (R7-4)=R6,p is {dup}
    if          r@   4  +   16@'  ff00  and   4e00   =
       if       r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +   16@'  00ff  and   4 *    r@   8  +   fffffffc  and   +   32@'  dup  .xxxxXXXX   ."  ... "  49 ?y ." \ " _.io.name/label.name   r>   6  +   -1  exit
       else     r@   4  +   16@'  ff00  and   2600   =
          if    r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +   16@'  00ff  and      .xxxxXXXX        ."  ... "  r>  6  +  -1  exit
          else  r@   4  +   `5c#6c4#c3#4r8#      f2400000  =
             if r@   (.12345678..55.66.77.88.99.aa.)  34  ?y
                r@   4  +    4,#6.4#.3#4.8#>16#  .xxxxXXXX  drop  ."  ... "  r>  8  +  -1  exit
             then
          then
       then
    then        r>   0   ;

\                                       t:  u.                                                    \ cfa=     32E2
\ (  000032E2  47 F8 04 6D       )                  {dup}...........sp-4,s=t
\ (  000032E6  00 26             )                  T=0

#then


: display.jmp.to.name ( a' -- )    `5C11#   E000  =
  IF      dup>r  16@'  7ff  and  2*  0B  SIGN.EXTEND.N  4+  r>  +   45 ?y  ." \ "  cfa'>.id     drop  \ ????
  else    drop
  THEN    ;

: disassem  ( a1' -- a2' )    display.literal?  @   if   display.literal   if   exit   then   then
 _disassem.n.bit.data  if  exit  then
  h.mode @           total.of.name.of.#.to.print   off
  if     DISASSEM.SPECIAL?  @
         if   dup   cortex.m4? @  if   0  else  check.special.literal  then
                 if    over  (.1234..55.66.77.88.99.aa.)   30 ?y  .xxxxxxxx  ."  ... "   8  +   exit
                 else  drop
                 then
                 disassem.macro.SUPPER?  @  if  disassem.macro.SUPPER  if     exit  then  then
                 disassem.macro?         @  if  disassem.macro         if     exit  then  then
         then
  then   disassem.call/jmp?          if     exit  then
  >r           r@   _R0=#,call.R0?
  if     drop  r@  _.R0=#,call.R0  r>  6  +   .doLIT? @  if  4 +  then   .doLIT?  off   exit
  then   r@    dis   ( disassem ) \ r@  display.jmp.to.name
  r@    16@'   4780  ( call_r0 )  <>   if   r>drop   exit   then   r>  2-  _R0=#,call.R0?#  if  ."   \ "  cfa'>.id  drop   then  ;


variable  just.macro?

: disassem.old  ( a1' -- a2' )
  display.literal?  @   if   display.literal   if   exit   then   then
 _disassem.n.bit.data  if  exit  then
  h.mode @           total.of.name.of.#.to.print   off
  if     DISASSEM.SPECIAL?  @
         if   dup   cortex.m4? @  if   0  else  check.special.literal  then
                 if    over  (.1234..55.66.77.88.99.aa.)   30 ?y  .xxxxxxxx  ."  ... "   8  +   exit
                 else  drop
                 then
                 disassem.macro.SUPPER?  @  if  disassem.macro.SUPPER  if   just.macro? on  exit  then  then
                 disassem.macro?         @  if  disassem.macro         if   just.macro? on  exit  then  then
         then
  then   disassem.call/jmp?          if   NIP   exit  then
  >r           r@   _R0=#,call.R0?
  if     drop  r@  _.R0=#,call.R0  r>  6  +   .doLIT? @  if  4 +  then   .doLIT?  off   exit
  then   r@    dis   ( disassem )  r@  display.jmp.to.name
  r@    16@'   4780  ( call_r0 )  <>   if   r>drop   exit   then   r>  2-  _R0=#,call.R0?#  if  44 ?y ." \ "  cfa'>.id  drop   then  ;

 : a'>rel8.a'  ( a1' -- a'2 )  dup  c@'  ff  and  2*   9  N.BIT.EXTEND>32BIT  +  4  +   ;

: fill.>FROM->TO.QUEUE(C=0?...)  ( a' -- )  dup>r   16@'   f000   and   d000  =   if    r@  dup  a'>rel8.a'  >FROM->TO.QUEUE(C=0?...)  then   r>drop  ;

: disassem  ( a' -- a1')    dup    fill.>FROM->TO.QUEUE(C=0?...)
  dup   32@'   -1  =   if   4  +   exit   then
  dup  >r  depth  >r  disassem.old   depth  r>  <>
  if    just.macro?  @
     if
     else   cr  ."   \ ********* stack depth changed ????? ********"   r>  2  +  exit
     then
  then  r>  swap
\ 2dup  swap  -  dup    2 =  swap  4  =  or
  2dup  swap  -  dup>r  2 =  r@    4  =  or   r@  6  =  or  r>  8  =  or
  if    nip
  else  just.macro?  @   macro?  @  or
     if    NIP   \  ??????????????
     else  drop  cr  ."   \ ********* bad instruction increment ********* " 2  +
     then
  then  just.macro?  off  ;


cortex.m0?  @
#if
\ : push_r  DUP LR = IF  DROP 8  THEN  DUP 0 8 BETWEEN 0= ABORT" *** INVALID Rn ***"  >PUSH.POP.LIST  push   ;
\ : pop_r   DUP PC = IF  DROP 8  THEN  DUP 0 8 BETWEEN 0= ABORT" *** INVALID Rn ***"  >PUSH.POP.LIST  pop    ;

  : push_r  dup 0e = if drop 100  else dup 0 7 between not abort" *** it should be R0 ~ R7 and LR ***"  2^n then  b400  +  16,'  ; \ ?????????
  : pop_r   dup 0f = if drop 100  else dup 0 7 between not abort" *** it should be R0 ~ R7 and PC ***"  2^n then  bc00  +  16,'  ; \ ?????????

  : push.r  push_r  ;
  : pop.r   pop_r   ;
#else
\ : push.r  2^n   b400  +  16,'  ;     \ ?????????
\ : pop.r   2^n   bc00  +  16,'  ;     \ ?????????

\ : push.r  dup LR = if drop 8  2^n   b400  +  16,'  exit   then  push_R  ;     \ ?????????
  : push.r  dup LR = if drop 8  then  dup 0 8 between if  2^n   b400  +  16,' else   push_R   then ;     \ ?????????
  : pop.r   dup PC = if drop 8  then  dup 0 8 between if  2^n   bc00  +  16,' else    pop_R   then ;     \ ?????????
#then


' disassem  is  _disassem




\ :{  push.r      2^n   b400  +  16,'  ;     \ ?????????
\ :{  pop.r       2^n   bc00  +  16,'  ;     \ ?????????


: z=0?'      z=0?   ;
: c=0?'      c=0?   ;
: z=1?'      z=1?   ;
: c=1?'      c=1?   ;

: jmp_#16    jmp_#  ;
: jmp_#16    jmp_#  ;
: rjmp'      jmp_#  ;
: rjmp_#     jmp_#  ;
: call.#16   rcall  ;
: call.#16`  rcall  ;

: if'c=0   here'  dup  c=1?  ;
: if'c=1   here'  dup  c=0?  ;

: if'z=0   here'  dup  z=1?  ;
: if'z=1   here'  dup  z=0?  ;

: if'v=0   here'  dup  v=1?  ;
: if'v=1   here'  dup  v=0?  ;

: if'n=0   here'  dup  n=1?  ;
: if'n=1   here'  dup  n=0?  ;

: if'+     here'  dup  n=1?  ;
: if'-     here'  dup  n=0?  ;

: then'8  ( a' -- )  >r  here'  r@  4+  -  2/      ff  and  r@  16@'      ff00  and   or   r>  16!'   ;
: then'11 ( a' -- )  >r  here'  r@  4+  -  2/     7ff  and  r@  16@'      f800  and   or   r>  16!'   ;
: then'20 ( a' -- )  >r  here'  r@  4+  -  2/   fffff  and  r@  32@'  fff00000  and   or   r>  32!'   ;
: then'24 ( a' -- )  >r  here'  r@  4+  -  2/  ffffff  and  r@  32@'  ff000000  and   or   r>  32!'   ;


: then'24 ( a' -- )  >r  here'  r@  4+  -  2/  ffffff  and  24#>5..10#2.J.J11#  f0009000  or   r>  32!^   ;

: then'   ( a' -- )  >r  here'  r@  4+  -  2/      ff  and  r@  16@'      ff00  and   or   r>  16!'   ;


: then'   ( a' -- )  >r
  here'  r@  2+  -      -1ff      1ff  between  if   r>  then'8   exit  then
  here'  r@  2+  -      -fff      fff  between  if   r>  then'11  exit  then
  here'  r@  2+  -    -1ffff    1ffff  between  if   r>  then'20  exit  then
  here'  r@  2+  -  -1ffffff  1ffffff  between  if   r>  then'24  exit  then  -1 abort" **** reltive jump to far ****" ;

: then'   ( a' -- )  4+  >r
  here'  r@   -      -1ff      1ff  between  if   r>  then'8   exit  then
  here'  r@   -      -fff      fff  between  if   r>  then'11  exit  then
  here'  r@   -    -1ffff    1ffff  between  if   r>  then'20  exit  then
  here'  r@   -  -1ffffff  1ffffff  between  if   r>  then'24  exit  then  -1 abort" **** reltive jump to far ****" ;

: then'   ( a' -- )  >r   r@   16@'  f800  and  d000 =   here'  r@  4+  -      -1ff      1ff  between  and  if   r>  then'8   exit  then    \ ??????
  here'  r@  4+  -      -fff      fff  between  if   r>  then'11  exit  then
  here'  r@  4+  -    -1ffff    1ffff  between  if   r>  then'20  exit  then
  here'  r@  4+  -  -1ffffff  1ffffff  between  if   r>  then'24  exit  then  -1 abort" **** reltive jump to far ****" ;

: then'   ( a' -- )  >r   r@   16@'  f800  and  d000 =
  here'  r@  4+  -      -100      0fe  between  and  if   r>  then'8   exit  then    \ ??????
  here'  r@  4+  -      -800      7fe  between  if   r>  then'11  exit  then
  here'  r@  4+  -    -10000    ffffe  between  if   r>  then'20  exit  then
  here'  r@  4+  -  -1000000   fffffe  between  if   r>  then'24  exit  then  -1 abort" **** reltive jump to far ****" ;










: endif'      then'  ;
: ahead'      here'  dup  rjmp_#   ;
: ahead'24    here'  dup  jmp_#24  ;
: ahead'20    here'  dup  jmp_#20  ;

: else'20  ( a1' -- a2' )  ahead'20  swap  then'20  ;
: else'24  ( a1' -- a2' )  ahead'24  swap  then'24  ;
: else'    ( a1' -- a2' )  ahead'    swap  then'    ;

: begin'      here'   ;
: while'c=0   if'c=0  ;
: while'c=1   if'c=1  ;
: while'z=0   if'z=0  ;
: while'z=1   if'z=1  ;

: while'v=0   if'v=0  ;
: while'v=1   if'v=1  ;

: while'n=0   if'n=0  ;
: while'n=1   if'n=1  ;

: while'+     if'n=0  ;
: while'-     if'n=1  ;


: until'c=0   c=1?    ;
: until'c=1   c=0?    ;
: until'z=0   z=1?    ;
: until'z=1   z=0?    ;

: until'v=0   v=1?    ;
: until'v=1   v=0?    ;

: until'nv    v=1?    ;
: until'v     v=0?    ;

: until'n=0   n=1?    ;
: until'n=1   n=0?    ;

: until'+     n=1?    ;
: until'-     n=0?    ;

: again'      rjmp_#  ;
: repeat'     swap    again'   then'  ;

: until'=     until'z=1  ;
: until'<>    until'z=0  ;
: until'u>=   until'c=1  ;
: until'u<    until'c=0  ;
\ : until'u>    until'c=1  ;
\ : until'u<=   until'c=0  ;

:    if'c=0.      if'c=0 >1  ;   :    if'c=0..     if'c=0 >2  ;   :    if'c=0...    if'c=0 >3  ;
: while'c=0.   while'c=0 >1  ;   : while'c=0..  while'c=0 >2  ;   : while'c=0... while'c=0 >3  ;
: until'c=0.   1> until'c=0  ;   : until'c=0..  2> until'c=0  ;   : until'c=0... 3> until'c=0  ;

:    if'c=1.      if'c=1 >1  ;   :    if'c=1..     if'c=1 >2  ;   :    if'c=1...    if'c=1 >3  ;
: while'c=1.   while'c=1 >1  ;   : while'c=1..  while'c=1 >2  ;   : while'c=1... while'c=1 >3  ;
: until'c=1.   1> until'c=1  ;   : until'c=1..  2> until'c=1  ;   : until'c=1... 3> until'c=1  ;

:    if'z=0.      if'z=0 >1  ;   :    if'z=0..     if'z=0 >2  ;   :    if'z=0...    if'z=0 >3  ;
: while'z=0.   while'z=0 >1  ;   : while'z=0..  while'z=0 >2  ;   : while'z=0... while'z=0 >3  ;
: until'z=0.   1> until'z=0  ;   : until'z=0..  2> until'z=0  ;   : until'z=0... 3> until'z=0  ;

:    if'z=1.      if'z=1 >1  ;   :    if'z=1..     if'z=1 >2  ;   :    if'z=1...    if'z=1 >3  ;
: while'z=1.   while'z=1 >1  ;   : while'z=1..  while'z=1 >2  ;   : while'z=1... while'z=1 >3  ;
: until'z=1.   1> until'z=1  ;   : until'z=1..  2> until'z=1  ;   : until'z=1... 3> until'z=1  ;

:    if'v=0.      if'v=0 >1  ;   :    if'v=0..     if'v=0 >2  ;   :    if'v=0...    if'v=0 >3  ;
: while'v=0.   while'v=0 >1  ;   : while'v=0..  while'v=0 >2  ;   : while'v=0... while'v=0 >3  ;
: until'v=0.   1> until'v=0  ;   : until'v=0..  2> until'v=0  ;   : until'v=0... 3> until'v=0  ;







:    if'n=0.      if'n=0 >1  ;   :    if'n=0..     if'n=0 >2  ;   :    if'n=0...    if'n=0 >3  ;
: while'n=0.   while'n=0 >1  ;   : while'n=0..  while'n=0 >2  ;   : while'n=0... while'n=0 >3  ;
: until'n=0.   1> until'n=0  ;   : until'n=0..  2> until'n=0  ;   : until'n=0... 3> until'n=0  ;

:    if'n=1.      if'n=1 >1  ;   :    if'n=1..     if'n=1 >2  ;   :    if'n=1...    if'n=1 >3  ;
: while'n=1.   while'n=1 >1  ;   : while'n=1..  while'n=1 >2  ;   : while'n=1... while'n=1 >3  ;
: until'n=1.   1> until'n=1  ;   : until'n=1..  2> until'n=1  ;   : until'n=1... 3> until'n=1  ;





:    if'+.       if'+ >1  ;   :    if'+..     if'+ >2  ;   :    if'+...    if'+ >3  ;
: while'+.   while'+ >1  ;   : while'+..  while'+ >2  ;   : while'+... while'+ >3  ;
: until'+.   1> until'+  ;   : until'+..  2> until'+  ;   : until'+... 3> until'+  ;

:    if'-.          if'- >1  ;   :    if'-..        if'- >2  ;    :    if'-...        if'- >3  ;
: while'-.       while'- >1  ;   : while'-..     while'- >2  ;    : while'-...     while'- >3  ;
: until'-.       1> until'-  ;   : until'-..  2> until'-     ;    : until'-...  3> until'-     ;




:    if'u<.       if'c=0 >1  ;   :    if'u<..      if'c=0 >2  ;   :    if'u<...     if'c=0 >3  ;
: while'u<.    while'c=0 >1  ;   : while'u<..   while'c=0 >2  ;   : while'u<...  while'c=0 >3  ;
: until'u<.    1> until'c=0  ;   : until'u<..   2> until'c=0  ;   : until'u<...  3> until'c=0  ;
:    if'u>=.      if'c=1 >1  ;   :    if'u>=..     if'c=1 >2  ;   :    if'u>=...    if'c=1 >3  ;
: while'u>=.   while'c=1 >1  ;   : while'u>=..  while'c=1 >2  ;   : while'u>=... while'c=1 >3  ;
: until'u>=.   1> until'c=1  ;   : until'u>=..  2> until'c=1  ;   : until'u>=... 3> until'c=1  ;
:    if'<>.       if'z=0 >1  ;   :    if'<>..      if'z=0 >2  ;   :    if'<>...     if'z=0 >3  ;
: while'<>.    while'z=0 >1  ;   : while'<>..   while'z=0 >2  ;   : while'<>...  while'z=0 >3  ;
: until'<>.    1> until'z=0  ;   : until'<>..   2> until'z=0  ;   : until'<>...  3> until'z=0  ;
:    if'=.        if'z=1 >1  ;   :    if'=..       if'z=1 >2  ;   :    if'=...      if'z=1 >3  ;
: while'=.     while'z=1 >1  ;   : while'=..    while'z=1 >2  ;   : while'=...   while'z=1 >3  ;
: until'=.     1> until'z=1  ;   : until'=..    2> until'z=1  ;   : until'=...   3> until'z=1  ;

:    if'<>0.      if'z=0 >1  ;   :    if'<>0..     if'z=0 >2  ;   :    if'<>0...    if'z=0 >3  ;
: while'<>0.   while'z=0 >1  ;   : while'<>0..  while'z=0 >2  ;   : while'<>0... while'z=0 >3  ;
: until'<>0.   1> until'z=0  ;   : until'<>0..  2> until'z=0  ;   : until'<>0... 3> until'z=0  ;
:    if'=.        if'z=1 >1  ;   :    if'=..       if'z=1 >2  ;   :    if'=...      if'z=1 >3  ;
: while'=.     while'z=1 >1  ;   : while'=..    while'z=1 >2  ;   : while'=...   while'z=1 >3  ;
: until'=.     1> until'z=1  ;   : until'=..    2> until'z=1  ;   : until'=...   3> until'z=1  ;

:    if'nz.       if'z=0 >1  ;   :    if'nz..      if'z=0 >2  ;   :    if'nz...     if'z=0 >3  ;
: while'nz.    while'z=0 >1  ;   : while'nz..   while'z=0 >2  ;   : while'nz...  while'z=0 >3  ;
: until'nz.    1> until'z=0  ;   : until'nz..   2> until'z=0  ;   : until'nz...  3> until'z=0  ;
:    if'z.        if'z=1 >1  ;   :    if'z..       if'z=1 >2  ;   :    if'z...      if'z=1 >3  ;
: while'z.     while'z=1 >1  ;   : while'z..    while'z=1 >2  ;   : while'z...   while'z=1 >3  ;
: until'z.     1> until'z=1  ;   : until'z..    2> until'z=1  ;   : until'z...   3> until'z=1  ;

:    if'<>0       if'z=0     ; \ :    if'<>0..     if'z=0 >2  ;   :    if'<>0...    if'z=0 >3  ;
: while'<>0    while'z=0     ; \ : while'<>0..  while'z=0 >2  ;   : while'<>0... while'z=0 >3  ;
: until'<>0    until'z=0     ; \ : until'<>0..  1> until'z=0  ;   : until'<>0... 1> until'z=0  ;
:    if'=         if'z=1     ; \ :    if'=..       if'z=1 >2  ;   :    if'=...      if'z=1 >3  ;
: while'=      while'z=1     ; \ : while'=..    while'z=1 >2  ;   : while'=...   while'z=1 >3  ;
: until'=      until'z=1     ; \ : until'=..    1> until'z=1  ;   : until'=...   1> until'z=1  ;
                               \
:    if'nz        if'z=0     ; \ :    if'nz..      if'z=0 >2  ;   :    if'nz...     if'z=0 >3  ;
: while'nz     while'z=0     ; \ : while'nz..   while'z=0 >2  ;   : while'nz...  while'z=0 >3  ;
: until'nz     until'z=0     ; \ : until'nz..   1> until'z=0  ;   : until'nz...  1> until'z=0  ;
:    if'z         if'z=1     ; \ :    if'z..       if'z=1 >2  ;   :    if'z...      if'z=1 >3  ;
: while'z      while'z=1     ; \ : while'z..    while'z=1 >2  ;   : while'z...   while'z=1 >3  ;
: until'z      until'z=1     ; \ : until'z..    1> until'z=1  ;   : until'z...   1> until'z=1  ;

:      ahd'.   ahead'    >1  ;   :      ahd'..  ahead'    >2  ;   :      ahd'... ahead'    >3  ;
:    ahead'.   ahead'    >1  ;   :    ahead'..  ahead'    >2  ;   :    ahead'... ahead'    >3  ;

:     else'.    1> else' >1  ;
:     else'..   2> else' >2  ;
:     else'...  3> else' >3  ;

:     then'.    1> then'     ;
:     then'..   2> then'     ;
:     then'...  3> then'     ;

:    begin'.       begin' >1 ;
:    begin'..      begin' >2 ;
:    begin'...     begin' >3 ;

:    again'.    1> again'    ;
:    again'..   2> again'    ;
:    again'...  3> again'    ;

:   repeat'.    1> repeat'   ;
:   repeat'..   2> repeat'   ;
:   repeat'...  3> repeat'   ;

generate.disassem.program?  @   #if   '  emitx   is   emit   '   typex  is   type   ' crx  is  cr   #then



2variable  (getxy)

  : .xxxxxxxxMORE   ( a' -- )  dup  .xxxxXXXX  dup  cfa'>nfa'  if  drop  ."   ( " .id'(t:)        ."  )"  else  drop  then  ;
  : .xxxxxxxxMORE   ( a' -- )  dup  .xxxxXXXX  dup  cfa'>nfa'  if  drop  ."   ( " CFA'>.ID  drop  ."  )"  else  drop  then  ;

: pool.max  80  ;

create     CFA'.OF.doLIT*n.pool  pool.max  allot
variable   CFA'.OF.doLIT*n.pool.counter
:  >CFA'.OF.doLIT*n.pool  ( a' -- )  CFA'.OF.doLIT*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF.doLIT*n.pool  is full ***"
    CFA'.OF.doLIT*n.pool             CFA'.OF.doLIT*n.pool.counter  @  +  !   4  CFA'.OF.doLIT*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.doLIT*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.doLIT*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;

create     CFA'.OF.doUSER*n.pool  pool.max  allot
variable   CFA'.OF.doUSER*n.pool.counter
:  >CFA'.OF.doUSER*n.pool  ( a' -- )  CFA'.OF.doUSER*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF.doUSER*n.pool  is full ***"
    CFA'.OF.doUSER*n.pool             CFA'.OF.doUSER*n.pool.counter  @  +  !   4  CFA'.OF.doUSER*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.doUSER*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.doUSER*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;


create     CFA'.OF.abor."*n.pool  pool.max  allot
variable   CFA'.OF.abor."*n.pool.counter
:  >CFA'.OF.abor."*n.pool  ( a' -- )  CFA'.OF.abor."*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF.abor.'*n.pool  is full ***"
    CFA'.OF.abor."*n.pool   CFA'.OF.abor."*n.pool.counter  @  +  !   4  CFA'.OF.abor."*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.abor."*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.abor."*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;

create     CFA'.OF.branch*n.pool  pool.max  allot
variable   CFA'.OF.branch*n.pool.counter
:  >CFA'.OF.branch*n.pool  ( a' -- )  CFA'.OF.branch*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF.branch*n.pool  is full ***"
    CFA'.OF.branch*n.pool   CFA'.OF.branch*n.pool.counter  @  +  !   4  CFA'.OF.branch*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.branch*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.branch*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;

create     CFA'.OF.?branch*n.pool  pool.max  allot
variable   CFA'.OF.?branch*n.pool.counter
:  >CFA'.OF.?branch*n.pool  ( a' -- )  CFA'.OF.?branch*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF.?branch*n.pool  is full ***"
    CFA'.OF.?branch*n.pool   CFA'.OF.?branch*n.pool.counter  @  +  !   4  CFA'.OF.?branch*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.?branch*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.?branch*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;




create     CFA'.OF.."|*n.pool  pool.max  allot
variable   CFA'.OF.."|*n.pool.counter
:  >CFA'.OF.."|*n.pool  ( a' -- )  CFA'.OF.."|*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF..'|*n.pool  is full ***"
    CFA'.OF.."|*n.pool   CFA'.OF.."|*n.pool.counter  @  +  !   4  CFA'.OF.."|*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.."|*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.."|*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;

create     CFA'.OF.$"|*n.pool  pool.max  allot
variable   CFA'.OF.$"|*n.pool.counter
:  >CFA'.OF.$"|*n.pool  ( a' -- )  CFA'.OF.$"|*n.pool.counter  @  pool.max  u>=  abort"  *** CFA'.OF.$'|*n.pool  is full ***"
    CFA'.OF.$"|*n.pool   CFA'.OF.$"|*n.pool.counter  @  +  !   4  CFA'.OF.$"|*n.pool.counter  +!  ;

:  find.match.in.CFA'.OF.$"|*n.pool  ( a' --- a' a' / 0 a' )    0  swap   pool.max   0
   do      CFA'.OF.$"|*n.pool   i  +   @  over   =  if   nip  dup  leave   then   4
   +loop   swap  ;







: check.branch,doLit,...   ( a' -- a' ) dup  ( 2- )  16@'  154E ( cfa'.of.compile @ '' COMPILE ) = if  drop  0  exit  then
  mecrispForth?
  if   check.special.literal if  3C ?y  .xxxx  ."   ... "   8  exit  then
  then   dup    a'>24#
  case   find.match.in.CFA'.OF.DOLIT*n.pool
                              of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
         find.match.in.CFA'.OF.branch*n.pool
                              of  dup 4+    32@'           .xx.xx 3C ?y dup .xxxxxxxx  >from->to.queue  4  endof
         find.match.in.CFA'.OF.?branch*n.pool
                              of  dup 4+    32@'           .xx.xx 3C ?y dup .xxxxxxxx  >from->to.queue  4  endof
         find.match.in.CFA'.OF.."|*n.pool
                              of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
         find.match.in.CFA'.OF.abor."*n.pool
                              of  4+ dup c@'    swap   (getxy) 2@  gotoxy  .$'   '"' emit   endof  \  abort"   \ ????????


         cfa'.of.?branch   @  of  dup 4+    32@'           .xx.xx 3C ?y dup .xxxxxxxx  >from->to.queue  4  endof
         cfa'.of.branch    @  of  dup 4+    32@'           .xx.xx 3C ?y dup .xxxxxxxx  >from->to.queue  4  endof
\        cfa'.of.branch    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(loop)    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(+loop)   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.doCON     @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.nex.      @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
         cfa'.of.doLit     @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
         cfa'.of.lit       @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
         cfa'.of.doVAR     @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
         cfa'.of.doUSER    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
         cfa'.of.doDOES    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
         cfa'.of.compile   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
         cfa'.of.(.")      @  of  4+ dup c@'    swap  (getxy) 2@  gotoxy  .$'   '"' emit            endof  \  swiftForth
         cfa'.of.."|       @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth

         cfa'.of.."|*1     @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
         cfa'.of.."|*2     @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
         cfa'.of.."|*3     @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
         cfa'.of.."|*4     @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
         cfa'.of.."|*5     @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
         cfa'.of.."|*6     @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth


\        cfa'.of.,"|       @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
         cfa'.of.$"|       @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit   endof  \  $"|
\        cfa'.of.abor."    @  of  4+ dup c@'    swap       3a ?Y  .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.abor."    @  of  4+ dup c@'    swap   (getxy) 2@  gotoxy  .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.(abort")  @  of  4+ dup c@'    swap   (getxy) 2@  gotoxy  .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.(IS")     @  of  4+ dup c@'    swap       3a ?y  .$'(fram)        endof  \  (IS")
         cfa'.of.exit      @  of     drop   \.3f---                             0  endof  \  exit

         cfa'.of.?branch*  @  of  dup 4+    32@'           .xx.xx 3C ?y dup .xxxxxxxx  >from->to.queue  4  endof
         cfa'.of.branch*   @  of  dup 4+    32@'           .xx.xx 3C ?y dup .xxxxxxxx  >from->to.queue  4  endof
\        cfa'.of.branch*   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(loop)    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.(+loop)   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.doCON     @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof
         cfa'.of.nex.*     @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
         cfa'.of.doLit*    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit



         cfa'.of.doLit*1   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
         cfa'.of.doLit*2   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
         cfa'.of.doLit*3   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
         cfa'.of.doLit*4   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
        cfa'.of.doLit*5   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit
        cfa'.of.doLit*6   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxxMORE  4  endof  \  doLit




         cfa'.of.lit       @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
         cfa'.of.doVAR*    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
         cfa'.of.doUSER*   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
         cfa'.of.doDOES    @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
         cfa'.of.compile   @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
         cfa'.of.(.")      @  of  4+ dup c@'    swap  (getxy) 2@  gotoxy  .$'   '"' emit            endof  \  swiftForth
         cfa'.of.."|*      @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit            endof  \  eForth
\        cfa'.of.,"|*      @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
         cfa'.of.$"|*      @  of  4+ dup c@'    swap       37 ?Y  .$'   '"' emit   endof  \  $"|
\        cfa'.of.abor."*   @  of  4+ dup c@'    swap       3a ?Y  .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.abor."*   @  of  4+ dup c@'    swap   (getxy) 2@  gotoxy  .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.(abort")  @  of  4+ dup c@'    swap   (getxy) 2@  gotoxy  .$'   '"' emit   endof  \  abort"   \ ????????
         cfa'.of.(IS")     @  of  4+ dup c@'    swap       3a ?y  .$'(fram)        endof  \  (IS")
         cfa'.of.exit      @  of     drop   \.3f---                             0  endof  \  exit


        ( drop )  0   swap
  endcase    ?dup   if    a'+n?  !  then  ;

' check.branch,doLit,...   is  _check.branch,doLit,...


cortex.m4?  @
#if
\ variable  dis?
\ variable  ?branch/branch
variable  c=0?...

: check.c=0?...         ( a' -- a' from1 to1 a' from2 to2 a' from3 to3 ... n | 0 )  to (a')  c=0?...         off
  from->to.QUEUE(c=0?...).COUNTER    @    0
  ?do         (a')  from->to.queue(c=0?...)   i  +   @  =
       if     (a')  from->to.queue(c=0?...)   i  +   i  4  and  -   2@
              1  c=0?...         +!     \ leave
       then   4
  +loop          c=0?...         @  ;   \   dup  0=  if  nip  then   ;






: rcall?  ( a' -- f )  `5CS10#2CJCJ11#   F000D000  =   nip  ;

\ f92 33 dump'
\ F92  00 F0 92 FB   2A 57 72 6F   6E 67 20 61   64 64 72 65  .*Wrong addre
\ FA2  73 73 20 6F   72 20 64 61   74 61 20 66   6F 72 20 77  ss or data for w
\ FB2  72 69 74 69   6E 67 20 66   6C 61 73 68   20 21 0A 00  riting flash !.. 

: dis.print" ( a' -- a1' -1 / a' 0 )     `5CS10#2CJCJ11#  F000D000  =
  if        dup  4  to  <<byte>>    A'>24#  16ba  =
     if     dup  cr  (.12345678..55.66.77.88.99.AA.) 34 ?y  ." print"  .'"'  space  4  +  count'  2dup
            2dup  +  1-  c@'  0a  =  if  1-  ." +cr"  then  type'  .'"'  +   align*2  -1   70 ?y  ." \ "  16ba  .8#
     else   0
     then
  else      0
  then   ;

: dis.print" ( a' -- a1' -1 / a' 0 )     `5CS10#2CJCJ11#  F000D000  =
  if        dup  4  to  <<byte>>  A'>24#  >r  r@  16ba  =  r@  1904  =  or
     if     dup  cr  (.12345678..55.66.77.88.99.AA.) 34 ?y  ." print"  .'"'  space  4  +  count'  2dup
            2dup  +  1-  c@'  0a  =  if  1-  then  type'  .'"'
            2dup  +  1-  c@'  0a  =  if  ." +cr"   then   +   align*2  -1   70 ?y  ." \ "   r>  .8#
     else   r>drop   0
     then
  else      0
  then   ;

variable  cfa'.of.."(mF)      16ba  cfa'.of.."(mF)  !
variable  cfa'.of.."(eF)      1904  cfa'.of.."(eF)  !

: dis.print" ( a' -- a1' -1 / a' 0 )     `5CS10#2CJCJ11#  F000D000  =
  if        dup  4  to  <<byte>>  A'>24#  >r  r@  cfa'.of.."(mF)  @  =  r@  cfa'.of.."(eF)  @  =  or
     if     dup  cr  (.12345678..55.66.77.88.99.AA.) 34 ?y  ." print"  .'"'  space  4  +  count'  2dup
            2dup  +  1-  c@'  0a  =  if  1-  then  type'  .'"'
            2dup  +  1-  c@'  0a  =  if  ." +cr"   then   +
            r@  cfa'.of.."(mF)  @ =   if   align*2  else   align*4  then  -1   70 ?y  ." \ "   r>  .8#
     else   r>drop   0
     then
  else      0
  then   ;



defer  _.label

: disassem.call/jmp  ( a' -- a' / a'-2 )  dis.print"  if   exit  then
  dup>r    4 to <<byte>>                  dup   a'>24#  ( 2*  over  4+  + ) cfa'in.NFA.QUEUE?          dis?  off
  if    dup>r        (4   nip             dup   a'>24#  ( 2*  over  4+  + ) cfa'>.ID   getxy  (getxy)  2!
        if     ( 4 + ) drop    .\.8a?  @   if   r@  a'>24#   62 ( 60 ) ?y ." \  " 8 u.r  then
        then   r@  @'  op.code.of.jmp  @   =
        if     force.-;?  @  if  ."  -;"  else  ."  jmp"  then
        then   r>   check.branch,doLit,...    \  r>  check.c=0?...
  else  >r     r@   16@'   f000   and   d000  =   if    r@  dup  a'>rel8.a'  >FROM->TO.QUEUE(C=0?...)  then   r>
        dis    dis? on
  then  r>     a'>24#    _.label   ;




: disassem.noNAME.rcall  ( a'1 -- n | 0 )  dup  rcall?  0=  if   exit   then  >r
  4  to  <<BYTE>>    r@    A'>24REL,4    dup   \ rcall xxxxXXXX
  case     1e4   of  40 ?y  ."  \  0branch"  r@  4+  20@'  9 u.r  4   endof
           198   of  40 ?y  ."  \  lit    "  r@  4+  20@'  9 u.r  4   endof
           f3c   of  40 ?y  ."  \  >>>????"                       0   endof
           0     swap
  endcase  r>drop   ;

: .string'  ( a' -- )  count'  type'  ;

stm32F407eF730?  @
   #if
: disassem.noNAME.rcall  ( a'1 -- a'+n | a' )  dup  rcall?  0=  if   exit   then  >r
  4  to  <<BYTE>>    r@    A'>24REL,4     \ rcall xxxxXXXX
  case     1e4   of  48 ?y  ."  \ 0branch"  r@  4+  32@'   0a u.r             4   endof
           1fc   of  48 ?y  ."  \ branch "  r@  4+  32@'   0a u.r             4   endof
           198   of  48 ?y  ."  \ lit    "  r@  4+  32@'   0a u.r             4   endof
          0f3c   of  48 ?y  ."  \ ."        '"' emit   '|' emit   space
                                            r@  4+  count' tuck  type'  '"' emit  endof

          1588   of  48 ?y  ."  \ abort"    '"' emit   '|' emit   space
                                            r@  4+  count' tuck  type'  '"' emit  endof

          0f20   of  48 ?y  ."  \ $"  '"' emit  '|' emit   space
                                            r@  4+  count' tuck  type'  '"' emit  endof
          0f2c   of  48 ?y  ."  \ ."  '"' emit                                0   endof   \ .$
          18a8   of  48 ?y  ."  \ $," '"' emit                                0   endof

          201c   of  48 ?y  ."  \ version"    2024  32@'   0a u.r             0   endof
           1c4   of  48 ?y  ."  \ DONXT  "  r@  4+  32@'   0a u.r             4   endof
          1D6C   of  48 ?y  ."  \ dm+    "                                    0   endof
          1c2c   of  48 ?y  ."  \ ,call  "                                    0   endof
          1b08   of  48 ?y  ."  \ $,n    "                                    0   endof
          1560   of  48 ?y  ."  \ abor.  "                                    0   endof
          172E   of  48 ?y  ."  \ WAITBSY"                                    0   endof
          12F4   of  48 ?y  ."  \ find   "                                    0   endof
           67c   of  48 ?y  ."  \ tmp    "                                    0   endof
          1028   of  48 ?y  ."  \ parse  "                                    0   endof
          0c18   of  48 ?y  ."  \ str    "                                    0   endof

          0eec   of  48 ?y  ."  \ do$    "                                    0   endof
          1434   of  48 ?y  ."  \ tap    "                                    0   endof
          13e8   of  48 ?y  ."  \ ^H     "                                    0   endof
          1450   of  48 ?y  ."  \ kTAP   "                                    0   endof
            44   of  48 ?y  ."  \ InitDevices"                                0   endof
          171c   of  48 ?y  ."  \ UNLOCK"                                     0   endof
            18   of  48 ?y  ."  \ REMAP"                                      0   endof
          0ed8   of  48 ?y  ."  \ do$"                                        0   endof
          0f18   of  48 ?y  ."  \ .$"                                         0   endof
          0c04   of  48 ?y  ."  \ str"                                        0   endof
           668   of  48 ?y  ."  \ tmp"                                        0   endof

          1014   of  48 ?y  ."  \ pars."                                      0   endof
          12e0   of  48 ?y  ."  \ find"                                       0   endof
          1420   of  48 ?y  ."  \ TAP"                                        0   endof
          13D4   of  48 ?y  ."  \ ^H"                                         0   endof
          143C   of  48 ?y  ."  \ kTAP"                                       0   endof
          1DD0   of  48 ?y  ."  \ dm+"                                        0   endof
          2080   of  48 ?y  ."  \ VERSN"                                      0   endof
           0     swap
  endcase  r>drop    +   ALIGNED(4*)  ;

   #else

stm32F407eF720new?  @
      #if
: disassem.noNAME.rcall  ( a'1 -- a'+n | a' )  dup  rcall?  0=  if   exit   then  >r
  4  to  <<BYTE>>    r@    A'>24REL,4     \ rcall xxxxXXXX
  case     1a8   of  48 ?y  ."  \ ?branch"  r@  4+  32@'   0a u.r             4   endof
           1c0   of  48 ?y  ."  \ branch "  r@  4+  32@'   0a u.r             4   endof
           15c   of  48 ?y  ."  \ dolit  "  r@  4+  32@'   0a u.r             4   endof
          0f28   of  48 ?y  ."  \ ."        '"' emit   '|' emit  space
                                            r@  4+  count' tuck  type'  '"' emit  endof

          1574   of  48 ?y  ."  \ abor."    '"' emit   '|' emit  space
                                            r@  4+  count' tuck  type'  '"' emit  endof

          0f0c   of  48 ?y  ."  \ $"        '"' emit   '|' emit  space
                                            r@  4+  count' tuck  type'  '"' emit  endof
          0f2c   of  48 ?y  ."  \ ."        '"' emit                          0   endof   \ .$
          190c   of  48 ?y  ."  \ $,"       '"' emit                          0   endof

          201c   of  48 ?y  ."  \ version"    2024  32@'   0a u.r             0   endof
           188   of  48 ?y  ."  \ nex.   "  r@  4+  32@'   0a u.r             4   endof
\          1c4   of  48 ?y  ."  \ DONXT  "  r@  4+  32@'   0a u.r             4   endof

          1D6C   of  48 ?y  ."  \ dm+    "                                    0   endof
          1c90   of  48 ?y  ."  \ ,call  "                                    0   endof
          1b6c   of  48 ?y  ."  \ $,n    "                                    0   endof
          1560   of  48 ?y  ."  \ abort  "                                    0   endof
          172E   of  48 ?y  ."  \ WAITBSY"                                    0   endof
          12F4   of  48 ?y  ."  \ find   "                                    0   endof
           67c   of  48 ?y  ."  \ tmp    "                                    0   endof
          1028   of  48 ?y  ."  \ parse  "                                    0   endof
          0c18   of  48 ?y  ."  \ str    "                                    0   endof

          0eec   of  48 ?y  ."  \ do$    "                                    0   endof
          1434   of  48 ?y  ."  \ tap    "                                    0   endof
          13e8   of  48 ?y  ."  \ ^H     "                                    0   endof
          1450   of  48 ?y  ."  \ kTAP   "                                    0   endof
            44   of  48 ?y  ."  \ InitDevices"                                0   endof
          171c   of  48 ?y  ."  \ UNLOCK"                                     0   endof
            18   of  48 ?y  ."  \ REMAP"                                      0   endof
          0ed8   of  48 ?y  ."  \ do$"                                        0   endof
          0f18   of  48 ?y  ."  \ .$"                                         0   endof
          0c04   of  48 ?y  ."  \ str"                                        0   endof
           668   of  48 ?y  ."  \ tmp"                                        0   endof

          1014   of  48 ?y  ."  \ pars."                                      0   endof
          12e0   of  48 ?y  ."  \ find"                                       0   endof
          1420   of  48 ?y  ."  \ TAP"                                        0   endof
          13D4   of  48 ?y  ."  \ ^H"                                         0   endof
          143C   of  48 ?y  ."  \ kTAP"                                       0   endof
          1DD0   of  48 ?y  ."  \ dm+"                                        0   endof
          2080   of  48 ?y  ."  \ VERSN"                                      0   endof
           0     swap
  endcase  r>drop    +   ALIGNED(4*)  ;
      #else     \ stable version of stm32eForth720
: disassem.noNAME.rcall  ( a'1 -- a'+n | a' )  dup  rcall?  0=  if   exit   then  >r
  4  to  <<BYTE>>    r@    A'>24REL,4     \ rcall xxxxXXXX
  case     1a8   of  48 ?y  ."  \ ?branch"  r@  4+  32@'   0a u.r             4   endof
           1c0   of  48 ?y  ."  \ branch "  r@  4+  32@'   0a u.r             4   endof
           15c   of  48 ?y  ."  \ dolit  "  r@  4+  32@'   0a u.r             4   endof
    f18 ( 0f28 ) of  48 ?y  ."  \ ."        '"' emit   '|' emit  space
                                            r@  4+  count' tuck  type'  '"' emit  endof

          1564   of  48 ?y  ."  \ abor."    '"' emit   '|' emit  space
                                            r@  4+  count' tuck  type'  '"' emit  endof

    efc ( 0f0c ) of  48 ?y  ."  \ $"        '"' emit   '|' emit  space
                                            r@  4+  count' tuck  type'  '"' emit  endof
\         0f2c   of  48 ?y  ."  \ ."        '"' emit                          0   endof   \ .$
   18ec ( 190c ) of  48 ?y  ."  \ $,"       '"' emit                          0   endof

          201c   of  48 ?y  ."  \ version"    2024  32@'   0a u.r             0   endof
           188   of  48 ?y  ."  \ nex.   "  r@  4+  32@'   0a u.r             4   endof
\          1c4   of  48 ?y  ."  \ DONXT  "  r@  4+  32@'   0a u.r             4   endof

   1db0 ( 1D6C ) of  48 ?y  ."  \ dm+    "                                    0   endof
          1c90   of  48 ?y  ."  \ ,call  "                                    0   endof
   1b4c ( 1b6c ) of  48 ?y  ."  \ $,n    "                                    0   endof
          1560   of  48 ?y  ."  \ abort  "                                    0   endof
   170e ( 172E ) of  48 ?y  ."  \ WAITBSY"                                    0   endof
   12cc ( 12F4 ) of  48 ?y  ."  \ find   "                                    0   endof
           67c   of  48 ?y  ."  \ tmp    "                                    0   endof
   1000 ( 1028 ) of  48 ?y  ."  \ parse  "                                    0   endof
    bf0 ( 0c18 ) of  48 ?y  ."  \ str    "                                    0   endof
    ec8 ( 0eec ) of  48 ?y  ."  \ do$    "                                    0   endof
          1434   of  48 ?y  ."  \ tap    "                                    0   endof
   13c0 ( 13e8 ) of  48 ?y  ."  \ ^H     "                                    0   endof
   1428 ( 1450 ) of  48 ?y  ."  \ kTAP   "                                    0   endof
            44   of  48 ?y  ."  \ InitDevices"                                0   endof
   16f8 ( 171c ) of  48 ?y  ."  \ UNLOCK"                                     0   endof
            18   of  48 ?y  ."  \ REMAP"                                      0   endof
    ec8 ( 0ed8 ) of  48 ?y  ."  \ do$"                                        0   endof
    f08 ( 0f18 ) of  48 ?y  ."  \ .$"                                         0   endof
    bf4 ( 0c04 ) of  48 ?y  ."  \ str"                                        0   endof
           668   of  48 ?y  ."  \ tmp"                                        0   endof

   1004 ( 1014 ) of  48 ?y  ."  \ pars."                                      0   endof
   12d0 ( 12e0 ) of  48 ?y  ."  \ find"                                       0   endof
   1410 ( 1420 ) of  48 ?y  ."  \ TAP"                                        0   endof
   13c4 ( 13D4 ) of  48 ?y  ."  \ ^H"                                         0   endof
   142c ( 143C ) of  48 ?y  ."  \ kTAP"                                       0   endof
   1dac ( 1DD0 ) of  48 ?y  ."  \ dm+"                                        0   endof
   2060 ( 2080 ) of  48 ?y  ."  \ VER"                                        0   endof
   1c70 ( 1c6c ) of  48 ?y  ."  \ BL.W"   ( ,call )                           0   endof
           0     swap
  endcase  r>drop    +   ALIGNED(4*)  ;
      #then
   #then






stm32F407eF720?  @
   #if
: disassem.call/jmp  ( a' -- a' / a'-2 )
  4 to <<byte>>                           dup   a'>24#  ( 2*  over  4+  + ) cfa'in.NFA.QUEUE?          dis?  off
  if    dup>r        (4   nip             dup   a'>24#  ( 2*  over  4+  + ) cfa'>.ID   getxy  (getxy)  2!
        if     drop    .\.8a?  @   if   r@  a'>24#   62 ( 60 ) ?y ." \  " 8 u.r  then
        then   r@  @'  op.code.of.jmp  @   =
        if     force.-;?  @  if  ."  -;"  else  ."  jmp"  then
        then   r>   check.branch,doLit,...    \  r>  check.c=0?...
  else  >r     r@   16@'   f000   and   d000  =   if    r@  dup  a'>rel8.a'  >FROM->TO.QUEUE(C=0?...)  then
        r@     dis  r>   disassem.noNAME.rcall
        dis?  on
  then  ;

   #then





#else
: disassem.call/jmp  ( a' -- a' / a'-2 )    dis.print"  if  exit  then
  dup   a'>24#   cfa'in.NFA.QUEUE?
  if    dup>r        (4   nip                   a'>24#   cfa'>.ID  if drop  then  r@  @'  op.code.of.jmp  @   =
        if     force.-;?  @  if  ."  -;"  else  ."  jmp"  then
        then   r>   check.branch,doLit,...
  else  dup  16@'   fff0  and  12b0  =
     if    dup   (.1234..55.66..........)   30 ?y   ." call.@R"  16@'  0f  and   . 8 emit ( bs ) '+' emit ( call.@Rn+ ) ( disassem )    2-
     else  drop
     then
  then  ;
#then


' disassem.call/jmp   is  _disassem.call/jmp

:  @10b'  ( a' -- n )  16@'  3ff and  ;

variable  op.code.of.rjmp   3f  op.code.of.rjmp  !

: disassem.rjmp      ( cfa' -- )  dup  @10b' 2*  0a  SIGN.EXTEND.n  over 2+  +   cfa'in.NFA.QUEUE?
  if    dup>r  dup   %4     3fy        @10b' 2*  0a  SIGN.EXTEND.n  cfa'>.ID   drop   c@'  op.code.of.rjmp  @   =
        if   ."  rjmp"
        then     r>   check.branch,doLit,...   \   r>  check.c=0?...
  else  disassem   drop
  then  ;

: (pc+#)   ( a' -- n )  dup  c@'  4 *  +   dup  4 mod if 2+ else 4 + then  ;
: \.(XXXXxxxx)=XXXXxxxx  ( a' -- )   dup   62 ?y  ." \ ("  .XXXXxxxx   ." )="   32@'  .XXXXxxxx  ;

  defer  _r0=cfa',call_r0?

variable  ."|?

: disassem.special ( a' -- n -1 / 0 )  >r
  words'?      @
  if    r@   16@'   f000   and   d000  =
        if    r@    dup    a'>rel8.a'  >FROM->TO.QUEUE(C=0?...)
        then
  then  r>
  disassem.special?  @   0=    if    drop  0  exit  then
  dup      _r0=cfa',call_r0?
  if   \ dup (.12345678..55.66.77.88....)     \.(XXXXxxxx)=XXXXxxxx
        4  ."|?  @   +  3 ( 4 ) +  fc and   ."|?  off    -1  exit
  then
  dup>r    16@'
  case     4130  of    r@  %2  3ey                       ."  ret      " drop
                          \.3f---                                            2  -1  endof
           4536  of    r@  2+  16@'  4630   =
                   if  r@  %4  3ey                       ."  ret'     " drop
                          \.3f---                                            4  -1
                   else                                                          0
                   then                                                             endof
              0  swap
  endcase   r>drop   ;

mecrisp32F429/407?  @
#if     : disassem.special ( a' -- n -1 / 0 )  drop  0  ;
#then

stm32F407eF720?  @
#if
: disassem.special ( a' -- n -1 / 0 )    dup  32@'  fb04f852  =  if    %4  34y   ." ret"   4  -1  exit  then
  >r
  words'?      @
  if    r@   16@'   f000   and   d000  =
        if    r@    dup    a'>rel8.a'  >FROM->TO.QUEUE(C=0?...)
        then
  then  r>   disassem.special?  @   0=    if    drop  0  exit  then
  dup      _r0=cfa',call_r0?
  if   \ dup (.12345678..55.66.77.88....)     \.(XXXXxxxx)=XXXXxxxx
        4  ."|?  @   +  3 ( 4 ) +  fc and   ."|?  off    -1  exit
  then
  dup>r    16@'
  case
           4130  of    r@  %2  3ey                       ."  ret      " drop
                          \.3f---                                            2  -1  endof
           4536  of    r@  2+  16@'  4630   =
                   if  r@  %4  3ey                       ."  ret'     " drop
                          \.3f---                                            4  -1
                   else                                                          0
                   then                                                             endof
              0  swap
  endcase
  r@    rcall?
  if      4 to <<BYTE>> r@    A'>24REL,4   dup   \ rcall xxxxXXXX
    case  fb04f852 of    r@  %4  3ey                       ."  ret      " drop 6  -1  endof  \  52 F8 04 FB       )                  ret
          1e4   of   ."  \  0branch"  r@  4+  20@'  9 u.r  8   endof
          198   of   ."  \  lit    "  r@  4+  20@'  9 u.r  8   endof
          f3c   of   ."  \  >>>????"                       4   endof
          0  swap
    endcase
  then       r>drop  ;
#then













' disassem.special  is  _disassem.special

: .n.line.program     ( a1' n -- a2' )   over   last.u  !     0
  do    cr       dup  cfa'>head  \  dup  show.cfa
\       dup   @'  dup  fff0 and                                                              op.code.of.call @ =  swap op.code.of.jmp  @  =  or
        dup ( @'  dup  fff0 and )  32@'  0~15<->16~31  dup   op.code.mask.of.call  @  and    op.code.of.call @ =  swap op.code.of.jmp  @  =  or
     if          dup        disassem.call/jmp      4 +     a'+2?  @  if  2+  then
     else        dup>r  dup disassem.special  if + else  disassem  then  dup  r@   =
        if       r@      5  u.r    r>  @' 5 .r     2+
        else     r>drop
        then
     then
  loop  ;

' .n.line.program  is  _.n.line.program


variable   cfa'+2?
variable   current.cfa'

: check.cfa'+2?   ( a' -- f )    cfa'+2?  off    0  t:queue.counter  @   8  -
  ?do      t:queue  i  +  @  2+  over  =
     if    cfa'+2?  on    leave
     then  -8
  +loop    drop  cfa'+2?  @  ;

: check.cfa'+2?   ( a' -- f )    t:queue.counter  @  0=  if  drop  0  exit  then
  cfa'+2?  off    0  t:queue.counter  @   8  -
  ?do      t:queue  i  +  @  2+  over  =
     if    cfa'+2?  on    leave
     then  -8
  +loop    drop  cfa'+2?  @  ;

variable  enable.layer?         enable.layer?  on
: eL      enable.layer? @  not  enable.layer?  !   last.u  @   _u   ;

:  1.layer.+!  ( -- )   first.layer?  @  if  first.layer?  off  exit  then   1  layer  +!  ;
: -1.layer.+!  ( -- )   first.layer?  @  if  first.layer?  off  exit  then  -1  layer  +!  ;

: layer*n+27.?y    ( -- )  enable.layer? @
  if      layer @  0  max  6  min   dup  layer  !   space/layer @  *  27 +
  else    27
  then    ?y    ;

: a'+8.is.THEN?(of.ELSE)   ( a' -- f )  ?branch/branch @  >r   8  +  check.?branch/branch  dup  0=  if   r>drop  exit  then
  r>      <>
  if      3drop    -1
  else              0
  then    ;

: a'+2.is.THEN?(of.ELSE)   ( a' -- f )  ?branch/branch @  >r   2  +  check.?branch/branch  dup  0=  if   r>drop  exit  then
  r>      <>
  if      3drop    -1
  else              0
  then    ;

: a'.is.AGAIN?    ( a' -- f )  ?branch/branch @  >r         check.?branch/branch  dup  0=  if   r>drop  exit  then
  r>      <>
  if      3drop    -1
  else              0
  then    ;

: a'.is.WHILE?    ( a' -- f )  ?branch/branch @  >r   check.?branch/branch  dup  0=  if   r>drop  exit  then
  r>      <>
  if      3drop    -1
  else              0
  then    ;

: a'.is.to?       ( a' -- from to -1 / 0 )  0  from->to.queue  from->to.queue.counter  @  bounds
  do     over  i        @  =  if  drop  i  2@  rot  -1  leave  then  8
  +loop  nip   ;

: a'.is.from?     ( a' -- from to -1 / 0 )  0  from->to.queue  from->to.queue.counter  @  bounds
  do     over  i  4  +  @  =  if  drop  i  2@  rot  -1  leave  then  8
  +loop  nip   ;



: IF->THEN->AGAIN->BEGIN? ( a' -- f )   a'.is.from?
  if        ( from=if     to=then   )   2-  ( addr.of.again )  a'.is.from?
     if     ( from=again  to=begin  )   nip ( if begin )  u>=
        if        -1
        else       0
        then
     else   drop   0
     then
  else             0
  then  ;

: again->then->if->begin? ( a' -- f )   dup>r  a'.is.from?
  if        ( from=again  to=begin  )   nip    r@     2+  ( addr.of.then )  a'.is.to?
     if     ( from=if     to=then   )   drop   ( begin if )  u<=
        if        -1
        else       0
        then
     else   drop   0
     then
  else             0
  then  r>drop     ;






variable   just.THEN?
\ variable  .structure?            .structure?  on
\ : st      .structure?  @   not   .structure?  !     last.u  @  _u   ;

variable  a'.in.FROM->TO.QUEUE

:  a'.in.FROM->TO.QUEUE   ( a' -- n / 0 )    0   swap         a'.in.FROM->TO.QUEUE  off
   FROM->TO.QUEUE.COUNTER   @   0
   do       dup   i   FROM->TO.QUEUE   +  @  =   if   i   1   a'.in.FROM->TO.QUEUE  +!  then   4
   +loop    swap  ;

:  .branch.xxxxXXXX  ( to -- )  32 ?y  ." \ branch  "  3c ?y  .xxxxXXXX  ;
: .?branch.xxxxXXXX  ( to -- )  32 ?y  ." \ ?branch "  3c ?y  .xxxxXXXX  ;

ice40?  @
#if

\ comment:
: check.?branch/branch  ( a' -- a' from1 to1 a' from2 to2 a' from3 to3 ... n | 0 )
  to (a')  ?branch/branch   @  >r
  from->to.QUEUE.COUNTER    @    0
  ?do         (a')  from->to.QUEUE            i  +   @  =
       if     (a')  from->to.QUEUE            i  +   i  4  and  -   2@
              1     ?branch/branch   +!       leave
       then   4
  +loop             ?branch/branch   @    r>  =   if   0   else   ?branch/branch   @   then  ;   \   dup  0=  if  nip  then   ;


: check.?branch/branch  ( a' -- a' from1 to1 a' from2 to2 a' from3 to3 ... n | 0 )  ?branch/branch  off
  to (a')  ?branch/branch   @ >r
  from->to.QUEUE.COUNTER    @    0
  ?do         (a')  from->to.QUEUE            i  +   @  =
       if     (a')  from->to.QUEUE            i  +   i  4  and  -   2@
              1     ?branch/branch   +!       leave
       then   4
  +loop             ?branch/branch   @    r>  =   if   0   else   ?branch/branch   @   then  ;   \   dup  0=  if  nip  then   ;


: .structure    ( a1' -- a2' )  dup   check.?branch/branch
  if        2dup   u<
      if    cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66..........)                1.layer.+!                   layer*n+27.?y
             \     2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or
                   2  pick  16@'  2000   3fff  between  \  a'.is.?branch?
               if  \  a'.is.WHILE?    if     ."  WHILE"    else
                      just.THEN?  @   if   -1 layer +!  layer @  0  max  layer  !  then              layer*n+27.?y
                    over  IF->THEN->AGAIN->BEGIN?
                    if     -1  layer +!   ."  WHILE"
                    else      ."  IF"
                    then      dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else   over    a'+2.is.THEN?(of.ELSE)                                                 layer*n+27.?y
                  if                                                   -1.layer.+!                   layer*n+27.?y
                              ."  ELSE"    dup    .branch.xxxxXXXX
                  else        ."  AHEAD"   dup    .branch.xxxxXXXX  \ .from->to  4 +  exit
                  then
               then                         .from->to  2 +  nip                                      just.THEN?  off  exit
            else                                                                      layer*n+27.?y
                              ."  THEN"     .from->to       nip     (  -1.layer.+! )  layer*n+27.?y  just.THEN?  on
            then
      else  cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66..........)                                             layer*n+27.?y
\                  2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or   layer*n+27.?y
                   2  pick  16@'  2000   3fff  between  \  a'.is.?branch?
               if             ."  UNTIL"   dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else     over  again->then->if->begin?
                  if          -1 layer +!  ."  REPEAT"
                  else        ."  AGAIN"
                  then  dup   .branch.xxxxXXXX  \ .from->to  4 +  exit
               then                         .from->to  2 +  nip     (  -1.layer.+! )  layer*n+27.?y    exit
            else                                                        1.layer.+!    layer*n+27.?y
                              ."  BEGIN"    .from->to       nip
            then
      then
  then   ;





2variable  from->to

: .structure    ( a1' -- a2' )  dup   check.?branch/branch
  if        2dup   u<
      if    cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66..........)                1.layer.+!                   layer*n+27.?y
             \     2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or
                   2  pick  16@'  2000   3fff  between  \  a'.is.?branch?
               if  \  a'.is.WHILE?    if     ."  WHILE"    else
                      just.THEN?  @   if   -1 layer +!  layer @  0  max  layer  !  then              layer*n+27.?y
                    over  IF->THEN->AGAIN->BEGIN?
                    if     -1  layer +!   ."  WHILE"
                    else      ."  IF"
                    then      dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else   over    a'+2.is.THEN?(of.ELSE)                                                 layer*n+27.?y
                  if                                                   -1.layer.+!                   layer*n+27.?y
                              ."  ELSE"    dup    .branch.xxxxXXXX
                  else        ."  AHEAD"   dup    .branch.xxxxXXXX  \ .from->to  4 +  exit
                  then
               then                         .from->to  2 +  nip                                      just.THEN?  off  exit
            else                                                                      layer*n+27.?y
\                             ."  THEN"     .from->to       nip     (  -1.layer.+! )  layer*n+27.?y  just.THEN?  on
                  2dup   from->to  2@  d<>
                  if     dup   2-  (a').is.else?  not
                         over  2-  again->then->if->begin?   or   not
                     if  ."  THEN" 2dup from->to  2!  .from->to
                     then
                  then  nip     (  -1.layer.+! )  layer*n+27.?y  just.THEN?  on
            then
      else  cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66..........)                                             layer*n+27.?y
\                  2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or   layer*n+27.?y
                   2  pick  16@'  2000   3fff  between  \  a'.is.?branch?
               if             ."  UNTIL"   dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else     over  again->then->if->begin?
                  if          -1 layer +!  ."  REPEAT"
                  else        ."  AGAIN"
                  then  dup   .branch.xxxxXXXX  \ .from->to  4 +  exit
               then                         .from->to  2 +  nip     (  -1.layer.+! )  layer*n+27.?y    exit
            else                                                        1.layer.+!    layer*n+27.?y
\                             ."  BEGIN"    .from->to       nip
                  2dup   from->to  2@  d<>
                  if     dup 2-    again->then->if->begin?  not
                     if  ."  BEGIN" 2dup from->to  2!  .from->to
                     then
                  then  nip
            then
      then
  then   ;




: .structure    ( a1' -- a2' )  dup   check.?branch/branch
  if        2dup   u<
      if           2  pick  2  pick  =
            if  cr 2  pick  (.12345678..55.66..........)                1.layer.+!                   layer*n+27.?y
             \     2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or
                   2  pick  16@'  2000   3fff  between  \  a'.is.?branch?
               if  \  a'.is.WHILE?    if     ."  WHILE"    else
                      just.THEN?  @   if   -1 layer +!  layer @  0  max  layer  !  then              layer*n+27.?y
                    over  IF->THEN->AGAIN->BEGIN?
                    if     -1  layer +!   ."  WHILE"
                    else      ."  IF"
                    then      dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else   over    a'+2.is.THEN?(of.ELSE)                                                 layer*n+27.?y
                  if                                                   -1.layer.+!                   layer*n+27.?y
                              ."  ELSE"    dup    .branch.xxxxXXXX
                  else        ."  AHEAD"   dup    .branch.xxxxXXXX  \ .from->to  4 +  exit
                  then
               then                         .from->to  2 +  nip                                      just.THEN?  off  exit
            else                                                                      layer*n+27.?y
\                             ."  THEN"     .from->to       nip     (  -1.layer.+! )  layer*n+27.?y  just.THEN?  on
                  2dup   from->to  2@  d<>
                  if     dup   2-  (a').is.else?
                         over  2-  again->then->if->begin?   or  not
                     if  cr    layer*n+27.?y  just.THEN?  on
                               ."  THEN" 2dup from->to  2!  .from->to
                     then
                  then  nip     (  -1.layer.+! )  layer*n+27.?y  just.THEN?  on
            then
      else         2  pick  2  pick  =
            if  cr 2  pick  (.12345678..55.66..........)                                             layer*n+27.?y
\                  2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or   layer*n+27.?y
                   2  pick  16@'  2000   3fff  between  \  a'.is.?branch?
               if             ."  UNTIL"   dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else     over  again->then->if->begin?
                  if          -1 layer +!  ."  REPEAT"
                  else        ."  AGAIN"
                  then  dup   .branch.xxxxXXXX  \ .from->to  4 +  exit
               then                         .from->to  2 +  nip     (  -1.layer.+! )  layer*n+27.?y    exit
            else     \                                                  1.layer.+!    layer*n+27.?y
\                             ."  BEGIN"    .from->to       nip
                  2dup   from->to  2@  d<>
                  if     dup 2-    again->then->if->begin?  not
                     if  cr   1.layer.+!    layer*n+27.?y
                          ."  BEGIN" 2dup from->to  2!  .from->to
                     then
                  then  nip
            then
      then
  then   ;








' .structure  is  _.structure

#else

: .structure    ( a1' -- a2' )  dup   check.?branch/branch
  if        2dup   u<
      if    cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66.77.88.99+)                1.layer.+!                   layer*n+27.?y
                   2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or
               if  \  a'.is.WHILE?    if     ."  WHILE"    else
                      just.THEN?  @   if   -1 layer +!  layer @  0  max  layer  !  then              layer*n+27.?y
                              ."  IF"      dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else   over    a'+8.is.THEN?(of.ELSE)                                                 layer*n+27.?y
                  if                                                   -1.layer.+!                   layer*n+27.?y
                              ."  ELSE"    dup   .?branch.xxxxXXXX
                  else        ."  AHEAD"   dup    .branch.xxxxXXXX  \ .from->to  4 +  exit
                  then
               then                         .from->to  8 +  nip                                      just.THEN?  off  exit
            else                                                                      layer*n+27.?y
                              ."  THEN"     .from->to       nip     (  -1.layer.+! )  layer*n+27.?y  just.THEN?  on
            then
      else  cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66.77.88.99+)
                   2  pick  a'>24#   dup>r  cfa'.of.?branch  @   =   r> cfa'.of.?branch*  @  =  or   layer*n+27.?y
               if             ."  UNTIL"   dup   .?branch.xxxxXXXX  \ .from->to  4 +  exit
               else           ."  AGAIN"   dup    .branch.xxxxXXXX  \ .from->to  4 +  exit
               then                         .from->to  8 +  nip     (  -1.layer.+! )  layer*n+27.?y    exit
            else                                                        1.layer.+!    layer*n+27.?y
                              ."  BEGIN"    .from->to       nip
            then
      then
  then             ( a1' -- a2' )    dup       check.c=0?...
  if        2dup   u<
      if    cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66..........) ( 27  ?y )     1.layer.+!  layer*n+27.?y
                   2  pick  16@'  0f00  and
               case   0000  of   ."  if'<> \ z=1? eq?"         endof
                      0100  of   ."  if'= \ z=0? ne?"          endof
                      0200  of   ."  if'u< \ c=1? hs?"         endof
                      0300  of   ."  if'u>= \ c=0? lo?"        endof
                      0400  of   ."  if'+ \ n=1? mi?"          endof
                      0500  of   ."  if'- \ n=0? pl?"          endof
                      0600  of   ."  if'nv \ v=1? vs?"         endof
                      0700  of   ."  if'v \ v=0? vc?"          endof
                      0800  of   ."  if'u<= \ c=1;z=0? hi?"    endof
                      0900  of   ."  if'u> \ c=0;z=1? ls?"     endof
                      0a00  of   ."  if'< \ n=v? ge?"          endof
                      0b00  of   ."  if'>= \ n<>v? lt?"        endof
                      0c00  of   ."  if'<= \ z=0;n=v? gt?"     endof
                      0d00  of   ."  if'> \ z=1;n<>v? le?"     endof
                      0e00  of   ."  rjmp "                    endof
                      0f00  of   ."  ???? "                    endof   \ rjmp
               endcase                         .from->to  2 +   nip  exit
            else                                                                  layer*n+27.?y
                                 ."  then'"    .from->to        nip  -1.layer.+!  layer*n+27.?y
            then
      else  cr     2  pick  2  pick  =
            if     2  pick  (.12345678..55.66..........) ( 27  ?y )               layer*n+27.?y
                   2  pick  16@'  0f00  and
               case   0000  of   ."  until'<> \ z=1? eq?"      endof
                      0100  of   ."  until'= \ z=0? ne?"       endof
                      0200  of   ."  until'u< \ c=1? hs?"      endof
                      0300  of   ."  until'u>= \ c=0? lo?"     endof
                      0400  of   ."  until'+ \ n=1? mi?"       endof
                      0500  of   ."  until'- \ n=0? pl?"       endof
                      0600  of   ."  until'nv \ v=1? vs?"      endof
                      0700  of   ."  until'v \ v=0? vc?"       endof
                      0800  of   ."  until'u<= \ c=1;z=0? hi?" endof
                      0900  of   ."  until'u> \ c=0;z=1? ls?"  endof
                      0a00  of   ."  until'< \ n=v? ge?"       endof
                      0b00  of   ."  until'>= \ n<>v? lt?"     endof
                      0c00  of   ."  until'<= \ z=0;n=v? gt?"  endof
                      0d00  of   ."  until'> \ z=1;n<>v? le?"  endof
                      0e00  of   ."  rjmp "                    endof
                      0f00  of   ."  ???? "                    endof   \ rjmp
               endcase                         .from->to  2 +   nip  -1.layer.+!  layer*n+27.?y  exit
            else                                                      1.layer.+!  layer*n+27.?y
                                 ."  begin' "  .from->to        nip
            then
      then
  then   ;
#then














: within.ram.rom.range?  ( a' -- f )   dup>r
      ram.start  @    ram.end  @     between
  r@  rom.start  @    rom.end  @     between   or   r>drop   ;

variable  (large.area.of.FFFFFFFF)      20  (large.area.of.FFFFFFFF)  !

: large.area.FFFFFFFF?  ( a' -- a'1 -1 / a' 0 )     dup   -1     0  >r
  begin   over  r@  +  32@'  FFFFFFFF  =  over  and   0=  r>  4  +  >r    3  pick  r@  +  within.ram.rom.range?  not  or
  until   r@  (large.area.of.FFFFFFFF)   @   u>
  if   \  cr          ."   \ --------------------------------------------------------------- "
          cr          ."   \ -------- from " 2 pick  .xxxxXXXX ."  to " 2  pick  r@  +  1-  .xxxxXXXX  ."  are all FFFFFFFF's ---------"
       \  cr          ."   \ --------------------------------------------------------------- "
       \  cr
          2drop    r>  +  -1
  else    r>drop   2drop   0
  then    ;

: large.area.FFFFFFFF?'''  ( a' -- a'1 -1 / a' 0 )   >r        -1
  r@    20   bounds   do   i  64@'   FFFFFFFF  FFFFFFFF  d=  and   ?dup  0=  if  0  leave  then  8  +loop
  if    r>   20  +    -1
  else  r>   0
  then  ;

defer   _display.label

: U1  ( a1' -- a2' )    dis.print"  if   exit  then
  large.area.FFFFFFFF?  if   exit   then  \  dup  _display.label
  .structure?  @  if  .structure  then
    ( dup   last.u  !  )   1  0
  do               cr  ( dup  cfa'>head )  ( dup ) dup  CHECK.DATA.IN.QUEUE
\    if            (4    mark.data   dup   32@'  34 ( 30 )  ?y  .xxxxXXXX  +
     if   dup  check.mark.data
          if       mark.data
          else     (4    mark.data   dup   32@'  34 ( 30 )  ?y  .xxxxXXXX  +
          then
     else          dup ( @'  dup  fff0 and )  32@'  0~15<->16~31  \  OP.CODE.MASK.OF.CALL  @  ( 5..10#2.j.j11#>24# )
                   op.code.mask.of.call  @  and   dup  op.code.of.call @ =  swap op.code.of.jmp  @  =  or
       if          dup           disassem.call/jmp    dis? @ 0=
          if       4  +
          then     a'+n?  @  ?dup
          if       +  ( nip )
          else     nip        \ ????????????
          then     a'+n? off           (  NIP )
       else        dup>r   dup   disassem.special  if +  nip  else  disassem  then  dup  r@   =
          if       r@      5  u.r    r>  @' 5 .r     2+
          else     r>drop
          then
       then
     then
  loop     ;

stm32F407eF720?  @
#if
: U1            ( a1' -- a2' )   .structure?  @  if  .structure  then
    ( dup   last.u  !  )   1  0
  do    cr       dup  cfa'>head              ( dup ) dup  CHECK.DATA.IN.QUEUE
   if   (4    mark.data   dup   32@'  34 ( 30 )  ?y  .xxxxXXXX  +
   else
        dup ( @'  dup  fff0 and )  32@'  0~15<->16~31  \  OP.CODE.MASK.OF.CALL  @  ( 5..10#2.j.j11#>24# )
              op.code.mask.of.call  @  and   dup  op.code.of.call @ =  swap op.code.of.jmp  @  =  or
     if          dup  depth >r disassem.call/jmp    dis? @ 0= if  4  +  then   a'+n?  @  ?dup  if  +  ( nip ) then  a'+n? off  depth  r> =  if  nip  then
     else        dup>r   dup   disassem.special  if +  nip  else  disassem  then  dup  r@   =
        if       r@      5  u.r    r>  @' 5 .r     2+
        else     r>drop
        then
     then
   then
  loop   ;
#then












: U1''''''''''''     ( a1' -- a2' )   .structure?  @  if  .structure  then
    ( dup   last.u  !  )   1  0
  do    cr       dup  cfa'>head              ( dup ) dup  CHECK.DATA.IN.QUEUE
   if   (4    mark.data   dup   32@'  34 ( 30 )  ?y  .xxxxXXXX  +
   else
        dup ( @'  dup  fff0 and )  32@'  0~15<->16~31  \  OP.CODE.MASK.OF.CALL  @  ( 5..10#2.j.j11#>24# )
              op.code.mask.of.call  @  and   dup  op.code.of.call @ =  swap op.code.of.jmp  @  =  or
     if          dup           disassem.call/jmp    dis? @ 0= if  4  +  then   a'+n?  @  ?dup  if  +  ( nip ) then  a'+n? off
     else        dup>r   dup   disassem.special  if +  ( nip ) else  disassem  then  dup  r@   =
        if       r@      5  u.r    r>  @' 5 .r     2+
        else     r>drop
        then
     then
   then
  loop   ;












: u1(seperate)     ( a1' -- a2' )   .structure?  @  if  .structure  then
    ( dup   last.u  !  )   1  0
  do    cr       mecrispForth.only(LF120)?  @  not
   if            dup  cfa'>head
   then  ( dup ) dup  CHECK.DATA.IN.QUEUE
   if   (4    mark.data   dup   32@'  34 ( 30 )  ?y  .xxxxXXXX  +
   else
        dup ( @'  dup  fff0 and )  32@'  0~15<->16~31  \  OP.CODE.MASK.OF.CALL  @  ( 5..10#2.j.j11#>24# )
              op.code.mask.of.call  @  and   dup  op.code.of.call @ =  swap op.code.of.jmp  @  =  or
     if          dup           disassem.call/jmp    dis? @ 0= if  4  +  then   a'+n?  @  ?dup  if  +  ( nip ) then  a'+n? off
     else        dup>r   dup   disassem.special  if +  nip  else  disassem  then  dup  r@   =
        if       r@      5  u.r    r>  @' 5 .r     2+
        else     r>drop
        then
     then
   then
  loop   ;

' U1            is  _U1
' U1(seperate)  is  _U1(seperate)

: R0=#,CALL.R0? ( a' -- # -1 | 0 )  dup>r  `5c#6C4#C3#4R8#   F2400000  =   r@  4 +  16@'  4780  =  and
  if    32@'  0~15<->16~31     #6.4#.3#4.8#>16#  cortex.M4?  @
    if  ffffFFFe   and
    then  r>drop        -1  exit
  then    r>drop   drop  0  ;

: r0=#,call.r0?#   ( a' -- # -1 | 0 )      >r
  r@   2+   16@'   4780  <>  if   r>drop  0   exit  then  ( call_r0 )
  r@   `5C3R8#*4+.(PC+#)  r@  ff00   `16.op.code  1+ ( 4800 )  nip  <>
  if   drop  r>drop  0  exit
  then    ( r0=# )   8@'  4 *  2+  r>  +  32@'  -1  ;

' r0=#,call.r0?#   is  _r0=#,call.r0?#

: r0=#,call.r0?''  ( a' -- # -1 | 0 )      >r
  r@   2+   16@'   4780  <>  if   r>drop  0   exit  then  ( call_r0 )
  r@   `5C3R8#*4+.(PC+#)  r@  ff00   `16.op.code  1+ ( 4800 )  nip  <>
  if   drop  r>drop  0  exit
  then    ( r0=# )   r>   2drop  (  8@'  4 *  2+  r>  +  32@' ) -1  ;

: dolit?    ( # -- f )
  case      cfa'.of.dolit     @  of  -1  .doLIT?  on   endof
            cfa'.of.dolit*    @  of  -1  .doLIT?  on   endof
            cfa'.of.branch    @  of  -1  .doLIT?  on   endof
            cfa'.of.branch*   @  of  -1  .doLIT?  on   endof
            cfa'.of.?branch   @  of  -1  .doLIT?  on   endof
            cfa'.of.?branch*  @  of  -1  .doLIT?  on   endof
            0  swap
  endcase   ;

: .R0=#,call.R0  ( a' -- )   dup>r  R0=#,CALL.R0?    r@  R0=#,CALL.R0?''  or
   if        dup     cfa'>nfa'
       if    swap    r@  (.12345678..55.66.77.88.99+)   34 ?y  dup>r  cfa'>.id  drop  drop  62 ?y ." \  "  r@  8 u.r
             r>  dolit?  if   r@   6  +   32@'  40 ?y  .xxxxXXXX  ( else   drop )  then
       else  8 u.r  ."  call.# "
       then
   then    r>drop   ;

' .R0=#,call.R0   is  _.R0=#,call.R0
'  R0=#,call.R0?  is   _R0=#,call.R0?

\ stm32f4 discovery swiftForth
\ '' (.")      cfa'.of.(.")      !
\ '' (abort")  cfa'.of.(abort")  !
      0abc     cfa'.of.(abort")  !
      0d10     cfa'.of.(.")      !


: check.(abort")...etc.  ( a' -- a')   dup     4 to <<byte>>    A'>24#
  case    cfa'.of.."|       @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
          cfa'.of.abort"    @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
          cfa'.of.."|*      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
          cfa'.of.abort"*   @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
          cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
          cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof

\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(.")      @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof
\         cfa'.of.(abort")  @  of  dup  U1         drop  40 ?y  dup  4 +  count'  tuck  type'   8 +  +  fffffffc and   endof

  endcase    ;

: check.ret(4*)+FFFF?   ( a' -- f )  >r   r@   16@'  bd00 ( ret  ) =   r@  4  mod  0=   r>  2+  16@'  FFFF  =  and  and  ;
: check.ret'(4*)+FFFF?  ( a' -- f )  >r   r@   16@'  4770 ( ret' ) =   r@  4  mod  0=   r>  2+  16@'  FFFF  =  and  and  ;

: U1'          ( a1' -- a2' )  large.area.FFFFFFFF?  if   exit   then  \  dup  _display.label  \  check.(abort")...etc.
  dup  check.ret(4*)+FFFF?
  if     U1        \ (  00002020  00 BD             )              ret
         cr    dup   (.12345678..55.66..........)      2+   exit
  then
  dup  check.ret'(4*)+FFFF?
  if     U1        \ (  00002020  70 47             )              ret'
         cr    dup   (.12345678..55.66..........)      2+   exit
  then
  dup  current.cfa'  !   U1        dup   check.cfa'+2?   <<byte>>  4 =   and
  if      2 -  dup   current.cfa'  @   =  if   2+  then
  then    ; 



: U1'          ( a1' -- a2' )   dis.print"   if   exit   then  
  large.area.FFFFFFFF?  if   exit   then  \  dup  _display.label  \  check.(abort")...etc.
  dup  check.ret(4*)+FFFF?
  if     U1        \ (  00002020  00 BD             )              ret
         cr    dup   (.12345678..55.66..........)      2+   exit
  then
  dup  check.ret'(4*)+FFFF?
  if     U1        \ (  00002020  70 47             )              ret'
         cr    dup   (.12345678..55.66..........)      2+   exit
  then
  dup  current.cfa'  !   U1        dup   check.cfa'+2?   <<byte>>  4 =   and
  if      2 -  dup   current.cfa'  @   =  if   2+  then
  then    ; 
























mecrispForth.only(LF120)?  @
#if
: get.total.words(stm32f4.mecrispForth) ( -- n )  0  >r  247c ( lfa'.of.irq-timer2b-2  )
  begin  r>  1+    >r
         2+  32@'  dup  00004000  =
  until  nip  r>  ;

: nth.words>nfa' ( n -- nfa' )   247c ( lfa'.of.irq-timer2b-2  )   swap  0
  ?do    2+ ( lfa' ) 32@' ( upper.one's.lfa'-2 )
  loop   6  +  ( nfa' )   ;

variable  next.word's.lfa'-2

: find.next.word's.lfa ( current's.nfa' -- next'.lfa' )  6 - ( lfa' )  >r    \  get.total.words
  247c ( lfa'.of.irq-timer2b-2  )
  begin  dup  next.word's.lfa'-2  !
         2+   32@'  dup   r@   =
  until  r>drop     drop  next.word's.lfa'-2  @  2+  ;

: nfa'>cfa' ( nfa' -- cfa' )  count'  1f  and  +  even.aligned  ;

\ seperate.head.and body style
: decompile.a.word'mecrisp4F120(seperate)    ( nfa' -- )   head.Forth?  @   not  if   head>target   then
  ?dup  0= if  exit  then    doCOLON? off        \ Dr. C. H. Ting's eForth
  dup   4-   16@'  ( 32@' )  32@'  a86212b0 ( doCOLON ) = if   doCOLON? on  then    \.3f---
  >r    +pcfa? @   drop   0
  if    cr         r@  8 - (.12345678..12345678.......)   \ pcfa
  then  cr         r@  6 - (.12345678..55.66..........)  \ ?????????
        cr         r@  4-  (.12345678..12345678.......)   \ lfa
        cr         r@      (.12345678..55.66.77.88.99.aa.)nfa   ."    t:  "  r@  count'  1f and ( tuck ) ( 2drop ) type'     r@  nfa'>cfa'  show.cfa+comment \  r@  .id'
        r@         nfa'>cfa'mecrisp4F120
        r@         find.next.instruction's.nfa'.or.here'mecrisp4F120(seperate)  dup  0=
        if         drop  50  bounds
        else       last'.word?  @
           if      last'.word?  off
        \  else    +pcfa? @  if  8  else  4  then  -     2-
           else                           4        -     2-    1-
           then              swap
        then       2dup  -   abs  2ff ( 0ff )  >   if  nip  300 ( 0FF )  bounds   then
  decompile.a.range.instruction(seperate)
  r>  .immediate/compile-only/smudge   ;

: words'(mecrispLF120)(seperate)   get.total.words(stm32f4.mecrispForth)   1-   dup   1
  do        dup    0   swap
      do    layer  off
            i      nth.words>nfa'  decompile.a.word'mecrisp4F120(seperate)   -1
     +loop
  loop   ;

\ combine.head.and.body style
: .head(mecrispLF120)  ( nfa' -- )  >r
  cr  r@  4 -  (.12345678..12345678.......)   \ lfa
  cr  r>  dup  (.12345678..55.66.77.88.99.aa.)nfa   2 spaces  count'  1f  and  type'  ;

: words'(mecrispLF120)''    get.total.words(stm32f4.mecrispForth)   1-   dup   1
  do        dup   1   swap
     ?do    i     nth.words>nfa'  dup>r   .head(mecrispLF120)
          r>  dup find.next.word's.lfa  >r  nfa'>cfa'
          begin   U1         dup  r@   2dup  2-  u>=       -rot  -  abs  80  >      or
          until   r> 2-  cr  (.12345678..55.66..........)  drop      -1
     +loop
  loop  ;

#then

  defer  _map

: list    ( -- )    0  stm32f407.sF?  @  if  0 ( 08000000 )  +   then
  begin   U1'             dup  FLASH.ROM.END  @   u>    key?  or
  until   words'?  off    CR   ;

: words'3 ( head>target ) _map  cr  cr   words'?  on    words'.1  words'.2   words'.2/  DUMP.T:NFA.QUEUE  DUMP.T: ( words'+head )  ;

: words''    HEAD.FORTH?  ON   words'   HEAD.FORTH?  OFF   ;

: u'   ( a1' -- a2' )     dup   last.u  !     10   0
  do     U1'     
  loop   ;

: u    ( a1' -- a2' )     dup   last.u  !     10   0
  do     U1       
  loop   ;

variable   original.u?   \  original.u?  on

: ou       original.u?   dup  @  if   off  else  on  then  ;

: u  original.u?  @   if  u'  else  u  then  ;

' u  is  _u

: dh      HEAD.FORTH?  dup  @  if  off  else  ON  then    last.u  @  u  drop   ;
: hf      HEAD.FORTH?  dup  @  if  off  else  ON  then    last.u  @  u  drop   ;
: disassem.a.range.instruction  ( lower/upper upper/lower -- a' )   2dup  max  -rot  min
  dup   last.u  !
  begin    dup  CFA'IN.NFA.QUEUE?  if   cr  make.macro? @ if  ." \"  then  24 ( 21 ) ?y  ."  t:  "   dup  cfa'>.id  drop   just.THEN?  off   then   i show.cfa+comment
      cr   dup  cfa'>head
\     dup   @'  dup  fff0 and  op.code.of.call @ =  swap op.code.of.jmp  @  =  or
      dup ( @'  dup  fff0 and )  32@'  0~15<->16~31  dup   op.code.mask.of.call  @  and    op.code.of.call @ =  swap op.code.of.jmp  @  =  or
     if         dup        disassem.call/jmp      4 +     a'+2?  @  if  2+  then
     else       dup>r  dup disassem.special  if + else  disassem  then  dup  r@   =
        if      r@      5  u.r    r>  @' 5 .r     2+
        else    r>drop
        then
     then       2dup  <=
  until         nip   ;

 '  disassem.a.range.instruction  is  _disassem.a.range.instruction

: uu         u u               ;    : 2u           uu  ;
: uuu        u u u             ;    : 3u          uuu  ;
: uuuu       u u u u           ;    : 4u         uuuu  ;
: uuuuu      u u u u u         ;    : 5u        uuuuu  ;
: uuuuuu     u u u u u u       ;    : 6u       uuuuuu  ;
: uuuuuuu    u u u u u u u     ;    : 7u      uuuuuuu  ;
: uuuuuuuu   u u u u u u u u   ;    : 8u     uuuuuuuu  ;
: uuuuuuuuu  u u u u u u u u u ;    : 9u    uuuuuuuuu  ;

:   10u      uuuuuuuu  uu      ;
:   20u    10u    10u  ;
:   30u    10u    20u  ;
:   40u    10u    30u  ;
:   50u    10u    40u  ;
:   60u    10u    50u  ;
:   70u    10u    60u  ;
:   80u    10u    70u  ;
:   90u    10u    80u  ;
:  100u    10u    90u  ;
:  200u   100u   100u  ;
:  300u   100u   200u  ;
:  400u   100u   300u  ;
:  500u   100u   400u  ;
:  600u   100u   500u  ;
:  700u   100u   600u  ;
:  800u   100u   700u  ;
:  900u   100u   800u  ;
: 1000u   500u   500u  ;

' 8u  is  _8u

variable  last.head
: words'+head  ( -- )  ( head>target )  T:NFA.QUEUE.COUNTER  @  head.start  @
  last.head  @      ( nfa' )
  begin      4  -   ( lfa' )  @   dup   0=
  until   ;

: words'- ( head>target )  cls  _map  cr  cr  words*'' words'?  on    words'.1   words'.1/  words'.2  words'.2/  DUMP.T:NFA.QUEUE  DUMP.T:  cr  cr  cr ;

: words'+ ( head>target )
  cls   0   stm32f407.sF?  @  if  0 ( 08000000 )  +  then
  begin   U1'             dup  FLASH.ROM.END  @   u>    key?  or
  until
  begin   U1'             dup  cp'            @   u>    key?  or
  until   words'?  off    CR  ;

: dump.program.in.ram  ( -- )  CR   20001000  begin  u  dup  here'  u>=   over  20001000 u<  or  until  ;

: words'  ( head>target )   cls  _map  cr  cr  words*'' words'?  on    words'.1   words'.1/  words'.2   words'.2/  DUMP.T:NFA.QUEUE  DUMP.T:  cr  cr  cr
  0   stm32f407.sF?  @  if  0 ( 08000000 )  +  then
  begin   U1'             dup  FLASH.ROM.END   @   u>    key?  or
  until
  begin   U1'             dup  cp'             @   u>    key?  or
  until   words'?  off    dump.program.in.ram  ;







: words'1  ( head>target )   cls  _map  cr  cr  words*'' words'?  on    words'.1   words'.1/  words'.2   words'.2/  DUMP.T:NFA.QUEUE  DUMP.T:  cr  cr  cr
  0   stm32f407.sF?  @  if  0 ( 08000000 )  +  then   ;






: words'1a  ( head>target )   cls  _map  cr  cr  words*'' words'?  on    words'.1   words'.1/  ;

: words'1b   words'.2   words'.2/  DUMP.T:NFA.QUEUE  DUMP.T:  cr  cr  cr
  0   stm32f407.sF?  @  if  0 ( 08000000 )  +  then   ;







: words'.2
  begin   U1'             dup  FLASH.ROM.END   @   u>    key?  or
  until
  begin   U1'             dup  cp'             @   u>    key?  or
  until   words'?  off    dump.program.in.ram  ;












: u>=  u<  not  ;
: .a.range.of.instruction  ( from' to' -- )  >r  begin  cr  disassem   dup  r@  u>=  until  r>drop  DROP  ;

: ax  abort  ;
\ h"  hex cr ." VF so ao see hh h0 ... h15 cls words' u om sc mm eL st inf dnq dsv map DH DT rmdr ss LM OO >t ic mx dbg DL sh src ud* mF dcm " ;

: h"  hex cr ."   w0 mr VF so ao see hh h0 ... h15 cls words' u om sc mm eL st inf dsv map DH DT "
          cr ."   rmdr ss LM OO >t ic mx dbg DL sh src dcm " ;


: h"   h"
  cr  ."  z0   w0 "
  cr  ."  z1   mr "
  cr  ."  z2   VF "
  cr  ."  z3   so "
  cr  ."  z4   ao "
  cr  ."  z5   see "
  cr  ."  z6   hh "
\ cr  ."  z7   h0 ... h15
  cr  ."  z8   cls "
  cr  ."  z9   words' "
  cr  ."  z10  u "
  cr  ."  z11  om "
  cr  ."  z12  sc "
  cr  ."  z13  mm "
  cr  ."  z14  eL "
  cr  ."  z15  st "
  cr  ."  z16  inf "
  cr  ."  z17  dsv "
  cr  ."  z18  map "
  cr  ."  z29  DH "
  cr  ."  z20  DT "
  cr  ."  z21  rmdr "
  cr  ."  z22  ss "
  cr  ."  z23  LM "
  cr  ."  z24  OO "
  cr  ."  z25  >t "
  cr  ."  z26  ic "
  cr  ."  z27  mx "
  cr  ."  z28  dbg "
  cr  ."  z29  DL "
  cr  ."  z30  sh "
  cr  ."  z31  src "
  cr  ."  z32  dcm "
  cr  ;





: vf          Virtue.Forth?  dup  @  if  off  else  on  then  last.u @  u  drop   ;
: ds      disassem.special?  dup  @  if  off  else  on  then  last.u @  u  drop   ;
: ct                c.type?  dup  @  if  off  else  on  then  last.u @  u  drop   ;

: >1/0    if  1  else  0  then  ;
: h?      c.type? @ >1/0  disassem.special?  @ >1/0  Virtue.Forth? @ >1/0  h.mode  @ >1/0  swap 2* + swap 4 * + swap 8 * +  . ;

: (h0)   0  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !     ;   ' (h0)  is  _(h0)
: (h1)   0  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !     ;   ' (h1)  is  _(h1)
: (h2)   0  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !     ;
: (h3)   0  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !     ;
: (h4)   0  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !     ;
: (h5)   0  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !     ;
: (h6)   0  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !     ;
: (h7)   0  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !     ;
: (h8)   1  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !     ;
: (h9)   1  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !     ;
: (h10)  1  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !     ;
: (h11)  1  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !     ;
: (h12)  1  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !     ;
: (h13)  1  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !     ;
: (h14)  1  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !     ;
: (h15)  1  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !     ;   ' (h15)  is  _(h15)

: h0     0  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h1     0  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h2     0  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h3     0  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h4     0  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h5     0  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h6     0  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h7     0  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h8     1  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h9     1  c.type? !    0  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h10    1  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h11    1  c.type? !    0  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h12    1  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h13    1  c.type? !    1  disassem.special?  !    0  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;
: h14    1  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   0  h.mode  !   last.u @  u  drop  ;
: h15    1  c.type? !    1  disassem.special?  !    1  Virtue.Forth?  !   1  h.mode  !   last.u @  u  drop  ;

: ????   cr  ."            c.type? = "               c.type?  ?
         cr  ."  disassem.special? = "     disassem.special?  ?
         cr  ."      Virtue.Forth? = "         Virtue.Forth?  ?
         cr  ."             h.mode = "                h.mode  ?   ;

: ha   h10  ;  : hb  h11 ;  : hc  h12 ;  : hd  h13 ;  : he  h14  ;  : hf  h15  ;

: h       cls  h" h?  1  h.mode @ +  1 and  h.mode !  last.u @  u  drop  ;
: hh   h  h  ;
: n>....  ( n -- b3 b2 b1 b0 )  4  0  do   2 /mod  loop  drop  ;

: h''''   10  0
  do      cls     ."  h"  i  0f  and  .    i  n>....   c.type? !   disassem.special?  !    Virtue.Forth?  !     h.mode  !
          last.u  @   u   drop   key
          case    2006  ( ^ )    of   -1   endof
                                       1   swap
          endcase
  +loop   ;

: hom     h''''   om  h''''   om  ;


: dump'2.byte  ( from length --)  bounds   cr   do     cr    i   %2    drop     2   +loop   ;
: dump'4.byte  ( from length --)  bounds   cr   do     cr    i   %4    drop     4   +loop   ;

: words'msp430   DUMP.HEAD.IMAGE   DUMP.HEAD.IMAGE.msp430  ;

VARIABLE  NFA.OF._T:?

: T:?   ( NFA ... F )    0 NFA.OF._T:?  !
        T:QUEUE.MAX  2 CELLS  ( 6 ) *   0
        DO     DUP    T:QUEUE  I + CELL +  @  =
               IF     DUP  NFA.OF._T:?  !
               THEN   2 CELLS  ( 6 )
       +LOOP          DROP NFA.OF._T:?  @  0<>  ;

: T:?(nfa)   ( NFA ... F )    0 NFA.OF._T:?  !
        T:QUEUE.MAX  2 CELLS  ( 6 ) *   0
        DO     DUP    T:QUEUE  I + CELL +  @  =
               IF     DUP  NFA.OF._T:?  !
               THEN   2 CELLS  ( 6 )
       +LOOP          DROP NFA.OF._T:?  @  0<>  ;

: T:?(cfa')   ( cfa' ... F )    0 NFA.OF._T:?  !
        T:QUEUE.MAX  2 CELLS   *   0
        DO     DUP    T:QUEUE  I        +   @  =
               IF     DUP  NFA.OF._T:?  !
               THEN   2 CELLS
       +LOOP          DROP NFA.OF._T:?  @  0<>  ;

' T:?(cfa')   is   _T:?(cfa')
' T:?         is   _T:?

  : SEE  '  DUP  >NAME  T:?  IF   CFA>CFA'  u ( _SEE.ONE.INSTRUCTION )      ELSE  (SEE)  THEN ;
\ : SEE  '  DUP  >NAME  T:?  IF   CFA>CFA'  DECOMPILE.A.WORD(CFA'.OF.ICE40) ELSE  (SEE)  THEN ;

variable  @.cfa.of.dup

ice40?  @
#if
: see***   '  dup  @   ( word defined by t: )  @.cfa.of.dup  @  =
  if       cfa>cfa'    decompile.a.word(cfa'.of.ice40)
  else     DUP  >NAME  T:?
     IF    CFA>CFA'    DECOMPILE.A.WORD(CFA'.OF.ICE40)
     ELSE  (SEE)
     THEN
  then  ;
#then
\ ------------------------------------------------------------------------------
: ,0~7    ( n -- )        ff  and              c,'  ;
: ,8~15   ( n -- )      ff00  and      100  /  c,'  ;
: ,16~23  ( n -- )    ff0000  and    10000  /  c,'  ;
: ,24~31  ( n -- )  ff000000  and  1000000  /  c,'  ;

: rel8,  rel  ;

: :.name_    cr  ." : "  last @  nfa-count  type  '_' emit   cr  ;  \  13 ?y  ;
: =.if.%1        ."  = if %1  "  ; \ 13 spaces  ;
: =.if.%2        ."  = if %2  "  ; \ 13 spaces  ;
: =.if.%3        ."  = if %3  "  ; \ 13 spaces  ;
: =.if.%4        ."  = if %4  "  ; \ 13 spaces  ;

: 1"name            ." .1"   '"' emit   space  last @  nfa-count  type  ;
:  dup.c@'          ." dup c@' " ;
:   dup.@'          ." dup c@' " ;
:   2+.c@'.xxx____  ."  2+ c@' .xxx____ " ;

: .XXXXxx'   1c ?y  .XXXXxx  ;

 : 8c8#8c8rel:  \   IF'A=12      A:12  IF'=   FF2512A1
   create  DUP ,  :.name_  dup.@'  bl word  count  type  .XXXXxx' =.if.%4 2+.c@'.xxx____ 1"name 4.exit.then.0.;
   does>   @    >R  R@   ,0~7    ( A1 )
                         c,'     ( 12 )
                R>       ,16~23  ( 26 )
                         REL8,   ( FF )  ;

CREATE  "BUFFER    9 ALLOT

: NUMBER>STRING(9)  ( N ... ADDR LENGTH )            \ STRING == ADDR LENGTH
  DUP   0<
  IF    '-'  "BUFFER  C!     ABS
        8 0 DO  BASE @ /MOD  LOOP  9  0  DO  [0~F>ASC] I 1+ "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  ELSE  8 0 DO  BASE @ /MOD  LOOP  9  0  DO  [0~F>ASC] I    "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  THEN  ;

DEFER  _STRING.with.LEADING.0.REMOVED

: NUMBER>STRING ( N ... ADDR LENGTH )  DUP>R  \  ABS     \ STRING == ADDR LENGTH
  8 0 DO  0  BASE @  um/MOD  LOOP  9  0  DO  [0~F>ASC] I "BUFFER + C! LOOP  "BUFFER 9 0 -TRAILCHARS
  _STRING.with.LEADING.0.REMOVED
  R>    0<
  IF    2DUP   OVER   DUP>R   1+   SWAP   CMOVE>   '-' R> C!   1+
  THEN  ;

VARIABLE  STRING>NUMBER.CORRECT?

VARIABLE  0x?

: STRING.with.LEADING.BLANK.REMOVED  ( ADDR LENGTH ... ADDR1 LENGTH1 )    DUP>R    DUP   0
  ?DO    OVER   I   +    C@   20  <>    ( BLANK=20h )
         IF     LEAVE
         THEN   1-
  LOOP   R>     OVER   -   ROT  +  SWAP  DUP 0=  IF   DROP  1-  1   THEN  ;

VARIABLE  '+'.PRECEEDED
VARIABLE  '-'.PRECEEDED

: CHECK.+/-  ( ADDR LENGTH ... ADDR1 LENGTH1 )    '+'.PRECEEDED  OFF     '-'.PRECEEDED  OFF
  >R   >R      R@ C@
  CASE    '-'  OF    '-'.PRECEEDED  ON   -1  ENDOF
          '+'  OF    '+'.PRECEEDED  ON   -1  ENDOF
                                          0   SWAP
  ENDCASE
  IF       R> 1+  R> 1-
  ELSE     R>     R>
  THEN     ;

DEFER  _STRING.with.LEADING.BLANK.REMOVED

: STRING>NUMBER ( ADDR LENGTH ... N  -1 / N 0  )   -TRAILING    _STRING.with.LEADING.BLANK.REMOVED    CHECK.+/-
  0  -ROT   \ STRING == ADDR LENGTH
  BOUNDS      -1  STRING>NUMBER.CORRECT?  !           \ 5 31 32 33 34 35      12345
  DO     0x? @
         IF         10 *   I C@  UPC     10
         ELSE   BASE @ *   I C@  UPC   BASE @
         THEN   DIGIT                        \    |___addr
         IF     +
         ELSE   DROP ( 2DROP )  0  STRING>NUMBER.CORRECT?  !   LEAVE
         THEN
  LOOP   STRING>NUMBER.CORRECT?  @   0 0x? !
  DUP
  IF     '-'.PRECEEDED @
         IF     SWAP   NEGATE   SWAP
         THEN
  THEN   ;  \ IF  ( BASE @  / ) -1  ELSE  DROP 0  THEN  ;

: STRING>NUMBER'''''  ( ADDR LENGTH ... N  -1 / N 0  )   -TRAILING    _STRING.with.LEADING.BLANK.REMOVED    CHECK.+/-
  0  0  2swap  \ STRING == ADDR LENGTH
  BOUNDS      -1  STRING>NUMBER.CORRECT?  !           \ 5 31 32 33 34 35      12345
  DO     0x? @
         IF         10 *   I C@  UPC     10
         ELSE   BASE @ *   I C@  UPC   BASE @
         THEN   DIGIT                        \    |___addr
         IF     0   d+
         ELSE   2DROP ( 2DROP )  0  STRING>NUMBER.CORRECT?  !   LEAVE
         THEN
  LOOP   STRING>NUMBER.CORRECT?  @   0 0x? !
  DUP
  IF     '-'.PRECEEDED @
         IF     2SWAP   NEGATE   2SWAP    drop
         THEN
  THEN   ;  \ IF  ( BASE @  / ) -1  ELSE  DROP 0  THEN  ;


VARIABLE    X.TYPE

: REG.TYPE   ( 5555 )  1111  ;
: BIT.TYPE   2222  ;
:   #.TYPE   5555 ( 1111 ) ;
: EQU.TYPE   3333  ;
: MEM.TYPE   4444  ;

VARIABLE  FORBIT.CHANGE.RCALL
: ^    -1 FORBIT.CHANGE.RCALL  !  ;    \ usage:  RESET ^ 123 RJMP

: ,JMP            here'  4 - 32@'  0~15<->16~31   op.code.mask.of.call  @  and   op.code.of.call  @   =
           IF     here'  a'>24#    dup  here'  -
                  -4 allot'   HERE'  4  FF FILL'
                          dup    -80        7f between  ( -400~3ff )
                  if              jmp_#8   \  rjmp'
                  else    dup    -3ff      400 between  ( -400~3ff )                                         \  data after here' are changed.  ????
                    if            jmp_#11
                    else  dup    -7ffff  80000 between  ( -400~3ff )
                      if          jmp_#20
                      else        jmp_#24  \  pc=#
                      then
                    then
                  then
           ELSE   ABORT" ,JMP can only be used right after subroutine call! "
           THEN   ;

: (JMP)    here'  4 - 32@'  0~15<->16~31   op.code.mask.of.call  @  and   op.code.of.call @   =   FORBIT.CHANGE.RCALL  @  NOT  AND
           IF    ,JMP
           ELSE   jmp_#24
           THEN   0  FORBIT.CHANGE.RCALL  ! ;

: ,call    here'  4 - 32@'  0~15<->16~31   op.code.mask.of.call  @  and  op.code.of.call  @   =
           IF     HERE'  4 -  32@'   -4 ALLOT'   rcall     \  pc=#
           ELSE   ABORT" ,call can only be used right after subroutine call! "
           THEN   ;

: (call)   here'  4 - 32@'  0~15<->16~31   op.code.mask.of.call  @  and  op.code.of.call  @   =   FORBIT.CHANGE.RCALL  @  NOT  AND
           IF    ,call
           ELSE   call.#16
           THEN   0  FORBIT.CHANGE.RCALL  ! ;

:  ,call(mecrispForth)    ,call   ;
: (call)(mecrispForth)    (call)  ;
:   ,JMP(mecrispForth)    ,jmp    ;
:  (JMP)(mecrispForth)    (JMP)   ;


VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if
: STRING>CFA            ( ADDR$ LENGTH ... CFA -1/ 2954 0 )   \ TEMP1$   31 32 33 34 xx xx xx ....
  FIND-BUFFER  PLACE  FIND-BUFFER  ?UPPERCASE      (FIND)  ;  \          ||
#else
: STRING>CFA            ( ADDR$ LENGTH ... CFA -1/ 2954 0 )   \ TEMP1$   31 32 33 34 xx xx xx ....
  FIND-BUFFER PLACE  FIND-BUFFER  ?UPPERCASE   CAPS-FIND   ;  \ designed by Albert (FIND) ;
#then

HEX
CREATE     inst.BUFFER     30 ALLOT
CREATE   NUMBER.BUFFER     30 ALLOT
variable NUMBER.BUFFER.counter
variable   inst.BUFFER.counter
variable   current.CHAR
variable   prev.char
variable   prev.char.is.inst?
variable   '.'.exist?
: ERASE.inst.BUFFER               inst.BUFFER  30  ERASE  ;
: ERASE.NUMBER.BUFFER           NUMBER.BUFFER  30  ERASE  ;
: >NUMBER.BUFFER  ( char -- )   NUMBER.BUFFER  NUMBER.BUFFER.counter @ +  c!   1 NUMBER.BUFFER.counter  +!  ;
:   >inst.BUFFER  ( char -- )     inst.BUFFER    inst.BUFFER.counter @ +  c!   1   inst.BUFFER.counter  +!  ;

variable  upc?    upc? on
: un              upc? on  ;
: uf              upc? off ;

: NOT.digit?     ( char -- f )   dup  '0'  '9'  between   swap   upc  'A'  'F'  between   or   NOT  ;

: NOT.digit?     ( char -- f )   dup  '0'  '9'  between   swap   upc? @ if  upc  then
                                                                      'A'  'F'  between   or   NOT  ;

: @.NUMBER.BUFFER ( -- n )   0  NUMBER.BUFFER  NUMBER.BUFFER.counter @  bounds
                             ?do    base @  *  i c@  base @  digit  0=  abort" not digit "  +
                             loop   ;
variable  round.number.buffer.counter
create    round.number.buffer  4 4 * allot
: >round.number.buffer   ( n -- )                                     round.number.buffer  round.number.buffer.counter @  0f and  +  !  4 round.number.buffer.counter  +! ;
:  round.number.buffer>  ( -- n ) -4 round.number.buffer.counter  +!  round.number.buffer  round.number.buffer.counter @  0f and  +  @   ;

: upper.case ( char -- char' )  0df  and  ;

variable next.char

VARIABLE  par1
VARIABLE  par2
VARIABLE  depth1
VARIABLE  defer.execute
VARIABLE  stack.change
VARIABLE  DBG?

: high.level.algebraic.assembler  ( a len -- f )     STRING.WITH.LEADING.BLANK.REMOVED  \ 2013.1.24
  0   '.'.exist? off     round.number.buffer.counter off
  next.char  off     prev.char  off
  ERASE.inst.BUFFER  ERASE.NUMBER.BUFFER  NUMBER.BUFFER.counter OFF  inst.BUFFER.counter OFF
  DO      dup  i + 1+   c@  next.char c!
       \  dup  i + 1 -  c@  drop \ prev.char c!
          dup  i + c@   bl  <>
     if   DUP  I + C@   DUP    dup  current.CHAR  c!  DUP  NOT.digit?   I  0=   OR
          prev.char c@  ''' =  or   next.char c@           ''' =        or
          prev.char c@  '=' =       current.CHAR  c@  UPC  'A' =  and   or  \   R4=A   A is Accumulator
          IF      >inst.BUFFER      I  0<>       \ A=12
                  if    prev.char.is.inst? @  not
                        if   @.NUMBER.BUFFER    >round.number.buffer  NUMBER.BUFFER.counter off   ERASE.NUMBER.BUFFER
                        then
                  then  prev.char.is.inst?  on
          ELSE    upc   >NUMBER.BUFFER   prev.char.is.inst?  @
                  if    prev.char c@  'R' <>
                        if    prev.char c@  '='  =
                              if    '.'.exist?  @  if  current.CHAR  c@  else  '#'  then    \ r12.3=0
                              else  '.'.exist?  @
                                    if    -1   inst.BUFFER.counter  +!   'b'    \ Rb=0?
                                    else  '#'
                                    then
                              then  >inst.BUFFER          \ R=#
                        then
                  then  prev.char.is.inst?  off
          THEN    dup '.' = if  '.'.exist?  on  then     UPC prev.char C!
     then
  LOOP    DROP  \ CR  NUMBER.BUFFER   30 DUMP  CR  CR  inst.BUFFER  30 DUMP
  prev.char.is.inst? @  not
  if      @.NUMBER.BUFFER   >round.number.buffer
  then    round.number.buffer.counter  @  dup>r  0
  ?do     round.number.buffer>            4
  +loop   r>  4  /
  case    2  of  swap       endof  \   2 1 ----> 1 2
          3  of  swap  rot  endof  \ 3 2 1 ----> 1 2 3
  endcase '.'.exist?  @  if  drop  then   inst.BUFFER    inst.BUFFER.counter  @   string>cfa
  if  ( tp23 )  execute  -1
  else    0     \  -1 abort" invalid instruction"
  then    ;

: (#)=r  ( # r -- )    dup>r   0  =
  if    1  swap  r=#   1   r>  (r)=r
  else  0  swap  r=#   0   r>  (r)=r
  then  ;

 variable   (1.char)
2variable   (2.char)

: R?(#)  ( R # -- )      (1.char)  @
  case   '='  of  (#)=R  endof
\        '+'  of  (#)+R  endof
\        '-'  of  (#)-R  endof
\        'x'  of  (#)xR  endo
\        'o'  of  (#)oR  endof
\        'n'  of  (#)nR  endof
                  2drop
  endcase     ;

: R?(#)  ( R # -- )      (1.char)  @
  case   '='  of  R=(#)  endof
\        '+'  of  R+(#)  endof
\        '-'  of  R-(#)  endof
\        'x'  of  Rx(#)  endof
\        'o'  of  Ro(#)  endof
\        'n'  of  Rn(#)  endof
                  2drop
  endcase     ;

defer  _parse.1.char.operator.expression
defer  _parse.2.char.operator.expression
variable  depth.increase

: high.level.algebraic.assembler     ( a len -- f )  2dup  2>r     depth  >r
\  2dup  _parse.2.char.operator.expression  if  2drop  -1   exit   then
\  2dup  _parse.1.char.operator.expression  if  2drop  -1   exit   then
  STRING.WITH.LEADING.BLANK.REMOVED  \ 2013.1.24
  0   '.'.exist? off     round.number.buffer.counter off
  next.char  off     prev.char  off
  ERASE.inst.BUFFER  ERASE.NUMBER.BUFFER  NUMBER.BUFFER.counter OFF  inst.BUFFER.counter OFF
  DO      dup  i + 1+   c@  next.char c!
       \  dup  i + 1 -  c@  drop \ prev.char c!
          dup  i + c@   bl  <>
     if   DUP  I + C@   DUP    dup  current.CHAR  c!  DUP  NOT.digit?   I  0=   OR
          prev.char c@  ''' =  or   next.char c@           ''' =        or
          prev.char c@  '=' =       current.CHAR  c@  UPC  'A' =  and   or  \   R4=A   A is Accumulator
          IF      >inst.BUFFER      I  0<>       \ A=12
                  if    prev.char.is.inst? @  not
                        if   @.NUMBER.BUFFER    >round.number.buffer  NUMBER.BUFFER.counter off   ERASE.NUMBER.BUFFER
                        then
                  then  prev.char.is.inst?  on
          ELSE    upc   >NUMBER.BUFFER   prev.char.is.inst?  @
                  if    prev.char c@  'R' <>
                        if    prev.char c@  '='  =
                              if    '.'.exist?  @  if  current.CHAR  c@  else  '#'  then    \ r12.3=0
                              else  '.'.exist?  @
                                    if    -1   inst.BUFFER.counter  +!   'b'    \ Rb=0?
                                    else  '#'
                                    then
                              then  >inst.BUFFER          \ R=#
                        then
                  then  prev.char.is.inst?  off
          THEN    dup '.' = if  '.'.exist?  on  then     UPC prev.char C!
     then
  LOOP    DROP  \ CR  NUMBER.BUFFER   30 DUMP  CR  CR  inst.BUFFER  30 DUMP
  prev.char.is.inst? @  not
  if      @.NUMBER.BUFFER   >round.number.buffer
  then    round.number.buffer.counter  @  dup>r  0
  ?do     round.number.buffer>            4
  +loop   r>  4  /
  case    2  of  swap                     endof  \     2 1 ----> 1 2
          3  of  swap  rot                endof  \   3 2 1 ----> 1 2 3
          4  of  2swap swap 2>r swap 2r>  endof  \ 4 3 2 1 ----> 1 2 3 4
  endcase '.'.exist?  @  if  drop  then   inst.BUFFER    inst.BUFFER.counter  @   string>cfa
  if      r>drop  2r>  2drop  execute      -1
  else    r>    depth  swap  -  abs  0  ?do  drop  loop
          2r@   _parse.1.char.operator.expression
    if    2r>   2drop    drop      -1  exit
    else  2r>   _parse.2.char.operator.expression
      if                           -1  exit
      then
    then       -1   abort" <-- invalid ?????? "
  then    ;

: Check.Number.Contained.in.instruction.BUFFER  ( -- )   CR  NUMBER.BUFFER   30 DUMP     CR  inst.BUFFER  30 DUMP ;
: CNC  ( -- )  Check.Number.Contained.in.instruction.BUFFER  ;

: HLAA  ( a len -- f )    high.level.algebraic.assembler  ;   \  s" x+1.2"  HLAA

: _MESSAGE+HLAA   ( -- f )   POCKET COUNT  high.level.algebraic.assembler  if  ( drop )  exit  then  _MESSAGE  ;

  20 ( space or blank )  ' .s  76a1  7628  -  +  c!   \ 2013/11/21   \ removing h ==== 123h  --> 123

: parse.=,=|,...
  bl  word  count  2dup + c@  ';'  =  if  1-  then   2>r            \ a len
  2r@   s" ="  search
  if    dup>r ( 4 ) 1-  swap 1+  swap  ( 456 )  string>cfa          \ right side
        2r>  cr  .s  ( 7 4 )   -  r> ( 263d )   swap  ( 263d 3 )   cr  .s   string>cfa   exit   \ left side
  then  2r>  2drop   ; \ RCC_APB2ENR=RCC_APB2ENR_IOPAEN;












\ pijForth?  @
\ #if        include  ARMASM613098J.F          \s
\ #then
















#define  GPIO_Speed_2MHz    2000abc0   \ ??????????
#define  GPIO_Speed_25MHz   2000abc4   \ ??????????

: *parse.=,=|,...
  bl  word  count  2dup + c@  ';'  =  if  1-  then   2>r       \ a len
  2r@   s" ="  search
  if    dup>r ( 4 ) 1-  swap 1+    swap    string>cfa          \ right side
        2r>  -      r>  ( 263d )   swap    string>cfa   exit   \ left side
  then  2r>  2drop   ;  \ RCC_APB2ENR=RCC_APB2ENR_IOPAEN;

\ ex:   PARSE.=,=|,...   dup.=swap.    .s.        PARSE.=,=|,...   PIO_Speed_25MHz=0x01

comment:

*parse.=,=|,...  GPIO_Speed_2MHz=0x00, /*!< Low speed */

#define GPIO_AF_USART1        ((uint8_t)0x07)  /*  USART1 Alternate Function mapping */
#define GPIO_AF_USART2        ((uint8_t)0x07)  /*  USART2 Alternate Function mapping */
#define GPIO_AF_USART3        ((uint8_t)0x07)  /*  USART3 Alternate Function mapping */
#define GPIO_AF_I2S3ext       ((uint8_t)0x07)  /* I2S3ext Alternate Function mapping */


typedef enum
{
  GPIO_Speed_2MHz   = 0x00, /*!< Low speed */
  GPIO_Speed_25MHz  = 0x01, /*!< Medium speed */
  GPIO_Speed_50MHz  = 0x02, /*!< Fast speed */
  GPIO_Speed_100MHz = 0x03  /*!< High speed on 30 pF (80 MHz Output max speed on 15 pF) */
}GPIOSpeed_TypeDef;

  : R:   CREATE  HERE'R ,  HERE'R  R:QUEUE  R:QUEUE.COUNTER @ +        !            \ CFA'  \ 2 CP.R +!
                           LAST @  R:QUEUE  R:QUEUE.COUNTER @ +  2 +   !            \ NFA
                                         6  R:QUEUE.COUNTER   +!
         DOES>   @   PROGRAM.MEMORY.R  + @   ;

R: Gate.Time       74  R;
R: OverFlow.Count  75  R;
R: T0.Vect.L       76  R;
R: T0.Vect.H       77  R;
R: T2.Vect.L       78  R;
R: T2.Vect.H       79  R;
R: (Gate.time)     7A  R;
R: (TL)            7B  R;
R: (TH)            7C  R;
\  (Gate.time)     7A  R;
R: Buf.Out.mode    7D  R;

comment;












: (see')     dup cfa>cfa'  >name'  ?dup
  if         dup  last' @  =
       if    decompile.a.word
       else  decompile.a.word
       then  drop
  else       dup >NAME  T:?
       IF    CFA>CFA'   U ( _SEE.ONE.INSTRUCTION )
       ELSE  (SEE)
       THEN
  then    ;


: see'  ( head>target ) '    dup       cfa'>nfa'  if  (nfa') !  then  (see')  ;

: seee    head>target   '    dup   dup cfa'>nfa'  if  (nfa') !  then  (see')  drop  (see')  ;

: see''   '  cfa>cfa'  cfa'>nfa'(430eForthAL03)     0= abort" *** invalid instruction *** "
          C.TYPE? @    DISASSEM.SPECIAL? @    VIRTUE.FORTH? @   H.MODE @   2>r  2>r   >r
        0 C.TYPE? !  0 DISASSEM.SPECIAL? !  0 VIRTUE.FORTH? ! 0 H.MODE !   om r@   decompile.a.word
                                                                           om r@   decompile.a.word
        0 C.TYPE? !  0 DISASSEM.SPECIAL? !  0 VIRTUE.FORTH? ! 1 H.MODE !   om r@   decompile.a.word
                                                                           om r@   decompile.a.word
        0 C.TYPE? !  0 DISASSEM.SPECIAL? !  1 VIRTUE.FORTH? ! 1 H.MODE !   om r@   decompile.a.word
                                                                           om r@   decompile.a.word
        1 C.TYPE? !  1 DISASSEM.SPECIAL? !  1 VIRTUE.FORTH? ! 1 H.MODE !   om r@   decompile.a.word
                                                                           om r>   decompile.a.word
 2r> 2r>  C.TYPE? !    DISASSEM.SPECIAL? !    VIRTUE.FORTH? !   H.MODE !   ;

: jmp_LABEL.END   2002 ;

VARIABLE  FIND.jmp_LABEL?
VARIABLE  FIND.jmp_LABEL?(headless)

: FIND.jmp_LABEL ( N .... NFA / 0 )
  T:QUEUE.MAX   0                     0  FIND.jmp_LABEL?  !
  DO    DUP  T:QUEUE I 6 * +          @  =
        IF   T:QUEUE I 6 * + 4 +      @  FIND.jmp_LABEL?  !   LEAVE
        THEN
  LOOP  DROP                             FIND.jmp_LABEL?  @   ;

: FIND.jmp_LABEL ( N .... NFA / 0 )
  T:QUEUE.MAX   0                               0  FIND.jmp_LABEL?            !
  DO    DUP  T:QUEUE           I 8 * +          @  =
        IF   T:QUEUE           I 8 * + 4 +      @  FIND.jmp_LABEL?            !   LEAVE
        THEN
  LOOP  DROP                                       FIND.jmp_LABEL?            @   ;

: FIND.jmp_LABEL(headless) ( N .... NFA / 0 )
  T:QUEUE(headless).MAX   0                               0  FIND.jmp_LABEL?(headless)  !
  DO    DUP  T:QUEUE(headless) I 8 * +          @  =
        IF   T:QUEUE(headless) I 8 * + 4 +      @  FIND.jmp_LABEL?(headless)  !   LEAVE
        THEN
  LOOP  DROP                                       FIND.jmp_LABEL?(headless)  @   ;

: .id'(cfa')            ( cfa' -- )  FIND.jmp_LABEL            NFA-COUNT  TYPE  ;
: .id'(cfa')(headless)  ( cfa' -- )  FIND.jmp_LABEL(headless)  NFA-COUNT  TYPE  ;









\ ----------------------------------------------------------------------------
: make.cover(cfa')  ( cfa' -- )         >r
  cr  cr  ."      ''  "   r@  .id'(cfa')    ."   >mca "
  cr      ."      ''  "   r@  .id'(cfa')         ."   cfa'.of."   r@  .id'(cfa')   ."    !. "  cr     ."      :.  "  r@  .id'(cfa')  0a spaces  r>  .id'(cfa')  ." '  ;. "  ;

:         make.cover.array.size   1000  ;
create    make.cover.array    make.cover.array.size    allot

variable  make.cover.array.counter
: >make.cover.array  ( cfa' -- )
   make.cover.array.counter  @  make.cover.array.size     u>=   abort" *** too many make.cover ***"
   make.cover.array             make.cover.array.counter  @  +  !    4  make.cover.array.counter  +!  ;

: >mca   >make.cover.array  ( cfa' -- )  ;

\ '' doLIT  >mca

: make.cover  ( cfa' -- )           make.cover.array   make.cover.array.counter  @  bounds
  ?do    i  @   over  =  if   i  @  make.cover(cfa')   leave   then
  loop   drop  ;
\ ----------------------------------------------------------------------------











: a'>cfa'.lcall  ( a' -- cfa'.lcall )   2+   @'   2*  ;
: a'>cfa'.rcall  ( a' -- rcall   .cfa' )   DUP  @' ( 12K' )  0FFF AND     \  7D70 a'>cfa'.rcall  --> 3D0E == cfa'.of ."|
  DUP 7FF >  IF F000 OR THEN  swap 2/  dup>r  +  1+      0FFF AND  r> f000 and  or  2*  ;

\ : (.1234..55.66.77.88.......).328 ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  4  bounds  do  space  i  c@' .xx  loop  6 spaces ."  ) " ;
\ : (.1234..55.66.77.88.99.aa.).328 ( a -) ." (  "  dup  dup .xxxx  space  2/ .xxxx  ':' emit  6  bounds  do  space  i  c@' .xx  loop          ."  )" ;

: a'>.id'.str$.lcall  ( a' --)  dup  (.1234..55.66.77.88.99.aa.).328  dup  a'>cfa'.lcall  38y  .id'(cfa')  4 +  dup c@' 1+ swap  space   .$'  EVEN.ALIGNED  ;
: a'>.id'.str$.rcall  ( a' --)  dup  (.1234..55.66.77.88.......).328  dup  a'>cfa'.rcall  38y  .id'(cfa')  2 +  dup c@' 1+ swap  space   .$'  EVEN.ALIGNED  ;
: a'>.id'.nnnn.rcall  ( a' --)  dup  (.1234..55.66.77.88.......).328  dup  a'>cfa'.rcall  38y  .id'(cfa')  2 +       @'       2  spaces  .xxxx  2  ;
: a'>.id'.nnnn.lcall  ( a' --)  dup  (.1234..55.66.77.88.99.aa.).328  dup  a'>cfa'.lcall  38y  .id'(cfa')  4 +       @'       2  spaces  .xxxx  2  ;

 variable   no.\..XXXX..RCALL

: check.special.instruction?lcall         ( 328eforth )  ( a' -- n | 0 )   dup      @'   154E ( '' COMPILE ) = if  drop  0   exit  then
  dup   a'>cfa'.lcall   \  dup        @'  ( ?branch  doLit )
  case  cfa'.of.?branch   @  of   a'>.id'.nnnn.lcall      endof    \ ?branch
        cfa'.of.branch    @  of   a'>.id'.nnnn.lcall      endof    \  branch
        cfa'.of.nex.      @  of   a'>.id'.nnnn.lcall      endof    \  next
        cfa'.of.doLIT     @  of   a'>.id'.nnnn.lcall      endof    \  doLit
        cfa'.of.doVar     @  of   a'>.id'.nnnn.lcall      endof    \  doVar
        cfa'.of.doUSER    @  of   a'>.id'.nnnn.lcall      endof    \  doUSER
        cfa'.of.."|       @  of   a'>.id'.str$.lcall   no.\..XXXX..RCALL  on   endof    \  ,"|
        cfa'.of.$"|       @  of   a'>.id'.str$.lcall   no.\..XXXX..RCALL  on   endof    \  $"|
        cfa'.of.abort"    @  of   a'>.id'.str$.lcall   no.\..XXXX..RCALL  on   endof    \  abort"

        cfa'.of.?branch*  @  of   a'>.id'.nnnn.lcall      endof    \ ?branch
        cfa'.of.branch*   @  of   a'>.id'.nnnn.lcall      endof    \  branch
        cfa'.of.nex.*     @  of   a'>.id'.nnnn.lcall      endof    \  next
        cfa'.of.doLIT*    @  of   a'>.id'.nnnn.lcall      endof    \  doLit
        cfa'.of.doVar*    @  of   a'>.id'.nnnn.lcall      endof    \  doVar
        cfa'.of.doUSER*   @  of   a'>.id'.nnnn.lcall      endof    \  doUSER
        cfa'.of.."|*      @  of   a'>.id'.str$.lcall   no.\..XXXX..RCALL  on   endof    \  ,"|
        cfa'.of.$"|*      @  of   a'>.id'.str$.lcall   no.\..XXXX..RCALL  on   endof    \  $"|
        cfa'.of.abort"*   @  of   a'>.id'.str$.lcall   no.\..XXXX..RCALL  on   endof    \  abort"

        over   (.1234..55.66.77.88.......).328 38y   over   a'>cfa'.lcall        .id'(cfa')
        FIND.jmp_LABEL?  @  0=
        if       30y     2/  6 u.r   dup  16@'  op.code.of.lcall @   =  if  ."   lcall"  then
        else     drop
        then
      ( drop ) 0   swap
  endcase   ;

: check.special.instruction?rcall   ( 328eforth )  ( a' -- n | 0 )   dup      @'   154E ( '' COMPILE ) = if  drop  0   exit  then
  dup   a'>cfa'.rcall   \  dup        @'  ( ?branch  doLit )
  case  cfa'.of.?branch   @  of   a'>.id'.nnnn.rcall      endof    \ ?branch
        cfa'.of.branch    @  of   a'>.id'.nnnn.rcall      endof    \  branch
        cfa'.of.?branch*  @  of   a'>.id'.nnnn.rcall      endof    \ ?branch
        cfa'.of.branch*   @  of   a'>.id'.nnnn.rcall      endof    \  branch
        cfa'.of.nex.      @  of   a'>.id'.nnnn.rcall      endof    \  next
        cfa'.of.doLIT     @  of   a'>.id'.nnnn.rcall      endof    \  doLit
        cfa'.of.doVar     @  of   a'>.id'.nnnn.rcall      endof    \  doVar
        cfa'.of.doUSER    @  of   a'>.id'.nnnn.rcall      endof    \  doUSER
        cfa'.of.."|       @  of   a'>.id'.str$.rcall   no.\..XXXX..RCALL  on   endof    \  ,"|
        cfa'.of.$"|       @  of   a'>.id'.str$.rcall   no.\..XXXX..RCALL  on   endof    \  $"|
        cfa'.of.abort"    @  of   a'>.id'.str$.rcall   no.\..XXXX..RCALL  on   endof    \  abort"

        cfa'.of.?branch*  @  of   a'>.id'.nnnn.rcall      endof    \ ?branch
        cfa'.of.branch*   @  of   a'>.id'.nnnn.rcall      endof    \  branch
        cfa'.of.nex.*     @  of   a'>.id'.nnnn.rcall      endof    \  next
        cfa'.of.doLIT*    @  of   a'>.id'.nnnn.rcall      endof    \  doLit
        cfa'.of.doVar*    @  of   a'>.id'.nnnn.rcall      endof    \  doVar
        cfa'.of.doUSER*   @  of   a'>.id'.nnnn.rcall      endof    \  doUSER
        cfa'.of.."|*      @  of   a'>.id'.str$.rcall   no.\..XXXX..RCALL  on   endof    \  ,"|
        cfa'.of.$"|*      @  of   a'>.id'.str$.rcall   no.\..XXXX..RCALL  on   endof    \  $"|
        cfa'.of.abort"*   @  of   a'>.id'.str$.rcall   no.\..XXXX..RCALL  on   endof    \  abort"

        over  (.1234..55.66..........).328  38y   over   a'>cfa'.rcall        .id'(cfa')
        FIND.jmp_LABEL?  @  0=
        if      30y   2/  6 u.r  dup  16@'  f000 and  op.code.of.rcall @  =  if  ."   rcall"  then
        else    drop
        then
      ( drop )  0   swap
  endcase   ;

variable   doLIST?

: \..xxxx..LCALL   (  a' -- )  a'>cfa'.lcall  4f ?y  ." \"   52 ?y  dup  6 u.r   2/  7 u.r  ."   lcall"  ;
: \..xxxx..Ljmp    (  a' -- )  a'>cfa'.lcall  4f ?y  ." \"   52 ?y  dup  6 u.r   2/  7 u.r  ."   ljmp"   ;
: \..xxxx..Rjmp    (  a' -- )  a'>cfa'.rcall  4f ?y  ." \"   52 ?y  dup  6 u.r   2/  7 u.r  ."   rjmp"   ;
: \..xxxx..RCALL   (  a' -- )  a'>cfa'.rcall  4f ?y  ." \"   52 ?y  dup  6 u.r   2/  7 u.r  ."   rcall"  ;

: cfa'>nfa'.328  ( cfa' -- nfa' -1 / 0 )    >r   last'  @
  begin   dup  nfa'>cfa'   r@   =  if   r>drop    -1   exit  then
          2-   16@'  dup   0=
  until   r>drop     0     ;

: decompile.all.328   ( --)     base  @  >r  hex  \ 328eforth
  get.total.instructions  1+  dup   0
  ?do    dup   i  -  >r   last' @   (  2- 16@' )  r>  0
         ?do   2-    16@'
         loop            decompile.a.word   \  key 1b = if  leave  then
  loop   r>    base  !   drop     last' @   decompile.a.word   ;

: all    cls  t:words.2  continue.display?  on  decompile.all.cortex.m4  ;

' all  is  _all

variable  PREFIX?

: JMP     PREFIX? @
  IF      BL WORD COUNT 2DUP  STRING>NUMBER
          IF      jmp_#24     2DROP
          ELSE    DROP  STRING>CFA
              IF    CFA>CFA'   jmp_#24
              ELSE  -1 ABORT"  JMP ????? "
              THEN
          THEN
  ELSE    (JMP)
  THEN    ;

: call    PREFIX? @
  IF      BL WORD COUNT 2DUP  STRING>NUMBER
          IF      call.#24     2DROP
          ELSE    DROP  STRING>CFA
              IF    CFA>CFA'   call.#24
              ELSE  -1 ABORT"  call ????? "
              THEN
          THEN
  ELSE    (call)
  THEN    ;


: ,RJMP  \ HERE'   4 -   @'                                                op.code.of.call @  =    \ 12b0
           here'   4 - 32@'  0~15<->16~31   op.code.mask.of.call  @  and   op.code.of.call @  =
           IF      HERE'  2 -  @'  -4 ALLOT'  rjmp
           ELSE    ABORT" ,RJMP can only be used right after subroutine call! "
           THEN    ;

: (RJMP)   HERE'   4 -   @'                                                op.code.of.call @  =   FORBIT.CHANGE.RCALL  @  NOT  AND
           here'   4 - 32@'  0~15<->16~31   op.code.mask.of.call  @  and   op.code.of.call @  =   FORBIT.CHANGE.RCALL  @  NOT  AND
           IF     ,RJMP
           ELSE    rjmp
           THEN    0  FORBIT.CHANGE.RCALL  ! ;



: RJMP     PREFIX? @
  IF       BL WORD COUNT       2DUP  STRING>NUMBER
           IF      jmp_#24     2DROP
           ELSE    DROP  STRING>CFA
              IF    CFA>CFA'   rjmp
              ELSE  -1 ABORT"  RJMP ????? "
              THEN
           THEN
  ELSE     (RJMP)
  THEN     ;

\ ***************************************************************************************
\     minimum 16 bit tinyForth
\ ***************************************************************************************
: if'z=1    here'  here'  z=0?  ;
: if'z      here'  here'  z=0?  ;
: if'=      here'  here'  z=0?  ;
: if'z=0    here'  here'  z=1?  ;
: if'nz     here'  here'  z=1?  ;
: if'<>     here'  here'  z=1?  ;
\ ***************************************************************************************



























\ include  MAKE_INSTRUCTION(MSP430)n3.F ( :  0a  T  ; )   \ remove .R.
\ make_instruction(msp430).f
\ MAKE.MACRO.INSTRUCTION.(Forth..cpu)

hex

cortex.m4?  @
#if
#else
: pc      0  ;
: nsp     1  ;   \ native sp
: st      2  ;
: cg      3  ;
#then

\  tinyForth?       @
   tinyForth(stc)?  @
#if
: pc      0  ;
: nsp     1  ;   \  native sp
: st      2  ;
: cg      3  ;
: up      4  ;
: ip      5  ;
: rp      6  ;   \  frp
: sp      7  ;   \  fsp
: temp    8  ;
: w       9  ;
: t      0a  ;
: x      0b  ;
: y      0c  ;
: q      0d  ;
: trcptr 0e  ;
: unext  0f  ;
#then

msp430eforth?  @
#if
: pc      0  ;
: nsp     1  ;   \  native sp
: st      2  ;
: cg      3  ;
: up      4  ;
: ip      5  ;
: rp      6  ;   \  frp
: sp      7  ;   \  fsp
: temp    8  ;
: w       9  ;
: t      0a  ;
: x      0b  ;
: y      0c  ;
: q      0d  ;
: trcptr 0e  ;
: unext  0f  ;
#then




tF(stc+itc)?  @
#if
: pc      0  ;
: nsp     1  ;   \  native sp
: st      2  ;
: cg      3  ;
: up      4  ;
: ip      5  ;
: rp      6  ;   \  frp
: sp      7  ;   \  fsp
: temp    8  ;
: w       9  ;
: t      0a  ;
: x      0b  ;
: y      0c  ;
: q      0d  ;
: trcptr 0e  ;
: unext  0f  ;
#then


\ 430eforth
\  ;****************** REGISTER ASSIGNMENTS *****************
comment:
; R0    	PC
; R1    	SP		; machine stack pointer
; R2    	ST		; status register
; R3    	CG		; constant generator

; R4    	UP		; Forth user pointer
#define UPTR    	R4

; R5    	IP		; Forth instruction pointer
#define IP      	R5

; r6    	RP		; Forth return stack pointer
#define RP      	R6

; R7    	PSP		; Forth parameter stack pointer
#define PSP     	R7

; R8    	temp
; R9-R12		; assembly
; R13   			; reserved

; R14   	TRCPTR		; Forth trace pointer
#define TRCPTR  	R14

; R15   	UNEXT	 	; Forth NEXT pointer
#define UNEXT   	R15	
\ =============================================
\ camelforth
; FORTH REGISTER USAGE

; Forth virtual machine
#define RSP     SP    \ r1
#define PSP     R4
#define IP      R5
#define W       R6
#define TOS     R7

; Loop parameters in registers
#define INDEX   R8
#define LIMIT   R9

; Scratch registers
#define X       R10
#define Y       R11
#define Q       R12
#define T       R13

; T.I. Integer Subroutines Definitions
#define IROP1   TOS
#define IROP2L  R10
#define IROP2M  R11
#define IRACL   R12
#define IRACM   R13
#define IRBT    W
comment;



comment:
msp430g2553camelforth?  @
#if
: rp      4  ;
: ip      5  ;
: w       6  ;
: T       7  ;
: index   8  ;
: limit   9  ;
: x      0a  ;
: y      0b  ;
: q      0c  ;
\ : t    0d  ;   \ ?????  top of stack
\        0e  ;
\        0f  ;
#then
comment;




msp430g2553camelforth?  @
#if
: pc      0  ;
: nsp     1  ;   \  native sp  ---->  frp
: st      2  ;
: cg      3  ;
: rp      1  ;   \  frp
: sp      4  ;   \  fsp
: ip      5  ;
: w       6  ;
: T       7  ;
: index   8  ;
: limit   9  ;
: x      0a  ;
  : y      0b  ;
\ : q      0c  ;
\ : Rd     0d  ;   \ ?????  top of stack
\ : Re     0e  ;
\ : Rf     0f  ;
#then

430eforthAL03?  @      430eforthWang1?  @    or     430uforth?  @   or
#if
: pc      0  ;
: nsp     1  ;   \  native sp  ---->  frp
: st      2  ;
: cg      3  ;
: rp      1  ;
: T       4  ;
: sp      5  ;
\ w       6  ;
: temp0   6  ;
: temp1   7  ;
: temp2   8  ;
: temp3   9  ;
: Ra     0a  ;
: w      0b  ;
: x      0c  ;
: y      0d  ;
: Re     0e  ;
: Rf     0f  ;
\ : T       7  ;
\ : index   8  ;
\ : limit   9  ;
\ : x      0a  ;
\ : y      0b  ;
\ : q      0c  ;
\ : Rd     0d  ;   \ ?????  top of stack
\ : Re     0e  ;
\ : Rf     0f  ;
#then





























 
\ + - * / and or xor ;

CREATE  HEAD       'T' C,   'S' C,   'R' C,   'W' C,   '#' C,   'V' C,   'U' C,              \ 7   'X' C,   'Y' C,
CREATE  OPERATOR   '=' C,   '+' C,   '-' C,   '*' C,   '/' C,   'x' C,   'o' C,   'n' C,     \ 8

: MAKE.MACRO.INSTRUCTION''   CLS
  7   0
  DO  8   0
      DO  7   0
          DO     CR   ."   \  :  "   K  HEAD  +  C@  EMIT   J  OPERATOR  +  C@  EMIT   I  HEAD  +  C@  EMIT
                 3 SPACES            K  HEAD  +  C@  EMIT   2  SPACES                  I  HEAD  +  C@  EMIT
                 2 SPACES                       'R'  EMIT   J  OPERATOR  +  C@  EMIT              'R'  EMIT
          LOOP
      LOOP
  LOOP       ;

VARIABLE  1st.'S'?
VARIABLE  2nd.'S'?
VARIABLE  1st.'R'?

VARIABLE  2nd.'R'?

: SHOW.1st.'R'  ( CHAR -- )   DUP 'R'   =   IF   DROP    3  SPACES    1st.'R'?  ON   EXIT  THEN
                              DUP 'S'   =   IF   DROP    3  SPACES    1st.'S'?  ON   EXIT  THEN   EMIT  2  SPACES  ;
: SHOW.2nd.'R'  ( CHAR -- )   DUP 'R'   =   IF   DROP    3  SPACES    2nd.'R'?  ON   EXIT  THEN
                              DUP 'S'   =   IF   DROP    3  SPACES    2nd.'S'?  ON   EXIT  THEN   EMIT  2  SPACES  ;
\ -------------------------------------------------------------------------------------------------------------------
: SHOW.1st.'(SP)'/R   ( -- )  1st.'S'?  @   IF   ." (SP)"   EXIT  THEN
                              1st.'R'?  @   IF   ." (RP)"   EXIT  THEN   'R'  EMIT  ;
: SHOW.2nd.'(SP)'/R   ( -- )  2nd.'S'?  @   IF   ." (SP)"   EXIT  THEN
                              2nd.'R'?  @   IF   ." (RP)"   EXIT  THEN   'R'  EMIT  ;
VARIABLE  PUT.BLANK?
VARIABLE  ITEM.#

: ?y  ( X -)   GETXY   NIP   GOTOXY  ;
: 70y          70  ?y   ;


: from~to.C,'''' ( from to -- )  1+  swap  do   i  0a mod  0 =  if  cr  then   ."  '"   i emit   ." ' C, "  loop  ;
: from~to.C,'    ( from to -- )  1+  swap  do   i  C,  loop  ;

CREATE HEAD       'A'  'Z'  from~to.C,'      'a'  'z'  from~to.C,'

CREATE OPERATOR   '=' C,   '+' C,   '-' C, ( '*' C,   '/' C, ) ':' C,   'x' C,   'o' C,   'n' C,  \ 9

: EMIT.r.(r).(r+).(r+x)
  CASE   'A'  of   ." T"        endof   \  1
         'B'  of   ." (T)"      endof   \  2
         'C'  of   ." (T+)"     endof   \  3
         'D'  of   ." (T+x)"    endof   \  4
         'E'  of   ." Z"        endof   \  5
         'F'  of   ." (Z)"      endof   \  6
         'G'  of   ." (Z+)"     endof   \  7
         'H'  of   ." (Z+x)"    endof   \  8
         'I'  of   ." W"        endof   \  9
         'J'  of   ." (W)"      endof   \ 10
         'K'  of   ." (W+)"     endof   \ 11
         'L'  of   ." (W+x)"    endof   \ 12
         'M'  of   ." U"        endof   \ 13
         'N'  of   ." (U)"      endof   \ 14
         'O'  of   ." (U+)"     endof   \ 15
         'P'  of   ." (U+x)"    endof   \ 16
         'Q'  of   ." V"        endof   \ 17
         'R'  of   ." (V)"      endof   \ 18
         'S'  of   ." (V+)"     endof   \ 19
         'T'  of   ." (V+x)"    endof   \ 20
         'U'  of   ." X"        endof   \ 21
         'V'  of   ." (X)"      endof   \ 22
         'W'  of   ." (X+)"     endof   \ 23
         'X'  of   ." (X+x)"    endof   \ 24
         'Y'  of   ." Y"        endof   \ 25
         'Z'  of   ." (Y)"      endof   \ 26
         'a'  of   ." (Y+)"     endof   \ 27
         'b'  of   ." (Y+x)"    endof   \ 28   1c
         'c'  of   ." #"        endof   \ 29   1d
\        'd'  of   ." T"        endof   \
\        'e'  of   ." (T)"      endof   \
\        'f'  of   ." (T+)"     endof   \
\        'g'  of   ." (T+x)"    endof   \
\        'h'  of   ." #"        endof   \
\        'i'  of   ." T"        endof   \
\        'j'  of   ." (T)"      endof   \
\        'k'  of   ." (T+)"     endof   \
\        'l'  of   ." (T+x)"    endof   \
\        'm'  of   ." #"        endof   \
\        'n'  of   ." T"        endof   \
\        'o'  of   ." (T)"      endof   \
\        'p'  of   ." (T+)"     endof   \
\        'q'  of   ." (T+x)"    endof   \
\        'r'  of   ." #"        endof   \
\        's'  of   ." T"        endof   \
\        't'  of   ." (T)"      endof   \
\        'u'  of   ." (T+)"     endof   \
\        'v'  of   ." (T+x)"    endof   \
\        'w'  of   ." #"        endof   \
\        'x'  of   ." T"        endof   \
\        'y'  of   ." (T)"      endof   \
\        'z'  of   ." (T+)"     endof   \

              DUP               EMIT
   ENDCASE    ;

: EMIT.r.(r).(r+).(r+x).end
  CASE   'A'  of   ." R"        endof   \  1
         'B'  of   ." (R)"      endof   \  2
         'C'  of   ." (R+)"     endof   \  3
         'D'  of   ." (R+x)"    endof   \  4
         'E'  of   ." R"        endof   \  5
         'F'  of   ." (R)"      endof   \  6
         'G'  of   ." (R+)"     endof   \  7
         'H'  of   ." (R+x)"    endof   \  8
         'I'  of   ." R"        endof   \  9
         'J'  of   ." (R)"      endof   \ 10
         'K'  of   ." (R+)"     endof   \ 11
         'L'  of   ." (R+x)"    endof   \ 12
         'M'  of   ." R"        endof   \ 13
         'N'  of   ." (R)"      endof   \ 14
         'O'  of   ." (R+)"     endof   \ 15
         'P'  of   ." (R+x)"    endof   \ 16
         'Q'  of   ." R"        endof   \ 17
         'R'  of   ." (R)"      endof   \ 18
         'S'  of   ." (R+)"     endof   \ 19
         'T'  of   ." (R+x)"    endof   \ 20
         'U'  of   ." R"        endof   \ 21
         'V'  of   ." (R)"      endof   \ 22
         'W'  of   ." (R+)"     endof   \ 23
         'X'  of   ." (R+x)"    endof   \ 24
         'Y'  of   ." Y"        endof   \ 25
         'Z'  of   ." (Y)"      endof   \ 26
         'a'  of   ." (Y+)"     endof   \ 27
         'b'  of   ." (Y+x)"    endof   \ 28   1c
         'c'  of   ." #"        endof   \ 29   1d
\        'd'  of   ." R"        endof   \
\        'e'  of   ." (R)"      endof   \
\        'f'  of   ." (R+)"     endof   \
\        'g'  of   ." (R+x)"    endof   \
\        'h'  of   ." #"        endof   \
\        'i'  of   ." R"        endof   \
\        'j'  of   ." (R)"      endof   \
\        'k'  of   ." (R+)"     endof   \
\        'l'  of   ." (R+x)"    endof   \
\        'm'  of   ." #"        endof   \
\        'n'  of   ." R"        endof   \
\        'o'  of   ." (R)"      endof   \
\        'p'  of   ." (R+)"     endof   \
\        'q'  of   ." (R+x)"    endof   \
\        'r'  of   ." #"        endof   \
\        's'  of   ." R"        endof   \
\        't'  of   ." (R)"      endof   \
\        'u'  of   ." (R+)"     endof   \
\        'v'  of   ." (R+x)"    endof   \
\        'w'  of   ." #"        endof   \
\        'x'  of   ." R"        endof   \
\        'y'  of   ." (R)"      endof   \
\        'z'  of   ." (R+)"     endof   \

              DUP               EMIT
   ENDCASE    ;

: EMIT.r.(r).(r+).(r+x).mid
  CASE   'A'  of   ." T"        endof   \  1
         'B'  of   ." T"        endof   \  2
         'C'  of   ." T"        endof   \  3
         'D'  of   ." T"        endof   \  4
         'E'  of   ." Z"        endof   \  5
         'F'  of   ." Z"        endof   \  6
         'G'  of   ." Z"        endof   \  7
         'H'  of   ." Z"        endof   \  8
         'I'  of   ." W"        endof   \  9
         'J'  of   ." W"        endof   \ 10
         'K'  of   ." W"        endof   \ 11
         'L'  of   ." W"        endof   \ 12
         'M'  of   ." U"        endof   \ 13
         'N'  of   ." U"        endof   \ 14
         'O'  of   ." U"        endof   \ 15
         'P'  of   ." U"        endof   \ 16
         'Q'  of   ." V"        endof   \ 17
         'R'  of   ." V"        endof   \ 18
         'S'  of   ." V"        endof   \ 19
         'T'  of   ." V"        endof   \ 20
         'U'  of   ." X"        endof   \ 21
         'V'  of   ." X"        endof   \ 22
         'W'  of   ." X"        endof   \ 23
         'X'  of   ." X"        endof   \ 24
         'Y'  of   ." Y"        endof   \ 25
         'Z'  of   ." Y"        endof   \ 26
         'a'  of   ." Y"        endof   \ 27
         'b'  of   ." Y"        endof   \ 28   1c
         'c'  of   ." #"        endof   \ 29   1d
\        'd'  of   ." T"        endof   \
\        'e'  of   ." T"        endof   \
\        'f'  of   ." T"        endof   \
\        'g'  of   ." T"        endof   \
\        'h'  of   ." #"        endof   \
\        'i'  of   ." T"        endof   \
\        'j'  of   ." T"        endof   \
\        'k'  of   ." T"        endof   \
\        'l'  of   ." T"        endof   \
\        'm'  of   ." #"        endof   \
\        'n'  of   ." T"        endof   \
\        'o'  of   ." T"        endof   \
\        'p'  of   ." T"        endof   \
\        'q'  of   ." T"        endof   \
\        'r'  of   ." #"        endof   \
\        's'  of   ." T"        endof   \
\        't'  of   ." T"        endof   \
\        'u'  of   ." T"        endof   \
\        'v'  of   ." T"        endof   \
\        'w'  of   ." #"        endof   \
\        'x'  of   ." T"        endof   \
\        'y'  of   ." T"        endof   \
\        'z'  of   ." T"        endof   \

              DUP               EMIT
   ENDCASE    ;

\ : .R.    0  ;
: (R)    1  ;
: (R+x)  2  ;
: (R+)   3  ;

variable   ITEM.#

: MAKE.MACRO.INSTRUCTION.(Forth..cpu)    ITEM.#  OFF    CLS
  18 ( 39 )  0
  DO  7   0
      DO  18 ( 39 )   0         \  with '#' at the end
          DO     1st.'S'?  OFF     1st.'R'?  OFF     2nd.'S'?  OFF     2nd.'R'?  OFF
             i  HEAD  +  C@  'A' -  4 mod  0=
             k  HEAD  +  C@  'A' -  4 mod  0=  or   I  1a  <>  and
             if  CR     1  ITEM.#  +!
                 ."   ( "  ITEM.# @  BASE @ >R   DECIMAL  5 .R   R> BASE !   ."  )  "
             \   3 SPACES            K  HEAD  +  C@  EMIT.r.(r).(r+).(r+x)   2  SPACES
             \                       I  HEAD  +  C@  EMIT.r.(r).(r+).(r+x)
             \   2 SPACES                       'R'  EMIT   J  OPERATOR  +  C@  EMIT   'R'  EMIT
             \        ."   )     "
                      ." :  "        K  HEAD  +  C@  EMIT.r.(r).(r+).(r+x)   J  OPERATOR  +  C@  EMIT
                                     I  HEAD  +  C@  EMIT.r.(r).(r+).(r+x)
                 1e ?y               K  HEAD  +  C@  EMIT.r.(r).(r+).(r+x).mid
                 26 ?y               I  HEAD  +  C@  EMIT.r.(r).(r+).(r+x).mid
                 2f ?y          \  'R'  EMIT    J   OPERATOR  +  C@  EMIT     'R'  EMIT
                                     K  HEAD  +  C@  EMIT.r.(r).(r+).(r+x).end    J   OPERATOR  +  C@  EMIT
                                     I  HEAD  +  C@  EMIT.r.(r).(r+).(r+x).end
                 38 ?y              ';'  EMIT   ."   \ "  i  5 .r   j 5 .r   k 5 .r
             then
          LOOP
      LOOP
  LOOP   ;

\ MAKE.MACRO.INSTRUCTION.(Forth..cpu)


































\ ***************************************************************************************
: NEW-NUMBER' ( a -- )  COUNT  2dup  2>r  FIND-BUFFER PLACE FIND-BUFFER ?UPPERCASE COUNT SUPER-NUMBER? 0=
  if    2r>   cr    cr  2dup   type  _MESSAGE+HLAA   0=
        if    ?MISSING  2drop
        else  2drop
        then
  else  2r>   2drop
  then  ;

' NEW-NUMBER'   is   NUMBER

: symbol.'='  s" ="  ;
: symbol.'+'  s" +"  ;
: symbol.'-'  s" -"  ;
: symbol.'x'  s" x"  ;
: symbol.'o'  s" o"  ;
: symbol.'n'  s" n"  ;

: search.=+-xon... ( a1 l2 -- a2 l2 /0 )    2>r
  2r@    s" ="    search   if  [']  symbol.'='  >symbol.stack   2r>  2drop   -1  exit  else  2drop  then
  2r@    s" +"    search   if  [']  symbol.'+'  >symbol.stack   2r>  2drop   -1  exit  else  2drop  then
  2r@    s" -"    search   if  [']  symbol.'-'  >symbol.stack   2r>  2drop   -1  exit  else  2drop  then
  2r@    s" x"    search   if  [']  symbol.'x'  >symbol.stack   2r>  2drop   -1  exit  else  2drop  then
  2r@    s" o"    search   if  [']  symbol.'o'  >symbol.stack   2r>  2drop   -1  exit  else  2drop  then
  2r@    s" n"    search   if  [']  symbol.'n'  >symbol.stack   2r>  2drop   -1  exit  else  2drop  then
  2r>    0   ;

create  tib'        80 allot
: erase.tib'   tib' 80 erase  ;

: #define.w   2constant  ,  ;

variable  (.b)

variable tib',counter
:  tib'==blank   tib'   80  20 ( bl )  fill  ;  \  erase  ;

:  string>cfa' ( a l -- cfa' -1/0 )  STRING>CFA
   if  cfa>cfa'  dup    cfa'>nfa'
       if        drop  -1
       else      drop   0
       then
   else          drop   0
   then  ;

variable   n.bit.tinyForth             20 ( 16 ) n.bit.tinyForth !
: .S'(n.bit.tinyForth).original  ( n -- )        n.bit.tinyForth !
                         exi  ini    'C'  COMnEMIT  \  3 0  do   COMnKEY   drop   loop  \ msp430
   begin       COMnKEY   dup  emit   dup  '('  =   swap  'v' =   or
   until       COMnKEY        emit   COMnKEY  dup  emit  upc  base @  digit    COMnKEY   emit  \  ')'      (0F)
   if  n.bit.tinyForth @
       case    8 (  8 )  of    3 (  2+1 )  endof
              10 ( 16 )  of    5 (  4+1 )  endof
              20 ( 32 )  of    9 (  8+1 )  endof
              40 ( 64 )  of   11 ( 16+1 )  endof
       endcase
       * 0
       ?do     COMnKEY        emit
       loop    COMnKEY        emit
   else        drop
   then        cr    ;

: .S'(n.bit.tinyForth).new  ( n -- )      n.bit.tinyForth !
   cr   exi  ini    'C'  COMnEMIT  \  3 0  do   COMnKEY   drop   loop  \ msp430
   begin       COMnKEY   dup  emit    dup  'v'  =
        if     drop  s" 0.3"  count   nip   0   do   COMnKEY  emit  loop   'C'  COMnEMIT  -1   \  4E4th v0.3
        else   '('   =
        then
   until       COMnKEY        emit  ( length  10's )
               COMnKEY  dup   emit  upc ( base @ ) 10 ( 16 )  digit  COMnKEY   emit  \  ')'   ( length  1's )
   if  n.bit.tinyForth @
       case    8 (  8 )  of    3 (  2+1 )  endof
              10 ( 16 )  of    5 (  4+1 )  endof
              20 ( 32 )  of    9 (  8+1 )  endof
              40 ( 64 )  of   11 ( 16+1 )  endof
       endcase
       * 0
       ?do     COMnKEY        emit
       loop    COMnKEY        emit
   else        drop
   then        cr    ;

variable  new..s'?

:       .S'(n.bit.tinyForth)        new..s'?  @
  if    .S'(n.bit.tinyForth).new
  else  .S'(n.bit.tinyForth).original
  then  ;

: ns     new..s'?   on   ;
: os     new..s'?   off  ;
  ns
  os
\ -------------------------------------------------------------------
variable   n.bit.tinyForth    20 ( 32 ) n.bit.tinyForth !
: .S'(n.bit.tinyForth)  ( n -- )        n.bit.tinyForth !
                         exi  ini    'C'  COMnEMIT  \  3 0  do   COMnKEY   drop   loop  \ msp430
   begin       COMnKEY   dup  emit   dup  '('  =   swap  'v' =   or
   until       COMnKEY        emit   COMnKEY  dup  emit  base @  digit    COMnKEY   emit  \  ')'      ( 9 )
   if  n.bit.tinyForth @
       case    8 (  8 )  of    3 (  2+1 )  endof
              10 ( 16 )  of    5 (  4+1 )  endof
              20 ( 32 )  of    9 (  8+1 )  endof
              40 ( 64 )  of   11 ( 16+1 )  endof
       endcase
       * 0
       ?do     COMnKEY        emit
       loop    COMnKEY        emit
   else        drop
   then        3 ?y   ( cr )  ;
















: .S'(n.bit.tinyForth)   drop  exi  ini  'C'  COMnEMIT   COMnKEY emit ( cr )   COMnKEY emit ( cr ) begin  COMnKEY  dup  emit   0d  =  until  ;

special.for.swiftxForth? @     \ drop  0  
#if
: .S'(n.bit.tinyForth)   drop  exi  ini  'C'  COMnEMIT   COMnKEY emit ( cr )   COMnKEY emit ( cr )
                                                                                                   begin  COMnKEY  dup  emit   0d  =  until  cr  ;
#then










: A'   exi  ini  'A'  COMnEMIT      ;
: C' ( CR  ) 10   MS  n.bit.tinyForth  @    .S'(n.bit.tinyForth)    ;
: B'   exi  ini  'D'  COMnEMIT  ' CFA>CFA'  number>232    200 MS  'B'  COMnEMIT  ;
: B"   B'   C'    ;
: D'   exi  ini  'D'  COMnEMIT  BEGIN  bl word  count  string>number  UNTIL          number>232  ;
: D"   D'   C'    ;
: TF'  232." TF"  ;

: [A'] ( ----- )  'A'  COMnEMIT  ;  \  conflicting with (A')
: (D') ( n --- )  exi  ini        'D'  COMnEMIT   number>232  ;
: (B') ( a' -- )  exi  ini  (D')  'B'  COMnEMIT               ;


create   interpreter.buffer  80 allot
variable interpreter.buffer,counter
: >interpreter.buffer   interpreter.buffer,counter @  7f  u>  abort"  interpreter.buffer,counter overflow ??? "
   interpreter.buffer   interpreter.buffer,counter @  +   c!
                      1 interpreter.buffer,counter    +!  ;

: >interpreter.buffer   interpreter.buffer,counter @  7f  u>  abort"  interpreter.buffer,counter overflow ??? "
   dup 8 =
   if      drop   -1    interpreter.buffer,counter    +!  20  interpreter.buffer   interpreter.buffer,counter @  +   c!
   else                                                       interpreter.buffer   interpreter.buffer,counter @  +   c!
                   1    interpreter.buffer,counter    +!
   then  ;

:  interpreter.buffer==blank   interpreter.buffer   80  20 ( bl )  fill  ;  \  erase  ;

:  string>cfa' ( a l -- cfa' -1/0 )  STRING>CFA  if  cfa>cfa'  -1  else  drop  0  then  ;
\            1  2  3  4  5           D  U  P           +
\  20 20 20 31 32 33 34 35 20 20 20 44 55 50 20 20 20 2B 20 00 00 00 00 00 00

:  interpreter.target      interpreter.buffer==blank   interpreter.buffer,counter off
   begin   key  dup  1b  <>
   while   dup  0d = over 20 = or  if  drop 20  then  >interpreter.buffer
   repeat  drop  ;

variable  <esc>.pressed?

:  string>cfa' ( a l -- cfa' -1/0 )  STRING>CFA
   if     cfa>cfa'   dup  cfa'>nfa'
       if     drop   -1
       else   drop    0
       then
   else       drop    0
   then   ;

\            1  2  3  4  5           D  U  P           +
\  20 20 20 31 32 33 34 35 20 20 20 44 55 50 20 20 20 2B 20 00 00 00 00 00 00

:  interpret.string.in.buffer  ( -- )    exi   ini   <esc>.pressed? off
   interpreter.buffer==blank   interpreter.buffer,counter off    c'   2 spaces
   begin   key ( dup emit ) dup  0d =   over  1b =  or  not
   while   dup emit   >interpreter.buffer
   repeat  1b  =  if  <esc>.pressed?  on  then  \ c'
   interpreter.buffer  80
   begin     bl skip ( a1 l1 )  dup 0=  if  2drop  exit  then
             over >r   bl scan  ( a2 l2 ) over  r@ -  r> swap  ( a2 l2 a2 a2-a1 )  2dup  string>cfa' ( a2 l2 a2 l2 cfa' 1/0  )
      if     -rot      2drop     (D')  10 ms   'B' COMnEMIT
      else   number?   0=   if  ."   **** invalid target instruction ****"  2drop  0  else  drop  (D')  then
      then   dup       0=
   until     2drop   ( 400 ms c'  ???? no work )  ;

:  interpret.continuously   232." TF"  begin   interpret.string.in.buffer   <esc>.pressed? @   until   <esc>.pressed?  off  ;
:  ip   interpret.continuously ;
:  ic   interpret.continuously ;

variable  compiling.mode

create temp.word  100 allot
: +s"  '"' word  count  dup>r  r@  c,'  temp.word   swap   cmove   temp.word  r>  bounds  do  i c@  c,'  loop  ( here'.even.aligned )   here'.muliple.of.4.aligned  ;

: ."|'      op.code.of.lcall  @  16,'   cfa'.of.."|      @   2/  16,'   +s"  ;    \  2/  word address
: $"|'      op.code.of.lcall  @  16,'   cfa'.of.$"|      @   2/  16,'   +s"  ;
: abor."'   op.code.of.lcall  @  16,'   cfa'.of.abor."   @   2/  16,'   +s"  ;


: ."|'*     op.code.of.lcall  @  16,'   cfa'.of.."|*     @   2/  16,'   +s"  ;    \  2/  word address
: $"|'*     op.code.of.lcall  @  16,'   cfa'.of.$"|*     @   2/  16,'   +s"  ;
: abor."'*  op.code.of.lcall  @  16,'   cfa'.of.abor."*  @   2/  16,'   +s"  ;



variable  cfa'.of.type(camelforth)

: +s"+TYPE  '"' word  count  dup>r  r@  c,'  temp.word   swap   cmove   temp.word  r>  bounds  do  i c@  c,'  loop  here'.even.aligned  cfa'.of.type(camelforth)  @  16,'  ;

  : (IS"):    ( ."|'    )               cfa'.of.(IS")   @  32,'   +s"+TYPE  ;


  :  -->   ( n -- )   '  CFA>CFA'  2 +  @^  !^  ;   \    1234 --> VAR1
  :  <--   ( -- n )   '  CFA>CFA'  2 +  @^  @^  ;   \         <-- VAR1
  :  lit>            bl  word  count  string>number  if  else  -1  abort"  invalid number"  then  ;

variable   (+target)

: compile'.doLIT.####  ( n -- )   op.code.of.call  @  16,'  cfa'.of.dolit @  2/  16,'  16,' ;  \  rcall
: compile'.doLIT.####  ( n -- )   op.code.of.lcall @  16,'  cfa'.of.dolit @  2/  16,'  16,' ;  \  lcall


: _INTERPRET
   BEGIN   BL WORD DUP C@
   WHILE   SAVE-SRC FIND ?DUP
      IF      STATE @ =
         IF      COMPILE,
         ELSE    (+target) @
            if   dup
                 case  ['] 0  of  drop  0   -1  endof   \  0 is defined as instruction. by   0 CONSTANT 0
                       ['] 1  of  drop  1   -1  endof   \  1 is defined as instruction. BY   1 CONSTANT 1
                       0  swap
                 endcase
                 if     compile'.doLIT.####
                 else   EXECUTE ?STACK
                 then
            else        EXECUTE ?STACK
            then
         THEN
      ELSE    NUMBER NUMBER,
      THEN    ?UNSAVE-SRC
   REPEAT  DROP ;

' _INTERPRET  is  INTERPRET

defer _...

: _NUMBER,(+target)     DOUBLE? 0=
                IF      DROP
                THEN    STATE @
                IF      DOUBLE?
                        IF      SWAP  [COMPILE]  LITERAL
                        THEN          [COMPILE]  LITERAL
                else    (+target) @   if  _...   then
                THEN    ;

: _NUMBER,(+target)     DOUBLE? 0=
                IF      DROP
                THEN    STATE @
                IF      DOUBLE?
                        IF      SWAP  [COMPILE]  LITERAL
                        THEN          [COMPILE]  LITERAL
                else    (+target) @
                   if   compile'.doLIT.####
                   then
                THEN    ;


: _FLOAT-NUMBER,(+target)        FLOAT? 0=
                IF      _NUMBER,(+target)
                ELSE    STATE @
                        IF      [COMPILE]  FLITERAL
                        THEN
                THEN    ;

' _FLOAT-NUMBER,(+target)  is   NUMBER,



: Rb  0b  ;   : Rc 0c  ;  : Rd 0d  ;   : Re  0e  ;   : Rf  0f  ;

:{ t=(w)  t  w    r=(r)    };
:{ t:w    t  w    r:r      };
:{ t=w    t  w    r=r      };
:{ w=s    w  sp   r=(r)    };
:{ w=t    w  t    r=r      };
:{ s=w    sp w    (r)=r    };
:{ t=(w+) t  w    r=(r+)   };
:{ w=(w)  w  w    r=(r)    };

:{ s'=w   sp  4 w (r+#)=r  };   \  mpe407
:{ s''=w  sp  8 w (r+#)=r  };
:{ s'''=w sp 0c w (r+#)=r  };
:{ s''''=w sp 10 w (r+#)=r  };  \ never used

:  if'w=0    w r:0  here'  here'  z=1? ;

:{  pc=w  pc w    r=r      };


cortex.m0?  @
#if
:{  push.w   w    push.r   };
:{  pop.w    w    pop.r    };
#else
:{  push.w   w    push.r   };
:{  pop.w    w    pop.r    };

: {pop.w  W rp 4 R=(R+#),p };    \ ???
#then

\ :{  rla.w    w w    r+r    };  \ ????????????
:{  w=0      w    r=0      };
:{  w+2      w    r+2      };

: r-4        4    r-#       ;
: r+4        4    r+#       ;
:{  w+4      w    r+4      };

:{  call.next     here'  4 + call.#16`  };   \ ????
:{  call.next+8   here'  8 + call.#16`  };   \ ????
:{  call.next+12  here' 0c + call.#16`  };   \ ????
:{  call.next+16  here' 10 + call.#16`  };   \ ????


: fsp    ( 0 )      sp ( 5 )  ;    \ r0 : r1 = 00  50    Rfsp = R0 = 0050
: frp               rp ( 6 )  ;

: R=0?    r:0       z=1?   ;
: A=0?    T         R=0?   ;

: A+      T         R+1    ;
: A-      T         R-1    ;
: A/      T         R/     ;
: R=A     T         R=R    ;
: A=R     T   SWAP  R=R    ;
: A=0     T         R=0    ;
: A=#     T   SWAP  R=#    ;
: A+#     T   SWAP  R+#    ;
: A-#     T   SWAP  R-#    ;
: A+r     T   SWAP  R+r    ;
: A-r     T   SWAP  R-r    ;

: An#     T   SWAP  Rn#    ;
: Ao#     T   SWAP  Ro#    ;
: Ax#     T   SWAP  Rx#    ;


: A+#+c   T   SWAP  R+#+c  ;
: A-#-c   T   SWAP  R-#-c  ;


: a=(0)   T   fsp   r=(r)  ;
: a=(1)   T   frp   r=(r)  ;

: IF'T=0          T   r:0   here'  dup  z=0?  ;
: IF'T<>0         T   r:0   here'  dup  z=1?  ;


: RxFFFFFFFF  R/  ;

: Rx-1        R/  ;

:{ s=w        sp  w     (r)=r   };   \  (sp)=W
:{ w=s        w  sp     (r)=r   };   \  (sp)=W
\ :{ W=S        sp  0  w  (r+0)=r };   \  (sp)=W
\ :{ S=W        w  sp  0  r=(r+0) };   \  (sp)=W
:{ w+              w     r+1   };
:{ w+1             w     r+1   };
:{ -w         w  Rx-1    w+    };

:  w+#        w  swap    r+#    ;

:{ SP+             fsp   R+4   };
:{ SP-             fsp   R-4   };
:{ sp+4            fsp   r+4   };

mpe407?  @
#if
:{ sp-4            1f36  16,'  };
#else
:{ sp-4            fsp   r-4   };
#then

:  r0=4    0  4  r=#  ;
cortex.m0?  @
#if    \  : r+#  over  7 >  if   0  swap  r=#   0  r=r   then  #else   #then
:{ rp+    r0=4     rp 0   R+R   };
:{ rp-    r0=4     rp 0   R-R   };
:{ rp+4   r0=4    frp 0   r+r   };
:{ rp-4   0 frp r=r   0 4 r-#   frp 0 r=r };
#else
:{ rp+              rp   R+4   };
:{ rp-              rp   R-4   };
:{ rp+4            frp   r+4   };
:{ rp-4            frp   r-4   };
#then

\ : cell  avr328?  @  if  2  exit  then  cortex.m4? @  if  4  exit  then
\  -1 abort"  ****  which system? 16 or 32 bit system ****"  ;
: cell  4  ;

:{ SP+         sp    cell   R+#   };
:{ SP-         sp    cell   R-#   };

: R+(R)    w  swap  R=(R)  w  R+R   ;
: R-(R)    w  swap  R=(R)  w  R-R   ;
: Rx(R)    w  swap  R=(R)  w  RxR   ;
: Ro(R)    w  swap  R=(R)  w  RoR   ;
: Rn(R)    w  swap  R=(R)  w  RnR   ;


cortex.m0?  @
#if
            \  :  r+r   2dup  8 <  swap  8  <  and  if   r+r   else  dup 0 r+#   r+r+c   then  ;
               :  R+(R)         W  SWAP  R=(R)   W       R+R   ;
               :  R+(R+)        DUP>R    R+(R)   R>  4   R+#   ;
               :  r+#   over  7 >  if    0 swap r=#  0 r+r  else  r+#  then  ;


               :  12--112   ( 1 2 -- 1 1 2 )  >r  dup  r>  ;

               :  R+r   3r3r?  if  12--112     r=r+r  exit  then  r+r  ;


:{ S=T          fsp  t    (R)=R };
:{ T=S          t   fsp   R=(R) };
\  T+S          t   fsp   W SWAP  R=(R)  w 0 r+#  W R+R+c  };
:{ T+S          w fsp R=(R)   t w r+r  };


:{ T-S          t   fsp   R-(R) };
:{ TnS          t   fsp   Rn(R) };
:{ ToS          t   fsp   Ro(R) };
:{ TxS          t   fsp   Rx(R) };
#else
:{ S=T          fsp  t    (R)=R };
:{ T=S          t   fsp   R=(R) };
:{ T+S          t   fsp   R+(R) };
:{ T-S          t   fsp   R-(R) };
:{ TnS          t   fsp   Rn(R) };
:{ ToS          t   fsp   Ro(R) };
:{ TxS          t   fsp   Rx(R) };


 :  R+(R+)        DUP>R    R+(R)   R>  4   R+#   ;
#then


:{ T<->S    w=t    t=s   s=w    };
:{ t-1           t   r-1        };








:{ t-t-c     t   t   r-r-c      };


:{ t=s'   t  sp  4  r=(r+#)     };
:{ s'=Y  sp  4   Y (r+#)=r      };   \ cortex m4

:{ t-w        t  w r-r          };
:{ w-t        w  t r-r          };
:{ w:t        w  T R:R          };
:{ w=(sp+)    w  sp   r=(r+)    };

:{ w=(t)      w  T R=(R)        };
:{ (w)=t      w  t (R)=R        };


:{ (T)=T      T  T (R)=R        };
:{ T=(T)      T  T R=(R)        };
:{ {@}        T  T R=(R)        };
:{ {c@}             7836  16,'  };  \     T  T R=(R)        };
:{ nop                00  16,'  };
:{ t=(w)      T  w R=(R)        };
:{ (t)=w      T  w (R)=R        };

:{ T=0/       T 0  r=#/         };
:{ T=-1       T=0/              };
:{ T=0             A=0          };
:{ T:0        T    r:0          };
:{ T+              A+           };
:{ T-              A-           };
:{ {1-}       t    1   r-#      };
:{ -A         A/   A+           };
:{ -T              -A           };

   :{    s=R0   6038  16,'  };
   :{    s=R1   6039  16,'  };

   :{   s'=R0   6078  16,'  };
   :{   s'=R1   6079  16,'  };  \  4  1  (sp+#)=r   ;.
   :{   R0=s    6838  16,'  };
   :{   R0=s'   6878  16,'  };

   :{   R1=s    6839  16,'  };
   :{   R1=s'   6879  16,'  };



:{  nip>r1,T       { R1, T, } sp  ldm   };
:{ -R0        0 0 0  r=#-r  };
:{ -s   r0=s  -r0  s=r0     };
:{ -s'  r0=s' -r0  s'=r0    };


cortex.m0?  @
#if
:{  PUSH.A     T     PUSH.r      };
:{  push.w     w     push.r      };
:{  POP.A      T     POP.r       };
#else
:{  PUSH.A     T    PUSH.r      };
:{  push.w     w    push.r      };
:{  POP.A      T    POP.r       };
#then



cortex.m0? @
#if

:{  push.r0      0  push.r  };
:{  push.r1      1  push.r  };
:{  push.r2      2  push.r  };
:{  push.r3      3  push.r  };
:{  push.r4      4  push.r  };
:{  push.r5      5  push.r  };
:{  push.r6      6  push.r  };
:{  push.r7      7  push.r  };

:{  push.r14    0e  push.r  };


:{  pop.r0       0  pop.r   };
:{  pop.r1       1  pop.r   };
:{  pop.r2       2  pop.r   };
:{  pop.r3       3  pop.r   };
:{  pop.r4       4  pop.r   };
:{  pop.r5       5  pop.r   };
:{  pop.r6       6  pop.r   };
:{  pop.r7       7  pop.r   };

:{  pop.rf      0f  pop.r   };

:{  push.t   t  2^n   b400  +  16,'    };
:{  pop.t    t  2^n   bc00  +  16,'    };
:{  pop.w    w  2^n   bc00  +  16,'    };


#else
:{  push.r0      0  push.r  };
:{  push.r1      1  push.r  };
:{  push.r2      2  push.r  };
:{  push.r3      3  push.r  };
:{  push.r4      4  push.r  };
:{  push.r5      5  push.r  };
:{  push.r6      6  push.r  };
:{  push.r7      7  push.r  };
:{  push.r8      8  push.r  };
:{  push.r9      9  push.r  };
:{  push.r10    0a  push.r  };
:{  push.r11    0b  push.r  };
:{  push.r12    0c  push.r  };
:{  push.r13    0d  push.r  };
:{  push.r14    0e  push.r  };
\   push.r15    0f  push.r  };
:{  push.ra     0a  push.r  };
:{  push.rb     0b  push.r  };
:{  push.rc     0c  push.r  };
:{  push.rd     0d  push.r  };
:{  push.re     0e  push.r  };
\   push.rf     0f  push.r  };

:{  pop.r0       0  pop.r   };
:{  pop.r1       1  pop.r   };
:{  pop.r2       2  pop.r   };
:{  pop.r3       3  pop.r   };
:{  pop.r4       4  pop.r   };
:{  pop.r5       5  pop.r   };
:{  pop.r6       6  pop.r   };
:{  pop.r7       7  pop.r   };
:{  pop.r8       8  pop.r   };
:{  pop.r9       9  pop.r   };
:{  pop.r10     0a  pop.r   };
:{  pop.r11     0b  pop.r   };
:{  pop.r12     0c  pop.r   };
:{  pop.r13     0d  pop.r   };
:{  pop.r14     0e  pop.r   };
\   pop.r15     0f  pop.r   };
:{  pop.ra      0a  pop.r   };
:{  pop.rb      0b  pop.r   };
:{  pop.rc      0c  pop.r   };
:{  pop.rd      0d  pop.r   };
:{  pop.re      0e  pop.r   };
:{  pop.rf      0f  pop.r   };

:{  push.t   t  2^n   b400  +  16,'    };
:{  pop.t    t  2^n   bc00  +  16,'    };
:{  pop.w    w  2^n   bc00  +  16,'    };


#then

:{ T/         A/               };
: if'z=1     here'  here' z=0?  ;

:{ {0=}       t-1  t-t-c       };

:{ {not}      {0=}             };
:{ {-T}      -T                };

: r-(r+)    dup>r   r-(r)  r> r+  ;
:{ {over-}    T  sp  r-(r)     };  \ ( s t -- s t-s )
:{ {swap-}    T  sp  r-(r+)    };  \ ( s t -- t-s   )
:{ {u>}   w=(sp+)  t:w  t-t-c  };
:{ {u<}   w=(sp+)  w:t  t-t-c  };
:{ {u<=}        {u>}   {not}   };  \ ????
:{ {u>=}        {u<}   {not}   };
:{ {negate}   {-T}             };

: t=0      t  t  r-r  ;
: r1=t     1  t  r=r  ;
: -r0         0  -r   ;



                                \  :   TnT,tst    T T  RnR,tst  ;
                                   :   if'-   if'n=1  ;


                                   :{  {DNEGATE}                  \ cfa=     5080
  (  00005080  38 68             )                  R0=s
  (  00005082  31 00             )                  R1=T
  (  00005084  B6 1B             )                  T=0
  (  00005086  40 42             )                  -r0     \  r0=0-r0
  (  00005088  8E 41             )         418e 16,'  \  t  1   r-r-c   \  t-r1-c
  (  0000508A  38 60             )                  s=R0
  (  0000508C  70 47             )                  };



:{  {<>}  w=(sp+)  w-t  -w  t-t-c  };

:  rla.r      dup  1  r=r<<#  ;

:{ rla.t      T  rla.r    };

:{ {2*}       rla.t       };   \  ????
:{ {2/}       t  rra.r    };

 variable   nip=sp+?      nip=sp+?  on

:{ {nip}     sp+4  };  :{ sp+   {nip}   };  :{ {-nip}   sp-4 };  :{ sp-  {-nip}  };  \ sp+  sp r+4   \  nip <---> pin    special ???    -nip <--> -rot
:{ {nip}r    rp+4  };  :{ rp+   {nip}r  };  :{ {-nip}r  rp-4 };  :{ rp-  {-nip}r };  \ rp+  rp r+4


:{ {nip}     sp+4  };  :  sp+   {nip}    ;  :{ {-nip}   sp-4 };  :  sp-  {-nip}   ;  \ sp+  sp r+4   \  nip <---> pin    special ???    -nip <--> -rot
:{ {nip}r    rp+4  };  :  rp+   {nip}r   ;  :{ {-nip}r  rp-4 };  :  rp-  {-nip}r  ;  \ rp+  rp r+4


: Rx(R+)        dup>r   Rx(R)   r>  4  R+#  ;
: Ro(R+)        dup>r   Ro(R)   r>  4  R+#  ;
: Rn(R+)        dup>r   Rn(R)   r>  4  R+#  ;

:{  {AND}       T  fsp  Rn(R+)             };
:{  {OR}        T  fsp  Ro(R+)             };
:{  {XOR}       T  fsp  Rx(R+)             };
:{  {=}         w=(sp+) t-w  t-1  t-t-c    };
:{  {+}         T  fsp  R+(R+)             };
:{  {swap-}     T-s  {nip}                 };   \ :{ {swap-}      T  fsp  R-(R+)             };   ?????
:{  {drop}         { T,  } sp     ldm      };

:{  {drop}    6b04f857  32,'  };  \ 57 F8 04 6B       )  T=(sp+4),w   \ new stm32f407eForth720

\  228 0000029C F851 5B04       LDR              R5,[R1],#4   \ from stm32F407eF720

:{ {2drop}      { r0, T, } sp    ldm       };
:{  nip>r0      sp  { r0,     }  ldm       };
:{  nip>r0,r1   sp  { r0, r1, }  ldm       };
:{  nip>r0,t    sp  { r0, t,  }  ldm       };
:{  {negate}    t  t  0    rsb_r,r,#       };
:{  {negate}    4276 16,'  };  \   t  t  0    rsb_r,r,#     }; 


:{  {invert}    t  t       r=r/            };
:{ {dup}        sp-4        S=T            };       \  something like push
:{ {dup}...........sp-4,s=t 6d04f847 32,'  };       \  === {dup} mecrispCMxForth
:{ {0=}        T-1    t-t-c                };
:{ {swap}      T<->S                       };
\ :{ {over}      w=s     {dup}    t=w      };
:{ {over}    {dup}  687E  16,'  };




:{  {r>drop}   {nip}r          };                  \  T=R  T=(frp)   0a  frp  r=(-r)
:{  t=(rp)     t  rp   r=(r)   };
:{  {>r}       push.t  {drop}  };
:{  {r>}       {dup}   pop.t   };
:{  {r@}       {dup}   t=(rp)  };
:{  {dup>r}    push.t          };
:{  {r>drop}   rp   4  r+#     };  \ ????  b001 16,'

: t=#   t  swap  r=#   ;
: t=#/  t  swap  r=#/  ;

:   ...   {dup}  t=#   ;
:{ {0}    0  ...  };
:{ {1}    1  ...  };
:{ {2}    2  ...  };
:{ {3}    3  ...  };
\ :{ {-1}  -1  ...  };
:{  {-1}   {dup} t=0/  };







: (#)x#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)x#   ==>  (e000ed88)xF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Rx#       \  r1x#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)o#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)o#   ==>  (e000ed88)oF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Ro#       \  r1o#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)n#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)n#   ==>  (e000ed88)nF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r>    Rn#       \  r1n#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)=#    ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)=F00000
  0  swap  r=#       \  r0=a'
  1  r>    r=#       \  r1=#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)=#/   ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)=F00000
  0  swap  r=#       \  r0=a'
  1  r>    r=#/      \  r1=#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)=!#   (#)=#/ ;

: (#)|=#   ( a' # -- )  >r      \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)=F00000
  0  swap  r=#       \  r0=a'
  1  r>    r=#       \  r1=#
  0  1     (R)oR  ;  \  (R0)oR1

\  R=(#)     dup   1000  u<   if    R=(#)   else   Y  swap   R=#    Y  R=(R)  then  ;
:  R=(#)                                           Y  swap   R=#    Y  R=(R)        ;

: (#)x(#)  ( #1 #2 -- )
  1  swap   R=(#)    \   R1=(#2)
  0  swap   R=#      \         R0=#1
  1  0      Rx(R)    \   R1=(#2)o(#1)
  0  1      (R)=R  ; \ (#1)=(#2)o(#1)

: (#)o(#)  ( #1 #2 -- )
  1  swap   R=(#)    \   R1=(#2)
  0  swap   R=#      \         R0=#1
  1  0      Ro(R)    \   R1=(#2)o(#1)
  0  1      (R)=R  ; \ (#1)=(#2)o(#1)

: (#)n(#)  ( #1 #2 -- )
  1  swap   R=(#)    \   R1=(#2)
  0  swap   R=#      \         R0=#1
  1  0      Rn(R)    \   R1=(#2)o(#1)
  0  1      (R)=R  ; \ (#1)=(#2)o(#1)

comment:
: #>>#      ( # # -- )    3 rot r=#   3 swap R>>#    ;
: #<<#      ( # # -- )    3 rot r=#   3 swap R<<#    ;
: #,a>>#    ( # # -- )    3 rot r=#   3 swap R,a>>#  ;
: #<<<#     ( # # -- )    3 rot r=#   3 swap R<<<#   ;

: Rx#>>#    ( r # # -- )  #>>#    3 RxR  ;
: Rx#<<#    ( r # # -- )  #<<#    3 RxR  ;
: Rx#,a>>#  ( r # # -- )  #,a>>#  3 RxR  ;
: Rx#<<<#   ( r # # -- )  #<<<#   3 RxR  ;

: Ro#>>#    ( r # # -- )  #>>#    3 RoR  ;
: Ro#<<#    ( r # # -- )  #<<#    3 RoR  ;
: Ro#,a>>#  ( r # # -- )  #,a>>#  3 RoR  ;
: Ro#<<<#   ( r # # -- )  #<<<#   3 RoR  ;

: Rn#>>#    ( r # # -- )  #>>#    3 RnR  ;
: Rn#<<#    ( r # # -- )  #<<#    3 RnR  ;
: Rn#,a>>#  ( r # # -- )  #,a>>#  3 RnR  ;
: Rn#<<<#   ( r # # -- )  #<<<#   3 RnR  ;

: R=#>>#    ( r # # -- )  #>>#    3 R=R  ;
: R=#<<#    ( r # # -- )  #<<#    3 R=R  ;
: R=#,a>>#  ( r # # -- )  #,a>>#  3 R=R  ;
: R=#<<<#   ( r # # -- )  #<<<#   3 R=R  ;

: R-#>>#    ( r # # -- )  #>>#    3 R-R  ;
: R-#<<#    ( r # # -- )  #<<#    3 R-R  ;
: R-#,a>>#  ( r # # -- )  #,a>>#  3 R-R  ;
: R-#<<<#   ( r # # -- )  #<<<#   3 R-R  ;

: R=#>>#    ( r # # -- )  #>>#    3 R=R  ;
: R=#<<#    ( r # # -- )  #<<#    3 R=R  ;
: R=#,a>>#  ( r # # -- )  #,a>>#  3 R=R  ;
: R=#<<<#   ( r # # -- )  #<<<#   3 R=R  ;



: (#)x#<<# ( a' # -- )  >r  >r    \  example:  e0000ed88  f00000 3 (#)x#<<#   ==>  (e000ed88)xF00000<<3
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r> r> Rx#<<#    \  r1x#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)o#<<# ( a' # -- )  >r  >r    \  example:  e0000ed88  f00000 (#)o#   ==>  (e000ed88)xF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r> r> Ro#<<#    \  r1o#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)n#<<# ( a' # -- )  >r  >r    \  example:  e0000ed88  f00000 (#)n#   ==>  (e000ed88)xF00000
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r> r> Rn#<<#    \  r1n#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)=#<<# ( a' # -- )  >r  >r    \  example:  e0000ed88  f00000 (#)=#   ==>  (e000ed88)xF00000<<3
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r> r> R=#<<#    \  r1=#
  0  1     (r)=r  ;  \  (r0)=r1

: (#)-#<<# ( a' # -- )  >r  >r    \  example:  e0000ed88  f00000 (#)-#   ==>  (e000ed88)-F00000<<3
  0  swap  r=#       \  r0=a'
  1  0     r=(r)     \  r1=(r0)
  1  r> r> R-#<<#    \  r1-#
  0  1     (r)=r  ;  \  (r0)=r1

:{  {1+}      T+              };
:{  {2+}      t      r+2      };   \   T+     T+       };
:{  {2-}      t      r-2      };   \   T+     T+       };
:{  {-T}      -T              };
:{  {-}       t  fsp  r-(r+)  {negate}  };

comment;





  :   loop.increment    80000000  ;

          :{ pc=lr  4770  16,'                       };   \       lr    bx.r  =====  rf=re
          :{ ret'   pc=lr       RESOLVE.DATA.PENDED  };   \  0e ( lr )  bx.r  =====  rf=re

          : ret     bd00  16,'  RESOLVE.DATA.PENDED   ;   \  0e  pop
          : ret'    pc=lr       RESOLVE.DATA.PENDED   ;   \

\ : here.var     cp.var   @  ;
\ : var          insert{  4 allot.var   -4 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  0  here.var  32!' 4 allot.var  }insert  ;
\ : var                   4 allot.var   -4 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  0  here.var  32!' 4 allot.var  ret'  ;
\ : var                   4 allot.var   -4 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  4 allot.var  0  here.var  32!'  ret'  ;


\ variable  ram.offset      10000   ram.offset  !
: cp0.var      20000600           ram.offset  @  +  ;   \ ?????????????  ram area
  variable     var.max.addr    20000FF0  ram.offset  @  +   var.max.addr  !
  variable     cp.var          cp0.var    cp.var        !
: here.var     cp.var @  ;
: allot.var    cp.var @    var.max.addr @  u>  if  ." **** too many variables ****  more than "  var.max.addr  . abort" " then   cp.var +!   ;
: var          insert{  4 allot.var   -4 allot.var   cp.var @ org   t:  4 allot.var  }insert  ;
: variable'    insert{  4 allot.var   -4 allot.var   cp.var @ org   t:  4 allot.var  }insert  ;
: create'      insert{  4 allot.var   -4 allot.var   cp.var @ org   t:               }insert  ;


: create' 4 allot.var   -4 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#                                  ret'  ;

  :  var    4 allot.var   -4 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  4 allot.var  0  here.var  32!'  ret'  ;
  : 2var    8 allot.var   -8 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  8 allot.var  0. here.var  64!'  ret'  ;

\    in mecrispForth  it needs a preceeding number.
\ :  var    4 allot.var   -4 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  4 allot.var     here.var  32!'  ret'  ;
\ : 2var    8 allot.var   -8 allot.var  ( cp.var @ org )  t:  {dup}  t here.var 4 +  r=#  8 allot.var     here.var  64!'  ret'  ;
       
:{ {1+}      T+              };
:{ {2+}      t      r+2      };   \   T+     T+       };
:{ {2-}      t      r-2      };   \   T+     T+       };
:{ {-T}      -T              };
:{ {-}       t  fsp  r-(r+)  {negate}  };

:{ {doLIT}   {dup}    w pop.r   t=(w+)    pc w r=r  };





:  Y=lr     y   lr  r=r    ;
:  r0=y     0   y   r=r    ;
:  R0n1/    0   1   Rn#/   ;
:  T=(R0)   T   0   r=(r)  ;
:  Y+4      Y   4   R+#    ;
:  pc=Y     pc  Y   R=R    ;

:{  {doLIT}               \ cfa= 200019B4
  (  200019B4  04 3F             )       {dup}   \  sp-4
  (  200019B6  3E 60             )               \  (sp+0)=T
  (  200019B8  74 46             )                  Y=lr
  (  200019BA  20 00             )                  R0=Y
  (  200019BC  20 F0 01 00       )                  R0n1/
  (  200019C0  06 68             )                  T=(R0)
  (  200019C2  04 34             )                  Y+4
  (  200019C4  A7 46             )                  pc=Y
  (  200019C6  70 47             )                  };


:{  {doUSER}               \ cfa= 200019B4
  (  200019B4  04 3F             )       {dup}   \  sp-4
  (  200019B6  3E 60             )               \  (sp+0)=T
  (  200019B8  74 46             )                  Y=lr
  (  200019BA  20 00             )                  R0=Y
  (  200019BC  20 F0 01 00       )                  R0n1/
  (  200019C0  06 68             )                  T=(R0)
  (  200019C2  04 34             )                  Y+4     nop
  (  200019C4  A7 46             )                  pc=Y
  (  200019C6  70 47             )                  };





\  {doUSER}  {dup}     w pop.r   t=(w+)    pc w r=r  };
 :{ {doUSER}  w pop.r    {dup}   t=(w+)    pc w r=r  };
\ :.  doUSER'  doUSER   bl.  word.  count.  string>number  0=.  abort". *** invalid number ***"  32 ,'  ;.
\ :.  doUSER'  doLIT    bl.  word.  count.  string>number  0=.  abort". *** invalid number ***"  32 ,'  ;.
\ :{ ip=(rp+)  4135  16,'      };
\ :{ push.ip   1205  16,'      };
\ :{ ip=W      4605  16,'      };

: (R)=(R+)     dup>r   w  swap  R=(R)   w (R)=R  ;

: ,^           flip  ,'  ;    \ 16 bit eForth system

   : temp   4  ;
   : tempH  4  ;
   : tempL  5  ;

variable  head.offset     5000  head.offset  !
variable  CP'(head)    \  cp0'  head.offset  @   +    CP'(head)  !

:  HERE'(head)   CP'(head)   @  ;
:  org(head)     HERE'(head) !  ;
:  ALLOT'(head)  CP'(head)  +!  ;
:  8,'(head)     HERE'(head)  C!'  1 ALLOT'(head)  ;
:  here'(head).4.aligned      HERE'(head)  3  +  ffffFFFC  and  org(head)  ;

: cmove*  ( from to* len -- )  0  do  over  i + c@   over i + c!'  loop   2drop  ;

: ,call.cfa' ( cfa' -- )  dup  @  here' - abs 0fffff >
  if     @  0  10000 um/mod swap 1+ 0 swap R=#16  ?dup
      if    0  swap Rt=#
      then  0  call_r   exit
  then   @  24rel.check.cm4   _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;




: ,call.cfa' ( cfa' -- )  dup>r  here' - abs 0fffff >
  if     r>  0  10000 um/mod swap 1+ 0 swap R=#16  ?dup
      if     0  swap Rt=#
      then   0  call_r   exit
  then   r>     24rel.check.cm4   _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;




\ variable  t:state?

: T:new   t:state?  on
          mecrisp4F120?  @   mecrisp32F407?  @   or  drop  0
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @                  32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   mecrisp32F429/407? @  if   HERE'.EVEN.ALIGNED   then
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          last'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
          DOES>  @  ,call.cfa'   ;

: nfa>lfa+nfa+cfa.array  ( -- )  last  @  ( from )  dup  nfa-count  nip   ( len )
  lfa+nfa+cfa.array  lfa+nfa+cfa.COUNTER  @  +  10  +  ( to )  swap  cmove      head.spacing  @  20  -  lfa+nfa+cfa.COUNTER  +!  ;  \ nfa'

: T:new*4   HERE'.MULIPLE.OF.4.ALIGNED    \  with.head?  on
          t:state?  on
          mecrisp4F120?  @   mecrisp32F407?  @   or    DROP  0
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @                  32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
       \  nfa>lfa+nfa+cfa.array
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   mecrisp32F429/407? @  if   HERE'.MULIPLE.OF.4.ALIGNED    ( HERE'.EVEN.ALIGNED )  then
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          last'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
\         LAST'  @  LAST'(adjacent)  @  LAST.NFA'(HEAD).LENGTH  @  1+  cmove' \ to get lower case characters
          DOES>  @  ,call.cfa'   ;

\           dup  @  here' - abs 0fffff > if  @  0  10000 um/mod swap 1+ 0 swap R=#16  ?dup
\                   if 0 swap Rt=# then  0  call_r   exit   then
\                   @    24rel.check.cm4    _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;


: T:new*4(label)     with.head?  off   T:new*4   with.head?  on  ;


\ 0x12345678  gcc:  name

: label'(gcc)   ( a' -- )   REMAP>0?  @  if  F7FFFFFe  and  then  dup  \  for gcc ARM
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!  r@  11 +  swap  cmove
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +   !  R>   >IN  !
  create     ,
  does>      @    ;

: label'(gcc)   ( a' -- )   REMAP>0?  @  if  F7FFFFFe  and  then  dup  \  for gcc ARM
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!  r@  11 +  swap  cmove
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +   !  R>   >IN  !
  create     ,
  does>      @    RCALL_#24/CALL_R4    ;

: label'(gcc)++   ( a' -- )   REMAP>0?  @  if  F7FFFFFe  and  then  dup  dup  \  for gcc ARM
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!  r@  11 +  swap  cmove
  cfa'>nfa'(eF)
  if                   dup  r@   8   +   !   \    nfa'
        4-  32@'            r@   0   +   !   \   (lfa')=former.nfa'
  then      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>        head.spacing  @  10  - ( 70 )  +   !  R>   >IN  !
  create     ,
  does>      @    ;

: gcc:    label'(gcc)    ;

: gcc:++  label'(gcc)++  ;

headless.tF(ice40)?  @
#if
: L:   ( -- )   here'  REMAP>0?  @  if  FFFe  and  then  dup   \  for gcc ARM
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10  +  c!           \ length
                            r@  11  +  swap  cmove  \ name
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( f0 ) +   !           \ pcfa'
  R>   >IN  !
  create     ,
  does>      @   ,call(ice40)  ;     \  2/  4000  or  16,'  ( ,call ) ;

\ : here'.align   ( here' -- )   here'  1+ fffe  and  cp'  !  ;

: ,call(ice40)  ( CFA' -- )    2/  4000 ( op.code.of.CALL.of.ice40 )  +  16,'  ;

\ variable  cfa'(LNC)

: t:(ice40)
  here'  REMAP>0?  @  if  FFFe  and  then  dup   \  for gcc ARM
\ create
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
                       here'                    r@         !   \  lfa'  -->  lfa*
                       r@  head.spacing @ -  @  r@   8  +  !   \ (lfa') -->  lfa*+8   ????
                       here'  2+                r@  10  +  !   \  nfa'    \  ????  to be deleted
  BL  WORD  COUNT      dup  r@  10   +  c!      r@  11  +  swap  cmove    \  place
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +           dup cfa'(LNC) !       !  R>  >IN  !      drop
  create      here'.align  here'  dup   cp'  !   >r
              last' @  2-  ffff   and   16,' ( content of LFA' )       r>  2+  last'  !   ( current last' )
              last  @  nfa-count  dup>r  c,' ( length )  here'  r@  cmove??  r>  allot'  here'.align
              here'  cfa'(LNC)  @  !
              here'    ( cfa' )   ,
  does>       @    ,call(ice40)   ;     \  2/  4000  or  16,'  ( ,call ) ;


: t:(ice40)'
  here'   REMAP>0?  @  if  FFFe  and  then
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
                       here'                    r@         !   \  lfa'  -->  lfa*
                       r@  head.spacing @ -  @  r@   8  +  !   \ (lfa') -->  lfa*+8   ????
\ BL  WORD  COUNT      dup  r@  10   +  c!      r@  11  +  swap  cmove    \  place
  BL  WORD  dup  c@ 1+ ( from length )          r@  10  +  ( destination )   place
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +          dup cfa'(LNC) !       !       R>  >IN  !
  create      here'.align  here'  dup   cp'  !  >r
              last' @  2-  ffff   and   16,' ( content of LFA' )       r>  2+  last'  !   ( current last' )
              last  @  nfa-count  dup>r  c,' ( length )  here'  r@  cmove??  r>  allot'  here'.align
              here'  cfa'(LNC)  @  !
              here'     ( cfa' )   ,
  does>       @     ,call(ice40)   ;     \  2/  4000  or  16,'  ( ,call ) ;

: t:(ice40)'
  here'   REMAP>0?  @  if  FFFe  and  then
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
                       here'                    r@         !   \  lfa'  -->  lfa*
                       r@  head.spacing @ -  @  r@   8  +  !   \ (lfa') -->  lfa*+8   ????
\ BL  WORD  COUNT      dup  r@  10   +  c!      r@  11  +  swap  cmove    \  place
  BL  WORD  dup  c@ 1+ ( from length )          r@  10  +  ( destination )   place
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +          dup cfa'(LNC) !       !       R>  >IN  !
  create      here'.align
              last' @  2-  ffff   and   16,' ( content of LFA' )    here'  last'  !   ( current last' )
              last  @  nfa-count  dup>r  c,' ( length )  here'  r@  cmove??  r>  allot'  here'.align
              here'  cfa'(LNC)  @  !
              here'     ( cfa' )   ,
  does>       @     ,call(ice40)   ;     \  2/  4000  or  16,'  ( ,call ) ;


\ : PLACE         ( addr len dest -- )
\                 SWAP "CLIP" SWAP
\                 2DUP 2>R
\                 CHAR+ SWAP MOVE
\                 2R> C! ;

: t:  pijForth?  @   drop  -1  if  t:(pijForth)  else  t:(ice40)  then  ;


: a'.is.lfa'?   ( a' -- lfa' n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +  head.spacing  @  +  @  =
     if            i  swap  -1  leave
     then   head.spacing  @  ( 80 )
  +loop     nip    ;

: a'.is.lfa'?   ( a' -- lfa' n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +  @  =
     if            i  swap  -1  leave
     then   head.spacing  @  ( 80 )
  +loop     nip    ;


: a'.is.cfa'?   ( a' -- cfa' n -1 / 0 )  0
  lfa+nfa+cfa.counter   @   0
  ?do       over   i  lfa+nfa+cfa.array  +  head.spacing  @  10  -  ( 70 )  +  @  =
     if            i  swap  -1  leave
     then   head.spacing  @  ( 80 )
  +loop     nip    ;

#else
: L:   ( -- )   here'  dup
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!  r@  11 +  swap  cmove
      head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +   !  R>   >IN  !
  create     ,
  does>      @    RCALL_#24/CALL_R4    ;

: L:   ( -- )
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!             \ length
                            r@  11   +  swap  cmove    \ name
  here'  r>    head.spacing  @  10   - ( f0 )  +  !      R>   >IN  !
               head.spacing  @  lfa+nfa+cfa.counter  +!
  create     here'  ,
  does>      @    RCALL_#24/CALL_R4    ;

\ : defer'   L:  8  allot'  ;

: defer'  ( -- )
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!             \ length
                            r@  11   +  swap  cmove    \ name
  here'  r>    head.spacing  @  10   - ( f0 )  +  !      R>   >IN  !
               head.spacing  @  lfa+nfa+cfa.counter  +!     8 allot'
  create       here'  ,
  does>        @    RCALL_#24/CALL_R4   ;

#then


\ keil:  name   0x12345678
: remove.0x.$...  ( a1 -- a2 )  dup>r  1+    16@  DUP  7830 ( '0x' )  =   swap  5830 ( '0X' )  =  or
  if       r@  c@   r@  2+  c!   r>  2+
  else     r@  1+   c@  '$'  =
     if    r@  c@   r@  1+  c!   r>  1+
     else  r>
     then
  then   ;

: label'(keil) ( -- )  \     REMAP>0?  @  if  F7FFFFFF  and  then  dup   \  for keil ARM
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup   r@  10  +  c!  r@  11 +   swap  cmove    head.spacing  @  lfa+nfa+cfa.counter  +!
  BL  WORD  ( remove.0x.$... ) (NUMBER)   DROP  REMAP>0?  @  if  F7FFFFFe  and  then  dup   \  for keil ARM
  r>  head.spacing  @  10  - ( 70 )  +   !
  R>   >IN  !
  create     ,    bl  word  drop
  does>      @    ;

: label'(keil) ( -- )  \     REMAP>0?  @  if  F7FFFFFF  and  then  dup   \  for keil ARM
  >IN  @  >R           lfa+nfa+cfa.counter   @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup   r@  10  +  c!  r@  11 +   swap  cmove    head.spacing  @  lfa+nfa+cfa.counter  +!
  BL  WORD  ( remove.0x.$... ) (NUMBER)   DROP  REMAP>0?  @  if  F7FFFFFe  and  then  dup   \  for keil ARM
  r>  head.spacing  @  10  - ( 70 )  +   !
  R>   >IN  !
  create     ,    bl  word  drop
  does>      @    RCALL_#24/CALL_R4  ;

: keil:   label'(keil)  ;





:  R4=16#?  ( a' -- r cfa' -1 / 0 )    dup   to  (A')   `5C#6C4#C3#4R8#     F2400000     =
   IF       DUP>R   32@'  0~15<->16~31   #6.4#.3#4.8#>16#    R>  0B  8 ?~?>   nip  NIP ( swap )  -1   EXIT
   THEN     nip     0   ;

:  R4=16#?  ( a' -- r cfa' -1 / 0 )   dup   to  (A')   `5C#6C4#C3#4R8#     F2400000     =
   IF       4  to  <<byte>>   DUP>R   0B  8  ?~?>   4   =
      IF    R>   32@'  0~15<->16~31   #6.4#.3#4.8#>16#     -1   EXIT
      THEN  R>DROP
   THEN     DROP  0   ;

:  R4=16#?  ( a' -- r cfa' -1 / 0 )   dup   to  (A')   `5C#6C4#C3#4R8#     F2400000     =
   IF       4  to  <<byte>>      0B  8  ?~?>   4   =
      IF    32@'  0~15<->16~31   #6.4#.3#4.8#>16#     -1   EXIT
      THEN  R>DROP
   THEN     DROP  0   ;

:  R4=16#?  ( a' -- r cfa' -1 / 0 )   dup   to  (A')   `5C#6C4#C3#4R8#     F2400000     =
   IF       4  to  <<byte>>      0B  8  ?~?>   4   =
      IF    32@'  0~15<->16~31   #6.4#.3#4.8#>16#     -1   EXIT
      THEN   
   THEN     DROP  0   ;
:  call_r4? ( a' -- -1 / 0 )   16@'  47A0  =   ; 


:  LCALL.cfa'? ( a' -- a'+6 -1 / 0 )   dup>r   R4=16#?
   if   DROP   r@     4  +  call_r4?
        if     FFFFfffe  AND  _.LABEL     r>  6  +    -1    exit
        then 
   then        r>drop    0    ;

:  LCALL.cfa'? ( a' -- a'+6 -1 / 0 )   dup>r   R4=16#?
   if   r@     4  +  call_r4?
     if        FFFFfffe  AND     DUP  CFA'IN.NFA.QUEUE?
       if      R@ (.12345678..55.66.77.88.99.AA.)  34 ?y  dup  CFA'>.ID   drop
               dup  doLIT?
         if    r@   6 +  32@'   3c ?y   9 u.r    r> 4 + >r
         then  62 ?y  ." \ "            9 u.r
       else    _.LABEL
       then    r>  6  +   -1    exit
     then
   then        r>drop      0    ;

' LCALL.cfa'?  is  _LCALL.cfa'?

\ 12345  gcc:  name


: keil:'''    ( a' -- )   dup      \ for gcc ARM
  >IN  @  >R           lfa+nfa+cfa.counter  @  lfa+nfa+cfa.array  +  dup>r  ,
  BL  WORD  COUNT      dup  r@  10   +  c!   r@ 11  +  swap  cmove    head.spacing  @  lfa+nfa+cfa.counter  +!
  r>  head.spacing  @  10  - ( 70 )  +   !     R>  >IN  !
  create     bl  word  (number)  drop   ,
  does>      @    ;

\ keil: xTimerCreateTimerTask                    08035335   \ Thumb Code

: L:'   here'  label'(gcc)  ;
: here: here'  label'(gcc)  ;

\ : L:    T:new*4(label) ;





: make.head(mecrispForth)  ( -- )  here'  last'  @  6  -  32!'   4000   32,'   ffff  16,'
  last  @  nfa-count  dup  8,'     dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
;

variable  current.nfa'.temp
variable  current.nfa'

variable  (a')=FFFFFFFF      4fff0  ( 4000 )  (a')=FFFFFFFF  !   

: T:new(stm32F429mecrispForth)
          t:state?  on
          mecrisp4F120?  @   mecrisp32F407?  @   or
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]      R>  >IN  !      \ headless tinyForth
          here'  current.nfa'  @  6  -  32!'   ( 4000 )  (a')=FFFFFFFF @  32,'    0  16,'       here'  current.nfa'.temp  !
          last   @  nfa-count  dup  8,'     dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @                  32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   here'  1+  ffffFFFE  and   org
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          current.nfa'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else    current.nfa'  !  then        here'  cfa'>nfa'  if   current.nfa'  !  then

          here' ( 1+ ) ffffFFFE  and   org
          current.nfa'.temp  @    current.nfa'   !
\         LAST'  @  LAST'(adjacent)  @  LAST.NFA'(HEAD).LENGTH  @  1+  cmove' \ to get lower case characters
          DOES>  @  ,call.cfa'   ;




: new.program  ( a' -- )      current.nfa'  !   ;
: np           ( a' -- )      current.nfa'  !   ;









: T:    \ t:state?  on   t:new
          mecrisp4F120?  @   mecrisp32F407?  @   or
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   mecrispForth.only(LF120)?   @
             if
             else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
             then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @               32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   mecrisp32F429/407? @  if   HERE'.EVEN.ALIGNED   then
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          last'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
          DOES>  @  ,call.cfa'    ;


comment:

  \ -------------------------------------------------------------------------------    0    0
     FFFFFFFC           30 *                                                                     BD6C10 *  lfa
            0 *                     start                                 BD6C18 *               BD6C20    nfa
         47DC **                                                                                 BD6C80 ** cfa
  \ -------------------------------------------------------------------------------    1    1
     FFFFFFFC            0 *                                                                     BD6C90 *  lfa
            0 *                     1+                                    BD6C98 *               BD6CA0    nfa
         47F0 **                                                                                 BD6D00 ** cfa
  \ -------------------------------------------------------------------------------    2    2
     FFFFFFFC            0 *                                                                     BD6D10 *  lfa
            0 *                     1-                                    BD6D18 *               BD6D20    nfa
         47F4 **                                                                                 BD6D80 ** cfa
  \ -------------------------------------------------------------------------------    3    3
     FFFFFFFC            0 *                                                                     BD6D90 *  lfa
            0 *                     2+                                    BD6D98 *               BD6DA0    nfa
         47F8 **                                                                                 BD6E00 ** cfa
  \ -------------------------------------------------------------------------------    4    4
     FFFFFFFC            0 *                                                                     BD6E10 *  lfa
            0 *                     2-                                    BD6E18 *               BD6E20    nfa
         47FC **                                                                                 BD6E80 ** cfa
  \ -------------------------------------------------------------------------------    5    5

comment;

variable  cfa'(mecrispForth)?

: cfa'>nfa'(mecrispForth)  ( cfa' -- nfa' -1 / 0 )    0E2/18E/156|429/407/103       cfa'(mecrispForth)?  off
  0   swap  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   0
  do     dup  nfa'>cfa'   3  pick   =     if   nip  nip  cfa'(mecrispForth)?  on  leave  then    6  -  32@'  6  +
  loop   cfa'(mecrispForth)?   @   if   -1  else  drop  0  then  ;


: cfa'>nfa'(mecrispForth)  ( cfa' -- nfa' -1 / 0 )     0E2/18E/156|429/407/103       cfa'(mecrispForth)?  off
  GET.TOTAL.INSTRUCTIONS.STM32F429/103(MF)   0
  do     dup  nfa'>cfa'   2  pick    =     if    nip   cfa'(mecrispForth)?    on  leave  then    6  -  32@'  6  +
  loop   cfa'(mecrispForth)?   @     if    -1    else  drop   0  then  ;


: mend.nfa'(mecrispForth)     ---.Flash.Dictionary.---    cfa'>n(lnc)   12e   cfa'>n(lnc)
  begin    dup>r   LFA+NFA+CFA.ARRAY  +  ( lfa )  dup>r   head.spacing  @  +  10  - ( cfa )  @  ( cfa' )  cfa'>nfa'(mecrispForth)
           r>   8  +  ( nfa )  !     r@  over  u>=    r>  head.spacing  @  +  swap
  until    2drop   ;



ice40?  @
#if

:   n>.head(lnc)    ( n -- )  dup>r   lfa+nfa+cfa.array   +     @  ( lfa' ) dup   -1  =
    if      drop    cr  24 ?y  ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else    dup ( lfa' )   cr   \.12345678..55.66...........    \ lfa'
            2 + ( nfa' )   cr   ."   \  "     8   u.r  space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +    dup     c@   space   .xx
            count   2dup   2>r  1f  and   bounds   do    i                 c@   space   .xx   loop
            cr  24  ?y  ." t:  "    2r>  type
    then    ;   \ length+ascii.of.name

'  n>.head(lnc)  is  _n>.head(lnc)

:   n>.ID(lnc)      ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @   dup   -1  =
    if      drop    cr  24 ?y  ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else  \ dup     4  -   cr   (.12345678..12345678.......)    \ lfa'
          \                cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +  \ dup     c@   space   .xx
            count   1f  and   TYPE   \  bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name

'  n>.id(LNC)  is  _n>.id(LNC)









#else

:   4.or.6?  ( n -- nfa'-lfa' )   dup>r  lfa+nfa+cfa.array   +   8  +   @
                                     r>  lfa+nfa+cfa.array   +          @   u>   if  4  else  6  then  ;

:   n>.head(lnc)    ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @   dup   -1  =
    if      drop    cr  24 ?y  ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else    dup     nfa'-lfa'  ( 4 ) -   cr   (.12345678..12345678.......)    \ lfa'
                           cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +    dup     c@   space   .xx
            count   1f  and   bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name


:   n>.head(lnc)    ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @   dup   -1  =
    if      drop    cr  24 ?y  ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else    dup     nfa'-lfa'  ( 4 ) -
            cr   dup  (.12345678..12345678.......)    \ lfa'
      forward.link?   @
      if    cr   4 +  (.12345678..55.66..........)    \ immediate+compily.only+smudge+...
      else  drop
      then  cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +    dup     c@   space   .xx
            count   1f  and   bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name

:   n>.head(lnc)    ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @   dup   -1  =
    if      drop    cr  24 ?y  ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else    dup     r@    4.or.6?  -
          \ dup   nfa'-lfa'  ( 4 ) -
            cr   dup  (.12345678..12345678.......)    \ lfa'
    \ forward.link?   @
            r@    4.or.6?  6  =
      if    cr   4 +  (.12345678..55.66..........)    \ immediate+compily.only+smudge+...
      else  drop
      then  cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +    dup     c@   space   .xx
            count   1f  and   bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name

'  n>.head(lnc)  is  _n>.head(lnc)

:   n>.ID(lnc)      ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @   dup   -1  =
    if      drop    cr  24 ?y  ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else  \ dup     4  -   cr   (.12345678..12345678.......)    \ lfa'
          \                cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +  \ dup     c@   space   .xx
            count   1f  and   TYPE   \  bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name

'  n>.id(LNC)  is  _n>.id(LNC)

#then












headless.tF(ice40)?  @
#if
:   n>.ID(lnc)      ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @      -1  =
    if                  34 ?y \ ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else  \ dup     4  -   cr   (.12345678..12345678.......)    \ lfa'
          \                cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +  \ dup     c@   space   .xx
            count   1f  and   TYPE      \  bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name
#else
:   n>.ID(lnc)      ( n -- )  dup>r   lfa+nfa+cfa.array   +   8  +   @      -1  =
    if              cr  24 ?y   ." L:  "
            r>      lfa+nfa+cfa.array   +    10   +
            count   1f  and   bounds   do    i                 c@           emit  loop
    else  \ dup     4  -   cr   (.12345678..12345678.......)    \ lfa'
          \                cr   ."   \  "  .xxxxXXXX   space    \ nfa'
            r>      lfa+nfa+cfa.array   +    10   +  \ dup     c@   space   .xx
            count   1f  and   TYPE      \  bounds   do    i                 c@   space   .xx   loop
    then    ;   \ length+ascii.of.name
#then



'   N>.ID(LNC)  is   _N>.ID(LNC)

:   n>next.nearest.lfa'.or.cfa'.or.here'  ( n -- next.lfa'.or.cfa' )
           dup     lfa+nfa+cfa.array  +   head.spacing  @        +   8  +   @   ( next.word's.nfa' )   dup   -1  =
    if     drop    lfa+nfa+cfa.array  +   head.spacing  @   2*   +  10  -   @   ( next.word's.cfa' )
    else   nip     dup  0  4000  between
      if      2  -   \ mecrispForth "flag" occupied 2 byte
      then    4  -
    then   ;


:   n>next.nearest.lfa'.or.cfa'.or.here'  ( n -- next.lfa'.or.cfa' / ABORT )
           dup     lfa+nfa+cfa.array  +   head.spacing  @        +   8  +   @   ( next.word's.nfa' )   dup   -1  =
    if     drop    lfa+nfa+cfa.array  +   head.spacing  @   2*   +  10  -   @   ( next.word's.cfa' )
    else   nip     dup  0  4000  between
      if      2  -   \ mecrispForth "flag" occupied 2 byte
      then    4  -
    then   DUP   -1  =  IF  DROP  HERE'  THEN  ;


variable  nearest.lfa'.or.cfa'.or.here'

:   n>next.nearest.lfa'.or.cfa'.or.here' ( n -- a' )   n>cfa'(lnc)  -1  nearest.lfa'.or.cfa'.or.here'  !
    lfa+nfa+cfa.counter  @   0
    do      i  lfa+nfa+cfa.array  +   head.spacing  @  +  10  -  @  ( cfa' )  >r
            dup   r@  u<
      if    r>    nearest.lfa'.or.cfa'.or.here'  @  umin   nearest.lfa'.or.cfa'.or.here'  !
      else  r>drop
      then  head.spacing  @
    +loop   drop  nearest.lfa'.or.cfa'.or.here'  @  ( 50 + )  ;

\ : nfa'->lfa'  ( nfa' -- lfa' )   nfa'-lfa'  -  ;

:   n>next.nearest.lfa'.or.cfa'.or.here' ( n -- a' )   n>cfa'(lnc)  -1  nearest.lfa'.or.cfa'.or.here'  !
    lfa+nfa+cfa.counter  @   0
\   do      i  lfa+nfa+cfa.array  +   head.spacing  @  +  10  -  @  ( cfa' )    >r
    do      i  lfa+nfa+cfa.array  +   head.spacing  @  +   8  +  @  nfa'->lfa'  >r
            dup   r@  u<
      if    r>    nearest.lfa'.or.cfa'.or.here'  @  umin   nearest.lfa'.or.cfa'.or.here'  !
      else  r>drop
      then  head.spacing  @
    +loop   drop  nearest.lfa'.or.cfa'.or.here'  @  ( 50 + )  dup  fffffff0  -1  between  if  drop  here'  then  ;

:   n>next.nearest.lfa'.or.cfa'.or.here'  ( n -- a' )  n>next.nearest.lfa'.or.cfa'.or.here'  ;
 


:   n>next.nearest.lfa'.or.cfa'.or.here'???  ( n -- next.lfa'.or.cfa' / ABORT )
           dup     lfa+nfa+cfa.array  +   head.spacing  @        +   8  +   @   ( next.word's.nfa' )   dup   -1  =
    if     drop    lfa+nfa+cfa.array  +   head.spacing  @   2*   +  10  -   @   ( next.word's.cfa' )
    else   nip     dup  0  4000  between
      if      2  -   \ mecrispForth "flag" occupied 2 byte
      then    4  -
    then   DUP   -1  =  IF  DROP  HERE'  THEN  ;


:   n>next.nearest.lfa'.or.cfa'.or.here'.mpe407     n>next.nearest.lfa'.or.cfa'.or.here'  ;







headless.tF(ice40)?  @
#if
:   cfa'>head(lnc)  ( cfa' -- next.lfa' -1 / 0 )  cfa'>n(lnc)
    if      dup>r   n>.head(lnc)
\           r@      n>cfa'(lnc)
\           begin   U1'         dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
\           until
            r>drop   -1
    else  ( cr      ."  ***** no name ****" )  0
    then    ;
#else
:   cfa'>head(lnc)  ( cfa' -- next.lfa' -1 / 0 )  cfa'>n(lnc)
    if      dup>r   n>.head(lnc)
            r@      n>cfa'(lnc)
            begin   U1'         dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
            until   r>drop   -1
    else  ( cr      ."  ***** no name ****" )  0
    then    ;
#then     

'   cfa'>head(lnc)  is  _cfa'>head(lnc)

:   cfa'>head(lnc).mpe407  ( cfa' -- next.lfa' -1 / 0 )  cfa'>n(lnc)
    if      dup>r   n>.head(lnc)
            r@      n>cfa'(lnc)
            begin   U1'         dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'.mpe407   u>=
            until   r>drop   -1
    else  ( cr      ."  ***** no name ****" )  0
    then    ;

: see`   ' cfa>cfa'    cfa'>head(lnc)  drop  ;

variable  cfa.of.dup.@
variable  cfa.of.quit.@

headless.tF(ice40)?  @
#if
variable  counter(dis.ice40)

:  SEE'        ( ' )    BL  WORD  dup  count  string>number
   if          nip
   else        drop  PARMFIND   0=  if  exit  then    DUP>R    cfa>cfa'
   then        cfa'>n(lnc)
   if          dup>r   n>.head(lnc)     \ 80 / DECOMPILE.#N.WORD.IN.LFA+NFA+CFA.ARRAY    r> drop
               r@      n>cfa'(lnc)   counter(dis.ice40)  off
      begin    1   counter(dis.ice40) +!
               cr  dis.ice40   dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
               counter(dis.ice40)  @  10  >  and
      until    r>drop   R>DROP
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;

:  SEE'        ( ' )    BL  WORD  dup  count  string>number
   if          nip
   else        drop  PARMFIND   0=  if  exit  then    DUP>R    cfa>cfa'
   then        cfa'>n(lnc)
   if          dup>r   n>.head(lnc)     \ 80 / DECOMPILE.#N.WORD.IN.LFA+NFA+CFA.ARRAY    r> drop
               r@      n>cfa'(lnc)   counter(dis.ice40)  off
      begin    1  counter(dis.ice40) +!
               cr      dis.ice40   dup    r@   n>next.nearest.lfa'.or.cfa'.or.here'  2dup  u>=
               if      2drop
                       counter(dis.ice40)  @   10  >
               else    2drop   0
               then
      until    r>drop   R>DROP
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>CFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;

:  call(ice40)?  ( op.code -- n -1 / 0 )  dup  e000  and  4000  <>  if  drop  0  then
   dup  4000  and
   if  1fff  and  2*  cfa'>n(lnc)
      if          -1
      else         0
      then
   else      drop  0
   then  ;
   
'  call(ice40)?  is  _call(ice40)?

variable  n?     10  n?  !
: 10n    ( -- )  10  n?  !  ;
: 20n    ( -- )  20  n?  !  ;
: 30n    ( -- )  30  n?  !  ;
: 40n    ( -- )  40  n?  !  ;
: 50n    ( -- )  50  n?  !  ;
: 60n    ( -- )  60  n?  !  ;
: 70n    ( -- )  70  n?  !  ;
: 80n    ( -- )  80  n?  !  ;
: 90n    ( -- )  90  n?  !  ;
                
:  SEE'        ( ' )    BL  WORD  dup  count  string>number
   if          nip
   else        drop  PARMFIND   0=  if  exit  then    DUP>R    cfa>cfa'
   then        cfa'>n(lnc)
   if        \ dup>r   n>.head(lnc)     \ 80 / DECOMPILE.#N.WORD.IN.LFA+NFA+CFA.ARRAY    r> drop
               >r
               r@      n>cfa'(lnc)   counter(dis.ice40)  off
      begin    1  counter(dis.ice40) +!   cr
               dup  cfa'>n(lnc)      if   n>.head(lnc)  cr  then
               dup  16@'  call(ice40)?
               if      over   (.12345678..55.66..........)   n>.id(LNC)
                       dup 60 ?y  ." \  "  16@' 1fff and  2*  .xxxx   dup  .'x'.in.tF   2+
               else    dis.ice40
               then    dup    r@   n>next.nearest.lfa'.or.cfa'.or.here'  2dup  u>=
               if      2drop
                       counter(dis.ice40)  @  n?   @  >   \   10  >
               else    2drop   0
               then
      until    r>drop   R>DROP
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;

: n>head.size ( n -- size / 0 )  head.spacing  @  +  lfa+nfa+cfa.array  +  dup  @  -1  =
  if     drop   0
  else   10  +  c@  1f  and   4 + fffffffe  and
  then   ;

:  SEE'        ( ' )    BL  WORD  dup  count  string>number
   if          nip                                                        \ number
   else        drop  PARMFIND   0=  if  exit  then    DUP>R    cfa>cfa'   \ cfa'  or  cfa
   then        cfa'>n(lnc)
   if          dup>r    n>.head(lnc)   r@       n>cfa'(lnc)
      begin    a'>.id(ice40)(lnc)      dup  a'.is.lfa'?
         if    \.3F***  nip  dup  head.spacing  @ +  n>.head(lnc)  n>head.size  +
         then

          dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
      until    r>drop   R>DROP
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;

: n>head.size ( n -- size / 0 )   lfa+nfa+cfa.array  +  dup  @  -1  =
  if     drop   0
  else   10  +  c@  1f  and   4 + fffffffe  and
  then   ;

:  SEE'        ( ' )    BL  WORD  dup  count  string>number
   if          nip                                                        \ number
   else        drop  PARMFIND   0=  if  exit  then    DUP>R    cfa>cfa'   \ cfa'  or  cfa
   then        cfa'>n(lnc)
   if          dup>r    n>.head(lnc)   r@       n>cfa'(lnc)
      begin    a'>.id(ice40)(lnc)      dup  a'.is.lfa'?
         if    \.3F***  nip  dup   n>.head(lnc)  n>head.size  +
         then

          dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
      until    r>drop   R>DROP
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;

#else
:  SEE'        ( ' )    BL  WORD  dup  count  string>number
   if          nip
   else        drop  PARMFIND   0=  if  exit  then    DUP>R    cfa>cfa'
   then        cfa'>n(lnc)
   if          dup>r   n>.head(lnc)     \ 80 / DECOMPILE.#N.WORD.IN.LFA+NFA+CFA.ARRAY    r> drop
               r@      n>cfa'(lnc)
      begin    U1'         dup   r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
      until    r>drop   R>DROP
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;

:  .id'(cfa'.lnc)  ( cfa' -- )  cfa'->nfa*   count  type  ;

:  SEE'        cr    BL  WORD  dup  count  string>number
   if          nip
   else        drop  PARMFIND   0=
      if       exit
      then
   then   DUP>R    cfa>cfa'   cfa'>n(lnc)
   if          \.3F***.NO.CR  dup>r    n>.head(lnc)           r@    n>cfa'(lnc)
               \.3F---    cr      r@   N->CFA'  22 ?y  ."  t:  " .id'(cfa'.lnc)
      begin    U1'       ( dup )  r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
      until    r>drop   R>DROP    drop
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then
   then   cr   ;






:  L:?  ( n -- )   lfa+nfa+cfa.array  +  @   fffffffb  ffffffff  between  ;

:  SEE'        cr    BL  WORD   dup  count  2dup  2>r  string>number
   if          nip
   else        drop  PARMFIND   0=
      if       2r>drop   exit
      then
   then        DUP>R    cfa>cfa'  cfa'>n(lnc)
   if          \.3F***.NO.CR   dup>r   n>.head(lnc)           r@    n>cfa'(lnc)
               \.3F---    cr   23 ?y   r@  L:?  if  ."  L:  "  else  ."  eF:  "  then  2r>  2r>  type  2>r
      begin    U1'      dup  r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>  \  u>=
      until    2r>drop  drop
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then     2r>drop
   then   cr   ;


:  SEE'??????        cr    BL  WORD   dup  count  2dup  2>r  string>number
   if          nip
   else        drop  PARMFIND   0=
      if       2r>drop   exit
      then
   then        DUP>R    cfa>cfa'  cfa'>n(lnc)
   if          \.3F***.NO.CR  >r  \  dup>r   n>.head(lnc)
               r@    n>cfa'(lnc)
               \    \.3F---
               cr   23 ?y   r@  L:?  if  ."  L:  "  else  ."  t:  "  then  2r>  2r>  type  2>r
      begin    U1'      dup  r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
      until    2r>drop  drop
   else        R>  DUP  @  dup>r   cfa.of.dup.@    @  =   r>  cfa.of.quit.@  @  =  or
      if       CFA>cFA'        cfa'>n(lnc)
         if    n>cfa'(lnc)     CFA'>HEAD(LNC)  DROP
         then
      else     (SEE')
      then     2r>drop
   then   cr   ;



#then
:  see(lnc)    ( cfa' -- )      cfa'>n(lnc)
   if          \.3F***.NO.CR    dup>r    n>.head(lnc)
               \.3F---    cr    r@   N->CFA'  22 ?y  ."  t:  "  .id'(cfa'.lnc)
               r@      n>cfa'(lnc)
      begin    U1'     r@   n>next.nearest.lfa'.or.cfa'.or.here'   u>=
      until    r>drop  drop
   then   cr   ;

:  n->from.to  ( n -- from to )   lfa+nfa+cfa.array  +  head.spacing  @  +  20  -  2@  ;

:  see(lnc)    ( cfa' -- )      cfa'>n(lnc)
   if          >r                   \.3F***.NO.CR
               r@    n>.head(lnc)   \.3F---    cr
               r@    N->CFA'  22 ?y  ."  t:  "  .id'(cfa'.lnc)
               r>    n->from.to  >r
      begin    U1'   dup  r@   u>=
      until    r>drop  drop
   then   cr   ;




: L:?     ( n -- f )   lfa+nfa+cfa.array  +  10  +  @      -1  =  ;
: .id(n)  ( n -- )     lfa+nfa+cfa.array  +  10  +  count  type   ;

:  see(lnc)    ( cfa' -- )      cfa'>n(lnc)
   if          >r                   \.3F***.NO.CR
               r@    n>.head(lnc)   \.3F---    cr
               r@    N->CFA'  24 ?y
               r@    L:?
               if    ." L:  "   r@     .id(n)
               else  ." t:  "  .id'(cfa'.lnc)
               then
               r>    n->from.to  >r
      begin    U1'   dup  r@   u>=   key?  or
      until    r>drop  drop
   then   cr   ;

: see.all(lnc)  ( -- )   lfa+nfa+cfa.array  lfa*->cfa*   lfa+nfa+cfa.counter  @   bounds
  do      i   @   see(lnc)   head.spacing  @      key?   if  leave  then
  +loop   ;

variable  limit.range?        200  limit.range?  !

:  limit.to.a.range ( from to -- )  2dup  -  abs  limit.range?  @  >  if  drop  dup  limit.range?  @  +  then  ;

:  see(lnc)    ( n -- )                              \ 0 100 200 ...
               >r                   \.3F***.NO.CR
               r@    n>.head(lnc)   \.3F---    cr
               r@    N->CFA'  24 ?y
               r@    L:?
               if    ." L:  "   r@     .id(n)
               else  ." mF: "  .id'(cfa'.lnc)
               then
               r>    n->from.to    limit.to.a.range   >r
      begin    U1'   dup  r@   u>=   key?  or
      until    r>drop  drop    ;

: see.all(lnc)    ( -- )   lfa+nfa+cfa.counter  @   0
  do      cr  i   see(lnc)   key?   if  leave  then   head.spacing  @
  +loop   ;
\ ---------------------------------------------------------------------------
:  t:m   here'   cfa'>nfa'(mecrispForth)
   if    here'   cfa'>n(lnc)
      if         LFA+NFA+CFA.ARRAY  +  8  +  !
      else       drop
      then  \ cfa'>nfa'  last'(adjacent)   !
   then
        \ >in  @  >r   bl word  count   name>lnc.array    r>  >in   !
        \ t:state?  on   t:new
          mecrisp4F120?  @   mecrisp32F407?  @   or
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   mecrispForth.only(LF120)?   @
             if
             else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
             then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @               32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   mecrisp32F429/407? @  if   HERE'.EVEN.ALIGNED   then
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          last'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
          DOES>  @  ,call.cfa'    ;






: T:*4    \ t:state?  on   t:new
          mecrisp4F120?  @   mecrisp32F407?  @   or    drop  0
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   mecrispForth.only(LF120)?   @
             if
             else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
             then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @               32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   mecrisp32F429/407? @  if   HERE'.MULIPLE.OF.4.ALIGNED    ( HERE'.EVEN.ALIGNED )  then
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          last'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
          DOES>  @  ,call.cfa'    ;

















: show.variables ( -- )
  cr  ."  1  mecrisp4F120?             "     mecrisp4F120?                  @   0a  u.r
  cr  ."  2  mecrisp32F407?            "     mecrisp32F407?                 @   0a  u.r
  cr  ."  3  mecrispForth.only(LF120)? "     mecrispForth.only(LF120)?      @   0a  u.r
  cr  ."  4  dual.head.Forth(51eF)?    "     dual.head.Forth(51eF)?         @   0a  u.r
  cr  ."  5  +pcfa?                    "     +pcfa?                         @   0a  u.r
  cr  ."  6  last'(adjacent)           "     last'(adjacent)                @   0a  u.r
  cr  ."  7  mecrisp32F429/407?        "     mecrisp32F429/407?             @   0a  u.r
  cr  ."  8  defer'>call.cfa'?         "     defer'>call.cfa'?              @   0a  u.r
  cr  ."  9  ram.start                 "     ram.start                      @   0a  u.r
  cr  ." 10  ram.end                   "     ram.end                        @   0a  u.r
  cr  ." 11  head.Forth?               "     head.Forth?                    @   0a  u.r  ;

: sv  ( -- )  show.variables  ;









tachyonForth?  @
#if
: cog:    >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS          T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+  -  \ +
          head.Forth?  @   if  drop  else   last'  !  then      here'  cfa'>nfa'  if  last'  !  then
          DOES>  @  ,call.cfa'    ;

:  a'>cog.addr  ( a' -- cog.addr )  7500 - 4 /  ;

: cog:    >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          (create)   here'  a'>cog.addr  ,
          DOES>  @   c,'    ;

: cog:'   create     here'  a'>cog.addr  ,
          DOES>  @   c,'    ;


: hub:    >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS          T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+  -  \ +
          head.Forth?  @   if  drop  else   last'  !  then      here'  cfa'>nfa'  if  last'  !  then
          DOES>  @   5c  c,'   c,'  ;  \  ,call.cfa'    ;



: hub:'   >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          (create) \ last.nfa'(head).length  @    c,'
                     last   @  nfa-count   1f  and  dup  c,'  bounds   do  i  c@  c,'  loop   here'  ,
          DOES>  @   16@'   16,'   ;


: hub:    >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS          T:QUEUE.COUNTER   +!   here'     here'(t:)  !
\         defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+  -  \ +
          head.Forth?  @   if  drop  else   last'  !  then      here'  cfa'>nfa'(tachyon)  if  last'  !  then
          DOES>  @   5c  c,'   c,'  ;


: T:    \ t:state?  on   t:new
          mecrisp4F120?  @   mecrisp32F407?  @   or     drop  0
          if     cp'  @  1+  FFFFfffe  and   cp'  !
          else   mecrispForth.only(LF120)?   @
             if
             else   here'  4 mod  2 =  if  ,nop ( bf00 or b080 16,' )  ( nop )   then
             then
          then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
   if     +pcfa?       @   if    cp'   @   32,'   ( pcfa' )   then
          last'(adjacent)  @               32,'               (  lfa' )   here'     last'(adjacent)  !
          last  @  nfa-count  dup  8,'         dup>r  here'       swap   cmove*   r>  allot'   \ nfa'
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if
          else  HERE'.MULIPLE.OF.4.ALIGNED   \ +pcfa?  @  if   here'*   r>   32!'  then  \ nfa
          then
   then   (CREATE)  HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                             LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                             2 CELLS   ( 6 )  T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+
          mecrisp4F120?  @   mecrisp32F407?  @  or
          if     EVEN.ALIGNED
          else   ALIGNED(4*)
          then   -
          last'  @  ram.start  @  ram.end  @   between
          if     head.start*
          else   head.start
          then   @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
          DOES>  @  ,call.cfa'    ;
#then






















propellerForth?  @   
#if

:  nfa'>cfa'(pf801)  ( nfa' -- cfa' )   count'   7  min   +   EVEN.ALIGNED    begin   dup   16@'  0=  while   2+   repeat   ;

: cfa'>nfa'(PF801)   ( a'-- nfa' )         \ ex.  27a4   a'>nfa'   --->
   begin   1-   dup   c@'  20 7f   between         until
   begin   1-   dup   c@'  20 7f   between   not   until   ;

HEAD.FORTH?  on    dual.head.Forth(51eF)?  on      27D6 ( cfa' )  last'(adjacent)  !

:  lfa'>cfa'(pf801)  ( lfa' -- cfa' )  2+  nfa'>cfa'(pf801)  ;

: ,call.cfa'   16,'  ;

: T:      here'  2 mod  1 =  if  00 c,'  then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
  if      last'(adjacent)  @   16,'  ( lfa' )    HERE'.EVEN.ALIGNED
          last  @  nfa-count  dup  c,'   here' 7 0 fill'   here'  swap  cmove*  7  allot' \ nfa'
  then    (CREATE)   HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                              LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                              2 CELLS          T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'   then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+  EVEN.ALIGNED   -  head.start  @  +
          head.Forth?  @
          if     drop
          else   last'  !
          then   here'  cfa'>nfa'(pf801)  dup
          if     last'  !
          then   here'  last'(adjacent)  !      000c  16,'
          DOES>  @  ,call.cfa'    ;

: h:      here'  2 mod  1 =  if  00 c,'  then
          >IN @  >R     CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
          dual.head.Forth(51eF)?  @
  if      last'(adjacent)  @   16,'  ( lfa' )    HERE'.EVEN.ALIGNED
          last  @  nfa-count  dup  c,'   here' 7 0 fill'   here'  swap  cmove*  7  allot' \ nfa'
  then    (CREATE)   HERE'  , HERE'   T:QUEUE  T:QUEUE.COUNTER @ +              !
                              LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
                              2 CELLS          T:QUEUE.COUNTER   +!   here'     here'(t:)  !
          defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'   then
          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+  EVEN.ALIGNED   -  head.start  @  +
          head.Forth?  @
          if     drop
          else   last'  !
          then   here'  cfa'>nfa'(pf801)  dup
          if     last'  !
          then   here'  last'(adjacent)  !     000c  16,'
          DOES>  @  ,call.cfa'    ;

#then


























 
















tachyonForth?  @
#if

: C@'++  ( a' -- a'+1 8n )   dup  1+  swap  c@'  ;

comment:
  \ -------------------------------------------------------------------------------
  ( nfa:  5CD7   02 54 54 82 )
  ( cfa:) 5CDB ( C3 12 )             ORG   t:  TT                          \ pfa:   EE1
  \ -------------------------------------------------------------------------------
  ( nfa:  5CDD   08 44 55 4D 50 2E 48 45 58 82 )
  ( cfa:) 5CE7 ( C2 11 )             ORG   t:  DUMP.HEX                    \ pfa:  191C
  \ -------------------------------------------------------------------------------

12*4+124+[(C3-C2)x3]*2  ==== 170            170  16@'  ===  EE1
11*4+124+[(C2-C2)x3]*2  ==== 16E            16E  16@'  === 191C

12 4 * 124 + C3 C2 -  3 xor  2 *  +   ====  170
11 4 * 124 + C2 C2 -  3 xor  2 *  +   ====  16E


5CDB DBG >VEC' [1] 5CDBh

code  DUP            --> [2] 5CDBh 5CDBh
code  1+             --> [2] 5CDBh 5CDCh
   :  C@'            --> [2] 5CDBh 12h
code  2*             --> [2] 5CDBh 24h
code  2*             --> [2] 5CDBh 48h
code  lit "0x124"    --> [3] 5CDBh 48h 124h
code  +              --> [2] 5CDBh 16Ch
code  SWAP           --> [2] 16Ch 5CDBh
   :  C@'            --> [2] 16Ch C3h
code  lit "0xC2"     --> [3] 16Ch C3h C2h
code  -              --> [2] 16Ch 1h
code  lit "0x3"      --> [3] 16Ch 1h 3h
code  XOR            --> [2] 16Ch 2h
code  SWAP           --> [2] 2h 16Ch
code  OVER           --> [3] 2h 16Ch 2h
const 1              --> [4] 2h 16Ch 2h 1h
code  AND            --> [3] 2h 16Ch 0h
code  2*             --> [3] 2h 16Ch 0h
code  +              --> [2] 2h 16Ch
code  SWAP           --> [2] 16Ch 2h
code  lit "0x2"      --> [3] 16Ch 2h 2h
code  AND            --> [2] 16Ch 2h
code  IF             --> [1] 16Ch
code  lit "0x4"      --> [2] 16Ch 4h
code  +              --> [1] 170h
code  THEN           --> [1] 170h
code  ;              -->  ok.

170 16@' .. EE1  ok.
comment;



  \ -------------------------------------------------------------------------------
                           :  >VEC'  ( cfa' -- pfa' )
  (   1528  18             )                      DUP
  (   1529  2D             )                      1+
  (   152A  60             )                      C@'
  (   152B  4D             )                      2*        \ 4*
  (   152C  4D             )                      2*
  (   152D  C5 00          )                      124    \   XCALLS    \ 124
  (   152F  2A             )                      +
  (   1530  22             )                      SWAP
  (   1531  60             )                      C@'
  (   1532  7C C2          )                      C2
  (   1534  29             )                      -
  (   1535  84             )                      3
  (   1536  41             )                      XOR
  (   1537  22             )                      SWAP
  (   1538  1B             )                      OVER
  (   1539  86             )                      1
  (   153A  3B             )                      AND
  (   153B  4D             )                      2*
  (   153C  2A             )                      +
  (   153D  22             )                      SWAP
  (   153E  85             )                      2
  (   153F  3B             )                      AND
  (   1540  D1 04          )  IF    \ 04                             \ 1540 --> 1546 ----------------------------
  (   1542  7B 04 00       )                      0004
  (   1545  2A             )                      +
                              THEN                                   \ 1540 --> 1546 ----------------------------
  (   1546  10             )                      ;  \  EXIT
  \ -------------------------------------------------------------------------------
                           :  >PFA'  ( cfa' -- pfa' )
  (   150C  18             )                      DUP
  (   150D  2C             )                      1-
  (   150E  60             )                      C@'
  (   150F  7C 80          )                      80
  (   1511  55             )                      =
  (   1512  D1 02          )  IF    \ 02                             \ 1512 --> 1516 ------------------------
  (   1514  60             )                      C@'
  (   1515  10             )                      EXIT
  \ -------------------------------------------------------------------------------
                              THEN                                   \ 1512 --> 1516 ------------------------
  (   1516  18             )                      DUP
  (   1517  60             )                      C@'
  (   1518  7C 0B          )                      0B
  (   151A  55             )                      =
  (   151B  D1 07          )  IF    \ 07                             \ 151B --> 1524 -------------------------------
  (   151D  5D             )                      C@'++    drop  001  \ ??????
  (   151E  7F             )                      8
  (   151F  45             )                      LSHIFT   \  SHL
  (   1520  22             )                      SWAP
  (   1521  60             )                      C@'
  (   1522  2A             )                      +
  (   1523  10             )                      EXIT
  \ -------------------------------------------------------------------------------
                              THEN                                   \ 151B --> 1524 -------------------------------
  (   1524  C5 43          )                      >VEC'
  (   1526  62             )                      16@'     \  W@'
  (   1527  10             )                      ;  \  EXIT
  \ -------------------------------------------------------------------------------
                           '  >PFA'   is   _>PFA'


:   .xx+                  dup  .xx                                                                            12 ?y .xx  ;
:   .xxxx+      ( n -- )  dup  .xxxx      0 100  um/mod                                            15 ?y .xx  12 ?y .xx  ;
:   .xxxxxx+    ( n -- )  dup  .xxxxxx    0 100  um/mod  100 /mod                       18 ?y .xx  15 ?y .xx  12 ?y .xx  ;
:   .xxxxxxxx+  ( n -- )  dup  .xxxxxxxx  0 100  um/mod  100 /mod   100 /mod  1b ?y .xx 18 ?y .xx  15 ?y .xx  12 ?y .xx  ;


:   .xx.0fy   12  ?y  .xx  ;

variable   ?x               1e  ?x   !
:   x_     ?x   @   ;

:   nfa'>cfa'(tachyon) ( nfa' -- cfa' )   count'  +   1+   ;

:   hd+xc+sq,   ( nfa -- n )   dup  >r    nfa'>cfa'(tachyon)   r@   16@'  dup   ff00 and   swap   ff and   4 *   +   r>   +    ;

:   decompile  ( a'1 -- a'2 )  cr    >r    ."  ( "  r@   dup   .xxxxXXXX   2  spaces   c@'  .xx   0d spaces   ."  )"
                               r@          8@'
    case   79  of              r@    1+   32@'   .xxxxxxxx+ 5  endof
           7a  of              r@    1+   24@'   .xxxxxx+   4  endof
           7b  of              r@    1+   16@'   .xxxx+     3  endof
           7c  of              r@    1+    8@'   .xx+       2  endof
           bb  of              r@    1+    8@'   .xx+       2  endof
                                         ( dup   .xx+)      1  swap
    endcase    r>   +    ;

\ :   .id(tachyon.nfa')  ( nfa' -- )  ?dup   if  count'  type'  SPACE  then  ;   \ nfa'>cfa'(tachyon)

:   80.xx.10?  ( a' -- f )  24@'  ff00ff  and   100080  =   ;

variable    last'(tachyon)      5d07  last'(tachyon)  !   ( nfa'.of cold )
variable    nfa'?

:   cfa'>nfa'(tachyon)  ( a' -- nfa' / 0 )     dup  0=  if   exit  then
    >r    nfa'?  off    last'(tachyon)    @
    begin     dup    nfa'>cfa'(tachyon)  r@    =
       if            nfa'?   !                -1
       else   dup    6a99  =   if   1+   then
                     nfa'>cfa'(tachyon)  dup   6a97 =   if  1+   then    2 +  00
       then
    until   r>   drop     nfa'?  @   ;

:   .id(tachyon.cfa')  ( cfa' -- )  ?dup   if   cfa'>nfa'(tachyon)  .id(tachyon.nfa')  then   ;

:   byte.code>cfa'(tachyon)   ( byte.code -- cfa' / 0 )         \  ' DUP  --> 18
    >r    nfa'?  off     last'(tachyon)   @
    begin     dup    nfa'>cfa'(tachyon)  c@'   r@    =
       if     dup    nfa'?   !                 -1
       else   dup    6a99  =   if   1+   then
                     nfa'>cfa'(tachyon)  dup   6a97 =   if  1+   then    2 +  00
       then          over  32@'  0=      or    over  7500 >  or
    until   r>   drop     nfa'?  @   if   nfa'>cfa'(tachyon)  else  drop  0  then  ;

:   cfa'.of.c5xx  ( xx -- cfa' / 0 )  100 *   c5 +
    >r    nfa'?  off     last'(tachyon)    @
    begin     dup    nfa'>cfa'(tachyon)  16@'  r@    =
       if     DUP    nfa'?   !                 -1
       else   dup    6a99  =   if   1+   then
                     nfa'>cfa'(tachyon)  dup   6a97 =   if  1+   then    2 +  00
       then          over   10000  u>   if   -1  or   then
    until   r>   drop   drop   nfa'?  @   dup   0<>   if    nfa'>cfa'(tachyon)   then   ;

:   .id(tachyon.byte.code)  ( byte.code -- )    byte.code>cfa'(tachyon)    cfa'>nfa'(tachyon)  .id(tachyon.nfa')  ;

variable   byte.code

:   valid.tachyon.cog:?        ( byte.code -- )    dup  byte.code   !
    byte.code>cfa'(tachyon)    cfa'>nfa'(tachyon)  ;

:   .byte.code>execution.addr  ( byte.code -- )    4 *  7500 +    3f ?y  ." \"  6  u.r  ;

:   .id(tachyon.byte.code)     ( byte.code -- )    dup  valid.tachyon.cog:?  0=  if  drop  exit  then
    dup  byte.code   !
    byte.code>cfa'(tachyon)    cfa'>nfa'(tachyon)  .id(tachyon.nfa')  ;

:   .id(a')  ( a' -- )  c@'   32 ?y  .id(tachyon.byte.code)  ;

:   5c."   ( a' -- n )    0  >r    ."  ."   22 emit    ."   "      \  ." 12345678"
    begin    r>   1+   >r   dup  c@'  ?dup   if   emit   1+  0  else   drop  -1  then
    until    22  emit  r>   1+   ;

:   5a."   ( a' -- n )    0  >r    ."  ."   22 emit    ."   "      \  ." 12345678"
    begin    r>   1+   >r   dup  c@'  ?dup   if   emit   1+  0  else   drop  -1  then
    until    22  emit  r>   1+   ;

:  2+   2  +   ;

variable  here'(tachyon)
variable  last'(tachyon)
variable    cp'(tachyon)


:  cfa'>nfa'(tachyon)   ( cfa' -- nfa' )   begin 1- dup c@'  20 <  until  ;  \ ( cfa' -- nfa' | 0 )

: ,call.cfa'  1234  16,'  ;

: Tn3:     >IN  @  >R       CREATE.ACI.328   HERE'  ,   _[J]     R>  >IN  !      \ headless tinyForth
       \                   CREATE           HERE'  ,
          LAST @  T:QUEUE  T:QUEUE.COUNTER @ +    CELL  +   !
          2 CELLS          T:QUEUE.COUNTER   +!   here'     here'(t:)  !
\         defer'>call.cfa'?    @  if   last  @  nfa-count   1f  and  defer'>call.cfa'  then

          T:NFA.QUEUE.COUNTER  @  last.nfa'(head).length @  1+  -
          head.start           @     +
          head.Forth?  @   if  drop  else   last'  !  then        here'  cfa'>nfa'  if  last'  !  then
          DOES>  @    16,'  ;    \ ,call.cfa'    ;

#then

: compile.word.into.rom/ram ( cfa' -- )
  dup   here' - abs 0fffff > if  @  0  10000 um/mod swap 1+ 0 swap R=#16  ?dup if 0 swap Rt=# then  0  call_r   exit   then
  24rel.check.cm4    _24#>5..10#2.j.j11#   op.code.of.call @   +  0~15<->16~31  32,'  ;

: ,word  ( cfa' -- )      0  swap  ldri     0  call_r ( call_r0 )  ;
: ,word' ( cfa' -- )  1+  0  swap  ldri     0  call_r ( call_r0 )  ;

: ef:     t:  ;
: ef:'    t:  ;

: ."'     '"'   word  count \ 2dup  +  c@  '"' <>  abort" *** It must be terminated with "  '"' emit  ."  ***"
  cfa'.of.."|   @     compile.word.into.rom/ram     bounds
  ?do     i     c@    8,'
  loop    ;

: ."'*    '"'   word  count \ 2dup  +  c@  '"' <>  abort" *** It must be terminated with "  '"' emit  ."  ***"
  cfa'.of.."|*  @     compile.word.into.rom/ram     bounds
  ?do     i     c@    8,'
  loop    ;

: compile..".related.word   ( cfa' -- )  >r   '"'  word  count    dup   \ 2dup  +  c@  '"' <>  abort" *** It must be terminated with "  '"' emit  ."  ***"
  r>  ( cfa'.of.."|  @ )   compile.word.into.rom/ram     8,'   bounds
  ?do     i   c@     8,'
  loop    3   here'  3  and  -  0  ?do  ff  8,'  loop   here'  3  +   fffffffc  and  org  ;

: abort"'    ( -- )   cfa'.of.abor."   @   compile..".related.word  ;
: ."'        ( -- )   cfa'.of.."|      @   compile..".related.word  ;

: abort"'*   ( -- )   cfa'.of.abor."*  @   compile..".related.word  ;
: ."'*       ( -- )   cfa'.of.."|*     @   compile..".related.word  ;


:  is'   ( cfa' -- )  '  cfa>cfa'  insert{  org  (jmp)  }insert  ;  \  ''  quit  is'  _quit

:  register.map             cr   cr   cr
   cr  ."  R0               general puspose register                                 " \
   cr  ."  R1               general puspose register                                 " \
   cr  ."  R2               general puspose register                                 " \
   cr  ."  R3               general puspose register                                 " \
   cr  ."  R4    Y          general puspose register                                 " \
   cr  ."  R5    T          Top of data stack                                        " \
   cr  ."  R6    W          user variable pointer of swiftForth                      " \
   cr  ."  R7    FSP        forth stack pointer                                      " \
   cr  ."  R8               general puspose register                                 " \
   cr  ."  R9               general puspose register                                 " \
   cr  ."  R10              general puspose register                                 " \
   cr  ."  R11              general puspose register                                 " \
   cr  ."  R12              general puspose register                                 " \
   cr  ."  R13   nSP  FRP   native Return stack Pointer = Forth Return stack Pointer " \
   cr  ."  R14   LR         Link Register                                            " \
   cr  ."  R15   PC         Program Counter                                          " \
   cr  ;

: Forth.Virtue.Machine ( VM )  cr   cr    cr
  cr  ."  ************** Forth CPU ******************************************"
  cr
  cr  ."                       ____ FSP <-- Forth Data Stack pinter(sp)"
  cr  ."                       |       "
  cr  ."                       |       "
  cr  ."  ...  S'''  S''  S'   S    T   <-- Top of stack (tos)"
  cr  ."  ...  R'''  R''  R'   R       "
  cr  ."                       |       "
  cr  ."                       |___ FRP <-- Forth Return Stack Pointer(rp)"
  cr
  cr  ."    R0  R1  R2  R3  Y   T   W   FSP R8  R9  Ra  Rb  Rc  FRP LR  PC "
  cr  ."    R0  R1  R2  R3  R4  R5  R6  R7  R8  R9  R10 R11 R12 R13 R14 R15"
  cr  ."    --- CMSIS ----"
  cr
  cr  ."  ************** Forth CPU ******************************************"
  cr  cr  cr   ;

:  memory.map0
   cr  ."  00000000   6d420000    jmp to 426c (thumb+1)   hardware cold start        " \
   cr  ."  00000004   0000426d                                                       " \
   cr  ."  00000008   ********    swiftForth (sF)                                    " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00002884   ********    swiftForth (sF)                                    " \
   cr  ."  00002888   ********    free space                                         " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00003FFC   ********    free space                                         " \
   cr  ."  00004000   ********    ----------------------------------- eForth start (eF) " \
   cr  ."                                                |                           " \
   cr  ."  00004100   00005FD0    ('boot)  -------- user.variable     hi             " \
   cr  ."  00004104   00000010    BASE                   |                           " \
   cr  ."  00004108   00000000    tmp                    |                           " \
   cr  ."  0000410C   0000007F    #TIB                   |                           " \
   cr  ."  00004110   00000000    >IN                    |                           " \
   cr  ."  00004114   20000A2A    HLD                    |                           " \
   cr  ."  00004118   00005A28    'EVAL    $interpret    |                           " \
   cr  ."  0000411C   0000D508    CONTEXT  last @        |                           " \
   cr  ."  00004120   20000A00    CP                     |                           " \
   cr  ."  00004124   20000A00    DP       dp @ = here   |                           " \
   cr  ."  00004128   0000D508    LAST    --------- user.variable                    " \
   cr  ."  0000402C   00000000    head?   --------- user.variable extension          " \
   cr  ."  00004030   20006000    hp                     |                           " \
   cr  ."  00004034   ********    #emit                  |                           " \
   cr  ."  00004038   ********    'emit                  |                           " \
   cr  ."                |        'key                   |                           " \
   cr  ."                |                               |                           " \
   cr  ."  00004150   ********    user.var9  ------ user.variable extension          " \
   cr  ."  00004154   ********    var0 ------------ ordinary.variable                " \
   cr  ."                |                               |                           " \
   cr  ."  00004178   ********    var9 ------------ ordinary.variable                " \
   cr  ."  0000417C   ********    extra variable                                     " \
   cr  ."                |                |                                          " \
   cr  ."  00004268   ********    extra variable                                     " \
   cr  ."  0000426C   ********    (00000000)=6d420000  blinky  (00000004)=0000426d=0000426c+1 " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  000042EF   ********                           |                           " \
   cr  ."  000042F0   ********    ------ jmp_tF          |                           " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  0000434A   ********                         blinky                        " \
   cr  ."  0000434C   ********    free space                                         " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  000047FF   ********    free space                                         " \
   cr  ."  00004800   ********    PortF_Init                                         " \
   cr  ."                             |                                              " \
   cr  ."  0000491F   ********        |                                              " \
   cr  ."  00004920   ********      main    ------- original eForth start            " \
   cr  ."                             |                  |                           " \
   cr  ."                            !IO                 |                           " \
   cr  ."                             |                  |                           " \
   cr  ."                           doLIT                |                           " \
   cr  ."                             .                  |                           " \
   cr  ."                             .                  |                           " \
   cr  ."                                                |                           " \
   cr  ."  00006004   ********      COLD                 |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  00006030   ********        |     ------- original eForth end ----------   " \
   cr  ."  00006034   ********      4drop   ------- tinyForth (tF)                   " \
   cr  ."                             |                  |                           " \
   cr  ."  00006324   ********       tF                  |                           " \
   cr  ."           |                 |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  000064AA   ********       end    ------- tinyForth (tF)                   " \
   cr  ."  000064AC   ********    free space                                         " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00007FFF   ********    free space                                         " \
   cr  ."  00008000   ********    header                                             " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  0000FFFF   ********        |                                              " \
   cr  ."  00010000   ********   free space                                          " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  0001FFFF   ********   free space
   cr  ."  00020000   ********   forbidden area                                      " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00FFFFFF   ********   forbidden area                                      " \
   cr  ."  01000000   ********    ROM space      Stellarris Launchpad                " \
   cr  ."                             |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  01007FFF   ********    ROM space              |                           " \
   cr  ."  01008000   ********    ROM space              |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  01008BFF   ********    ROM space      Stellarris Launchpad                " \
   cr  ."  0100C000   ********   forbidden area                                      " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  1FFFFFFC   ********   forbidden area                                      " \
   cr  ."  20000000   ********   ------------------------------------------ RAM start" \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000200   00005fd0    ('boot)  -------- user.variable                    " \
   cr  ."  20000204   00000010    BASE                   |                           " \
   cr  ."  20000208   00000000    tmp                    |                           " \
   cr  ."  2000020C   20000380    #TIB                   |                           " \
   cr  ."  20000210   00000000    >IN                    |                           " \
   cr  ."  20000214   ********    HLD                    |                           " \
   cr  ."  20000218   00005A28    'EVAL                  |                           " \
   cr  ."  2000021C   20000A00    CONTEXT                |                           " \
   cr  ."  20000220   ********    CP                     |                           " \
   cr  ."  20000224   20000A00    DP                     |                           " \
   cr  ."  20000228   0000D508    LAST ------------ user.variable                    " \
   cr  ."  2000022C   00000000    head?     ------- user.variable                    " \
   cr  ."  20000230   20006000    hp                     |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000250   ********    user.var9 ------- user.variable                    " \
   cr  ."  20000254   ********    var0 ------------ ordinary.variable                " \
   cr  ."                                                |                           " \
   cr  ."  20000278   ********    var9 ------------ ordinary.variable                " \
   cr  ."  2000027c   ********                                                       " \
   cr  ."  20000280   ********         ------------ return stack                     " \
   cr  ."                                                |                           " \
   cr  ."  20000300   ********    rp0  ------------ return stack                     " \
   cr  ."  20000304   ********         ------------   dtat stack                     " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000378   ********    sp0  ------------   dtat stack                     " \
   cr  ."  2000037C   ********                                                       " \
   cr  ."  20000380   ********    TIB                    |                           " \
   cr  ."                           |                                                " \
   cr  ."  200003FC   ********      |                                                " \
   cr  ."  20000400   ********    ------------------- free RAM                       " \
   cr  ."                           |                    |                           " \
   cr  ."                          >98h(152=38*4)        |                           " \
   cr  ."                           |                    |                           " \
   cr  ."  20000498   ********    sp0 (sF)               |                           " \
   cr  ."                           |                    |                           " \
   cr  ."                         150h(336=84*4)         |                           " \
   cr  ."                           |                    |                           " \
   cr  ."  200005E8   ********    rp0 (sF)               |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000600   ********    ------------------- free RAM                       " \
   cr  ."                                                |                           " \
   cr  ."  20000A00   ********    DOWNLOAD.TO.RAM.START  | <-- testing program in RAM" \
   cr  ."                 |                |             |                           " \
   cr  ."              1k byte             |             |                           " \
   cr  ."                 |                |             |                           " \
   cr  ."  20001000   ********    DOWNLOAD.TO.RAM.END+1  |                           " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  20007FFC   ********   ------------------------------------------ RAM end  " \
   cr  ."  20008000   ********                      forbidden area                   " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  FFFFFFFF   ********                      forbidden area                   " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ;

variable  cfa'.of.hi

:  memory.map
   cr  ."  00000000   6d420000    jmp to 426c (thumb+1)   hardware cold start        " \
   cr  ."  00000004   0000426d                                                       " \
   cr  ."  00000008   ********    swiftForth (sF)                                    " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00002884   ********    swiftForth (sF)                                    " \
   cr  ."  00002888   ********    free space                                         " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00003FFC   ********    free space                                         " \
   cr  ."  00004000   ********    -------------------------------- eForth start (eF) " \
   cr  ."                                                |                           " \
   cr  ."  00004100"  cfa'.of.hi  @  0b  u.r ( 00005FD0 )
                           ."     ('boot)  -------- user.variable     hi             " \
   cr  ."  00004104   00000010    BASE                   |                           " \
   cr  ."  00004108   00000000    tmp                    |                           " \
   cr  ."  0000410C   0000007F    #TIB                   |                           " \
   cr  ."  00004110   00000000    >IN                    |                           " \
   cr  ."  00004114   20000A2A    HLD                    |                           " \
   cr  ."  00004118   00005A28    'EVAL    $interpret    |                           " \
   cr  ."  0000411C   0000D508    CONTEXT  last @        |                           " \
   cr  ."  00004120   20000A00    CP                     |                           " \
   cr  ."  00004124   20000A00    DP       dp @ = here   |                           " \
   cr  ."  00004128   0000D508    LAST    --------- user.variable                    " \
   cr  ."  0000402C   00000000    head?                  |                           " \
   cr  ."  00004030   20006000    hp                     |                           " \
   cr  ."  00004034   ********    user.var2  ------ user.variable extension          " \
   cr  ."                |        #emit                  |                           " \
   cr  ."                |        'emit                  |                           " \
   cr  ."                |        'key                   |                           " \
   cr  ."                |                               |                           " \
   cr  ."  00004150   ********    user.var9  ------ user.variable extension          " \
   cr  ."  00004154   ********    var0 ------------ ordinary.variable                " \
   cr  ."                |                               |                           " \
   cr  ."  00004178   ********    var9 ------------ ordinary.variable                " \
   cr  ."  0000417C   ********    extra variable                                     " \
   cr  ."                |                |                                          " \
   cr  ."  00004268   ********    extra variable                                     " \
   cr  ."  0000426C   ********    (00000000)=6d420000  blinky  (00000004)=0000426d=0000426c+1 " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  000042EC   ********                           |                           " \
   cr  ."  000042F0   ********    ------ jmp_tF          |                           " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  0000434A   ********                         blinky                        " \
   cr  ."  0000434C   ********    free space                                         " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  000047FC   ********    free space                                         " \
   cr  ."  00004800   ********    PortF_Init                                         " \
   cr  ."                             |                                              " \
   cr  ."  0000491C   ********        |                                              " \
   cr  ."  00004920   ********      main    ------- original eForth start            " \
   cr  ."                             |                  |                           " \
   cr  ."                            !IO                 |                           " \
   cr  ."                             |                  |                           " \
   cr  ."                           doLIT                |                           " \
   cr  ."                             .                  |                           " \
   cr  ."                             .                  |                           " \
   cr  ."                                                |                           " \
   cr  ."  00006004   ********      COLD                 |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  00006030   ********        |     ------- original eForth end ----------   " \
   cr  ."  00006034   ********      4drop   ------- tinyForth (tF)                   " \
   cr  ."                             |                  |                           " \
   cr  ."  00006324   ********       tF                  |                           " \
   cr  ."           |                 |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  000064AA   ********       end    ------- tinyForth (tF)                   " \
   cr  ."  000064AC   ********    free space                                         " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  00007FFC   ********    free space                                         " \
   cr  ."  00008000   ********    header                                             " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  0000FFFC   ********        |                                              " \
   cr  ."  00010000   ********   free space                                          " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  0001FFFC   ********   free space                                          " \
   cr  ."  00020000   ********   forbidden area                                      " \
   cr  ."  00FFFFFF   ********   forbidden area                                      " \
   cr  ."  01000000   ********    ROM space      Stellarris Launchpad ROM            " \
   cr  ."                             |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."                             |                  |                           " \
   cr  ."                             |               32k+C00                        " \
   cr  ."  01007FFF   ********    ROM space              |                           " \
   cr  ."  01008000   ********    ROM space              |                           " \
   cr  ."                             |                  |                           " \
   cr  ."  01008BFF   ********    ROM space      Stellarris Launchpad ROM            " \
   cr  ."  01008C00   ********   forbidden area                                      " \
   cr  ."                             |                                              " \
   cr  ."                             |                                              " \
   cr  ."  1FFFFFFC   ********   forbidden area                                      " \
   cr  ."  20000000   ********   ------------------------------------------ RAM start" \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000200"  cfa'.of.hi  @   0b u.r ( 00005FD0 )
                           ."     ('boot)  -------- user.variable                    " \
   cr  ."  20000204   00000010    BASE                   |                           " \
   cr  ."  20000208   00000000    tmp                    |                           " \
   cr  ."  2000020C   20000380    #TIB                   |                           " \
   cr  ."  20000210   00000000    >IN                    |                           " \
   cr  ."  20000214   ********    HLD                    |                           " \
   cr  ."  20000218   00005A28    'EVAL                  |                           " \
   cr  ."  2000021C   20000A00    CONTEXT                |                           " \
   cr  ."  20000220   ********    CP                     |                           " \
   cr  ."  20000224   20000A00    DP                     |                           " \
   cr  ."  20000228   0000D508    LAST ------------ user.variable                    " \
   cr  ."  2000022C   00000000    head?     ------- user.variable                    " \
   cr  ."  20000230   20006000    hp                     |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000250   ********    user.var9 ------- user.variable                    " \
   cr  ."  20000254   ********    var0 ------------ ordinary.variable                " \
   cr  ."                                                |                           " \
   cr  ."  20000278   ********    var9 ------------ ordinary.variable                " \
   cr  ."  2000027c   ********                                                       " \
   cr  ."  20000280   ********         ------------ return stack                     " \
   cr  ."                                                |                           " \
   cr  ."  20000300   ********    rp0  ------------ return stack                     " \
   cr  ."  20000304   ********         ------------   data stack                     " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000378   ********    sp0  ------------   data stack                     " \
   cr  ."  2000037C   ********                                                       " \
   cr  ."  20000380   ********    TIB                    |                           " \
   cr  ."                           |                                                " \
   cr  ."  200003FC   ********      |                                                " \
   cr  ."  20000400   ********    ------------------- free RAM                       " \
   cr  ."                           |                    |                           " \
   cr  ."                          >98h(152=38*4)        |                           " \
   cr  ."                           |                    |                           " \
   cr  ."  20000498   ********    sp0 (sF)               |                           " \
   cr  ."                           |                    |                           " \
   cr  ."                         150h(336=84*4)         |                           " \
   cr  ."                           |                    |                           " \
   cr  ."  200005E8   ********    rp0 (sF)               |                           " \
   cr  ."                                                |                           " \
   cr  ."  20000600   ********    ------------------- free RAM                       " \
   cr  ."                                                |                           " \
   cr  ."  20001000   ********    cp   DOWNLOAD.TO.RAM.START<--testing program in RAM" \
   cr  ."                 |                |             |                           " \
   cr  ."              4k byte             |             |                           " \
   cr  ."                 |                |             |                           " \
   cr  ."  20002000   ********         DOWNLOAD.TO.RAM.END+1                         " \
   cr  ."                 |                              |                           " \
   cr  ."  20004000   ********    hp0'                   |                           " \
   cr  ."                 |                              |                           " \
   cr  ."  20006000   ********    dp0*                   |                           " \
   cr  ."                 |                              |                           " \
   cr  ."                 |                              |                           " \
   cr  ."  20007FFC   ********   ------------------------------------------ RAM end  " \
   cr  ."  20008000   ********                      forbidden area                   " \
   cr  ."                                                |                           " \
   cr  ."                                                |                           " \
   cr  ."  FFFFFFFF   ********                      forbidden area                   " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ."  ........   ........   i/o                                                 " \
   cr  ;

defer     _DISPLAY.SYSTEM.VARIABLES'

:  map    memory.map   cr   _DISPLAY.SYSTEM.VARIABLES'   register.map   Forth.Virtue.Machine  ;

'  map         is   _map
'  count'      is   _count'
'  cfa'>nfa'   is   _cfa'>nfa'
'  nfa'>cfa'   is   _nfa'>cfa'

: 16>code  ( n1 n2 ...n16 -- )  10  0  do  0f  i  -  pick  8,'  loop  10 0 do  drop  loop  ;
: 16x     16>code  ;
: __       ( a' n1 n2 ...n16 -- )   10 pick org  16>code   u  ;

create    temp.dump    100 allot
variable  addr.of.qq

: IF'T<>#        T  swap  r:#      if'<>  ;
: IF'T=#16       T  swap  r:#      if'=   ;
: IF'T=#32       0  swap  ldri     T 0 r:r  if'=   ;
: IF'T=#    dup  0  ffff  between  if  IF'T=#16  else   IF'T=#32  then  ;

  VARIABLE  RESOLVE
  VARIABLE  LAST.OF'.ADDR

   : CASE'                   0 RESOLVE  !   0  t  r=r    {drop}   ;  IMMEDIATE
\  : CASE'                   0 RESOLVE  ! ( 0  t  r=r    {drop} ) ;  IMMEDIATE
   : OF'           1  swap   ldri           0  1  r:r
                   IF'=      1 RESOLVE +!   HERE' 1-  LAST.OF'.ADDR  !  ;  IMMEDIATE
   : ENDOF'        ELSE'     ;
   : ENDCASE'  \   HERE'  1-   c@'  e0  =   IF    -2 ALLOT'  ( -1  LAST.OF'.ADDR @  C+!' )  THEN
                   RESOLVE @   0
                   DO     THEN'   -1 RESOLVE +!
                   LOOP   RESOLVE @      ABORT"  CASE' ... ENDCASE' structure NOT PAIRED ?"   ;  IMMEDIATE

: _NUMBER,      ( d -- )
                DOUBLE? 0= IF DROP THEN
                STATE @
                IF      DOUBLE? IF  SWAP  [COMPILE] LITERAL  THEN
                        [COMPILE] LITERAL
                else    t:state?  @
                   if   {dup}  t=#
                   then
                THEN ;

( DEFER NUMBER,  )         ' _NUMBER, IS NUMBER,

: cfa.is.constant?'''  ( cfa -- f )
  case     [']  true  @  of  -1  endof
                              0  swap
  endcase  ;

: cfa.is.constant?  ( cfa -- f )  @  [']  true  @   =  ;  \ 0 1 true false

: _INTERPRET    ( -- )
                BEGIN   BL WORD DUP  C@
                WHILE   SAVE-SRC   FIND  ?DUP
                        IF      STATE @  =
                                IF       COMPILE,
                                ELSE     dup  cfa.is.constant?   t:state?  @   and
                                   if    execute  {dup}  t=#
                                   else  EXECUTE  \ ?STACK
                                   then             ?STACK
                                THEN
                        ELSE    NUMBER   NUMBER,
                        THEN    ?UNSAVE-SRC
                REPEAT DROP ;

( DEFER INTERPRET )   ' _INTERPRET IS INTERPRET

: stack.notation(stm32f103mecrispForth)  ( -- )
  cr  ."   stm32f103  cortex M3  *** eForth ***      R0  R1  R2  R3  R4  R5 === scratch register "
  cr  ."                                                              Y   W                      "
  cr  ."   (RD+14)  (RD+10)  (RD+0C)  (RD+8)   (RD+4)   (RD)                                         "
  cr  ."   (RP+14)  (RP+10)  (RP+0C)  (RP+8)   (RP+4)   (RP)                                         "
  cr  ."    r'''''   r''''    r'''     r''      r'       r                R  is  top of return stack "
  cr  ."    s'''''   s''''    s'''     s''      s'       s      T         T  is  top of data   stack "
  cr  ."   (SP+14)  (SP+10)  (SP+0C)  (SP+8)   (SP+4)   (SP)                                         "
  cr  ."   (R7+14)  (R7+10)  (R7+0C)  (R7+8)   (R7+4)   (R7)    R6                                   "
  cr  ."                                                                                             "
  cr  ."                                                    R8  R9  R10 R11 R12 === scratch register "
  cr  ."                                                    R8  R9  Ra  Rb  Rc  === scratch register "
  cr  ."                                                    R13   ( Rd is nsp ) === native stack pointer "
  cr  ."                                                    R14   ( Re is LR  ) === link register    "
  cr  ."                                                    R15   ( Rf is PC  ) === program counter  "  cr  ;






















  :   ('    bl   word   count   string>cfa   0=   abort"   invalid word"  8 +  @          ;
  :   )=    bl   word   count   string>cfa   0=   abort"   invalid word"  8 +  @   (#)=#  ;
  :   )x    bl   word   count   string>cfa   0=   abort"   invalid word"  8 +  @   (#)x#  ;
  :   )o    bl   word   count   string>cfa   0=   abort"   invalid word"  8 +  @   (#)o#  ;
  :   )n    bl   word   count   string>cfa   0=   abort"   invalid word"  8 +  @   (#)n#  ;

: r0=(pc+#)?  ( a' -- -1 / 0 )  16@'  ff00  and  4800  =  ;
: r0=cfa',call_r0?  ( a' -- f )   dup   2+  16@'  ."|?  off    \  r0=(pc+#)
  4780 ( call_r0 )  <>   if       drop  0   exit  then         \  call_r0
  dup  r0=(pc+#)?
  if   dup  (pc+#)  16@'   fffe  and   dup   t:?(cfa')  \  a' t:  f
       if      over   (.12345678..55.66.77.88....)    dup  34 ?y  cfa'>.id  drop
               dup>r  cfa'.of.."|   @   =      r>  cfa'.of.."|   @   =   or
               if     space  dup    4 +  count'  dup  ."|?  !   type'   '"'  emit
           \   else   drop
               then   (pc+#)  dup  A'>DATA:QUEUE    \.(XXXXxxxx)=XXXXxxxx   -1    exit
       then    2drop
  then         drop   0  ;                                             \

: r0=cfa',call_r0?  ( a' -- f )   dup   2+  16@'  ."|?  off    \  r0=(pc+#)
  4780 ( call_r0 )  <>   if       drop  0   exit  then         \  call_r0
  dup  r0=(pc+#)?
  if   dup  (pc+#)  16@'   fffe  and   dup   t:?(cfa')  \  a' t:  f
       if      over   (.12345678..55.66.77.88....)    dup  34 ?y  cfa'>.id  drop
               dup>r  cfa'.of.."|    @  =  r@  cfa'.of.$"|    @  =  or  r@   cfa'.of.abor."   @  =  or
               r@     cfa'.of.."|*   @  =  r@  cfa'.of.$"|*   @  =  or  r>   cfa'.of.abor."*  @  =  or     or
               if     space  dup    4 +  count'  dup  ."|?  !   type'   '"'  emit
           \   else   drop
               then   (pc+#)  dup  A'>DATA:QUEUE    \.(XXXXxxxx)=XXXXxxxx   -1    exit
   \    else    drop
       then    drop  ( 2drop )
  then         drop   0  ;

' r0=cfa',call_r0?   is  _r0=cfa',call_r0?

variable  var.counter
variable  var.size             100  var.size   !
variable  var.start       20000600  var.start  !

:  var32' var.counter @   var.size @  >=  abort"  **** variables exceeding the size allowable ****"
   t:  {dup}  t  var.start @   var.counter @  +  ldri  ret'  0 32,'  4 var.counter +! ;

:  var8'  var.counter @   var.size @  >=  abort"  **** variables exceeding the size allowable ****"
   t:  {dup}  t  var.start @   var.counter @  +  ldri  ret'  0  8,'  1 var.counter +! ;

:  variable'   var32'  ;
:  variable8'  var8'   ;

:  constant'   t:  {dup}   t  swap  ldri  ret'  ;
:  equ'        constant'   ;

:      stack.clear   abort  ;   \ reset-stacks
:  sc  stack.clear          ;
:  rs  reset-stacks         ;   \ RESET-STACKS

:  display.08.bit.data   ( a' -- )   cr  dup   (.12345678..55.............)  2e ?y  ."  8->"  2 spaces   8@'  .xxx       ;
:  display.08.bit.data.range  ( from' len' -- )   bounds
   do      i   display.08.bit.data
   loop    ;

:  display.16.bit.data   ( a' -- )   cr  dup   (.12345678..55.66..........)  2e ?y  ." 16->"  2 spaces  16@'  .xxxxx     ;
:  display.16.bit.data.range  ( from' len' -- )   bounds
   do      i      display.16.bit.data      2
   +loop   ;

:  display.32.bit.data   ( a' -- )   cr  dup   (.12345678..55.66.77.88....)
   2e ?y  ." 32->"  2 spaces  32@'   dup .xxxxxxxx   3f ?y  ." \ "   .ID'(CFA'.LNC)  ;   \ .id'(cfa')   ;


:  display.32.bit.data.range  ( from' len' -- )   bounds
   do      i      display.32.bit.data      4
   +loop   ;

0  value  temp.a'

:  disassem.n.bit.data   ( a' -- a'+len -1 / a' 0 )    to  temp.a'
   data.range.buffer     data.range.buffer.size  @   bounds
   do              i     @   0=   if   0   leave     then
          temp.a'  i 4+  @   =    if   i  2@   display.32.bit.data.range   cr  i  2@  +   to  temp.a'  -1  leave  then   8
   +loop  if   temp.a'  -1   else  temp.a'  0   then   ;

' disassem.n.bit.data  is  _disassem.n.bit.data

tachyonForth?  @     tachyon.assembler?  @  and
#if
   pFth?  @
   #if
   14  equ    forth.PC

  150  equ    ?????
  151  equ    ?????
  152  equ    ?????
  153  equ    ?????
  154  equ    ?????
  155  equ    ?????
  156  equ    ?????
  157  equ    ?????
  158  equ    ?????
  159  equ    ?????
  15a  equ    ?????
  15b  equ    ?????
  15c  equ    ?????
  15d  equ    ?????
  15e  equ    ?????
  15f  equ    ?????

  160  equ    ?????
  161  equ    ?????
  162  equ    ?????
  163  equ    ?????
  164  equ    ?????
  165  equ    ?????
  166  equ    ?????
  167  equ    ?????
  168  equ    ?????
  169  equ    ?????
  16a  equ    ?????
  16b  equ    ?????
  16c  equ    ?????
  16d  equ    ?????
  16e  equ    ?????
  16f  equ    ?????

  170  equ    ?????
  171  equ    ?????
  172  equ    ?????
  173  equ    ?????
  174  equ    ?????
  175  equ    ?????
  176  equ    ?????
  177  equ    ?????
  178  equ    ?????
  179  equ    ?????
  17a  equ    ?????
  17b  equ    ?????
  17c  equ    ?????
  17d  equ    ?????
  17e  equ    ?????
  17f  equ    ?????
  180  equ    ?????
  181  equ    ?????
  182  equ    ?????
  183  equ    ?????
  184  equ    ?????
  185  equ    ?????
  186  equ    ?????
  187  equ    ?????
  188  equ    ?????
  189  equ    ?????
  18a  equ    ?????
  18b  equ    ?????
  18c  equ    ?????
  18d  equ    ?????
  18e  equ    ?????
  18f  equ    ?????

  190  equ    ?????
  191  equ    ?????
  192  equ    ?????
  193  equ    ?????
  194  equ    ?????
  195  equ    ?????
  196  equ    ?????
  197  equ    ?????
  198  equ    ?????
  199  equ    ?????
  19a  equ    ?????
  19b  equ    ?????
  19c  equ    ?????
  19d  equ    ?????
  19e  equ    ?????
  19f  equ    ?????

  1a0  equ    ?????
  1a1  equ    ?????
  1a2  equ    ?????
  1a3  equ    ?????
  1a4  equ    ?????
  1a5  equ    ?????
  1a6  equ    ?????
  1a7  equ    ?????
  1a8  equ    ?????
  1a9  equ    ?????
  1aa  equ    ?????
  1ab  equ    ?????
  1ac  equ    ?????
  1ad  equ    ?????
  1ae  equ    ?????
  1af  equ    ?????

  1b0  equ    ?????
  1b1  equ    ?????
  1b2  equ    ?????
  1b3  equ    ?????
  1b4  equ    ?????
  1b5  equ    ?????
  1b6  equ    ?????
  1b7  equ    ?????
  1b8  equ    ?????
  1b9  equ    ?????
  1ba  equ    ?????
  1bb  equ    ?????
  1bc  equ    ?????
  1bd  equ    ?????
  1be  equ    ?????
  1bf  equ    ?????

  1c0  equ    ?????
  1c1  equ    ?????
  1c2  equ    ?????
  1c3  equ    ?????
  1c4  equ    ?????
  1c5  equ    ?????
  1c6  equ    ?????
  1c7  equ    ?????
  1c8  equ    ?????
  1c9  equ    ?????
  1ca  equ    ?????
  1cb  equ    ?????
  1cc  equ    ?????
  1cd  equ    ?????
  1ce  equ    ?????
  1cf  equ    ?????

  1d0  equ    ?????
  1d1  equ    ?????
  1d2  equ    ?????
  1d3  equ    ?????
  1d4  equ    ?????
  1d5  equ    ?????
  1d6  equ    ?????
  1d7  equ    ?????
  1d8  equ    W
  1d9  equ    X
  1da  equ    Y
  1db  equ    Z
  1dc  equ    M
  1dd  equ    N
  1de  equ    P
  1df  equ    Q
  1e0  equ    SP
  1e1  equ    SP0
  1e2  equ    RP
  1e3  equ    RP0
  1e4  equ    ?????
  1e5  equ    ?????
  1e6  equ    ?????
  1e7  equ    ?????
  1e8  equ    ?????
  1e9  equ    ?????
  1ea  equ    ?????
  1eb  equ    ?????
  1ec  equ    ?????
  1ed  equ    ?????
  1ee  equ    ?????
  1ef  equ    ?????
  1f0  equ    PAR
  1f1  equ    CNT
  1f2  equ    INA
  1f3  equ    INB
  1f4  equ    OUTA
  1f5  equ    instr
  1f6  equ    DIRA
  1f7  equ    DIRB
  1f8  equ    CTRA
  1f9  equ    CTRB
  1fa  equ    FRQA
  1fb  equ    FRQB
  1fc  equ    PHSA
  1fd  equ    PHSB
  1fe  equ    VCFG
  1ff  equ    VSCL
   #else

  145  equ  ACCBYTE
  150  equ  ?????
  151  equ  ?????
  152  equ  ?????
  153  equ  ?????
  154  equ  ?????
  155  equ  ?????
  156  equ  _PUSHBRANCH
  157  equ  ?????
  158  equ  ?????
  159  equ  ?????
  15a  equ  ?????
  15b  equ  ?????
  15c  equ  ?????
  15d  equ  ?????
  15e  equ  ?????
  15f  equ  ?????
  160  equ  ?????
  161  equ  ?????
  162  equ  ?????
  163  equ  ?????
  164  equ  ?????
  165  equ  ?????
  166  equ  ?????
  167  equ  ?????
  168  equ  ?????
  169  equ  ?????
  16a  equ  ?????
  16b  equ  ?????
  16c  equ  ?????
  16d  equ  ?????
  16e  equ  ?????
  16f  equ  ?????
  170  equ  ?????
  171  equ  ?????
  172  equ  ?????
  173  equ  ?????
  174  equ  ?????
  175  equ  popx
  176  equ  ?????
  177  equ  ?????
  178  equ  ?????
  179  equ  ?????
  17a  equ  ?????
  17b  equ  ?????
  17c  equ  ?????
  17d  equ  ?????
  17e  equ  ?????
  17f  equ  ?????
  180  equ  ?????
  181  equ  _PUSHACC
  182  equ  _pushx
  183  equ  ?????
  184  equ  ?????
  185  equ  ?????
  186  equ  ?????
  187  equ  PUSHCOG
  188  equ  ?????
  189  equ  ?????
  18a  equ  ?????
  18b  equ  ?????
  18c  equ  ?????
  18c  equ  _PUSHX_ret
  18d  equ  SETUPIP
  18e  equ  SAVEIP
  18f  equ  _PUSHR
  190  equ  ?????
  191  equ  ?????
  192  equ  _PUSHR_ret
  193  equ  rpopx
  194  equ  ?????
  195  equ  rpopins
  196  equ  RPOPX_ret
  197  equ  dst1
  198  equ  zcalls
  199  equ  clockpins
  19a  equ  spisck
  19b  equ  spiout
  19c  equ  spiinp
  19d  equ  spice
  19e  equ  spicnt
  19f  equ  REG0
  1a0  equ  REG1
  1a1  equ  REG2
  1a2  equ  REG3
  1a3  equ  REG4
  1a4  equ  txticks
  1a5  equ  txmask
  1a6  equ  regptr
  1a7  equ  Xptr
  1a8  equ  unext
  1a9  equ  ip
  1aa  equ  acc
  1ab  equ  x
  1ac  equ  r0
  1ad  equ  r1
  1ae  equ  r2
  1af  equ  stkptr
  1b0  equ  depth
  1b1  equ  lapcnt
  1b2  equ  target
  1b3  equ  T
  1b4  equ  S  \ datastk
  1b5  equ  S'
  1b6  equ  S''
  1b7  equ  retstk
  1b8  equ  ?????
  1b9  equ  ?????
  1ba  equ  ?????
  1bb  equ  ?????
  1bc  equ  ?????
  1bd  equ  ?????
  1be  equ  ?????
  1bf  equ  ?????
  1c0  equ  ?????
  1c1  equ  ?????
  1c2  equ  ?????
  1c3  equ  ?????
  1c4  equ  ?????
  1c5  equ  ?????
  1c6  equ  ?????
  1c7  equ  ?????
  1c8  equ  ?????
  1c9  equ  ?????
  1ca  equ  ?????
  1cb  equ  ?????
  1cc  equ  ?????
  1cd  equ  loopstk    \  ice  equ  i
  1ce  equ  loopstk+1
  1cf  equ  loopstk+2
  1d0  equ  loopstk+3
  1d1  equ  loopstk+4
  1d2  equ  loopstk+5
  1d3  equ  loopstk+6
  1d4  equ  loopstk+7
  1d5  equ  branchstk
  1d6  equ  branchstk+1
  1d7  equ  branchstk+2
  1d8  equ  branchstk+3
  1d9  equ  branchstk+4
  1da  equ  branchstk+5
  1db  equ  _RUNMOD_
  1dc  equ  ?????
  1dd  equ  ?????
  1de  equ  ?????
  1df  equ  ?????
  1e0  equ  ?????
  1e1  equ  ?????
  1e2  equ  ?????
  1e3  equ  ?????
  1e4  equ  ?????
  1e5  equ  ?????
  1e6  equ  ?????
  1e7  equ  ?????
  1e8  equ  ?????
  1e9  equ  ?????
  1ea  equ  ?????
  1eb  equ  ?????
  1ec  equ  ?????
  1ed  equ  ?????
  1ee  equ  ?????
  1ef  equ  ?????
  1f0  equ  par
  1f1  equ  cnt
  1f2  equ  ina
  1f3  equ  inb
  1f4  equ  outa
  1f5  equ  instr
  1f6  equ  dira
  1f7  equ  dirb
  1f8  equ  ctra
  1f9  equ  ctrb
  1fa  equ  frqa
  1fb  equ  frqb
  1fc  equ  phsa
  1fd  equ  phsb
  1fe  equ  vcfg
  1ff  equ  vscl
   #then
#then


tachyonForth?  @     tachyon.assembler?  @  and    propellerForth? @  and
#if
  145  equ  ACCBYTE
  150  equ  ?????
  151  equ  ?????
  152  equ  ?????
  153  equ  ?????
  154  equ  ?????
  155  equ  ?????
  156  equ  _PUSHBRANCH
  157  equ  ?????
  158  equ  ?????
  159  equ  ?????
  15a  equ  ?????
  15b  equ  ?????
  15c  equ  ?????
  15d  equ  ?????
  15e  equ  ?????
  15f  equ  ?????
  160  equ  ?????
  161  equ  ?????
  162  equ  ?????
  163  equ  ?????
  164  equ  ?????
  165  equ  ?????
  166  equ  ?????
  167  equ  ?????
  168  equ  ?????
  169  equ  ?????
  16a  equ  ?????
  16b  equ  ?????
  16c  equ  ?????
  16d  equ  ?????
  16e  equ  ?????
  16f  equ  ?????
  170  equ  ?????
  171  equ  ?????
  172  equ  ?????
  173  equ  ?????
  174  equ  ?????
  175  equ  popx
  176  equ  ?????
  177  equ  ?????
  178  equ  ?????
  179  equ  ?????
  17a  equ  ?????
  17b  equ  ?????
  17c  equ  ?????
  17d  equ  ?????
  17e  equ  ?????
  17f  equ  ?????
  180  equ  ?????
  181  equ  _PUSHACC
  182  equ  _pushx
  183  equ  ?????
  184  equ  ?????
  185  equ  ?????
  186  equ  ?????
  187  equ  PUSHCOG
  188  equ  ?????
  189  equ  ?????
  18a  equ  ip
  18b  equ  X
  18c  equ  Y
  18d  equ  sp           \  SETUPIP
  18e  equ  T            \  SAVEIP
  18f  equ  rp
  190  equ  usp
  191  equ  temp1
  192  equ  temp2
  193  equ  temp3
  194  equ  ?????     \ 6e0
  195  equ  rpopins
  196  equ  RPOPX_ret
  197  equ  dst1
  198  equ  zcalls
  199  equ  clockpins
  19a  equ  spisck
  19b  equ  spiout
  19c  equ  spiinp
  19d  equ  spice
  19e  equ  spicnt
  19f  equ  REG0
  1a0  equ  REG1
  1a1  equ  REG2
  1a2  equ  REG3
  1a3  equ  REG4
  1a4  equ  txticks
  1a5  equ  txmask
  1a6  equ  regptr
  1a7  equ  Xptr
  1a8  equ  unext
  1a9  equ  ip
  1aa  equ  acc
  1ab  equ  x
  1ac  equ  r0
  1ad  equ  r1
  1ae  equ  r2
  1af  equ  stkptr
  1b0  equ  depth
  1b1  equ  lapcnt
  1b2  equ  target
  1b3  equ  T
  1b4  equ  S  \ datastk
  1b5  equ  S'
  1b6  equ  S''
  1b7  equ  retstk
  1b8  equ  ?????
  1b9  equ  ?????
  1ba  equ  ?????
  1bb  equ  ?????
  1bc  equ  ?????
  1bd  equ  ?????
  1be  equ  ?????
  1bf  equ  ?????
  1c0  equ  ?????
  1c1  equ  ?????
  1c2  equ  ?????
  1c3  equ  ?????
  1c4  equ  ?????
  1c5  equ  ?????
  1c6  equ  ?????
  1c7  equ  ?????
  1c8  equ  ?????
  1c9  equ  ?????
  1ca  equ  ?????
  1cb  equ  ?????
  1cc  equ  ?????
  1cd  equ  loopstk    \  ice  equ  i
  1ce  equ  loopstk+1
  1cf  equ  loopstk+2
  1d0  equ  loopstk+3
  1d1  equ  loopstk+4
  1d2  equ  loopstk+5
  1d3  equ  loopstk+6
  1d4  equ  loopstk+7
  1d5  equ  branchstk
  1d6  equ  branchstk+1
  1d7  equ  branchstk+2
  1d8  equ  branchstk+3
  1d9  equ  branchstk+4
  1da  equ  branchstk+5
  1db  equ  _RUNMOD_
  1dc  equ  ?????
  1dd  equ  ?????
  1de  equ  ?????
  1df  equ  ?????
  1e0  equ  ?????
  1e1  equ  ?????
  1e2  equ  ?????
  1e3  equ  ?????
  1e4  equ  ?????
  1e5  equ  ?????
  1e6  equ  ?????
  1e7  equ  ?????
  1e8  equ  ?????
  1e9  equ  ?????
  1ea  equ  ?????
  1eb  equ  ?????
  1ec  equ  ?????
  1ed  equ  ?????
  1ee  equ  ?????
  1ef  equ  ?????
  1f0  equ  PAR
  1f1  equ  CNT
  1f2  equ  INA
  1f3  equ  INB    \  Reserved for future use   INB
  1f4  equ  OUTA
  1f5  equ  INSTR  \  Reserved for future use   OUTB
  1f6  equ  DIRA
  1f7  equ  DIRB   \  Reserved for future use   DIRB
  1f8  equ  CTRA
  1f9  equ  CTRB
  1fa  equ  FRQA
  1fb  equ  FRQB
  1fc  equ  PHSA
  1fd  equ  PHSB
  1fe  equ  VCFG
  1ff  equ  VSCL   \  deltaR

#then

nuc442eF?  @
#if   \  include STM32F4_IO3.F    hex   \  ???????   USART1_BASE <-- invalid
#else    include STM32F4_IO3.F    hex
#then

:  cfa'>io.a'    ( cfa' -- io.a' -1 / 0 )    >r
   r@   5    +    c@'  26  =   \ drop  0
   if        r>   4  +    c@'  -1
   else      r@   32@'   603e3f04 ( [ '' dup  32@' ] literal )  =     r@  4 +   16@'  4e00  =   and
      if     r>   8  +   32@'  -1
      else   r>   drop   0
      then
   then      ;

variable   io.a'
variable   io.name.found?

: .io.name  ( io.a' -- )    \  DROP   EXIT   \ ?????????
  special.for.swiftxForth?  @  if  drop  exit  then
  H.MODE  @  0  =  if  drop   exit   then    dup
  .io.name(constant)   if   drop    exit  then
  0  >r   #.counter  off          io.a' !        io.name.found? off
  begin  io.name.found?  @  if   r>drop   exit   then
         1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
         r@        T:NFA.QUEUE   +       @   dup  cfa'>io.a'  if  io.a' @ =  else  0  then  if  dup 49 ?y ." \ "  cfa'>.id  drop io.name.found? on then  drop
         r@  8 +   T:NFA.QUEUE   +   count  1f  and  dup>r  2drop  \ type    \ nfa'
         r>  9 +   r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                   T:NFA.QUEUE.COUNTER   @   >=
  until  r>drop                        0  >r   #.counter  off
  begin  io.name.found?  @  if   r>drop   exit   then
         1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
         r@        T:NFA.QUEUE*  +       @   dup  cfa'>io.a'  if  io.a' @ =  else  0  then  if  dup 49 ?y ." \ " cfa'>.id  drop  io.name.found? on then  drop
         r@  8 +   T:NFA.QUEUE*  +   count  1f  and  dup>r  2drop  \ type    \ nfa'
         r>  9 +   r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                   T:NFA.QUEUE.COUNTER   @   >=
  until  r>drop    ;

: .io.name  ( io.a' -- )   ( 2drop exit   \ )   DROP   EXIT   \ ?????????
  special.for.swiftxForth?  @  if     drop   exit   then
  H.MODE  @  0  =              if     drop   exit   then    dup
  .io.name(constant)           if     drop   exit   then
  0  >r   #.counter  off          io.a' !        io.name.found? off
  begin  io.name.found?  @     if   r>drop   exit   then
         1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
         r@        T:NFA.QUEUE   +       @   dup  cfa'>io.a'  if  io.a' @ =  else  0  then  if  dup 45 ( 49 ) ?y ." \ "  cfa'>.id  drop io.name.found? on then  drop
         r@  8 +   T:NFA.QUEUE   +   count  1f  and  dup>r  2drop  \ type    \ nfa'
         r>  9 +   r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                   T:NFA.QUEUE.COUNTER   @   >=
  until  r>drop                        0  >r   #.counter  off
  begin  io.name.found?  @  if   r>drop   exit   then
         1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
         r@        T:NFA.QUEUE*  +       @   dup  cfa'>io.a'  if  io.a' @ =  else  0  then  if  dup 45 ( 49 ) ?y ." \ " cfa'>.id  drop  io.name.found? on then  drop
         r@  8 +   T:NFA.QUEUE*  +   count  1f  and  dup>r  2drop  \ type    \ nfa'
         r>  9 +   r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                   T:NFA.QUEUE.COUNTER   @   >=
  until  r>drop    ;

' .io.name  is   _.io.name

: .io.name/label.name  ( a' -- )  dup  cfa'>n(lnc)  if  n>.id(lnc)  drop  else  .io.name  then  ;

:  x+  ( x1 -- x2 )   (?P)  @
   case   1  of   0   endof
          2  of   8   endof
          3  of  10   endof
          4  of  18   endof
                  0   swap
   endcase   +  ;

' .io.name/label.name  is   _.io.name/label.name 

: .io.name(tachyonForth)  ( io.a' -- )    H.MODE  @  0  =  if  drop   exit   then    dup
  VIRTUE.FORTH?  @     if   drop  49 +n ?y ." \ R"   u.  exit  then
  .io.name(constant)   if   drop                         exit  then
  0  >r   #.counter  off          io.a' !      io.name.found? off
  begin  io.name.found?  @  if   r>drop   exit   then
         1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
         r@        T:NFA.QUEUE   +       @   dup  cfa'>io.a'  if  io.a' @ =  else  0  then  if  dup  49 +n ?y ." \ " cfa'>.id  drop io.name.found? on then  drop
         r@  8 +   T:NFA.QUEUE   +   count  1f  and  dup>r  2drop  \ type    \ nfa'
         r>  9 +   r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                   T:NFA.QUEUE.COUNTER   @   >=
  until  r>drop                        0  >r   #.counter  off
  begin  io.name.found?  @  if   r>drop   exit   then
         1  #.counter +!
         4*?  @  if  r>    3 +  fffffffc  and  >r  then
         r@        T:NFA.QUEUE*  +       @   dup  cfa'>io.a'  if  io.a' @ =  else  0  then  if  dup  49 +n ?y ." \ " cfa'>.id  drop  io.name.found? on then  drop
         r@  8 +   T:NFA.QUEUE*  +   count  1f  and  dup>r  2drop  \ type    \ nfa'
         r>  9 +   r>  +  dup>r  4*?  @  if    3 +  fffffffc  and      then
                   T:NFA.QUEUE.COUNTER   @   >=
  until  r>drop    ;

' .io.name(tachyonForth)  is   _.io.name(tachyonForth)




2variable  temp.io.name
 variable  (io.name>cfa')

: io.name>cfa'   ( a' len -- cfa' -1 / 0 )    temp.io.name  2!    T:NFA.QUEUE    (io.name>cfa')  off
  T:QUEUE.counter  @   8  /    0
  ?do     dup   8  +   count  1f  and  temp.io.name  2@    s=(caseLESS)
          if    dup    @  (io.name>cfa')  !  -1   leave
          then  8  +   count  1f  and  +     4*?  @  if    aligned(4*)    then
  loop    drop            (io.name>cfa')  @  ?dup    if    nip   -1   else   0   then  ;

create  1st.string    40  allot
create  2nd.string    40  allot
create  3rd.string    40  allot
create  4th.string    40  allot

: erase.1~4.string  ( -- )
  1st.string  40  erase
  2nd.string  40  erase
  3rd.string  40  erase
  4th.string  40  erase  ;

: dump.string  ( -- )
  1st.string  40  cr  dump
  2nd.string  40  cr  dump
  3rd.string  40  cr  dump
  4th.string  40  cr  dump  ;

: -leading.chars      ( a'1 len1 char -- a'2 len2 )  2 pick  c@  =  if  1-  swap 1+  swap  then  ;

: io.name>io.a'/#  ( a' len -- cfa'/# -1 / 0 )   2dup  2>r   io.name>cfa'
  if      cfa'>io.a'    2r>  2drop
  else    2r>   string>number  dup  0=  if  nip  then
  then    ;

: io.name>io.a'/#  ( a' len -- cfa'/# -1 / 0 )   2dup  2>r   io.name>cfa'
  if       cfa'>io.a'
  else     2r@  string>cfa    if  dup    2@   00000628  00000060  d=  else  0  then    \ : DAC1DAT  40007408 ;
      if          8  +    @   -1
      else        dup     @   000000a4  =                 \ see 0    0 CONSTANT 0
         if       4  +    @   -1
         else     2r@   string>number                     \ 12345678
            if    nip         -1
            else  2drop        0
            then
         then
     then
  then     2r>   2drop  ;

: '10'~'15'-->A~F  ( 'n1' -- n1 )   dup 3130 ( '10' ) 3135 ( '15' )  between  if  6  -  then  ;

:   0~9?  ( n -- f )         0   9  between  ;
:   a~f?  ( n -- f )   upc  0A  0F  between  ;
: 10~15?  ( n -- f )     between  ;
: string=register?    ( a len -- r 1 / 0 )    >r    \ r0~r9  ra~rf  r10~r15
  r@  2  =  over c@  upc  'R'  =  and  over   0~9?  and  if  1+  c@     30 -  1  r>drop  exit  then  \ r0~r9
  r@  2  =  over c@  upc  'R'  =  and  over   a~f?  and  if  1+  c@ upc 31 -  1  r>drop  exit  then  \ ra~rf
  r>  3  =  over c@  upc  'R'  =  and  over 10~15?  and  if  1+ 16@ '10'~'15'-->A~F   1  r>drop  exit  then  0  ;  \ r10~r15

: 2nip  ( 1 2 3 4 -- 3 4 )  2swap  2drop  ;

: string=register?    ( a len -- r 1 / 0 )   >r        \ r?  r??
  dup  c@  upc  'R'  <>   if   r>drop  drop  0   exit  then  1+    \ R?     \ a+1
  dup  c@  upc  dup  '0'  '9'  between   r@  2  =  and       if  nip   '0' -  1  r>drop  exit  then             \ r0~r9
                dup  'A'  'F'  between   r@  2  =  and       if  nip   '7' -  1  r>drop  exit  then             \ ra~rf
  '1' =  over 1+ c@  '0'  '5'  between   r>  3  =  and  and  if  1+ c@ 26  -  1  r>drop  2nip  exit  then  drop  0  ; \ r10~r15

: string>io.a'/#''  ( a len -- cfa' -1 / 0 )  ( a len -- r 1 / 0 )
  -nulls   ')'  -TRAILCHARS  '(' -leading.chars  2dup  string=register?  if  nip  nip  1  exit  then  io.name>io.a'/#  ;

: 1st.string>io.a'/#''  ( -- cfa' -1 / 0 )  ( -- r 1 / 0 )  1st.string  40  string>io.a'/#''  ;
: 2nd.string>io.a'/#''  ( -- cfa' -1 / 0 )  ( -- r 1 / 0 )  2nd.string  40  string>io.a'/#''  ;
: 3rd.string>io.a'/#''  ( -- cfa' -1 / 0 )  ( -- r 1 / 0 )  3rd.string  40  string>io.a'/#''  ;
: 4th.string>io.a'/#''  ( -- cfa' -1 / 0 )  ( -- r 1 / 0 )  4th.string  40  string>io.a'/#''  ;

\ 2nd.string>io.a'/#''  ( -- cfa' -1 / 0 )   2nd.string  40  -nulls   ';'  -TRAILCHARS                       io.name>io.a'/#  ;

: 1st.string>io.a'/#  ( -- cfa' -1 / 0 ) 1st.string  40  -nulls   ')'  -TRAILCHARS  '(' -leading.chars   io.name>io.a'/#  ;
: 2nd.string>io.a'/#  ( -- cfa' -1 / 0 ) 2nd.string  40  -nulls   ';'  -TRAILCHARS                       io.name>io.a'/#  ;

\  variable   (1.char)
\ 2variable   (2.char)

: find.2.char.operator   ( a' len -- f )  2>r         (2.char)  off
  2r@   s" |="  search  if s" |=" (2.char) 2!   2drop  2r>  2drop  -1   exit  else  drop  then
  2r>  2drop  ;

: find.1.char.operator   ( a' len -- f )  2>r         (1.char)  off
  2r@  '='  scan  ?dup  if   '='  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  'x'  scan  ?dup  if   'x'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  'o'  scan  ?dup  if   'o'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  'n'  scan  ?dup  if   'n'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  '^'  scan  ?dup  if   '^'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  '|'  scan  ?dup  if   '|'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  '&'  scan  ?dup  if   '&'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  '+'  scan  ?dup  if   '+'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  '-'  scan  ?dup  if   '-'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  '*'  scan  ?dup  if   '+'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
\ 2r@  '/'  scan  ?dup  if   '-'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r@  ':'  scan  ?dup  if   ':'  (1.char)  !   2drop  2r>  2drop  -1   exit  else  drop  then
  2r>  2drop   0  ;

: (#)x#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 RxR   0 2 (r)=r  ;
: (#)o#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 RoR   0 2 (r)=r  ;
: (#)n#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 RnR   0 2 (r)=r  ;
: (#)^#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 RxR   0 2 (r)=r  ;
: (#)|#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 RoR   0 2 (r)=r  ;
: (#)&#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 RnR   0 2 (r)=r  ;
: (#)+#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 R+R   0 2 (r)=r  ;
: (#)-#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 R-R   0 2 (r)=r  ;
: (#)*#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 R*R   0 2 (r)=r  ;
\ (#)/#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 R/R   0 2 (r)=r  ;
: (#):#   0 rot r=#  1 swap r=#       2 0 r=(r)   2 1 R:R              ;

: parse.1.char.operator.expression    ( a len -- f )  \ 2dup + 1- c@  ';' <>  if  0  exit then
  2dup + 1- c@  ';' =  if  1-  then
  erase.1~4.string   (1.char) off  2>r
  2r@    find.1.char.operator 0=    if   2r>  2drop   0   exit   then
  2r@    (1.char)   @   scan  ?dup   \ a' len f
  if     dup>r    1-  >r  1+  2nd.string  r>   cmove
         2r>       -  r>      1st.string  rot  cmove
  else   2r>  2drop   drop    0   exit
  then \ dump.string
  1st.string>io.a'/#''     dup 0=  if     drop      0   exit   then
  2nd.string>io.a'/#''     dup 0=  if    3drop      0   exit   then
  2 pick  2dup   1  1  d=  if  4drop      drop      0   exit   then  drop  \ r? r?
  2 pick  2dup   1 -1  d=  if  2drop  nip  (#)=r   -1   exit   then  drop  \ r=name
  2 pick  2dup  -1  1  d=  if  2drop  nip  r=#     -1   exit   then  drop  \ name=r
  drop  nip  \  -1 -1
\ over    20000000     u<  ( drop  -1  for testing purpose )  if  2drop  0   exit   then        \ name=name
  (1.char)  @
  case   '='  of   (#)=#    endof
         'x'  of   (#)x#    endof
         'o'  of   (#)o#    endof
         'n'  of   (#)n#    endof
         '^'  of   (#)x#    endof
         '|'  of   (#)o#    endof
         '&'  of   (#)n#    endof
         '+'  of   (#)+#    endof
         '-'  of   (#)-#    endof
         '*'  of   (#)*#    endof
\        '/'  of   (#)/#    endof
         ':'  of   (#):#    endof
  endcase     -1   ;   \    (1st.string)=2nd.string  ;

' parse.1.char.operator.expression  is   _parse.1.char.operator.expression

: '|='  '|' 100 *  '='  +  ;

: parse.2.char.operator.expression   ( a len -- f )  \ 2dup  +  1- c@  ';'  <>  if  0  exit  then
  2dup + 1- c@  ';' =  if  1-  then
  erase.1~4.string   (2.char) off  2>r
  2r@    find.2.char.operator 0=    if   2r>  2drop   0   exit   then
  2r@    (2.char) 2@  search  \ ?dup   \ a' len f      ????????????
  if     dup>r    2-  >r  2+  2nd.string  r>   cmove
         2r>       -  r>      1st.string  rot  cmove
  else   2r>  2drop   drop    0   exit
  then \ dump.string
  1st.string>io.a'/#   0=  if         0   exit   then
  2nd.string>io.a'/#   0=  if   drop  0   exit   then
  0  (2.char)  2@  bounds  do  100 *  i c@   +   loop
  case  '|='  of  (#)|=#    endof
\        'x'  of   (#)x#    endof
\        'o'  of   (#)o#    endof
\        'n'  of   (#)n#    endof
\        '^'  of   (#)x#    endof
\        '|'  of   (#)o#    endof
\        '&'  of   (#)n#    endof
\        '+'  of   (#)+#    endof
\        '-'  of   (#)-#    endof
\        '*'  of   (#)*#    endof
\        '/'  of   (#)/#    endof
\        ':'  of   (#):#    endof
  endcase     -1   ;   \    (1st.string)=2nd.string  ;

' parse.2.char.operator.expression  is   _parse.2.char.operator.expression

:  ``  ( -- ; constant )     '      dup    cfa>cfa'  >r    \   r@  32@'  603e3f04 ( dup )  <> abort" *** not constant ***"
   r@      5  +    c@'    26   =                                            r@  32@'  603e3f04 ( dup ) =  and   r@  6 + 16@'  4770 ( ret' ) =  and
   if              r@      4   +    c@'  nip
   else            dup    2@   00000628  00000060  d=      \ : DAC1DAT  40007408 ;
      if           8  +    @
      else         dup     @   000000a4  =                 \ see 0    0 CONSTANT 0   pc side
         if        4  +    @  \  34 2 1        \ FFXXFFFX
         else      drop   r@   4  +      `5c#6c4#c3#4r8#  nip  F2400000  =  r@  32@'  603e3f04 ( dup ) =  and   r@  8 + 16@'  4770 ( ret' ) =  and    \ 1234  constant  pd15-blue1    target side
            if            r@   4  +   32@^  #6.4#.3#4.8#>16#
            else          r@   8  +   32@'         r@  4  +  16@'  4e00  =  r@  32@'  603e3f04 ( dup ) =  and   r@  6 + 16@'  4770 ( ret' ) =  and  0= abort" *** not constant ***"  \ 12345678
            then
         then
      then
   then    r>drop  ;





:  ``  ( -- ; constant )     '      dup    cfa>cfa'  >r    \   r@  32@'  603e3f04 ( dup )  <> abort" *** not constant ***"
   r@      5  +    c@'    26   =                                            r@  32@'  603e3f04 ( dup ) =  and   r@  6 + 16@'  4770 ( ret' ) =  and
   if              r@      4   +    c@'  nip
   else            dup    2@   00000628  00000060  d=      \ : DAC1DAT  40007408 ;
      if           8  +    @
      else         dup     @   000000a4  =                 \ see 0    0 CONSTANT 0   pc side
         if        4  +    @  \  34 2 1        \ FFXXFFFX
         else      drop   r@   4  +      `5c#6c4#c3#4r8#  nip  F2400000  =  r@  32@'  603e3f04 ( dup ) =  and   r@  8 + 16@'  4770 ( ret' ) =  and    \ 1234  constant  pd15-blue1    target side
            if            r@   4  +   32@^  #6.4#.3#4.8#>16#
            else          r@   8  +   32@'  r@ 4 + 16@'  ff00 and  4e00  =  r@  32@'  603e3f04 ( dup ) =  and   r@  6 + 16@'  4770 ( ret' ) =  and  0= abort" *** not constant ***"  \ 12345678
            then                                 ( 4e01 ??? )
         then
      then
   then    r>drop  ;













:  [``] ( cfa -- ; constant )   ( ' ) dup    cfa>cfa'  >r    \   r@  32@'  603e3f04 ( dup )  <> abort" *** not constant ***"
   r@      5  +    c@'    26   =                                            r@  32@'  603e3f04 ( dup ) =  and   r@  6 + 16@'  4770 ( ret' ) =  and
   if              r@      4   +    c@'  nip
   else            dup    2@   00000628  00000060  d=      \ : DAC1DAT  40007408 ;
      if           8  +    @
      else         dup     @   000000a4  =                 \ see 0    0 CONSTANT 0   pc side
         if        4  +    @  \  34 2 1        \ FFXXFFFX
         else      drop   r@   4  +      `5c#6c4#c3#4r8#  nip  F2400000  =  r@  32@'  603e3f04 ( dup ) =  and   r@  8 + 16@'  4770 ( ret' ) =  and    \ 1234  constant  pd15-blue1    target side
            if            r@   4  +   32@^  #6.4#.3#4.8#>16#
            else          r@   8  +   32@'         r@  4  +  16@'  4e00  =  r@  32@'  603e3f04 ( dup ) =  and   r@  6 + 16@'  4770 ( ret' ) =  and  0= abort" *** not constant ***"  \ 12345678
            then
         then
      then
   then    r>drop  ;

: [`]  [']   [``]   ;

\ vocabulary  host  host   definitions    :  here   here'  ;  : .s  .s ;

: S"            ( -<string">- )
                STATE @
                IF      COMPILE (S")  ,"
                ELSE    [CHAR] " WORD
                        NEW$ DUP>R OVER C@ 1+ MOVE
                        r> COUNT
                THEN ; IMMEDIATE


create  USER.variable.name.table  \  from 8051 eForth
,"         "  ( 40--> 0000   0000 <--FC40 )   ," 'NUMBER "  \ 68--> 8CC0   8CC0 <--FC68
,"         "  ( 42--> 0000   0000 <--FC42 )   ," HLD     "  \ 6A--> FD7C   FD7C <--FC6A
,"         "  ( 44--> 0000   0000 <--FC44 )   ," HANDLER "  \ 6C--> 0016   0016 <--FC6C
,"         "  ( 46--> 017C   017C <--FC46 )   ," CONTEXT "  \ 6E--> FC8A   FC8A <--FC6E
," SP0     "  ( 48--> 0050   0050 <--FC48 )   ,"         "  \ 70--> 0000   0000 <--FC70
," RP0     "  ( 4A--> 0010   0010 <--FC4A )   ,"         "  \ 72--> 0000   0000 <--FC72
," '?KEY   "  ( 4C--> 8212   8212 <--FC4C )   ,"         "  \ 74--> 0000   0000 <--FC74
," 'EMIT   "  ( 4E--> 8232   8232 <--FC4E )   ,"         "  \ 76--> 0000   0000 <--FC76
," 'EXPECT "  ( 50--> 929E   929E <--FC50 )   ,"         "  \ 78--> 0000   0000 <--FC78
," 'TAP    "  ( 52--> 925E   925E <--FC52 )   ,"         "  \ 7A--> 0000   0000 <--FC7A
," 'ECHO   "  ( 54--> 8DBA   8DBA <--FC54 )   ,"         "  \ 7C--> 0000   0000 <--FC7C
," 'PROMPT "  ( 56--> 942A   942A <--FC56 )   ,"         "  \ 7E--> 0000   0000 <--FC7E
," BASE    "  ( 58--> 0010   0010 <--FC58 )   ," CURRENT "  \ 80--> FC8A   FC8A <--FC80
," tmp     "  ( 5A--> 0020   0020 <--FC5A )   ,"         "  \ 82--> FC8A   FC8A <--FC82
," SPAN    "  ( 5C--> 0000   0000 <--FC5C )   ," CP      "  \ 84--> F53E   F53E <--FC84
," >IN     "  ( 5E--> 000A x 0003 <--FC5E )   ," NP      "  \ 86--> F53E   F53E <--FC86
," #TIB    "  ( 60--> 000A x 0003 <--FC60 )   ," LAST    "  \ 88--> 7C78   7C78 <--FC88
," 'tib    "  ( 62--> FD00   FD00 <--FC62 )   ," forth   "  \ 8A--> 7C78   7C78 <--FC8A
," CSP     "  ( 64--> 0000   0000 <--FC64 )   ,"         "  \ 8C--> 0000   0000 <--FC8C
," 'EVAL   "  ( 66--> 93DA   93DA <--FC66 )   ,"         "  \ 8E--> FFFF   FFFF <--FC8E


: display.system.variable* ( -- )
  cr  ." === SYSTEM VARIABLES ==="
  cr  1a  spaces  ." BEFORE-->AFTER"  2D spaces ." BEFORE-->AFTER"
  ( USER.variable.length @ )    90 40 -  2 /  0
  do     cr  2 spaces  USER.variable.name.table  i        0c *  +   1+   8    type
         i      2 *    dup  doUSER.base.in.rom @ + dup 9 u.r  ."  ---"   32@'  9 u.r   doUSER.base.in.ram @ + dup  32@'  0b u.r  ."  --- " .XXXXxxxx  ."  ||"
             2 spaces  USER.variable.name.table  i  1+    0c *  +   1+   8    type
         i 28 + 2 *    dup  doUSER.base.in.rom @ + dup 9 u.r  ."  ---"   32@'  9 u.r   doUSER.base.in.ram @ + dup  32@'  0b u.r  ."  --- " .XXXXxxxx  2
  +loop  ;

: dsv*  ( -- )  display.system.variable*  ;


variable  counter.adjacent

: .id'(adjacent)   ( nfa'adjacent -- )   count'  1f  and  type'  ;

: words'(adjacent)    cr              counter.adjacent   off
  last'(adjacent)  @
  begin  cr  >r    base @  decimal  ."   ("
         1    counter.adjacent   +!   counter.adjacent   @  5 u.r  base  !
         ."   nfa'="    r@  9  u.r
         ."   cfa'= ) " r@  count'  1f  and  +  MULTIPLE.OF.4.ALIGNED  9 u.r ."   org  t:  "
         r@  .id'(adjacent)
         r>   4  -    32@'  dup  0=
  until  drop   ;



: get.total.instructions(adjacent)        counter.adjacent   off
  last'(adjacent)  @
  begin  4  -    32@'  dup  0=         1  counter.adjacent   +!
  until  drop    counter.adjacent   @  ;

\ : nfa'>cfa'(adjacent)  (  nfa' -- cfa' )  count'  1f  and  +  MULTIPLE.OF.4.ALIGNED  ;

: words'(adjacent)/   cr      counter.adjacent   off
   last'(adjacent)  @
  begin  4  -    32@'  dup  0=         1  counter.adjacent   +!
  until  drop                             counter.adjacent   @  0
  do     last'(adjacent)  @   counter.adjacent   @  i  -  1  ?do  4  -  32@'  loop
         cr   ."   ("   base @  decimal  i 1+  5 u.r  base  !    >r
         ."   nfa'="    r@  9  u.r
         ."   cfa'= ) " r@  nfa'>cfa'(adjacent)  9 u.r ."   org  t:  "
         r>  .id'(adjacent)
  loop   ;

: words'a    words'(adjacent)   ;
: words'a/   words'(adjacent)/  ;










\ include  stm32f746.f

: 4.byte.aligment    ( a'1 -- a'2)  3  +  fffffffc  and  ;
: .id'(adjacent)     ( nfa'adjacent -- )  count'  1f  and  type'  ;
: lfa'>nfa'(stm32f746)  ( lfa' -- nfa' )  6  +  ;
: nfa'>cfa'(stm32f746)  ( nfa' -- cfa' )  count'  1f  and  +  4.byte.aligment  ;
: lfa'>cfa'(stm32f746)  lfa'>nfa'(stm32f746)    nfa'>cfa'(stm32f746)  ;

\ variable  first.lfa'    61c  first.lfa'   !

: get.total.words.stm32f746    ( -- n )  0  >r  first.lfa' @
  begin   16@'  dup  8000  <>
  while   r>    1+   >r
  repeat  drop  r>   ;         \  00 80 20 00



: get.total.words.stm32f746'   ( -- n )  0  >r  first.lfa'  @
  begin   cr    r@   1+   5  .r  dup   6 +  3  spaces   .id'(ADJACENT)   5 spaces
          16@'  dup  8000  <>
  while   r>    1+   >r
  repeat  drop  r>   ;         \  00 80 20 00



: get.total.words.stm32f746'   ( -- n )  0  >r  first.lfa'  @
  begin   cr    ."   ( "  r@   1+   5  .r  ." ) "  dup   6 +  3  spaces  .id'(ADJACENT)   5 spaces
          16@'  dup  8000  <>
  while   r>    1+   >r
  repeat  drop  r>   ;         \  00 80 20 00


: get.total.words.stm32f746'   ( -- n )  0  >r  first.lfa'  @
  begin   cr    ."   ( "  r@   1+   5  .r  ."  ) "
          dup   lfa'>cfa'(stm32f746)       ."  t:  "
          dup   6 +  3  spaces  .id'(ADJACENT)   5 spaces
          16@'  dup  8000  <>
  while   r>    1+   >r
  repeat  drop  r>   ;         \  00 80 20 00









: head(seperate)>head(adjacent)  ( -- )  last'(adjacent)  @
  begin  >r    r@   nfa'>cfa'(adjacent)   cfa'>nfa'  drop  ( from )  r@  ( to )
               r@  c@'  1f   and ( length )  1+  cmove'
         r>    4-   32@'  dup  0=
  until  drop   ;

: h>h    head(seperate)>head(adjacent)   ;

variable  next.nfa'(adjacent)

: cfa'>nfa'(adjacent)  ( cfa' - nfa' )  last'(adjacent)  @
  begin   dup  nfa'>cfa'(adjacent)   2  pick  <>
  while   4-   32@'
  repeat  nip  ;

: cfa'>nfa'(adjacent)  ( cfa' - nfa' )  last'(adjacent)  @
  begin   dup  nfa'>cfa'(adjacent)   2  pick  <>   over  4-   32@'  0<>  and
  while   4-   32@'
  repeat  nip  ;

: get.next.nfa'(adjacent) ( cfa' -- next.instruction's.nfa' )   last'(adjacent)  @
  begin   dup  next.nfa'(adjacent)  !   dup  nfa'>cfa'(adjacent)   2  pick  <>
  while   4-   32@'
  repeat  next.nfa'(adjacent)  @  dup   last'(adjacent)  @  =
  if      drop   last'(adjacent)  @  50 +
  then    ;

: get.next.lfa'(adjacent)   ( cfa' -- next.instruction's.lfa' )   last'(adjacent)  @
  begin   dup    next.nfa'(adjacent)  !   4-  32@'  dup  nfa'>cfa'(adjacent)  2  pick  =
  until   2drop  next.nfa'(adjacent)  @  dup   last'(adjacent)  @  =
  if      drop   last'(adjacent)  @  50 +
  then    4-     ;

: find.next.instruction's.lfa'.or.here'(adjacent) ( cfa' -- next.instruction's.lfa'/here' )
  dup cfa'>nfa'(adjacent)    last'(adjacent)  @  =
  if    drop    here'
  else  get.next.lfa'(adjacent)
  then  ;

: decompile.a.word(adjacent)  ( nfa' --)   head.Forth?  @   not  if   head>target   then
  ?dup  0= if  exit  then    doCOLON? off        \ Dr. C. H. Ting's eForth
  dup   4-   16@'  ( 32@' )  32@'  a86212b0 ( doCOLON ) = if   doCOLON? on  then    \.3f---
  >r    +pcfa? @   drop   0
  if    cr         r@  8 - (.12345678..12345678.......)   \ pcfa
  then  cr         r@  4-  (.12345678..12345678.......)   \ lfa
        cr         r@      (.12345678..55.66.77.88.99.aa.)nfa \ ."    t:  "  r@  count'  1f and ( tuck ) ( 2drop ) type'     r@  nfa'>cfa'(adjacent)  show.cfa+comment \  r@  .id'
        r@         nfa'>cfa'(adjacent)  dup  find.next.instruction's.lfa'.or.here'(adjacent)   2-
  decompile.a.range.instruction    r>  .immediate/compile-only/smudge   ;

: see'a    ERASE.DATA.RANGE.QUEUE  ERASE.DATA:QUEUE    '  cfa>cfa'  cfa'>nfa'(adjacent)   decompile.a.word(adjacent)  ;  \  ???????????
: see*     see'a  ;

: words'a(full)  ( -- )    last'(adjacent)  @
  begin   dup  decompile.a.word(adjacent)    4-  32@'  ?dup  0=
  until   ;

: words'a(full)  ( -- )         cr        counter.adjacent   off
   last'(adjacent)  @
  begin  4  -    32@'  dup  0=         1  counter.adjacent   +!
  until  drop                             counter.adjacent   @  0
  do     last'(adjacent)   @  counter.adjacent   @  i  -  1  ?do  4  -  32@'  loop
         decompile.a.word(adjacent)
  loop   ;

: words'f  ( -- )  cls  ERASE.DATA.RANGE.QUEUE  ERASE.DATA:QUEUE  words'a   words'a/   words'a(full)  ;

: ._0XX'     SPACE   30 EMIT  DUP  10  <  IF  0 .  BS  THEN  .  ;

: BOUNDS    ( FROM LENGTH -- )   OVER  +    SWAP  ;
: BETWEEN   1+  WITHIN   ;
: DUMP.HEX' ( FROM LENGTH -- )   BOUNDS
  CR   ."   0000   ORG"
  DO  I     0F    AND  0=
      IF    CR    ." ( "  I 10 < IF 0 . THEN  I 100 < IF  0 . BS  THEN  I 1000 < IF 0 . BS THEN  I .  BS ."  )"
      THEN  I     C@' ._0XX' ( SPACE )  7C  EMIT    800  0 DO LOOP
      I     0F     AND   0F  =  \  0=
      IF    ."  \ "  I   0F  -  10    BOUNDS
            DO     I     C@'   DUP  20  7F  BETWEEN
                   IF    EMIT
                   ELSE  DROP  2E   EMIT
                   THEN
               DROP
            LOOP
      THEN
  LOOP      ;

: TT'  0  10000  DUMP.HEX'   ;    \  INCLUDE  TN13.F   TT'


tachyonForth?  @     tachyon.assembler?  @  and
#if     cls
  include  8x32ASM864y69.F  \  ..6.f       \  \s    \ It stops here to generate disassembler.
  include  8x32DISASM864y28.F     
 
: disassem.range ( from to -- )  >r
  begin    cr   dis     dup  r@  >
  until    r>drop  ;

\ ( 4C AB FE 5C *036* )                  call_14C                             \ U/MOD
\ ( 45 91 FE 5C *079* )                  call_145                             \ ACCBYTE
\ ( 49 97 FE 5C *0D1* )                  call_149                             \ GETBYTE
\ ( 56 B9 FE 5C *0D9* )                  call_156                             \ _PUSHBRANCH
\ ( 5D C5 FE 5C *0E7* )                  call_15D                             \ _POPBRANCH
\ ( 63 D9 FE 5C *0DC* )                  call_163                             \ LPOPX
\ ( 6D 01 FF 5C *0D8* )                  call_16D                             \ _PUSHLP
\ ( 75 01 FF 5C *0F6* )                  call_175                             \ POPX
\ ( 81 19 FF 5C *07D* )                  call_181                             \ _PUSHACC
\ ( 82 19 FF 5C *019* )                  call_182                             \ push_X
\ ( 8D 25 FF 5C *0C6* )                  call_18D                             \ SETUPIP
\ ( 8E 25 FF 5C *0BF* )                  call_18E                             \ SAVEIP
\ ( 8F 25 FF 5C *0EA* )                  call_18F                             \ _PUSHR
\ ( 93 2D FF 5C *0EC* )                  call_193                             \ RPOPX
\ ( 15 00 7C 5C *048* )                  jmp_15                               \ drop

: disassem.{macro}  ( a' -- a'+4 -1 / a' 0 )   dup    32@'
  case   5cff0175   of  ." {pop.X}"   4  +     -1     endof
                                                0     swap
  endcase   ;

: dis{}  ( a' -- )  32@'
  case   5cfeab4c   of    40 ?y  ." \ {U/MOD}"        endof   \ call_14c
         5cfe9145   of    40 ?y  ." \ {ACCBYTE}"      endof   \ call_145
         5cfe9749   of    40 ?y  ." \ {GETBYTE}"      endof   \ call_149
         5cfeb956   of    40 ?y  ." \ {_PUSHBRANCH}"  endof   \ call_156
         5cfec55d   of    40 ?y  ." \ {_POPBRANCH}"   endof   \ call_15d
         5cfed963   of    40 ?y  ." \ {LPOPX}"        endof   \ call_163
         5cff016d   of    40 ?y  ." \ {_PUSHLP}"      endof   \ call_16d
         5cff0175   of    40 ?y  ." \ {POPX}"         endof   \ call_175
         5cff1981   of    40 ?y  ." \ {_PUSHACC}"     endof   \ call_181
         5cff1982   of    40 ?y  ." \ {_PUSHX}"       endof   \ call_182
         5cff258d   of    40 ?y  ." \ {SETUPIP}"      endof   \ call_18d
         5cff258e   of    40 ?y  ." \ {SAVEIP}"       endof   \ call_18e
         5cff258f   of    40 ?y  ." \ {_PUSHR}"       endof   \ call_18f
         5cff2d93   of    40 ?y  ." \ {RPOPX }"       endof   \ call_193
         5c7c0014   of    40 ?y  ." \ {2DROP}"        endof   \ jmp_14         
         5c7c0015   of    40 ?y  ." \ {DROP}"         endof   \ jmp_15
         5c7c0019   of    40 ?y  ." \ {PUSHX}"        endof   \ jmp_19
  endcase   ;

: disassem.range      ( from to -- )      >r
  begin    cr    dup>r   dis    r>  dis{}    dup  r@  >
  until    r>drop  ;

\ defer  _decompile.a.range.of.byte.code

\  b2c   b73  disassem.range       b74   b7b  _decompile.a.range.of.byte.code
\  b7c   ba7  disassem.range       ba8   baf  _decompile.a.range.of.byte.code
\  bb0   be3  disassem.range       be4   beb  _decompile.a.range.of.byte.code
\  bec   c1f  disassem.range       c20   c27  _decompile.a.range.of.byte.code
\  c28   c5b  disassem.range       c5c   c67  _decompile.a.range.of.byte.code
\  c68   cd7  disassem.range       cd8   cdf  _decompile.a.range.of.byte.code
\  ce0   d03  disassem.range       d04   d0b  _decompile.a.range.of.byte.code
\  d0c   d4b  disassem.range       d4c  3422  _decompile.a.range.of.byte.code

#then


: `8c        ( a' -- a' op.code )     dup    8@'  ;
:  8c:gene_        :.mnem_       ." `8c"          #=if2 ."                      "  .1"  mnem" ( .wzcr )  xt0 ;
:  8c:byte.code       ( op.code -- )
   create    dup  ,   8c:gene_
   does>     @        8,'  ( all.ok?.off )  ;

: `16c       ( a' -- a' op.code )     dup   16@'  ;
:  16c:gene_        :.mnem_      ." `16c"         #=if2 ."                      "  .1"  mnem" ( .wzcr )  xt0 ;
:  16c:byte.code      ( op.code -- )
   create    dup  ,   16c:gene_
   does>     @        16,'  ( all.ok?.off )  ;

: `32c       ( a' -- a' op.code )     dup   32@'  ;
:  32c:gene_        :.mnem_      ." `32c"         #=if4 ."                      "  .1"  mnem" ( .wzcr )  xt0 ;
:  32c:byte.code      ( op.code -- )
   create    dup  ,   32c:gene_
   does>     @        32,'  ( all.ok?.off )  ;

: `8c8#      dup 16@'  ff00  and  ;
:  8c8#:_gene       :.mnem_      ." `8c8#"        #=if2 ."             7  0  14p"  .1"  mnem" ( .wzcr )  xt0 ;
:  8c8#:byte.code
   create   dup  ,    8c8#:_gene
   does>    ( # a )   to (a)   8#*4.check  to  (#)
            (a')  @
            (#)       7  0  >?~?  +   16,'  all.ok?.off  ;
\ #then   ????????????????

variable  TOTAL.INSTRUCTION(pFth)

: get.total.instruction(pFth)        ( -- n )    44d3  last'  !
  nnnn?   off  last'  @    3  -  ( nfa'>lfa' )
  begin   1  nnnn?  +!    ( 2 - )    16@'  dup  0  =
  until   drop  nnnn?  @  dup  TOTAL.INSTRUCTION(pFth) !  ;

: instruction.n>nfa'(pFth)        ( n -- nfa' )  get.total.instruction(pFth)       swap  -  >r   0  ( 27ce )  last'  @  3 - ( nfa'>lfa' )
  begin   over   r@   <>
  while   ( 2  - )   16@'      \ cfa'>nfa'(propForth)
          swap  1+  swap
  repeat  nip  r>drop  3 + ( lfa'>nfa' ) ;    \ f3  instruction.n>nfa' --> 202a

: INSTRUCTION.N>cfa'(PFTH)  ( n -- cfa' )  INSTRUCTION.N>nfa'(PFTH)   NFA'>CFA'(PFTH)  ;

: words'.pFth^LFA'     ( -- )     cr   cr
  get.total.instruction(pFth)     dup  1+   1
  do      i   instruction.n>nfa'(pFth)
          cr   ."   ( "  i  4 .r(decimal)   i 5 .r   ."    nfa:"   dup     6 u.r   ."      cfa: "
          dup  dup>r   NFA'>CFA'(PROPFORTH)
      \   dup  6d0 -  2/  dup  200  <  if ."  **"  4 u.r ."  **"   else  drop 0a  spaces  then
          5 u.r  ."   lfa: )  "   r> 3 -  .xxxxx   ."   org  t:  "  count' 1f and  type'
  loop    drop    ;

: nfa'>instruction.n(pFth)  ( nfa' -- n )  >r  0  ( 27ce )  last'  @   \  nfa'
  begin    dup    r@   <>
  while    3 -  ( nfa'>lfa' ) 16@'  ( next.lfa' )  3 +  ( lfa'>nfa' )  swap  1+  swap
  repeat   drop  r>drop
  get.total.instruction(pFth)  swap  -  ;

: cfa'>INSTRUCTION.N(pFth)  ( cfa' -- n )   CFA'>NFA'(pFth)   NFA'>INSTRUCTION.N(pFth)  ;

: cogRAM>name  drop  2  ;

: .id(pFth.nfa)     ( nfa' -- )  count'  1f  and   type'  ;

: .id(pFth.cfa)     ( cfa' -- )  CFA'>NFA'(pFth)   .id(pFth.nfa)  ;

: .id(pFth.cfa)+special  ( a' -- n )  .id(pFth.cfa)  2 ;
: .id(pFth.cfa)+special  ( a' -- n )   dup>r  16@'
   case   \  2308  of  '.'  emit  '"' emit  space  r@  2+  count'  tuck  type' '"' emit  03 +  even.aligned  endof
             2308  of  's'  emit  '"' emit  space  r@  2+  count'  tuck  type' '"' emit  03 +  even.aligned  endof
          \  1a4c  of  '.'  emit  '"' emit  space  r@  2+  count'  tuck  type' '"' emit  03 +  even.aligned  endof
          \  00b2  of  r@  CFA'>INSTRUCTION.N(pFth)    1+  INSTRUCTION.N>NFA'(pFth)  r@ - 4 -  even.aligned  endof
             0c54  of  r@  16@'  .id(pFth.cfa)     r@  2 +  16@'  0b u.r  4   endof   \  _lit
             0020  of            ." 2lit"          r@  2 +  32@'  0b u.r  6   endof   \  _2lit
             0f8c  of  r@  16@'  .id(pFth.cfa)     r@  2 +  16@'  0b u.r  4   endof   \  _jmp
             0EAC  of  r@  16@'  .id(pFth.cfa)     r@  2 +  16@'  0c u.r  4   endof   \  _jz
             3d78  of            ." fds_var+0c"    r@  2 +  32@'  0c u.r  6   endof   \  fds_var+0c
             dup   .id(pFth.cfa)                                          2   swap
   endcase   r>drop  ;

pFth?  @
#if
:  .cog.instruction  ( Rn -- )  GET.TOTAL.INSTRUCTION(PFTH)  1  \  GET.TOTAL.INSTRUCTION(PFTH)
   do            i    INSTRUCTION.N>cfa'(PFTH)  32@'   over  =
          if     i    INSTRUCTION.N>nfa'(PFTH)    .id'.(pFth)    leave
          then
   loop   drop   ;  \

'  .cog.instruction  is   _.cog.instruction
#then

: (.1234.5678.)      ( a' -- )   cr  ."   ( "  dup  .xxxx   2 spaces       16@'  .xxxx  ."  )"    ;

: (.1234.5678.)....  ( a' -- )   cr  ."   ( "  dup  .xxxx   2 spaces  dup  16@'  .xxxx  ."  )"     20 ?y   16@'  .xxxx  ;

variable    a'(next.nfa'-5)

: decompile.a.word(pFth.n)   ( n -- )
  >r    r@    0=
  if    1     instruction.n>nfa'(pFth)   3 - ( nfa'>lfa' )  16@'  3 +  ( lfa'>nfa' ) ( nfa' of 0'th instruction )
  else  r@    instruction.n>nfa'(pFth)
  then      \.3F***
            cr  ."   ( "   dup   3 -  ( nfa'>lfa' )  dup  .xxxx     02 spaces  16@'  .xxxx  ."  )"    r@  38 ?y  ." \"  4 u.r    r@  8 u.r(decimal)
            cr  ."   ( "   dup   .xxxx   dup  dup  count'  nip  1f and  1+  10 min  bounds
            do  space  i  c@'  .xx  loop  ."  )"
            \.3F---
            cr  11  spaces    ."  t:  "  count' 1f and   2dup   type'    02 spaces 12 ?y
            +   ALIGNED(4*)   r>  1+  instruction.n>nfa'(pFth)  dup  a'(next.nfa'-5)  !  over  -  188 min   3 - ( nfa'>lfa' )  bounds
            dup  16@'  20  =
  if        dup        (.1234.5678.)       2  +
            ?do    i   (.1234.5678.)....   2
            +loop
  else      ?do  i   a'(next.nfa'-5)   @   5 -  =  if   i  (.1234.5678.)....   leave   then
                 cr    ."   ( "   i   .xxxx  i  16@'  dup  02 spaces  .xxxx  ."  )"  20 ?y  dup 0 1ff between
                 if     00b2   =
                     if    i  CFA'>INSTRUCTION.N(pFth)  1+  INSTRUCTION.N>NFA'(pFth)  i -  even.aligned
                           ."  \ ****  from "  i  5 u.r ."  to "
                           i  CFA'>INSTRUCTION.N(pFth)  1+  INSTRUCTION.N>NFA'(pFth)  3 -  5 u.r  ."  is unknown **** "
                     else  i  16@'  20  =
                        if     i  2 +  16@'  6 u.r      i  4 +  32@'  9 u.r    6
                        else   i  cogRAM>name
                        then
                     then
                 else      drop  i ( 16@' )  .id(pFth.cfa)+special
                 then      space       \ ???????
            +loop
  then            ;


: decompile.last.word(pFth.n)   ( -- )   TOTAL.INSTRUCTION(pFth)  @
  >r    r@    0=
  if    1     instruction.n>nfa'(pFth)   3 - ( nfa'>lfa' )  16@'  3 +  ( lfa'>nfa' ) ( nfa' of 0'th instruction )
  else  r@    instruction.n>nfa'(pFth)
  then      \.3F***
            cr  ."   ( "   dup   3 -  ( nfa'>lfa' )  dup  .xxxx     02 spaces  16@'  .xxxx  ."  )"    r@  38 ?y  ." \"  4 u.r    r@  8 u.r(decimal)
            cr  ."   ( "   dup   .xxxx   dup  dup  count'  nip  1f and  1+  10 min  bounds
            do  space  i  c@'  .xx  loop  ."  )"
            \.3F---
            cr  11  spaces    ."  t:  "  count' 1f and   2dup   type'    02 spaces 12 ?y
\           +   ALIGNED(4*)   r>  1+     instruction.n>nfa'(pFth)    over  -  88 min   3 - ( nfa'>lfa' )  bounds
            +   ALIGNED(4*)   r>  1+  \  instruction.n>nfa'(pFth)
\                             drop       last'  @  80  +  ( here' )  over  -  88 min   3 - ( nfa'>lfa' )  bounds
                              drop                          here' 2+ over  -  88 min   3 - ( nfa'>lfa' )  bounds
            do  cr     ."   ( "   i   .xxxx  i  16@'  dup  02 spaces  .xxxx  ."  )"  20 ?y  dup 0 1ff between
                 if     00b2   =
                     if    i  CFA'>INSTRUCTION.N(pFth)  1+  INSTRUCTION.N>NFA'(pFth)  i -  even.aligned
                           ."  \ ****  from "  i  5 u.r ."  to "
                           i  CFA'>INSTRUCTION.N(pFth)  1+  INSTRUCTION.N>NFA'(pFth)  3 -  5 u.r  ."  is unknown **** "
                     else  i  cogRAM>name
                     then
                 else      drop  i ( 16@' )  .id(pFth.cfa)+special
                 then      space       \ ???????
            +loop   cr  ;


: decompile.a.word(pFth.nfa')  ( nfa' -- )   last' @  over  =
  if     drop    decompile.last.word(pFth.n)
  else   NFA'>INSTRUCTION.N(pFth)   decompile.a.word(pFth.n)
  then   ;

: words'.pFth.decompile   ( -- )   cr  cr
  get.total.instruction(pFth)   1
  do      i  decompile.a.word(pFth.n)  key?  if  leave  then
  loop    decompile.last.word(pFth.n)  ;


defer  _sss

: DISASSEM.COG.PROGRAM.pFth  ( --- )   0  18  0  do  _sss  loop  ;

: DCP.pFth     DISASSEM.COG.PROGRAM.pFth ;

: words'.pFth  words'.pFth^LFA'  DCP.pFth   ( words'.pFth^8    words'.pFth^16 )  words'.pFth.decompile  ( dcp )  ;


VERSION#  ( 61400 )  decimal  420000  430000  between   hex
#if
#else
NCODE _EXIT     ( -- )          \ exit the current Forth definition
                mov     esi, 0 [ebp]
                add     ebp, # 4
                next    c;
#then

: EXIT.         ( -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Can't use EXIT in a Method !"
                PARMS
                IF      COMPILE EXITP
                ELSE    COMPILE _EXIT
                THEN    ; IMMEDIATE

: ?EXIT.        ( F1 -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Can't use ?EXIT in a Method !"
                COMPILE ?BRANCH >MARK
                [COMPILE]  EXIT
                COMPILE _THEN
                >RESOLVE ; IMMEDIATE


cm3asm?  @
#if

: DCD    bl word  count  string>number  0=  abort"  invalid number"   32,'  ;
: DCB    bl word  count
         over   c@  '"'  =
         if     2-  swap  1+  swap  bounds  do  i  c@   c,'  loop
         else   string>number   0=  abort"  invalid number"   8,'
         then   ;

: ALIGN'''''''''''''''''  here'   3   and
  case   1  of   0 c,'   0 c,'   0 c,'  endof
         2  of   0 c,'   0 c,'          endof
         3  of   0 c,'                  endof
  endcase    ;

: _PUSH  {dup}    ;

: _NEXT  ret'     ;

: parse.Rn,        ( a  -- n -1 / 0 )  nfa-count    >r  >r   \  r1,
  r@  c@  upc  'R'   =        2r@   +  1-  c@   ','  =   and
  if      r>    r>   1-   string>number
  else    2r>drop    0
  then    ;

: parse.=12345678  ( a  -- n -1 / 0 )  nfa-count    >r  >r   \  =12345678
  r@  c@       '='   =
  if      r>   r>    string>number
  else    2r>drop    0
  then    ;

: ldr     bl  word   parse.Rn,  0=  if   exit  then   bl  word   parse.=12345678  0=  if  exit  then  r=#  ;

: ldr     bl  word   parse.Rn,  drop                  bl  word   parse.=12345678  0=  if  exit  then  r=#  ;

\ ldr  r3, =12345678

#then

1  to  SCREENDELAY   \  It was a problem!
\ ===================================================================
comment:
:  label   ( -- )
   (create)   dup   ,  lfa+nfa+cfa.counter  @  lfa+nfa+cfa.array  +  dup>r  ,  last @  nfa-count
              dup   r@  10   +  c!   r@ 11  +  swap  cmove    head.spacing  @  lfa+nfa+cfa.counter  +!
                    r>  70   +   !
   does>      @     ;
comment;

\  20014000   label   test1         12345678   label   test2          test1  test2

variable   is.label? 

:  label?  ( a' -- n -1 / 0 )   is.label?   off   lfa+nfa+cfa.array   lfa+nfa+cfa.counter     @   bounds
   do      i  head.spacing  @  10 -  ( 70 )  +   @  over   =    if   i   swap   is.label?  on    leave   then   head.spacing  @
   +loop   drop  is.label?  @  ;

:  display.label  ( a' -- )
   is.label?   off   lfa+nfa+cfa.array   lfa+nfa+cfa.counter    @   bounds
   ?do     i  head.spacing  @  10 -  ( 70 )  +   @  over   =    if   cr  24  ?y  ." L:  "  i  10  +   count  type  leave   then   head.spacing  @
   +loop   drop   ;    \ 20014000  uuuuuu  100u

:  .label   ( a' -- )
   is.label?   off   lfa+nfa+cfa.array   lfa+nfa+cfa.counter    @  bounds
   ?do     i  head.spacing  @  10 -  ( 70 )  +   @  over   =    i  8  +  2@  FFFFFFFF  FFFFFFFF  d=   and
      if      44  ?y  ."  \ L:  "   i  10    +   count  type  leave
      then    head.spacing  @
   +loop      drop   ;    \ 20014000  uuuuuu  100u

:  .label   ( a' -- )
   is.label?   off   lfa+nfa+cfa.array   lfa+nfa+cfa.counter    @  bounds
   ?do     i  head.spacing  @  10 -  ( 70 )  +   @  over   =    i  8  +  2@   2dup  2>r  FFFFFFFF  FFFFFFFF   d=  2r>  FFFFFFFF  0  d=  or   and
      if      44  ?y  ."  \ L:  "   i  10    +   count  type  leave
      then    head.spacing  @
   +loop      drop   ;

:  .label   ( a' -- )
   is.label?   off   lfa+nfa+cfa.array   lfa+nfa+cfa.counter    @  bounds
   ?do     i  head.spacing  @  10 -  ( 70 )  +   @  over   =    i  8  +  2@   2dup  2>r  FFFFFFFF  FFFFFFFF   d=  2r>  FFFFFFFF  0  d=  or   and
      if      34  ?y                i  10    +   count  type  leave
      then    head.spacing  @
   +loop      drop   ;

:  .label   ( a' -- )
   is.label?   off   lfa+nfa+cfa.array   lfa+nfa+cfa.counter    @  bounds
   ?do     i  head.spacing  @  10 -  ( 70 )  +   @  over   =    i  8  +  2@   2dup  2>r  FFFFFFFF  FFFFFFFF   d=  2r>  FFFFFFFF  0  d=  or   and
      if      34  ?y                i  10    +   count  type    60 ?y  ." \ (c) Label: " dup  8 u.r   leave
      then    head.spacing  @
   +loop      drop   ;




'  .label  is  _.label

'  display.label   is   _display.label
\ ====================================================================
variable   a'.is.label?
variable   u.count
variable   cfa'>#n?
variable   a>#n?

: cfa'>#n  ( cfa' -- n -1 / 0 )    cfa'>#n?  off   lfa+nfa+cfa.counter   @   0
  do       i      head.spacing   @   +  10   -     lfa+nfa+cfa.array  +  @   over  =
     if    i      head.spacing   @   /  swap  cfa'>#n?   on  leave
     then  head.spacing  @
  +loop    drop   cfa'>#n?   @   ;

: a>#n     ( lfa -- #n -1 / 0 )       a>#n?  off   lfa+nfa+cfa.counter   @   0         \  a is lfa' of a word
  do       lfa+nfa+cfa.array  i  +   over  =
     if    i      head.spacing   @   /  swap  a>#n?  on    leave
     then         head.spacing   @
  +loop    drop   a>#n?      @   ;

: show.#n  ( #n -- )  dup>r  58 ?y  ." \ "   u. ." / " lfa+nfa+cfa.counter @  head.spacing  @  /  dup  u. 68 ?y  r>  u.(decimal)  ." / "  u.(decimal)  ;

: .lfa'(eF)  ( a -- )  dup>r  8 +  @  dup  FFFFFFFF  =
   if      drop        r>drop
   else    cr   4  -  ."   \"  0a u.r   r>   head.spacing   @  -  8  +  @  0a u.r
   then    ;

: .lfa'(mF)  ( a -- )  dup>r  8 +  @  dup  FFFFFFFF  =    \ a=n*head.spacing+lnc.array   FFFFFFFF = hedless instruction
   if      drop        r>drop
   else    cr   dup  6  -  ."   \"  0a u.r    r@   head.spacing   @  +  8  +    @  6  -  0a u.r  \ lfa'
           cr        2  -  ."   \"  0a u.r    r>   head.spacing   @  +  8  -  16@        0a u.r  ."    <-- flag" \ ffa'
   then    ;

:  a>#n.word ( a -- n )   lfa+nfa+cfa.array  -  head.spacing  @  /  ;  \ mF is from 23c to 361

\  variable   now.is.mF?     now.is.mF?  on

\ variable  103mF?

:  23c.361.between?   ( #n.word -- f )   now.is.mF?  @  if   23c  361  between  else  drop  0  then  ;
:  23c.361.between?   ( #n.word -- f )   103mF?  @
   if       drop  -1
   else     now.is.mF?  @
      if    23c  361  between
      else  drop   0
      then
   then     ;

:  23c.361.between?   ( #n.word -- f )   103mF?  @
   if   0   138  between   exit
   then     now.is.mF?  @
   if       23c  361  between
   else     drop   0
   then     ;

:  .lfa'     ( a -- )     dup  a>#n.word   23c.361.between?   \   361  between
   if    .lfa'(mF)
   else  .lfa'(eF)
   then  ;

: .nfa'(mF)  ( a -- )  dup>r  @  dup      dup  FFFFFFFF  =  over  0=  or
   if     drop
   else   ."   \"  0a u.r  r@   space  8   +   dup   count  1f  and  1+  nip   bounds  do  space  i  c@  .xx  loop
   then            dup  FFFFFFFF   =   swap  0=     or
                   if         23  ?y  ."  L:  "   r@  8  +  count  type
                   else   \.3F---
                          cr  23  ?y  ." mF:  "   r@  8  +  count  type            ( r>drop )
                        \ ."  t:  "
                   then   r>  8  -  a>#n  if  show.#n  then  ;

: .nfa'(eF)  ( a -- )  dup>r  @  dup      dup  FFFFFFFF  =  over  0=  or
   if     drop
   else   ."   \"  0a u.r  r@   space  8   +   dup   count  1f  and  1+  nip   bounds  do  space  i  c@  .xx  loop
   then            dup  FFFFFFFF   =   swap  0=     or
                   if         23  ?y  ."  L:  "   r@  8  +  count  type
                   else   \.3F---
                          cr  23  ?y  ." eF:  "   r@  8  +  count  type            ( r>drop )
                        \ ."  t:  "
                   then   r>  8  -  a>#n  if  show.#n  then  ;

: .cfa'  ( a -- )  dup>r   @  ( current.cfa' )  u.count  off
  begin    U1             r@  18  +   @        ( next.lfa' )  dup   FFFFFFFF  =  over  0=   or
     if    drop  r@    head.spacing   @  +  @  ( next.cfa' )  2-
     else  6  -
     then  over     103mf? @  if  u<=  else  u<  then   1  u.count  +!     u.count    @  100   u>   or
  until    r>drop   drop   ;

: .cfa'  ( a -- )   dup  head.spacing @  +  @   over  @  =  if  drop  exit  then
  dup>r    @  ( current.cfa' )  u.count  off
  begin    U1             r@  18  +   @        ( next.lfa' )  dup   FFFFFFFF  =  over  0=   or
     if    drop  r@    head.spacing   @  +  @  ( next.cfa' )  2-
     else  6  -
     then  over     103mf? @  if  u<=  else  u<  then   1  u.count  +!     u.count    @  100   u>   or
  until    r>drop   drop   ;

: decompile.#n.word.in.lfa+nfa+cfa.array(eF)  ( n -- )   dup        get.total.words(adjacent)  u>
  if    drop  cr  ."   ********** number must be smaller than "     get.total.words(adjacent)  1+  u. ."  *********"  exit  then
  head.spacing   @   *  lfa+nfa+cfa.array  +  >r
    \.3F***    LAYER  OFF
           r@                                .lfa'
       cr  r@  8  +                          .nfa'(eF)
           r>  head.spacing   @   10  -  +   .cfa'  ;  \  r>  show.#n  ;

: decompile.#n.word.in.lfa+nfa+cfa.array(mF)  ( n -- )   dup        get.total.words(adjacent)  u>
  if    drop  cr  ."   ********** number must be smaller than "     get.total.words(adjacent)  1+  u. ."  *********"  exit  then
  head.spacing   @   *  lfa+nfa+cfa.array  +  >r
    \.3F***    LAYER  OFF
           r@                                .lfa'
\          r@  4  +                          .ffa'     \  mF only
       cr  r@  8  +                          .nfa'(mF)
           r>  head.spacing   @   10  -  +   .cfa'  ;  \  r>  show.#n  ;

: dnweF  ( n -- )   decompile.#n.word.in.lfa+nfa+cfa.array(eF)  ;
: dnwmF  ( n -- )   decompile.#n.word.in.lfa+nfa+cfa.array(mF)  ;

:       decompile.#n.word.in.lfa+nfa+cfa.array      ( n -- )   dup  23c.361.between?   \   361  between
  if    decompile.#n.word.in.lfa+nfa+cfa.array(mF)
  else  decompile.#n.word.in.lfa+nfa+cfa.array(eF)
  then  ;

: dcm   decompile.#n.word.in.lfa+nfa+cfa.array      ( n -- )  ;

: .#n.word's.lfa+nfa+cfa.array(eF)  ( n -- )
  head.spacing  @  *  lfa+nfa+cfa.array  +  >r
  cr   r@                       0  +  dup   9 u.r   dup 8 + @  6 -  dup  9 u.r  swap  @  9 u.r    \ lfa'
  cr   r@  head.spacing  @  +   8  -  dup   9 u.r         swap 4 +       9 u.r        @  9 u.r    \ fla'
  cr   r@                       8  +  dup   9 u.r         @  dup         9 u.r  6 spaces  count'  1f  and  type'  \ nfa'
  cr   r>  head.spacing  @  +  10  -  dup   9 u.r         @              9 u.r  cr  ; \ cfa'

: .#n.word's.lfa+nfa+cfa.array(mF)  ( n -- )
  head.spacing  @  *  lfa+nfa+cfa.array  +  >r
  cr   r@                       0  +  dup   9 u.r   dup 8 + @  6 -       9 u.r
       r@  head.spacing  @  +   8  +  @ 6 - 9 u.r                                                      \ lfa'
       r@  head.spacing  @  +   8  -  16@                                9 u.r  ."  <--  flag ( mF )"  \ fla'
  cr   r@                       8  +  dup   9 u.r         @  dup         9 u.r  6 spaces  count'  1f  and  type'  \ nfa'
  cr   r>  head.spacing  @  +  10  -  dup   9 u.r         @              9 u.r  cr  ; \ cfa'

:       .#n.word's.lfa+nfa+cfa.array      ( n -- )   dup  23c.361.between?   \   361  between
  if    .#n.word's.lfa+nfa+cfa.array(mF)
  else  .#n.word's.lfa+nfa+cfa.array(eF)
  then  ;

: .????   .#n.word's.lfa+nfa+cfa.array  ;

: decompile.lfa+nfa+cfa.array  ( -- )
  lfa+nfa+cfa.array    lfa+nfa+cfa.counter  @     bounds
  do   \.3F***
           i                                .lfa'
       cr  i  8  +                          .nfa'(mF)  \ ?????????
           i  head.spacing   @   10  -  +   .cfa'
              head.spacing   @
  +loop       ;

: decompile.#cfa'.word.in.lfa+nfa+cfa.array(cfa')  ( cfa' -- )   cfa'>#n
  if      decompile.#n.word.in.lfa+nfa+cfa.array
  else    ."  ********** cfa' is not valid number **********"
  then    ;

: dcw     ( cfa' -- )   decompile.#cfa'.word.in.lfa+nfa+cfa.array(cfa')  ;

defer     _.lfa+nfa+cfa

variable  cfa'.of.bit@

: max.min   ( n1 n2 -- max min )  2dup  min    >r   max  r>  ;
: max.min   ( n1 n2 -- max min )  2dup  max  -rot   min      ;

: decompile.Lfa+Nfa+Cfa.array.429  ( upper  lower -- )  base  @  >r
  max.min
  ?do       i   get.total.words(adjacent)  <=
     if     i   decompile.#n.word.in.lfa+nfa+cfa.array
     then
  loop      r>  base  !   ;

: LNC''' ( -- )                                  get.total.words(adjacent)           0       decompile.Lfa+Nfa+Cfa.array.429  ;
: LNC'   ( lower -- )                   >r       get.total.words(adjacent)       r>  0  max  decompile.Lfa+Nfa+Cfa.array.429  ;
: LNC''  ( upper lower -- )  2dup  min  >r  max  get.total.words(adjacent)  min  r>  0  max  decompile.Lfa+Nfa+Cfa.array.429  ;
: LNC3                                           get.total.words(adjacent)  dup      3  -    decompile.Lfa+Nfa+Cfa.array.429  ;

: LNC.original  ( -- )
                     >x?  @  0=  if  cr   ."     ****** executing  >x  LNC  x>  before this ******"  then  400 ms   \ mecrispForth + eForth*11
  0000  0A00  LNC''  >x?  @  0=  if  CR   ."     ****** copy it to a file, then press a key to proceed. ******"  KEY  DROP  cls  then
  0A00  1400  LNC''  >x?  @  0=  if  CR   ."     ****** copy it to a file, then press a key to proceed. ******"  KEY  DROP  cls  then
  1400  17B3  LNC''  >x?  @  0=  if  CR   ."     ****** copy it to a file, then press a key to proceed. ******"  KEY  DROP       then  ;

: LNC.from.to  ( n1 n2 -- )      max.min  \  get.total.words(adjacent)   0
                                 >x?  @  0=  if  cr cr cr   ."     ****** executing  >x  LNC  x>  before this ******"  cr  then  400 ms   \ mecrispForth + eForth*11
  ?do     i   i  0A00  +  LNC''  >x?  @  0=  if  cr cr CR   ."     ****** copy it to a file, then press a key to proceed. ******"  cr  KEY  DROP  cls  then
          0A00
  +loop   ;

: LNC.from.to  ( n1 n2 -- )  max.min  >x?  @  0=  if  cr cr cr   then
  ?do     i   i  0A00  +  LNC''       >x?  @  0=  if  cr cr CR   then
          0A00
  +loop   ;   

: LNC   ( -- )   get.total.words(adjacent)   0    LNC.from.to  ;

: LNCm   23C  38C  LNC''  ;  \ mecrispForth




: D#  ;
: COMPILE-ONLY ;  \ ??????????????

.( Multitask )

VARIABLE UP ( current task pointer )
: _USR ( -- a ) UP @ R> @ + ; COMPILE-ONLY

( U1\TF\TID\TOS\STATUS\FOLLOWER\r>--<s  order IS important )
1 CELLS ( init offset )
  CELL- DUP USER FOLLOWER ( address of next task's STATUS )
  CELL- DUP USER STATUS   ( PASS or WAKE )
  CELL- DUP USER TOS      ( top of stack )
  CELL- DUP USER TID      ( back link tid )
  CELL- DUP USER TF       ( throw frame )
  CELL- DUP USER U1*      ( free )
DROP ( cleanup )

: 'S ( tid a -- a ) ( index another task's local variable )    FOLLOWER  CELL+ - SWAP @ + ;

: _PASS ( -- ) ( hilevel absolute branch )   R> @ >R ;                COMPILE-ONLY  ' _PASS CONSTANT PASS

: _WAKE ( -- ) ( restore follower )          R> UP !  TOS @ SP! RP! ; COMPILE-ONLY  ' _WAKE CONSTANT WAKE

: PAUSE ( -- ) ( allow another task to execute )   RP@  SP@ TOS !  FOLLOWER @ >R ;

: STOP  ( -- ) ( sleep current task )   PASS STATUS ! PAUSE ; COMPILE-ONLY

: GET   ( semaphore -- )
  PAUSE ( remember your manners )
  DUP @ STATUS XOR ( owner ? )
  IF    BEGIN  DUP @
        WHILE  PAUSE
        REPEAT ( no, wait for release )
        STATUS SWAP ! ( lock ) EXIT
  THEN DROP ;

: RELEASE ( semaphore -- )   DUP @ STATUS XOR IF DROP EXIT THEN  D# 0 SWAP ! ( unlock ) ;

: SLEEP ( tid -- ) ( sleep another task )   PASS SWAP STATUS 'S ! ;

: AWAKE ( tid -- ) ( wake  another task )   WAKE SWAP STATUS 'S ! ;

: ACTIVATE ( tid -- )
  DUP 2@        ( tid sp rp )
  R> OVER !     ( save entry at rp )
  OVER !        ( save rp at sp )
  OVER TOS 'S ! ( save sp in tos )
  AWAKE ; COMPILE-ONLY

: BUILD ( tid -- )
  DUP SLEEP                     ( sleep new task )
  FOLLOWER @ OVER FOLLOWER 'S ! ( link new task )
  DUP STATUS 'S FOLLOWER !      ( link old task )
  DUP TID 'S ! ;                ( link to tid )




: lfa(lnc)    lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +         ;
: nfa(lnc)    lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  10  +  ;
: cfa(lnc)    lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  +  head.spacing  @  +  10  -  ;

variable  TEMP.ORG   
CREATE    TEMP.NAME  30  ALLOT

:  org:>lnc  ( -- )  temp.name  30  nfa(lnc)  place
             ( -- )  temp.org   @   cfa(lnc)  !      head.spacing  @   lfa+nfa+cfa.counter  +!  ;


:  org:>lnc  ( -- )  temp.name  dup count nip 1+     nfa(lnc)  place
             ( -- )  temp.org   @                    cfa(lnc)  !       head.spacing  @   lfa+nfa+cfa.counter  +!  ;

:  ORG:  ( -- )   BL  WORD  COUNT   TEMP.NAME  SWAP  CMOVE   BL  WORD  (NUMBER)  drop  F0FFfffE and  TEMP.ORG  !   org:>lnc  ;
:  ORG:' ( -- )   BL  WORD  COUNT   TEMP.NAME  SWAP  CMOVE   BL  WORD  count  NUMBER?  0=  abort" invalid number "  drop  00FFffff and  TEMP.ORG  !   org:>lnc   ;

 
:  ORG:  ( -- )   BL  WORD  dup COUNT nip 1+  TEMP.NAME  SWAP  CMOVE   BL  WORD  (NUMBER)  drop  F0FFfffE and  TEMP.ORG  !   org:>lnc  ;
:  ORG:' ( -- )   BL  WORD  dup COUNT nip 1+  TEMP.NAME  SWAP  CMOVE   BL  WORD  count  NUMBER?  0=  abort" invalid number "  drop  00FFffff and  TEMP.ORG  !   org:>lnc   ;

                                                                                     \ 080000F1
\  ORG:  ( -- )   BL  WORD  COUNT   TEMP.NAME  place         BL  WORD  (NUMBER)  drop  F7FFfffE and  TEMP.ORG  !   org:>lnc ;
\  ORG:' ( -- )   BL  WORD  COUNT   TEMP.NAME  place         BL  WORD  count  NUMBER?  0=  abort" invalid number "  drop  00FFffff and  TEMP.ORG  !   org:>lnc   ;

comment:
org:    __main                                   080000ed  \ Thumb Code     0  entry.o(.ARM.Collect$$$$00000000)
org:    _main_stk                                080000ed  \ Thumb Code     0  entry2.o(.ARM.Collect$$$$00000001)
org:    _main_scatterload                        080000f1  \ Thumb Code     0  entry5.o(.ARM.Collect$$$$00000004)
comment;

: demo   demo?  on  s"  429demoORG6.f "  INCLUDED  ; 
 
nuc442eF?  @
#if   \ include  pin_address3.f
:  .Px_MODE  ( -- )    9  0
   do    cr   ."   t:  P"  i  'A' +  emit  ." _MODE  "   i  40  *  9 u.r  ."   GPIO_BA'  +.  ...  ret' "
   loop   ;

:                INPUT.mode   0  ;    :  GPIO_MODE_INPUT'                 0  ;
:               OUTPUT.mode   1  ;    :  GPIO_MODE_OUTPUT'                1  ;
:           Open-drain.mode   2  ;    :  GPIO_MODE_OPEN_DRAIN'            2  ;
:  Quasi-bidirectional.mode   3  ;    :  GPIO_MODE_QUASI_BIDIRECTIONAL'   3  ;


\  :   *GPIO_SetMode(single.bit)   ( port nit.n mode -- )
\  t:  PB.11.OUT.Mode   PB  11  OUT   *GPIO_SetMode   ret'
\  t:  PB.11.OUT.Mode   PB  11  OUT   *GPIO_SetMode(single.bit)  ;

comment:
#define PERIPHERAL_BASE 0x40000000
#define BITBAND_PERIPHERAL_BASE 0x42000000
#define BITBAND_PERIPHERAL(a,b) (BITBAND_PERIPHERAL_BASE + (a-PERIPHERAL_BASE)*0x20+(b*4))
//port D output register address
#define GPIOD_ODR 0x4001140C
//create a pointer to bit 5 in bit band location
#define PORTDBIT5 (*((volatile unsigned long *)(BITBAND_PERIPHERAL(GPIOD_ODR,5))))
//use it somewhere to set bit to 1
int main()
{
//...
PORTDBIT5 = 1;
}
comment;

  :  GPIO_BA'     40004000  ;

  :  PA_DINOFF'   GPIO_BA'    004  +  ;   \  R/W PA Digital Input Path Disable Control   0000_0000
  :  PB_DINOFF'   GPIO_BA'    044  +  ;   \  R/W PB Digital Input Path Disable Control   0000_0000
  :  PC_DINOFF'   GPIO_BA'    084  +  ;   \  R/W PC Digital Input Path Disable Control   0000_0000
  :  PD_DINOFF'   GPIO_BA'    0C4  +  ;   \  R/W PD Digital Input Path Disable Control   0000_0000
  :  PE_DINOFF'   GPIO_BA'    104  +  ;   \  R/W PE Digital Input Path Disable Control   0000_0000
  :  PF_DINOFF'   GPIO_BA'    144  +  ;   \  R/W PF Digital Input Path Disable Control   0000_0000
  :  PG_DINOFF'   GPIO_BA'    184  +  ;   \  R/W PG Digital Input Path Disable Control   0000_0000
  :  PH_DINOFF'   GPIO_BA'    1C4  +  ;   \  R/W PH Digital Input Path Disable Control   0000_0000
  :  PI_DINOFF'   GPIO_BA'    204  +  ;   \  R/W PI Digital Input Path Disable Control   0000_0000

  :  PA_DOUT'     GPIO_BA'    008  +  ;   \  R/W PA Data Output Value   0000_FFFF
  :  PB_DOUT'     GPIO_BA'    048  +  ;   \  R/W PB Data Output Value   0000_FFFF
  :  PC_DOUT'     GPIO_BA'    088  +  ;   \  R/W PC Data Output Value   0000_FFFF
  :  PD_DOUT'     GPIO_BA'    0C8  +  ;   \  R/W PD Data Output Value   0000_FFFF
  :  PE_DOUT'     GPIO_BA'    108  +  ;   \  R/W PE Data Output Value   0000_FFFF
  :  PF_DOUT'     GPIO_BA'    148  +  ;   \  R/W PF Data Output Value   0000_FFFF
  :  PG_DOUT'     GPIO_BA'    188  +  ;   \  R/W PG Data Output Value   0000_FFFF
  :  PH_DOUT'     GPIO_BA'    1C8  +  ;   \  R/W PH Data Output Value   0000_FFFF
  :  PI_DOUT'     GPIO_BA'    208  +  ;   \  R/W PI Data Output Value   0000_FFFF

  :  PA_PIN'      GPIO_BA'    010  +  ;   \  R PA Pin Value   0000_XXXX
  :  PB_PIN'      GPIO_BA'    050  +  ;   \  R PB Pin Value   0000_XXXX
  :  PC_PIN'      GPIO_BA'    090  +  ;   \  R PC Pin Value   0000_XXXX
  :  PD_PIN'      GPIO_BA'    0D0  +  ;   \  R PD Pin Value   0000_XXXX
  :  PE_PIN'      GPIO_BA'    110  +  ;   \  R PE Pin Value   0000_XXXX
  :  PF_PIN'      GPIO_BA'    150  +  ;   \  R PF Pin Value   0000_XXXX
  :  PG_PIN'      GPIO_BA'    190  +  ;   \  R PG Pin Value   0000_XXXX
  :  PH_PIN'      GPIO_BA'    1D0  +  ;   \  R PH Pin Value   0000_XXXX
  :  PI_PIN'      GPIO_BA'    210  +  ;   \  R PI Pin Value   0000_XXXX

  :  PA_MODE'     GPIO_BA'      0  +  ;
  :  PB_MODE'     GPIO_BA'     40  +  ;
  :  PC_MODE'     GPIO_BA'     80  +  ;
  :  PD_MODE'     GPIO_BA'     C0  +  ;
  :  PE_MODE'     GPIO_BA'    100  +  ;
  :  PF_MODE'     GPIO_BA'    140  +  ;
  :  PG_MODE'     GPIO_BA'    180  +  ;
  :  PH_MODE'     GPIO_BA'    1C0  +  ;
  :  PI_MODE'     GPIO_BA'    200  +  ;

  :  PA_DINOFF'   GPIO_BA'    004  +  ;   \  R/W PA Digital Input Path Disable Control  0x0000_0000
  :  PB_DINOFF'   GPIO_BA'    044  +  ;   \  R/W PB Digital Input Path Disable Control 0x0000_0000
  :  PC_DINOFF'   GPIO_BA'    084  +  ;   \  R/W PC Digital Input Path Disable Control 0x0000_0000
  :  PD_DINOFF'   GPIO_BA'    0C4  +  ;   \  R/W PD Digital Input Path Disable Control 0x0000_0000
  :  PE_DINOFF'   GPIO_BA'    104  +  ;   \  R/W PE Digital Input Path Disable Control 0x0000_0000
  :  PF_DINOFF'   GPIO_BA'    144  +  ;   \  R/W PF Digital Input Path Disable Control 0x0000_0000
  :  PG_DINOFF'   GPIO_BA'    184  +  ;   \  R/W PG Digital Input Path Disable Control 0x0000_0000
  :  PH_DINOFF'   GPIO_BA'    1C4  +  ;   \  R/W PH Digital Input Path Disable Control 0x0000_0000
  :  PI_DINOFF'   GPIO_BA'    204  +  ;   \  R/W PI Digital Input Path Disable Control 0x0000_0000

  :  PA_DOUT'     GPIO_BA'    008  +  ;   \  R/W PA Data Output Value 0x0000_FFFF
  :  PB_DOUT'     GPIO_BA'    048  +  ;   \  R/W PB Data Output Value 0x0000_FFFF
  :  PC_DOUT'     GPIO_BA'    088  +  ;   \  R/W PC Data Output Value 0x0000_FFFF
  :  PD_DOUT'     GPIO_BA'    0C8  +  ;   \  R/W PD Data Output Value 0x0000_FFFF
  :  PE_DOUT'     GPIO_BA'    108  +  ;   \  R/W PE Data Output Value 0x0000_FFFF
  :  PF_DOUT'     GPIO_BA'    148  +  ;   \  R/W PF Data Output Value 0x0000_FFFF
  :  PG_DOUT'     GPIO_BA'    188  +  ;   \  R/W PG Data Output Value 0x0000_FFFF
  :  PH_DOUT'     GPIO_BA'    1C8  +  ;   \  R/W PH Data Output Value 0x0000_FFFF
  :  PI_DOUT'     GPIO_BA'    208  +  ;   \  R/W PI Data Output Value 0x0000_FFFF

\ include  nuc442gpio_2.f

#then

: >bit.band.addr  ( a'1 bit.n -- a'2 )  dup  0f  u>  abort"  bit.n should be 0 ~ 0F "
  4  *  swap
  dup  20000000  20100000  within  if   20000000  -  20  *   22000000  +   +   exit  then
  dup  40000000  40100000  within  if   40000000  -  20  *   42000000  +   +   exit  then
  abort"  bit band address is not valid"  ;

: >bba   >bit.band.addr   ;

\ 20000000  5  >bit.band.addr  -->  22000014
\ 4001140C  5  >bit.band.addr .-->  42228194













variable  variable.area          2000F800  variable.area        !
variable  variable.area.wide          400  variable.area.wide   !
variable  variable.counter
:  VAR'   variable.counter   @   variable.area.wide  @  >=  abort"   variable.area.wide is too small "
      t:   {dup}   variable.area  @  variable.counter @   +  t=#    4  variable.counter  +!     -ret  ;


:  ,RET'  4770  16,'  ;
:  VAR'   variable.counter   @   variable.area.wide  @  >=  abort"   variable.area.wide is too small "
      t:   {dup}   variable.area  @  variable.counter @   +  t=#    4  variable.counter  +!  4770 16,' ( ,RET' )  -ret  ;


   :{  {<>}               {xor}   if'T=0   ret'  then'   T=-1    };
   t:   <|  (.n.n.--.f.)  {xor}   if'T=0   ret'  then'   T=-1    ret'
\  t:   <>  (.n.n.--.f.)  {<>}    ret'









































\ #define PA0             GPIO_PIN_ADDR(0, 0)
\ : EQU           DUP CONSTANT LAST @ N>CFAPTR @ >CFA>CONSTANT.QUEUE ;
HEX
:  .(.--.)     ."   (.--.) "    ;
:  .(.--.n.)   ."   (.--.n.) "  ;

variable  temp.pin.addr

: GPIO_PIN_ADDR' ( port pin -- a' )   4 *  swap  40  *  40004800  +  +  dup  temp.pin.addr  !  ;

: show.pin.address   ( -- )  cr
  9     0
  do        cr  10   0
     do     cr  ."   t:  P"  j   'A'   +  emit  '.'  emit    i  9  >
            if    '1'  emit  i   26    +  emit                 .(.--.n.)
            else             i   '0'   +  emit   space         .(.--.n.)
            then  i   4   *  j  40  *  +  40004800  +   0a u.r   ."  ...  ret' "
     loop
  loop  ;

: spa    show.pin.address      ;

: show.pin.address0  ( -- )  cr
  9     0
  do        cr  10   0
     do     cr  ."   t:  P"  j   'A'   +  emit  '.'  emit     i  9  >
            if    '1'  emit  i   26    +  emit  ." =0"          .(.--.)
            else             i   '0'   +  emit  ." =0"  space   .(.--.)
            then  i   4   *  j  40  *  +  40004800  +   0a u.r  ."  0  (#)=#   ret' "
     loop
  loop  ;


: show.pin.address1  ( -- )  cr
  9     0
  do        cr  10   0
     do     cr  ."   t:  P"  j   'A'   +  emit  '.'  emit     i  9  >
            if    '1'  emit  i   26    +  emit  ." =1"          .(.--.)
            else             i   '0'   +  emit  ." =1"  space   .(.--.)
            then  i   4   *  j  40  *  +  40004800  +   0a u.r  ."  1  (#)=#   ret' "
     loop
  loop  ;

: spa    show.pin.address      ;
: spa0   show.pin.address0     ;
: spa1   show.pin.address1     ;

: dr   ( from' len -- )  bounds  do  i  c@'  .xxx  ."  C, "   loop  ;  \   '' >R0~R3   DR
\ ----------------------------------------------------------------------------------------------
:   make.R=#  ( -- )
    4      0
    do     cr    ."   :  R"  i  .x   ." =#"    5 spaces     i  .x   ."   swap   R=#  ;"
    loop   ; 

:   make.R=R  ( -- )  4  0
    do     4  0
       do     cr    ."  :  R"  i  .x   ." =R"  j   .x   5 spaces     i  .x   2 spaces   j  .x  ."   R=R  ;"
       loop 
    loop   ; 


:   make.R=(R)  ( -- )  4  0
    do     4  0
       do     cr    ."  :  R"  i  .x   ." =(R"  j   .x  ." )"  5 spaces     i  .x   2 spaces   j  .x  ."   R=(R)  ;"
       loop 
    loop   ; 

:   make.(R)=R  ( -- )  4  0
    do     4  0
       do     cr    ."  :  (R"  i  .x   ." )=R"  j   .x   5 spaces     i  .x   2 spaces   j  .x  ."   (R)=R  ;"
       loop 
    loop   ;

variable  operator

:   make.R?#    ( -- )
    4      0
    do     cr    ."   :  R"  i  .x   operator c@  emit  ." #"    5 spaces     i  .x   ."   swap   R"  operator c@  emit  ." #   ;"
    loop   ;

:   make.R?#/   ( -- )
    4      0
    do     cr    ."   :  R"  i  .x   operator c@  emit  ." #/"   5 spaces     i  .x   ."   swap   R"  operator c@  emit  ." #/  ;"
    loop   ;

:   make.R?R    ( -- )  4  0
    do     4  0
       do     cr    ."  :  R"  i  .x   operator c@  emit  ." R"  j   .x   5 spaces     i  .x   2 spaces   j  .x   ."   R"   operator c@  emit ." R  ;"
       loop
    loop   ;


:   make.R?(R)  ( -- )  4  0
    do     4  0
       do     cr    ."  :  R"  i  .x   operator c@  emit ." (R"  j   .x  ." )"  5 spaces     i  .x   2 spaces   j  .x   ."   R"  operator c@  emit  ." (R)  ;"
       loop
    loop   ;

:   make.(R)?R  ( -- )  4  0
    do     4  0
       do     cr    ."  :  (R"  i  .x   ." )"  operator c@  emit  ." R"  j   .x   5 spaces     i  .x   2 spaces   j  .x  ."   (R)"   operator c@  emit  ." R  ;"
       loop
    loop   ;




:   make.R?#'    ( -- )
    8      0
    do     cr    ."   :  R"  i  .x   operator c@  emit  ." #"    5 spaces     i  .x   ."   swap   R"  operator c@  emit  ." #   ;"
    loop   ;

:   make.R?#/'   ( -- )
    8      0
    do     cr    ."   :  R"  i  .x   operator c@  emit  ." #/"   5 spaces     i  .x   ."   swap   R"  operator c@  emit  ." #/  ;"
    loop   ;

:   make.R?R'    ( -- )  8  0
    do     8  0
       do     cr    ."  :  R"  i  .x   operator c@  emit  ." R"  j   .x   5 spaces     i  .x   2 spaces   j  .x   ."   R"   operator c@  emit ." R  ;"
       loop
    loop   ;


:   make.R?(R)'  ( -- )  8  0
    do     8  0
       do     cr    ."  :  R"  i  .x   operator c@  emit ." (R"  j   .x  ." )"  5 spaces     i  .x   2 spaces   j  .x   ."   R"  operator c@  emit  ." (R)  ;"
       loop
    loop   ;

:   make.(R)?R'  ( -- )  8  0
    do     8  0
       do     cr    ."  :  (R"  i  .x   ." )"  operator c@  emit  ." R"  j   .x   5 spaces     i  .x   2 spaces   j  .x  ."   (R)"   operator c@  emit  ." R  ;"
       loop
    loop   ;












:   make.R?(R+#)'  ( -- )  8  0
    do     8  0
       do     cr    ."  :  R"  i  .x   operator c@  emit ." (R"  j   .x  ." +#)    >r  "  i  .x   2 spaces   j  .x   ."   r>  R"  operator c@  emit  ." (R+#)  ;"
       loop
    loop   ;

:   make.(R+#)?R'  ( -- )  8  0
    do     8  0
       do     cr    ."  :  (R"  i  .x   ." +#)"  operator c@  emit  ." R"  j   .x  ."     >r  "   i  .x   ."   r>  "   j  .x  ."   (R+#)"   operator c@  emit  ." R  ;"
       loop
    loop   ;













: make.R?R.all ( -- )
  '='  operator  !    make.R?#     CR
  'x'  operator  !    make.R?#     CR
  'o'  operator  !    make.R?#     CR
  'n'  operator  !    make.R?#     CR
  '+'  operator  !    make.R?#     CR
  '-'  operator  !    make.R?#     CR  CR

  '='  operator  !    make.R?#/    CR
  'x'  operator  !    make.R?#/    CR
  'o'  operator  !    make.R?#/    CR
  'n'  operator  !    make.R?#/    CR
  '+'  operator  !    make.R?#/    CR
  '-'  operator  !    make.R?#/    CR  CR

  '='  operator  !    make.R?R     CR
  'x'  operator  !    make.R?R     CR
  'o'  operator  !    make.R?R     CR
  'n'  operator  !    make.R?R     CR
  '+'  operator  !    make.R?R     CR
  '-'  operator  !    make.R?R     CR  CR

  '='  operator  !    make.R?(R)   CR
  'x'  operator  !    make.R?(R)   CR
  'o'  operator  !    make.R?(R)   CR
  'n'  operator  !    make.R?(R)   CR
  '+'  operator  !    make.R?(R)   CR
  '-'  operator  !    make.R?(R)   CR  CR

  '='  operator  !    make.(R)?R   CR
  'x'  operator  !    make.(R)?R   CR
  'o'  operator  !    make.(R)?R   CR
  'n'  operator  !    make.(R)?R   CR
  '+'  operator  !    make.(R)?R   CR
  '-'  operator  !    make.(R)?R   CR  CR  ;


: make.R?R.all'  ( -- )
  '='  operator  !    make.R?#'       CR
  'x'  operator  !    make.R?#'       CR
  'o'  operator  !    make.R?#'       CR
  'n'  operator  !    make.R?#'       CR
  '+'  operator  !    make.R?#'       CR
  '-'  operator  !    make.R?#'       CR  CR

  '='  operator  !    make.R?#/'      CR
  'x'  operator  !    make.R?#/'      CR
  'o'  operator  !    make.R?#/'      CR
  'n'  operator  !    make.R?#/'      CR
  '+'  operator  !    make.R?#/'      CR
  '-'  operator  !    make.R?#/'      CR  CR

  '='  operator  !    make.R?R'       CR
  'x'  operator  !    make.R?R'       CR
  'o'  operator  !    make.R?R'       CR
  'n'  operator  !    make.R?R'       CR
  '+'  operator  !    make.R?R'       CR
  '-'  operator  !    make.R?R'       CR  CR

  '='  operator  !    make.R?(R)'     CR
  'x'  operator  !    make.R?(R)'     CR
  'o'  operator  !    make.R?(R)'     CR
  'n'  operator  !    make.R?(R)'     CR
  '+'  operator  !    make.R?(R)'     CR
  '-'  operator  !    make.R?(R)'     CR  CR

  '='  operator  !    make.(R)?R'     CR
  'x'  operator  !    make.(R)?R'     CR
  'o'  operator  !    make.(R)?R'     CR
  'n'  operator  !    make.(R)?R'     CR
  '+'  operator  !    make.(R)?R'     CR
  '-'  operator  !    make.(R)?R'     CR  CR

  '='  operator  !    make.R?(R+#)'   CR
  'x'  operator  !    make.R?(R+#)'   CR
  'o'  operator  !    make.R?(R+#)'   CR
  'n'  operator  !    make.R?(R+#)'   CR
  '+'  operator  !    make.R?(R+#)'   CR
  '-'  operator  !    make.R?(R+#)'   CR  CR

  '='  operator  !    make.(R+#)?R'   CR
  'x'  operator  !    make.(R+#)?R'   CR
  'o'  operator  !    make.(R+#)?R'   CR
  'n'  operator  !    make.(R+#)?R'   CR
  '+'  operator  !    make.(R+#)?R'   CR
  '-'  operator  !    make.(R+#)?R'   CR  CR  ;


\ make.R?R.all

















  :  R0=#     0  swap   R=#   ;
  :  R1=#     1  swap   R=#   ;
  :  R2=#     2  swap   R=#   ;
  :  R3=#     3  swap   R=#   ;
  :  R4=#     4  swap   R=#   ;
  :  R5=#     5  swap   R=#   ;
  :  R6=#     6  swap   R=#   ;
  :  R7=#     7  swap   R=#   ;

  :  R0x#     0  swap   Rx#   ;
  :  R1x#     1  swap   Rx#   ;
  :  R2x#     2  swap   Rx#   ;
  :  R3x#     3  swap   Rx#   ;
  :  R4x#     4  swap   Rx#   ;
  :  R5x#     5  swap   Rx#   ;
  :  R6x#     6  swap   Rx#   ;
  :  R7x#     7  swap   Rx#   ;

  :  R0o#     0  swap   Ro#   ;
  :  R1o#     1  swap   Ro#   ;
  :  R2o#     2  swap   Ro#   ;
  :  R3o#     3  swap   Ro#   ;
  :  R4o#     4  swap   Ro#   ;
  :  R5o#     5  swap   Ro#   ;
  :  R6o#     6  swap   Ro#   ;
  :  R7o#     7  swap   Ro#   ;

  :  R0n#     0  swap   Rn#   ;
  :  R1n#     1  swap   Rn#   ;
  :  R2n#     2  swap   Rn#   ;
  :  R3n#     3  swap   Rn#   ;
  :  R4n#     4  swap   Rn#   ;
  :  R5n#     5  swap   Rn#   ;
  :  R6n#     6  swap   Rn#   ;
  :  R7n#     7  swap   Rn#   ;

  :  R0+#     0  swap   R+#   ;
  :  R1+#     1  swap   R+#   ;
  :  R2+#     2  swap   R+#   ;
  :  R3+#     3  swap   R+#   ;
  :  R4+#     4  swap   R+#   ;
  :  R5+#     5  swap   R+#   ;
  :  R6+#     6  swap   R+#   ;
  :  R7+#     7  swap   R+#   ;

  :  R0-#     0  swap   R-#   ;
  :  R1-#     1  swap   R-#   ;
  :  R2-#     2  swap   R-#   ;
  :  R3-#     3  swap   R-#   ;
  :  R4-#     4  swap   R-#   ;
  :  R5-#     5  swap   R-#   ;
  :  R6-#     6  swap   R-#   ;
  :  R7-#     7  swap   R-#   ;


  :  R0=#/     0  swap   R=#/  ;
  :  R1=#/     1  swap   R=#/  ;
  :  R2=#/     2  swap   R=#/  ;
  :  R3=#/     3  swap   R=#/  ;
  :  R4=#/     4  swap   R=#/  ;
  :  R5=#/     5  swap   R=#/  ;
  :  R6=#/     6  swap   R=#/  ;
  :  R7=#/     7  swap   R=#/  ;

  :  R0x#/     0  swap  -1  xor  Rx#  ;
  :  R1x#/     1  swap  -1  xor  Rx#  ;
  :  R2x#/     2  swap  -1  xor  Rx#  ;
  :  R3x#/     3  swap  -1  xor  Rx#  ;
  :  R4x#/     4  swap  -1  xor  Rx#  ;
  :  R5x#/     5  swap  -1  xor  Rx#  ;
  :  R6x#/     6  swap  -1  xor  Rx#  ;
  :  R7x#/     7  swap  -1  xor  Rx#  ;

  :  R0o#/     0  swap   Ro#/  ;
  :  R1o#/     1  swap   Ro#/  ;
  :  R2o#/     2  swap   Ro#/  ;
  :  R3o#/     3  swap   Ro#/  ;
  :  R4o#/     4  swap   Ro#/  ;
  :  R5o#/     5  swap   Ro#/  ;
  :  R6o#/     6  swap   Ro#/  ;
  :  R7o#/     7  swap   Ro#/  ;

  :  R0n#/     0  swap   Rn#/  ;
  :  R1n#/     1  swap   Rn#/  ;
  :  R2n#/     2  swap   Rn#/  ;
  :  R3n#/     3  swap   Rn#/  ;
  :  R4n#/     4  swap   Rn#/  ;
  :  R5n#/     5  swap   Rn#/  ;
  :  R6n#/     6  swap   Rn#/  ;
  :  R7n#/     7  swap   Rn#/  ;


  :  R0+#/     0  swap  -1  xor    R+#  ;
  :  R1+#/     1  swap  -1  xor    R+#  ;
  :  R2+#/     2  swap  -1  xor    R+#  ;
  :  R3+#/     3  swap  -1  xor    R+#  ;
  :  R4+#/     4  swap  -1  xor    R+#  ;
  :  R5+#/     5  swap  -1  xor    R+#  ;
  :  R6+#/     6  swap  -1  xor    R+#  ;
  :  R7+#/     7  swap  -1  xor    R+#  ;

  :  R0-#/     0  swap  -1  xor    R-#  ;
  :  R1-#/     1  swap  -1  xor    R-#  ;
  :  R2-#/     2  swap  -1  xor    R-#  ;
  :  R3-#/     3  swap  -1  xor    R-#  ;
  :  R4-#/     4  swap  -1  xor    R-#  ;
  :  R5-#/     5  swap  -1  xor    R-#  ;
  :  R6-#/     6  swap  -1  xor    R-#  ;
  :  R7-#/     7  swap  -1  xor    R-#  ;


 :  R0=R0     0  0  R=R  ;
 :  R1=R0     1  0  R=R  ;
 :  R2=R0     2  0  R=R  ;
 :  R3=R0     3  0  R=R  ;
 :  R4=R0     4  0  R=R  ;
 :  R5=R0     5  0  R=R  ;
 :  R6=R0     6  0  R=R  ;
 :  R7=R0     7  0  R=R  ;
 :  R0=R1     0  1  R=R  ;
 :  R1=R1     1  1  R=R  ;
 :  R2=R1     2  1  R=R  ;
 :  R3=R1     3  1  R=R  ;
 :  R4=R1     4  1  R=R  ;
 :  R5=R1     5  1  R=R  ;
 :  R6=R1     6  1  R=R  ;
 :  R7=R1     7  1  R=R  ;
 :  R0=R2     0  2  R=R  ;
 :  R1=R2     1  2  R=R  ;
 :  R2=R2     2  2  R=R  ;
 :  R3=R2     3  2  R=R  ;
 :  R4=R2     4  2  R=R  ;
 :  R5=R2     5  2  R=R  ;
 :  R6=R2     6  2  R=R  ;
 :  R7=R2     7  2  R=R  ;
 :  R0=R3     0  3  R=R  ;
 :  R1=R3     1  3  R=R  ;
 :  R2=R3     2  3  R=R  ;
 :  R3=R3     3  3  R=R  ;
 :  R4=R3     4  3  R=R  ;
 :  R5=R3     5  3  R=R  ;
 :  R6=R3     6  3  R=R  ;
 :  R7=R3     7  3  R=R  ;
 :  R0=R4     0  4  R=R  ;
 :  R1=R4     1  4  R=R  ;
 :  R2=R4     2  4  R=R  ;
 :  R3=R4     3  4  R=R  ;
 :  R4=R4     4  4  R=R  ;
 :  R5=R4     5  4  R=R  ;
 :  R6=R4     6  4  R=R  ;
 :  R7=R4     7  4  R=R  ;
 :  R0=R5     0  5  R=R  ;
 :  R1=R5     1  5  R=R  ;
 :  R2=R5     2  5  R=R  ;
 :  R3=R5     3  5  R=R  ;
 :  R4=R5     4  5  R=R  ;
 :  R5=R5     5  5  R=R  ;
 :  R6=R5     6  5  R=R  ;
 :  R7=R5     7  5  R=R  ;
 :  R0=R6     0  6  R=R  ;
 :  R1=R6     1  6  R=R  ;
 :  R2=R6     2  6  R=R  ;
 :  R3=R6     3  6  R=R  ;
 :  R4=R6     4  6  R=R  ;
 :  R5=R6     5  6  R=R  ;
 :  R6=R6     6  6  R=R  ;
 :  R7=R6     7  6  R=R  ;
 :  R0=R7     0  7  R=R  ;
 :  R1=R7     1  7  R=R  ;
 :  R2=R7     2  7  R=R  ;
 :  R3=R7     3  7  R=R  ;
 :  R4=R7     4  7  R=R  ;
 :  R5=R7     5  7  R=R  ;
 :  R6=R7     6  7  R=R  ;
 :  R7=R7     7  7  R=R  ;

 :  R0xR0     0  0  RxR  ;
 :  R1xR0     1  0  RxR  ;
 :  R2xR0     2  0  RxR  ;
 :  R3xR0     3  0  RxR  ;
 :  R4xR0     4  0  RxR  ;
 :  R5xR0     5  0  RxR  ;
 :  R6xR0     6  0  RxR  ;
 :  R7xR0     7  0  RxR  ;
 :  R0xR1     0  1  RxR  ;
 :  R1xR1     1  1  RxR  ;
 :  R2xR1     2  1  RxR  ;
 :  R3xR1     3  1  RxR  ;
 :  R4xR1     4  1  RxR  ;
 :  R5xR1     5  1  RxR  ;
 :  R6xR1     6  1  RxR  ;
 :  R7xR1     7  1  RxR  ;
 :  R0xR2     0  2  RxR  ;
 :  R1xR2     1  2  RxR  ;
 :  R2xR2     2  2  RxR  ;
 :  R3xR2     3  2  RxR  ;
 :  R4xR2     4  2  RxR  ;
 :  R5xR2     5  2  RxR  ;
 :  R6xR2     6  2  RxR  ;
 :  R7xR2     7  2  RxR  ;
 :  R0xR3     0  3  RxR  ;
 :  R1xR3     1  3  RxR  ;
 :  R2xR3     2  3  RxR  ;
 :  R3xR3     3  3  RxR  ;
 :  R4xR3     4  3  RxR  ;
 :  R5xR3     5  3  RxR  ;
 :  R6xR3     6  3  RxR  ;
 :  R7xR3     7  3  RxR  ;
 :  R0xR4     0  4  RxR  ;
 :  R1xR4     1  4  RxR  ;
 :  R2xR4     2  4  RxR  ;
 :  R3xR4     3  4  RxR  ;
 :  R4xR4     4  4  RxR  ;
 :  R5xR4     5  4  RxR  ;
 :  R6xR4     6  4  RxR  ;
 :  R7xR4     7  4  RxR  ;
 :  R0xR5     0  5  RxR  ;
 :  R1xR5     1  5  RxR  ;
 :  R2xR5     2  5  RxR  ;
 :  R3xR5     3  5  RxR  ;
 :  R4xR5     4  5  RxR  ;
 :  R5xR5     5  5  RxR  ;
 :  R6xR5     6  5  RxR  ;
 :  R7xR5     7  5  RxR  ;
 :  R0xR6     0  6  RxR  ;
 :  R1xR6     1  6  RxR  ;
 :  R2xR6     2  6  RxR  ;
 :  R3xR6     3  6  RxR  ;
 :  R4xR6     4  6  RxR  ;
 :  R5xR6     5  6  RxR  ;
 :  R6xR6     6  6  RxR  ;
 :  R7xR6     7  6  RxR  ;
 :  R0xR7     0  7  RxR  ;
 :  R1xR7     1  7  RxR  ;
 :  R2xR7     2  7  RxR  ;
 :  R3xR7     3  7  RxR  ;
 :  R4xR7     4  7  RxR  ;
 :  R5xR7     5  7  RxR  ;
 :  R6xR7     6  7  RxR  ;
 :  R7xR7     7  7  RxR  ;

 :  R0oR0     0  0  RoR  ;
 :  R1oR0     1  0  RoR  ;
 :  R2oR0     2  0  RoR  ;
 :  R3oR0     3  0  RoR  ;
 :  R4oR0     4  0  RoR  ;
 :  R5oR0     5  0  RoR  ;
 :  R6oR0     6  0  RoR  ;
 :  R7oR0     7  0  RoR  ;
 :  R0oR1     0  1  RoR  ;
 :  R1oR1     1  1  RoR  ;
 :  R2oR1     2  1  RoR  ;
 :  R3oR1     3  1  RoR  ;
 :  R4oR1     4  1  RoR  ;
 :  R5oR1     5  1  RoR  ;
 :  R6oR1     6  1  RoR  ;
 :  R7oR1     7  1  RoR  ;
 :  R0oR2     0  2  RoR  ;
 :  R1oR2     1  2  RoR  ;
 :  R2oR2     2  2  RoR  ;
 :  R3oR2     3  2  RoR  ;
 :  R4oR2     4  2  RoR  ;
 :  R5oR2     5  2  RoR  ;
 :  R6oR2     6  2  RoR  ;
 :  R7oR2     7  2  RoR  ;
 :  R0oR3     0  3  RoR  ;
 :  R1oR3     1  3  RoR  ;
 :  R2oR3     2  3  RoR  ;
 :  R3oR3     3  3  RoR  ;
 :  R4oR3     4  3  RoR  ;
 :  R5oR3     5  3  RoR  ;
 :  R6oR3     6  3  RoR  ;
 :  R7oR3     7  3  RoR  ;
 :  R0oR4     0  4  RoR  ;
 :  R1oR4     1  4  RoR  ;
 :  R2oR4     2  4  RoR  ;
 :  R3oR4     3  4  RoR  ;
 :  R4oR4     4  4  RoR  ;
 :  R5oR4     5  4  RoR  ;
 :  R6oR4     6  4  RoR  ;
 :  R7oR4     7  4  RoR  ;
 :  R0oR5     0  5  RoR  ;
 :  R1oR5     1  5  RoR  ;
 :  R2oR5     2  5  RoR  ;
 :  R3oR5     3  5  RoR  ;
 :  R4oR5     4  5  RoR  ;
 :  R5oR5     5  5  RoR  ;
 :  R6oR5     6  5  RoR  ;
 :  R7oR5     7  5  RoR  ;
 :  R0oR6     0  6  RoR  ;
 :  R1oR6     1  6  RoR  ;
 :  R2oR6     2  6  RoR  ;
 :  R3oR6     3  6  RoR  ;
 :  R4oR6     4  6  RoR  ;
 :  R5oR6     5  6  RoR  ;
 :  R6oR6     6  6  RoR  ;
 :  R7oR6     7  6  RoR  ;
 :  R0oR7     0  7  RoR  ;
 :  R1oR7     1  7  RoR  ;
 :  R2oR7     2  7  RoR  ;
 :  R3oR7     3  7  RoR  ;
 :  R4oR7     4  7  RoR  ;
 :  R5oR7     5  7  RoR  ;
 :  R6oR7     6  7  RoR  ;
 :  R7oR7     7  7  RoR  ;

 :  R0nR0     0  0  RnR  ;
 :  R1nR0     1  0  RnR  ;
 :  R2nR0     2  0  RnR  ;
 :  R3nR0     3  0  RnR  ;
 :  R4nR0     4  0  RnR  ;
 :  R5nR0     5  0  RnR  ;
 :  R6nR0     6  0  RnR  ;
 :  R7nR0     7  0  RnR  ;
 :  R0nR1     0  1  RnR  ;
 :  R1nR1     1  1  RnR  ;
 :  R2nR1     2  1  RnR  ;
 :  R3nR1     3  1  RnR  ;
 :  R4nR1     4  1  RnR  ;
 :  R5nR1     5  1  RnR  ;
 :  R6nR1     6  1  RnR  ;
 :  R7nR1     7  1  RnR  ;
 :  R0nR2     0  2  RnR  ;
 :  R1nR2     1  2  RnR  ;
 :  R2nR2     2  2  RnR  ;
 :  R3nR2     3  2  RnR  ;
 :  R4nR2     4  2  RnR  ;
 :  R5nR2     5  2  RnR  ;
 :  R6nR2     6  2  RnR  ;
 :  R7nR2     7  2  RnR  ;
 :  R0nR3     0  3  RnR  ;
 :  R1nR3     1  3  RnR  ;
 :  R2nR3     2  3  RnR  ;
 :  R3nR3     3  3  RnR  ;
 :  R4nR3     4  3  RnR  ;
 :  R5nR3     5  3  RnR  ;
 :  R6nR3     6  3  RnR  ;
 :  R7nR3     7  3  RnR  ;
 :  R0nR4     0  4  RnR  ;
 :  R1nR4     1  4  RnR  ;
 :  R2nR4     2  4  RnR  ;
 :  R3nR4     3  4  RnR  ;
 :  R4nR4     4  4  RnR  ;
 :  R5nR4     5  4  RnR  ;
 :  R6nR4     6  4  RnR  ;
 :  R7nR4     7  4  RnR  ;
 :  R0nR5     0  5  RnR  ;
 :  R1nR5     1  5  RnR  ;
 :  R2nR5     2  5  RnR  ;
 :  R3nR5     3  5  RnR  ;
 :  R4nR5     4  5  RnR  ;
 :  R5nR5     5  5  RnR  ;
 :  R6nR5     6  5  RnR  ;
 :  R7nR5     7  5  RnR  ;
 :  R0nR6     0  6  RnR  ;
 :  R1nR6     1  6  RnR  ;
 :  R2nR6     2  6  RnR  ;
 :  R3nR6     3  6  RnR  ;
 :  R4nR6     4  6  RnR  ;
 :  R5nR6     5  6  RnR  ;
 :  R6nR6     6  6  RnR  ;
 :  R7nR6     7  6  RnR  ;
 :  R0nR7     0  7  RnR  ;
 :  R1nR7     1  7  RnR  ;
 :  R2nR7     2  7  RnR  ;
 :  R3nR7     3  7  RnR  ;
 :  R4nR7     4  7  RnR  ;
 :  R5nR7     5  7  RnR  ;
 :  R6nR7     6  7  RnR  ;
 :  R7nR7     7  7  RnR  ;

 :  R0+R0     0  0  R+R  ;
 :  R1+R0     1  0  R+R  ;
 :  R2+R0     2  0  R+R  ;
 :  R3+R0     3  0  R+R  ;
 :  R4+R0     4  0  R+R  ;
 :  R5+R0     5  0  R+R  ;
 :  R6+R0     6  0  R+R  ;
 :  R7+R0     7  0  R+R  ;
 :  R0+R1     0  1  R+R  ;
 :  R1+R1     1  1  R+R  ;
 :  R2+R1     2  1  R+R  ;
 :  R3+R1     3  1  R+R  ;
 :  R4+R1     4  1  R+R  ;
 :  R5+R1     5  1  R+R  ;
 :  R6+R1     6  1  R+R  ;
 :  R7+R1     7  1  R+R  ;
 :  R0+R2     0  2  R+R  ;
 :  R1+R2     1  2  R+R  ;
 :  R2+R2     2  2  R+R  ;
 :  R3+R2     3  2  R+R  ;
 :  R4+R2     4  2  R+R  ;
 :  R5+R2     5  2  R+R  ;
 :  R6+R2     6  2  R+R  ;
 :  R7+R2     7  2  R+R  ;
 :  R0+R3     0  3  R+R  ;
 :  R1+R3     1  3  R+R  ;
 :  R2+R3     2  3  R+R  ;
 :  R3+R3     3  3  R+R  ;
 :  R4+R3     4  3  R+R  ;
 :  R5+R3     5  3  R+R  ;
 :  R6+R3     6  3  R+R  ;
 :  R7+R3     7  3  R+R  ;
 :  R0+R4     0  4  R+R  ;
 :  R1+R4     1  4  R+R  ;
 :  R2+R4     2  4  R+R  ;
 :  R3+R4     3  4  R+R  ;
 :  R4+R4     4  4  R+R  ;
 :  R5+R4     5  4  R+R  ;
 :  R6+R4     6  4  R+R  ;
 :  R7+R4     7  4  R+R  ;
 :  R0+R5     0  5  R+R  ;
 :  R1+R5     1  5  R+R  ;
 :  R2+R5     2  5  R+R  ;
 :  R3+R5     3  5  R+R  ;
 :  R4+R5     4  5  R+R  ;
 :  R5+R5     5  5  R+R  ;
 :  R6+R5     6  5  R+R  ;
 :  R7+R5     7  5  R+R  ;
 :  R0+R6     0  6  R+R  ;
 :  R1+R6     1  6  R+R  ;
 :  R2+R6     2  6  R+R  ;
 :  R3+R6     3  6  R+R  ;
 :  R4+R6     4  6  R+R  ;
 :  R5+R6     5  6  R+R  ;
 :  R6+R6     6  6  R+R  ;
 :  R7+R6     7  6  R+R  ;
 :  R0+R7     0  7  R+R  ;
 :  R1+R7     1  7  R+R  ;
 :  R2+R7     2  7  R+R  ;
 :  R3+R7     3  7  R+R  ;
 :  R4+R7     4  7  R+R  ;
 :  R5+R7     5  7  R+R  ;
 :  R6+R7     6  7  R+R  ;
 :  R7+R7     7  7  R+R  ;

 :  R0-R0     0  0  R-R  ;
 :  R1-R0     1  0  R-R  ;
 :  R2-R0     2  0  R-R  ;
 :  R3-R0     3  0  R-R  ;
 :  R4-R0     4  0  R-R  ;
 :  R5-R0     5  0  R-R  ;
 :  R6-R0     6  0  R-R  ;
 :  R7-R0     7  0  R-R  ;
 :  R0-R1     0  1  R-R  ;
 :  R1-R1     1  1  R-R  ;
 :  R2-R1     2  1  R-R  ;
 :  R3-R1     3  1  R-R  ;
 :  R4-R1     4  1  R-R  ;
 :  R5-R1     5  1  R-R  ;
 :  R6-R1     6  1  R-R  ;
 :  R7-R1     7  1  R-R  ;
 :  R0-R2     0  2  R-R  ;
 :  R1-R2     1  2  R-R  ;
 :  R2-R2     2  2  R-R  ;
 :  R3-R2     3  2  R-R  ;
 :  R4-R2     4  2  R-R  ;
 :  R5-R2     5  2  R-R  ;
 :  R6-R2     6  2  R-R  ;
 :  R7-R2     7  2  R-R  ;
 :  R0-R3     0  3  R-R  ;
 :  R1-R3     1  3  R-R  ;
 :  R2-R3     2  3  R-R  ;
 :  R3-R3     3  3  R-R  ;
 :  R4-R3     4  3  R-R  ;
 :  R5-R3     5  3  R-R  ;
 :  R6-R3     6  3  R-R  ;
 :  R7-R3     7  3  R-R  ;
 :  R0-R4     0  4  R-R  ;
 :  R1-R4     1  4  R-R  ;
 :  R2-R4     2  4  R-R  ;
 :  R3-R4     3  4  R-R  ;
 :  R4-R4     4  4  R-R  ;
 :  R5-R4     5  4  R-R  ;
 :  R6-R4     6  4  R-R  ;
 :  R7-R4     7  4  R-R  ;
 :  R0-R5     0  5  R-R  ;
 :  R1-R5     1  5  R-R  ;
 :  R2-R5     2  5  R-R  ;
 :  R3-R5     3  5  R-R  ;
 :  R4-R5     4  5  R-R  ;
 :  R5-R5     5  5  R-R  ;
 :  R6-R5     6  5  R-R  ;
 :  R7-R5     7  5  R-R  ;
 :  R0-R6     0  6  R-R  ;
 :  R1-R6     1  6  R-R  ;
 :  R2-R6     2  6  R-R  ;
 :  R3-R6     3  6  R-R  ;
 :  R4-R6     4  6  R-R  ;
 :  R5-R6     5  6  R-R  ;
 :  R6-R6     6  6  R-R  ;
 :  R7-R6     7  6  R-R  ;
 :  R0-R7     0  7  R-R  ;
 :  R1-R7     1  7  R-R  ;
 :  R2-R7     2  7  R-R  ;
 :  R3-R7     3  7  R-R  ;
 :  R4-R7     4  7  R-R  ;
 :  R5-R7     5  7  R-R  ;
 :  R6-R7     6  7  R-R  ;
 :  R7-R7     7  7  R-R  ;


 :  R0=(R0)     0  0  R=(R)  ;
 :  R1=(R0)     1  0  R=(R)  ;
 :  R2=(R0)     2  0  R=(R)  ;
 :  R3=(R0)     3  0  R=(R)  ;
 :  R4=(R0)     4  0  R=(R)  ;
 :  R5=(R0)     5  0  R=(R)  ;
 :  R6=(R0)     6  0  R=(R)  ;
 :  R7=(R0)     7  0  R=(R)  ;
 :  R0=(R1)     0  1  R=(R)  ;
 :  R1=(R1)     1  1  R=(R)  ;
 :  R2=(R1)     2  1  R=(R)  ;
 :  R3=(R1)     3  1  R=(R)  ;
 :  R4=(R1)     4  1  R=(R)  ;
 :  R5=(R1)     5  1  R=(R)  ;
 :  R6=(R1)     6  1  R=(R)  ;
 :  R7=(R1)     7  1  R=(R)  ;
 :  R0=(R2)     0  2  R=(R)  ;
 :  R1=(R2)     1  2  R=(R)  ;
 :  R2=(R2)     2  2  R=(R)  ;
 :  R3=(R2)     3  2  R=(R)  ;
 :  R4=(R2)     4  2  R=(R)  ;
 :  R5=(R2)     5  2  R=(R)  ;
 :  R6=(R2)     6  2  R=(R)  ;
 :  R7=(R2)     7  2  R=(R)  ;
 :  R0=(R3)     0  3  R=(R)  ;
 :  R1=(R3)     1  3  R=(R)  ;
 :  R2=(R3)     2  3  R=(R)  ;
 :  R3=(R3)     3  3  R=(R)  ;
 :  R4=(R3)     4  3  R=(R)  ;
 :  R5=(R3)     5  3  R=(R)  ;
 :  R6=(R3)     6  3  R=(R)  ;
 :  R7=(R3)     7  3  R=(R)  ;
 :  R0=(R4)     0  4  R=(R)  ;
 :  R1=(R4)     1  4  R=(R)  ;
 :  R2=(R4)     2  4  R=(R)  ;
 :  R3=(R4)     3  4  R=(R)  ;
 :  R4=(R4)     4  4  R=(R)  ;
 :  R5=(R4)     5  4  R=(R)  ;
 :  R6=(R4)     6  4  R=(R)  ;
 :  R7=(R4)     7  4  R=(R)  ;
 :  R0=(R5)     0  5  R=(R)  ;
 :  R1=(R5)     1  5  R=(R)  ;
 :  R2=(R5)     2  5  R=(R)  ;
 :  R3=(R5)     3  5  R=(R)  ;
 :  R4=(R5)     4  5  R=(R)  ;
 :  R5=(R5)     5  5  R=(R)  ;
 :  R6=(R5)     6  5  R=(R)  ;
 :  R7=(R5)     7  5  R=(R)  ;
 :  R0=(R6)     0  6  R=(R)  ;
 :  R1=(R6)     1  6  R=(R)  ;
 :  R2=(R6)     2  6  R=(R)  ;
 :  R3=(R6)     3  6  R=(R)  ;
 :  R4=(R6)     4  6  R=(R)  ;
 :  R5=(R6)     5  6  R=(R)  ;
 :  R6=(R6)     6  6  R=(R)  ;
 :  R7=(R6)     7  6  R=(R)  ;
 :  R0=(R7)     0  7  R=(R)  ;
 :  R1=(R7)     1  7  R=(R)  ;
 :  R2=(R7)     2  7  R=(R)  ;
 :  R3=(R7)     3  7  R=(R)  ;
 :  R4=(R7)     4  7  R=(R)  ;
 :  R5=(R7)     5  7  R=(R)  ;
 :  R6=(R7)     6  7  R=(R)  ;
 :  R7=(R7)     7  7  R=(R)  ;

 :  R0x(R0)     0  0  Rx(R)  ;
 :  R1x(R0)     1  0  Rx(R)  ;
 :  R2x(R0)     2  0  Rx(R)  ;
 :  R3x(R0)     3  0  Rx(R)  ;
 :  R4x(R0)     4  0  Rx(R)  ;
 :  R5x(R0)     5  0  Rx(R)  ;
 :  R6x(R0)     6  0  Rx(R)  ;
 :  R7x(R0)     7  0  Rx(R)  ;
 :  R0x(R1)     0  1  Rx(R)  ;
 :  R1x(R1)     1  1  Rx(R)  ;
 :  R2x(R1)     2  1  Rx(R)  ;
 :  R3x(R1)     3  1  Rx(R)  ;
 :  R4x(R1)     4  1  Rx(R)  ;
 :  R5x(R1)     5  1  Rx(R)  ;
 :  R6x(R1)     6  1  Rx(R)  ;
 :  R7x(R1)     7  1  Rx(R)  ;
 :  R0x(R2)     0  2  Rx(R)  ;
 :  R1x(R2)     1  2  Rx(R)  ;
 :  R2x(R2)     2  2  Rx(R)  ;
 :  R3x(R2)     3  2  Rx(R)  ;
 :  R4x(R2)     4  2  Rx(R)  ;
 :  R5x(R2)     5  2  Rx(R)  ;
 :  R6x(R2)     6  2  Rx(R)  ;
 :  R7x(R2)     7  2  Rx(R)  ;
 :  R0x(R3)     0  3  Rx(R)  ;
 :  R1x(R3)     1  3  Rx(R)  ;
 :  R2x(R3)     2  3  Rx(R)  ;
 :  R3x(R3)     3  3  Rx(R)  ;
 :  R4x(R3)     4  3  Rx(R)  ;
 :  R5x(R3)     5  3  Rx(R)  ;
 :  R6x(R3)     6  3  Rx(R)  ;
 :  R7x(R3)     7  3  Rx(R)  ;
 :  R0x(R4)     0  4  Rx(R)  ;
 :  R1x(R4)     1  4  Rx(R)  ;
 :  R2x(R4)     2  4  Rx(R)  ;
 :  R3x(R4)     3  4  Rx(R)  ;
 :  R4x(R4)     4  4  Rx(R)  ;
 :  R5x(R4)     5  4  Rx(R)  ;
 :  R6x(R4)     6  4  Rx(R)  ;
 :  R7x(R4)     7  4  Rx(R)  ;
 :  R0x(R5)     0  5  Rx(R)  ;
 :  R1x(R5)     1  5  Rx(R)  ;
 :  R2x(R5)     2  5  Rx(R)  ;
 :  R3x(R5)     3  5  Rx(R)  ;
 :  R4x(R5)     4  5  Rx(R)  ;
 :  R5x(R5)     5  5  Rx(R)  ;
 :  R6x(R5)     6  5  Rx(R)  ;
 :  R7x(R5)     7  5  Rx(R)  ;
 :  R0x(R6)     0  6  Rx(R)  ;
 :  R1x(R6)     1  6  Rx(R)  ;
 :  R2x(R6)     2  6  Rx(R)  ;
 :  R3x(R6)     3  6  Rx(R)  ;
 :  R4x(R6)     4  6  Rx(R)  ;
 :  R5x(R6)     5  6  Rx(R)  ;
 :  R6x(R6)     6  6  Rx(R)  ;
 :  R7x(R6)     7  6  Rx(R)  ;
 :  R0x(R7)     0  7  Rx(R)  ;
 :  R1x(R7)     1  7  Rx(R)  ;
 :  R2x(R7)     2  7  Rx(R)  ;
 :  R3x(R7)     3  7  Rx(R)  ;
 :  R4x(R7)     4  7  Rx(R)  ;
 :  R5x(R7)     5  7  Rx(R)  ;
 :  R6x(R7)     6  7  Rx(R)  ;
 :  R7x(R7)     7  7  Rx(R)  ;

 :  R0o(R0)     0  0  Ro(R)  ;
 :  R1o(R0)     1  0  Ro(R)  ;
 :  R2o(R0)     2  0  Ro(R)  ;
 :  R3o(R0)     3  0  Ro(R)  ;
 :  R4o(R0)     4  0  Ro(R)  ;
 :  R5o(R0)     5  0  Ro(R)  ;
 :  R6o(R0)     6  0  Ro(R)  ;
 :  R7o(R0)     7  0  Ro(R)  ;
 :  R0o(R1)     0  1  Ro(R)  ;
 :  R1o(R1)     1  1  Ro(R)  ;
 :  R2o(R1)     2  1  Ro(R)  ;
 :  R3o(R1)     3  1  Ro(R)  ;
 :  R4o(R1)     4  1  Ro(R)  ;
 :  R5o(R1)     5  1  Ro(R)  ;
 :  R6o(R1)     6  1  Ro(R)  ;
 :  R7o(R1)     7  1  Ro(R)  ;
 :  R0o(R2)     0  2  Ro(R)  ;
 :  R1o(R2)     1  2  Ro(R)  ;
 :  R2o(R2)     2  2  Ro(R)  ;
 :  R3o(R2)     3  2  Ro(R)  ;
 :  R4o(R2)     4  2  Ro(R)  ;
 :  R5o(R2)     5  2  Ro(R)  ;
 :  R6o(R2)     6  2  Ro(R)  ;
 :  R7o(R2)     7  2  Ro(R)  ;
 :  R0o(R3)     0  3  Ro(R)  ;
 :  R1o(R3)     1  3  Ro(R)  ;
 :  R2o(R3)     2  3  Ro(R)  ;
 :  R3o(R3)     3  3  Ro(R)  ;
 :  R4o(R3)     4  3  Ro(R)  ;
 :  R5o(R3)     5  3  Ro(R)  ;
 :  R6o(R3)     6  3  Ro(R)  ;
 :  R7o(R3)     7  3  Ro(R)  ;
 :  R0o(R4)     0  4  Ro(R)  ;
 :  R1o(R4)     1  4  Ro(R)  ;
 :  R2o(R4)     2  4  Ro(R)  ;
 :  R3o(R4)     3  4  Ro(R)  ;
 :  R4o(R4)     4  4  Ro(R)  ;
 :  R5o(R4)     5  4  Ro(R)  ;
 :  R6o(R4)     6  4  Ro(R)  ;
 :  R7o(R4)     7  4  Ro(R)  ;
 :  R0o(R5)     0  5  Ro(R)  ;
 :  R1o(R5)     1  5  Ro(R)  ;
 :  R2o(R5)     2  5  Ro(R)  ;
 :  R3o(R5)     3  5  Ro(R)  ;
 :  R4o(R5)     4  5  Ro(R)  ;
 :  R5o(R5)     5  5  Ro(R)  ;
 :  R6o(R5)     6  5  Ro(R)  ;
 :  R7o(R5)     7  5  Ro(R)  ;
 :  R0o(R6)     0  6  Ro(R)  ;
 :  R1o(R6)     1  6  Ro(R)  ;
 :  R2o(R6)     2  6  Ro(R)  ;
 :  R3o(R6)     3  6  Ro(R)  ;
 :  R4o(R6)     4  6  Ro(R)  ;
 :  R5o(R6)     5  6  Ro(R)  ;
 :  R6o(R6)     6  6  Ro(R)  ;
 :  R7o(R6)     7  6  Ro(R)  ;
 :  R0o(R7)     0  7  Ro(R)  ;
 :  R1o(R7)     1  7  Ro(R)  ;
 :  R2o(R7)     2  7  Ro(R)  ;
 :  R3o(R7)     3  7  Ro(R)  ;
 :  R4o(R7)     4  7  Ro(R)  ;
 :  R5o(R7)     5  7  Ro(R)  ;
 :  R6o(R7)     6  7  Ro(R)  ;
 :  R7o(R7)     7  7  Ro(R)  ;

 :  R0n(R0)     0  0  Rn(R)  ;
 :  R1n(R0)     1  0  Rn(R)  ;
 :  R2n(R0)     2  0  Rn(R)  ;
 :  R3n(R0)     3  0  Rn(R)  ;
 :  R4n(R0)     4  0  Rn(R)  ;
 :  R5n(R0)     5  0  Rn(R)  ;
 :  R6n(R0)     6  0  Rn(R)  ;
 :  R7n(R0)     7  0  Rn(R)  ;
 :  R0n(R1)     0  1  Rn(R)  ;
 :  R1n(R1)     1  1  Rn(R)  ;
 :  R2n(R1)     2  1  Rn(R)  ;
 :  R3n(R1)     3  1  Rn(R)  ;
 :  R4n(R1)     4  1  Rn(R)  ;
 :  R5n(R1)     5  1  Rn(R)  ;
 :  R6n(R1)     6  1  Rn(R)  ;
 :  R7n(R1)     7  1  Rn(R)  ;
 :  R0n(R2)     0  2  Rn(R)  ;
 :  R1n(R2)     1  2  Rn(R)  ;
 :  R2n(R2)     2  2  Rn(R)  ;
 :  R3n(R2)     3  2  Rn(R)  ;
 :  R4n(R2)     4  2  Rn(R)  ;
 :  R5n(R2)     5  2  Rn(R)  ;
 :  R6n(R2)     6  2  Rn(R)  ;
 :  R7n(R2)     7  2  Rn(R)  ;
 :  R0n(R3)     0  3  Rn(R)  ;
 :  R1n(R3)     1  3  Rn(R)  ;
 :  R2n(R3)     2  3  Rn(R)  ;
 :  R3n(R3)     3  3  Rn(R)  ;
 :  R4n(R3)     4  3  Rn(R)  ;
 :  R5n(R3)     5  3  Rn(R)  ;
 :  R6n(R3)     6  3  Rn(R)  ;
 :  R7n(R3)     7  3  Rn(R)  ;
 :  R0n(R4)     0  4  Rn(R)  ;
 :  R1n(R4)     1  4  Rn(R)  ;
 :  R2n(R4)     2  4  Rn(R)  ;
 :  R3n(R4)     3  4  Rn(R)  ;
 :  R4n(R4)     4  4  Rn(R)  ;
 :  R5n(R4)     5  4  Rn(R)  ;
 :  R6n(R4)     6  4  Rn(R)  ;
 :  R7n(R4)     7  4  Rn(R)  ;
 :  R0n(R5)     0  5  Rn(R)  ;
 :  R1n(R5)     1  5  Rn(R)  ;
 :  R2n(R5)     2  5  Rn(R)  ;
 :  R3n(R5)     3  5  Rn(R)  ;
 :  R4n(R5)     4  5  Rn(R)  ;
 :  R5n(R5)     5  5  Rn(R)  ;
 :  R6n(R5)     6  5  Rn(R)  ;
 :  R7n(R5)     7  5  Rn(R)  ;
 :  R0n(R6)     0  6  Rn(R)  ;
 :  R1n(R6)     1  6  Rn(R)  ;
 :  R2n(R6)     2  6  Rn(R)  ;
 :  R3n(R6)     3  6  Rn(R)  ;
 :  R4n(R6)     4  6  Rn(R)  ;
 :  R5n(R6)     5  6  Rn(R)  ;
 :  R6n(R6)     6  6  Rn(R)  ;
 :  R7n(R6)     7  6  Rn(R)  ;
 :  R0n(R7)     0  7  Rn(R)  ;
 :  R1n(R7)     1  7  Rn(R)  ;
 :  R2n(R7)     2  7  Rn(R)  ;
 :  R3n(R7)     3  7  Rn(R)  ;
 :  R4n(R7)     4  7  Rn(R)  ;
 :  R5n(R7)     5  7  Rn(R)  ;
 :  R6n(R7)     6  7  Rn(R)  ;
 :  R7n(R7)     7  7  Rn(R)  ;

 :  R0+(R0)     0  0  R+(R)  ;
 :  R1+(R0)     1  0  R+(R)  ;
 :  R2+(R0)     2  0  R+(R)  ;
 :  R3+(R0)     3  0  R+(R)  ;
 :  R4+(R0)     4  0  R+(R)  ;
 :  R5+(R0)     5  0  R+(R)  ;
 :  R6+(R0)     6  0  R+(R)  ;
 :  R7+(R0)     7  0  R+(R)  ;
 :  R0+(R1)     0  1  R+(R)  ;
 :  R1+(R1)     1  1  R+(R)  ;
 :  R2+(R1)     2  1  R+(R)  ;
 :  R3+(R1)     3  1  R+(R)  ;
 :  R4+(R1)     4  1  R+(R)  ;
 :  R5+(R1)     5  1  R+(R)  ;
 :  R6+(R1)     6  1  R+(R)  ;
 :  R7+(R1)     7  1  R+(R)  ;
 :  R0+(R2)     0  2  R+(R)  ;
 :  R1+(R2)     1  2  R+(R)  ;
 :  R2+(R2)     2  2  R+(R)  ;
 :  R3+(R2)     3  2  R+(R)  ;
 :  R4+(R2)     4  2  R+(R)  ;
 :  R5+(R2)     5  2  R+(R)  ;
 :  R6+(R2)     6  2  R+(R)  ;
 :  R7+(R2)     7  2  R+(R)  ;
 :  R0+(R3)     0  3  R+(R)  ;
 :  R1+(R3)     1  3  R+(R)  ;
 :  R2+(R3)     2  3  R+(R)  ;
 :  R3+(R3)     3  3  R+(R)  ;
 :  R4+(R3)     4  3  R+(R)  ;
 :  R5+(R3)     5  3  R+(R)  ;
 :  R6+(R3)     6  3  R+(R)  ;
 :  R7+(R3)     7  3  R+(R)  ;
 :  R0+(R4)     0  4  R+(R)  ;
 :  R1+(R4)     1  4  R+(R)  ;
 :  R2+(R4)     2  4  R+(R)  ;
 :  R3+(R4)     3  4  R+(R)  ;
 :  R4+(R4)     4  4  R+(R)  ;
 :  R5+(R4)     5  4  R+(R)  ;
 :  R6+(R4)     6  4  R+(R)  ;
 :  R7+(R4)     7  4  R+(R)  ;
 :  R0+(R5)     0  5  R+(R)  ;
 :  R1+(R5)     1  5  R+(R)  ;
 :  R2+(R5)     2  5  R+(R)  ;
 :  R3+(R5)     3  5  R+(R)  ;
 :  R4+(R5)     4  5  R+(R)  ;
 :  R5+(R5)     5  5  R+(R)  ;
 :  R6+(R5)     6  5  R+(R)  ;
 :  R7+(R5)     7  5  R+(R)  ;
 :  R0+(R6)     0  6  R+(R)  ;
 :  R1+(R6)     1  6  R+(R)  ;
 :  R2+(R6)     2  6  R+(R)  ;
 :  R3+(R6)     3  6  R+(R)  ;
 :  R4+(R6)     4  6  R+(R)  ;
 :  R5+(R6)     5  6  R+(R)  ;
 :  R6+(R6)     6  6  R+(R)  ;
 :  R7+(R6)     7  6  R+(R)  ;
 :  R0+(R7)     0  7  R+(R)  ;
 :  R1+(R7)     1  7  R+(R)  ;
 :  R2+(R7)     2  7  R+(R)  ;
 :  R3+(R7)     3  7  R+(R)  ;
 :  R4+(R7)     4  7  R+(R)  ;
 :  R5+(R7)     5  7  R+(R)  ;
 :  R6+(R7)     6  7  R+(R)  ;
 :  R7+(R7)     7  7  R+(R)  ;

 :  R0-(R0)     0  0  R-(R)  ;
 :  R1-(R0)     1  0  R-(R)  ;
 :  R2-(R0)     2  0  R-(R)  ;
 :  R3-(R0)     3  0  R-(R)  ;
 :  R4-(R0)     4  0  R-(R)  ;
 :  R5-(R0)     5  0  R-(R)  ;
 :  R6-(R0)     6  0  R-(R)  ;
 :  R7-(R0)     7  0  R-(R)  ;
 :  R0-(R1)     0  1  R-(R)  ;
 :  R1-(R1)     1  1  R-(R)  ;
 :  R2-(R1)     2  1  R-(R)  ;
 :  R3-(R1)     3  1  R-(R)  ;
 :  R4-(R1)     4  1  R-(R)  ;
 :  R5-(R1)     5  1  R-(R)  ;
 :  R6-(R1)     6  1  R-(R)  ;
 :  R7-(R1)     7  1  R-(R)  ;
 :  R0-(R2)     0  2  R-(R)  ;
 :  R1-(R2)     1  2  R-(R)  ;
 :  R2-(R2)     2  2  R-(R)  ;
 :  R3-(R2)     3  2  R-(R)  ;
 :  R4-(R2)     4  2  R-(R)  ;
 :  R5-(R2)     5  2  R-(R)  ;
 :  R6-(R2)     6  2  R-(R)  ;
 :  R7-(R2)     7  2  R-(R)  ;
 :  R0-(R3)     0  3  R-(R)  ;
 :  R1-(R3)     1  3  R-(R)  ;
 :  R2-(R3)     2  3  R-(R)  ;
 :  R3-(R3)     3  3  R-(R)  ;
 :  R4-(R3)     4  3  R-(R)  ;
 :  R5-(R3)     5  3  R-(R)  ;
 :  R6-(R3)     6  3  R-(R)  ;
 :  R7-(R3)     7  3  R-(R)  ;
 :  R0-(R4)     0  4  R-(R)  ;
 :  R1-(R4)     1  4  R-(R)  ;
 :  R2-(R4)     2  4  R-(R)  ;
 :  R3-(R4)     3  4  R-(R)  ;
 :  R4-(R4)     4  4  R-(R)  ;
 :  R5-(R4)     5  4  R-(R)  ;
 :  R6-(R4)     6  4  R-(R)  ;
 :  R7-(R4)     7  4  R-(R)  ;
 :  R0-(R5)     0  5  R-(R)  ;
 :  R1-(R5)     1  5  R-(R)  ;
 :  R2-(R5)     2  5  R-(R)  ;
 :  R3-(R5)     3  5  R-(R)  ;
 :  R4-(R5)     4  5  R-(R)  ;
 :  R5-(R5)     5  5  R-(R)  ;
 :  R6-(R5)     6  5  R-(R)  ;
 :  R7-(R5)     7  5  R-(R)  ;
 :  R0-(R6)     0  6  R-(R)  ;
 :  R1-(R6)     1  6  R-(R)  ;
 :  R2-(R6)     2  6  R-(R)  ;
 :  R3-(R6)     3  6  R-(R)  ;
 :  R4-(R6)     4  6  R-(R)  ;
 :  R5-(R6)     5  6  R-(R)  ;
 :  R6-(R6)     6  6  R-(R)  ;
 :  R7-(R6)     7  6  R-(R)  ;
 :  R0-(R7)     0  7  R-(R)  ;
 :  R1-(R7)     1  7  R-(R)  ;
 :  R2-(R7)     2  7  R-(R)  ;
 :  R3-(R7)     3  7  R-(R)  ;
 :  R4-(R7)     4  7  R-(R)  ;
 :  R5-(R7)     5  7  R-(R)  ;
 :  R6-(R7)     6  7  R-(R)  ;
 :  R7-(R7)     7  7  R-(R)  ;


 :  (R0)=R0     0  0  (R)=R  ;
 :  (R1)=R0     1  0  (R)=R  ;
 :  (R2)=R0     2  0  (R)=R  ;
 :  (R3)=R0     3  0  (R)=R  ;
 :  (R4)=R0     4  0  (R)=R  ;
 :  (R5)=R0     5  0  (R)=R  ;
 :  (R6)=R0     6  0  (R)=R  ;
 :  (R7)=R0     7  0  (R)=R  ;
 :  (R0)=R1     0  1  (R)=R  ;
 :  (R1)=R1     1  1  (R)=R  ;
 :  (R2)=R1     2  1  (R)=R  ;
 :  (R3)=R1     3  1  (R)=R  ;
 :  (R4)=R1     4  1  (R)=R  ;
 :  (R5)=R1     5  1  (R)=R  ;
 :  (R6)=R1     6  1  (R)=R  ;
 :  (R7)=R1     7  1  (R)=R  ;
 :  (R0)=R2     0  2  (R)=R  ;
 :  (R1)=R2     1  2  (R)=R  ;
 :  (R2)=R2     2  2  (R)=R  ;
 :  (R3)=R2     3  2  (R)=R  ;
 :  (R4)=R2     4  2  (R)=R  ;
 :  (R5)=R2     5  2  (R)=R  ;
 :  (R6)=R2     6  2  (R)=R  ;
 :  (R7)=R2     7  2  (R)=R  ;
 :  (R0)=R3     0  3  (R)=R  ;
 :  (R1)=R3     1  3  (R)=R  ;
 :  (R2)=R3     2  3  (R)=R  ;
 :  (R3)=R3     3  3  (R)=R  ;
 :  (R4)=R3     4  3  (R)=R  ;
 :  (R5)=R3     5  3  (R)=R  ;
 :  (R6)=R3     6  3  (R)=R  ;
 :  (R7)=R3     7  3  (R)=R  ;
 :  (R0)=R4     0  4  (R)=R  ;
 :  (R1)=R4     1  4  (R)=R  ;
 :  (R2)=R4     2  4  (R)=R  ;
 :  (R3)=R4     3  4  (R)=R  ;
 :  (R4)=R4     4  4  (R)=R  ;
 :  (R5)=R4     5  4  (R)=R  ;
 :  (R6)=R4     6  4  (R)=R  ;
 :  (R7)=R4     7  4  (R)=R  ;
 :  (R0)=R5     0  5  (R)=R  ;
 :  (R1)=R5     1  5  (R)=R  ;
 :  (R2)=R5     2  5  (R)=R  ;
 :  (R3)=R5     3  5  (R)=R  ;
 :  (R4)=R5     4  5  (R)=R  ;
 :  (R5)=R5     5  5  (R)=R  ;
 :  (R6)=R5     6  5  (R)=R  ;
 :  (R7)=R5     7  5  (R)=R  ;
 :  (R0)=R6     0  6  (R)=R  ;
 :  (R1)=R6     1  6  (R)=R  ;
 :  (R2)=R6     2  6  (R)=R  ;
 :  (R3)=R6     3  6  (R)=R  ;
 :  (R4)=R6     4  6  (R)=R  ;
 :  (R5)=R6     5  6  (R)=R  ;
 :  (R6)=R6     6  6  (R)=R  ;
 :  (R7)=R6     7  6  (R)=R  ;
 :  (R0)=R7     0  7  (R)=R  ;
 :  (R1)=R7     1  7  (R)=R  ;
 :  (R2)=R7     2  7  (R)=R  ;
 :  (R3)=R7     3  7  (R)=R  ;
 :  (R4)=R7     4  7  (R)=R  ;
 :  (R5)=R7     5  7  (R)=R  ;
 :  (R6)=R7     6  7  (R)=R  ;
 :  (R7)=R7     7  7  (R)=R  ;

comment:
 :  (R0)xR0     0  0  (R)xR  ;
 :  (R1)xR0     1  0  (R)xR  ;
 :  (R2)xR0     2  0  (R)xR  ;
 :  (R3)xR0     3  0  (R)xR  ;
 :  (R4)xR0     4  0  (R)xR  ;
 :  (R5)xR0     5  0  (R)xR  ;
 :  (R6)xR0     6  0  (R)xR  ;
 :  (R7)xR0     7  0  (R)xR  ;
 :  (R0)xR1     0  1  (R)xR  ;
 :  (R1)xR1     1  1  (R)xR  ;
 :  (R2)xR1     2  1  (R)xR  ;
 :  (R3)xR1     3  1  (R)xR  ;
 :  (R4)xR1     4  1  (R)xR  ;
 :  (R5)xR1     5  1  (R)xR  ;
 :  (R6)xR1     6  1  (R)xR  ;
 :  (R7)xR1     7  1  (R)xR  ;
 :  (R0)xR2     0  2  (R)xR  ;
 :  (R1)xR2     1  2  (R)xR  ;
 :  (R2)xR2     2  2  (R)xR  ;
 :  (R3)xR2     3  2  (R)xR  ;
 :  (R4)xR2     4  2  (R)xR  ;
 :  (R5)xR2     5  2  (R)xR  ;
 :  (R6)xR2     6  2  (R)xR  ;
 :  (R7)xR2     7  2  (R)xR  ;
 :  (R0)xR3     0  3  (R)xR  ;
 :  (R1)xR3     1  3  (R)xR  ;
 :  (R2)xR3     2  3  (R)xR  ;
 :  (R3)xR3     3  3  (R)xR  ;
 :  (R4)xR3     4  3  (R)xR  ;
 :  (R5)xR3     5  3  (R)xR  ;
 :  (R6)xR3     6  3  (R)xR  ;
 :  (R7)xR3     7  3  (R)xR  ;
 :  (R0)xR4     0  4  (R)xR  ;
 :  (R1)xR4     1  4  (R)xR  ;
 :  (R2)xR4     2  4  (R)xR  ;
 :  (R3)xR4     3  4  (R)xR  ;
 :  (R4)xR4     4  4  (R)xR  ;
 :  (R5)xR4     5  4  (R)xR  ;
 :  (R6)xR4     6  4  (R)xR  ;
 :  (R7)xR4     7  4  (R)xR  ;
 :  (R0)xR5     0  5  (R)xR  ;
 :  (R1)xR5     1  5  (R)xR  ;
 :  (R2)xR5     2  5  (R)xR  ;
 :  (R3)xR5     3  5  (R)xR  ;
 :  (R4)xR5     4  5  (R)xR  ;
 :  (R5)xR5     5  5  (R)xR  ;
 :  (R6)xR5     6  5  (R)xR  ;
 :  (R7)xR5     7  5  (R)xR  ;
 :  (R0)xR6     0  6  (R)xR  ;
 :  (R1)xR6     1  6  (R)xR  ;
 :  (R2)xR6     2  6  (R)xR  ;
 :  (R3)xR6     3  6  (R)xR  ;
 :  (R4)xR6     4  6  (R)xR  ;
 :  (R5)xR6     5  6  (R)xR  ;
 :  (R6)xR6     6  6  (R)xR  ;
 :  (R7)xR6     7  6  (R)xR  ;
 :  (R0)xR7     0  7  (R)xR  ;
 :  (R1)xR7     1  7  (R)xR  ;
 :  (R2)xR7     2  7  (R)xR  ;
 :  (R3)xR7     3  7  (R)xR  ;
 :  (R4)xR7     4  7  (R)xR  ;
 :  (R5)xR7     5  7  (R)xR  ;
 :  (R6)xR7     6  7  (R)xR  ;
 :  (R7)xR7     7  7  (R)xR  ;

 :  (R0)oR0     0  0  (R)oR  ;
 :  (R1)oR0     1  0  (R)oR  ;
 :  (R2)oR0     2  0  (R)oR  ;
 :  (R3)oR0     3  0  (R)oR  ;
 :  (R4)oR0     4  0  (R)oR  ;
 :  (R5)oR0     5  0  (R)oR  ;
 :  (R6)oR0     6  0  (R)oR  ;
 :  (R7)oR0     7  0  (R)oR  ;
 :  (R0)oR1     0  1  (R)oR  ;
 :  (R1)oR1     1  1  (R)oR  ;
 :  (R2)oR1     2  1  (R)oR  ;
 :  (R3)oR1     3  1  (R)oR  ;
 :  (R4)oR1     4  1  (R)oR  ;
 :  (R5)oR1     5  1  (R)oR  ;
 :  (R6)oR1     6  1  (R)oR  ;
 :  (R7)oR1     7  1  (R)oR  ;
 :  (R0)oR2     0  2  (R)oR  ;
 :  (R1)oR2     1  2  (R)oR  ;
 :  (R2)oR2     2  2  (R)oR  ;
 :  (R3)oR2     3  2  (R)oR  ;
 :  (R4)oR2     4  2  (R)oR  ;
 :  (R5)oR2     5  2  (R)oR  ;
 :  (R6)oR2     6  2  (R)oR  ;
 :  (R7)oR2     7  2  (R)oR  ;
 :  (R0)oR3     0  3  (R)oR  ;
 :  (R1)oR3     1  3  (R)oR  ;
 :  (R2)oR3     2  3  (R)oR  ;
 :  (R3)oR3     3  3  (R)oR  ;
 :  (R4)oR3     4  3  (R)oR  ;
 :  (R5)oR3     5  3  (R)oR  ;
 :  (R6)oR3     6  3  (R)oR  ;
 :  (R7)oR3     7  3  (R)oR  ;
 :  (R0)oR4     0  4  (R)oR  ;
 :  (R1)oR4     1  4  (R)oR  ;
 :  (R2)oR4     2  4  (R)oR  ;
 :  (R3)oR4     3  4  (R)oR  ;
 :  (R4)oR4     4  4  (R)oR  ;
 :  (R5)oR4     5  4  (R)oR  ;
 :  (R6)oR4     6  4  (R)oR  ;
 :  (R7)oR4     7  4  (R)oR  ;
 :  (R0)oR5     0  5  (R)oR  ;
 :  (R1)oR5     1  5  (R)oR  ;
 :  (R2)oR5     2  5  (R)oR  ;
 :  (R3)oR5     3  5  (R)oR  ;
 :  (R4)oR5     4  5  (R)oR  ;
 :  (R5)oR5     5  5  (R)oR  ;
 :  (R6)oR5     6  5  (R)oR  ;
 :  (R7)oR5     7  5  (R)oR  ;
 :  (R0)oR6     0  6  (R)oR  ;
 :  (R1)oR6     1  6  (R)oR  ;
 :  (R2)oR6     2  6  (R)oR  ;
 :  (R3)oR6     3  6  (R)oR  ;
 :  (R4)oR6     4  6  (R)oR  ;
 :  (R5)oR6     5  6  (R)oR  ;
 :  (R6)oR6     6  6  (R)oR  ;
 :  (R7)oR6     7  6  (R)oR  ;
 :  (R0)oR7     0  7  (R)oR  ;
 :  (R1)oR7     1  7  (R)oR  ;
 :  (R2)oR7     2  7  (R)oR  ;
 :  (R3)oR7     3  7  (R)oR  ;
 :  (R4)oR7     4  7  (R)oR  ;
 :  (R5)oR7     5  7  (R)oR  ;
 :  (R6)oR7     6  7  (R)oR  ;
 :  (R7)oR7     7  7  (R)oR  ;

 :  (R0)nR0     0  0  (R)nR  ;
 :  (R1)nR0     1  0  (R)nR  ;
 :  (R2)nR0     2  0  (R)nR  ;
 :  (R3)nR0     3  0  (R)nR  ;
 :  (R4)nR0     4  0  (R)nR  ;
 :  (R5)nR0     5  0  (R)nR  ;
 :  (R6)nR0     6  0  (R)nR  ;
 :  (R7)nR0     7  0  (R)nR  ;
 :  (R0)nR1     0  1  (R)nR  ;
 :  (R1)nR1     1  1  (R)nR  ;
 :  (R2)nR1     2  1  (R)nR  ;
 :  (R3)nR1     3  1  (R)nR  ;
 :  (R4)nR1     4  1  (R)nR  ;
 :  (R5)nR1     5  1  (R)nR  ;
 :  (R6)nR1     6  1  (R)nR  ;
 :  (R7)nR1     7  1  (R)nR  ;
 :  (R0)nR2     0  2  (R)nR  ;
 :  (R1)nR2     1  2  (R)nR  ;
 :  (R2)nR2     2  2  (R)nR  ;
 :  (R3)nR2     3  2  (R)nR  ;
 :  (R4)nR2     4  2  (R)nR  ;
 :  (R5)nR2     5  2  (R)nR  ;
 :  (R6)nR2     6  2  (R)nR  ;
 :  (R7)nR2     7  2  (R)nR  ;
 :  (R0)nR3     0  3  (R)nR  ;
 :  (R1)nR3     1  3  (R)nR  ;
 :  (R2)nR3     2  3  (R)nR  ;
 :  (R3)nR3     3  3  (R)nR  ;
 :  (R4)nR3     4  3  (R)nR  ;
 :  (R5)nR3     5  3  (R)nR  ;
 :  (R6)nR3     6  3  (R)nR  ;
 :  (R7)nR3     7  3  (R)nR  ;
 :  (R0)nR4     0  4  (R)nR  ;
 :  (R1)nR4     1  4  (R)nR  ;
 :  (R2)nR4     2  4  (R)nR  ;
 :  (R3)nR4     3  4  (R)nR  ;
 :  (R4)nR4     4  4  (R)nR  ;
 :  (R5)nR4     5  4  (R)nR  ;
 :  (R6)nR4     6  4  (R)nR  ;
 :  (R7)nR4     7  4  (R)nR  ;
 :  (R0)nR5     0  5  (R)nR  ;
 :  (R1)nR5     1  5  (R)nR  ;
 :  (R2)nR5     2  5  (R)nR  ;
 :  (R3)nR5     3  5  (R)nR  ;
 :  (R4)nR5     4  5  (R)nR  ;
 :  (R5)nR5     5  5  (R)nR  ;
 :  (R6)nR5     6  5  (R)nR  ;
 :  (R7)nR5     7  5  (R)nR  ;
 :  (R0)nR6     0  6  (R)nR  ;
 :  (R1)nR6     1  6  (R)nR  ;
 :  (R2)nR6     2  6  (R)nR  ;
 :  (R3)nR6     3  6  (R)nR  ;
 :  (R4)nR6     4  6  (R)nR  ;
 :  (R5)nR6     5  6  (R)nR  ;
 :  (R6)nR6     6  6  (R)nR  ;
 :  (R7)nR6     7  6  (R)nR  ;
 :  (R0)nR7     0  7  (R)nR  ;
 :  (R1)nR7     1  7  (R)nR  ;
 :  (R2)nR7     2  7  (R)nR  ;
 :  (R3)nR7     3  7  (R)nR  ;
 :  (R4)nR7     4  7  (R)nR  ;
 :  (R5)nR7     5  7  (R)nR  ;
 :  (R6)nR7     6  7  (R)nR  ;
 :  (R7)nR7     7  7  (R)nR  ;

 :  (R0)+R0     0  0  (R)+R  ;
 :  (R1)+R0     1  0  (R)+R  ;
 :  (R2)+R0     2  0  (R)+R  ;
 :  (R3)+R0     3  0  (R)+R  ;
 :  (R4)+R0     4  0  (R)+R  ;
 :  (R5)+R0     5  0  (R)+R  ;
 :  (R6)+R0     6  0  (R)+R  ;
 :  (R7)+R0     7  0  (R)+R  ;
 :  (R0)+R1     0  1  (R)+R  ;
 :  (R1)+R1     1  1  (R)+R  ;
 :  (R2)+R1     2  1  (R)+R  ;
 :  (R3)+R1     3  1  (R)+R  ;
 :  (R4)+R1     4  1  (R)+R  ;
 :  (R5)+R1     5  1  (R)+R  ;
 :  (R6)+R1     6  1  (R)+R  ;
 :  (R7)+R1     7  1  (R)+R  ;
 :  (R0)+R2     0  2  (R)+R  ;
 :  (R1)+R2     1  2  (R)+R  ;
 :  (R2)+R2     2  2  (R)+R  ;
 :  (R3)+R2     3  2  (R)+R  ;
 :  (R4)+R2     4  2  (R)+R  ;
 :  (R5)+R2     5  2  (R)+R  ;
 :  (R6)+R2     6  2  (R)+R  ;
 :  (R7)+R2     7  2  (R)+R  ;
 :  (R0)+R3     0  3  (R)+R  ;
 :  (R1)+R3     1  3  (R)+R  ;
 :  (R2)+R3     2  3  (R)+R  ;
 :  (R3)+R3     3  3  (R)+R  ;
 :  (R4)+R3     4  3  (R)+R  ;
 :  (R5)+R3     5  3  (R)+R  ;
 :  (R6)+R3     6  3  (R)+R  ;
 :  (R7)+R3     7  3  (R)+R  ;
 :  (R0)+R4     0  4  (R)+R  ;
 :  (R1)+R4     1  4  (R)+R  ;
 :  (R2)+R4     2  4  (R)+R  ;
 :  (R3)+R4     3  4  (R)+R  ;
 :  (R4)+R4     4  4  (R)+R  ;
 :  (R5)+R4     5  4  (R)+R  ;
 :  (R6)+R4     6  4  (R)+R  ;
 :  (R7)+R4     7  4  (R)+R  ;
 :  (R0)+R5     0  5  (R)+R  ;
 :  (R1)+R5     1  5  (R)+R  ;
 :  (R2)+R5     2  5  (R)+R  ;
 :  (R3)+R5     3  5  (R)+R  ;
 :  (R4)+R5     4  5  (R)+R  ;
 :  (R5)+R5     5  5  (R)+R  ;
 :  (R6)+R5     6  5  (R)+R  ;
 :  (R7)+R5     7  5  (R)+R  ;
 :  (R0)+R6     0  6  (R)+R  ;
 :  (R1)+R6     1  6  (R)+R  ;
 :  (R2)+R6     2  6  (R)+R  ;
 :  (R3)+R6     3  6  (R)+R  ;
 :  (R4)+R6     4  6  (R)+R  ;
 :  (R5)+R6     5  6  (R)+R  ;
 :  (R6)+R6     6  6  (R)+R  ;
 :  (R7)+R6     7  6  (R)+R  ;
 :  (R0)+R7     0  7  (R)+R  ;
 :  (R1)+R7     1  7  (R)+R  ;
 :  (R2)+R7     2  7  (R)+R  ;
 :  (R3)+R7     3  7  (R)+R  ;
 :  (R4)+R7     4  7  (R)+R  ;
 :  (R5)+R7     5  7  (R)+R  ;
 :  (R6)+R7     6  7  (R)+R  ;
 :  (R7)+R7     7  7  (R)+R  ;

 :  (R0)-R0     0  0  (R)-R  ;
 :  (R1)-R0     1  0  (R)-R  ;
 :  (R2)-R0     2  0  (R)-R  ;
 :  (R3)-R0     3  0  (R)-R  ;
 :  (R4)-R0     4  0  (R)-R  ;
 :  (R5)-R0     5  0  (R)-R  ;
 :  (R6)-R0     6  0  (R)-R  ;
 :  (R7)-R0     7  0  (R)-R  ;
 :  (R0)-R1     0  1  (R)-R  ;
 :  (R1)-R1     1  1  (R)-R  ;
 :  (R2)-R1     2  1  (R)-R  ;
 :  (R3)-R1     3  1  (R)-R  ;
 :  (R4)-R1     4  1  (R)-R  ;
 :  (R5)-R1     5  1  (R)-R  ;
 :  (R6)-R1     6  1  (R)-R  ;
 :  (R7)-R1     7  1  (R)-R  ;
 :  (R0)-R2     0  2  (R)-R  ;
 :  (R1)-R2     1  2  (R)-R  ;
 :  (R2)-R2     2  2  (R)-R  ;
 :  (R3)-R2     3  2  (R)-R  ;
 :  (R4)-R2     4  2  (R)-R  ;
 :  (R5)-R2     5  2  (R)-R  ;
 :  (R6)-R2     6  2  (R)-R  ;
 :  (R7)-R2     7  2  (R)-R  ;
 :  (R0)-R3     0  3  (R)-R  ;
 :  (R1)-R3     1  3  (R)-R  ;
 :  (R2)-R3     2  3  (R)-R  ;
 :  (R3)-R3     3  3  (R)-R  ;
 :  (R4)-R3     4  3  (R)-R  ;
 :  (R5)-R3     5  3  (R)-R  ;
 :  (R6)-R3     6  3  (R)-R  ;
 :  (R7)-R3     7  3  (R)-R  ;
 :  (R0)-R4     0  4  (R)-R  ;
 :  (R1)-R4     1  4  (R)-R  ;
 :  (R2)-R4     2  4  (R)-R  ;
 :  (R3)-R4     3  4  (R)-R  ;
 :  (R4)-R4     4  4  (R)-R  ;
 :  (R5)-R4     5  4  (R)-R  ;
 :  (R6)-R4     6  4  (R)-R  ;
 :  (R7)-R4     7  4  (R)-R  ;
 :  (R0)-R5     0  5  (R)-R  ;
 :  (R1)-R5     1  5  (R)-R  ;
 :  (R2)-R5     2  5  (R)-R  ;
 :  (R3)-R5     3  5  (R)-R  ;
 :  (R4)-R5     4  5  (R)-R  ;
 :  (R5)-R5     5  5  (R)-R  ;
 :  (R6)-R5     6  5  (R)-R  ;
 :  (R7)-R5     7  5  (R)-R  ;
 :  (R0)-R6     0  6  (R)-R  ;
 :  (R1)-R6     1  6  (R)-R  ;
 :  (R2)-R6     2  6  (R)-R  ;
 :  (R3)-R6     3  6  (R)-R  ;
 :  (R4)-R6     4  6  (R)-R  ;
 :  (R5)-R6     5  6  (R)-R  ;
 :  (R6)-R6     6  6  (R)-R  ;
 :  (R7)-R6     7  6  (R)-R  ;
 :  (R0)-R7     0  7  (R)-R  ;
 :  (R1)-R7     1  7  (R)-R  ;
 :  (R2)-R7     2  7  (R)-R  ;
 :  (R3)-R7     3  7  (R)-R  ;
 :  (R4)-R7     4  7  (R)-R  ;
 :  (R5)-R7     5  7  (R)-R  ;
 :  (R6)-R7     6  7  (R)-R  ;
 :  (R7)-R7     7  7  (R)-R  ;

comment;



 :  R0=(R0+#)    >r  0  0  r>  R=(R+#)  ;
 :  R1=(R0+#)    >r  1  0  r>  R=(R+#)  ;
 :  R2=(R0+#)    >r  2  0  r>  R=(R+#)  ;
 :  R3=(R0+#)    >r  3  0  r>  R=(R+#)  ;
 :  R4=(R0+#)    >r  4  0  r>  R=(R+#)  ;
 :  R5=(R0+#)    >r  5  0  r>  R=(R+#)  ;
 :  R6=(R0+#)    >r  6  0  r>  R=(R+#)  ;
 :  R7=(R0+#)    >r  7  0  r>  R=(R+#)  ;
 :  R0=(R1+#)    >r  0  1  r>  R=(R+#)  ;
 :  R1=(R1+#)    >r  1  1  r>  R=(R+#)  ;
 :  R2=(R1+#)    >r  2  1  r>  R=(R+#)  ;
 :  R3=(R1+#)    >r  3  1  r>  R=(R+#)  ;
 :  R4=(R1+#)    >r  4  1  r>  R=(R+#)  ;
 :  R5=(R1+#)    >r  5  1  r>  R=(R+#)  ;
 :  R6=(R1+#)    >r  6  1  r>  R=(R+#)  ;
 :  R7=(R1+#)    >r  7  1  r>  R=(R+#)  ;
 :  R0=(R2+#)    >r  0  2  r>  R=(R+#)  ;
 :  R1=(R2+#)    >r  1  2  r>  R=(R+#)  ;
 :  R2=(R2+#)    >r  2  2  r>  R=(R+#)  ;
 :  R3=(R2+#)    >r  3  2  r>  R=(R+#)  ;
 :  R4=(R2+#)    >r  4  2  r>  R=(R+#)  ;
 :  R5=(R2+#)    >r  5  2  r>  R=(R+#)  ;
 :  R6=(R2+#)    >r  6  2  r>  R=(R+#)  ;
 :  R7=(R2+#)    >r  7  2  r>  R=(R+#)  ;
 :  R0=(R3+#)    >r  0  3  r>  R=(R+#)  ;
 :  R1=(R3+#)    >r  1  3  r>  R=(R+#)  ;
 :  R2=(R3+#)    >r  2  3  r>  R=(R+#)  ;
 :  R3=(R3+#)    >r  3  3  r>  R=(R+#)  ;
 :  R4=(R3+#)    >r  4  3  r>  R=(R+#)  ;
 :  R5=(R3+#)    >r  5  3  r>  R=(R+#)  ;
 :  R6=(R3+#)    >r  6  3  r>  R=(R+#)  ;
 :  R7=(R3+#)    >r  7  3  r>  R=(R+#)  ;
 :  R0=(R4+#)    >r  0  4  r>  R=(R+#)  ;
 :  R1=(R4+#)    >r  1  4  r>  R=(R+#)  ;
 :  R2=(R4+#)    >r  2  4  r>  R=(R+#)  ;
 :  R3=(R4+#)    >r  3  4  r>  R=(R+#)  ;
 :  R4=(R4+#)    >r  4  4  r>  R=(R+#)  ;
 :  R5=(R4+#)    >r  5  4  r>  R=(R+#)  ;
 :  R6=(R4+#)    >r  6  4  r>  R=(R+#)  ;
 :  R7=(R4+#)    >r  7  4  r>  R=(R+#)  ;
 :  R0=(R5+#)    >r  0  5  r>  R=(R+#)  ;
 :  R1=(R5+#)    >r  1  5  r>  R=(R+#)  ;
 :  R2=(R5+#)    >r  2  5  r>  R=(R+#)  ;
 :  R3=(R5+#)    >r  3  5  r>  R=(R+#)  ;
 :  R4=(R5+#)    >r  4  5  r>  R=(R+#)  ;
 :  R5=(R5+#)    >r  5  5  r>  R=(R+#)  ;
 :  R6=(R5+#)    >r  6  5  r>  R=(R+#)  ;
 :  R7=(R5+#)    >r  7  5  r>  R=(R+#)  ;
 :  R0=(R6+#)    >r  0  6  r>  R=(R+#)  ;
 :  R1=(R6+#)    >r  1  6  r>  R=(R+#)  ;
 :  R2=(R6+#)    >r  2  6  r>  R=(R+#)  ;
 :  R3=(R6+#)    >r  3  6  r>  R=(R+#)  ;
 :  R4=(R6+#)    >r  4  6  r>  R=(R+#)  ;
 :  R5=(R6+#)    >r  5  6  r>  R=(R+#)  ;
 :  R6=(R6+#)    >r  6  6  r>  R=(R+#)  ;
 :  R7=(R6+#)    >r  7  6  r>  R=(R+#)  ;
 :  R0=(R7+#)    >r  0  7  r>  R=(R+#)  ;
 :  R1=(R7+#)    >r  1  7  r>  R=(R+#)  ;
 :  R2=(R7+#)    >r  2  7  r>  R=(R+#)  ;
 :  R3=(R7+#)    >r  3  7  r>  R=(R+#)  ;
 :  R4=(R7+#)    >r  4  7  r>  R=(R+#)  ;
 :  R5=(R7+#)    >r  5  7  r>  R=(R+#)  ;
 :  R6=(R7+#)    >r  6  7  r>  R=(R+#)  ;
 :  R7=(R7+#)    >r  7  7  r>  R=(R+#)  ;

comment:
 :  R0x(R0+#)    >r  0  0  r>  Rx(R+#)  ;
 :  R1x(R0+#)    >r  1  0  r>  Rx(R+#)  ;
 :  R2x(R0+#)    >r  2  0  r>  Rx(R+#)  ;
 :  R3x(R0+#)    >r  3  0  r>  Rx(R+#)  ;
 :  R4x(R0+#)    >r  4  0  r>  Rx(R+#)  ;
 :  R5x(R0+#)    >r  5  0  r>  Rx(R+#)  ;
 :  R6x(R0+#)    >r  6  0  r>  Rx(R+#)  ;
 :  R7x(R0+#)    >r  7  0  r>  Rx(R+#)  ;
 :  R0x(R1+#)    >r  0  1  r>  Rx(R+#)  ;
 :  R1x(R1+#)    >r  1  1  r>  Rx(R+#)  ;
 :  R2x(R1+#)    >r  2  1  r>  Rx(R+#)  ;
 :  R3x(R1+#)    >r  3  1  r>  Rx(R+#)  ;
 :  R4x(R1+#)    >r  4  1  r>  Rx(R+#)  ;
 :  R5x(R1+#)    >r  5  1  r>  Rx(R+#)  ;
 :  R6x(R1+#)    >r  6  1  r>  Rx(R+#)  ;
 :  R7x(R1+#)    >r  7  1  r>  Rx(R+#)  ;
 :  R0x(R2+#)    >r  0  2  r>  Rx(R+#)  ;
 :  R1x(R2+#)    >r  1  2  r>  Rx(R+#)  ;
 :  R2x(R2+#)    >r  2  2  r>  Rx(R+#)  ;
 :  R3x(R2+#)    >r  3  2  r>  Rx(R+#)  ;
 :  R4x(R2+#)    >r  4  2  r>  Rx(R+#)  ;
 :  R5x(R2+#)    >r  5  2  r>  Rx(R+#)  ;
 :  R6x(R2+#)    >r  6  2  r>  Rx(R+#)  ;
 :  R7x(R2+#)    >r  7  2  r>  Rx(R+#)  ;
 :  R0x(R3+#)    >r  0  3  r>  Rx(R+#)  ;
 :  R1x(R3+#)    >r  1  3  r>  Rx(R+#)  ;
 :  R2x(R3+#)    >r  2  3  r>  Rx(R+#)  ;
 :  R3x(R3+#)    >r  3  3  r>  Rx(R+#)  ;
 :  R4x(R3+#)    >r  4  3  r>  Rx(R+#)  ;
 :  R5x(R3+#)    >r  5  3  r>  Rx(R+#)  ;
 :  R6x(R3+#)    >r  6  3  r>  Rx(R+#)  ;
 :  R7x(R3+#)    >r  7  3  r>  Rx(R+#)  ;
 :  R0x(R4+#)    >r  0  4  r>  Rx(R+#)  ;
 :  R1x(R4+#)    >r  1  4  r>  Rx(R+#)  ;
 :  R2x(R4+#)    >r  2  4  r>  Rx(R+#)  ;
 :  R3x(R4+#)    >r  3  4  r>  Rx(R+#)  ;
 :  R4x(R4+#)    >r  4  4  r>  Rx(R+#)  ;
 :  R5x(R4+#)    >r  5  4  r>  Rx(R+#)  ;
 :  R6x(R4+#)    >r  6  4  r>  Rx(R+#)  ;
 :  R7x(R4+#)    >r  7  4  r>  Rx(R+#)  ;
 :  R0x(R5+#)    >r  0  5  r>  Rx(R+#)  ;
 :  R1x(R5+#)    >r  1  5  r>  Rx(R+#)  ;
 :  R2x(R5+#)    >r  2  5  r>  Rx(R+#)  ;
 :  R3x(R5+#)    >r  3  5  r>  Rx(R+#)  ;
 :  R4x(R5+#)    >r  4  5  r>  Rx(R+#)  ;
 :  R5x(R5+#)    >r  5  5  r>  Rx(R+#)  ;
 :  R6x(R5+#)    >r  6  5  r>  Rx(R+#)  ;
 :  R7x(R5+#)    >r  7  5  r>  Rx(R+#)  ;
 :  R0x(R6+#)    >r  0  6  r>  Rx(R+#)  ;
 :  R1x(R6+#)    >r  1  6  r>  Rx(R+#)  ;
 :  R2x(R6+#)    >r  2  6  r>  Rx(R+#)  ;
 :  R3x(R6+#)    >r  3  6  r>  Rx(R+#)  ;
 :  R4x(R6+#)    >r  4  6  r>  Rx(R+#)  ;
 :  R5x(R6+#)    >r  5  6  r>  Rx(R+#)  ;
 :  R6x(R6+#)    >r  6  6  r>  Rx(R+#)  ;
 :  R7x(R6+#)    >r  7  6  r>  Rx(R+#)  ;
 :  R0x(R7+#)    >r  0  7  r>  Rx(R+#)  ;
 :  R1x(R7+#)    >r  1  7  r>  Rx(R+#)  ;
 :  R2x(R7+#)    >r  2  7  r>  Rx(R+#)  ;
 :  R3x(R7+#)    >r  3  7  r>  Rx(R+#)  ;
 :  R4x(R7+#)    >r  4  7  r>  Rx(R+#)  ;
 :  R5x(R7+#)    >r  5  7  r>  Rx(R+#)  ;
 :  R6x(R7+#)    >r  6  7  r>  Rx(R+#)  ;
 :  R7x(R7+#)    >r  7  7  r>  Rx(R+#)  ;


 :  R0o(R0+#)    >r  0  0  r>  Ro(R+#)  ;
 :  R1o(R0+#)    >r  1  0  r>  Ro(R+#)  ;
 :  R2o(R0+#)    >r  2  0  r>  Ro(R+#)  ;
 :  R3o(R0+#)    >r  3  0  r>  Ro(R+#)  ;
 :  R4o(R0+#)    >r  4  0  r>  Ro(R+#)  ;
 :  R5o(R0+#)    >r  5  0  r>  Ro(R+#)  ;
 :  R6o(R0+#)    >r  6  0  r>  Ro(R+#)  ;
 :  R7o(R0+#)    >r  7  0  r>  Ro(R+#)  ;
 :  R0o(R1+#)    >r  0  1  r>  Ro(R+#)  ;
 :  R1o(R1+#)    >r  1  1  r>  Ro(R+#)  ;
 :  R2o(R1+#)    >r  2  1  r>  Ro(R+#)  ;
 :  R3o(R1+#)    >r  3  1  r>  Ro(R+#)  ;
 :  R4o(R1+#)    >r  4  1  r>  Ro(R+#)  ;
 :  R5o(R1+#)    >r  5  1  r>  Ro(R+#)  ;
 :  R6o(R1+#)    >r  6  1  r>  Ro(R+#)  ;
 :  R7o(R1+#)    >r  7  1  r>  Ro(R+#)  ;
 :  R0o(R2+#)    >r  0  2  r>  Ro(R+#)  ;
 :  R1o(R2+#)    >r  1  2  r>  Ro(R+#)  ;
 :  R2o(R2+#)    >r  2  2  r>  Ro(R+#)  ;
 :  R3o(R2+#)    >r  3  2  r>  Ro(R+#)  ;
 :  R4o(R2+#)    >r  4  2  r>  Ro(R+#)  ;
 :  R5o(R2+#)    >r  5  2  r>  Ro(R+#)  ;
 :  R6o(R2+#)    >r  6  2  r>  Ro(R+#)  ;
 :  R7o(R2+#)    >r  7  2  r>  Ro(R+#)  ;
 :  R0o(R3+#)    >r  0  3  r>  Ro(R+#)  ;
 :  R1o(R3+#)    >r  1  3  r>  Ro(R+#)  ;
 :  R2o(R3+#)    >r  2  3  r>  Ro(R+#)  ;
 :  R3o(R3+#)    >r  3  3  r>  Ro(R+#)  ;
 :  R4o(R3+#)    >r  4  3  r>  Ro(R+#)  ;
 :  R5o(R3+#)    >r  5  3  r>  Ro(R+#)  ;
 :  R6o(R3+#)    >r  6  3  r>  Ro(R+#)  ;
 :  R7o(R3+#)    >r  7  3  r>  Ro(R+#)  ;
 :  R0o(R4+#)    >r  0  4  r>  Ro(R+#)  ;
 :  R1o(R4+#)    >r  1  4  r>  Ro(R+#)  ;
 :  R2o(R4+#)    >r  2  4  r>  Ro(R+#)  ;
 :  R3o(R4+#)    >r  3  4  r>  Ro(R+#)  ;
 :  R4o(R4+#)    >r  4  4  r>  Ro(R+#)  ;
 :  R5o(R4+#)    >r  5  4  r>  Ro(R+#)  ;
 :  R6o(R4+#)    >r  6  4  r>  Ro(R+#)  ;
 :  R7o(R4+#)    >r  7  4  r>  Ro(R+#)  ;
 :  R0o(R5+#)    >r  0  5  r>  Ro(R+#)  ;
 :  R1o(R5+#)    >r  1  5  r>  Ro(R+#)  ;
 :  R2o(R5+#)    >r  2  5  r>  Ro(R+#)  ;
 :  R3o(R5+#)    >r  3  5  r>  Ro(R+#)  ;
 :  R4o(R5+#)    >r  4  5  r>  Ro(R+#)  ;
 :  R5o(R5+#)    >r  5  5  r>  Ro(R+#)  ;
 :  R6o(R5+#)    >r  6  5  r>  Ro(R+#)  ;
 :  R7o(R5+#)    >r  7  5  r>  Ro(R+#)  ;
 :  R0o(R6+#)    >r  0  6  r>  Ro(R+#)  ;
 :  R1o(R6+#)    >r  1  6  r>  Ro(R+#)  ;
 :  R2o(R6+#)    >r  2  6  r>  Ro(R+#)  ;
 :  R3o(R6+#)    >r  3  6  r>  Ro(R+#)  ;
 :  R4o(R6+#)    >r  4  6  r>  Ro(R+#)  ;
 :  R5o(R6+#)    >r  5  6  r>  Ro(R+#)  ;
 :  R6o(R6+#)    >r  6  6  r>  Ro(R+#)  ;
 :  R7o(R6+#)    >r  7  6  r>  Ro(R+#)  ;
 :  R0o(R7+#)    >r  0  7  r>  Ro(R+#)  ;
 :  R1o(R7+#)    >r  1  7  r>  Ro(R+#)  ;
 :  R2o(R7+#)    >r  2  7  r>  Ro(R+#)  ;
 :  R3o(R7+#)    >r  3  7  r>  Ro(R+#)  ;
 :  R4o(R7+#)    >r  4  7  r>  Ro(R+#)  ;
 :  R5o(R7+#)    >r  5  7  r>  Ro(R+#)  ;
 :  R6o(R7+#)    >r  6  7  r>  Ro(R+#)  ;
 :  R7o(R7+#)    >r  7  7  r>  Ro(R+#)  ;

 :  R0n(R0+#)    >r  0  0  r>  Rn(R+#)  ;
 :  R1n(R0+#)    >r  1  0  r>  Rn(R+#)  ;
 :  R2n(R0+#)    >r  2  0  r>  Rn(R+#)  ;
 :  R3n(R0+#)    >r  3  0  r>  Rn(R+#)  ;
 :  R4n(R0+#)    >r  4  0  r>  Rn(R+#)  ;
 :  R5n(R0+#)    >r  5  0  r>  Rn(R+#)  ;
 :  R6n(R0+#)    >r  6  0  r>  Rn(R+#)  ;
 :  R7n(R0+#)    >r  7  0  r>  Rn(R+#)  ;
 :  R0n(R1+#)    >r  0  1  r>  Rn(R+#)  ;
 :  R1n(R1+#)    >r  1  1  r>  Rn(R+#)  ;
 :  R2n(R1+#)    >r  2  1  r>  Rn(R+#)  ;
 :  R3n(R1+#)    >r  3  1  r>  Rn(R+#)  ;
 :  R4n(R1+#)    >r  4  1  r>  Rn(R+#)  ;
 :  R5n(R1+#)    >r  5  1  r>  Rn(R+#)  ;
 :  R6n(R1+#)    >r  6  1  r>  Rn(R+#)  ;
 :  R7n(R1+#)    >r  7  1  r>  Rn(R+#)  ;
 :  R0n(R2+#)    >r  0  2  r>  Rn(R+#)  ;
 :  R1n(R2+#)    >r  1  2  r>  Rn(R+#)  ;
 :  R2n(R2+#)    >r  2  2  r>  Rn(R+#)  ;
 :  R3n(R2+#)    >r  3  2  r>  Rn(R+#)  ;
 :  R4n(R2+#)    >r  4  2  r>  Rn(R+#)  ;
 :  R5n(R2+#)    >r  5  2  r>  Rn(R+#)  ;
 :  R6n(R2+#)    >r  6  2  r>  Rn(R+#)  ;
 :  R7n(R2+#)    >r  7  2  r>  Rn(R+#)  ;
 :  R0n(R3+#)    >r  0  3  r>  Rn(R+#)  ;
 :  R1n(R3+#)    >r  1  3  r>  Rn(R+#)  ;
 :  R2n(R3+#)    >r  2  3  r>  Rn(R+#)  ;
 :  R3n(R3+#)    >r  3  3  r>  Rn(R+#)  ;
 :  R4n(R3+#)    >r  4  3  r>  Rn(R+#)  ;
 :  R5n(R3+#)    >r  5  3  r>  Rn(R+#)  ;
 :  R6n(R3+#)    >r  6  3  r>  Rn(R+#)  ;
 :  R7n(R3+#)    >r  7  3  r>  Rn(R+#)  ;
 :  R0n(R4+#)    >r  0  4  r>  Rn(R+#)  ;
 :  R1n(R4+#)    >r  1  4  r>  Rn(R+#)  ;
 :  R2n(R4+#)    >r  2  4  r>  Rn(R+#)  ;
 :  R3n(R4+#)    >r  3  4  r>  Rn(R+#)  ;
 :  R4n(R4+#)    >r  4  4  r>  Rn(R+#)  ;
 :  R5n(R4+#)    >r  5  4  r>  Rn(R+#)  ;
 :  R6n(R4+#)    >r  6  4  r>  Rn(R+#)  ;
 :  R7n(R4+#)    >r  7  4  r>  Rn(R+#)  ;
 :  R0n(R5+#)    >r  0  5  r>  Rn(R+#)  ;
 :  R1n(R5+#)    >r  1  5  r>  Rn(R+#)  ;
 :  R2n(R5+#)    >r  2  5  r>  Rn(R+#)  ;
 :  R3n(R5+#)    >r  3  5  r>  Rn(R+#)  ;
 :  R4n(R5+#)    >r  4  5  r>  Rn(R+#)  ;
 :  R5n(R5+#)    >r  5  5  r>  Rn(R+#)  ;
 :  R6n(R5+#)    >r  6  5  r>  Rn(R+#)  ;
 :  R7n(R5+#)    >r  7  5  r>  Rn(R+#)  ;
 :  R0n(R6+#)    >r  0  6  r>  Rn(R+#)  ;
 :  R1n(R6+#)    >r  1  6  r>  Rn(R+#)  ;
 :  R2n(R6+#)    >r  2  6  r>  Rn(R+#)  ;
 :  R3n(R6+#)    >r  3  6  r>  Rn(R+#)  ;
 :  R4n(R6+#)    >r  4  6  r>  Rn(R+#)  ;
 :  R5n(R6+#)    >r  5  6  r>  Rn(R+#)  ;
 :  R6n(R6+#)    >r  6  6  r>  Rn(R+#)  ;
 :  R7n(R6+#)    >r  7  6  r>  Rn(R+#)  ;
 :  R0n(R7+#)    >r  0  7  r>  Rn(R+#)  ;
 :  R1n(R7+#)    >r  1  7  r>  Rn(R+#)  ;
 :  R2n(R7+#)    >r  2  7  r>  Rn(R+#)  ;
 :  R3n(R7+#)    >r  3  7  r>  Rn(R+#)  ;
 :  R4n(R7+#)    >r  4  7  r>  Rn(R+#)  ;
 :  R5n(R7+#)    >r  5  7  r>  Rn(R+#)  ;
 :  R6n(R7+#)    >r  6  7  r>  Rn(R+#)  ;
 :  R7n(R7+#)    >r  7  7  r>  Rn(R+#)  ;

 :  R0+(R0+#)    >r  0  0  r>  R+(R+#)  ;
 :  R1+(R0+#)    >r  1  0  r>  R+(R+#)  ;
 :  R2+(R0+#)    >r  2  0  r>  R+(R+#)  ;
 :  R3+(R0+#)    >r  3  0  r>  R+(R+#)  ;
 :  R4+(R0+#)    >r  4  0  r>  R+(R+#)  ;
 :  R5+(R0+#)    >r  5  0  r>  R+(R+#)  ;
 :  R6+(R0+#)    >r  6  0  r>  R+(R+#)  ;
 :  R7+(R0+#)    >r  7  0  r>  R+(R+#)  ;
 :  R0+(R1+#)    >r  0  1  r>  R+(R+#)  ;
 :  R1+(R1+#)    >r  1  1  r>  R+(R+#)  ;
 :  R2+(R1+#)    >r  2  1  r>  R+(R+#)  ;
 :  R3+(R1+#)    >r  3  1  r>  R+(R+#)  ;
 :  R4+(R1+#)    >r  4  1  r>  R+(R+#)  ;
 :  R5+(R1+#)    >r  5  1  r>  R+(R+#)  ;
 :  R6+(R1+#)    >r  6  1  r>  R+(R+#)  ;
 :  R7+(R1+#)    >r  7  1  r>  R+(R+#)  ;
 :  R0+(R2+#)    >r  0  2  r>  R+(R+#)  ;
 :  R1+(R2+#)    >r  1  2  r>  R+(R+#)  ;
 :  R2+(R2+#)    >r  2  2  r>  R+(R+#)  ;
 :  R3+(R2+#)    >r  3  2  r>  R+(R+#)  ;
 :  R4+(R2+#)    >r  4  2  r>  R+(R+#)  ;
 :  R5+(R2+#)    >r  5  2  r>  R+(R+#)  ;
 :  R6+(R2+#)    >r  6  2  r>  R+(R+#)  ;
 :  R7+(R2+#)    >r  7  2  r>  R+(R+#)  ;
 :  R0+(R3+#)    >r  0  3  r>  R+(R+#)  ;
 :  R1+(R3+#)    >r  1  3  r>  R+(R+#)  ;
 :  R2+(R3+#)    >r  2  3  r>  R+(R+#)  ;
 :  R3+(R3+#)    >r  3  3  r>  R+(R+#)  ;
 :  R4+(R3+#)    >r  4  3  r>  R+(R+#)  ;
 :  R5+(R3+#)    >r  5  3  r>  R+(R+#)  ;
 :  R6+(R3+#)    >r  6  3  r>  R+(R+#)  ;
 :  R7+(R3+#)    >r  7  3  r>  R+(R+#)  ;
 :  R0+(R4+#)    >r  0  4  r>  R+(R+#)  ;
 :  R1+(R4+#)    >r  1  4  r>  R+(R+#)  ;
 :  R2+(R4+#)    >r  2  4  r>  R+(R+#)  ;
 :  R3+(R4+#)    >r  3  4  r>  R+(R+#)  ;
 :  R4+(R4+#)    >r  4  4  r>  R+(R+#)  ;
 :  R5+(R4+#)    >r  5  4  r>  R+(R+#)  ;
 :  R6+(R4+#)    >r  6  4  r>  R+(R+#)  ;
 :  R7+(R4+#)    >r  7  4  r>  R+(R+#)  ;
 :  R0+(R5+#)    >r  0  5  r>  R+(R+#)  ;
 :  R1+(R5+#)    >r  1  5  r>  R+(R+#)  ;
 :  R2+(R5+#)    >r  2  5  r>  R+(R+#)  ;
 :  R3+(R5+#)    >r  3  5  r>  R+(R+#)  ;
 :  R4+(R5+#)    >r  4  5  r>  R+(R+#)  ;
 :  R5+(R5+#)    >r  5  5  r>  R+(R+#)  ;
 :  R6+(R5+#)    >r  6  5  r>  R+(R+#)  ;
 :  R7+(R5+#)    >r  7  5  r>  R+(R+#)  ;
 :  R0+(R6+#)    >r  0  6  r>  R+(R+#)  ;
 :  R1+(R6+#)    >r  1  6  r>  R+(R+#)  ;
 :  R2+(R6+#)    >r  2  6  r>  R+(R+#)  ;
 :  R3+(R6+#)    >r  3  6  r>  R+(R+#)  ;
 :  R4+(R6+#)    >r  4  6  r>  R+(R+#)  ;
 :  R5+(R6+#)    >r  5  6  r>  R+(R+#)  ;
 :  R6+(R6+#)    >r  6  6  r>  R+(R+#)  ;
 :  R7+(R6+#)    >r  7  6  r>  R+(R+#)  ;
 :  R0+(R7+#)    >r  0  7  r>  R+(R+#)  ;
 :  R1+(R7+#)    >r  1  7  r>  R+(R+#)  ;
 :  R2+(R7+#)    >r  2  7  r>  R+(R+#)  ;
 :  R3+(R7+#)    >r  3  7  r>  R+(R+#)  ;
 :  R4+(R7+#)    >r  4  7  r>  R+(R+#)  ;
 :  R5+(R7+#)    >r  5  7  r>  R+(R+#)  ;
 :  R6+(R7+#)    >r  6  7  r>  R+(R+#)  ;
 :  R7+(R7+#)    >r  7  7  r>  R+(R+#)  ;

 :  R0-(R0+#)    >r  0  0  r>  R-(R+#)  ;
 :  R1-(R0+#)    >r  1  0  r>  R-(R+#)  ;
 :  R2-(R0+#)    >r  2  0  r>  R-(R+#)  ;
 :  R3-(R0+#)    >r  3  0  r>  R-(R+#)  ;
 :  R4-(R0+#)    >r  4  0  r>  R-(R+#)  ;
 :  R5-(R0+#)    >r  5  0  r>  R-(R+#)  ;
 :  R6-(R0+#)    >r  6  0  r>  R-(R+#)  ;
 :  R7-(R0+#)    >r  7  0  r>  R-(R+#)  ;
 :  R0-(R1+#)    >r  0  1  r>  R-(R+#)  ;
 :  R1-(R1+#)    >r  1  1  r>  R-(R+#)  ;
 :  R2-(R1+#)    >r  2  1  r>  R-(R+#)  ;
 :  R3-(R1+#)    >r  3  1  r>  R-(R+#)  ;
 :  R4-(R1+#)    >r  4  1  r>  R-(R+#)  ;
 :  R5-(R1+#)    >r  5  1  r>  R-(R+#)  ;
 :  R6-(R1+#)    >r  6  1  r>  R-(R+#)  ;
 :  R7-(R1+#)    >r  7  1  r>  R-(R+#)  ;
 :  R0-(R2+#)    >r  0  2  r>  R-(R+#)  ;
 :  R1-(R2+#)    >r  1  2  r>  R-(R+#)  ;
 :  R2-(R2+#)    >r  2  2  r>  R-(R+#)  ;
 :  R3-(R2+#)    >r  3  2  r>  R-(R+#)  ;
 :  R4-(R2+#)    >r  4  2  r>  R-(R+#)  ;
 :  R5-(R2+#)    >r  5  2  r>  R-(R+#)  ;
 :  R6-(R2+#)    >r  6  2  r>  R-(R+#)  ;
 :  R7-(R2+#)    >r  7  2  r>  R-(R+#)  ;
 :  R0-(R3+#)    >r  0  3  r>  R-(R+#)  ;
 :  R1-(R3+#)    >r  1  3  r>  R-(R+#)  ;
 :  R2-(R3+#)    >r  2  3  r>  R-(R+#)  ;
 :  R3-(R3+#)    >r  3  3  r>  R-(R+#)  ;
 :  R4-(R3+#)    >r  4  3  r>  R-(R+#)  ;
 :  R5-(R3+#)    >r  5  3  r>  R-(R+#)  ;
 :  R6-(R3+#)    >r  6  3  r>  R-(R+#)  ;
 :  R7-(R3+#)    >r  7  3  r>  R-(R+#)  ;
 :  R0-(R4+#)    >r  0  4  r>  R-(R+#)  ;
 :  R1-(R4+#)    >r  1  4  r>  R-(R+#)  ;
 :  R2-(R4+#)    >r  2  4  r>  R-(R+#)  ;
 :  R3-(R4+#)    >r  3  4  r>  R-(R+#)  ;
 :  R4-(R4+#)    >r  4  4  r>  R-(R+#)  ;
 :  R5-(R4+#)    >r  5  4  r>  R-(R+#)  ;
 :  R6-(R4+#)    >r  6  4  r>  R-(R+#)  ;
 :  R7-(R4+#)    >r  7  4  r>  R-(R+#)  ;
 :  R0-(R5+#)    >r  0  5  r>  R-(R+#)  ;
 :  R1-(R5+#)    >r  1  5  r>  R-(R+#)  ;
 :  R2-(R5+#)    >r  2  5  r>  R-(R+#)  ;
 :  R3-(R5+#)    >r  3  5  r>  R-(R+#)  ;
 :  R4-(R5+#)    >r  4  5  r>  R-(R+#)  ;
 :  R5-(R5+#)    >r  5  5  r>  R-(R+#)  ;
 :  R6-(R5+#)    >r  6  5  r>  R-(R+#)  ;
 :  R7-(R5+#)    >r  7  5  r>  R-(R+#)  ;
 :  R0-(R6+#)    >r  0  6  r>  R-(R+#)  ;
 :  R1-(R6+#)    >r  1  6  r>  R-(R+#)  ;
 :  R2-(R6+#)    >r  2  6  r>  R-(R+#)  ;
 :  R3-(R6+#)    >r  3  6  r>  R-(R+#)  ;
 :  R4-(R6+#)    >r  4  6  r>  R-(R+#)  ;
 :  R5-(R6+#)    >r  5  6  r>  R-(R+#)  ;
 :  R6-(R6+#)    >r  6  6  r>  R-(R+#)  ;
 :  R7-(R6+#)    >r  7  6  r>  R-(R+#)  ;
 :  R0-(R7+#)    >r  0  7  r>  R-(R+#)  ;
 :  R1-(R7+#)    >r  1  7  r>  R-(R+#)  ;
 :  R2-(R7+#)    >r  2  7  r>  R-(R+#)  ;
 :  R3-(R7+#)    >r  3  7  r>  R-(R+#)  ;
 :  R4-(R7+#)    >r  4  7  r>  R-(R+#)  ;
 :  R5-(R7+#)    >r  5  7  r>  R-(R+#)  ;
 :  R6-(R7+#)    >r  6  7  r>  R-(R+#)  ;
 :  R7-(R7+#)    >r  7  7  r>  R-(R+#)  ;
comment;

 :  (R0+#)=R0    >r  0  r>  0  (R+#)=R  ;
 :  (R1+#)=R0    >r  1  r>  0  (R+#)=R  ;
 :  (R2+#)=R0    >r  2  r>  0  (R+#)=R  ;
 :  (R3+#)=R0    >r  3  r>  0  (R+#)=R  ;
 :  (R4+#)=R0    >r  4  r>  0  (R+#)=R  ;
 :  (R5+#)=R0    >r  5  r>  0  (R+#)=R  ;
 :  (R6+#)=R0    >r  6  r>  0  (R+#)=R  ;
 :  (R7+#)=R0    >r  7  r>  0  (R+#)=R  ;
 :  (R0+#)=R1    >r  0  r>  1  (R+#)=R  ;
 :  (R1+#)=R1    >r  1  r>  1  (R+#)=R  ;
 :  (R2+#)=R1    >r  2  r>  1  (R+#)=R  ;
 :  (R3+#)=R1    >r  3  r>  1  (R+#)=R  ;
 :  (R4+#)=R1    >r  4  r>  1  (R+#)=R  ;
 :  (R5+#)=R1    >r  5  r>  1  (R+#)=R  ;
 :  (R6+#)=R1    >r  6  r>  1  (R+#)=R  ;
 :  (R7+#)=R1    >r  7  r>  1  (R+#)=R  ;
 :  (R0+#)=R2    >r  0  r>  2  (R+#)=R  ;
 :  (R1+#)=R2    >r  1  r>  2  (R+#)=R  ;
 :  (R2+#)=R2    >r  2  r>  2  (R+#)=R  ;
 :  (R3+#)=R2    >r  3  r>  2  (R+#)=R  ;
 :  (R4+#)=R2    >r  4  r>  2  (R+#)=R  ;
 :  (R5+#)=R2    >r  5  r>  2  (R+#)=R  ;
 :  (R6+#)=R2    >r  6  r>  2  (R+#)=R  ;
 :  (R7+#)=R2    >r  7  r>  2  (R+#)=R  ;
 :  (R0+#)=R3    >r  0  r>  3  (R+#)=R  ;
 :  (R1+#)=R3    >r  1  r>  3  (R+#)=R  ;
 :  (R2+#)=R3    >r  2  r>  3  (R+#)=R  ;
 :  (R3+#)=R3    >r  3  r>  3  (R+#)=R  ;
 :  (R4+#)=R3    >r  4  r>  3  (R+#)=R  ;
 :  (R5+#)=R3    >r  5  r>  3  (R+#)=R  ;
 :  (R6+#)=R3    >r  6  r>  3  (R+#)=R  ;
 :  (R7+#)=R3    >r  7  r>  3  (R+#)=R  ;
 :  (R0+#)=R4    >r  0  r>  4  (R+#)=R  ;
 :  (R1+#)=R4    >r  1  r>  4  (R+#)=R  ;
 :  (R2+#)=R4    >r  2  r>  4  (R+#)=R  ;
 :  (R3+#)=R4    >r  3  r>  4  (R+#)=R  ;
 :  (R4+#)=R4    >r  4  r>  4  (R+#)=R  ;
 :  (R5+#)=R4    >r  5  r>  4  (R+#)=R  ;
 :  (R6+#)=R4    >r  6  r>  4  (R+#)=R  ;
 :  (R7+#)=R4    >r  7  r>  4  (R+#)=R  ;
 :  (R0+#)=R5    >r  0  r>  5  (R+#)=R  ;
 :  (R1+#)=R5    >r  1  r>  5  (R+#)=R  ;
 :  (R2+#)=R5    >r  2  r>  5  (R+#)=R  ;
 :  (R3+#)=R5    >r  3  r>  5  (R+#)=R  ;
 :  (R4+#)=R5    >r  4  r>  5  (R+#)=R  ;
 :  (R5+#)=R5    >r  5  r>  5  (R+#)=R  ;
 :  (R6+#)=R5    >r  6  r>  5  (R+#)=R  ;
 :  (R7+#)=R5    >r  7  r>  5  (R+#)=R  ;
 :  (R0+#)=R6    >r  0  r>  6  (R+#)=R  ;
 :  (R1+#)=R6    >r  1  r>  6  (R+#)=R  ;
 :  (R2+#)=R6    >r  2  r>  6  (R+#)=R  ;
 :  (R3+#)=R6    >r  3  r>  6  (R+#)=R  ;
 :  (R4+#)=R6    >r  4  r>  6  (R+#)=R  ;
 :  (R5+#)=R6    >r  5  r>  6  (R+#)=R  ;
 :  (R6+#)=R6    >r  6  r>  6  (R+#)=R  ;
 :  (R7+#)=R6    >r  7  r>  6  (R+#)=R  ;
 :  (R0+#)=R7    >r  0  r>  7  (R+#)=R  ;
 :  (R1+#)=R7    >r  1  r>  7  (R+#)=R  ;
 :  (R2+#)=R7    >r  2  r>  7  (R+#)=R  ;
 :  (R3+#)=R7    >r  3  r>  7  (R+#)=R  ;
 :  (R4+#)=R7    >r  4  r>  7  (R+#)=R  ;
 :  (R5+#)=R7    >r  5  r>  7  (R+#)=R  ;
 :  (R6+#)=R7    >r  6  r>  7  (R+#)=R  ;
 :  (R7+#)=R7    >r  7  r>  7  (R+#)=R  ;

comment:
 :  (R0+#)xR0    >r  0  r>  0  (R+#)xR  ;
 :  (R1+#)xR0    >r  1  r>  0  (R+#)xR  ;
 :  (R2+#)xR0    >r  2  r>  0  (R+#)xR  ;
 :  (R3+#)xR0    >r  3  r>  0  (R+#)xR  ;
 :  (R4+#)xR0    >r  4  r>  0  (R+#)xR  ;
 :  (R5+#)xR0    >r  5  r>  0  (R+#)xR  ;
 :  (R6+#)xR0    >r  6  r>  0  (R+#)xR  ;
 :  (R7+#)xR0    >r  7  r>  0  (R+#)xR  ;
 :  (R0+#)xR1    >r  0  r>  1  (R+#)xR  ;
 :  (R1+#)xR1    >r  1  r>  1  (R+#)xR  ;
 :  (R2+#)xR1    >r  2  r>  1  (R+#)xR  ;
 :  (R3+#)xR1    >r  3  r>  1  (R+#)xR  ;
 :  (R4+#)xR1    >r  4  r>  1  (R+#)xR  ;
 :  (R5+#)xR1    >r  5  r>  1  (R+#)xR  ;
 :  (R6+#)xR1    >r  6  r>  1  (R+#)xR  ;
 :  (R7+#)xR1    >r  7  r>  1  (R+#)xR  ;
 :  (R0+#)xR2    >r  0  r>  2  (R+#)xR  ;
 :  (R1+#)xR2    >r  1  r>  2  (R+#)xR  ;
 :  (R2+#)xR2    >r  2  r>  2  (R+#)xR  ;
 :  (R3+#)xR2    >r  3  r>  2  (R+#)xR  ;
 :  (R4+#)xR2    >r  4  r>  2  (R+#)xR  ;
 :  (R5+#)xR2    >r  5  r>  2  (R+#)xR  ;
 :  (R6+#)xR2    >r  6  r>  2  (R+#)xR  ;
 :  (R7+#)xR2    >r  7  r>  2  (R+#)xR  ;
 :  (R0+#)xR3    >r  0  r>  3  (R+#)xR  ;
 :  (R1+#)xR3    >r  1  r>  3  (R+#)xR  ;
 :  (R2+#)xR3    >r  2  r>  3  (R+#)xR  ;
 :  (R3+#)xR3    >r  3  r>  3  (R+#)xR  ;
 :  (R4+#)xR3    >r  4  r>  3  (R+#)xR  ;
 :  (R5+#)xR3    >r  5  r>  3  (R+#)xR  ;
 :  (R6+#)xR3    >r  6  r>  3  (R+#)xR  ;
 :  (R7+#)xR3    >r  7  r>  3  (R+#)xR  ;
 :  (R0+#)xR4    >r  0  r>  4  (R+#)xR  ;
 :  (R1+#)xR4    >r  1  r>  4  (R+#)xR  ;
 :  (R2+#)xR4    >r  2  r>  4  (R+#)xR  ;
 :  (R3+#)xR4    >r  3  r>  4  (R+#)xR  ;
 :  (R4+#)xR4    >r  4  r>  4  (R+#)xR  ;
 :  (R5+#)xR4    >r  5  r>  4  (R+#)xR  ;
 :  (R6+#)xR4    >r  6  r>  4  (R+#)xR  ;
 :  (R7+#)xR4    >r  7  r>  4  (R+#)xR  ;
 :  (R0+#)xR5    >r  0  r>  5  (R+#)xR  ;
 :  (R1+#)xR5    >r  1  r>  5  (R+#)xR  ;
 :  (R2+#)xR5    >r  2  r>  5  (R+#)xR  ;
 :  (R3+#)xR5    >r  3  r>  5  (R+#)xR  ;
 :  (R4+#)xR5    >r  4  r>  5  (R+#)xR  ;
 :  (R5+#)xR5    >r  5  r>  5  (R+#)xR  ;
 :  (R6+#)xR5    >r  6  r>  5  (R+#)xR  ;
 :  (R7+#)xR5    >r  7  r>  5  (R+#)xR  ;
 :  (R0+#)xR6    >r  0  r>  6  (R+#)xR  ;
 :  (R1+#)xR6    >r  1  r>  6  (R+#)xR  ;
 :  (R2+#)xR6    >r  2  r>  6  (R+#)xR  ;
 :  (R3+#)xR6    >r  3  r>  6  (R+#)xR  ;
 :  (R4+#)xR6    >r  4  r>  6  (R+#)xR  ;
 :  (R5+#)xR6    >r  5  r>  6  (R+#)xR  ;
 :  (R6+#)xR6    >r  6  r>  6  (R+#)xR  ;
 :  (R7+#)xR6    >r  7  r>  6  (R+#)xR  ;
 :  (R0+#)xR7    >r  0  r>  7  (R+#)xR  ;
 :  (R1+#)xR7    >r  1  r>  7  (R+#)xR  ;
 :  (R2+#)xR7    >r  2  r>  7  (R+#)xR  ;
 :  (R3+#)xR7    >r  3  r>  7  (R+#)xR  ;
 :  (R4+#)xR7    >r  4  r>  7  (R+#)xR  ;
 :  (R5+#)xR7    >r  5  r>  7  (R+#)xR  ;
 :  (R6+#)xR7    >r  6  r>  7  (R+#)xR  ;
 :  (R7+#)xR7    >r  7  r>  7  (R+#)xR  ;

 :  (R0+#)oR0    >r  0  r>  0  (R+#)oR  ;
 :  (R1+#)oR0    >r  1  r>  0  (R+#)oR  ;
 :  (R2+#)oR0    >r  2  r>  0  (R+#)oR  ;
 :  (R3+#)oR0    >r  3  r>  0  (R+#)oR  ;
 :  (R4+#)oR0    >r  4  r>  0  (R+#)oR  ;
 :  (R5+#)oR0    >r  5  r>  0  (R+#)oR  ;
 :  (R6+#)oR0    >r  6  r>  0  (R+#)oR  ;
 :  (R7+#)oR0    >r  7  r>  0  (R+#)oR  ;
 :  (R0+#)oR1    >r  0  r>  1  (R+#)oR  ;
 :  (R1+#)oR1    >r  1  r>  1  (R+#)oR  ;
 :  (R2+#)oR1    >r  2  r>  1  (R+#)oR  ;
 :  (R3+#)oR1    >r  3  r>  1  (R+#)oR  ;
 :  (R4+#)oR1    >r  4  r>  1  (R+#)oR  ;
 :  (R5+#)oR1    >r  5  r>  1  (R+#)oR  ;
 :  (R6+#)oR1    >r  6  r>  1  (R+#)oR  ;
 :  (R7+#)oR1    >r  7  r>  1  (R+#)oR  ;
 :  (R0+#)oR2    >r  0  r>  2  (R+#)oR  ;
 :  (R1+#)oR2    >r  1  r>  2  (R+#)oR  ;
 :  (R2+#)oR2    >r  2  r>  2  (R+#)oR  ;
 :  (R3+#)oR2    >r  3  r>  2  (R+#)oR  ;
 :  (R4+#)oR2    >r  4  r>  2  (R+#)oR  ;
 :  (R5+#)oR2    >r  5  r>  2  (R+#)oR  ;
 :  (R6+#)oR2    >r  6  r>  2  (R+#)oR  ;
 :  (R7+#)oR2    >r  7  r>  2  (R+#)oR  ;
 :  (R0+#)oR3    >r  0  r>  3  (R+#)oR  ;
 :  (R1+#)oR3    >r  1  r>  3  (R+#)oR  ;
 :  (R2+#)oR3    >r  2  r>  3  (R+#)oR  ;
 :  (R3+#)oR3    >r  3  r>  3  (R+#)oR  ;
 :  (R4+#)oR3    >r  4  r>  3  (R+#)oR  ;
 :  (R5+#)oR3    >r  5  r>  3  (R+#)oR  ;
 :  (R6+#)oR3    >r  6  r>  3  (R+#)oR  ;
 :  (R7+#)oR3    >r  7  r>  3  (R+#)oR  ;
 :  (R0+#)oR4    >r  0  r>  4  (R+#)oR  ;
 :  (R1+#)oR4    >r  1  r>  4  (R+#)oR  ;
 :  (R2+#)oR4    >r  2  r>  4  (R+#)oR  ;
 :  (R3+#)oR4    >r  3  r>  4  (R+#)oR  ;
 :  (R4+#)oR4    >r  4  r>  4  (R+#)oR  ;
 :  (R5+#)oR4    >r  5  r>  4  (R+#)oR  ;
 :  (R6+#)oR4    >r  6  r>  4  (R+#)oR  ;
 :  (R7+#)oR4    >r  7  r>  4  (R+#)oR  ;
 :  (R0+#)oR5    >r  0  r>  5  (R+#)oR  ;
 :  (R1+#)oR5    >r  1  r>  5  (R+#)oR  ;
 :  (R2+#)oR5    >r  2  r>  5  (R+#)oR  ;
 :  (R3+#)oR5    >r  3  r>  5  (R+#)oR  ;
 :  (R4+#)oR5    >r  4  r>  5  (R+#)oR  ;
 :  (R5+#)oR5    >r  5  r>  5  (R+#)oR  ;
 :  (R6+#)oR5    >r  6  r>  5  (R+#)oR  ;
 :  (R7+#)oR5    >r  7  r>  5  (R+#)oR  ;
 :  (R0+#)oR6    >r  0  r>  6  (R+#)oR  ;
 :  (R1+#)oR6    >r  1  r>  6  (R+#)oR  ;
 :  (R2+#)oR6    >r  2  r>  6  (R+#)oR  ;
 :  (R3+#)oR6    >r  3  r>  6  (R+#)oR  ;
 :  (R4+#)oR6    >r  4  r>  6  (R+#)oR  ;
 :  (R5+#)oR6    >r  5  r>  6  (R+#)oR  ;
 :  (R6+#)oR6    >r  6  r>  6  (R+#)oR  ;
 :  (R7+#)oR6    >r  7  r>  6  (R+#)oR  ;
 :  (R0+#)oR7    >r  0  r>  7  (R+#)oR  ;
 :  (R1+#)oR7    >r  1  r>  7  (R+#)oR  ;
 :  (R2+#)oR7    >r  2  r>  7  (R+#)oR  ;
 :  (R3+#)oR7    >r  3  r>  7  (R+#)oR  ;
 :  (R4+#)oR7    >r  4  r>  7  (R+#)oR  ;
 :  (R5+#)oR7    >r  5  r>  7  (R+#)oR  ;
 :  (R6+#)oR7    >r  6  r>  7  (R+#)oR  ;
 :  (R7+#)oR7    >r  7  r>  7  (R+#)oR  ;

 :  (R0+#)nR0    >r  0  r>  0  (R+#)nR  ;
 :  (R1+#)nR0    >r  1  r>  0  (R+#)nR  ;
 :  (R2+#)nR0    >r  2  r>  0  (R+#)nR  ;
 :  (R3+#)nR0    >r  3  r>  0  (R+#)nR  ;
 :  (R4+#)nR0    >r  4  r>  0  (R+#)nR  ;
 :  (R5+#)nR0    >r  5  r>  0  (R+#)nR  ;
 :  (R6+#)nR0    >r  6  r>  0  (R+#)nR  ;
 :  (R7+#)nR0    >r  7  r>  0  (R+#)nR  ;
 :  (R0+#)nR1    >r  0  r>  1  (R+#)nR  ;
 :  (R1+#)nR1    >r  1  r>  1  (R+#)nR  ;
 :  (R2+#)nR1    >r  2  r>  1  (R+#)nR  ;
 :  (R3+#)nR1    >r  3  r>  1  (R+#)nR  ;
 :  (R4+#)nR1    >r  4  r>  1  (R+#)nR  ;
 :  (R5+#)nR1    >r  5  r>  1  (R+#)nR  ;
 :  (R6+#)nR1    >r  6  r>  1  (R+#)nR  ;
 :  (R7+#)nR1    >r  7  r>  1  (R+#)nR  ;
 :  (R0+#)nR2    >r  0  r>  2  (R+#)nR  ;
 :  (R1+#)nR2    >r  1  r>  2  (R+#)nR  ;
 :  (R2+#)nR2    >r  2  r>  2  (R+#)nR  ;
 :  (R3+#)nR2    >r  3  r>  2  (R+#)nR  ;
 :  (R4+#)nR2    >r  4  r>  2  (R+#)nR  ;
 :  (R5+#)nR2    >r  5  r>  2  (R+#)nR  ;
 :  (R6+#)nR2    >r  6  r>  2  (R+#)nR  ;
 :  (R7+#)nR2    >r  7  r>  2  (R+#)nR  ;
 :  (R0+#)nR3    >r  0  r>  3  (R+#)nR  ;
 :  (R1+#)nR3    >r  1  r>  3  (R+#)nR  ;
 :  (R2+#)nR3    >r  2  r>  3  (R+#)nR  ;
 :  (R3+#)nR3    >r  3  r>  3  (R+#)nR  ;
 :  (R4+#)nR3    >r  4  r>  3  (R+#)nR  ;
 :  (R5+#)nR3    >r  5  r>  3  (R+#)nR  ;
 :  (R6+#)nR3    >r  6  r>  3  (R+#)nR  ;
 :  (R7+#)nR3    >r  7  r>  3  (R+#)nR  ;
 :  (R0+#)nR4    >r  0  r>  4  (R+#)nR  ;
 :  (R1+#)nR4    >r  1  r>  4  (R+#)nR  ;
 :  (R2+#)nR4    >r  2  r>  4  (R+#)nR  ;
 :  (R3+#)nR4    >r  3  r>  4  (R+#)nR  ;
 :  (R4+#)nR4    >r  4  r>  4  (R+#)nR  ;
 :  (R5+#)nR4    >r  5  r>  4  (R+#)nR  ;
 :  (R6+#)nR4    >r  6  r>  4  (R+#)nR  ;
 :  (R7+#)nR4    >r  7  r>  4  (R+#)nR  ;
 :  (R0+#)nR5    >r  0  r>  5  (R+#)nR  ;
 :  (R1+#)nR5    >r  1  r>  5  (R+#)nR  ;
 :  (R2+#)nR5    >r  2  r>  5  (R+#)nR  ;
 :  (R3+#)nR5    >r  3  r>  5  (R+#)nR  ;
 :  (R4+#)nR5    >r  4  r>  5  (R+#)nR  ;
 :  (R5+#)nR5    >r  5  r>  5  (R+#)nR  ;
 :  (R6+#)nR5    >r  6  r>  5  (R+#)nR  ;
 :  (R7+#)nR5    >r  7  r>  5  (R+#)nR  ;
 :  (R0+#)nR6    >r  0  r>  6  (R+#)nR  ;
 :  (R1+#)nR6    >r  1  r>  6  (R+#)nR  ;
 :  (R2+#)nR6    >r  2  r>  6  (R+#)nR  ;
 :  (R3+#)nR6    >r  3  r>  6  (R+#)nR  ;
 :  (R4+#)nR6    >r  4  r>  6  (R+#)nR  ;
 :  (R5+#)nR6    >r  5  r>  6  (R+#)nR  ;
 :  (R6+#)nR6    >r  6  r>  6  (R+#)nR  ;
 :  (R7+#)nR6    >r  7  r>  6  (R+#)nR  ;
 :  (R0+#)nR7    >r  0  r>  7  (R+#)nR  ;
 :  (R1+#)nR7    >r  1  r>  7  (R+#)nR  ;
 :  (R2+#)nR7    >r  2  r>  7  (R+#)nR  ;
 :  (R3+#)nR7    >r  3  r>  7  (R+#)nR  ;
 :  (R4+#)nR7    >r  4  r>  7  (R+#)nR  ;
 :  (R5+#)nR7    >r  5  r>  7  (R+#)nR  ;
 :  (R6+#)nR7    >r  6  r>  7  (R+#)nR  ;
 :  (R7+#)nR7    >r  7  r>  7  (R+#)nR  ;

 :  (R0+#)+R0    >r  0  r>  0  (R+#)+R  ;
 :  (R1+#)+R0    >r  1  r>  0  (R+#)+R  ;
 :  (R2+#)+R0    >r  2  r>  0  (R+#)+R  ;
 :  (R3+#)+R0    >r  3  r>  0  (R+#)+R  ;
 :  (R4+#)+R0    >r  4  r>  0  (R+#)+R  ;
 :  (R5+#)+R0    >r  5  r>  0  (R+#)+R  ;
 :  (R6+#)+R0    >r  6  r>  0  (R+#)+R  ;
 :  (R7+#)+R0    >r  7  r>  0  (R+#)+R  ;
 :  (R0+#)+R1    >r  0  r>  1  (R+#)+R  ;
 :  (R1+#)+R1    >r  1  r>  1  (R+#)+R  ;
 :  (R2+#)+R1    >r  2  r>  1  (R+#)+R  ;
 :  (R3+#)+R1    >r  3  r>  1  (R+#)+R  ;
 :  (R4+#)+R1    >r  4  r>  1  (R+#)+R  ;
 :  (R5+#)+R1    >r  5  r>  1  (R+#)+R  ;
 :  (R6+#)+R1    >r  6  r>  1  (R+#)+R  ;
 :  (R7+#)+R1    >r  7  r>  1  (R+#)+R  ;
 :  (R0+#)+R2    >r  0  r>  2  (R+#)+R  ;
 :  (R1+#)+R2    >r  1  r>  2  (R+#)+R  ;
 :  (R2+#)+R2    >r  2  r>  2  (R+#)+R  ;
 :  (R3+#)+R2    >r  3  r>  2  (R+#)+R  ;
 :  (R4+#)+R2    >r  4  r>  2  (R+#)+R  ;
 :  (R5+#)+R2    >r  5  r>  2  (R+#)+R  ;
 :  (R6+#)+R2    >r  6  r>  2  (R+#)+R  ;
 :  (R7+#)+R2    >r  7  r>  2  (R+#)+R  ;
 :  (R0+#)+R3    >r  0  r>  3  (R+#)+R  ;
 :  (R1+#)+R3    >r  1  r>  3  (R+#)+R  ;
 :  (R2+#)+R3    >r  2  r>  3  (R+#)+R  ;
 :  (R3+#)+R3    >r  3  r>  3  (R+#)+R  ;
 :  (R4+#)+R3    >r  4  r>  3  (R+#)+R  ;
 :  (R5+#)+R3    >r  5  r>  3  (R+#)+R  ;
 :  (R6+#)+R3    >r  6  r>  3  (R+#)+R  ;
 :  (R7+#)+R3    >r  7  r>  3  (R+#)+R  ;
 :  (R0+#)+R4    >r  0  r>  4  (R+#)+R  ;
 :  (R1+#)+R4    >r  1  r>  4  (R+#)+R  ;
 :  (R2+#)+R4    >r  2  r>  4  (R+#)+R  ;
 :  (R3+#)+R4    >r  3  r>  4  (R+#)+R  ;
 :  (R4+#)+R4    >r  4  r>  4  (R+#)+R  ;
 :  (R5+#)+R4    >r  5  r>  4  (R+#)+R  ;
 :  (R6+#)+R4    >r  6  r>  4  (R+#)+R  ;
 :  (R7+#)+R4    >r  7  r>  4  (R+#)+R  ;
 :  (R0+#)+R5    >r  0  r>  5  (R+#)+R  ;
 :  (R1+#)+R5    >r  1  r>  5  (R+#)+R  ;
 :  (R2+#)+R5    >r  2  r>  5  (R+#)+R  ;
 :  (R3+#)+R5    >r  3  r>  5  (R+#)+R  ;
 :  (R4+#)+R5    >r  4  r>  5  (R+#)+R  ;
 :  (R5+#)+R5    >r  5  r>  5  (R+#)+R  ;
 :  (R6+#)+R5    >r  6  r>  5  (R+#)+R  ;
 :  (R7+#)+R5    >r  7  r>  5  (R+#)+R  ;
 :  (R0+#)+R6    >r  0  r>  6  (R+#)+R  ;
 :  (R1+#)+R6    >r  1  r>  6  (R+#)+R  ;
 :  (R2+#)+R6    >r  2  r>  6  (R+#)+R  ;
 :  (R3+#)+R6    >r  3  r>  6  (R+#)+R  ;
 :  (R4+#)+R6    >r  4  r>  6  (R+#)+R  ;
 :  (R5+#)+R6    >r  5  r>  6  (R+#)+R  ;
 :  (R6+#)+R6    >r  6  r>  6  (R+#)+R  ;
 :  (R7+#)+R6    >r  7  r>  6  (R+#)+R  ;
 :  (R0+#)+R7    >r  0  r>  7  (R+#)+R  ;
 :  (R1+#)+R7    >r  1  r>  7  (R+#)+R  ;
 :  (R2+#)+R7    >r  2  r>  7  (R+#)+R  ;
 :  (R3+#)+R7    >r  3  r>  7  (R+#)+R  ;
 :  (R4+#)+R7    >r  4  r>  7  (R+#)+R  ;
 :  (R5+#)+R7    >r  5  r>  7  (R+#)+R  ;
 :  (R6+#)+R7    >r  6  r>  7  (R+#)+R  ;
 :  (R7+#)+R7    >r  7  r>  7  (R+#)+R  ;

 :  (R0+#)-R0    >r  0  r>  0  (R+#)-R  ;
 :  (R1+#)-R0    >r  1  r>  0  (R+#)-R  ;
 :  (R2+#)-R0    >r  2  r>  0  (R+#)-R  ;
 :  (R3+#)-R0    >r  3  r>  0  (R+#)-R  ;
 :  (R4+#)-R0    >r  4  r>  0  (R+#)-R  ;
 :  (R5+#)-R0    >r  5  r>  0  (R+#)-R  ;
 :  (R6+#)-R0    >r  6  r>  0  (R+#)-R  ;
 :  (R7+#)-R0    >r  7  r>  0  (R+#)-R  ;
 :  (R0+#)-R1    >r  0  r>  1  (R+#)-R  ;
 :  (R1+#)-R1    >r  1  r>  1  (R+#)-R  ;
 :  (R2+#)-R1    >r  2  r>  1  (R+#)-R  ;
 :  (R3+#)-R1    >r  3  r>  1  (R+#)-R  ;
 :  (R4+#)-R1    >r  4  r>  1  (R+#)-R  ;
 :  (R5+#)-R1    >r  5  r>  1  (R+#)-R  ;
 :  (R6+#)-R1    >r  6  r>  1  (R+#)-R  ;
 :  (R7+#)-R1    >r  7  r>  1  (R+#)-R  ;
 :  (R0+#)-R2    >r  0  r>  2  (R+#)-R  ;
 :  (R1+#)-R2    >r  1  r>  2  (R+#)-R  ;
 :  (R2+#)-R2    >r  2  r>  2  (R+#)-R  ;
 :  (R3+#)-R2    >r  3  r>  2  (R+#)-R  ;
 :  (R4+#)-R2    >r  4  r>  2  (R+#)-R  ;
 :  (R5+#)-R2    >r  5  r>  2  (R+#)-R  ;
 :  (R6+#)-R2    >r  6  r>  2  (R+#)-R  ;
 :  (R7+#)-R2    >r  7  r>  2  (R+#)-R  ;
 :  (R0+#)-R3    >r  0  r>  3  (R+#)-R  ;
 :  (R1+#)-R3    >r  1  r>  3  (R+#)-R  ;
 :  (R2+#)-R3    >r  2  r>  3  (R+#)-R  ;
 :  (R3+#)-R3    >r  3  r>  3  (R+#)-R  ;
 :  (R4+#)-R3    >r  4  r>  3  (R+#)-R  ;
 :  (R5+#)-R3    >r  5  r>  3  (R+#)-R  ;
 :  (R6+#)-R3    >r  6  r>  3  (R+#)-R  ;
 :  (R7+#)-R3    >r  7  r>  3  (R+#)-R  ;
 :  (R0+#)-R4    >r  0  r>  4  (R+#)-R  ;
 :  (R1+#)-R4    >r  1  r>  4  (R+#)-R  ;
 :  (R2+#)-R4    >r  2  r>  4  (R+#)-R  ;
 :  (R3+#)-R4    >r  3  r>  4  (R+#)-R  ;
 :  (R4+#)-R4    >r  4  r>  4  (R+#)-R  ;
 :  (R5+#)-R4    >r  5  r>  4  (R+#)-R  ;
 :  (R6+#)-R4    >r  6  r>  4  (R+#)-R  ;
 :  (R7+#)-R4    >r  7  r>  4  (R+#)-R  ;
 :  (R0+#)-R5    >r  0  r>  5  (R+#)-R  ;
 :  (R1+#)-R5    >r  1  r>  5  (R+#)-R  ;
 :  (R2+#)-R5    >r  2  r>  5  (R+#)-R  ;
 :  (R3+#)-R5    >r  3  r>  5  (R+#)-R  ;
 :  (R4+#)-R5    >r  4  r>  5  (R+#)-R  ;
 :  (R5+#)-R5    >r  5  r>  5  (R+#)-R  ;
 :  (R6+#)-R5    >r  6  r>  5  (R+#)-R  ;
 :  (R7+#)-R5    >r  7  r>  5  (R+#)-R  ;
 :  (R0+#)-R6    >r  0  r>  6  (R+#)-R  ;
 :  (R1+#)-R6    >r  1  r>  6  (R+#)-R  ;
 :  (R2+#)-R6    >r  2  r>  6  (R+#)-R  ;
 :  (R3+#)-R6    >r  3  r>  6  (R+#)-R  ;
 :  (R4+#)-R6    >r  4  r>  6  (R+#)-R  ;
 :  (R5+#)-R6    >r  5  r>  6  (R+#)-R  ;
 :  (R6+#)-R6    >r  6  r>  6  (R+#)-R  ;
 :  (R7+#)-R6    >r  7  r>  6  (R+#)-R  ;
 :  (R0+#)-R7    >r  0  r>  7  (R+#)-R  ;
 :  (R1+#)-R7    >r  1  r>  7  (R+#)-R  ;
 :  (R2+#)-R7    >r  2  r>  7  (R+#)-R  ;
 :  (R3+#)-R7    >r  3  r>  7  (R+#)-R  ;
 :  (R4+#)-R7    >r  4  r>  7  (R+#)-R  ;
 :  (R5+#)-R7    >r  5  r>  7  (R+#)-R  ;
 :  (R6+#)-R7    >r  6  r>  7  (R+#)-R  ;
 :  (R7+#)-R7    >r  7  r>  7  (R+#)-R  ;
comment;

:   (R+#)=#/   >r    dup   R0=(R2+#)     r>   R0=#/   (R2+#)=R0  ;
:   (R+#)=#    >r    dup   R0=(R2+#)     r>   R0=#    (R2+#)=R0  ; 

:   (R+#)x#/   >r    dup   R0=(R2+#)     r>   R0x#/   (R2+#)=R0  ; 
:   (R+#)x#    >r    dup   R0=(R2+#)     r>   R0x#    (R2+#)=R0  ; 

:   (R+#)o#/   >r    dup   R0=(R2+#)     r>   R0o#/   (R2+#)=R0  ; 
:   (R+#)o#    >r    dup   R0=(R2+#)     r>   R0o#    (R2+#)=R0  ; 

:   (R+#)n#/   >r    dup   R0=(R2+#)     r>   R0n#/   (R2+#)=R0  ; 
:   (R+#)n#    >r    dup   R0=(R2+#)     r>   R0n#    (R2+#)=R0  ;

:   (R+#)+#/   >r    dup   R0=(R2+#)     r>   R0+#/   (R2+#)=R0  ; 
:   (R+#)+#    >r    dup   R0=(R2+#)     r>   R0+#    (R2+#)=R0  ; 

:   (R+#)-#/   >r    dup   R0=(R2+#)     r>   R0-#/   (R2+#)=R0  ;
:   (R+#)-#    >r    dup   R0=(R2+#)     r>   R0-#    (R2+#)=R0  ; 


:    RxR/    dup    dup>r    R/   RxR   r>   R/  ; 
:    RoR/    dup    dup>r    R/   RoR   r>   R/  ; 
\    RnR/    dup    dup>r    R/   RnR   r>   R/  ;
:    R+R/    dup    dup>r    R/   R+R   r>   R/  ; 
:    R-R/    dup    dup>r    R/   R-R   r>   R/  ; 


:   (R+#)xR/   >r    dup   R0=(R2+#)   0  r>   RxR/   (R2+#)=R0  ; 
:   (R+#)xR    >r    dup   R0=(R2+#)   0  r>   RxR    (R2+#)=R0  ; 

:   (R+#)oR/   >r    dup   R0=(R2+#)   0  r>   RoR/   (R2+#)=R0  ; 
:   (R+#)oR    >r    dup   R0=(R2+#)   0  r>   RoR    (R2+#)=R0  ; 

:   (R+#)nR/   >r    dup   R0=(R2+#)   0  r>   RnR/   (R2+#)=R0  ; 
:   (R+#)nR    >r    dup   R0=(R2+#)   0  r>   RnR    (R2+#)=R0  ; 

:   (R+#)+R/   >r    dup   R0=(R2+#)   0  r>   R+R/   (R2+#)=R0  ; 
:   (R+#)+R    >r    dup   R0=(R2+#)   0  r>   R+R    (R2+#)=R0  ; 

:   (R+#)-R/   >r    dup   R0=(R2+#)   0  r>   R-R/   (R2+#)=R0  ; 
:   (R+#)-R    >r    dup   R0=(R2+#)   0  r>   R-R    (R2+#)=R0  ; 

COMMENT:
:   (R0)=0  0 0  R=#  (R0)=R0   ;
:   (R0)=1  0 1  R=#  (R0)=R0   ;
:   (R1)=0  1 0  R=#  (R1)=R0   ;
:   (R1)=1  1 1  R=#  (R1)=R0   ;
:   (R2)=0  2 0  R=#  (R2)=R0   ;
:   (R2)=1  2 1  R=#  (R2)=R0   ;
:   (R3)=0  3 0  R=#  (R3)=R0   ;
:   (R3)=1  3 1  R=#  (R3)=R0   ;
:   (R4)=0  4 0  R=#  (R4)=R0   ;
:   (R4)=1  4 1  R=#  (R4)=R0   ;

:{  (R0)=0  0 0  R=#  (R0)=R0  };
:{  (R0)=1  0 1  R=#  (R0)=R0  };
:{  (R1)=0  1 0  R=#  (R1)=R0  };
:{  (R1)=1  1 1  R=#  (R1)=R0  };
:{  (R2)=0  2 0  R=#  (R2)=R0  };
:{  (R2)=1  2 1  R=#  (R2)=R0  };
:{  (R3)=0  3 0  R=#  (R3)=R0  };
:{  (R3)=1  3 1  R=#  (R3)=R0  };
:{  (R4)=0  4 0  R=#  (R4)=R0  };
:{  (R4)=1  4 1  R=#  (R4)=R0  };
COMMENT;



comment:
variable  initialize.value  12345678   initialize.value  !

  10  TABLE'  REG       \   : initilize.reg   initialize.value  @  10  0  do   dup  i  reg  !  loop  drop  ;

: initialize.???  ( value cfa.of.table.name items -- )  cells  0  do  2dup  i  +  !  cell  +loop  2drop  ;

\                 12345678  reg  10
: initilize.reg   12345678  0 reg  10   initialize.???  ;

: dump.table  ( cfa.of.table.name items -- )  cells  0  do  cr  ."   ( "  i  cell /  3 .r  ."  )"  i  over +  @  0b u.r  cell  +loop  drop  ;

\ 0 reg  10  dump.table
: reg!  ( n r -- )   reg  !  ;   \  123  4  reg!   or   123  4  reg  !

: extract.number  ( bit.n1 bit n2 -- )  ;

: extract.register.and.number  ( bit.n1.of.R  bit.n2.of.R  bit.n3.of.#  bit.n4.of.# -- R # )
  extract.number    -rot   extract.number  ;
  comment;



  :  input'           0  ;
  :  output'          1  ;
  :  open.drain'      2  ;
  :  quasi'           3  ;

  :  PA'   40004000    ;
  :  PB'   40004040    ;
  :  PC'   40004080    ;
  :  PD'   400040C0    ;
  :  PE'   40004100    ;
  :  PF'   40004140    ;
  :  PG'   40004180    ;
  :  PH'   400041C0    ;
  :  PI'   40004200    ;

  :  bit0'        1    ;
  :  bit1'        2    ;
  :  bit2'        4    ;
  :  bit3'        8    ;
  :  bit4'       10    ;
  :  bit5'       20    ;
  :  bit6'       40    ;
  :  bit7'       80    ;
  :  bit8'      100    ;
  :  bit9'      200    ;
  :  bit10'     400    ;
  :  bit11'     800    ;
  :  bit12'    1000    ;
  :  bit13'    2000    ;
  :  bit14'    4000    ;
  :  bit15'    8000    ;




: .lfa'+nfa'  ( nfa' -- )  dup>r  4  -  ."   ( lfa'= ) "  .xxxx   ."  org  ( nfa'= "  r@  .xxxx
  ."   pcfa'= "  r>  nfa'->cfa'  dup  .xxxx  ."   pcfa'_32@' = "   32@'  .xxxxXXXX  ."  )  t:  "  ;

: .id(pijForth)    ( lfa' -- )  4  +  dup  .lfa'+nfa'  count'  1f  and   type'  ;

variable  last.lfa'    A218 ( 2218 )  last.lfa'  !

: pijForth'  ( -- )   last.lfa'  @    ( next.lfa'=2218 )
  begin   cr    3FFF  AND  dup  .id(pijForth)  32@'  dup   0=
  until   drop  ;

: pijForth.total.word  ( -- n )  0  >r  last.lfa'  @    ( next.lfa'=2218 )
  begin   r>  1+  >r  3FFF  AND    32@'  dup  0=
  until   drop    r>  ;  \  pijForth.total.word  . 90

: pijForth^  ( -- )   1   pijForth.total.word  1-
  ?do    i   0   >r  last.lfa'  @    ( next.lfa'=2218 )
     begin   r>  1+  >r  3FFF  AND    32@'  over  r@  =
     until   r>drop  nip
             cr                    3FFF  AND    .id(pijForth)    -1
  +loop      cr  last.lfa'  @      3FFF  AND    .id(pijForth)  ;

: pijForth  ( -- )  cr  pijForth'  cr  cr   pijForth^  ;






























forward.link?   @   drop  -1   
#if    \ include  header7.f             :  compile-only'  ;

variable  lfa'.to.lfa'?

: header(LNC)    ( -- )
  >IN  @  >R                            HERE'.ALIGN*2  lfa*    ,
       here'  lfa*   @  <>  if          here'   former.lfa*    !   then    \  link forward
       forward.link? @
       if              here'  ( lnc' )  200         +
       else            lfa'.to.lfa'?  @
          if           last'  @   nfa'->lfa'
          else         last'  @
          then
       then    lfa*    !    \  lfa'  -->  lfa*
       here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+     dup  2  +   ALIGN*2  >r
                       nfa*  place         -1  nfa*  c+!    \ nfa*
  r>  here' cell+  +   cfa*  !  HERE'.ALIGN*2
  R>  >IN   !   ;







: header(LNC)    ( -- )
  >IN  @  >R                            HERE'.ALIGN*2  lfa*    ,
       here'  lfa*   @  <>  if          here'   former.lfa*    !   then    \  link forward
       forward.link? @
       if              here'  ( lnc' )  200         +
       else            lfa'.to.lfa'?  @
          if           former.lfa'
          else         former.lfa'  nfa'-lfa'  +
          then
       then    lfa*    !    \  lfa'  -->  lfa*
       here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+     dup  2  +   ALIGN*2  >r
                       nfa*  place         -1  nfa*  c+!    \ nfa*
  r>  here' cell+  +   cfa*  !  HERE'.ALIGN*2
  R>  >IN   !   ;



: header(LNC)    ( -- )
  >IN  @  >R                            HERE'.ALIGN*2  lfa*    ,
       forward.link? @
       if        here'  lfa*   @  <>  if          here'   former.lfa*    !   then    \  link forward
                 here'  ( lnc' )  200         +
       else            lfa'.to.lfa'?  @
          if           former.lfa'
          else         former.lfa'  nfa'-lfa'  +
          then
       then    lfa*    !    \  lfa'  -->  lfa*
       here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+     dup  2  +   ALIGN*2  >r
                       nfa*  place         -1  nfa*  c+!    \ nfa*
  r>  here' cell+  +   cfa*  !  HERE'.ALIGN*2
  R>  >IN   !   ;

: header(LNC)    ( -- )
  >IN  @  >R                            here'.align  lfa*    ,
       forward.link? @
       if        here'  lfa*   @  <>  if          here'   former.lfa*    !   then    \  link forward
                 here'  ( lnc' )  200         +
       else            lfa'.to.lfa'?  @
          if           former.lfa'
          else         former.lfa'  nfa'-lfa'  +
          then
       then    lfa*    !    \  lfa'  -->  lfa*
       here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+     dup  2  +   ALIGN*2  >r
                       nfa*  place         -1  nfa*  c+!    \ nfa*
  r>  here' cell+  +   cfa*  !  here'.align
  R>  >IN   !   ;


: header(LNC)'''''''''''''''    ( -- )
  >IN  @  >R                            here'.align  lfa*    ,
       forward.link? @
       if        here'  lfa*   @  <>  if          here'   former.lfa*    !   then    \  link forward
                 here'  ( lnc' )  200         +
       else            lfa'.to.lfa'?  @
          if           former.lfa'
          else         former.lfa'  nfa'-lfa'  +
          then
       then    lfa*    !    \  lfa'  -->  lfa*
       here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+     dup  2  +   ALIGN  >r
                       nfa*  place         -1  nfa*  c+!    \ nfa*
  r>  here' cell+  +   cfa*  !  here'.align
  R>  >IN   !   ;





forward.link? @
  #if
: header(LNC)    ( -- )     \ mecrispForth
  >IN  @  >R                       here'.align    lfa*    ,
  here'  lfa*   @  <>  if          here'   former.lfa*    !   then    \  link forward
\ here'  ( lnc' )  200         +
  here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+     dup>r      nfa*  place         -1  nfa*  c+!    \ nfa*
  r>  2  +  ALIGN*2       here'  cell+  +   cfa*  !  here'.align
  R>  >IN   !   ;

: header(LNC)>header'   ( -- )   \ mecrispForth
              lfa*  @   ( do.+08000000 )      32,'   here'  last'  !   ( current last' ) 4400  16,' ( immediate/compile-only... )
              nfa*  count ( from len )  tuck  here' ( len from len+1 to' )  a'>a  place  1+  allot'  here'.align  ;
  #else
: header(LNC)    ( -- )   \ eForth
  >IN  @  >R           here'.align  lfa*    ,    lfa'.to.lfa'?  @
  if           former.lfa'
  else         former.lfa'  nfa'-lfa'  +
  then         lfa*    !    \  lfa'  -->  lfa*
  here'  ( lfa' )  nfa'-lfa'   +  lfa*+8  !    \ (lfa') -->  lfa*+8   ????
  BL  WORD  COUNT  1+   dup>r          nfa*  place            -1  nfa*  c+!    \ nfa*
  r>  ( 2  + )  ALIGN   here'  cell+  +    cfa*  !      here'.align
  R>  >IN  !    ;

: header(LNC)>header'   ( -- )   \ eForth
              lfa*  @   ( do.+08000000 )      32,'   here'  last'  !
              nfa*  count ( from len )  tuck  here' ( len from len+1 to' )  a'>a  place  1+  allot'  here'.align  ;
  #then

: t:mecrispForth.stm32F051
              header(LNC)
              header(LNC)>header'           head.spacing   @  lfa+nfa+cfa.counter    +!   \   cfa'.of.docolon   @  32,'
  create      here'     ,
  does>       @   ,call.cfa'   ( call_# )   ;

: t:mecrispForth.stm32F051
              header(LNC)
              header(LNC)>header'           head.spacing   @  lfa+nfa+cfa.counter    +!   \   cfa'.of.docolon   @  32,'
  create      here'     ,      modify
  does>       @   ,call.cfa'   ( call_# )   ;


: t:          T:MECRISPFORTH.STM32F051   ;

#then













: treat.label ( -- )  lfa+nfa+cfa.array  ;



 

:  show.style  ( n -- )
   case   1  of   ."                  :"  endof
          2  of   ."               code"  endof
          3  of   ."              label"  endof
          4  of   ."           constant"  endof
          5  of   ."           variable"  endof
          6  of   ."           register"  endof
   endcase   ;

:  show.immediate/compile-only/smudge... ( n -- )  >r
   r@   81  and  81  =  if   ."  immediate "     then
   r@   82  and  82  =  if   ."  compile-only "  then
   r>   84  and  84  =  if   ."  smudge "        then  ;


: show.from~to  ( n -- )  lfa+nfa+cfa.array  +  head.spacing @ 1c - + ( e4 ) dup       @            32 ?y  .8#
                                                                                  4 -  @   ."  ~ "  3d ?y  .8#    0 ?y  ;

: show.lfa*  ( n -- )  >r  r@ lfa+nfa+cfa.array  +  8 +  @   nfa'-lfa'  -  0d u.r
                           r> lfa+nfa+cfa.array  +  dup      @        0d u.r  ."  *"      5d ?y  0a u.r ."  *  lfa"  ;


: show.lfa*  ( n -- )  >r  r@ lfa+nfa+cfa.array  +  8 +  @   dup
                           r@ lfa+nfa+cfa.array  +       @   u>   if  4  else  6  then  -  0d u.r
                           r> lfa+nfa+cfa.array  +  dup      @        0d u.r  ."  *"      5d ?y  0a u.r ."  *  lfa"  ;



: show.nfa*  ( n -- )  >r  r@ lfa+nfa+cfa.array  +  dup  8 + dup   @  0d u.r  ."  *"      46 ?y  0a u.r ."  *"
                       10  +   dup      dup  @  FFFFFFFF   =
                       if      drop
                       else    24 ?y  count  1f and  type
                       then    5d ?y  0a u.r ."     nfa"
                       r> lfa+nfa+cfa.array  +  head.spacing @ 11 -  +  c@   10 ?y  show.style  ;

: show.immediate/compile-only/smudge  ( n -- )   cr
   lfa+nfa+cfa.array  +  8  +   @     ( flag )   dup  -1  =  if  drop  exit  then
   remove.offset?  @
   if   \ drop  exit  \ ??????????
          2 -  dup  0d  u.r    ."  "     dup  c@'  .xx  ."  "  dup 1+  c@'  .xx  c@'  2a ?y   drop   exit
          >r  \ mecrispForth
          r@    1  and   1  =  if   ."  immediate "     then
          r@    2  and   2  =  if   ."  compile-only "  then
          r>    4  and   4  =  if   ."  smudge "        then
   else   1-   dup  0d  u.r    ."  "     dup  c@'  .xx                           c@'  2a ?y  >r
          r@   81  and  81  =  if   ."  immediate "     then
          r@   82  and  82  =  if   ."  compile-only "  then
          r>   84  and  84  =  if   ."  smudge "        then
   then   ;

: show.cfa*  ( n -- )  lfa+nfa+cfa.array  +  head.spacing @ 10 - + ( f0 ) dup  @  dup   0d u.r ."  **"  32@'  10 ?y  0a u.r  5d ?y  0a u.r ."  ** cfa"  ;

: .lfa+nfa+cfa(n)   ( n -- )   head.spacing  @  *  >r
  cr  r@  head.spacing  @  /   dup  dup 0= if \.3F***.NO.CR  else \.3F---.NO.CR  then  decimal  5  u.r  hex 5 u.r
  cr  r@  show.lfa*     forward.link?   @  if  r@  show.immediate/compile-only/smudge  then
  cr  r@  show.nfa*
  cr  r@  show.from~to
      r>  show.cfa*     ;











:  i>cfa*(lnc)   ( n -- cfa' )  lfa+nfa+cfa.array  +  head.spacing  @  10  - ( f0 )  +  ( cfa* )  ;

2variable  cfa'.to.next.cfa'.distance

:  get.size  ( cfa' -- next.cfa' distance )         0  7fffffff  cfa'.to.next.cfa'.distance  2!
   get.total.words(adjacent)  head.spacing  @  *   0
   ?do      i  i>cfa*(lnc)  @  over  - dup>r   cfa'.to.next.cfa'.distance  2@  nip  <  r@  0>  and
                                            r>      cfa'.to.next.cfa'.distance  2@  nip  <     and
      if    i  i>cfa*(lnc)  @  2dup  swap  -   cfa'.to.next.cfa'.distance  2!
      then  head.spacing     @
   +loop    drop  cfa'.to.next.cfa'.distance   2@   ;

:  next.cfa',size>lnc.array   ( -- )      get.total.words(adjacent)       head.spacing  @  *     0
    ?do    i  i>cfa*(lnc)  @  ( cfa' )    get.size  i  lfa+nfa+cfa.array  head.spacing  @  8  -  + +  2!
           head.spacing    @
    +loop  ;





: calculate.range.of.cfa'(CODE)      ( lfa* -- from' to' )  dup>r  lfa*->cfa'   r>  lfa*->next.lfa'/here'  1-   ;



: calculate.range.of.cfa'(:)         ( lfa* -- from' to' )  dup>r  lfa*->cfa'   4  +  r>  lfa*->next.lfa'        1-   ;
: calculate.range.of.cfa'(CODE)      ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(L:)        ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(VARIABLE)  ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(CONSTANT)  ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(USER)      ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;

: correcting.i.instruction.style  ( lfa* -- )  >r
  remove.offset?  @
  if       r@   calculate.range.of.cfa'(code)  r@  lfa*->cfa*  10 -  2!   \ mecrispForth  stc
  else     r@   lfa*->cfa'   32@'
           case    cfa'.of.doCOLON     @  of   1         r@  calculate.range.of.cfa'(:)     r@  lfa*->cfa*  10 -  2!  endof
                \  cfa'.of.code        @  of   2         r@  calculate.range.of.cfa'(code)  r@  lfa*->cfa*  10 -  2!  endof
                \  label.style         @  of   3   endof
                   cfa'.of.doCON       @  of   4   endof
                   cfa'.of.doCONSTANT  @  of   4   endof
                \  cfa'.of.variable    @  of   4   endof
                   cfa'.of.doUSER      @  of   5   endof
                \  cfa'.of.doREGISTER  @  of   6   endof
                                    \          2   swap   \ 0ff     \ code
                   drop                dup     2   swap  r@  calculate.range.of.cfa'(code)  r@  lfa*->cfa*  10 -  2!
           endcase        r@  lfa*->cfa*  1-  c!
  then     r>drop  ;

: correcting.last.instruction.style  ( -- )   lfa*  1c  -  @  here'  -  abs  200  >
  if     lfa*  1c  -  @  200  +
  else   here'    1-
  then   lfa*  20  -  !  ;

: correct.immediate/compile-only/smudge...   ( -- )
  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  bounds
  ?do     i   8  +  @  1-  ( coreForth only, mecrispForth ) c@'   i  lfa*->nfa*  1-  c!     head.spacing   @
  +loop   ;

: correcting.instruction.style  ( -- )      lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  bounds
  do       i   correcting.i.instruction.style     head.spacing   @
  +loop        correcting.last.instruction.style
  forward.link?   @   drop  0   if   correct.immediate/compile-only/smudge...   then  ;


    :  .lfa+nfa+cfa   ( -- )         cr    next.cfa',size>lnc.array   base   @   >r
        get.total.words(adjacent)  0
        ?do        i    .lfa+nfa+cfa(n)    key?  if  leave  then
        loop       r>   base   !  cr   ;

    :  .lnc*     correcting.instruction.style   .lfa+nfa+cfa   ;
    :  .lnc*'    cls     .lnc*   ;
    :   lnc***           .lnc*   ;
    :   lnc***'  cls     .lnc*   ;
























forward.link?   @
#if

: disassem.deep-sleep.instruction(uF)   drop  0  ;

: disassem.CONSTANT.instruction(uF)  ( cfa' -- f )    dup>r  32@'  cfa'.of.doCON  @ ( 4023827C ) =
  if   \ cr  r@        _(.12345678..12345678.......)
         cr  r@  4  +  _(.12345678..12345678.......)    r@  4  +  32@'  34  ?y  .8#  ."  <-- 32@' is "
                                                        r@  4  +  32@'  32@'    .8#  ."  <-- cfa'.of.@"
         cr  r@  8  +  _(.12345678..12345678.......)    r@  8  +  32@'  34  ?y  .8#
             r@  8  +  32@'  46  ?y  ." \  "  CFA'>.ID   drop
  else       r>drop     0     exit
  then       r>     32@'   7  0
  do     cr  dis   0e  ?y  '*'  emit   60 ?y
  loop   drop      -1   ;


variable (cfa')=cfa'+2?
: cheeck.(cfa')=cfa'+2? ( cfa' -- )  dup  32@'  4  -               =  if  (cfa')=cfa'+2?  on  else  (cfa')=cfa'+2?  off  then  ;

variable (cfa')=cfa'+4?
: cheeck.(cfa')=cfa'+4? ( cfa' -- )  dup  32@'  4  -  ffffff  and  =  if  (cfa')=cfa'+4?  on  else  (cfa')=cfa'+4?  off  then  ;
                                                  \ 08000000
variable   4023826C.or.(a')=a'+4?       \  4023826C.or.(a')=a'+4?  on
:  get.from~to  ( n -- to' from' )  lfa+nfa+cfa.array  +  head.spacing @ 1c - + ( e4 ) dup>r  @   r> 4  -  @  ;

: disassem.code.instruction(uF)    ( cfa' -- )
  dup  cheeck.(cfa')=cfa'+2?   \  ????
  dup  cheeck.(cfa')=cfa'+4?
  dup  disassem.CONSTANT.instruction(uF)     if  drop  exit  then
  dup  disassem.deep-sleep.instruction(uF)   if  drop  exit  then
  4023826C.or.(a')=a'+4?  off
\  dup  cfa'>n(lnc)  0=  abort" *** invalid cfa' ***"    head.spacing  @  +  (cfa')=cfa'+4?  @
\  if     n>lfa'(lnc)                  \ head
\  else   n>cfa'(lnc) \ 0= abort" **** invalid n>cfa' ******"   \ headless
\  then
\  dup     cfa'->lfa*   check.lfa*.is.last.one   drop
remove.offset?  @
if        cfa'>n(lnc)  drop  get.from~to  >r  begin  cr   dis      dup  r@  u>=  until  drop  r>drop   exit
else      cfa'>n(lnc)  drop  get.from~to  >r  begin  cr   dis      dup  r@  u>=  until  drop  r>drop   exit
then      ;

:  .8#.or.08000000   ( n -- n' )   .8#  ;
: (.12345678..12345678.......).or.08000000  ( a' -- )   dup  ."   (  "  .8#.or.08000000  2 spaces  32@'  .xxxxxxxx  0a spaces  ." )"  ;

: n>lfa'.or.here'(lnc)   ( lfa* -- )  dup  GET.TOTAL.INSTRUCTIONS(LNC)  8  lshift  ( *100 ) dup  100 +  between  if   drop  here'  else  n>lfa'(lnc)  then  ;

  variable   cfa'.of.????
  variable   cfa'.of.USER
  variable   cfa'.of.(S")

: decompile.colon.instruction(uF)  ( cfa' -- )
  dup  cfa'>n(lnc)  0=  abort" *** invalid cfa' ***"
  head.spacing  @   +   n>lfa'.or.here'(lnc)   >r  4  +
  begin  cr  dup   (.12345678..12345678.......).or.08000000   40 ?y   dup  32@'  dup>r   cfa'>.id(lnc)                            4  +
    \    r@  cfa'.of.[']      @  ( 402165B4 )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then
         r@  cfa'.of.doLIT*   @  ( 4000000C )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then
         r@  cfa'.of.LIT-XT   @  ( 4000000C )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then
         r@  cfa'.of.LIT      @  ( 4000000C )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then

         r@  cfa'.of.doCON    @  ( 4000000C )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then
         r@  cfa'.of.????     @  ( 4000000C )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then

         r@   cfa'.of.USER    @  ( 4000000C )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX              ."   \  "  cfa'>.id(lnc)  4  +  then


    \    r@  cfa'.of.str:     @  ( 3FFE98FC )    =  if   dup  32@'       4a  ?y  .xxxxXXXX                                        4  +  then
         r@  cfa'.of.branch   @  ( 402165D0 )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over +      ."   \  "  .xxxxXXXX      4  +  then
         r@  cfa'.of.?branch  @  ( 402165D0 )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over +      ."   \  "  .xxxxXXXX      4  +  then

         r@  cfa'.of.(S")     @  ( 402165D0 )    =  if   dup  count'  1+  dup>r  space  1-  type'   r>  align*4  +                           then

    \    r@  cfa'.of.branch0  @  ( 402165E0 )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over + 4 +  ."   \  "  .xxxxXXXX      4  +  then
    \    r@  cfa'.of.nex.     @  ( eForth's )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over + 4 +  ."   \  "  .xxxxXXXX      4  +  then

         r@  cfa'.of.doUSER   @  (          )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over + 4 +  ."   \  "  .xxxxXXXX      4  +  then
    \    r@  cfa'.of.branch*  @  ( 402165D0 )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over + 4 +  ."   \  "  .xxxxXXXX      4  +  then
         r>  cfa'.of.?branch* @  ( 402165E0 )    =  if   dup  32@'  dup  4a  ?y  .xxxxXXXX  over + 4 +  ."   \  "  .xxxxXXXX      4  +  then
         dup  r@  2dup  u>=  -rot   -  abs  600  >  or   over  4  +  here'  =  if   drop  0  then
  until  drop  r>drop   ;



: decompile.USER.instruction(uF)      ( cfa' -- )  dup>r
  cfa'>n(lnc)  0=  abort" *** invalid cfa' ***"    drop
  cr  r> 4  +  (.12345678..12345678.......)   ;

: decompile.VARIABLE.instruction(uF)  ( cfa' -- )  dup>r
  cfa'>n(lnc)  0=  abort" *** invalid cfa' ***"    drop
  cr  r> 4  +  (.12345678..12345678.......)   ;

\        1F18  dbg   DECOMPILE.COLON.INSTRUCTION(UF)
:  x50   1F18        DECOMPILE.COLON.INSTRUCTION(UF)  ;
:  x51  '' drop      DISASSEM.CODE.INSTRUCTION(UF)    ;






comment:
:  show.style  ( n -- )
   case   1  of   ."                  :"  endof
          2  of   ."               code"  endof
          3  of   ."              label"  endof
          4  of   ."           constant"  endof
          5  of   ."           variable"  endof
          6  of   ."           register"  endof
   endcase   ;

:  show.immediate/compile-only/smudge... ( n -- )  >r
   r@   81  and  81  =  if   ."  immediate "     then
   r@   82  and  82  =  if   ."  compile-only "  then
   r>   84  and  84  =  if   ."  smudge "        then  ;


: show.from~to  ( n -- )  lfa+nfa+cfa.array  +  head.spacing @ 1c - + ( e4 ) dup       @            32 ?y  .8#
                                                                                  4 -  @   ."  ~ "  3d ?y  .8#    0 ?y  ;

: show.lfa*  ( n -- )  >r  r@ lfa+nfa+cfa.array  +  8 +  @   remove.offset? @  if  6  else  5  then   -   0d u.r
                           r> lfa+nfa+cfa.array  +  dup      @        0d u.r  ."  *"      5d ?y  0a u.r ."  *  lfa"  ;

: show.nfa*  ( n -- )  >r  r@ lfa+nfa+cfa.array  +  dup  8 + dup   @  0d u.r  ."  *"      46 ?y  0a u.r ."  *"
                       10  +   dup      dup  @  FFFFFFFF   =
                       if      drop
                       else    24 ?y  count  1f and  type
                       then    5d ?y  0a u.r ."     nfa"
                       r> lfa+nfa+cfa.array  +  head.spacing @ 11 -  +  c@   10 ?y  show.style  ;

: show.immediate/compile-only/smudge  ( n -- )   cr
   lfa+nfa+cfa.array  +  8  +   @     ( flag )
   remove.offset?  @
   if   \ drop  exit  \ ??????????
          2 -  dup  0d  u.r    ."  "     dup  c@'  .xx  ."  "  dup 1+  c@'  .xx  c@'  2a ?y   drop   exit
          >r  \ mecrispForth
          r@    1  and   1  =  if   ."  immediate "     then
          r@    2  and   2  =  if   ."  compile-only "  then
          r>    4  and   4  =  if   ."  smudge "        then
   else   1-   dup  0d  u.r    ."  "     dup  c@'  .xx                           c@'  2a ?y  >r
          r@   81  and  81  =  if   ."  immediate "     then
          r@   82  and  82  =  if   ."  compile-only "  then
          r>   84  and  84  =  if   ."  smudge "        then
   then   ;

: show.cfa*  ( n -- )  lfa+nfa+cfa.array  +  head.spacing @ 10 - + ( f0 ) dup  @  dup   0d u.r ."  **"  32@'  10 ?y  0a u.r  5d ?y  0a u.r ."  ** cfa"  ;

: .lfa+nfa+cfa(n)   ( n -- )   head.spacing  @  *  >r
  cr  r@  head.spacing  @  /   dup  dup 0= if \.3F***.NO.CR  else \.3F---.NO.CR  then  decimal  5  u.r  hex 5 u.r
  cr  r@  show.lfa*    r@  show.immediate/compile-only/smudge
  cr  r@  show.nfa*
  cr  r@  show.from~to
      r>  show.cfa*    ;
comment;












variable  cfa'.of.doREGISTER

:  display.:/code/constant/var.rom/var.rom   ( cfa' -- )
   case     cfa'.of.docolon        @  ( 08000298 )  of   ."  :  "        endof
            cfa'.of.doCON          @  ( 080002b0 )  of   ." CONSTANT  "  endof
            cfa'.of.????           @  ( 080002b0 )  of   ." ????  "      endof
            cfa'.of.USER           @  ( 080002b0 )  of   ." USER  "      endof    \  ???????
            cfa'.of.doUSER         @  ( 080002b0 )  of   ." USER  "      endof
            cfa'.of.doREGISTER     @  ( 080002b0 )  of   ." REGISTER  "  endof
                                                         ." CODE  "
   endcase  ;

: .nfa'(uF)   ( nfa* -- )  dup>r  @  dup      dup  FFFFFFFF  =  over  0=  or   \ coreForth
  if     drop
  else   ."   \  "  dup  2 -  do.+08000000  .xxxxXXXX   dup  2 - 2 spaces  16@'  .xxxx   33 ?y  ."  \  immediate/compile-only/smudge.."   cr
         ."   \  "  dup       do.+08000000  .xxxxXXXX  ( 0a u.r ) space   drop  r@   8   +   dup   count  1f  and  1+  nip   bounds  do  space  i  c@  .xx  loop
  then              dup  FFFFFFFF   =   swap  0=      or
  if         23  ?y  ."  L:   "   r@  8  +  count  1f  and  type
  else   \.3F---
         cr  23  ?y  r@ 8 -  ( lfa* ) LFA*->CFA*  @  ( cfa' )   32@'   display.:/code/constant/var.rom/var.rom
     \    check.:.instruction  if   ." :   "  else  ." code  "  then
                                  r@  8  +  count  1f  and  type            ( r>drop )
  then   r>  8  -  a>#n  if  drop  ( show.#n )  then  ;

variable  no.cfa'+(cfa')?       no.cfa'+(cfa')?  on

: decompile.#n.word.in.lfa+nfa+cfa.array(uF)  ( n -- )   dup        get.total.words(adjacent)  u>
  if    drop  cr  ."   ********** number must be smaller than "     get.total.words(adjacent)  1+  u. ."  *********"  exit  then
  head.spacing   @   *  lfa+nfa+cfa.array  +
  >r     \.3F***     LAYER  OFF
  r@                                     .lfa'        cr
  r@  8  +                               .nfa'(uF)  \ no.cfa'+(cfa')?   @  if  r@  head.spacing   @  10  -  +  @  ( cfa' )  cr  _(.12345678..12345678.......)  then
  r@  head.spacing   @   10  -  +   dup  .cfa'
  @   ( cfa' )     dup   32@' \  dup
  case   cfa'.of.docolon       @   of  decompile.colon.instruction(uF)     endof
         cfa'.of.doCON         @   of  decompile.colon.instruction(uF)     endof
         cfa'.of.USER          @   of  decompile.USER.instruction(uF)      endof   \ ?????????
         cfa'.of.????          @   of  decompile.USER.instruction(uF)      endof   \ ?????????
         cfa'.of.doUSER        @   of  decompile.USER.instruction(uF)      endof
         cfa'.of.doREGISTER    @   of  decompile.VARIABLE.instruction(uF)  endof
         4 -                           disassem.code.instruction(uF)
  endcase   r>  lfa*->nfa'  1-  c@'  49 ?y  show.immediate/compile-only/smudge... ;

: decompile.colon.instruction(stc)   disassem.code.instruction(uF)   ;

: decompile.#n.word.in.lfa+nfa+cfa.array(uF).mecrispForth.stc  ( n -- )   dup        get.total.words(adjacent)  u>
  if    drop  cr  ."   ********** number must be smaller than "     get.total.words(adjacent)  1+  u. ."  *********"  exit  then
  head.spacing   @   *  lfa+nfa+cfa.array  +
  >r     \.3F***     LAYER  OFF
  r@                                     .lfa'        cr
  r@  8  +                               .nfa'(uF)  \ no.cfa'+(cfa')?   @  if  r@  head.spacing   @  10  -  +  @  ( cfa' )  cr  _(.12345678..12345678.......)  then
  r@  head.spacing   @   10  -  +    \   dup  .cfa'
  @   ( cfa' )     dup   16@' \  dup
  case  b500 ( cfa'.of.docolon       @ )  of  decompile.colon.instruction(stc)     endof
         cfa'.of.doCON         @   of  decompile.colon.instruction(stc)    endof
         cfa'.of.USER          @   of  decompile.USER.instruction(uF)      endof   \ ?????????
         cfa'.of.????          @   of  decompile.USER.instruction(uF)      endof   \ ?????????
         cfa'.of.doUSER        @   of  decompile.USER.instruction(uF)      endof
         cfa'.of.doREGISTER    @   of  decompile.VARIABLE.instruction(uF)  endof
        ( 4 - ) ( drop )  swap         disassem.code.instruction(uF)
  endcase   r>  lfa*->nfa'  1-  c@'  49 ?y  show.immediate/compile-only/smudge... ;

: decompile.#n.word.in.lfa+nfa+cfa.array(uF).mecrispForth.stc  ( n -- )   dup        get.total.words(adjacent)  u>
  if    drop  cr  ."   ********** number must be smaller than "     get.total.words(adjacent)  1+  u. ."  *********"  exit  then
  head.spacing   @   *  lfa+nfa+cfa.array  +
  >r     \.3F***     LAYER  OFF
  r@                                     .lfa'        cr
  r@  8  +                               .nfa'(uF)  \ no.cfa'+(cfa')?   @  if  r@  head.spacing   @  10  -  +  @  ( cfa' )  cr  _(.12345678..12345678.......)  then
  r@  head.spacing   @   10  -  +    \   dup  .cfa'
  @   ( cfa' )    disassem.code.instruction(uF)
  r>  lfa*->nfa'  1-  c@'  49 ?y  show.immediate/compile-only/smudge... ;

: decompile.#n.word.in.lfa+nfa+cfa.array(uF)   remove.offset?  @
  if     decompile.#n.word.in.lfa+nfa+cfa.array(uF).mecrispForth.stc
  else   decompile.#n.word.in.lfa+nfa+cfa.array(uF)
  then   ;

:  cfa>n(lnc)                      ( cfa -- n -1 / 0 )   cfa>cfa'  cfa'>n(lnc)  ;

:  cfa>n(lnc)stm32f030.coreForth   ( cfa -- n -1 / 0 )   cfa>cfa'  ( 4 - )  cfa'>n(lnc) ;

: words'(LNC)coreForth  ( -- )  get.total.words(adjacent)  0  ?do  i  decompile.#n.word.in.lfa+nfa+cfa.array(uF)  loop  ;
: LNC                   ( -- )  words'(LNC)coreForth  ;

defer  _.lnc

: words'  ( -- )   _.lnc  lnc  ;

:  see(uF)    BL  WORD  ( addr )    dup c@ len !     PARMFIND  ( addr -- addr FALSE | cfa -1 | cfa 1 )
   if         dup   cfa>n(lnc)stm32f030.coreForth
      if      nip   100  /  decompile.#n.word.in.lfa+nfa+cfa.array(uF)
      else    (see)
      then
   else       (NUMBER)   drop   dup
      dup     WITHIN.RAM.ROM.RANGE?
      if      cfa'>n(lnc)    \ target cpu's instruction
      else    cfa>n(lnc)     \ win32forth's instruction
      then
      if      nip   100  /  decompile.#n.word.in.lfa+nfa+cfa.array(uF)
      else    dup   WITHIN.RAM.ROM.RANGE?   abort" **** not valid cfa' or cfa ****"  (see)
      then
   then       ;

:  clear.this.line ( -- )   0  ?y  70  0  do  space  loop  ;

variable  variable(1)/cfa'.of.xxx?(2)/no(0)      2  variable(1)/cfa'.of.xxx?(2)/no(0)  !

                 variable(1)/cfa'.of.xxx?(2)/no(0)  @  1 =
   #if        :  t:+   t:  clear.this.line  3 ?y ." variable  cfa'.of."  nfa* head.spacing @ - count type ;
   #else         variable(1)/cfa'.of.xxx?(2)/no(0)  @  2 =
      #if     :  t:+   t:  clear.this.line lfa*  head.spacing @ -  @ 3 ?y .8#  ."   cfa'.of."   nfa* head.spacing @ - count type  30 ?y ."   !. \ " ;
      #else   :  t:+   t:  ;
      #then
   #then

                 variable(1)/cfa'.of.xxx?(2)/no(0)  @  dup  1 =   swap  2  =  or
   #if        :  t:+   t:  clear.this.line   2 ?y      ." variable  cfa'.of."  nfa* head.spacing @ - count type
                 lfa*  head.spacing @ -  @  3b ?y .8#  ."   cfa'.of."          nfa* head.spacing @ - count type  70 ?y ." ! \ " ;
   #else      :  t:+   t:  ;
   #then

                 variable(1)/cfa'.of.xxx?(2)/no(0)  @  dup  1 =   swap  2  =  or
   #if        :  t:+   t:  clear.this.line        2 ?y      ." variable  cfa'.of."  nfa* head.spacing @ - count type
                 lfa*  10  -  @   fffffffe  and  3b ?y .8#  ."   cfa'.of."          nfa* head.spacing @ - count type  70 ?y ." ! \ " ;
   #else      :  t:+   t:  ;
   #then

variable  Vn
                 variable(1)/cfa'.of.xxx?(2)/no(0)  @  dup  1 =   swap  2  =  or
   #if        :  t:+   t:  clear.this.line  1 Vn +! 0 ?y    ."   ( " Vn @ 3 u.r(decimal) ."  ) variable  cfa'.of."  nfa* head.spacing @ - count type
                 lfa*  10  -  @   fffffffe  and  40 ?y .8#  ."   cfa'.of."          nfa* head.spacing @ - count type  7a ?y ." !" ;
   #else      :  t:+   t:  ;
   #then

:  i>cfa*(lnc)   ( n -- cfa' )  lfa+nfa+cfa.array  +  head.spacing  @  10  - ( f0 )  +  ( cfa* )  ;

2variable  cfa'.to.next.cfa'.distance

:  get.size  ( cfa' -- next.cfa' distance )         0  7fffffff  cfa'.to.next.cfa'.distance  2!
   get.total.words(adjacent)  head.spacing  @  *   0
   ?do      i  i>cfa*(lnc)  @  over  - dup>r   cfa'.to.next.cfa'.distance  2@  nip  <  r@  0>  and
                                          r>   cfa'.to.next.cfa'.distance  2@  nip  <          and
      if    i  i>cfa*(lnc)  @  2dup  swap  -   cfa'.to.next.cfa'.distance  2!
      then  head.spacing     @
   +loop    drop  cfa'.to.next.cfa'.distance   2@   ;

:  next.cfa',size>lnc.array   ( -- )      get.total.words(adjacent)       head.spacing  @  *     0
    ?do    i  i>cfa*(lnc)  @  ( cfa' )    get.size  i  lfa+nfa+cfa.array  head.spacing  @  8  -  + +  2!
           head.spacing    @
    +loop  ;

: calculate.range.of.cfa'(:)         ( lfa* -- from' to' )  dup>r  lfa*->cfa'   4  +  r>  lfa*->next.lfa'        1-   ;
: calculate.range.of.cfa'(CODE)      ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(L:)        ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(VARIABLE)  ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(CONSTANT)  ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;
: calculate.range.of.cfa'(USER)      ( lfa* -- from' to' )  dup>r  lfa*->cfa'  remove.offset?  @  if  else  32@' then  r>  lfa*->next.lfa'/here'  1-   ;

: correcting.i.instruction.style  ( lfa* -- )  >r
  remove.offset?  @
  if       r@   calculate.range.of.cfa'(code)  r@  lfa*->cfa*  10 -  2!   \ mecrispForth  stc
  else     r@   lfa*->cfa'   32@'
           case    cfa'.of.doCOLON     @  of   1         r@  calculate.range.of.cfa'(:)     r@  lfa*->cfa*  10 -  2!  endof
                \  cfa'.of.code        @  of   2         r@  calculate.range.of.cfa'(code)  r@  lfa*->cfa*  10 -  2!  endof
                \  label.style         @  of   3   endof
                   cfa'.of.doCON       @  of   4   endof
                   cfa'.of.doCONSTANT  @  of   4   endof
                \  cfa'.of.variable    @  of   4   endof
                   cfa'.of.doUSER      @  of   5   endof
                \  cfa'.of.doREGISTER  @  of   6   endof
                                    \          2   swap   \ 0ff     \ code
                   drop                dup     2   swap  r@  calculate.range.of.cfa'(code)  r@  lfa*->cfa*  10 -  2!
           endcase        r@  lfa*->cfa*  1-  c!
  then     r>drop  ;

: correcting.last.instruction.style  ( -- )   lfa*  1c  -  @  here'  -  abs  200  >
  if     lfa*  1c  -  @  200  +
  else   here'    1-
  then   lfa*  20  -  !  ;

: correct.immediate/compile-only/smudge...   ( -- )  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  bounds
  ?do     i   8  +  @  1-  ( coreForth only, mecrispForth ) c@'   i  lfa*->nfa*  1-  c!     head.spacing   @
  +loop   ;

: correct.ith.immediate/compile-only/smudge...   ( i -- ) >r
  r@    8  +  @  dup  -1  =
  if    drop  r>drop
  else  1-  ( coreForth only, mecrispForth )  c@'   r>  lfa*->nfa*  1-  c!
  then  ;

: correct.immediate/compile-only/smudge...   ( -- )  lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  bounds
  ?do     i   correct.ith.immediate/compile-only/smudge...       head.spacing  @
  +loop   ;

: correcting.instruction.style  ( -- )      lfa+nfa+cfa.array  lfa+nfa+cfa.counter  @  bounds
  do       i   correcting.i.instruction.style     head.spacing   @
  +loop        correcting.last.instruction.style  correct.immediate/compile-only/smudge...  ;

    :  .lfa+nfa+cfa   ( -- )         cr    next.cfa',size>lnc.array   base   @   >r
        get.total.words(adjacent)  0
        ?do        i    .lfa+nfa+cfa(n)    key?  if  leave  then
        loop       r>   base   !  cr   ;

    :  .lnc*     correcting.instruction.style   .lfa+nfa+cfa   ;
    :  .lnc*'    cls     .lnc*   ;
    :   lnc***           .lnc*   ;
    :   lnc***'  cls     .lnc*   ;

:  change.name  ( char -- )    last   @   nfa-count  drop   c!  ;   \  : jjjjjj ;   '('   change.name

:  words.mecrispForth.0   ( lfa' -- )   0  rom.start  !   10000  rom.end  !    \ stm32f030 cortex m0 mecrispForth
   begin  cr    dup  6  +  count'  type'  32@'   dup  ffffffff  =
   until  drop  abort  ;

:  www0   ( -- )  cls  remove.offset?  on   first.lfa'  @   words.mecrispForth.0  ;

:  words.mecrispForth.1   ( lfa' -- )   0  rom.start  !   10000  rom.end  !    \ stm32f030 cortex m0 mecrispForth
   begin  cr     dup  6  +  count'  type' 32@'   dup  ffffffff  =
   until  drop   abort  ;

:  www1   ( -- )  cls  remove.offset?  on   first.lfa'  @   words.mecrispForth.1  ;

:  words.mecrispForth.2  ( lfa' -- )   0  rom.start  !   10000  rom.end  !    \ stm32f030 cortex m0 mecrispForth
   0  >r
   begin  cr  r> 1+ dup>r   9 u.r  2 spaces    dup  6  +  count'  type' 32@'    dup  ffffffff  =
   until  drop   r>drop  abort  ;

:  www2   ( -- )  cls  remove.offset?  on   first.lfa'  @  words.mecrispForth.2  ;

:  words.mecrispForth.3  ( lfa' -- )   0  rom.start  !   10000  rom.end  !    \ stm32f030 cortex m0 mecrispForth
   cr   dup  0d ?y  8 u.r   ."   first.lfa'  !. "  
   0  >r
   begin  cr  ."    ( "  r> 1+ dup>r  4 u.r(decimal)  ."  ) "  dup  9 u.r   ."   org  mF: "
          dup  6  +  count'  type'   32@'    dup  ffffffff  =
   until  drop   r>drop  abort  ;

:  www3   ( -- )  cls  remove.offset?  on   first.lfa'  @  words.mecrispForth.3  ;
:  www    ( -- )  cls  remove.offset?  on   first.lfa'  @  words.mecrispForth.3  ;

:  words.mecrispForth.4  ( lfa' -- )   0  rom.start  !   10000  rom.end  !    \ stm32f030 cortex m0 mecrispForth
   0  >r
   begin  cr  ."    ( "  r> 1+ dup>r  4 u.r(decimal)  ."  ) "  dup  9 u.r   ."   org  t:+  "
          dup  6  +  count'  type'    32@'  dup  ffffffff  =
   until  drop   r>drop  abort  ;

:  www4   ( -- )  cls  remove.offset?  on   first.lfa'  @  words.mecrispForth.4  ;
#else
:  words.ht1656.0   ( lfa' -- )   0  rom.start  !   10000  rom.end  !     \  42dc  first.lfa'  !.
   begin  cr    dup>r   4  +  count'  type'  r@  32@'  4  -   r>  32@'  0  =
   until  drop  abort   ;

:  www0   ( -- )  cls  remove.offset?  on   first.lfa'  @   words.ht1656.0  ;

:  words.ht1656.1   ( lfa' -- )   0  rom.start  !   10000  rom.end  !
   begin  cr     dup>r  4  +  count'  type'  r@  32@'  4  -   r>  32@'  0  =
   until  drop   abort  ;

:  www1   ( -- )  cls  remove.offset?  on   first.lfa'  @   words.ht1656.1  ;

:  words.mecrispForth.2  ( lfa' -- )   0  rom.start  !   10000  rom.end  !    \ stm32f030 cortex m0 mecrispForth
   0  >r
   begin  cr  r> 1+ dup>r   9 u.r  2 spaces   dup>r  4  +  count'  type'  r@  32@'  4  -   r>  32@'  0  =
   until  drop   r>drop  abort  ;

:  www2   ( -- )  cls  remove.offset?  on   first.lfa'  @  words.mecrispForth.2  ;

:  words.ht1656.3  ( lfa' -- )   0  rom.start  !   10000  rom.end  !
   0  >r
   begin  cr  ."    ( "  r> 1+ dup>r  4 u.r(decimal)  ."  ) "  dup  9 u.r   ."   org  t:  "
                 dup>r   4  +  count'  type'   r@  32@'  4  -   r>  32@'  0  =
   until  drop   r>drop  abort  ;

:  www3   ( -- )  cls  remove.offset?  on   first.lfa'  @  words.ht1656.3  ;
:  www    ( -- )  cls  remove.offset?  on   first.lfa'  @  words.ht1656.3  ;

:  words.ht1656.4  ( lfa' -- )   0  rom.start  !   10000  rom.end  !
   0  >r
   begin  cr  ."    ( "  r> 1+ dup>r  4 u.r(decimal)  ."  ) "  dup  9 u.r   ."   org  t:+  "
                 dup>r   4  +  count'  type'  r@  32@'  4  -   r>  32@'  0  =
   until  drop   r>drop  abort  ;

:  www4   ( -- )  cls  remove.offset?  on   first.lfa'  @  words.ht1656.4  ;
#then

\    modify  ( -- )        7f    last  @  nfa-count  drop  c!    7f nfa* head.spacing @ - 1+ c!  ;
\ :  modify  ( -- )  '' ( 7f )  last  @  nfa-count  drop  c!  ;

\ :  if    ( -- a' )  T:0  {drop}  if'<>  ;
\ :  then  ( a' -- )  here'  >r    dup  org   here'  r@  -  z=1?   r>  org  ;



1 C.TYPE? !  1 DISASSEM.SPECIAL? !  1 VIRTUE.FORTH? !  1 H.MODE !
VIRTUE.FORTH?  OFF

:  id  ( from len -- )   cls   2dup  2>r
   bounds  cr  ."   \ "  over  u.  dup  u.  ."  hex>image32 "  hex>image32   cr  ."   \s"
   2r>     cr  ."   \ "  over  u.  dup  u.  ."  dump' "        dump'  ;
\ ***********************************************************************
zeptoForth407?  @
#if
 variable  #n       \  7048  last' !

:  get.total.word(zeptoForth)  ( -- n )  0  >r  ( 7048  last' ! )  last'  @   4  -
   begin    dup   4  -   32@'  0<> 
   while    32@'  4  +   r>    1+      >r
   repeat   drop   r>  ;

:  n>nfa'(zeptoForth)  ( n -- nfa' -1 / 0 )    get.total.word(zeptoForth)   swap  -
   0  >r  ( 7048  last' ! )  last'  @   4  -   #n  off
   begin    dup  ( lfa' ) 4  -   32@'  0<>
   while    #n  @   2  pick  =   if   nip  4  +  -1  r>drop  exit  then
            32@'  4  +  ( next.lfa' )   r>    1+   >r   1  #n  +!
   repeat   drop   r>  ;

:  nfa'>cfa'(zeptoForth)  ( nfa' -- cfa' )  count'  1f  and  +  align*2  ;

:  n>cfa'(zeptoForth)  ( n -- cfa' -1 / 0 )  n>nfa'(zeptoForth)  if  nfa'>cfa'(zeptoForth)  -1  else  0  then  ;

:  cfa'>nfa'(zeptoForth)  ( cfa' -- nfa' )   get.total.word(zeptoForth) 1+  1
   do     i   n>nfa'(zeptoForth)  drop  dup  nfa'>cfa'(zeptoForth)  2 pick  =  if  leave  else  drop  then
   loop   ;

:  nfa'>n(zeptoForth)   ( nfa' -- n -1 / 0 )  \ get.total.word(zeptoForth)  \ swap  -
   0  >r  ( 7048  last' ! )  last'  @   4  -  ( lfa' )     #n  off
   begin    dup  ( lfa' ) 4  -   32@'  0<>
   while    dup  ( lfa' ) 4  + ( nfa' )   2  pick  =   if  drop  get.total.word(zeptoForth)  r>  -  -1  exit  then
            32@'  4  +  ( next.lfa' )   r>    1+   >r   1  #n  +!
   repeat   drop   r>drop  0  ;

:  cfa'>n(zeptoForth)  ( cfa' -- n -1 / 0 )  cfa'>nfa'(zeptoForth)   nfa'>n(zeptoForth)  ;

variable  org.t:?

:  org.t:(n)   ( n -- )   get.total.word(zeptoForth)   swap  -
   last'  @   4  -   ( lfa' )  #n off
   begin   ( \.3f*** )           dup   4  -   ( lfa'-4 )  32@'  0<>
   while     1 pick ( over )  #n  @  =
      if     cr   ."   \ "  get.total.word(zeptoForth)  #n  @  -   dup  6 u.r    0a u.r(decimal)
             cr   ."   ( lfa'-4  "   dup   4  -   dup   .xxxxxxxx   ."    "   32@'  .xxxxxxxx   ."   )"
             cr   ."   ( lfa'    "   dup          dup   .xxxxxxxx   ."    "   32@'  .xxxxxxxx   ."   )"
             cr   ."   \ nfa;    "   dup   4  +   dup   .xxxxxxxx
             dup  count' 1f and  3 spaces  dup .xx   bounds do space i c@' .xx loop
             cr   org.t:?  @  if  13 ?y  dup 8 -  .xxxxxxxx  ."   org "  then  23 ?y  ." t: "  ( nfa'   )  count'  1f  and   type'  \ nfa'
             cr   ."   ( cfa'    "   dup   4  +   ( nfa' )  count' 1f  and   +   align*2   .xxxxxxxx  ."   )"
      then   32@' ( lfa' )    4  +     1  #n  +!
   repeat    2drop   ;
                     
:  org.t:  ( -- ) org.t:? on  get.total.word(zeptoForth)  1+  0  do  \.3f***  i  org.t:(n)  loop  ;

:  word(n)  ( n -- )  dup>r  n>nfa'(zeptoForth)  0=  if  r>drop  drop  exit  then  count' 1f and  +  align*2
   r@  org.t:(n)
   r>  1+  n>nfa'(zeptoForth)  drop  8  -  >r
   begin   cr  dis       dup   r@   >=
   until   r>drop  drop  ;

:  word(n)  ( n -- )  dup>r   n>nfa'(zeptoForth)   0=  if  r>drop  drop  exit  then  count' 1f and  +  align*2
   r@  org.t:(n)      get.total.word(zeptoForth)   r@  >
   if      r>  1+  n>nfa'(zeptoForth)  drop  8  -  >r
   else    r>drop  here'  >r
   then
   begin   cr  dis       dup   r@   >=
   until   r>drop  drop  ;

:  see(zeptoForth)  ( -- )  ' dup  cfa>cfa'  cfa'>n(zeptoForth)  if  nip  word(n)  2drop  else  drop  (see)  then  ;

:  .id'(cfa'.zeptoForth)  ( a' -- )   get.total.word(zeptoForth)  0
   do     i  n>nfa'(zeptoForth)
          if   dup  nfa'>cfa'(zeptoForth)  2  pick  =
               if     34 ?y  count'  1f  and  type'  60 ?y  ." \ "  9 u.r  leave
               else   drop
               then
          then
   loop   ;

:  dis.RCALL_#24    ( a' -- a' / a'+4 )   `5CS10#2CJCJ11#   F000D000  <>  if  0  exit  then
   (4   24REL,4   DISASSEM.NUMBER.STACK>  .id'(cfa'.zeptoForth)  ;

'  dis.RCALL_#24  is  _dis.RCALL_#24

:  words'(zeptoForth)'   ( --)    ( cls )   get.total.word(zeptoForth)  1+  1      org.t:?  off
   do    \.3f***    i   word(n)   key?  if  leave  then
   loop  cr  ;

:  words'(zeptoForth)746 ( -- )
   cls  200000  224  dump'  2001b4  10  dis.n  drop  2001d8 3 dis.n     2001e0 48  DUMP'4.BYTE
   words'(zeptoForth)'  ;

:  words'(zeptoForth)    ( -- )
   cls       0  208  dump'     194  0f  dis.n  drop     1b8 3 dis.n      1c2  8 dis.n     1e0 28  DUMP'4.BYTE
   words'(zeptoForth)'  ;

:  place.nfa'  ( -- len )  >in @   bl  word  count  dup>r  here' a'>a  place  >in  !  r>  1+  ;

:  t:(zeptoForth)   ( -- )
   here'.align*4       ( 4  + )  1  32,'    \ lfa'-4
   last'   @  8 -  32,'  here'  last'  !    \ lfa'
   place.nfa'                               \ nfa'
   here'  +   align*2  org  ( cp ! )        \ cfa'
   create  here'  ,
   does>   @  ,CALL.CFA'  ;

  ( lfa'-4  002072FC   00000001  )
  ( lfa'    00207300   002072C0  )
  \ nfa;    00207304   03 74 72 79
\                                  t: try
  ( cfa'    00207308  )
#then
\ -----------------------------------------------------------------------------------------------
\ |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
\ |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
\ |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||


: :.  :  ;      : .(.    29 PARSE TYPE ; IMMEDIATE

: ;.             ( -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Methods must END in ;M !"
                ?CSP REVEAL
                PARMS
                IF      COMPILE UNNESTP
                ELSE    COMPILE UNNEST
                THEN    [COMPILE] [ 0 TO PARMS DO-;CHAIN ; IMMEDIATE


:  */.   */  ;
\










\   include  fence55e.f


PREFIX? ON
\ ********************************************************
\ *  REDIRECTION OF WIN32FOR KERNEL INSTRUCTIONS.        *
\ *  therefore THE NAME CAN BE USED IN THE TARGET SYSTEM.*
\ ********************************************************
: DON'T.USE   -1 ABORT"  ****  DON'T.USE, win32forth instruction, hasn't defined in target system yet ****"  ;


CODE I.         ( -- n1 )       \ push n1, the value of the current loop index
                push    ebx
                mov     ebx, 0 CELLS  [ebp]
                add     ebx, 1 CELLS  [ebp]
                next    c;

CODE J.         ( -- n1 )       \ push n1, the value of the outer loop index
                push    ebx
                mov     ebx, 3 CELLS  [ebp]
                add     ebx, 4 CELLS  [ebp]
                next    c;

CODE K.         ( -- n1 )       \ push n1, value of the secong outer loop index
                push    ebx
                mov     ebx, 6 CELLS  [ebp]
                add     ebx, 7 CELLS  [ebp]
                next    c;

: I        DON'T.USE  ;  immediate
: J        DON'T.USE  ;  immediate
: K        DON'T.USE  ;  immediate




CODE LEAVE.    ( -- )          \ exit the current DO LOOP immediately     \ ncode ????
                mov     esi, 2 CELLS [ebp]
                add     ebp, # 3 CELLS
                next    c;

CODE ?LEAVE.   ( f1 -- )       \ exit the current DO LOOP if f1=TRUE      \ ncode ????
                test    ebx, ebx
                pop     ebx
                je      @@1
                mov     esi, 2 CELLS [ebp]
                add     ebp, # 3 CELLS
@@1:            next    c;


: LEAVE    DON'T.USE  ;   immediate   \ ??????







: abort.     abort    ;    : abort     DON'T.USE  ;  immediate

: DROP.      DROP     ;    : DROP      DON'T.USE  ;  immediate
: DUP.       DUP      ;    : DUP       DON'T.USE  ;  immediate
: OVER.      OVER     ;    : OVER      DON'T.USE  ;  immediate
: TUCK.      TUCK     ;    : TUCK      DON'T.USE  ;  immediate
: ROT.       ROT      ;    : ROT       DON'T.USE  ;  immediate
: -ROT.      -ROT     ;    : -ROT      DON'T.USE  ;  immediate
: SWAP.      SWAP     ;    : SWAP      DON'T.USE  ;  immediate
: NIP.       NIP      ;    : NIP       DON'T.USE  ;  immediate
: PICK.      PICK     ;    : PICK      DON'T.USE  ;  immediate

: >R.        >R       ;    : >R        DON'T.USE  ;  immediate
: R@.        R@       ;    : R@        DON'T.USE  ;  immediate
: R>.        R>       ;    : R>        DON'T.USE  ;  immediate

: DUP>R.     DUP>R    ;    : DUP>R     DON'T.USE  ;  immediate
: R>DROP.    R>DROP   ;    : R>DROP    DON'T.USE  ;  immediate

: 2DROP.     2DROP    ;    : 2DROP     DON'T.USE  ;  immediate
: 2DUP.      2DUP     ;    : 2DUP      DON'T.USE  ;  immediate
: 2OVER.     2OVER    ;    : 2OVER     DON'T.USE  ;  immediate
: 2ROT.      2ROT     ;    : 2ROT      DON'T.USE  ;  immediate
: 2SWAP.     2SWAP    ;    : 2SWAP     DON'T.USE  ;  immediate


: AND.       AND      ;    : AND       DON'T.USE  ;  immediate
: OR.        OR       ;    : OR        DON'T.USE  ;  immediate
: XOR.       XOR      ;    : XOR       DON'T.USE  ;  immediate
: NOT.       NOT      ;    : NOT       DON'T.USE  ;  immediate
: INVERT.    INVERT   ;    : INVERT    DON'T.USE  ;  immediate

: +.         +        ;    : +         DON'T.USE  ;  immediate
: -.         -        ;    : -         DON'T.USE  ;  immediate
: *.         *        ;    : *         DON'T.USE  ;  immediate
: /.         /        ;    : /         DON'T.USE  ;  immediate
: M*.        M*       ;    : M*        DON'T.USE  ;  immediate
: UM*.       UM*      ;    : UM*       DON'T.USE  ;  immediate

: D+.        D+       ;    : D+        DON'T.USE  ;  immediate
: D-.        D-       ;    : D-        DON'T.USE  ;  immediate
: D=.        D=       ;    : D=        DON'T.USE  ;  immediate
: D<>.       D<>      ;    : D<>       DON'T.USE  ;  immediate
: D<.        D<       ;    : D<        DON'T.USE  ;  immediate
: D>.        D>       ;    : D>        DON'T.USE  ;  immediate
: DNEGATE.   DNEGATE  ;    : DNEGATE   DON'T.USE  ;  immediate
: D0=.       D0=      ;    : D0=       DON'T.USE  ;  immediate
: NEGATE.    NEGATE   ;    : NEGATE    DON'T.USE  ;  immediate
: ABS.       ABS      ;    : ABS       DON'T.USE  ;  immediate


: =.         =        ;    : =         DON'T.USE  ;  immediate
: <>.        <>       ;    : <>        DON'T.USE  ;  immediate
:  >.         >       ;    :  >        DON'T.USE  ;  immediate
:  <.         <       ;    :  <        DON'T.USE  ;  immediate
: >=.        >=       ;    : >=        DON'T.USE  ;  immediate
: <=.        <=       ;    : <=        DON'T.USE  ;  immediate
: U>.        U>       ;    : U>        DON'T.USE  ;  immediate
: U<.        U<       ;    : U<        DON'T.USE  ;  immediate
\ U>=.       U>=      ;    : U>=       DON'T.USE  ;  immediate
\ U<=.       U<=      ;    : U<=       DON'T.USE  ;  immediate



: 0=.        0=       ;    : 0=        DON'T.USE  ;  immediate
: 0<.        0<       ;    : 0<        DON'T.USE  ;  immediate
: 0>.        0>       ;    : 0>        DON'T.USE  ;  immediate
: 0<>.       0<>      ;    : 0<>       DON'T.USE  ;  immediate


: @.         @        ;    : @         DON'T.USE  ;  immediate
: !.         !        ;    : !         DON'T.USE  ;  immediate
: C@.        C@       ;    : C@        DON'T.USE  ;  immediate
: C!.        C!       ;    : C!        DON'T.USE  ;  immediate

: 2@.        2@       ;    : 2@        DON'T.USE  ;  immediate
: 2!.        2!       ;    : 2!        DON'T.USE  ;  immediate


: SPACE.     SPACE    ;    : SPACE     DON'T.USE  ;  immediate
: CR.        CR       ;    : CR        DON'T.USE  ;  immediate
: KEY.       KEY      ;    : KEY       DON'T.USE  ;  immediate
: KEY?.      KEY?     ;    : KEY?      DON'T.USE  ;  immediate
: EMIT.      EMIT     ;    : EMIT      DON'T.USE  ;  immediate
: COUNT.     COUNT    ;    : COUNT     DON'T.USE  ;  immediate
: TYPE.      TYPE     ;    : TYPE      DON'T.USE  ;  immediate

 
: .S.        .S       ;    : .S        DON'T.USE  ;  immediate

: 2/.        2/       ;    : 2/        DON'T.USE  ;  immediate
: 2*.        2*       ;    : 2*        DON'T.USE  ;  immediate
: 1+.        1+       ;    : 1+        DON'T.USE  ;  immediate
: 1-.        1-       ;    : 1-        DON'T.USE  ;  immediate
\ : 2^n.       2^n      ;    : 2^n       DON'T.USE  ;  immediate

: CELL.      CELL     ;    : CELL      DON'T.USE  ;  immediate
: CELL+.     CELL+    ;    : CELL+     DON'T.USE  ;  immediate
: CELL-.     CELL-    ;    : CELL-     DON'T.USE  ;  immediate
: CELLS.     CELLS    ;    : CELLS     DON'T.USE  ;  immediate

: WITHIN.    WITHIN   ;    : WITHIN    DON'T.USE  ;  immediate
: BETWEEN.   BETWEEN  ;    : BETWEEN   DON'T.USE  ;  immediate  

: MAX.       MAX      ;    : MAX       DON'T.USE  ;  immediate
: MIN.       MIN      ;    : MIN       DON'T.USE  ;  immediate

:    MOD.    MOD      ;    :    MOD    DON'T.USE  ;  immediate
:   /MOD.   /MOD      ;    :   /MOD    DON'T.USE  ;  immediate
\  M/MOD.  M/MOD      ;    :  M/MOD    DON'T.USE  ;  immediate
: UM/MOD. UM/MOD      ;    :  M/MOD    DON'T.USE  ;  immediate

: CREATE.    CREATE   ;    : CREATE    DON'T.USE  ;  immediate
: VARIABLE.  VARIABLE ;    : VARIABL   DON'T.USE  ;  immediate
: CONSTANT.  CONSTANT ;    : CONSTAN   DON'T.USE  ;  immediate

: DOES>.  ['] DOES>  execute   ;  immediate    :  DOES>  DON'T.USE  ;  immediate  \ 2019.7.18

\ LEAVE.      LEAVE   ;    : LEAVE     DON'T.USE  ;  immediate

: MS.        MS       ;    : MS        DON'T.USE  ;  immediate
: ..           .      ;    : .         DON'T.USE  ;  immediate

\ ALLOT.     ALLOT    ;    : ALLOT     DON'T.USE  ;  immediate


\   :  NEXT.   ADuC7020? @    IF    _next.ADuC7020  4 +   ,'   EXIT   THEN
\              ARMKKK?   @    IF    _next.ARMKKK    4 +   ,'   EXIT   THEN
\                                   _next.HOLIARM   4 +   ,'      ;  \ IMMEDIATE


: DO.    ?COMP COMPILE (DO) >MARK  3  ; IMMEDIATE                                   :  DO     DON'T.USE  ;  immediate
: LOOP.  ?COMP 3 ?PAIRS COMPILE  (LOOP) DUP. CELL+. <RESOLVE >RESOLVE ; IMMEDIATE   :  LOOP   DON'T.USE  ;  immediate
: +LOOP. ?COMP 3 ?PAIRS COMPILE (+LOOP) DUP. CELL+. <RESOLVE >RESOLVE ; IMMEDIATE   : +LOOP   DON'T.USE  ;  immediate



\ '.      [ ' '      ]  LITERAL  EXECUTE  ;              : '      DON'T.USE  ;  immediate
comment:
: IF.     [ ' IF     ]  LITERAL  EXECUTE  ; IMMEDIATE   : IF     DON'T.USE  ;  immediate
: ELSE.   [ ' ELSE   ]  LITERAL  EXECUTE  ; IMMEDIATE   : ELSE   DON'T.USE  ;  immediate
: THEN.   [ ' THEN   ]  LITERAL  EXECUTE  ; IMMEDIATE   : THEN   DON'T.USE  ;  immediate
: BEGIN.  [ ' BEGIN  ]  LITERAL  EXECUTE  ; IMMEDIATE   : BEGI   DON'T.USE  ;  immediate
: AGAIN.  [ ' AGAIN  ]  LITERAL  EXECUTE  ; IMMEDIATE   : AGAI   DON'T.USE  ;  immediate

: WHILE.  [ ' WHILE  ]  LITERAL  EXECUTE  ; IMMEDIATE   : WHIL   DON'T.USE  ;  immediate
: REPEAT. [ ' REPEAT ]  LITERAL  EXECUTE  ; IMMEDIATE   : REPE   DON'T.USE  ;  immediate
: UNTIL.  [ ' UNTIL  ]  LITERAL  EXECUTE  ; IMMEDIATE   : UNTI   DON'T.USE  ;  immediate
: AHEAD.  [ ' AHEAD  ]  LITERAL  EXECUTE  ; IMMEDIATE   : AHEA   DON'T.USE  ;  immediate
comment;

: ;.            ( -- )
                ?COMP
                ?:M     ( -- F1 )
                FALSE TO ?:M
                        ( -- f1 ) ABORT" Methods must END in ;M !"
                ?CSP REVEAL
                PARMS
                IF      COMPILE UNNESTP
                ELSE    COMPILE UNNEST
                THEN    [COMPILE] [ 0 TO PARMS DO-;CHAIN ; IMMEDIATE
\ : ;      DON'T.USE  ;  immediate

: IF.     [ ' IF     ]  LITERAL  EXECUTE  ; IMMEDIATE   : IF     DON'T.USE  ;  immediate
: ELSE.   [ ' ELSE   ]  LITERAL  EXECUTE  ; IMMEDIATE   : ELSE   DON'T.USE  ;  immediate
: THEN.   [ ' THEN   ]  LITERAL  EXECUTE  ; IMMEDIATE   : THEN   DON'T.USE  ;  immediate
: BEGIN.  [ ' BEGIN  ]  LITERAL  EXECUTE  ; IMMEDIATE   : BEGI   DON'T.USE  ;  immediate
: AGAIN.  [ ' AGAIN  ]  LITERAL  EXECUTE  ; IMMEDIATE   : AGAI   DON'T.USE  ;  immediate

: WHILE.  [ ' WHILE  ]  LITERAL  EXECUTE  ; IMMEDIATE   : WHIL   DON'T.USE  ;  immediate
: REPEAT. [ ' REPEAT ]  LITERAL  EXECUTE  ; IMMEDIATE   : REPE   DON'T.USE  ;  immediate
: UNTIL.  [ ' UNTIL  ]  LITERAL  EXECUTE  ; IMMEDIATE   : UNTI   DON'T.USE  ;  immediate
: AHEAD.  [ ' AHEAD  ]  LITERAL  EXECUTE  ; IMMEDIATE   : AHEA   DON'T.USE  ;  immediate

: BEGIN    BEGIN'  ( HERE' )  ;
: AGAIN    AGAIN'  ( RJMP  )  ;

\ : IF     ` R2-0.tst   {DROP}       IF'Z=0  ;
: ELSE     ELSE'     ;
: THEN     ENDIF'    ;

\ : UNTIL  ` R2-0.tst   {DROP}    UNTIL'Z=0  ;
\ : WHILE  ` R2-0.tst   {DROP}    WHILE'Z=0  ;

: REPEAT   REPEAT'   ;
\ ******************************************************************************
\  :  FOR.                  HERE'  >R      ;

\  :  NEXT.   ADuC7020? @.   IF.   _next.ADuC7020  4 +.  ,'   EXIT.  THEN.
\             ARMKKK?   @.   IF.   _next.ARMKKK    4 +.  ,'   EXIT.  THEN.
\                                  _next.HOLIARM   4 +.  ,'      ;  \ IMMEDIATE

comment:
\ VOCABULARY  P2103   P2103 DEFINITIONS
  '' _SHOW.CPU 4 +. ORG    \ 4000 ORG

: CODE        T:      ;
: CODE'       T:'     ;
: END-CODE    PC=RE   ;
: END-CODE'   RE POP  ;
: C;'         RE POP  ;
: C;          PC=RE   ;

comment;

\ : is.  ['] is   execute  ;    : is        DON'T.USE  ;  immediate

: EXECUTE.      EXECUTE  ;    : EXECUTE   DON'T.USE  ;  immediate
: ERASE.        ERASE    ;    : ERASE     DON'T.USE  ;  immediate
: FILL.         FILL     ;    : FILL      DON'T.USE  ;  immediate

defer  here.            ' here        is   here.           : here         DON'T.USE  ;  immediate
defer  hex.             ' hex         is   hex.            : hex          DON'T.USE  ;  immediate
defer  on.              ' on          is   on.             : on           DON'T.USE  ;  immediate
defer  off.             ' off         is   off.            : off          DON'T.USE  ;  immediate
defer  immediate.       ' immediate   is   immediate.      : immediate    DON'T.USE  ;  immediate.
defer  see.             ' see         is   see.            : see          DON'T.USE  ;  immediate.
defer  words.           ' words       is   words.          : see          DON'T.USE  ;  immediate.
defer  dump.            ' dump        is   dump.           : dump         DON'T.USE  ;  immediate.

defer  +!.              ' +!          is   +!.             : +!           DON'T.USE  ;  immediate.
defer  abort". immediate.  ' abort"   is   abort".         : abort"       DON'T.USE  ;  immediate.
defer  word.            ' word        is   word.           : word         DON'T.USE  ;  immediate.
defer  bounds.          ' bounds      is   bounds.         : bounds       DON'T.USE  ;  immediate.
defer  bl.              ' bl          is   bl.             : bl           DON'T.USE  ;  immediate.
defer  parse.           ' parse       is   parse.          : parse        DON'T.USE  ;  immediate.
defer  .".  immediate.  ' ."          is   .".             : ."           DON'T.USE  ;  immediate.
defer  2variable.       ' 2variable   is   2variable.      : 2variable    DON'T.USE  ;  immediate. 

defer  is.  immediate.  ' is          is   is.             : is           DON'T.USE  ;  immediate. \ always at the end.






: .".           ( -<string">- )
                COMPILE (.")  ,"  ; IMMEDIATE.












    \  : 0 ;   : 1 ;    \ see 0  see 1   0 and 1 are defined as constants.
\ include  LM4F120IO3.F



VERSION#  ( 61400 )  decimal  420000  430000  between.   hex.
#if
#else  :  LOOP.   ?COMP  3 ?PAIRS COMPILE  (LOOP) DUP.  2 CELLS+ <RESOLVE >RESOLVE  ;.  immediate.
       : +LOOP.   ?COMP  3 ?PAIRS COMPILE (+LOOP) DUP.  2 CELLS+ <RESOLVE >RESOLVE  ;.  immediate.
#then


: [.   state  off.  ;   immediate.      : [           DON'T.USE  ;
: ].   state  on.   ;                   : ]           DON'T.USE  ;




disassembler definitions  ' dis           alias       dis.           :  dis           don't.use  ;   forth definitions

4.2?  @.
#if
  ' cold          alias       cold.          :  cold          DON'T.USE  ;
#then


  ' quit          alias      _quit.new       :  quit          DON'T.USE  ;      \ 2013/11/21

CODE >R.        ( n1 -- )       \ push n1 onto the return stack
                sub     ebp, # 4
                mov     0 [ebp], ebx
                pop     ebx
                next    c;

CODE R>.        ( -- n1 )       \ pop n1 off the return stack
                push    ebx
                mov     ebx, 0 [ebp]
                add     ebp, # 4
                next    c;

CODE R@.        ( -- n1 )       \ get a copy of the top of the return stack
                push    ebx
                mov     ebx, 0 [ebp]
                next    c;


CODE LSHIFT.    ( u1 n -- u2 )  \ shift u1 left by n bits (multiply)
                mov     ecx, ebx
                pop     ebx
                shl     ebx, cl
                next    c;

CODE RSHIFT.    ( u1 n -- u2 )  \ shift u1 right by n bits (divide)
                mov     ecx, ebx
                pop     ebx
                shr     ebx, cl
                next    c;

CODE DUP>R.     ( n1 -- n1 )    \ push a copy of n1 onto the return stack
                sub     ebp, # 4
                mov     0 [ebp], ebx
                next    c;

CODE R>DROP.    ( -- )          \ discard one item off of the return stack
                add     ebp, # 4
                next    c;

CODE 2>R.       ( n1 n2 -- )    \ push a two items onto the returnstack
                pop     eax
                sub     ebp, # 8
                mov     1 CELLS. [ebp], eax
                mov     0 CELLS. [ebp], ebx
                pop     ebx
                next    c;

CODE 2R>.       ( -- n1 n2 )    \ pop a two items off the return stack
                push    ebx
                mov     ebx, 0 CELLS. [ebp]
                mov     eax, 1 CELLS. [ebp]
                add     ebp, # 8
                push    eax
                next    c;

CODE 2R@.       ( -- n1 n2 )    \ get a copy of the top two items on the return stack
                push    ebx
                mov     ebx, 0 CELLS. [ebp]
                mov     eax, 1 CELLS. [ebp]
                push    eax
                next    c;








'  Lshift      alias        Lshift.     :   Lshift     don't.use  ;
'  Rshift      alias        Rshift>.    :   Rshift     don't.use  ;

comment:
'  >r          alias        >r.         :   >r         don't.use  ;
'  r>          alias        r>.         :   r>         don't.use  ;
'  r@          alias        r@.         :   >@         don't.use  ;
'  r@          alias        r@.         :   >@         don't.use  ;
comment;

: [  (+target)  off.  ;
: ]  (+target)  on.   ;

defer  last.  immediate.  ' last          is.  last.             : last           DON'T.USE  ;  immediate.

:  T*2  T    T  R+R  ;

   '  dbg    alias  dbg.   : dbg    DON'T.USE  ;
\  '  quit   alias  quit.  : quit   DON'T.USE  ;

\ :.      exit.   exit  ;.  \ immediate.
\ defer quit.              ' quit       is.   quit.          : quit        DON'T.USE  ;                                                          : exit        DON'T.USE  ;
( defer exit.              ' exit       is.   exit. )        : exit        DON'T.USE  ;

defer cmove.               ' cmove      is.   cmove.         : cmove       DON'T.USE  ;
defer -2rot.               ' -2rot      is.  -2rot.          : -2rot       DON'T.USE  ;
defer  ?.                  ' ?          is.   ?.             : ?           DON'T.USE  ;

defer  `.                  ' `          is.   `.             : `           DON'T.USE  ;


' to       alias  to.                                        : to          DON'T.USE  ;
\ defer  [.    immediate.    ' [          is.   [.             : [           DON'T.USE  ;
\ defer  ].                  ' ]          is.   ].             : ]           DON'T.USE  ;




defer  literal. immediate. ' literal    is.   literal.       : literal     DON'T.USE  ;
defer  ?do.     immediate. ' ?do        is.   ?do.           : ?do         DON'T.USE  ;
defer  s>d.                ' s>d        is.   s>d.           : s>d         DON'T.USE  ;
' s"           alias       s".      immediate.      :  s"          DON'T.USE  ;
' decimal      alias       decimal.     :  decimal     DON'T.USE  ;
' allot        alias       allot.       :  allot       DON'T.USE  ;
' ?dup         alias       ?dup.        :  ?dup        DON'T.USE  ;
' spaces       alias       spaces.      :  spaces      DON'T.USE  ;
' depth        alias       depth.       :  depth       DON'T.USE  ;
\ word         alias       word.        :  word        DON'T.USE  ;  \ defined in fence55c.f

' U.           alias       U..          :  U.          DON'T.USE  ;
' U.R          alias       U.R.         :  U.R         DON'T.USE  ;
'  .R          alias        .R.         :   .R         DON'T.USE  ;

' 2>r          alias       2>r.         :  2>r         don't.use  ;
' 2r>          alias       2r>.         :  2r>         don't.use  ;
' 2r@          alias       2r@.         :  2>@         don't.use  ;

' >name        alias       >name.       :  >name       don't.use  ;

' sp0          alias       sp0.         :  sp0         don't.use  ;
' rp0          alias       rp0.         :  rp0         don't.use  ;
' number?      alias       number?.     :  number?     don't.use  ;

' case         alias       case.     immediate.    :  case        don't.use  ;
' endcase      alias       endcase.  immediate.    :  endcase     don't.use  ;
' of           alias       of.       immediate.    :  of          don't.use  ;
' endof        alias       endof.    immediate.    :  endof       don't.use  ;
' base         alias       base.                   :  base        don't.use  ;
' \            alias       \.        immediate.    \  \ <-- always keep it as it is. for the purpose of later definfinig \ in target system
' (            alias       (.        immediate.    \  ( <-- always keep it as it is. for the purpose of later definfinig ( in target system

\     '  quit  alias       quit.                   :  quit        don't.use  ;
\ defer  quit.           ' quit        is.   quit. :  quit        don't.use  ;

comment:
defer  :.                  ' :         is.   :.    :.  :     DON'T.USE  ;    \  put these at the end of fence.f
defer  ;.    immediate.    ' ;         is.   ;.    :.  ;     DON'T.USE  ;    \  put these at the end of fence.f   ?????
\ defer  ;.                  ' ;         is.   ;.    :.  ;     DON'T.USE  ;    \  put these at the end of fence.f
comment;

( defer  :.                  ' :         is.   :. )  :.  :     DON'T.USE  ;    \  put these at the end of fence.f
( defer  ;.    immediate.    ' ;         is.   ;. )  :.  ;     DON'T.USE  ;    \  put these at the end of fence.f   ?????




defer  >in.              ' >in         is.   >in.  :.  >in   DON'T.USE  ;.   \  put these at the end of fence.f

defer  '.                  ' '         is.   '.    :.  '     DON'T.USE  ;.   \  put these at the end of fence.f


:. SEE  '.  DUP.  >NAME  T:?  IF.   CFA>CFA'  U ( _SEE.ONE.INSTRUCTION ) ELSE.  (SEE)  THEN.  ;.
:. see  see'  ;.

  :.   :   32:     ;.
  :.   ;   ret     ;.    immediate.    \ override ;

variable.  var.counter
:.         maximum.variable.counter  80  ;.
:.   check.maximum.variable.counter           var.counter  @.  7e >.
     if.   maximum.variable.counter  2 -.     var.counter  !.
     then. ;. 
\ ------------------------------------------------------------------------------------
:{ ret    bd00  16,'  RESOLVE.DATA.PENDED  t:state? off.  };   \  0e  pop
:{ pc=lr  4770  16,'                                      };   \       lr    bx.r  =====  rf=re
:{ ret'   pc=lr       RESOLVE.DATA.PENDED  t:state? off.  };   \  0e ( lr )  bx.r  =====  rf=re

:.   ;    ret     ;.    immediate.    \ override ;
:.  -;    ;.


variable.     (t:state?)
:. inline      t:state?   @.  (t:state?)  !.   t:state? off.   ;.
:. asm[        t:state?   @.  (t:state?)  !.   t:state? off.   ;.
:. asm{        t:state?   @.  (t:state?)  !.   t:state? off.   ;.
:. end-line   (t:state?)  @.   t:state?   !.   ;.
:. end-inline (t:state?)  @.   t:state?   !.   ;.
:. endinline  (t:state?)  @.   t:state?   !.   ;.
:. ]asm       (t:state?)  @.   t:state?   !.   ;.
:. }asm       (t:state?)  @.   t:state?   !.   ;.

\ :. asm[        t:state?   @.  (t:state?)  !.   t:state? off.   depth.  @.  >r.   ;.
\ :. ]asm       (t:state?)       t:state?   !.                   depth.  @.   r>.  <>.  abort".  stack changed!? "   ;.



variable.  addr.of.last'
variable.  user.area
                                                                             \   ea08  16!'
:.  flush'   last'  @.   user.area  @.   addr.of.last'  @.  +.         16!'  \ current  ea2e
                   10    user.area  @.                  4   +.         16!'  \ eForth   ea24    decimal ---> hex
             msp430g2553camelForth? @.   msp430f1611camelForth?  @.   or.   fram? @.     and.
             if.   '('  faec 8!'         '\'   f41a  8!'    \  recoverring (  and  \
                   1080 22  1.hex'     \ 1080 ~ 10a1  for fram;    c000~ffff for flash.
             else.
                msp430eForth?    @.
                if.        1.hex
                else.      tinyForth(stc.under.camelforth)?  @.
                    if.            1.hex     \ fffe  2  >hex.file \ ['']  tinyForth  ( .. 9A98 )
                    else.  fffe 2  1.hex'
                    then.
                then.
             then.  ;.

variable.  cfa'.of.>r
variable.      compiling.mode
:.             compiling.mode.on
               compiling.mode   @.    cr.    .".  **** "
   if.    .".  interpreting"    0
   else.  .".  compiling"      -1
   then.  .".  mode now ****"
               compiling.mode  !.    ;.

:.  cmn        compiling.mode.on     ;.


  :.  ,call  ( cfa' -- )   here'  4+   -.  _24#>5..10#2.j.j11# ( 1+ ) op.code.of.call  @.  +.  0~15<->16~31  32,'   ;.


:.   ."|:        ."|'     ;.
:.   ."          ."|'     ;.
:.   $"|:        $"|'     ;.
:.   $"          $"|'     ;.




:.  abor.":   abor."'     ;.
:.  abort"    abor."'     ;.



:.     $"|:     cfa'.of.$"|      @.  rcall  +s"  ;.
:.     ."|:     cfa'.of.."|      @.  rcall  +s"  ;.
:.  abor.":     cfa'.of.abor."   @.  rcall  +s"  ;.



:.  ,call_r0    4780  16,'  ;.

:.     ?"|  ( cfa' -- )     dup.   here'  -.  abs.  0  7fffff  between.
       if.                         rcall      \ within  -2^23 ~ +2^23
       else. 0  swap. 1+.  ldri   ,call_r0    \ beyond  -2^23 ~ +2^23
       then.    +s"    ;.

:.     $"|:      cfa'.of.$"|       @.    ?"|   ;.
:.     ."|:      cfa'.of.."|       @.    ?"|   ;.
:.  abor.":      cfa'.of.abor."    @.    ?"|   ;.

:.     $"|:*     cfa'.of.$"|*      @.    ?"|   ;.
:.     ."|:*     cfa'.of.."|*      @.    ?"|   ;.
:.  abor.":*     cfa'.of.abor."*   @.    ?"|   ;.

:.     ."|'         ."|:    ;.
:.  abor."'      abor.":    ;.
:.     $"|'         $"|:    ;.

:.     ."|'*        ."|:*   ;.
:.  abor."'*     abor.":*   ;.
:.     $"|'*        $"|:*   ;.

 
cfa'.of.abort"  @.  cfa'.of.abor." !.

  D34E    cfa'.of.IF       !.
  D3CA    cfa'.of.ELSE     !.
  D3A2    cfa'.of.THEN     !.
  D304    cfa'.of.BEGIN    !.
  D3DC    cfa'.of.WHILE    !.
  D38C    cfa'.of.REPEAT   !.
  D328    cfa'.of.UNTIL    !.
  D33C    cfa'.of.AGAIN    !.
  D36C    cfa'.of.AHEAD    !.
  D2F0    cfa'.of.FOR      !.
  D3B2    cfa'.of.AFT      !.
  D314    cfa'.of.NEXT     !.


:.  IF,      op.code.of.CALL  @.     cfa'.of.IF      @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  ELSE,    op.code.of.CALL  @.     cfa'.of.ELSE    @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  THEN,    op.code.of.CALL  @.     cfa'.of.THEN    @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  BEGIN,   op.code.of.CALL  @.     cfa'.of.BEGIN   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  WHILE,   op.code.of.CALL  @.     cfa'.of.WHILE   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  REPEAT,  op.code.of.CALL  @.     cfa'.of.REPEAT  @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  CUNTIL,  op.code.of.CALL  @.     cfa'.of.UNTIL   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  AGAIN,   op.code.of.CALL  @.     cfa'.of.AGAIN   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  AHEAD,   op.code.of.CALL  @.     cfa'.of.AHEAD   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  FOR,     op.code.of.CALL  @.     cfa'.of.FOR     @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  AFT,     op.code.of.CALL  @.     cfa'.of.AFT     @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  NEXT,    op.code.of.CALL  @.     cfa'.of.NEXT    @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.

:.  cboo   show.cfa?  dup.  @.  if.  off.  else.  on.  then.  ;.
    cboo


:.  IF,      op.code.of.CALL  @.     cfa'.of.IF      @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  ELSE,    op.code.of.CALL  @.     cfa'.of.ELSE    @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  THEN,    op.code.of.CALL  @.     cfa'.of.THEN    @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  BEGIN,   op.code.of.CALL  @.     cfa'.of.BEGIN   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  WHILE,   op.code.of.CALL  @.     cfa'.of.WHILE   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  REPEAT,  op.code.of.CALL  @.     cfa'.of.REPEAT  @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  CUNTIL,  op.code.of.CALL  @.     cfa'.of.UNTIL   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  AGAIN,   op.code.of.CALL  @.     cfa'.of.AGAIN   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  AHEAD,   op.code.of.CALL  @.     cfa'.of.AHEAD   @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  FOR,     op.code.of.CALL  @.     cfa'.of.FOR     @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  AFT,     op.code.of.CALL  @.     cfa'.of.AFT     @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.
:.  NEXT,  1>  op.code.of.CALL  @.     cfa'.of.NEXT    @.  24#>5..10#2.j.j11#    or.  0~15<->16~31  32,'  ;.


:.  asm[    (+target)  off.         ;.
:.  ]asm    (+target)  on.          ;.

:.  ,call.cfa'(24#)   ( cfa' -- )   here'  4  +.  -.  24#>5..10#2.j.j11#   op.code.of.CALL  @.   or.  0~15<->16~31  32,'  ;.
:.  ,call.cfa'(r0)    ( cfa' -- )   0  swap.  r=#    0  call_r   ;.
:.  ,call.cfa'''''        ( cfa' -- )   here'  over.  -.  abs.  1 ( FFFF ) >.
    if.     ,call.cfa'(r0)
    else.   ,call.cfa'(24#)
    then.   ;.

:.  ,call.branch    cfa'.of.branch    @.  ,call.cfa'  ;.
:.  ,call.?branch   cfa'.of.?branch   @.  ,call.cfa'  ;.

:.  ,call.branch*   cfa'.of.branch*   @.  ,call.cfa'  ;.
:.  ,call.?branch*  cfa'.of.?branch*  @.  ,call.cfa'  ;.

:.  ,call.branch                     cfa'.of.branch    @.  ,call.cfa'  ;.
:.  ,call.?branch                    cfa'.of.?branch   @.  ,call.cfa'  ;.

variable.   traditional.structure?
:.  ts      traditional.structure?  dup.  @.   if.  off.  else.  on.  then.  ;.
            traditional.structure?  on.

:.  AHEAD*    ,call.branch   here'  0000  32,'  ;.
:.  IF*       ,call.?branch  here'  0000  32,'  ;.
:.  ELSE*     ,call.branch   here'  0000  32,'  here'  rot.  32!'  ;.
:.  THEN*     here'    swap.              32!'  ;.

:.  BEGIN*    BEGIN'                ;.
:.  AGAIN*    ,call.branch   32,'   ;.
:.  UNTIL*    ,call.?branch  32,'   ;.
:.  WHILE*    IF*                   ;.
:.  REPEAT*   SWAP.  AGAIN*  THEN*  ;.

:.  AHEAD     ,call.branch   here'  0000  32,'  ;.
:.  IF        ,call.?branch  here'  0000  32,'  ;.
:.  ELSE      ,call.branch   here'  0000  32,'  here'  rot.  32!'  ;.
:.  THEN      here'    swap.              32!'  ;.

:.  BEGIN     BEGIN'                ;.
:.  AGAIN     ,call.branch   32,'   ;.
:.  UNTIL     ,call.?branch  32,'   ;.
:.  WHILE     IF                    ;.
:.  REPEAT    SWAP.  AGAIN   THEN   ;.

:.  ahead   traditional.structure?  @.  if.  ,call.branch   here'  0000  32,'                      else.  ahead'                       then.  ;.
:.  if      traditional.structure?  @.  if.  ,call.?branch  here'  0000  32,'                      else.  t:0  {DROP}  if'<>           then.  ;.
:.  else    traditional.structure?  @.  if.  ,call.branch   here'  0000  32,'  here'  rot.  32!'   else.  else'                        then.  ;.
:.  then    traditional.structure?  @.  if.   here'   swap.        32!'                            else.  then'                        then.  ;.
:.  again   traditional.structure?  @.  if.  ,call.branch   32,'                                   else.  again'                       then.  ;.
:.  until   traditional.structure?  @.  if.  ,call.?branch  32,'                                   else.  t:0  {DROP}  until'<>        then.  ;.
:.  while   if   ;.
:.  repeat  traditional.structure?  @.  if.   SWAP.  AGAIN  THEN                                   else.  swap.    again'  then'       then.  ;.

:.  IF,             IF     >1   ;.
:.  ELSE,           ELSE        ;.
:.  THEN,       1>  THEN        ;.
:.  BEGIN,          BEGIN  >1   ;.
:.  AGAIN,      1>  AGAIN       ;.
:.  UNTIL,      1>  UNTIL       ;.
:.  WHILE,          WHILE  >1   ;.
:.  REPEAT,     1>  REPEAT      ;.

:.  IF,,            IF     >2   ;.
:.  ELSE,,          ELSE        ;.
:.  THEN,,      2>  THEN        ;.
:.  BEGIN,,         BEGIN  >2   ;.
:.  AGAIN,,     2>  AGAIN       ;.
:.  UNTIL,,     2>  UNTIL       ;.
:.  WHILE,,         WHILE  >2   ;.
:.  REPEAT,,    2>  REPEAT      ;.

:.  IF,,,           IF     >3   ;.
:.  ELSE,,,         ELSE        ;.
:.  THEN,,,     3>  THEN        ;.
:.  BEGIN,,,        BEGIN  >3   ;.
:.  AGAIN,,,    3>  AGAIN       ;.
:.  UNTIL,,,    3>  UNTIL       ;.
:.  WHILE,,,        WHILE  >3   ;.
:.  REPEAT,,,   3>  REPEAT      ;.

:.  IF,,,,          IF     >4   ;.
:.  ELSE,,,,        ELSE        ;.
:.  THEN,,,,    4>  THEN        ;.
:.  BEGIN,,,,       BEGIN  >4   ;.
:.  AGAIN,,,,   4>  AGAIN       ;.
:.  UNTIL,,,,   4>  UNTIL       ;.
:.  WHILE,,,,       WHILE  >4   ;.
:.  REPEAT,,,,  4>  REPEAT      ;.

:.  IF,,,,,         IF     >5   ;.
:.  ELSE,,,,,       ELSE        ;.
:.  THEN,,,,,   5>  THEN        ;.
:.  BEGIN,,,,,      BEGIN  >5   ;.
:.  AGAIN,,,,,  5>  AGAIN       ;.
:.  UNTIL,,,,,  5>  UNTIL       ;.
:.  WHILE,,,,,      WHILE  >5   ;.
:.  REPEAT,,,,, 5>  REPEAT      ;.

:.  AHEAD,          AHEAD  >1   ;.
:.  AHEAD,,         AHEAD  >2   ;.
:.  AHEAD,,,        AHEAD  >3   ;.
:.  AHEAD,,,,       AHEAD  >4   ;.
:.  AHEAD,,,,,      AHEAD  >5   ;.

\ :.  ...          doLIT  32,' ;.
  :.  ...  cfa'.of.doLIT  32,' ;.
'.  ...  is.  _...

\ CODE  TEST.FOR.NEXT  ( n lshift -- n2 )    FOR  2*  NEXT   C;

:.  :         ef:   ;.
:.  ;         ret   ;.
:.  code      t:    ;.      mecrisp32F429/407?  @.  #if   :.  code   T:new(stm32F429mecrispForth)  ;.   #then
:.  end-code  ret'  ;.
:.  c;        ret'  ;.

:.  .s        .s.   ;.
 
compiling.mode.on

\ ****************************
\ *  new program start from here  *
\ ****************************
stm32f407.sF?         @.  #if  c000 ( 0800c000 ) org    #then
STELLARIS.LAUNCHPAD?  @.  #if       c000  org    #then

\           include  LM4F120IO3.F


:.  sp0@         20000378  ;.   \ sp0 is USER VARIABLE   ????????????????
:.  rp0@         20000300  ;.   \ rp0 is USER VARIABLE   ????????????????
:.  sp0.mecrisp  20000238  ;.
:.  rp0.mecrisp  20000338  ;.

:.  sp=#   sp  swap.  r=#  ;.
:.  rp=#   rp  swap.  r=#  ;.


tachyonForth?  @.     tachyon.assembler?  @.  and.
#if

variable.    COMn
:.  oo1   1  COMn  !.   115.2k1   ;.
:.  oo2   2  COMn  !.   115.2k2   ;.
:.  oo3   3  COMn  !.   115.2k3   ;.
:.  oo4   4  COMn  !.   115.2k4   ;.
:.  oo5   5  COMn  !.   115.2k5   ;.
:.  oo6   6  COMn  !.   115.2k6   ;.
:.  oo7   7  COMn  !.   115.2k7   ;.
:.  oo8   8  COMn  !.   115.2k8   ;.
:.  oo9   9  COMn  !.   115.2k9   ;.
:.  oo10 0A  COMn  !.   115.2k10  ;.
:.  oo11 0B  COMn  !.   115.2k11  ;.
:.  oo12 0C  COMn  !.   115.2k12  ;.
:.  oo13 0D  COMn  !.   115.2k13  ;.
:.  oo14 0E  COMn  !.   115.2k14  ;.
:.  oo15 0F  COMn  !.   115.2k15  ;.
:.  oo16 10  COMn  !.   115.2k16  ;.


         1  COMn  !.
:.  oo      COMn  @.
  case.
    1  of.  115.2k1   endof.
    2  of.  115.2k2   endof.
    3  of.  115.2k3   endof.
    4  of.  115.2k4   endof.
    5  of.  115.2k5   endof.
    6  of.  115.2k6   endof.
    7  of.  115.2k7   endof.
    8  of.  115.2k8   endof.
    9  of.  115.2k9   endof.
   0A  of.  115.2k10  endof.
   0B  of.  115.2k11  endof.
   0C  of.  115.2k12  endof.
   0D  of.  115.2k13  endof.
   0E  of.  115.2k14  endof.
   0F  of.  115.2k15  endof.
   10  of.  115.2k16  endof.
            115.2k1
  endcase.  ;.

4.2?  @.    not.
   #if     :.  oo1   com1talk  ;.
   #then


       :.  cls.  cls   ;.

       include  tachyonForthORG865b.F ( tn57.f )
       :.  disassem.cog.program   \.3F***  7500  7cff  disassem.range  ;.
       :.  dcp   disassem.cog.program        ;.
       :.  cls   cls.  ;.    :.  dbg   dbg.  ;.

propellerForth?  @.
   #if
:. get.total.instruction(pf801) ( -- n )  0  ( 27ce )  last'  @.   \ propellerForth  from  pf801.hex
   begin.    2  -.  16@'  dup.
   while.    cfa'>nfa'(PF801)   swap.  1+.  swap.
   repeat.   drop.  ;.    \ 12e

variable.   total.instruction(pf801)

:. nfa'>instruction.n ( nfa' -- n )  >r.  0  ( 27ce )  last'  @.     \ propellerForth  from  pf801.hex
   begin.    dup.  r@.   <>.
   while.    2  -.  16@'  cfa'>nfa'(PF801)   swap.  1+.  swap.
   repeat.   drop.  r>drop.
   get.total.instruction(pf801)  swap.  -.  ;.   \  202a   nfa'>1nstruction.n --> f3

:. nfa'>instruction.n(propForth)  ( nfa' -- n )  >r.  0  ( 27ce )  last'  @.     \ propForth
   begin.    dup.    r@.   <>.
   while.    2  -.  16@'   ( nfa' )   swap.  1+.  swap.
   repeat.   drop.  r>drop.
   get.total.instruction(propForth)  swap.  -.  ;.   \  202a   nfa'>1nstruction.n --> f3


:. nfa'>instruction.n?????? ( nfa' -- n )  >r.  0  ( 27ce )  last'  @.     \ propellerForth  from  pf801.hex
   begin.    dup.  r@.   <>.
   while.    2  -.  16@'  cfa'>nfa'(PF801)   swap.  1+.  swap.
   repeat.   drop.  r>drop.
   total.instruction(pf801)  @.  ?dup
   if.
   else.     get.total.instruction(pf801)  dup.  total.instruction(pf801)   !.
   then.     swap.  -.  ;.   \  202a   nfa'>1nstruction.n --> f3

:. instruction.n>nfa' ( n -- nfa' )  get.total.instruction(pf801)  swap.  -.  >r.   0  ( 27ce )  last'  @.
   begin.    over.   r@.   <>.
   while.    2  -.  16@'   cfa'>nfa'(PF801)   swap.  1+.  swap.
   repeat.   nip.  r>drop.   ;.    \ f3  instruction.n>nfa' --> 202a

:. instruction.n>nfa'(propForth)  ( n -- nfa' )  get.total.instruction(propForth)  swap.  -.  >r.   0  ( 27ce )  last'  @.
   begin.    over.   r@.   <>.
   while.    2  -.  16@'  \ cfa'>nfa'(propForth)
             swap.  1+.  swap.
   repeat.   nip.  r>drop.   ;.    \ f3  instruction.n>nfa' --> 202a

:. cfa'(pf801)?   ( a' -- nfa' | 0  )  0   get.total.instruction(pf801)  0
   do.     i.  instruction.n>nfa'  nfa'>cfa'(PF801)  2  pick.  =.  if.   drop.  dup.  leave.  then.
   loop.   nip.   ;.

:. cog.Rn>cfa'(PF801)   ( n -- nfa' | 0 )         \ ex.  27a4   a'>nfa'   --->   127 --> 91e  127*2+6d0
   90  -.  4 /.  2*.  6d0  +.  cfa'(pf801)?   ;.

:. cog.Rn>nfa'(PF801)   ( n -- nfa' | 0 )         \ ex.  27a4   a'>nfa'   --->   127 --> 91e  127*2+6d0
   90  -.  4 /.  2*.  6d0  +.  cfa'(pf801)?  dup.  if.  cfa'>nfa'(PF801)  then.  ;.

:. type'(20~7f)  ( a' len -- )  bounds.  do.  i.  c@'  dup.  20 7f  between.  if.  emit.  else.  drop.  then.    loop.  ;.

:. .id(pf801)  ( nfa' -- )  ?dup.  if.  count'   7  min.     type'(20~7f)   then.  ;.

:. get.next.nfa'  ( nfa1' -- nfa2' | 0 )  nfa'>instruction.n   1+.   instruction.n>nfa'  ;.

:. words'.pf801   ( -- )   cr.  ( 27ce )  last'  @.             \ propellerForth  from  pf801.hex
   begin.   cr.   .".   ( nfa:"   dup.     6 u.r.   .".           cfa: )"
            dup.  nfa'>cfa'(pf801)         6 u.r.   .".   org   t:  "
            dup.  .id(pf801)   \  count'   7  min.     type'(20~7f)   \ name is limited to 7 characters maximum.
            dup.  2  -.  16@'    ?dup.
   while.   nip.  cfa'>nfa'(PF801)
   repeat.  drop.    ;.

:. words'.pf801^  ( -- )   cr.         \ propellerForth  from  pf801.hex
   get.total.instruction(pf801)  dup.  1+.   0
   do.      i.   instruction.n>nfa'
            cr.   .".   ( "  i.  4 .r(decimal)   i. 5 .r.   .".    nfa:"   dup.     6 u.r.   .".      cfa: )"
            dup.  nfa'>cfa'(pf801)
            dup.  6d0 -.  2/.  dup.  200  <.  if. .".   ("  5 u.r. .".  ) "  else.  drop.   0b spaces. then.
            6 u.r.   .".   org   t:  "  .id(pf801)
   loop.    drop.    ;.

:. words'.pf801^LFA  ( -- )   cr.        \ propellerForth  from  pf801.hex
   get.total.instruction(pf801)  dup.  1+.   0
   do.      i.   instruction.n>nfa'
            cr.   .".   ( "  i.  4 .r(decimal)   i. 5 .r.   .".    nfa:"   dup.     6 u.r.   .".      cfa: "
            dup.  dup>r.   nfa'>cfa'(pf801)
            dup.  6d0 -.  2/.  dup.  200  <.  if. .".  **"  4 u.r. .".  **"   else.  drop. 0a  spaces.  then.
            5 u.r.  .".   lfa: ) "   r>. 2-.  .xxxxx   .".   org  t:  "  .id(pf801)
   loop.    drop.    ;.


propForth?  @.
      #if

:.  0      0000  ;.
:.  1      0001  ;.
:.  2      0002  ;.
:.  3      0003  ;.
:. -1  ffffFFFF  ;.

:.  .id(propForth.nfa)  ( nfa' -- )  count'  1f  and.  type'  ;.
:.  .id(propForth.cfa)  ( cfa' -- )  CFA'>NFA'(PROPFORTH)   .id(propForth.nfa)  ;.

:. words'.propForth^LFA'  ( -- )   cr.  cr.
   get.total.instruction(propForth)   dup.  1+.   0
   do.      i.   instruction.n>nfa'(propForth)
            cr.   .".   ( "  i.  4 .r(decimal)   i. 5 .r.   .".    nfa:"   dup.     6 u.r.   .".      cfa: "
            dup.  dup>r.   NFA'>CFA'(PROPFORTH)
            dup.  6d0 -.  2/.  dup.  200  <.  if. .".  **"  4 u.r. .".  **"   else.  drop. 0a  spaces.  then.
            5 u.r.  .".   lfa: ) "   r>. 2-.  .xxxxx   .".   org  t:  "  count' 1f and.  type'
   loop.    drop.    ;.

:. words'.propForth^8  ( -- )   cr.  cr.
   get.total.instruction(propForth)  0
   do.      i.   instruction.n>nfa'(propForth)
            cr.     .".  t: "  count' 1f and.  2dup.   type'  02 spaces. 12 ?y
            +.   EVEN.ALIGNED  i.  1+.  instruction.n>nfa'(propForth)  over.  -. 22  min.     bounds.
            do.  i.  c@'  .xx  space. loop.
   loop.    ;.

:. words'.propForth^16  ( -- )   cr.  cr.
   get.total.instruction(propForth)   0
   do.      i.   instruction.n>nfa'(propForth)
            cr.     .".  t: "  count' 1f and.  2dup.   type'  02 spaces. 12 ?y
            +.   EVEN.ALIGNED  i.  1+.  instruction.n>nfa'(propForth)  over.  -. 28  min.     bounds.
            do.  i.  16@'  .xxxx  space.  02  +loop.
   loop.    ;.

:. words'.propForth.decompile  ( -- )   cr.  cr.
   get.total.instruction(propForth)   0
   do.      i.   instruction.n>nfa'(propForth)
            cr.     .".  t: "  count' 1f and.  2dup.   type'  02 spaces. 12 ?y
            +.   EVEN.ALIGNED  i.  1+.  instruction.n>nfa'(propForth)  over.  -.  28 min.     bounds.
            do.  cr.   20 ?y   i.   16@'  dup.  0 1ff between.
                 if.     .". cogRAM "  3 u.r.
                 else.   .id(propForth.cfa)
                 then.   space.  02
            +loop.
   loop.    ;.

:.  .cogRAM ( n -- )   ( drop.  ;.  )  3f ?y  .". \  cogRAM "  4 u.r.  ;.

:. cogRAM>name ( a -- n )      >r.  r@.        16@'
   case.  13  of.  .". lit.0~9"     r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          5d  of.  .". lit"         r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          4a  of.  .". lit.cog"     r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.

          80  of.  .". (loop)"      r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          82  of.                   r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          10  of.                   r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
         0b2  of.                   r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          57  of.                   r@.   2+.  32@'  28  ?y   9 u.r.   r@.  6 +. 16@' 2000 =. if.  8 else. 6  then.
                                                                     (  6 ) endof.
          00  of.                   r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          8d  of.  .". 0branch"     r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
           4  of.                   r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
          4f  of.  .". dovar"       r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.
         0b2  of.                   r@.   2+.  16@'  28  ?y   5 u.r.   4  endof.

          5f  of.  .". lshift"                                         2  endof.
          77  of.  .". rshift"                                         2  endof.
          79  of.  .". (do)"                                           2  endof.

         107  of.  .". +"                                              2  endof.
         10f  of.  .". -"                                              2  endof.

          26  of.  .". drop"                                           2  endof.
          61  of.  .". exit"                                           2  endof.
                                                                       2  swap.
   endcase.   r>.  16@'  .cogRAM   ;.

:. cfa'>INSTRUCTION.N(PROPFORTH)  ( cfa' -- n )   CFA'>NFA'(PROPFORTH)   NFA'>INSTRUCTION.N(PROPFORTH)  ;.

:. .id(propForth.cfa)+special  ( a' -- n )   >r.  r@.     16@'
   case.     2666  of.  '.'  emit.  '"' emit.  space.  r@.  2+.  count'  tuck.  type' '"' emit.  03 +.       even.aligned  endof.
             1a4c  of.  '.'  emit.  '"' emit.  space.  r@.  2+.  count'  tuck.  type' '"' emit.  03 +.       even.aligned  endof.
             dup.   .id(propForth.cfa)                     2     swap.
   endcase.  r>drop.  ;.

:. decompile.a.word(propForth.n)   ( n -- )
   >r.    r@.    0=.
   if.    1      instruction.n>nfa'(propForth)  2-. 16@'  ( nfa' of 0'th instruction )
   else.  r@.    instruction.n>nfa'(propForth)
   then.    \.3F---
            cr.  .".   ( "   dup.  2-.  dup.  .xxxx     02 spaces.  16@'  .xxxx  .".  )"
            cr.  .".   ( "   dup.   .xxxx   dup.  dup.  count'  nip.  1f and.  1+.  10 min.  bounds.
            do.  space.  i.  c@'  .xx  loop.  .".  )"
       \    cr.  .".   ( "   dup.   NFA'>CFA'(PROPFORTH)  .xxxx   .".        )  "
            cr.  11  spaces.    .".  t:  "  count' 1f and.  2dup.   type'   02 spaces. 12 ?y
            +.   EVEN.ALIGNED  r>.  1+.  instruction.n>nfa'(propForth)  over.  -.  88 min.    2-.    bounds.
            do.  cr.     .".   ( "   i.   .xxxx  i.  16@'  dup.  02 spaces.  .xxxx  .".  )"  20 ?y  dup. 0 1ff between.
              \  if.      drop.  i.  cogRAM>name
              \  else.    drop.  i. .id(propForth.cfa)+special
              \         \ .id(propForth.cfa)    2
                 if.     00b2   =.
                     if.    i.  CFA'>INSTRUCTION.N(PROPFORTH)  1+.  INSTRUCTION.N>NFA'(PROPFORTH)  i. -.  even.aligned
                            .".  \ ****  from "  i.  5 u.r. .".  to "
                            i.  CFA'>INSTRUCTION.N(PROPFORTH)  1+.  INSTRUCTION.N>NFA'(PROPFORTH)  3  -.  5 u.r.  .".  is unknown **** "
                     else.  i.  cogRAM>name
                     then.
                 else.      drop.  i.    .id(propForth.cfa)+special
                 then.      space.
            +loop.  ;.

:. decompile.a.word(propForth.nfa')  ( nfa' -- )   NFA'>INSTRUCTION.N(PROPFORTH)   decompile.a.word(propForth.n)  ;.

:. words'.propForth.decompile   ( -- )   cr.  cr.
   get.total.instruction(propForth)   1
   do.      i.  decompile.a.word(propForth.n)  key?.  if.  leave.  then.
   loop.    ;.

      #then

:. words'.pf801^LFA  ( -- )   cr.        \ propellerForth  from  pf801.hex
   get.total.instruction(pf801)  dup.  1+.   0
   do.      i.   instruction.n>nfa'
            cr.   .".   ( "  i.  4 .r(decimal)   i. 5 .r.   .".    nfa:"   dup.     6 u.r.   .".      cfa: "
            dup.  dup>r.   nfa'>cfa'(pf801)
            dup.  6d0 -.  2/.  dup.  200  <.  if. .".  **"  4 u.r. .".  **"   else.  drop. 0a  spaces.  then.
            5 u.r.  .".   lfa: ) "   r>. 2-.  .xxxxx   .".   org  t:  "  .id(pf801)
   loop.    drop.    ;.



:. words'.pf801'  ( -- )   cr.
   get.total.instruction(pf801)  dup.  1+.   0    \ propellerForth  from  pf801.hex
   do.   i.   instruction.n>nfa'    >r.
         cr.   .". ( nfa:"   r@.    5 u.r.   .".   cfa:)"
         r@.   nfa'>cfa'(pf801)     5 u.r.   .".   org t: "   r@.  .id(pf801)
         29 ?y   r@.  c@'  0f and.  7 min.  1+. EVEN.ALIGNED  r@.  over.       bounds.  do.  i. c@'  .xx  space.  loop.
         43 ?y   r>.  +.            over.   i.  =.
         if.                                           13                      bounds.  do.  i. c@'  .xx  space.  loop.
         else.   i. 1+.  instruction.n>nfa'  over. -.  13  min.                bounds.  do.  i. c@'  .xx  space.  loop.
         then.
   loop. drop.   ;.

:. words'.pf801''  ( -- )    cr.
   get.total.instruction(pf801)  dup.  1+.   0    \ propellerForth  from  pf801.hex
   do.   i.   instruction.n>nfa'    >r.
         cr.   .". ( nfa:"   r@.    5 u.r.   .".   cfa:)"
         r@.   nfa'>cfa'(pf801)     5 u.r.   .".   org t: "    r@.  .id(pf801)
         20 ?y   r@.  c@'  0f and.  7 min.  1+. EVEN.ALIGNED   r@.  over.  2drop.  \  bounds.  do.  i. c@'  .xx  space.  loop.
         27 ?y   r>.  +.            over.   i.  =.
         if.                                           22                      bounds.  do. space. i. 16@'  .xxxx  2 +loop.
         else.   i. 1+.  instruction.n>nfa'  over. -.  22  min.                bounds.  do. space. i. 16@'  .xxxx  2 +loop.
         then.
   loop. drop.   ;.

:. words'.pf801''  ( -- )    cr.
   get.total.instruction(pf801)  dup.  1+.   0    \ propellerForth  from  pf801.hex
   do.   i.   instruction.n>nfa'    >r.
         cr.   .". ( nfa:"   r@.    5 u.r.   .".   cfa:)"
         r@.   nfa'>cfa'(pf801)     5 u.r.   .".   org t: "    r@.  .id(pf801)
         20 ?y   r@.  c@'  0f and.  7 min.  1+. EVEN.ALIGNED \ r@.  over.  2drop.  \  bounds.  do.  i. c@'  .xx  space.  loop.
         27 ?y   r>.  +.            over.   i.  =.
         if.                                           22                      bounds.  do. space. i. 16@'  .xxxx  2 +loop.
         else.   i. 1+.  instruction.n>nfa'  over. -.  22  min.                bounds.  do. space. i. 16@'  .xxxx  2 +loop.
         then.
   loop. drop.   ;.

:. a'.is.subroutine.addr.in.cogram?  ( a' -- f )   90  -.  4  /.     0  swap.  (  127*4+90=52c )
   get.total.instruction(pf801)  0
   do.    dup.    i.   instruction.n>nfa'   nfa'>cfa'(pf801)   16@'   =.  if.  nip.  -1  swap.  leave.  then.
   loop.  drop.   ;.

variable.  xxx

:. .id(cogram)    ( cogram -- )   dup.  180  u<.  if.   drop.  exit.  then.
   >r.  ( 27ce )  last'  @.     xxx  off.        \ propellerForth  from  pf801.hex
   begin.   dup.  nfa'>cfa'(pf801)     16@'   4 *.  90  +.  r@.  =.  if.   dup.  xxx  !.   then.
            dup.  2  -.  16@'    ?dup.
   while.   nip.  cfa'>nfa'(PF801)
   repeat.  drop.   xxx   @.   ?dup.  if.  cr.  24 ?y   .". code  "  .id(pf801)  then.   r>drop.  ;.

:. .id(propForth)  ( nfa' -- )  count'  1f  and.  type'  ;.

propForth?  @.
      #if
:. .id(cogram)     ( cogram -- )    >r.   last'   @.     xxx    off.        \ propForth
   begin.   dup.  NFA'>INSTRUCTION.N(PROPFORTH)   1+.  INSTRUCTION.N>NFA'(PROPFORTH)  over.  -.  4  u<.  >r.
            dup.  nfa'>cfa'(propForth)     16@'  r@.   =.   r>.  and.
            if.   dup.  xxx  !.
            then.
            dup.  2  -.  16@'    ?dup.
   while.   nip.
   repeat.  drop.   xxx   @.   ?dup.  if.  cr.  24 ?y   .". code  "  .id(propForth)  then.   r>drop.  ;.

:. .id(propForth)  ( nfa' -- )  count'  1f  and.  type'  ;.
      #then

:.  d@'  ( a' -- d )  dup.  32@'   swap.  4+.   32@'   ;.
:.  d='  ( d1 d2 -- f )   rot.  =.  if.   =.    else.  2drop.  0  then.  ;.

:.  disassem.macro ( a1' -- a2' )   >r.  \  dup. to.  (a')     >r.
    R@.  32@'          84FF1A04             =.
    R@.  4 +.   64@'   84FF1A04  08BF1D8D  d='
                                    and. if.  cr.  r>.  (4  nip. 34 ?y  .". {2drop}" 0C +.  exit.  then.
    R@.  64@'   083F1D8D  80FF1A04  d='  if.  cr.  r>.  (4  nip. 34 ?y  .". {dup}"    8 +.  exit.  then.
    R@.  64@'   84FF1A04  08BF1D8D  d='  if.  cr.  r>.  (4  nip. 34 ?y  .". {drop}"   8 +.  exit.  then.
    R@.  32@'   80FF1A04             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". {-nip}"   4 +.  exit.  then.
    R@.  32@'   84FF1A04             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". {nip}"    4 +.  exit.  then.
    R@.  32@'   083F1D8D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". S=T"      4 +.  exit.  then.
    R@.  32@'   08BF1D8D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". T=S"      4 +.  exit.  then.
    R@.  32@'   08BF1D8F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". T=R"      4 +.  exit.  then.
    R@.  32@'   083F1D8F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". R=T"      4 +.  exit.  then.
    R@.  32@'   08BF178D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". X=S"      4 +.  exit.  then.
    R@.  32@'   083F198D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". S=Y"      4 +.  exit.  then.
    R@.  32@'   083F258D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". S=temp2"  4 +.  exit.  then.
    R@.  32@'   08BF178F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". X=R"      4 +.  exit.  then.
    R@.  32@'   083F178F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". R=X"      4 +.  exit.  then.
    R@.  32@'   083F158F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". R=X"      4 +.  exit.  then.
    R@.  32@'   083F178D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". S=X"      4 +.  exit.  then.
    R@.  32@'   08BF158F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". ip=R"     4 +.  exit.  then.
    R@.  32@'   08BF198D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". Y=S"      4 +.  exit.  then.
    R@.  32@'   08BF1B8D             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". sp=S"     4 +.  exit.  then.
    R@.  32@'   08BF1F8F             =.  IF.  cr.  r>.  (4  nip. 34 ?y  .". rp=R"     4 +.  exit.  then.
    R>.  ;.
 
:.  4,  >r.  >r.  >r.  c,'  r>. c,'  r>.  c,' r>.  c,'  ;.
:{  sp+4      04 1A FF 80   4,   };
:{  (sp)=T    8D 1D 3F 08   4,   };
:{  {dup}     sp+4    (sp)=T     };

:{  T=(sp)    8D 1D BF 08   4,   };
:{  sp-4      04 1A FF 84   4,   };
:{  {drop}    T=(sp)     sp-4    };

:. sss    ( a1' -- a2' )
   20   0
   do.    dup>r.
          r@.    0   20   within.
          r@.  34c  358   within.  or.
          r@.  398  3a0   within.  or.
          r>.  6b8  6e0   within.  or.
      if.        cr.      (4.not.if'c...  nip.  dup.  20 ?y  .".  )    ********      "     32@'  .xxxxXXXX
                 dup.  0=.  if.  .".   \  "   dup.  32@'  .(decimal)  then.
                 4  +.
      else.      dup.   .id(cogram)   DISASSEM.SPECIAL?  @.
          if.    begin.  dup>r.   disassem.macro  dup.  r>.  =.  until.
          then.  cr.  dis
      then.
   loop.  ;.

:. disassem.cog.program   ( -- )  \.3F***  0  DISASSEM.SPECIAL?  @.  if.  0A  else.  0e  then. 0  do.  sss   loop.  ;.
:. dcp    disassem.cog.program    ;.

:. .head(pf801)  ( nfa' -- )    >r.
   \.3F***
   cr.  r@.  2-.   .".   ( "  6 u.r.  r@.  2-.   16@'   6 u.r.   .".  )"
   cr.  r@.        .".   ( "  6 u.r.  r@.        16@'   6 u.r.   .".  ) t:  "   r>.  .id(pf801)
   \.3F---   ;.

:. n*4+90    ( n -- cog.ram.address' )   4  *.  90  +.  ;.  \  5e --> 208
:. (x-90)/4  ( cog.ram.address' -- n )   90 -.   4  /.  ;.  \ 208 -->  5e

:.  0~1ff>cfa'  ( r -- cfa' )   dup.  200  u<.  if.  2*.  6d0  +.  then.  ;.
:. get.next.nfa'/here'+3 ( nfa' -- )  last'  @.  over.  =.  if.  here' 3 +.  else.  get.next.nfa'  then.  ;.

:. decompile.a.word(pf801)  ( nfa' -- )
   dup.     .head(pf801)
   dup.  get.next.nfa'/here'+3  3  -.  >r.   nfa'>cfa'(pf801)
   begin.    dup.    16@'  ( cfa' )  0=.
   while.    2+.
   repeat.
   begin.       >r.
         cr.    r@.   .".   ( "  6 u.r.  r@.  16@'  dup.  6 u.r.   .".  )"  20 ?y  \ 1a  spaces.
         dup.   0 1ff between.
     if.        drop.
     else.      0~1ff>cfa'   cfa'(pf801)?  ?dup.  if.  cfa'>nfa'(PF801)   .id(pf801)  then.   \ ??????
     then.
         r@.    16@'  ( cfa' )
         case.  0702  of. 2a ?y  r@. 2+.  16@'  .xxxx    4   endof.  \ LIT16
                0014  of. 2a ?y  r@. 2+.  16@'  .xxxx    4   endof.  \ LITERAL
                 936  of. 2a ?y  r@. 2+.  16@'  .xxxx    4   endof.  \ 0branch
                 942  of. 2a ?y  r@. 2+.  16@'  .xxxx    4   endof.  \  branch
                 94e  of. 2a ?y  r@. 2+.  16@'  .xxxx    4   endof.  \ (loop)
                 95a  of. 2a ?y  r@. 2+.  16@'  .xxxx    4   endof.  \ (+loop)
                1a8a  of. 2a ?y  r@. 2+.  count'  tuck.  type'      3 +.  EVEN.ALIGNED  endof.  \ (.")
                20c0  of. 2a ?y  r@. 2+.  count'  drop.  7   type'  3 +.             0a endof.  \ pause
                                                         2   swap.
         endcase.     r@.  16@'   dup.  200  u<.
         if.    dup.  4 *.  90   +.
                3c ?y   .". \  ( cog.RAM:"  swap.  4 u.r.  .".    hub.RAM:"   4 u.r.  .".   n*4+90 )   "
         else.  drop.
         then.  r>.     +.     r@.  over.  <.
   until.       drop.   r>drop.     ;.

:. decompile.whole.words(pf801)  ( -- )   get.total.instruction(pf801)  1+.  0
   do.    i.   instruction.n>nfa'         decompile.a.word(pf801)     key?.  if.  leave.  then.
   loop.  ;.

      propForth?  @.
      #if
:. sss  ( a'1 -- a'2 )   20  0
   do.  \  dup. 18  -.   4 /.  .id(cogram)
           cr.  dis
   loop.   ;.

'.  sss  is.  _sss

:. sss'''  ( a'1 -- a'2 )   20  0
   do.     dup. 18  -.   4 /.  .id(cogram)
           cr.  dis
   loop.   ;.

:. disassem.cog.program  ( -- )   \.3F***  0000  sss  sss  sss  sss  sss  sss  sss   ;.

:. dcp       disassem.cog.program   ;.

:. words'    words'.propForth^LFA'   words'.propForth^8    words'.propForth^16   words'.propForth.decompile   dcp  ;.

      #else
:. words'    words'.pf801  words'.pf801^  words'.pf801^LFA  words'.pf801'    words'.pf801''
             disassem.cog.program   decompile.whole.words(pf801)   ;.
      #then

   #then

propellerForth?  @.
   #if     include  pf801image5.f
        \ include  pf801image1.f

  27ce  last'  !.    27e0  org    0  head.start  !.

:. seee  CFA'.OF' CFA'>NFA'(PF801) DECOMPILE.A.WORD(PF801) ;.



\ conditional structure
:.  if      936    16,'  here'  0 16,'        ;.
:.  ahead   942    16,'  here'  0 16,'        ;.
:.  then    here'  over.    -.   swap.  16!'  ;.
:.  begin   here'  ;.
:.  until   936  16,'  here'   -.  ffff  and.  16,'  ;.
:.  again   942  16,'  here'   -.  ffff  and.  16,'  ;.
:.  else    ahead   swap.   then  ;.
:.  repeat  swap.   again   then  ;.
:.  while   if    ;.

\  hex>  ( paste pf801.hex )      cls  words'.pf801
   #then

  propForth?  @.
   #if      include  PROPFORTHimage1.f
       :.  sss   20  0000  do.  cr.  dis  loop.   ;.
       :.  0   0000         ;.
       :.  1   0001         ;.
       :.  2   0002         ;.
       :. -1   ffffffff     ;.
       :. sc   stack.clear  ;.
       4252  last'  !.
   #then

   pFth?  @.
   #if    include  pFthORG1.f     :.  words'  words'.pFth  ;.    453c  org
   #then

   H1  ( DLL )  \ a words'

   \s
#then

:{  {drop}  { t, }  sp  ldm  };

:. r+4    4  r+#  ;.
:. -;        ret  ;.

  :.  (R)=T    T        (R)=r   ;.

  :.  T=(R)    T  swap.  R=(R)  ;.
  :.  T+(R)    T  swap.  R+(R)  ;.
  :.  T-(R)    T  swap.  R-(R)  ;.
  :.  Tx(R)    T  swap.  Rx(R)  ;.
  :.  To(R)    T  swap.  Ro(R)  ;.
  :.  Tn(R)    T  swap.  Rn(R)  ;.

  :.  T=R      T  swap.  R=R    ;.
  :.  T+R      T  swap.  R+R    ;.
  :.  T-R      T  swap.  R-R    ;.
  :.  TxR      T  swap.  RxR    ;.
  :.  ToR      T  swap.  RoR    ;.
  :.  TnR      T  swap.  RnR    ;.

  :.  T=#      T  swap.  R=#    ;.
  :.  T+#      T  swap.  R+#    ;.
  :.  T-#      T  swap.  R-#    ;.
  :.  Tx#      T  swap.  Rx#    ;.
\ :.  Tx#      T  swap.  Rx#    ;.
  :.  To#      T  swap.  Ro#    ;.
  :.  To#/     T  swap.  Ro#/   ;.
  :.  Tn#      T  swap.  Rn#    ;.
  :.  Tn#/     T  swap.  Rn#/   ;.
  :.  T+T      T  T      r+r    ;.
  :.  T+(T)    T  T      r+(r)  ;.

  :.  T>>#     t  swap.  r>>#   ;.
  :.  T=#/     t  swap.  r=#/   ;.

  :.  Y+t      Y     t   r+r    ;.



\ :.  s=#     sp  swap. (r)=#   ;.


headless?  @.
#if     :.   ef:    t:   ;.
#then

  :. (R+#)=#   1  swap.  R=#     1 (R+#)=R  ;.


  :. (R)=#     1  swap.  R=#   0 1 (R+#)=R  ;.
  :. (R)-#        swap.  Y  swap.  R=#   0 Y R=(R)       0  swap. R-#       Y  0 (R)=R    ;.
  :. (R+#)oR   -rot. 2dup.  2>r.   0  -rot.  r=(r+#)     0  swap. RoR     2r>. 0 (R+#)=R  ;.

\ :. R=(#)     dup.  1000  u<.  if.   R=(#)   else.  Y  swap.  R=#    Y  R=(R)  then.      ;.
\ :. R=(#)     Y  swap.  R=#    Y  R=(R)        ;.
\ :. R=(#)    >r. dup.  r>.   r=#  dup.  r=(r)  ;.
\ :. R=(#)    2dup.  r=#  drop.    dup.  r=(r)  ;.
  :. t=(r)     t  swap.  r=(r)  ;.
  :. (r)=t     t         (r)=r  ;.

  :. (#)n#/   swap. Y swap. R=#   0 Y R=(R)  0  swap. Rn#/   Y 0 (R)=R ;.
  :. (#)n1,tst      Y swap. R=#   0 Y R=(R)  0 1 Rn#,tst  ;.
  :. (#)n2,tst      Y swap. R=#   0 Y R=(R)  0 2 Rn#,tst  ;.

  :. (#)n1/    1  (#)n#/   ;.
  :. (R)-1     1  (R)-#    ;.

  :. (R+#)o#   1 swap. R=#     1 (R+#)oR  ;.    \ ????????????


  :.  s=#     sp  swap. (r)=#   ;.   \ 2013,10,22

  :{ push.LR   b500 16,'   };

:{  r-t      t     r-r     ;.
:{  r0-t     0     r-t     };
:{  r0:t     0  t  r:r     };
:{  r0=t     0  t  r=r     };
:{  t=r0     t  0  r=r     };

:{  t=r1     t  1  r=r     };
:{  t=r2     t  2  r=r     };
:{  t=r3     t  3  r=r     };
:{  t=r4     t  4  r=r     };
:{  t=r5     t  5  r=r     };
:{  t=r6     t  6  r=r     };
:{  t=r7     t  7  r=r     };


\ :{  (r0)=r1  0  1  (r)=r   };
:{  TnT,tst  t  t  RnR,tst };
:{  T*R0     t  0  R*R     };
:{  R0*T     T*R0          };

20001000   org

:{  {if'<>}        here'  here'  z=1?      };    -4 allot'   drop.
:{  {if'=}         here'  here'  z=0?      };    -4 allot'   drop.
:{  {if'u<}        here'  here'  c=1?      };    -4 allot'   drop.
:{  {if'u>=}       here'  here'  c=0?      };    -4 allot'   drop.
:{  {if'+}         here'  here'  n=1?      };    -4 allot'   drop.
:{  {if'-}         here'  here'  n=0?      };    -4 allot'   drop.
:{  {if'nv}        here'  here'  v=1?      };    -4 allot'   drop.
:{  {if'v}         here'  here'  v=0?      };    -4 allot'   drop.


comment:
:{  {if'u<=}       here'  here'  c=1;z=0?  };    -4 allot'   drop.
:{  {if'u>}        here'  here'  c=0;z=1?  };    -4 allot'   drop.
:{  {if'<}         here'  here'  n=v?      };    -4 allot'   drop.
:{  {if'>=}        here'  here'  n<>v?     };    -4 allot'   drop.
:{  {if'>}         here'  here'  z=0;n=v?  };    -4 allot'   drop.
:{  {if'<=}        here'  here'  z=1;n<>v  };    -4 allot'   drop.

:{  {if'ne}        here'  here'  z=1?      };    -4 allot'   drop.
:{  {if'eq}        here'  here'  z=0?      };    -4 allot'   drop.
:{  {if'lo}        here'  here'  c=1?      };    -4 allot'   drop.
:{  {if'hs}        here'  here'  c=0?      };    -4 allot'   drop.
:{  {if'pl}        here'  here'  n=1?      };    -4 allot'   drop.
:{  {if'mi}        here'  here'  n=0?      };    -4 allot'   drop.
:{  {if'vc}        here'  here'  v=1?      };    -4 allot'   drop.
:{  {if'vs}        here'  here'  v=0?      };    -4 allot'   drop.
:{  {if'ls}        here'  here'  c=1;z=0?  };    -4 allot'   drop.
:{  {if'hi}        here'  here'  c=0;z=1?  };    -4 allot'   drop.
:{  {if'lt}        here'  here'  n=v?      };    -4 allot'   drop.
:{  {if'ge}        here'  here'  n<>v?     };    -4 allot'   drop.
:{  {if'le}        here'  here'  z=0;n=v?  };    -4 allot'   drop.
:{  {if'gt}        here'  here'  z=1;n<>v  };    -4 allot'   drop.


:{  {if'z=0}       here'  here'  z=1?      };    -4 allot'   drop.
:{  {if'z=1}       here'  here'  z=0?      };    -4 allot'   drop.
:{  {if'c=0}       here'  here'  c=1?      };    -4 allot'   drop.
:{  {if'c=1}       here'  here'  c=0?      };    -4 allot'   drop.
:{  {if'n=0}       here'  here'  n=1?      };    -4 allot'   drop.
:{  {if'n=1}       here'  here'  n=0?      };    -4 allot'   drop.
:{  {if'v=0}       here'  here'  v=1?      };    -4 allot'   drop.
:{  {if'v=1}       here'  here'  v=0?      };    -4 allot'   drop.
:{  {if'c=0;z=1}   here'  here'  c=1;z=0?  };    -4 allot'   drop.
:{  {if'c=1;z=0}   here'  here'  c=0;z=1?  };    -4 allot'   drop.
:{  {if'n<>v}      here'  here'  n=v?      };    -4 allot'   drop.
:{  {if'n=v}       here'  here'  n<>v?     };    -4 allot'   drop.
:{  {if'z=1;n<>v}  here'  here'  z=0;n=v?  };    -4 allot'   drop.
:{  {if'z=0;n=v}   here'  here'  z=1;n<>v  };    -4 allot'   drop.



here'  :{  {until'<>}                   z=1?      };
here'  :{  {until'=}                    z=0?      };
here'  :{  {until'u<}                   c=1?      };
here'  :{  {until'u>=}                  c=0?      };
here'  :{  {until'+}                    n=1?      };
here'  :{  {until'-}                    n=0?      };
here'  :{  {until'nv}                   v=1?      };
here'  :{  {until'v}                    v=0?      };
here'  :{  {until'u<=}                  c=1;z=0?  };
here'  :{  {until'u>}                   c=0;z=1?  };
here'  :{  {until'<}                    n=v?      };
here'  :{  {until'>=}                   n<>v?     };
here'  :{  {until'>}                    z=0;n=v?  };
here'  :{  {until'<=}                   z=1;n<>v? };

here'  :{  {until'ne}                   z=1?      };
here'  :{  {until'eq}                   z=0?      };
here'  :{  {until'lo}                   c=1?      };
here'  :{  {until'hs}                   c=0?      };
here'  :{  {until'pl}                   n=1?      };
here'  :{  {until'mi}                   n=0?      };
here'  :{  {until'vc}                   v=1?      };
here'  :{  {until'vs}                   v=0?      };
here'  :{  {until'ls}                   c=1;z=0?  };
here'  :{  {until'hi}                   c=0;z=1?  };
here'  :{  {until'lt}                   n=v?      };
here'  :{  {until'ge}                   n<>v?     };
here'  :{  {until'le}                   z=0;n=v?  };
here'  :{  {until'gt}                   z=1;n<>v? };


here'  :{  {until'z=0}                  z=1?      };
here'  :{  {until'z=1}                  z=0?      };
here'  :{  {until'c=0}                  c=1?      };
here'  :{  {until'c=1}                  c=0?      };
here'  :{  {until'n=0}                  n=1?      };
here'  :{  {until'n=1}                  n=0?      };
here'  :{  {until'v=0}                  v=1?      };
here'  :{  {until'v=1}                  v=0?      };
here'  :{  {until'c=0;z=1}              c=1;z=0?  };
here'  :{  {until'c=1;z=0}              c=0;z=1?  };
here'  :{  {until'n<>v}                 n=v?      };
here'  :{  {until'n=v}                  n<>v?     };
here'  :{  {until'z=1;n<>v}             z=0;n=v?  };
here'  :{  {until'z=0;n=v}              z=1;n<>v? };
comment;



 

:{  SP-8     FSP   8  R-#  };
:{  SP-0c    FSP  0c  R-#  };
:{  SP-10    FSP  10  R-#  };

:{  s=R0     fSP  0  0  (R+#)=r  };
:{  R0=s     0  fSP  0  r=(R+#)  };
:{  s'=t     fsp  4  t  (R+#)=r  };

  variable.  flash.memory.offset         b000  extra.offset  @.  -.  flash.memory.offset  !.



mecrisp32F407?        @.  #if     b800  flash.memory.offset  @.  -.                org  #then  
STM32F407.sF?         @.  #if     b800  flash.memory.offset  @.  -.  0 ( 08000000 ) +.  org  #then
STELLARIS.LAUNCHPAD?  @.  #if     b800  flash.memory.offset  @.  -.                org  #then
mecrisp4F120?         @.  #if     b800  flash.memory.offset  @.  -.                org  #then

:{  pf.3=0        2  53fc  r=#     2  4002  rt=#    2  8  (r)n#/   };   \  (r2+3FC)n8/
:{  pf.3=1        2  53fc  r=#     2  4002  rt=#    2  8  (r)o#    };   \  (r2+3FC)o8

:{  (r2+3FC)n8/   pf.3=0   };
:{  (r2+3FC)o8    pf.3=1   };

:{  push.LR   b500 16,'    };  \    { lr }  push{}  };
:{  w+t       w  t  r+r    };

:. t>>r     t swap. r>>r   ;.   \ t>>r0

  here'  24  -.  org
  t:   start              ret'
  t:   1+        {1+}     ret'
  t:   1-        {1-}     ret' 
  t:   2+        {2+}     ret'
  t:   2-        {2-}     ret'
  t:   lshift    0 t r=r  {drop}  t 0 r<<r     ret'
  t:   rshift    0 t r=r  {drop}  t 0 r>>r     ret'
  t:  arshift    0 t r=r  {drop}  t 0 r,a>>r   ret'    

:.   T:R0           t  0  r:r  ;.
:.   R0:T           0  t  r:r  ;.
:.   T=FFFFFFFF     t=0/       ;.

it?  @.
#if
                                   t:  >                                                       cfa= 364
  (  00000364  01 CF             )                  nip>r0
  (  00000366  B0 42             )                  0 t r:r  \  R0:T
  (  00000368  CC BF             )                  it'=.>.....itegt
  (  0000036A  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000036E  00 26             )                  T=0
  (  00000370  70 47             )                  ret'
#else
                                   t:  >                                                       cfa= BBC
  (  00000BBC  01 CF             )              nip>r0   \  ldm     { R0, } sp
  (  00000BBE  B0 42             )      t 0 r:r \        R0:T
  (  00000BC0  02 D5             )      if'n=1  \       BC8....n=0?(+?)
  (  00000BC2  01 26             )              T=0/
  (  00000BC6  70 47             )              ret'
  (  00000BC8  00 26             )      then'   t=0
  (  00000BC4  76 42             )      \  t t 0  rsb_r,r,#  \   rsb_T,T,0
  (  00000BCA  70 47             )              ret'
#then

                                     t:  nex.   \ swiftx_Forth_styled nex.
  (  00000BA0  04 BC             )              pop.r2
  (  00000BA2  01 3A             )              R2-1
  (  00000BA4  04 B4             )              push.r2
  (  00000BA6  00 2A             )              2  0  r:#  \  R2:0                                                            \
  (  00000BA8  01 D5             )       if'n=1  \      BAE....n=0?(+?)
  (  00000BAA  0D F2 04 0D       )              {r>drop}   \  RD=RD+4
  (  00000BAE  70 47             )       then'  ret'       \  jmp_RE

\  :.  next   0  '' nex.   1+.   ldri    0  call_r    n=0?   ;.
  \ ------------------------------------------------------------------------
                                    t:  >=                                                      cfa= 320
  (  00000320  01 CF             )                  nip>r0
  (  00000322  B0 42             )                  R0:T
  (  00000324  B4 BF             )      bfb4 16,' \ it'=.<.....itelt
  (  00000326  00 26             )                  T=0
  (  00000328  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000032C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  <=                                                      cfa= 338
  (  00000338  01 CF             )                  nip>r0
  (  0000033A  B0 42             )                  R0:T
  (  0000033C  CC BF             )      bfcc 16,' \ it'=.>.....itegt
  (  0000033E  00 26             )                  T=0
  (  00000340  4F F0 FF 36       )                  T=FFFFFFFF
  (  00000344  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  u>=                                                     cfa= 37C
  (  0000037C  01 CF             )                  nip>r0
  (  0000037E  D6 EB 00 06       )      t t 0 r=r-r \  sub_T,T,R0<<0
  (  00000382  B6 41             )                  t-t-c
  (  00000384  F6 43             )                  {invert}
  (  00000386  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  u<=         nip>r0                                            cfa= 394
  (  00000394  36 1A             )                  T-R0
  (  00000396  B6 41             )                  t-t-c
  (  00000398  F6 43             )                  {invert}
  (  0000039A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  u<                                                      cfa= 3A8
  (  000003A6  01 CF             )                  nip>r0
  (  000003A8  D6 EB 00 06       )      t 0 r-r \            sub_T,T,R0<<0
  (  000003AC  B6 41             )                  t-t-c
  (  000003AE  70 47             )                  ret'
  (  000003BA  01 CF             )                  nip>r0
  \ ------------------------------------------------------------------------
                                    t:  u>          nip>r0                                            cfa= 3BC
  (  000003BC  36 1A             )      t t 0 r=r-r \     T=T-R0
  (  000003BE  B6 41             )                  t-t-c
  (  000003C0  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  <>                                                      cfa= 3CC
  (  000003CC  01 CF             )                  nip>r0
  (  000003CE  36 1A             )                  T-R0
  (  000003D0  18 BF             )      bf18 16,' \ it'<>......itne
  (  000003D2  4F F0 FF 36       )                  T=FFFFFFFF
  (  000003D6  70 47             )                  ret'
  \ ------------------------------------------------------------------------
comment:

                                    t:  umax                                                    cfa= 420
  (  0000041E  01 CF             )                  nip>r0
  (  00000420  B0 42             )                  R0:T
  (  00000422  88 BF             )      bf88 16,' \ it'u>......ithi
  (  00000424  06 46             )                  T=R0
  (  00000426  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  umin                                                    cfa= 434
  (  00000434  01 CF             )                  nip>r0
  (  00000436  B0 42             )                  R0:T
  (  00000438  38 BF             )      bf38 16,' \ it'c=0.....itcc
  (  0000043A  06 46             )                  T=R0
  (  0000043C  70 47             )                  ret'
comment;


 

\  :.  next   0  '' nex.   1+.   ldri    0  call_r    n=0?   ;.

:.  for     {>r}  begin'   ;.
:.  next    nex.  n=0?     ;.

:.  y+#       y  swap.   r+#    ;.
:.  y=(y)     y  y       r=(r)  ;.

:.  (R)=(R+4),p      Y swap. 4 r=(r+#),p  Y (r)=r  ;.    :{ (t)=s,drop  t sp (R)=(R+4),p  };

:{  (t)=s    0 sp r=(r)   t 0 (r)=r  };

:{  {!}      (t)=s  {nip}  {drop}    };
:{  {c!}     4630 16,'   CF42 16,'   7001 16,'  }; \  (t)=s  {nip}  {drop}    };

:.  sp+#   sp  swap.  r+#  ;.
:.  sp-#   sp  swap.  r-#  ;.
:.  Y=sp   Y   sp     r=r  ;.
:.  t=y    t   y      r=r  ;.

:.  Yn#/      Y   swap.  Rn#/        ;.
:.  if'Y<>#   Y   swap.  r:#  if'<>  ;.
:.  if'Y<>0   Y   00     r:#  if'<>  ;.
:.  if'Y<>r   Y   swap.  r:r  if'<>  ;.
:.  r=t       t   r=r                ;.
:.  Y=r       Y   swap.  r=r         ;.
:.  r=Y       Y          r=r         ;.
:.  Y=lr      Y   lr     r=r         ;.
:.  y+#       y   swap.  r+#         ;.
:.  y=t       y   t      r=r         ;.
:.  Yn#/      y   swap.  Rn#/        ;.
:.  pc=y      pc  Y      r=r         ;.
:.  Y=t+#     Y   t rot. r=r+#       ;.
:.  t=Y+#     t   Y rot. r=r+#       ;.

:.   t:#      t   swap.  r:#         ;.
:.   t:t      t   t      r:r         ;.

:{  nip>r0        { r0,         }  sp  ldm  };
:{  nip>r0,r1     { r0,    r1,  }  sp  ldm  };
:{  nip>r0,T      { r0,     t,  }  sp  ldm  };   :{  r0=s,2drop              nip>r0,T     };
:{  nip>r1,T      { r1,     t,  }  sp  ldm  };   :{  r1=s,2drop              nip>r1,T     };
:{  nip>r2,T      { r2,     t,  }  sp  ldm  };   :{  r2=s,2drop              nip>r2,T     };
:{  nip>r0,r1,T   { r0, r1, t,  }  sp  ldm  };   :{  r0=s,r1=s',3drop        nip>r0,r1,T  };
:{  nip>r0,r1,r2  { R0, R1, R2, }  sp  ldm  };   :{  r0=s,r1=s',r2=s'',3nip  nip>r0,r1,T  };

:{  {4/}     t  t  2  R=R,a>>#       };

:.  t=t,s    t  t     r=r,s          ;.
:.  t=t,s    t  t  0  R=R<<#,s       ;.
















:.  t=s,nip       { t,          }  sp  ldm  };

:{  {drop}        t=s,nip              };

:{  nip>r0        { r0,         }  sp  ldm  };
:{  nip>r1        { r1,         }  sp  ldm  };
:{  nip>r2        { r2,         }  sp  ldm  };
:{  nip>r3        { r3,         }  sp  ldm  };
:{  nip>r4        { r4,         }  sp  ldm  };
:{  nip>r5        { r5,         }  sp  ldm  };
:{  nip>r6        { r6,         }  sp  ldm  };   \  {drop}
:{  nip>r7        { r7,         }  sp  ldm  };
:{  {drop}        { t,          }  sp  ldm  };
:{ nop  b080 16,' };  \  :{  {swap}  r0=s s=t t=r0 };
 
cortex.m0?  @.
#if         :.  r=(r+#)   over.  rp  =.  if.  nip.  r=(rp+#)   else.  r=(r+#)   then.  ;.
#then

nuc442eF?  @.   \  drop.  0
#if
#else
   include  BLINKYLST864.f
#then

variable.  leave.ahead.20?
variable.  leave.ahead.21?
variable.  leave.ahead.22?
variable.  leave.ahead.23?
variable.  loop.layer

:.  (leave)   8  rp+#   ;.
:.   leave    (leave)   leave.ahead.20? on.      ahead' >20  ;.
:.   leave,   (leave)   leave.ahead.21? on.      ahead' >21  ;.
:.   leave,,  (leave)   leave.ahead.22? on.      ahead' >22  ;.
:.   leave,,, (leave)   leave.ahead.23? on.      ahead' >23  ;.


:.    loop     (loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. v=0?  20> then' else.  v=0?     then.  ;.  immediate.
:.    loop,    (loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. v=0?  21> then' else.  v=0?     then.  ;.  immediate.
:.    loop,,   (loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. v=0?  22> then' else.  v=0?     then.  ;.  immediate.
:.    loop,,,  (loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. v=0?  23> then' else.  v=0?     then.  ;.  immediate.

:.   +loop,   (+loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. v=0?  21> then' else.  v=0?     then.  ;.  immediate.
:.   +loop,,  (+loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. v=0?  22> then' else.  v=0?     then.  ;.  immediate.
:.   +loop,,, (+loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. v=0?  23> then' else.  v=0?     then.  ;.  immediate.

comment:
\    ?loop     (loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. v=0?  20> then' else.  v=0? 20> then' then.  ;.  immediate.
:.   ?loop,    (loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. v=0?  21> then' else.  v=0? 21> then' then.  ;.  immediate.
:.   ?loop,,   (loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. v=0?  22> then' else.  v=0? 22> then' then.  ;.  immediate.
:.   ?loop,,,  (loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. v=0?  23> then' else.  v=0? 23> then' then.  ;.  immediate.

\   ?+loop    (+loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. v=0?  20> then' else.  v=0? 20> then' then.  ;.  immediate.
:.  ?+loop,   (+loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. v=0?  21> then' else.  v=0? 21> then' then.  ;.  immediate.
:.  ?+loop,,  (+loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. v=0?  22> then' else.  v=0? 22> then' then.  ;.  immediate.
:.  ?+loop,,, (+loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. v=0?  23> then' else.  v=0? 23> then' then.  ;.  immediate.

\     loop     (loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?  20> then' else.  c=0?     then' then.  ;.  immediate.
:.    loop,    (loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?  21> then' else.  c=0?     then' then.  ;.  immediate.
:.    loop,,   (loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?  22> then' else.  c=0?     then' then.  ;.  immediate.
:.    loop,,,  (loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?  23> then' else.  c=0?     then' then.  ;.  immediate.

\    +loop    (+loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?  20> then' else.  c=0?     then' then.  ;.  immediate.
:.   +loop,   (+loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?  21> then' else.  c=0?     then' then.  ;.  immediate.
:.   +loop,,  (+loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?  22> then' else.  c=0?     then' then.  ;.  immediate.
:.   +loop,,, (+loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?  23> then' else.  c=0?     then' then.  ;.  immediate.

\    ?loop     (loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?  20> then' else.  c=0? 20> then' then.  ;.  immediate.
:.   ?loop,    (loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?  21> then' else.  c=0? 21> then' then.  ;.  immediate.
:.   ?loop,,   (loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?  22> then' else.  c=0? 22> then' then.  ;.  immediate.
:.   ?loop,,,  (loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?  23> then' else.  c=0? 23> then' then.  ;.  immediate.

\   ?+loop    (+loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?  20> then' else.  c=0? 20> then' then.  ;.  immediate.
:.  ?+loop,   (+loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?  21> then' else.  c=0? 21> then' then.  ;.  immediate.
:.  ?+loop,,  (+loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?  22> then' else.  c=0? 22> then' then.  ;.  immediate.
:.  ?+loop,,, (+loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?  23> then' else.  c=0? 23> then' then.  ;.  immediate.


:.  c=0?(ljmp)    if'c=0  ljmp  then'  ;.
\     loop(ljmp)     (loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?(ljmp)  20> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.
:.    loop(ljmp),    (loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?(ljmp)  21> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.
:.    loop(ljmp),,   (loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?(ljmp)  22> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.
:.    loop(ljmp),,,  (loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?(ljmp)  23> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.

\    +loop(ljmp)    (+loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?(ljmp)  20> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.
:.   +loop(ljmp),   (+loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?(ljmp)  21> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.
:.   +loop(ljmp),,  (+loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?(ljmp)  22> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.
:.   +loop(ljmp),,, (+loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?(ljmp)  23> then' else.  c=0?(ljmp)     then' then.  ;.  immediate.

\    ?loop(ljmp)     (loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?(ljmp)  20> then' else.  c=0?(ljmp) 20> then' then.  ;.  immediate.
:.   ?loop(ljmp),    (loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?(ljmp)  21> then' else.  c=0?(ljmp) 21> then' then.  ;.  immediate.
:.   ?loop(ljmp),,   (loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?(ljmp)  22> then' else.  c=0?(ljmp) 22> then' then.  ;.  immediate.
:.   ?loop(ljmp),,,  (loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?(ljmp)  23> then' else.  c=0?(ljmp) 23> then' then.  ;.  immediate.

\   ?+loop(ljmp)    (+loop)  leave.ahead.20?  @. if.  leave.ahead.20?  off. c=0?(ljmp)  20> then' else.  c=0?(ljmp) 20> then' then.  ;.  immediate.
:.  ?+loop(ljmp),   (+loop)  leave.ahead.21?  @. if.  leave.ahead.21?  off. c=0?(ljmp)  21> then' else.  c=0?(ljmp) 21> then' then.  ;.  immediate.
:.  ?+loop(ljmp),,  (+loop)  leave.ahead.22?  @. if.  leave.ahead.22?  off. c=0?(ljmp)  22> then' else.  c=0?(ljmp) 22> then' then.  ;.  immediate.
:.  ?+loop(ljmp),,, (+loop)  leave.ahead.23?  @. if.  leave.ahead.23?  off. c=0?(ljmp)  23> then' else.  c=0?(ljmp) 23> then' then.  ;.  immediate.
comment;
\ :  yy    do drop  leave  loop  dup  ;
\ :  yyy   9  3  do  i .  i  7  =  if  leave  then   loop   dup  ;
\ :  nn  8 3 do i . i 6 = if leave then  999 996 do i . loop i 100 + . loop  123 dup  ;

\ :. ?do,      (?do)     if'a<>0 >21   here'  ;.
\ :. ?do,,     (?do)     if'a<>0 >22   here'  ;.
\ :. ?do,,,    (?do)     if'a<>0 >23   here'  ;.

\ :  test.?do,,,?loop,,,    ?do,,,   ?loop,,,   ;         see  test.?do,,,?loop,,,
\ :  test.?do,,,?+loop,,,   ?do,,,  ?+loop,,,   ;         see  test.?do,,,?+loop,,,
\ ******************************************************************************************
                                   :{  {0<}   TnT,tst
  (  20003616  02 D5             )         if'- \ n=0? pl?       \ 20003616 --> 2000361E  **************
  (  20003618  01 26             )                  T=-1
  (  2000361C  70 47             )         else'                 \ 20003616 --> 2000361E  **************
  (  2000361E  00 26             )                  T=0                                                         \
  (  20003620  70 47             )         then'    };
 

:.  :'   ef:            ;.    \  :.  :  ef:  (+target)  on.  ;.

:.  :    ef:   push.lr  ;.



:. ."       ."|:       ;.
:. $"       $"|:       ;.
:. abort"   abor.":    ;.

variable.  stack.depth.check?                   stack.depth.check?  on.
variable.  stack.depth
:.  :+     stack.depth.check?  @.  if.  depth.  stack.depth  !.   then.    ef:   push.lr  ;.
:.  ;+     stack.depth.check?  @.  if.  depth.  stack.depth  @.   <>.  if.
           cr.  .".  *** stack changed ***"  cr.  then.  then.  ;.

VARIABLE.  cfa'.of.;
''  ;      cfa'.of.;   !.

:.  ;    ret   RESOLVE.DATA.PENDED  ;.    \  :.  ;  ret  (+target)  off. ;.
:.  ;'   ret'  RESOLVE.DATA.PENDED  ;.    \  :.  ;  ret' (+target)  off. ;.

\  vocabulary  target     target definitions     target     forth  \  ????????????
\  :.  .s    .s.  ;.                                      \ forth

    :. pc<data  ( from len   -- )  bounds.  do.  COMnKEY   i.  c!'   loop.  ;.

 

  defer   _dsv'

  :.  sv>pc'  ( -- )   232." sv>pc"
      0        53
      do.      COMnKEY   SYSTEM.VARIABLE.BASE.IN.RAM  @.  i.  +.   c!'  -1
      +loop.   _dsv'   ;.

  :.  data>pc' ( from len -- )   2dup.   1-.   swap.  number>232    number>232   232." data>pc"
      bounds.  swap.
      do.      COMnKEY    i.   c!'  -1
      +loop.   ;.

 
  :.  dbg   dbg.  ;.

  2   to.   <<byte>>
 
variable.  26c?       26c?  on.      \ <---  blinky.hex

cortex.m4?  @.   \  drop.  0
#if        \  include uart_echoImage3.f       7101  0b8  16!'  \   ????  original  0285
   26c?  @.
   #if
   insert{     0   stm32f407.sF?  @.  #if  0 ( 08000000 )  +.  #then   org

  (      0 )   000 | 000 | 002 | 06D | 06D | 002 | 000 | 000 | 081 | 002 | 000 | 000 | 083 | 002 | 000 | 000 |
  (     10 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 000 | 000 | 000 | 000 |
  (     20 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     30 )   085 | 002 | 000 | 000 | 000 | 000 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     40 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     50 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     60 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     70 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     80 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     90 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     A0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     B0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     C0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     D0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     E0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (     F0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    100 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    110 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    120 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    130 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    140 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    150 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    160 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    170 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    180 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    190 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    1A0 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    1B0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    1C0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    1D0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    1E0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    1F0 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    200 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 000 | 000 | 000 | 000 |
  (    210 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    220 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    230 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    240 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    250 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 |
  (    260 )   085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 085 | 002 | 000 | 000 | 04E | 0F6 | 088 | 050 |
  (    270 )   0CE | 0F2 | 000 | 000 | 001 | 068 | 041 | 0F4 | 070 | 001 | 001 | 060 | 000 | 0F0 | 004 | 0B8 |
  (    280 )   0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 | 000 | 000 | 0DF | 0F8 | 00C | 0D0 | 000 | 0F0 | 006 | 0F8 |
  (    290 )   000 | 048 | 000 | 047 | 0E1 | 002 | 000 | 000 | 000 | 001 | 000 | 020 | 006 | 04C | 007 | 04D |
  (    2A0 )   006 | 0E0 | 0E0 | 068 | 040 | 0F0 | 001 | 003 | 094 | 0E8 | 007 | 000 | 098 | 047 | 010 | 034 |
  (    2B0 )   0AC | 042 | 0F6 | 0D3 | 0FF | 0F7 | 0EC | 0FF | 03C | 003 | 000 | 000 | 04C | 003 | 000 | 000 |
  (    2C0 )   002 | 0E0 | 008 | 0C8 | 012 | 01F | 008 | 0C1 | 000 | 02A | 0FA | 0D1 | 070 | 047 | 070 | 047 |
  (    2D0 )   000 | 020 | 001 | 0E0 | 001 | 0C1 | 012 | 01F | 000 | 02A | 0FB | 0D1 | 070 | 047 | 000 | 000 |
  (    2E0 )   011 | 048 | 020 | 021 | 001 | 060 | 000 | 068 | 010 | 049 | 04F | 0F0 | 008 | 000 | 008 | 060 |
  (    2F0 )   00F | 049 | 008 | 060 | 00F | 04A | 010 | 049 | 0D2 | 0F8 | 0FC | 003 | 040 | 0F0 | 008 | 000 |
  (    300 )   0C2 | 0F8 | 0FC | 003 | 04F | 0F0 | 000 | 000 | 000 | 0F1 | 001 | 000 | 088 | 042 | 0FB | 0D3 |
  (    310 )   0D2 | 0F8 | 0FC | 003 | 020 | 0F0 | 008 | 000 | 0C2 | 0F8 | 0FC | 003 | 000 | 020 | 040 | 01C |
  (    320 )   088 | 042 | 0FC | 0D3 | 0E8 | 0E7 | 000 | 000 | 008 | 0E1 | 00F | 040 | 000 | 054 | 002 | 040 |
  (    330 )   01C | 055 | 002 | 040 | 000 | 050 | 002 | 040 | 040 | 00D | 003 | 000 | 04C | 003 | 000 | 000 |
  (    340 )   000 | 000 | 000 | 020 | 000 | 001 | 000 | 000 | 0D0 | 002 | 000 | 000 |

   }insert
   #then
#then









  \ -------------------------------------------------------------------------------
  (  C0E6  D0 C0             )
  (  C0E8  47 3F 62 72 61    )   ef:' ?branch(ram)                                     cfa= C0F0
  (  C0F2  34 B3             )        Y=t  \  r6=T         \  T  RnFFFF.tst
  (  C0F4  34 45             )        {drop}        \  T      sp R=(R+)
  (  C0F6  08 24             )        if'Y<>0       \      C108  z=1?''
  (  C0F8  26 53             )            re+4      \         Y  R+4
  (  C0FA  00 46             )            ret'      \  pc     Y  R=R
                                          compile-only'
  \ -------------------------------------------------------------------------------
  (  C0FC  E8 C0             )
  (  C0FE  46 62 72 61 6E    )   ef:' branch(ram)                                      cfa= C106
  (  C106  36 41             )        then'   Y=re    Yn1/        \    pop.Y  \  Y      rp  R=(R+)
  (  C108  20 46             )        Y=(Y)   Y+1     pc=Y        \    pc=(Y)              \  pc      Y  R=(R)
                                              compile-only'


comment:
  (  9120  91 02          )
  (  9122  83 46 4F 52    )   :. FOR
  (  9126  CD 90 D8       )
  (  9129  CD 82 2B       )      >r  \  cfa'.of.>r   @.  rcall    \  >R
  (  912C  CC 87 E9       )                     HERE'  ;.     ( immediate. ) \  jmp
  \ --------------------------------------------------------------------------------
\ (  912F  91 22          )
\ (  9131  84 4E 45 58 54 )   :. NEXT
\ (  9136  CD 90 D8       )                  \  COMPILE
\                                cfa'.of.nex. @.  rcall  \     nex.     \  1234 16,' \  01 c,'  96 C,'    \ 8141 CALL  \   0196    next   nex.
\ (  913C  CC 90 93       )                     32,'     ;.   ( immediate. ) \ jmp
comment;












   :.  next   0  '' nex.   1+.   ldri    0  call_r    n=0?   ;.
  \ --------------------------------------------------------------------------------
  (  913F  91 31          )
  (  9141  85 42 45 47 49 )   :. BEGIN
  (  9147  CC 87 E9       )                     HERE'  ;.   ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  914A  91 41          )
  (  914C  85 55 4E 54 49 )   :. UNTIL  optimize? @.
                                        if.     t:0  {drop}  z=1?
                                        else.
  (  9152  CD 90 D8       )                  \  COMPILE
  (  9155  CD 81 60       )                     ?branch
  (  9158  CC 90 93       )                     32,'
                                        then.   ;. ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  915B  91 4C          )
  (  915D  85 41 47 41 49 )   :. AGAIN  optimize? @.
                                        if.     again'
                                        else.
  (  9163  CD 90 D8       )                  \  COMPILE
  (  9166  CD 81 77       )                     branch  \ here'  -.  ffff  and.
  (  9169  CC 90 93       )                     32,'
                                        then.   ;.   ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  916C  91 5D          )
  (  916E  82 49 46       )   :. IF     optimize? @.
                                        if.     t:0  {drop}  here'  here'  z=1?    \  z=0? <-- wrong
                                        else.
  (  9171  CD 90 D8       )                  \  COMPILE
  (  9174  CD 81 60       )                     ?branch
  (  9177  CD 87 E9       )                     HERE'
  (  917A  CD 87 10       )                     0000
  (  917D  CC 90 93       )                     32,'
                                        then.   ;. ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  9180  91 6E          )
  (  9182  84 54 48 45 4E )   :. THEN   optimize? @.
                                        if.    then'
                                        else.
  (  9187  CD 87 E9       )                     HERE'  \  over.  -.  ffff  and.
  (  918A  CD 82 72       )                     SWAP.
  (  918D  CC 81 9E       )                     32!'
                                        then.   ;. ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  9190  91 82          )
  (  9192  84 45 4C 53 45 )   :. ELSE   optimize?  @.
                                        if.     else'
                                        else.
  (  9197  CD 90 D8       )                  \  COMPILE
  (  919A  CD 81 77       )                     branch
  (  919D  CD 87 E9       )                     HERE'
  (  91A0  CD 87 10       )                     0000
  (  91A3  CD 90 93       )                     32,'
  (  91A6  CD 82 72       )                     SWAP.
  (  91A9  CD 87 E9       )                     HERE'  \  over.  -.  ffff  and.
  (  91AC  CD 82 72       )                     SWAP.
  (  91AF  CC 81 9E       )                     32!'
                                        then.   ;. ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  91B2  91 92          )
  (  91B4  85 41 48 45 41 )   :. AHEAD  optimize? @.
                                        if.     ahead'
                                        else.
  (  91BA  CD 90 D8       )                  \  COMPILE
  (  91BD  CD 81 77       )                     branch
  (  91C0  CD 87 E9       )                     HERE'
  (  91C3  CD 87 10       )                     0000
  (  91C6  CC 90 93       )                     32,'
                                        then.   ;. ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  91C9  91 B4          )
  (  91CB  85 57 48 49 4C )   :. WHILE  optimize? @.
                                        if.     t:0   {drop}   if'z=0
                                        else.
  (  91D1  CD 90 D8       )                  \  COMPILE
  (  91D4  CD 81 60       )                     ?branch
  (  91D7  CD 87 E9       )                     HERE'
  (  91DA  CD 87 10       )                     0000
  (  91DD  CD 90 93       )                     32,'
  (  91E0  CC 82 72       )                     SWAP.
                                        then.   ;. ( immediate. ) \ jmp
  \ --------------------------------------------------------------------------------
  (  91E3  91 CB          )
  (  91E5  86 52 45 50 45 )   :. REPEAT optimize? @.
                                        if.     swap.  again'  then'  \ ahead'
                                        else.
  (  91EC  CD 90 D8       )                  \  COMPILE
  (  91EF  CD 81 77       )                     branch  \ here'  -.  ffff  and.
  (  91F2  CD 90 93       )                     32,'
  (  91F5  CD 87 E9       )                     HERE'   \ over.  -.  ffff  and.
  (  91F8  CD 82 72       )                     SWAP.
  (  91FB  CC 81 9E       )                     32!'
                                        then.   ;. ( immediate. ) \ jmp

  :.  AFT ( a -- a A ) DROP.   branch  here' 0 32,'     BEGIN' SWAP. ;. ( immediate. )

  :.  t:r0  t  0  r:r  ;.
  :.  r0=t  0  t  r=r  ;.
  :.  r1=t  1  t  r=r  ;.
  :.  r2=t  2  t  r=r  ;.
  :.  r3=t  3  t  r=r  ;.

  :.  CASE                             0 RESOLVE  !.   ;.  ( immediate. )

  :.  OF         \ {dup} \ {dup} t swap. ( r=# )  ldri
                   r0=t  {drop}  t:r0   if'=  {drop}  1 RESOLVE +!.  HERE' 1-.  LAST.OF'.ADDR  !.  ;.    ( immediate. )

  :.  ENDOF        ELSE'         ;.
  :.  ENDCASE   \  HERE'   1-.   c@'    e0   =.  IF.   -2 ALLOT' ( -1  LAST.OF'.ADDR @.  C+!' )  THEN.
                   RESOLVE @.    0
                   DO.     THEN'      -1 RESOLVE +!.
                   LOOP.   RESOLVE @.    ABORT". CASE  ... ENDCASE  structure NOT PAIRED ?"   ;.   ( immediate. )

comment:
  :   ttttt  case  123            of  111111 ... endof  endcase  ;  \ ???????????
  :   xxxxx  case  base           of  111111 ... endof  endcase  ;
  :   yyyyy  case  123 ...        of  111111 ... endof  endcase  ;
  :   zzzzz  case  adc1_base ...  of  111111 ... endof  endcase  ;

  :   test.case
      case     1  ...          of   1111111  ...  -1 ... endof
               2  ...          of   2222222  ...  -1 ... endof
               base            of   1111111  ...  -1 ... endof   \ base      is a     word.
               adc1_base ...   of   2222222  ...  -1 ... endof   \ adc1_base is a constant.
                                                   0 ...
      endcase  ;


  :   test.case1
      case     1  of   1111111       -1     endof
               2  of   2222222       -1     endof
                                      0     swap
      endcase  ;

  :   test.case2
      case     1  of   adc1_base     -1     endof
               2  of   2222222       -1     endof
               3  of   base          -1     endof
                                      0     swap
      endcase  ;
comment;
\ ************************************************************************

:.     if*         if     >1   ;.
:.     if**        if     >2   ;.
:.     if***       if     >3   ;.

:.  while*         while  >1   ;.
:.  while**        while  >2   ;.
:.  while***       while  >3   ;.

:.  until*      1> until       ;.
:.  until**     2> until       ;.
:.  until***    3> until       ;.

:.  ahead*.        ahead  >1  ;.
:.  ahead**        ahead  >2  ;.
:.  ahead***       ahead  >3  ;.

:.   else*      1> else   >1  ;.
:.   else**     2> else   >2  ;.
:.   else***    3> else   >3  ;.

:.   then*      1> then       ;.
:.   then**     2> then       ;.
:.   then***    3> then       ;.

:.  begin*         begin  >1  ;.
:.  begin**        begin  >2  ;.
:.  begin***       begin  >3  ;.

:.  again*      1> again      ;.
:.  again**     2> again      ;.
:.  again***    3> again      ;.

:. repeat*      1> repeat     ;.
:. repeat**     2> repeat     ;.
:. repeat***    3> repeat     ;.
\ ************************************************************************

:  delay        for           next   ;      :  1.ms    {dup}  t 1c0  r=#   delay  ;
:  ms           for   1.ms    next   ;      :  1.sec   {dup}  t 3e8  r=#   ms     ;  \  3e8=1000
:  sec          for   1.sec   next   ;


variable.    COMn
:.  oo1   1  COMn  !.   115.2k1   ;.
:.  oo2   2  COMn  !.   115.2k2   ;.
:.  oo3   3  COMn  !.   115.2k3   ;.
:.  oo4   4  COMn  !.   115.2k4   ;.
:.  oo5   5  COMn  !.   115.2k5   ;.
:.  oo6   6  COMn  !.   115.2k6   ;.
:.  oo7   7  COMn  !.   115.2k7   ;.
:.  oo8   8  COMn  !.   115.2k8   ;.
:.  oo9   9  COMn  !.   115.2k9   ;.
:.  oo10 0A  COMn  !.   115.2k10  ;.
:.  oo11 0B  COMn  !.   115.2k11  ;.
:.  oo12 0C  COMn  !.   115.2k12  ;.
:.  oo13 0D  COMn  !.   115.2k13  ;.
:.  oo14 0E  COMn  !.   115.2k14  ;.
:.  oo15 0F  COMn  !.   115.2k15  ;.
:.  oo16 10  COMn  !.   115.2k16  ;.


         1  COMn  !.
:.  oo      COMn  @.
  case.
    1  of.  115.2k1   endof.
    2  of.  115.2k2   endof.
    3  of.  115.2k3   endof.
    4  of.  115.2k4   endof.
    5  of.  115.2k5   endof.
    6  of.  115.2k6   endof.
    7  of.  115.2k7   endof.
    8  of.  115.2k8   endof.
    9  of.  115.2k9   endof.
   0A  of.  115.2k10  endof.
   0B  of.  115.2k11  endof.
   0C  of.  115.2k12  endof.
   0D  of.  115.2k13  endof.
   0E  of.  115.2k14  endof.
   0F  of.  115.2k15  endof.
   10  of.  115.2k16  endof.
            115.2k1
  endcase.  ;.

4.2?  @.    not.
#if
  :.  oo1   com1talk  ;.
  :.  oo2   com2talk  ;.
  :.  oo3   com3talk  ;.
  :.  oo4   com4talk  ;.
  :.  oo5   com5talk  ;.
  :.  oo6   com6talk  ;.
  :.  oo7   com7talk  ;.

  :.  OO  COMn  @.
      CASE.  1  OF.   OO1   ENDOF.
             2  OF.   OO2   ENDOF.
             3  OF.   OO3   ENDOF.
             4  OF.   OO4   ENDOF.
             5  OF.   OO5   ENDOF.
             6  OF.   OO6   ENDOF.
             7  OF.   007   ENDOF.
       ENDCASE.   ;.

#then

  :{  {invert}   t  t  r=r/  };
  :{  {-T}   0600f1d6  32,'  };   \  D6 F1 00 06   T=6-R0.s
words'?  on.

here'  insert{   system.variable.base.in.rom  @. 24 +. org   ( here' )  32,'  }insert

stm32f407.sF? @.
#if

comment:
  0800026c  ( from )  0800026c  extra.offset @.  +.  ( to )   34c  26c  -. ( length )    cmove'
  080002d0  extra.offset @.  +.          08000348  extra.offset @.  +.   32!'
  080002e1  extra.offset @.  +.          08000294  extra.offset @.  +.   32!'
  0800033c  extra.offset @.  +.          080002b8  extra.offset @.  +.   32!'
  0800034c  extra.offset @.  +.          080002bc  extra.offset @.  +.   32!'
  0800034c  extra.offset @.  +.          0800033c  extra.offset @.  +.   32!'
  6d020000  extra.offset @.  100 *.  +.  0 ( 08000000 )                        32!'
  0800026d  extra.offset @.  +.          08000004                        32!'

  08000008  0800026c  over.  -.  ff  fill'

  '' tf"  1 +.  08000330  extra.offset @.  +.   32!'   \ 1 +.  is a must
insert{         080002f2  extra.offset @.  +.   org    jmp_r1
}insert
comment;

#else
       26c  ( from )  26c  extra.offset @.  +.  ( to )   34c  26c  -. ( length )    cmove'
       2d0  extra.offset @.  +.          348  extra.offset @.  +.   32!'
       2e1  extra.offset @.  +.          294  extra.offset @.  +.   32!'
       33c  extra.offset @.  +.          2b8  extra.offset @.  +.   32!'
       34c  extra.offset @.  +.          2bc  extra.offset @.  +.   32!'
       34c  extra.offset @.  +.          33c  extra.offset @.  +.   32!'
  6d020000  extra.offset @.  100 *.  +.    0                        32!'
      026d  extra.offset @.  +.            4                        32!'

         8  26c  over.  -.  ff  fill'
insert{          2f2  extra.offset @.  +.   org    \ ```````` jmp_r1
}insert
#then



stm32f407.sF?  @.

#if      0 ( 08000000 )  PROGRAM.START  !.
#then

comment:
:  test.do.loop.in.ram       9     3    do     i   .          loop  ;
:  test.do.+loop.in.ram      9     3    do     i   .  2   +loop  ;
:  test.for.next.in.ram      8             for    r@  .  nex.  n=0?    ;
:  test.for.next.in.ram1     6             for    r@  .  next          ;
:  test.case  ( n -- )
   case    1  of   11111111   endof
           2  of   22222222   endof
   endcase  ;

:  test.case' ( n -- )
   case'   3  of'  33333333   endof'
           4  of'  44444444   endof'
   endcase'   ;
comment;

  :. else'z=0     if'z=0   swap.        then'  ;.
  :. else'z=1     if'z=1   swap.        then'  ;.
  :. else'c=0     if'c=0   swap.        then'  ;.
  :. else'c=1     if'c=1   swap.        then'  ;.
  :. else'n=0     if'n=0   swap.        then'  ;.
  :. else'n=1     if'n=1   swap.        then'  ;.
  :. else'v=0     if'v=0   swap.        then'  ;.
  :. else'v=1     if'v=1   swap.        then'  ;.

\ :  REPEAT'      SWAP     AGAIN'       THEN'  ;
  :. repeat'z=0   swap.    until'z=0    then'  ;.
  :. repeat'z=1   swap.    until'z=1    then'  ;.
  :. repeat'c=0   swap.    until'c=0    then'  ;.
  :. repeat'c=1   swap.    until'c=1    then'  ;.
\ :. repeat'n=0   swap.    until'n=0    then'  ;.
\ :. repeat'n=1   swap.    until'n=1    then'  ;.
  :. repeat'v=0   swap.    until'v=0    then'  ;.
  :. repeat'v=1   swap.    until'v=1    then'  ;.

\ : test.else'c=0     if'c=1   drop   else'z=0   dup    then'       ;
\ : test.repeat'v=1   begin'   dup    while'c=0  drop   repeat'v=1  ;


 :. r2:0  2  0  r:#  ;.




 


  :.  t<<#   t  swap.  r<<#   ;.
  :.  t>>#   t  swap.  r>>#   ;.


  :.   :  t:new  push.LR      ;.
  :.  m:  t:     push.LR      ;.
  :.   ;         ret          ;.



VARIABLE.   cfa'.of.MAIN*

tF+stm32f4xx.eF+stellaris.eF?  @.    mecrisp32F429/407?  @.  or.    drop. 0
#if    program.to.be.saved.in.flash?   @.  20000000   2001FFFF  between.
   #if
       variable.   :.has.been.redefined?



       429.only?   @.
       #if
       #else       include  STM32F4_DAC864b.f
       #then
\  from now on :  has been changed to  -->  t:new push.LR

   :. :  t:  push.LR  ;.  \ to comply with others

:.  ram>flash  ( -- )  20002600 ( from )       600 ( to )  3A00 ( len )  cmove'           20002040   40  A0     CMOVE'  ;.
:   flash>ram  ( -- )       600 ...       20002600 ...     3A00 ...      cmove     40 ... 20002040 ...   A0 ... CMOVE   ;

:.  R>F    ram>flash  1.HEX   ;.   \  dos   hex2bin   1.hex    \ DOS , SHELL AND SYS ARE THE SAME.
:   F>R    flash>ram          ;

\                    VARIABLE.   cfa'.of.MAIN*
:   eF51   flash>ram    doLIT   cfa'.of.MAIN*  @.  32,'   execute  ;

   #else
       variable.   :.has.been.redefined?
       429.only?   @.
       #if
       #else       include  STM32F4_DAC864b.f
       #then
     
\  from now on :  has been changed to  -->  t:new push.LR
   :. :  t:  push.LR  ;.  \ to comply with others

:.  ram>flash  ( -- )  20002600 ( from )       600 ( to )  3A00 ( len )  cmove'           20002040   40  A0     CMOVE'  ;.
:   flash>ram  ( -- )       600 ...       20002600 ...     3A00 ...      cmove     40 ... 20002040 ...   A0 ... CMOVE   ;

:.  R>F    ram>flash  1.HEX   ;.   \  dos   hex2bin   1.hex    \ DOS , SHELL AND SYS ARE THE SAME.
:   F>R    flash>ram          ;

                     VARIABLE.   cfa'.of.MAIN*
:   eF51    flash>ram    doLIT   cfa'.of.MAIN*  @.  32,'   execute     ;

   #then
#then


mecrisp32F429/407?   @.
#if   :. -ret     insert{  RESOLVE.DATA.PENDED  T:STATE?       ;.
      :. -ret     insert{  RESOLVE.DATA.PENDED  T:STATE? OFF.  ;.
      :. no.ret   insert{  RESOLVE.DATA.PENDED  T:STATE? OFF.  ;.
      :. no.;     insert{  RESOLVE.DATA.PENDED  T:STATE? OFF.  ;.
      :. no;      insert{  RESOLVE.DATA.PENDED  T:STATE? OFF.  ;.
      :. -ret'    insert{  RESOLVE.DATA.PENDED  T:STATE? OFF.  ;.
#then



stm32f407.sF?  @.   drop.  -1
#if
#else
insert{
4000 ( offset @.  +.  )  org
t:  uart.init.LF120        push.lr   { R4, R5, R6, R7, ( lr, ) }  PUSH{}   nop  nop
\ (      0 )   000 | 080 | 000 | 020 | 009 | 000 | 000 | 000 |
4008 ( offset @.  +.  )  org                                   014 | 048 | 015 | 04C | 025 | 06B | 0AE | 069 |
  (     10 )   0B0 | 047 | 014 | 048 | 0B0 | 047 | 04F | 0F0 | 040 | 020 | 003 | 021 | 0E6 | 068 | 076 | 06D |
  (     20 )   0B0 | 047 | 02E | 06E | 0B0 | 047 | 001 | 046 | 010 | 048 | 04F | 0F4 | 0E1 | 032 | 04F | 0F0 |
  (     30 )   060 | 003 | 025 | 068 | 004 | 046 | 06E | 069 | 0B0 | 047 |
  (     3A )                     ahead'                                  ( 0AE | 06B ) 02D | 068 |
  (     3E )                           begin'.                                                     0B0 | 047 |
  (     40 )   00D | 028 | 003 | 0D0 | 0C1 | 0B2 | 020 | 046 | 0A8 | 047 | 0F8 | 0E7 | 070 | 027 | 039 | 078 |
  (     50 )   001 | 037 | 000 | 029 | 0F3 | 0D0 | 020 | 046 | 0A8 | 047 | 0F8 | 0E7 | 001 | 000 | 000 | 010 |
  (     60 )   014 | 000 | 000 | 001 | 001 | 000 | 000 | 020 | 02C | 045 | 000 | 040 | 000 | 0C0 | 000 | 040 |
  (     70 )   00D | 00A | 04D | 079 | 020 | 073 | 06E | 061 | 06B | 065 | 020 | 069 | 073 | 020 | 06D | 069 |
  (     80 )   067 | 068 | 074 | 069 | 065 | 072 | 020 | 074 | 068 | 061 | 06E | 020 | 079 | 06F | 075 | 072 |
  (     90 )   073 | 02E | 020 | 04D | 069 | 06E | 065 | 020 | 068 | 061 | 073 | 020 | 06C | 065 | 067 | 073 |
  (     A0 )   021 | 00D | 00A | 000 |

  40a4 ( offset @.  +.  )  org   then'                                     0AE | 06B | 02D | 068 | R0=R5 R1=R6
                                 { R4, R5, R6, R7, }  pop{}    \  { r1. }  push{}
                                             { r1, }  push{}   {dup}  t=r0   addr(uart.key)   {!}
                                             { r1, }  pop{}    {dup}  t=r1   addr(uart.emit)  {!}   ret

t:  snake.leg  \  4000  ...  execute
                 addr(uart.key)   {@}     r5=t
                 addr(uart.emit)  {@}     r0=4000c000
                                       again'.

               404c  org   7 4070 ldri        40ee org   ret'
               4070  40F4  32!'        78394f29  2000304c  32!'
}insert
#then
\ ******************************************************************************
\     from now on, switching to ram.
\ ******************************************************************************
\  \s
\  head>target       '' start  cfa'>nfa'  #if   4  -.  32!'  #then

:{  it'=.<              bfb4  16,'  };
:{  itelt               bfb4  16,'  };
:{  it'=.<.....itelt    bfb4  16,'  };

:{  it'=.>              bfcc  16,'  };
:{  itegt               bfcc  16,'  };
:{  it'=.>.....itegt    bfcc  16,'  };

:{  it'<>               bf18  16,'  };
:{  itne                bf18  16,'  };
:{  it'<>......itne     bf18  16,'  };

:{  it'<                bfb8  16,'  };
:{  itlt                bfb8  16,'  };
:{  it'<.......itlt     bfb8  16,'  };

:{  it'>                bfc8  16,'  };
:{  itgt                bfc8  16,'  };
:{  it'>.......itgt     bfc8  16,'  };

:{  it'u>               bf88  16,'  };
:{  ithi                bf88  16,'  };
:{  it'u>......ithi     bf88  16,'  };

:{  it'c=0              bf38  16,'  };
:{  itcc                bf38  16,'  };
:{  it'c=0.....itcc     bf38  16,'  };

:{  it'u>=              bf8c  16,'  };
:{  itehi               bf8c  16,'  };
:{  it'u>=.....itehi    bf8c  16,'  };

:{  it'==               bf0c  16,'  };
:{  iteeq               bf0c  16,'  };
:{  it'==......iteeq    bf0c  16,'  };

:{  it'=                bf34  16,'  };
:{  itecc               bf34  16,'  };
:{  it'=.c=0...itecc    bf34  16,'  };

:{  itt.=               bf04  16,'  };
:{  itteq               bf04  16,'  };
:{  itt.=......itteq    bf04  16,'  };

:{  itt.c=0             bf3c  16,'  };
:{  ittcc               bf3c  16,'  };
:{  itt.c=0....ittcc    bf3c  16,'  };

:{  it'-                bf48  16,'  };
:{  itmi                bf48  16,'  };
:{  it'-.......itmi     bf48  16,'  };

comment:
   original.mnemonic?  on    bfb4  16c:  itelt
   original.mnemonic?  off   bfb4  16c:  it'=<

   original.mnemonic?  on    bfcc  16c:  itegt
   original.mnemonic?  off   bfcc  16c:  it'=>

   original.mnemonic?  on    bf18  16c:  itne
   original.mnemonic?  off   bf18  16c:  it'<>

   original.mnemonic?  on    bfb8  16c:  itlt
   original.mnemonic?  off   bfb8  16c:  it'<

   original.mnemonic?  on    bfc8  16c:  itgt
   original.mnemonic?  off   bfc8  16c:  it'>

   original.mnemonic?  on    bf38  16c:  itcc
   original.mnemonic?  off   bf38  16c:  it'c=0

   original.mnemonic?  on    bf8c  16c:  itehi
   original.mnemonic?  off   bf8c  16c:  it'u>=

   original.mnemonic?  on    bf0c  16c:  iteeq
   original.mnemonic?  off   bf0c  16c:  it'==

   original.mnemonic?  on    bf34  16c:  itecc
   original.mnemonic?  off   bf34  16c:  it'=.c=0

   original.mnemonic?  on    bf04  16c:  itteq
   original.mnemonic?  off   bf04  16c:  it'=

   original.mnemonic?  on    bf3c  16c:  ittcc
   original.mnemonic?  off   bf3c  16c:  itt'c=0

   original.mnemonic?  on    bf48  16c:  itmi
   original.mnemonic?  off   bf48  16c:  it'-
comment;


         mecrisp4F120?    @.
#if      0  4000  rmdr    include  MECRISP4F120org3.F
#else    mecrisp32F407?   @.
   #if   0  4000  rmdr    include  MECRISP32F407org2.F
                          include  32f4headerless_org.f
   #then
#then

mecrisp32F407?    @.
#if    insert{   '' uart.switch   6 +. org   t  ''  emit  r=#
                 '' uart.switch  16 +. org   t  ''  key   r=#
      }insert
#then

stm32f407.sF?   @.
#if         include  STM32F407_SWIFTFORTHORG796a.F
                               1.hex   \  1000 ms    dos  hex2bin  1.hex
#else       0  d000  32!'      1.hex   \  1000 ms    dos  hex2bin  1.hex
#then

variable.  last'.in.ram
variable.  last'.in.rom
  last' @. last'.in.rom  !.

:. :       t:      push.LR   ;.
:. :       t:new   push.LR   ;.
:. :new    t:new   push.LR   ;.



:  first.word.in.ram   ;

:. adjust.last'.in.rom>lfa'.in.ram ( -- )
   last'.in.rom  @.  '' first.word.in.ram  CFA'>addr.of.NFA'.in.T:NFA.QUEUE/T:NFA.QUEUE*
   if.      4  -.   swap.  cp0'*   -.  swap.  !.
   else.    abort".  **** something wrong with T:NFA.QUEUE/T:NFA.QUEUE *****"  4 -. !. ;
   then.    ;.

   adjust.last'.in.rom>lfa'.in.ram

\  h15  ( dh )   words'+  \   words'  \ included-files.     \ courtesy of Suan Chen

   words'?  on.
\                see emit
   ddnq                 included-files.     \ courtesy of Suan Chen


mecrispForth.only(LF120)?  @.
#if   :.   oo   -cr  115.2k4  ;.

      new  cls  0  ffff  erase'  include   MECRISP4F120org3.F    :.  hex.  10  base.  !.  ;.
                               ( include   stm32f4_UNTIL1.f )      1.hex
#then

:. 1234-->3412  100 /mod. swap. 100 *. +. ;.
:. 12345678-->78563412   0 10000 um/mod.  >r. 1234-->3412  10000 *.  r>. 1234-->3412   or.  ;.

:. 16,''      1234-->3412      16,'  ;.
:. 32,''  12345678-->78563412  32,'  ;.

                  t: rgb
(    8    00000008 ) 0848      16,''  \   main:   LDR     R0, rcgc2
(    9    0000000A ) 2021      16,''  \           MOVS    R1, #0x20       ;clockF
(   10    0000000C ) 0160      16,''  \           STR     R1, [R0]
(   11    0000000E ) 0848      16,''  \           LDR     R0, dirF
(   12    00000010 ) 48F22E01  32,''  \           MOV     R1, #0x802E     ;magic#
(   13    00000014 ) 0160      16,''  \           STR     R1, [R0]
(   14    00000016 ) C0F81C11  32,''  \           STR     R1, [R0, #0x11C];denF
(   15    0000001A ) C0F22002  32,''  \   loop:   MOVT    R2, #0x20
(   16    0000001E ) 013A      16,''  \   wait:   ADDS    R2, #-1
(   17    00000020 ) FDD1      16,''  \           BNE     wait
(   18    00000022 ) 40F8041C  32,''  \           STR     R1, [R0,#-4]    ;dataF   \ ?????????
(   19    00000026 ) 4FEA7101  32,''  \           ROR     R1, R1, #1               \ ?????????
(   20    0000002A ) F6E7      16,''  \           B       loop
\   21                                \   DATA
(   22    0000002C ) 08E10F40  32,''  \   rcgc2:  DC32    0x400FE108
(   23    00000030 ) 00540240  32,''  \   dirF:   DC32    0x40025400
(   24             )                  \           END

                                   t:  bit@                                                    cfa= 560
  (  00000560  01 CF             )                  nip>r0
  (  00000562  36 68             )                  {@}
  (  00000564  06 40             )                  TnR0
  (  00000566  18 BF             )                  it'<>......itne
  (  00000568  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000056C  70 47             )                  ret'



tF+stm32f4xx.eF+stellaris.eF?  @.
#if   '\'  '' ~  cfa'>nfa'  drop. 1 +. 8!'    '('  '' ~  cfa'>nfa'  drop. 4 -. 32@' 1+. 8!'    \ always placed here before 1.hex to avoid \ and ( being used.
    0  '' start  cfa'>nfa'  drop.  4 -. ( lfa' )  32!'

         ''  main           1+.    4   32!'  1.hex
#then

mecrispForth.only(LF120)?  @.
#if     2482  last'  !.     :. words'    0 bc dump32  bc u    words'(mecrispLF120)(seperate)  ;.
#else
#then

:.  r-#,s   r-#.s  ;.
:.  until'r0-1=0  ( -- )    0 1 r-#,s  until'z  ;.
:.  until'r1-1=0  ( -- )    1 1 r-#,s  until'z  ;.
:.  until'r2-1=0  ( -- )    2 1 r-#,s  until'z  ;.
:.  until'r3-1=0  ( -- )    3 1 r-#,s  until'z  ;.
:.  until'r4-1=0  ( -- )    4 1 r-#,s  until'z  ;.
:.  until'r5-1=0  ( -- )    5 1 r-#,s  until'z  ;.
:.  until'r6-1=0  ( -- )    6 1 r-#,s  until'z  ;.
:.  until'r7-1=0  ( -- )    7 1 r-#,s  until'z  ;.
:.  until'r8-1=0  ( -- )    8 1 r-#,s  until'z  ;.
:.  until'r9-1=0  ( -- )    9 1 r-#,s  until'z  ;.
:.  until'ra-1=0  ( -- )   0a 1 r-#,s  until'z  ;.
:.  until'rb-1=0  ( -- )   0b 1 r-#,s  until'z  ;.
:.  until'rc-1=0  ( -- )   0c 1 r-#,s  until'z  ;.

\   (#)=#      >r.    0 swap. r=#                              0 1 (r)=r   ;.
:.  (#)+#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. r+#     0 1 (r)=r   ;.
:.  (#)-#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. r-#     0 1 (r)=r   ;.
\   (#)*#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. r*#     0 1 (r)=r   ;.
\   (#)/#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. r/#     0 1 (r)=r   ;.
\   (#)x#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. Rx#     0 1 (r)=r   ;.
\   (#)o#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. Ro#     0 1 (r)=r   ;.
\   (#)n#      >r.    0 swap. r=#    1 0 r=(r)   1 r>. Rn#     0 1 (r)=r   ;.
:.  (#)n#.tst  >r.    0 swap. r=#    1 0 r=(r)   1 r>. Rn#,s               ;.
:.  (#)n#.tst  >r.    0 swap. r=#    1 0 r=(r)   1 r>. Rn#,s               ;.

:. RnR.tst  RnR,tst  ;.

stm32f407?  @.
#if  \  include STM32F4_ADC-1MSPS3.F
  : Vin.1.ready      Enable.clock.for.ADC1   3 ( ... )  1 ( ... ) {2*} lshift  portc_moder  bis!   ;
  : Vin.1(fast)  ( -- n )   $0b   ( ... ) a/d.1.continue  ;

\ : Vin.2  ( -- n )  Enable.clock.for.ADC1   3 ( ... )  2 ( ... ) {2*} lshift  portc_moder  bis!   $0b   ( ... ) a/d.1.continue  ;
\ : Vin.3  ( -- n )  Enable.clock.for.ADC1   3 ( ... )  3 ( ... ) {2*} lshift  portc_moder  bis!   $0b   ( ... ) a/d.1.continue  ;

create.  a/d.1.data.area              7F00  allot.
( create ) :.  a/d.1.data.area(target)  2000F000 ;.  \ ( ... )  ret'
\ :.  :   :new  ;.
:   Vin.1>pc  ( n -- )     0  do   Vin.1    .4n        loop   ;

\   Vin.1>a/d.1.data.area   ( n.point -- )    0  do    Vin.1  i  a/d.1.data.area(target) +  {!}  4  +loop   ;
:   Vin.1>a/d.1.data.area   ( n.point -- )    0  do    Vin.1  i  2000F000                +  {!}  4  +loop   ;

:   Vin.1>pc' ( n -- )     0  do   Vin.1               loop   ;
:.  pc<Vin.1  ( n -- )   exi  ini  232." tFm"   (d')   (b') Vin.1>pc
                           0  do.  COMnKEY   i.  a/d.1.data.area  +.  c!.  loop.  ;.


:.  pc<Vin.1' ( n -- )   exi  ini  number>232   100000  0  do. loop.  232." Vin.1>pc'"  ;.
:.  pp   232." Vin.1>pc'"  ;.


: a/d.1.conversion+   ( -- )
  SWSTART             ADC1_CR2  bis!    \ Start conversion     \ Wait for conversion to finish:
  begin        EOC    ADC1_SR   bit@
  until               ADC1_DR     {@} ; \

: a/d.1.disable     0 ( ... )               ADC1_CR2    {!} ;  \ Disable ADC

:. RnR.tst   RnR,tst  ;.

t: a/d.1.conversion   ( -- n )
                ` ADC1_CR2          ` SWSTART      (#)o#       \ Start conversion   \ Wait for conversion to finish:
              0 ` ADC1_SR  r=#    1 ` EOC  r=#
   begin'         r2=(r0)             R2nR1,tst
   until'nz     ` ADC1_DR ...    {@}       ret'

t:  a/d.1.conversion(fastest) ( -- n )                             cfa= 200011D4
  (  200011D4  07 48             )                  R0=40012008
  (  200011D6  01 68             )                  R1=(R0)
  (  200011D8  41 F0 80 41       )                  R1=R1o40000000
  (  200011DC  01 60             )                  (r0)=r1
  (  200011E8  04 3F 3E 60       )                  {dup}
  (  200011EC  03 4E             )                  T=4001204C
  (  200011E0  02 21             )                  R2=2
  (  200011DE  06 48             )                  R3=40012000
                                        begin'                   \  200011E6 --> 200011E2  **************
  (  200011E2  02 68             )                  R4=(R3)
  (  200011E4  0A 42             )                  R4nR2,tst
  (  200011E6  FC D0             )      until'<> \ z=1? eq?      \  200011E6 --> 200011E2  **************

  (  200011EE  36 68             )                  {@}
  (  200011F0  70 47             )                  ret'

:.  R=(R)n#,tst  >r. >r. dup. r>.  R=(R)  r>. Rn#,tst  ;.
:{  R2=(R5)n2,tst   2 5 2   R=(R)n#,tst  };

t:  Vin.1>a/d.1.data.area  ( n.point -- )  \ Vin.1.ready  ( it's ok here )   cfa= 200010C0
    push.LR   Vin.1.ready  \ r4=t  {drop}
    0 ...                        ADC1_CR1    {!}
    ADON                         ADC1_CR2    {!}   \ Enable ADC
    1  ... $14 ( 20 ) ... lshift ADC1_SQR1   {!}   \ One conversion for this sequence
    0b ...    ADC1_SQR3   {!}                      \ Select channel A/D.1 or A/D.2  or A/D.3
    3  a/d.1.data.area(target)   r=#               \ r1=2000F000
    R4=T  {drop}
    { r5, r6, r7, } push
    R5=40012000
    R6=40012008     R1=(R6)      R1=R1o40000000
    R7=4001204C
    begin'          (R6)=R1         \ start conversion
       r0=r4<<2     r0+r3           \ do 2 instructions take 2 cycles ?   (  r0=r3+r4<<2  ????? )
       begin'       R2=(R5)n2,tst   \  R2=(R5)n2,tst     :. R=(R)n#,tst  >r. >r. dup. r>.  R=(R)  r>. Rn#,tst  ;.
       until'<>   \ z=1? eq?
       r2=(r7)      (r0)=r2
    until'r4-1=0    { r5, r6, r7, } pop     ret

t:  Vin.1>a/d.1.data.area''  ( n.point -- )        \ Vin.1.ready  ( it's ok here )   cfa= 200010C0
    push.LR   Vin.1.ready   r4=t  {drop}
    0 ...               ADC1_CR1    {!}
    ADON                ADC1_CR2    {!}            \ Enable ADC
    1  ... $14 ( 20 ) ... lshift ADC1_SQR1   {!}   \ One conversion for this sequence
    0b ...    ADC1_SQR3   {!}                      \ Select channel A/D.1 or A/D.2  or A/D.3
    3  a/d.1.data.area(target)   r=#               \ r1=2000F000
    begin'       a/d.1.conversion
                 r0=r4<<2   r0+r3                  \ do 2 instructions take 2 cycles ?   (  r0=r3+r4<<2  ????? )
                 (r0)=t     {drop}
    until'r4-1=0    ret

:.  y.auto.plot    ( y.gain -- )      >r.    a/d.1.data.area   7F00 erase.    Vin.1.ready
    exi  ini   400  number>232  10 ms.  232." Vin.1>a/d.1.data.area"   a/d.1.data.area(target)  dup.  1000  p<t
    r>.  plot.data.curve(2000F000~ffff)  ;.

:.  y.auto.plot    ( y.gain -- )      >r.    a/d.1.data.area   7F00 erase.                 Vin.1.ready
    exi  ini   400  number>232  10 ms.  232." Vin.1>a/d.1.data.area"   a/d.1.data.area(target)  dup.  1000  p<t
    r>.  plot.data.curve(2000F000~ffff)  ;.

:.  y.auto.plot    ( y.gain -- )      >r.    a/d.1.data.area   7F00 erase.  exi ini  232." Vin.1.ready"
    10 ms.     400  number>232  10 ms.  232." Vin.1>a/d.1.data.area"   a/d.1.data.area(target)  dup.  1000  p<t
    r>.  plot.data.curve(2000F000~ffff)  ;.

:.  y.auto.plot    ( y.gain -- )           >r.  a/d.1.data.area  7F00 erase.     232." 400 Vin.1>a/d.1.data.area"
    10 ms.    a/d.1.data.area(target) ( from ) dup. ( to )  1000 ( length )  p<t
    r>.   plot.data.curve(2000F000~ffff)  ;.

variable. LM?

\   SPACE  SPACE .....     or      F  SPACE SPACE .....

:.  yap   ( y.gain -- )  LM?  @.   not.  if.  LM   LM?  on.  then.  y.auto.plot  ;.

:.  yap+  ( y.gain -- )  exi  ini  232." 120MHz"   y.auto.plot  ;.


:.  y.auto.plot'     ( n.point y.gain -- )       >r.    a/d.1.data.area  7F00 erase.    Vin.1.ready
    dup>r.    exi  ini  number>232  10 ms.  232." Vin.1>pc"   \ Vin.1>a/d.1.data.area
    r>.  0  do.  COMnKEY   i.  a/d.1.data.area  +.  c!.  loop.
    a/d.1.data.area  data.curve  7F00 cmove.
    r>.  ( y.gain   @. )     plot.data.curve    ;.

:.  yap'  ( y.gain -- )  c80 ( c0=320*4=800*4 )  swap.  y.auto.plot'  ;.

:  Ib     ( n -- )   Vo.1  ;
:  Vce    ( n -- )   Vo.2  ;

:  curve.tracer ( -- )    0a    0
   do        i   Ib      100    0
      do     i   Vce   Vin.1    i  j   100  *   +   a/d.1.data.area(target) ...  +  !
      loop
   loop      ;

\   320  10  yap'

:.  vv  ( d/a.1.output y.gain -- )
    base.  @.  >r. >r.  hex.  exi ini   number>232  232." vo.1"   320  r>.  y.auto.plot'  r>.  base.  !.  ;.
\   800  10  vv
\   120MHz  30 yap     10kHz
t:  Vin.1>pc(120MHz)      push.LR    120MHz    Vin.1>a/d.1.data.area    ret

t: button.state1          push.LR   colours   begin  red  button? . 8 ... ms  red/  cr  ?key  until  ret   \ PA0
t: button.state.pa0>red   push.LR   colours
   begin    button?
      if    red/
      else  red
      then  ?key
   until    ret   \ PA0

t: red'   push.LR  100 ... msec    red   ret
t: red/'  push.LR  100 ... msec    red/  ret

t: button.state2   push.LR  colours  begin  red'   button?   red/'    ?key   until  ret   \ PA0

\  t: ws    push.LR   words   ret

#then

:.  hr   here'  ;.

\ special.for.swiftxForth?     on.
  special.for.swiftxForth?     @.
#if     0  350  ff  fill'      8  26c  over.  -.  cdr
\   include  STM32F407_SWIFTFORTHORG796a.F
    include  STM32F407_SWIFTFORTHORG509d.F   \ STM32F407_SWIFTFORTHORG509b.F        \  include  STM32F407_SWIFTFORTHORG509.F
:.  R0=T      4630     16,'               ;.
:.  T=R0      4606     16,'               ;.
:{  {1+}      1c76     16,'               };
:{  {1-}      1e76     16,'               };
:{  {2+}      1cb6     16,'               };
:{  {2-}      1eb6     16,'               };
:{  {4+}      1d36     16,'               };
:{  {-}       nip>r0   r0-t         T=R0  };
:{  {swap}    R0=s     S=T          T=R0  };
:{  {!}       R0=T     nip>r1,T  (r0)=r1  };

insert{  0cfc  org    t: here
         152c  org    t: (200006F4)+1
         15b4  org    t: USART3_BASE.tx
         15c4  org    t: USART3_BASE.tx=fe
         2558  org    t: /UARTS.xxx
}insert
         20000a18  0  32!'  ( rp )                 2871    4  32!'  \ swiftxForth
#else  \ 20000300  0  32!'  ( rp )  '' main 1+.  ( 7285 )  4  32!'  \      eForth
#then


:{  pop.r0,r1   bc03   16,'      };
:{  r1=R'       1  4   R=(rp+#)  };
 
:.  y,        r4,         ;.
:.  w,        r5,         ;.
:.  s=r       sp  swap.  (r)=r    ;.

:{  s=R2      603a  16,'  };   \  3A 60   (sp+0)=R2
:{  s''=R2    60ba  16,'  };   \  BA 60   (sp+8)=R2
:{  s'''=R3   60fb  16,'  };   \  FB 60   (sp+0C)=R3

:.  (sp)=r   sp  swap.  (r)=r    ;.

:{  s=r0         0  (sp)=r   };
:{  s=r1         1  (sp)=r   };
:{  s=r2         2  (sp)=r   };
:{  s=r3         3  (sp)=r   };
:{  s=r4         4  (sp)=r   };
:{  s=r5         5  (sp)=r   };
:{  s=r6         6  (sp)=r   };
:{  s=r7         7  (sp)=r   };

:{  {-nip}<r3      {-nip}   603b 16,' ( s=R3 )  };
:{  {-nip},s=R3    {-nip}   603b 16,' ( s=R3 )  };

:{   -nip<r0       {-nip}   s=r0   };
:{   -nip<r1       {-nip}   s=r1   };
:{   -nip<r2       {-nip}   s=r2   };
:{   -nip<r3       {-nip}   s=r3   };
:{   -nip<r4       {-nip}   s=r4   };
:{   -nip<r5       {-nip}   s=r5   };
:{   -nip<r6       {-nip}   s=r6   };   \ {dup}
:{   -nip<r7       {-nip}   s=r7   };

:{  {-nip<r0}      {-nip}   s=r0   };
:{  {-nip<r1}      {-nip}   s=r1   };
:{  {-nip<r2}      {-nip}   s=r2   };
:{  {-nip<r3}      {-nip}   s=r3   };
:{  {-nip<r4}      {-nip}   s=r4   };
:{  {-nip<r5}      {-nip}   s=r5   };
:{  {-nip<r6}      {-nip}   s=r6   };
:{  {-nip<r7}      {-nip}   s=r7   };
:{  {dup}          {-nip}   t s=r  };   \ {-nip<r6}

COMMENT:
:{  {0}            {dup}    T=0    };
:{  {0}            {dup}    0 T=#  };
:{  {1}            {dup}    1 T=#  };
:{  {2}            {dup}    2 T=#  };
:{  {3}            {dup}    3 T=#  };
:{  {-1}           {dup}    T=0/   };
COMMENT;
\ ------------------------------------------------------------------------
prefix?  off.

:.  Y=re   y  lr  r=r    ;.
:.  Yn1/   y   1  Rn#/   ;.
:.  Y=(Y)  y   y  r=(r)  ;.
:.  Y+1    y   1  r+#    ;.
:.  pc=Y   pc  y  r=r    ;.

:.  Y:0    Y   0  R:#    ;.
:.  lr+4   lr  4  r+#    ;.

:{  {branch}     Y=re    Yn1/   Y=(Y)   Y+1     pc=Y  };


:.  R2=40004400    2  40004400  r=#    ;.
:.  R1=(R2)        1  2         r=(r)  ;.
:.  R1n20,s        1  20        Rn#,s  ;.
:.  R1n80,s        1  80        Rn#,s  ;.
:.  R2+4           2  4         R+#    ;.


  :{  {key}      ( key.stm32F407.eF.PA.2' )   ( -- char )
      {dup}        R2=40004400
      begin'       R1=(R2)          R1n20,s
      until'<>     \  z=1? eq?
      R2+4         t 2 r=(r)b       };



                                    :{   {?key}     (  ?key.stm32F407.eF.PA.2 )    ( -- f )    \              cfa= 6F24
                                                    {dup}
  (  00006F26  06 4A             )                  R2=40004400
  (  00006F28  11 68             )                  R1=(R2)
  (  00006F2A  11 F0 20 01       )                  R1n20,s         if'nz  T=-1  else'  T=0  then'
  (  00006F2E  05 4A             )                  R2+4
  (  00006F30  92 F9 00 00       )                  0 2 R=(R)b   \ to reset (40004400).1=0
                                                    };


                                    :{  {?RX}       ( -- char -1 / 0 )
                                                    {dup}
  (  00006F26  06 4A             )                  R2=40004400
  (  00006F28  11 68             )                  R1=(R2)       R2+4
  (  00006F2A  11 F0 20 01       )                  R1n20,s
                                        if'nz       t 2 r=(r)b    {dup}  T=-1
                                        else'       T=0
                                        then'
  (  00006F30  92 F9 00 00       )                  0 2 R=(R)b   \ to reset (40004400).1=0
                                                    };


                                    :{  {?RX}       ( -- char -1 / 0 )
                                                    {dup}
  (  00006F26  06 4A             )                  R2=40004400
  (  00006F28  11 68             )                  R1=(R2)     \  R2+4
  (  00006F2A  11 F0 20 01       )                  R1n20,s
                                        if'nz       R2+4   t 2 r=(r)b    {dup}  T=-1
                                        else'       T=0
                                        then'
  (  00006F30  92 F9 00 00       )                  0 2 R=(R)b   \ to reset (40004400).1=0
                                                    };


:{  {TX!}        (  t:  emit.stm32F407.eF.PA.3' )   ( char -- )  \  push.LR
    R2=40004400
    begin'       R1=(R2)          R1n80,s
    until'<>   \ z=1? eq?
    R2+4         2 t (r)=r,b      {drop}  ( 1 ...* #emit  +! )   ret'  };



nuc442eF?  @.   
#if

:.  for'r0    0  swap.  r=#  begin'  ;.   :. next'r0    0  1  r-#.s  until'z  ;.
:.  for'r1    1  swap.  r=#  begin'  ;.   :. next'r1    1  1  r-#.s  until'z  ;.
:.  for'r2    2  swap.  r=#  begin'  ;.   :. next'r2    2  1  r-#.s  until'z  ;.
:.  for'r3    3  swap.  r=#  begin'  ;.   :. next'r3    3  1  r-#.s  until'z  ;.
:.  for'r4    4  swap.  r=#  begin'  ;.   :. next'r4    4  1  r-#.s  until'z  ;.
:.  for'r5    5  swap.  r=#  begin'  ;.   :. next'r5    5  1  r-#.s  until'z  ;.
:.  for'r6    6  swap.  r=#  begin'  ;.   :. next'r6    6  1  r-#.s  until'z  ;.
:.  for'r7    7  swap.  r=#  begin'  ;.   :. next'r7    7  1  r-#.s  until'z  ;.
:.  for'r8    8  swap.  r=#  begin'  ;.   :. next'r8    8  1  r-#.s  until'z  ;.
:.  for'r9    9  swap.  r=#  begin'  ;.   :. next'r9    9  1  r-#.s  until'z  ;.
:.  for'ra  $0a  swap.  r=#  begin'  ;.   :. next'ra  $0a  1  r-#.s  until'z  ;.
:.  for'rb  $0b  swap.  r=#  begin'  ;.   :. next'rb  $0b  1  r-#.s  until'z  ;.
:.  for'rc  $0c  swap.  r=#  begin'  ;.   :. next'rc  $0c  1  r-#.s  until'z  ;.


\ :.  pb.10     40004868  ;.
:{   50.us    push.r0  32 (  50 )  for'r0  next'r0   pop.r0  };
:{  100.us    push.r0  64 ( 100 )  for'r0  next'r0   pop.r0  };
:.  PB  40011000  4  -.  ;.
:{  PB.10=0   2  40011000 4 -. r=#   2 0 (r)=#  };
:{  PB.10=1   2  40011000 4 -. r=#   2 1 (r)=#  };

:{  PB.10=0   0  PB  r=#   0  0  (r)=#  };
:{  PB.10=1   0  PB  r=#   0  1  (r)=#  };

:{  tx=0      PB.10=0   };
:{  tx=1      PB.10=1   };

:.  rrc.t     t  rrc.r  ;.

:.  pb.10     40004868  ;.



mecrisp32F429/407?  @.
#if
\ include  mad7.f
  nuc442eF?  @.
  #if  nuc453eF?  @.   
    #if   \ 0e8 ( 0C8 ) 8.68us.delay.count  !.
  :{  8.68us      8.68us.delay.count  @.                   for'r0   next'r0  };   \ 1/115200=8.68us     E0 ~ E8
  :{  4.34us      8.68us.delay.count  @.  2      /.        for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{  3.25us      8.68us.delay.count  @.  3  4  */.  4 +.  for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{  2.17us      8.68us.delay.count  @.  4      /.  4 +.  for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us

  :{  {8.68us}    8.68us.delay.count  @.                   for'r0   next'r0  };   \ 1/115200=8.68us     E0 ~ F4  IS OK    \ e8     A89  AB4  AE0
  :{  {4.34us}    8.68us.delay.count  @.  2      /.        for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{  {3.25us}    8.68us.delay.count  @.  3  4  */.  4 +.  for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{  {2.17us}    8.68us.delay.count  @.  4      /.  4 +.  for'r0   next'r0  };
    #else                                          \ ^--- without this 4 extra delay , it causes the problem.

  :{  8.68us          0e8   for'r0   next'r0  };   \ 1/115200=8.68us     E0 ~ E8
  :{  4.34us           74   for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{  3.25us           57   for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{  2.17us           3A   for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us

  :{ {8.68us}         0e8   for'r0   next'r0  };   \ 1/115200=8.68us     E0 ~ E8
  :{ {4.34us}          74   for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{ {3.25us}          57   for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
  :{ {2.17us}          3A   for'r0   next'r0  };   \ 1/115200=8.68us      8.68us/2=4.34us
    #then
  #then
t:  tx!(pb10)      ( char -- )
    R2=4000403C    8
    for'r3      t  rrc.r
       if'c=1   R0=1
       else'    R0=0
       then'    (R2)=R0    {8.68us}
    next'r3     {drop}     ret'

\   hex>image32

t:  ?rx(pb11)    ( -- char )    {dup}     t=0    R2=4000403C
    begin'    0  2  0   r=(r+#5)b   0  0  r:#
    until'=             {4.34us}    8
    for'r3    t<<1      {8.68us}
              0  2  0   r=(r+#5)b   0  0  r:#
       if'=   nop
       else'  t+1
       then'
    next'r3   ret'
#then
\ ============================================================================
:{  T<<R0        T 0  r<<r   };

                                   :{  {lshift}                                                \ cfa= 200029E0
  (  200029E0  30 00             )                  r0=t       \ 0 t r=r
  (  200029E2  40 CF             )                  {drop}
  (  200029E4  86 40             )                  T<<R0   };


cortex.m0?  @.
#if
                                   :{  {nex.}                        \            cfa=     4828
  (  00004828  04 BC             )                  pop.r2
  (  0000482A  01 3A             )                  2 1  r-#   \  R2-1     :.  R2-1  2  1  R-# ;.
  (  0000482C  04 B4             )                  push.r2
  (  0000482E  00 2A             )                  2 0  r:#   \     R2:0
  (  00004830  01 D5             )      if'n=1 \ n=0? pl?          \ 00004830 --> 00004836  ******
  (  00004832  0D F2 04 0D       )                  {r>drop}   2 0  r:#
                                        then'       };
#else
  :{  {nex.}                        \            cfa=     4828
  (  00004828  04 BC             )                  pop.r2
  (  0000482A  01 3A             )                  2 1  r-#   \  R2-1     :.  R2-1  2  1  R-# ;.
  (  0000482C  04 B4             )                  push.r2
  (  0000482E  00 2A             )                  2 0  r:#   \     R2:0
  (  00004830  01 D5             )      if'n=1 \ n=0? pl?          \ 00004830 --> 00004836  ******
  (  00004832  0D F2 04 0D       )                  {r>drop}   2 0  r:#
                                        then'       };
#then

                                    :{  {?branch}                \ cfa=     4B2C
  (  00004B2C  34 00             )                  Y=T
  (  00004B2E  40 CF             )                  {drop}
  (  00004B30  00 2C             )                  Y:0
  (  00004B32  03 D0             )      if'<> \ z=1? eq?         \ 00004B32 --> 00004B3C
  (  00004B34  0E F2 04 0E       )                  lr+4
  (  00004B38  70 47             )                  ret'
                                        then'       {branch}  };

:{  {RP@}   {dup}  t rp  r=r  };

                                  :{  {?dup}                                                     \ cfa=     6B80
  (  00006B80  00 2E             )                  T:0
  (  00006B82  01 D0             )      if'<>     \ z=1? eq?       \ 00006B82 --> 00006B88  ******************************
  (  00006B84  04 3F 3E 60       )                  {dup}
                                        then'       };             \ 00006B82 --> 00006B88  ******************************
  (  00006B8A  00 BF             )

                                  :.  T+3    T  3   R+#    ;.
                                  :.  Tn3/   T  3   Rn#/   ;.

                                  :{  {ALIGNED}                                                \ cfa=     52FC

  (  000052FC  03 36             )                  T+3
  (  000052FE  26 F0 03 06       )                  Tn3/
  (  00005302  70 47             )                  };

  :{  {rp!}   0d  t  r=r  {drop}    };
  :{  {sp!}   sp  t  r=r  {drop}    };
  :{  {cell/}     t  t  2  r=r,a>># };

:.  compile-only    compile-only'  ;.
:.  immediate       immediate'     ;.
:.  16:             :              ;.

here'  last.FLOADed.souce.addr  !.   \  sys  "end"

cortex.m0?  @.
#if
:. P<T*  ( from to len -- )  EXI  INI  rot.   number>232  dup.  number>232  232." t>h"  4 0 DO. COMnKEY DROP. LOOP.
   1-.  BOUNDS.  swap.  ?DO.           COMnKEY  1 ms.  I.  c!'  -1  +LOOP.  ;.

\  P>T*  ( from to len -- )  EXI  INI  swap.  number>232  dup.  number>232  232." t<h"
\  1-.  BOUNDS.  swap.  ?DO.  I.  c@'  COMnEMIT 1 ms.           -1  +LOOP.  ;.


\  P<T*  ( from to len -- )  EXI  INI  rot.   number>232  dup.  number>232  232." t>h"  4 0 DO. COMnKEY DROP. LOOP.
\       BOUNDS.         ?DO.           COMnKEY         I.  c!'       LOOP.  ;.

:. P>T*  ( from to len -- )  EXI  INI  swap.  number>232  dup.  number>232  232." t<h"   1 ms.
        BOUNDS.         ?DO.  I.  c@'  COMnEMIT  ( 1 ms. )           LOOP.  ;.

:. update.p<t*   20000000    20000000   10000   P<T*  ;.  \ It takes 7 second to complete.
:. update.p<t    20000000    20000000   10000   P<T   ;.  \ It takes 7 second to complete.

:. ud*    update.p<t*   ;.
:. ud     update.p<t    ;.

:. update.new.program*  ( -- )  exi  ini   here'  number>232    232." CP !"
   '' cold  ( from )  dup. ( to )   here'  '' cold  -.  ( length )
   DUP.  0<. ABORT". ** HERE' ??? **"  p>t*  ;.

:. update.LAST+CURRENT(target)  ( -- )        EXI  INI
   LAST'  @.  8 -.  32@'  CFA'>NFA'(ADJACENT)  number>232  232." DUP LAST ! CURRENT @ !"  ;.

:. Lm  ( -- )  HEAD>TARGET  update.new.program*   update.LAST+CURRENT(target)      ;.

:. >T- ( -- )  HEAD>TARGET  update.new.program*   update.LAST+CURRENT(target)      ;.

:. >T  ( -- )  Lm  oo  ;.

:.  CONSTANT  t:   {dup}  t=#   ret'  ;.

#then

tachyonForth?  @.
#if   include  tn53.f    DLL  \  words'
   :.  115.2K1  115.2K1  1  COMn !.  ;.
   :.  115.2K4  115.2K4  4  COMn !.  ;.
   :.  115.2K5  115.2K5  5  COMn !.  ;.

#then

stm32F407eF720?  @.
#if  \ include   STM32F407EF720org4.f          2098  last' !.    :.  see  see'  ;.
     \ include   STM32EFORTH720Aorg.f          20D8  LAST'(ADJACENT)   !.  ( 20d8  last' !. )   :.  see  see'  ;.
       include   STM32EFORTH720Gorg1.f

       :.  words'   words'.stm32F407eF720.all  ;.
       :{  push.LR  ed04f842  32,'  };  \  42 F8 04 ED       )                  (R2-4)=lr,p
\      :{  ret      fb04f852  32,'  };  \  52 F8 04 FB       )                  pc=(R2+4),w
       :{  {dup}    5d04f841  32,'  };  \  41 F8 04 5D       )                  (R1-4)=W,p
       :{  {drop}   5b04f851  32,'  };  \  51 F8 04 5B       )                  W=(R1+4),w

       :{  {@}   t  t  r=(r)  };




\ : check.special.instruction?   ( a' -- n | 0 ) dup  ( 2- )  16@'  154E ( cfa'.of.compile @ '' COMPILE ) = if  drop  0  exit  then
\  mecrispForth?
\  if   check.special.literal if  3C ?y  .xxxx  ."   ... "   8  exit  then
\  then
\  dup    ( 4+ )  32@'  ( ?branch  doLit )  0~15<->16~31   _5..10#2.j.j11#>24#  \ drop    C0A6 ( dolit )
\  case
\  ''  ?branch   cfa'.of.?branch  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
        1c4      cfa'.of.?branch  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   branch   cfa'.of.branch   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.?branch* !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.branch*  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   (loop)   cfa'.of.(loop)   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (+loop)   cfa'.of.(+loop)  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   doCON    cfa'.of.doCON    !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   nex.     cfa'.of.nex.     !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
\                cfa'.of.doLit    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
\                cfa'.of.lit      !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
\                cfa'.of.doVAR    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
\                cfa'.of.doUSER   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
\                cfa'.of.doDOES   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
   ''  compile   cfa'.of.compile  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
   ''  ."|       cfa'.of.."|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\  ''  ,"|       cfa'.of.,"|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
   ''  $"|       cfa'.of.$"|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
   ''  abort"    cfa'.of.abor."   !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
\  ''  (IS")     cfa'.of.(IS")    !.  \ @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

\                cfa'.of.?branch* !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.branch*  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (loop)    cfa'.of.(loop)   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (+loop)   cfa'.of.(+loop)  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  doCON     cfa'.of.doCON    !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.nex.*    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
\                cfa'.of.doLit*   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
\                cfa'.of.lit      !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
\                cfa'.of.doVAR*   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
\                cfa'.of.doUSER*  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
   ''  doDOES    cfa'.of.doDOES   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
\ \              cfa'.of.compile  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
\                cfa'.of.."|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\                cfa'.of.,"|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
\                cfa'.of.$"|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
\                cfa'.of.abor."*  !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
\ \              cfa'.of.(IS")    !.  \ @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

   ''  exit      cfa'.of.exit     !.  \ @  of     drop   \.3f---                             0  endof  \  exit
\         drop   0   swap
\  endcase   ;

#then

 stm32F407eF720?     @.
#if   \   include    720NewOrg1.f     :.  see  see'  ;.    2098  last'  !.
      \   include    720RnewLST3.F  ( 720NewLST3.F )  \ Including this file is just for the purpose to remember this file.
     new  include    STM32EFORTH720Gorg1.f

:{  ADDCS_R1,R1.#1     BF28  16,'  1C49  16,'  };
#then

stm32F407eF730?      @.
#if  new  include    STM32F407EF730org1.f     :.  see  see'  ;.    2124  last'  !.

:{  ADDCS_R1,R1.#1     BF28  16,'  1C49  16,'  };

\ : check.special.instruction?   ( a' -- n | 0 ) dup  ( 2- )  16@'  154E ( cfa'.of.compile @ '' COMPILE ) = if  drop  0  exit  then
\  mecrispForth?
\  if   check.special.literal if  3C ?y  .xxxx  ."   ... "   8  exit  then
\  then
\  dup    ( 4+ )  32@'  ( ?branch  doLit )  0~15<->16~31   _5..10#2.j.j11#>24#  \ drop    C0A6 ( dolit )
\  case
\  ''  ?branch   cfa'.of.?branch  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
        1c4      cfa'.of.?branch  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   branch   cfa'.of.branch   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.?branch* !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.branch*  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   (loop)   cfa'.of.(loop)   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (+loop)   cfa'.of.(+loop)  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   doCON    cfa'.of.doCON    !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   nex.     cfa'.of.nex.     !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
\                cfa'.of.doLit    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
\                cfa'.of.lit      !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
\                cfa'.of.doVAR    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
\                cfa'.of.doUSER   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
\                cfa'.of.doDOES   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
   ''  compile   cfa'.of.compile  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
   ''  ."|       cfa'.of.."|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\  ''  ,"|       cfa'.of.,"|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
   ''  $"|       cfa'.of.$"|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
   ''  abort"    cfa'.of.abor."   !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
\  ''  (IS")     cfa'.of.(IS")    !.  \ @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

\                cfa'.of.?branch* !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.branch*  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (loop)    cfa'.of.(loop)   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (+loop)   cfa'.of.(+loop)  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  doCON     cfa'.of.doCON    !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.nex.*    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
\                cfa'.of.doLit*   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
\                cfa'.of.lit      !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
\                cfa'.of.doVAR*   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
\                cfa'.of.doUSER*  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
   ''  doDOES    cfa'.of.doDOES   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
\ \              cfa'.of.compile  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
\                cfa'.of.."|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\                cfa'.of.,"|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
\                cfa'.of.$"|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
\                cfa'.of.abor."*  !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
\ \              cfa'.of.(IS")    !.  \ @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

   ''  exit      cfa'.of.exit     !.  \ @  of     drop   \.3f---                             0  endof  \  exit
\         drop   0   swap
\  endcase   ;

#then




 :.  binary.  2  base.  !.  ;.
 :.  hex.    10  base.  !.  ;.

mecrisp32F429/407?  @.
#if      mecrisp32F407?  on.    new
      :. make.head ( -- )  here'  last'  @.  6  -.  32!'  4  allot'  4000   32,'   ffff  16,'   ;.

       :.  RoR.original  RoR  ;.    \ for the purpose of overriding RoR in mecrispForth
\      :.  RoL.original  RoL  ;.    \ for the purpose of overriding RoL in mecrispForth

   m407?   @.
   #if     include  MECRISP32F407org1.F   20000338 0 32!'                                \  :.  :    t:new   push.LR   ;.
   #else  \ WITH.HEAD?  ON.
     nuc453eF?  @.  \  drop.  0
     #if
\    #else include  MECRISP32F429org3.F   20000338 0 32!'   :.  hex.  10  base.  !.  ;.  \  :.  :    t:new   push.LR   ;. 
     #then                                     10  346C    c!'   \ ( 0000346C  0A 21 )   R1=0A
   #then
 
       :.  RoR  RoR.original  ;.
\      :.  RoL  RoL.original  ;.

       :.  :   T:new(stm32F429mecrispForth)  ( t:new )  push.LR   ;.        :.  ;    ret    insert{  RESOLVE.DATA.PENDED ;.    \  :.  ;  ret  (+target)  off. ;.


  :.   do      (do)    here'  ;.   \ override the previous  do
  :.  ?do     (?do)    here'  ;.   \ override the previous ?do
  :.   loop    (loop)  v=0?   ;.   \ override the previous  loop
  :.  +loop   (+loop)  v=0?   ;.   \ override the previous +loop

\  :.  goto     jmp                            ;.
\  :.  ahead'   here'   here' goto             ;.
\  :.  ahead    here'   here' goto ( jmp )     ;.
\  :.  begin            here'                  ;.

\  :.  if       t 0 r:#   {drop}   HERE' DUP. Z=1?   ;.
\
\  :.  else     else'                                                ;.
\  :.  then     then'   ;.

\  :.  endif            then'                  ;.
\  :.  again            again'                 ;.
\  :.  while    if                             ;.
\  :.  repeat   swap.   again  then ( {drop} ) ;.
\  :.  until    t 0 r:#     {drop}   z=1?      ;.

  :.  goto     jmp                            ;.
  :.  ahead'   here'   here'  jmp_#           ;.
  :.  ahead    here'   here'  goto ( jmp )     ;.

  :.  begin            here'                  ;.

  :.  if       t 0 r:#   {drop}   HERE' DUP. Z=1?   ;.

  :.  else     else'                                                ;.
  :.  then     then'   ;.

  :.  endif            then'                  ;.
  :.  again            again'                 ;.
  :.  while    if                             ;.
  :.  repeat   swap.   again  then ( {drop} ) ;.
  :.  until    t 0 r:#     {drop}   z=1?      ;.

  :.  ahead,     here'   here' goto ( jmp )   >1  ;.
  :.  ahead,,    here'   here' goto ( jmp )   >2  ;.
  :.  ahead,,,   here'   here' goto ( jmp )   >3  ;.
  :.  ahead,,,,  here'   here' goto ( jmp )   >4  ;.

  :.  begin,             here'                >1  ;.
  :.  begin,,            here'                >2  ;.
  :.  begin,,,           here'                >3  ;.
  :.  begin,,,,          here'                >4  ;.

  :.  until,         1>   until  ;.
  :.  until,,        2>   until  ;.
  :.  until,,,       3>   until  ;.
  :.  until,,,,      4>   until  ;.

  :.  again,         >1   again  ;.
  :.  again,,        >2   again  ;.
  :.  again,,,       >3   again  ;.
  :.  again,,,,      >4   again  ;.


  :.  while,         if        ;.
  :.  while,,        if        ;.
  :.  while,,,       if        ;.
  :.  while,,,,      if        ;.

  :.  while,         if >1.    ;.
  :.  while,,        if >2.    ;.
  :.  while,,,       if >3.    ;.
  :.  while,,,,      if >4.    ;.


   :.  else,     1>  else  >1  ;.
   :.  else,,    2>  else  >2  ;.
   :.  else,,,   3>  else  >3  ;.
   :.  else,,,,  4>  else  >4  ;.

  :.  if,            if    >1   ;.
  :.  if,,           if    >2   ;.
  :.  if,,,          if    >3   ;.
  :.  if,,,,         if    >4   ;.

  :.  then,      1>  then       ;.
  :.  then,,     2>  then       ;.
  :.  then,,,    3>  then       ;.
  :.  then,,,,   4>  then       ;.

  :.  else'c=0   here'  here'  c=0?  swap.  then'  ;.
  :.  else'c=1   here'  here'  c=1?  swap.  then'  ;.
  :.  else'z=0   here'  here'  z=0?  swap.  then'  ;.
  :.  else'z=1   here'  here'  z=1?  swap.  then'  ;.
  :.  else'n=0   here'  here'  n=0?  swap.  then'  ;.
  :.  else'n=1   here'  here'  n=1?  swap.  then'  ;.

  :.  repeat'c=0   swap.  c=1?   then'   ;.
  :.  repeat'c=0   swap.  c=1?   then'   ;.
  :.  repeat'z=0   swap.  z=1?   then'   ;.
  :.  repeat'z=0   swap.  z=1?   then'   ;.
  :.  repeat'n=0   swap.  n=1?   then'   ;.
  :.  repeat'n=0   swap.  n=1?   then'   ;.

  :.  else.if        if  swap.   then    ;.
  :.  else.true->    if  swap.   then    ;.

  :.  notif    T 0 R:# {DROP} HERE' DUP. Z=0? ;.
  :.  else.false->   notif  swap.   then      ;.

  :.  until.false->   T 0 R:#   {drop}   z=0?  ;.

  :.  repeat.if       swap.  until          then  ;.
  :.  repeat.true->   swap.  until          then  ;.
  :.  repeat.false->  swap.  until.false->  then  ;.

#then

  stm32F407eF720R?     @.
#if  new  include    STM32F407EF720R5org1.f     :.  see  see'  ;.    20FC  last'  !.
     \    include    720NewLST3.F   \ Including this file is just for the purpose to remember this file.

:{  ADDCS_R1,R1.#1     BF28  16,'  1C49  16,'  };



\ : check.special.instruction?   ( a' -- n | 0 ) dup  ( 2- )  16@'  154E ( cfa'.of.compile @ '' COMPILE ) = if  drop  0  exit  then
\  mecrispForth?
\  if   check.special.literal if  3C ?y  .xxxx  ."   ... "   8  exit  then
\  then
\  dup    ( 4+ )  32@'  ( ?branch  doLit )  0~15<->16~31   _5..10#2.j.j11#>24#  \ drop    C0A6 ( dolit )
\  case
\  ''  ?branch   cfa'.of.?branch  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
        1c4      cfa'.of.?branch  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   branch   cfa'.of.branch   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.?branch* !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.branch*  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   (loop)   cfa'.of.(loop)   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (+loop)   cfa'.of.(+loop)  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   doCON    cfa'.of.doCON    !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''   nex.     cfa'.of.nex.     !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
\                cfa'.of.doLit    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
\                cfa'.of.lit      !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
\                cfa'.of.doVAR    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
\                cfa'.of.doUSER   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
\                cfa'.of.doDOES   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
   ''  compile   cfa'.of.compile  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
   ''  ."|       cfa'.of.."|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\  ''  ,"|       cfa'.of.,"|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
   ''  $"|       cfa'.of.$"|      !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
   ''  abort"    cfa'.of.abor."   !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
\  ''  (IS")     cfa'.of.(IS")    !.  \ @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

\                cfa'.of.?branch* !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.branch*  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (loop)    cfa'.of.(loop)   !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  (+loop)   cfa'.of.(+loop)  !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
   ''  doCON     cfa'.of.doCON    !.  \ @  of  4+    32@'     ffff and  .xx.xx 3C ?y  .xxxxxxxx  4  endof
\                cfa'.of.nex.*    !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  nex.
\                cfa'.of.doLit*   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doLit
\                cfa'.of.lit      !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  lit
\                cfa'.of.doVAR*   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doVar
\                cfa'.of.doUSER*  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doUSER
   ''  doDOES    cfa'.of.doDOES   !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  doDOES
\ \              cfa'.of.compile  !.  \ @  of  4+    32@'               .xx.xx 3C ?y  .xxxxxxxx  4  endof  \  compile
\                cfa'.of.."|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|      \ ?????
\                cfa'.of.,"|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit            endof  \  ,"|
\                cfa'.of.$"|*     !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  $"|
\                cfa'.of.abor."*  !.  \ @  of  4+ dup c@'    swap              .$'   '"' emit   endof  \  abort"   \ ????????
\ \              cfa'.of.(IS")    !.  \ @  of  4+ dup c@'    swap       3C ?y  .$'(fram)        endof  \  (IS")

   ''  exit      cfa'.of.exit     !.  \ @  of     drop   \.3f---                             0  endof  \  exit
\         drop   0   swap
\  endcase   ;

 20fc  LAST'(ADJACENT)  !.    ( 20fc  LAST'  !.  )   214c  org     DUAL.HEAD.FORTH(51EF)? on.

+pcfa?  off.

:.  :  T:new   push.LR  ;.
:.  ;  ret     ;.



  \ -------------------------------------------------------------------------------
:.  AHEAD     ,call.branch*   here'  0000  32,'  ;.
:.  IF        ,call.?branch*  here'  0000  32,'  ;.
:.  ELSE      ,call.branch*   here'  0000  32,'  here'  rot.  32!'  ;.
:.  THEN      here'    swap.               32!'  ;.

:.  BEGIN     BEGIN'                ;.
:.  AGAIN     ,call.branch*   32,'  ;.
:.  UNTIL     ,call.?branch*  32,'  ;.
:.  WHILE     IF                    ;.    :.  REPEAT    SWAP.  AGAIN   THEN   ;.
\   WHILE     IF      SWAP.         ;.    :.  REPEAT           AGAIN   THEN   ;.

:.  ahead   traditional.structure?  @.  if.  ,call.branch*   here'  0000  32,'                      else.  ahead'                       then.  ;.
:.  if      traditional.structure?  @.  if.  ,call.?branch*  here'  0000  32,'                      else.  t:0  {DROP}  if'<>           then.  ;.
:.  else    traditional.structure?  @.  if.  ,call.branch*   here'  0000  32,'  here'  rot.  32!'   else.  else'                        then.  ;.
:.  then    traditional.structure?  @.  if.   here'   swap.  32!'                                   else.  then'                        then.  ;.
:.  again   traditional.structure?  @.  if.  ,call.branch*   32,'                                   else.  again'                       then.  ;.
:.  until   traditional.structure?  @.  if.  ,call.?branch*  32,'                                   else.  t:0  {DROP}  until'<>        then.  ;.
:.  while   if   ;.
:.  repeat  traditional.structure?  @.  if.   SWAP.  AGAIN  THEN                                    else.  swap.    again'  then'       then.  ;.



:.  IF,             IF     >1   ;.
:.  ELSE,           AHEAD   1>  THEN   >1  ;.
:.  THEN,       1>  THEN        ;.
:.  BEGIN,          BEGIN  >1   ;.
:.  AGAIN,      1>  AGAIN       ;.
:.  UNTIL,      1>  UNTIL       ;.
\   WHILE,          WHILE  >1   ;.
:.  WHILE,      1>  IF          ;.
:.  REPEAT,     1>  REPEAT      ;.

:.  IF,,            IF     >2   ;.
:.  ELSE,,          AHEAD   2>  THEN  >2  ;.
:.  THEN,,      2>  THEN        ;.
:.  BEGIN,,         BEGIN  >2   ;.
:.  AGAIN,,     2>  AGAIN       ;.
:.  UNTIL,,     2>  UNTIL       ;.
\   WHILE,,         WHILE  >2   ;.
:.  WHILE,,     2>  IF          ;.
:.  REPEAT,,    2>  REPEAT      ;.

:.  IF,,,           IF     >3   ;.
:.  ELSE,,,         AHEAD   3>  THEN  >3  ;.
:.  THEN,,,     3>  THEN        ;.
:.  BEGIN,,,        BEGIN  >3   ;.
:.  AGAIN,,,    3>  AGAIN       ;.
:.  UNTIL,,,    3>  UNTIL       ;.
\   WHILE,,,        WHILE  >3   ;.
:.  WHILE,,,    3>  IF          ;.
:.  REPEAT,,,   3>  REPEAT      ;.

:.  IF,,,,          IF     >4   ;.
\   ELSE,,,,        ELSE        ;.  \ ????????
:.  ELSE,,,,        AHEAD   4>  THEN  >4  ;.
:.  THEN,,,,    4>  THEN        ;.
:.  BEGIN,,,,       BEGIN  >4   ;.
:.  AGAIN,,,,   4>  AGAIN       ;.
:.  UNTIL,,,,   4>  UNTIL       ;.
\   WHILE,,,,       WHILE  >4   ;.
:.  WHILE,,,,   4>  IF          ;.
:.  REPEAT,,,,  4>  REPEAT      ;.

:.  IF,,,,,         IF     >5   ;.
\   ELSE,,,,,       ELSE        ;.
:.  ELSE,,,,,       AHEAD   5>  THEN  >5  ;.
:.  THEN,,,,,   5>  THEN        ;.
:.  BEGIN,,,,,      BEGIN  >5   ;.
:.  AGAIN,,,,,  5>  AGAIN       ;.
:.  UNTIL,,,,,  5>  UNTIL       ;.
\   WHILE,,,,,      WHILE  >5   ;.
:.  WHILE,,,,,  5>  IF          ;.
:.  REPEAT,,,,, 5>  REPEAT      ;.

:.  AHEAD,          AHEAD  >1   ;.
:.  AHEAD,,         AHEAD  >2   ;.
:.  AHEAD,,,        AHEAD  >3   ;.
:.  AHEAD,,,,       AHEAD  >4   ;.
:.  AHEAD,,,,,      AHEAD  >5   ;.

:.  FOR        >R   here'  ( begin  )  ;.
\ :.  NEXT,     1>   NEXT   ;.     :.  NEXT,,   2>   NEXT  ;.   :.  NEXT,,,   3>   NEXT  ;.  :.  NEXT,,,,   4>   NEXT  ;.   :.  NEXT,,,,,  5>   NEXT  ;.
\ :.  AFT  drop.  ahead'  begin'  swap.  ;.

\ CODE  TEST.FOR.NEXT  ( n lshift -- n2 )    FOR  2*  NEXT   C;

 1a8   cfa'.of.?branch*   !.
 1c0   cfa'.of.branch*    !.

t:new  t1   push.LR   dup    ret
:      t2             dup    ;
:      t3   dup  if   over   then   ;
t:new  t4   push.Lr   12345678  dup  {drop}   ret
:      t5   begin   dup  {dup}  while  drop  repeat  {drop}  ;
:      t6   begin   dup  until  ;
:      t7   12345678  dup  ;
#then
 
:{  r0=s      0  sp   0  r=(r+#)  };
:{  r0=s'     0  sp   4  r=(r+#)  };
:{  r0=s''    0  sp   8  r=(r+#)  };  \  (  0000016A  B8 68             )                  R0=(R7+8)
:{  r0=s'''   0  sp  0c  r=(r+#)  };
:{  r0=s''''  0  sp  10  r=(r+#)  };
:{  r0=s''''' 0  sp  14  r=(r+#)  };

:{  r1=s      1  sp   0  r=(r+#)  };
:{  r1=s'     1  sp   4  r=(r+#)  };
:{  r1=s''    1  sp   8  r=(r+#)  };
:{  r1=s'''   1  sp  0c  r=(r+#)  };
:{  r1=s''''  1  sp  10  r=(r+#)  };
:{  r1=s''''' 1  sp  14  r=(r+#)  };

:{  r2=s      2  sp   0  r=(r+#)  };
:{  r2=s'     2  sp   4  r=(r+#)  };
:{  r2=s''    2  sp   8  r=(r+#)  };
:{  r2=s'''   2  sp  0c  r=(r+#)  };
:{  r2=s''''  2  sp  10  r=(r+#)  };
:{  r2=s''''' 2  sp  14  r=(r+#)  };

:{  r3=s      3  sp   0  r=(r+#)  };
:{  r3=s'     3  sp   4  r=(r+#)  };
:{  r3=s''    3  sp   8  r=(r+#)  };
:{  r3=s'''   3  sp  0c  r=(r+#)  };
:{  r3=s''''  3  sp  10  r=(r+#)  };
:{  r3=s''''' 3  sp  14  r=(r+#)  };



:{  s=r0        sp   0   0  (r+#)=r  };
:{  s'=r0       sp   4   0  (r+#)=r  };
:{  s''=r0      sp   8   0  (r+#)=r  };
:{  s'''=r0     sp  0c   0  (r+#)=r  };
:{  s''''=r0    sp  10   0  (r+#)=r  };
:{  s'''''=r0   sp  14   0  (r+#)=r  };

:{  s=r1        sp   0   1  (r+#)=r  };
:{  s'=r1       sp   4   1  (r+#)=r  };
:{  s''=r1      sp   8   1  (r+#)=r  };
:{  s'''=r1     sp  0c   1  (r+#)=r  };
:{  s''''=r1    sp  10   1  (r+#)=r  };
:{  s'''''=r1   sp  14   1  (r+#)=r  };

:{  s=r2        sp   0   2  (r+#)=r  };
:{  s'=r2       sp   4   2  (r+#)=r  };
:{  s''=r2      sp   8   2  (r+#)=r  };
:{  s'''=r2     sp  0c   2  (r+#)=r  };
:{  s''''=r2    sp  10   2  (r+#)=r  };
:{  s'''''=r2   sp  14   2  (r+#)=r  };

:{  s=r3        sp   0   3  (r+#)=r  };
:{  s'=r3       sp   4   3  (r+#)=r  };
:{  s''=r3      sp   8   3  (r+#)=r  };
:{  s'''=r3     sp  0c   3  (r+#)=r  };
:{  s''''=r3    sp  10   3  (r+#)=r  };
:{  s'''''=r3   sp  14   3  (r+#)=r  };


:{  s=t            sp   0  t  (r+#)=r   };   \ (  000001D8  FE 60             )                  (SP+0C)=T
:{  s'=t           sp   4  t  (r+#)=r   };
:{  s''=t          sp   8  t  (r+#)=r   };
:{  s'''=t         sp  0c  t  (r+#)=r   };
:{  s''''=t        sp  10  t  (r+#)=r   };
:{  s'''''=t       sp  14  t  (r+#)=r   };

:{  t=s         t  sp   0     r=(r+#)   };
:{  t=s'        t  sp   4     r=(r+#)   };
:{  t=s''       t  sp   8     r=(r+#)   };
:{  t=s'''      t  sp  0c     r=(r+#)   };
:{  t=s''''     t  sp  10     r=(r+#)   };
:{  t=s'''''    t  sp  14     r=(r+#)   };


special.for.swiftxForth?     @.
#if       :{ {swap} r0=s s=t t=r0 };
#then

mecrisp32F429/407?  @.  \ drop.   -1
#if   :.   words'    ( cls ) t:words.mecrispCMx.stm32F429   words'.stm32F429  ;.
   m407?   @.
   #if     3ae4  org   3958  ( last' ) current.nfa'  !.
   #else   39b0  org   3812  ( last' ) current.nfa'  !.
   #then

      :{  t=r  t=(rp)  };   \ ??????????????????

\     :{  rp=20000338  D04CF8DF  32,'  };   \ (  000035FA  DF F8 4C D0       )

      :. constant   T:new(stm32F429mecrispForth)  {dup}               t=#          ret'  ;.
      :. variable   T:new(stm32F429mecrispForth)  {dup}  here'  2 +.  t=#  0 32,'  ret'  ;.   \ ram
\     :. var        T:new(stm32F429mecrispForth)  {dup}  var(rom)     t=#  0 32,'  ret'  ;.   \ rom

      :. for    {>r}  here'  ;.



\                                     T:new(stm32F429mecrispForth)
                                      t:  nex.   \ swiftx_Forth_styled nex.
  (  00000BA0  04 BC             )              pop.r2
  (  00000BA2  01 3A             )              R2-1
  (  00000BA4  04 B4             )              push.r2
  (  00000BA6  00 2A             )              2  0  r:#  \  R2:0                                                            \
  (  00000BA8  01 D5             )       if'n=1  \      BAE....n=0?(+?)
  (  00000BAA  0D F2 04 0D       )              {r>drop}   \  RD=RD+4
  (  00000BAE  70 47             )       then'  ret'       \  jmp_RE



                                      t: -nex.   \ swiftx_Forth_styled nex.
  (  00000BA0  04 BC             )              pop.r2
  (  00000BA2  01 3A             )              2  t r-r   {drop}  \  R2-1
  (  00000BA4  04 B4             )              push.r2
  (  00000BA6  00 2A             )              2  0  r:#  \  R2:0                                                            \
  (  00000BA8  01 D5             )       if'n=1  \      BAE....n=0?(+?)
  (  00000BAA  0D F2 04 0D       )              {r>drop}   \  RD=RD+4
  (  00000BAE  70 47             )       then'  ret'       \  jmp_RE


      :.  -next   0  '' -nex.   1+.   ldri    0  call_r    n=0?   ;.   \ ????????
      :.   next   0  ''  nex.   1+.   ldri    0  call_r    n=0?   ;.

:.  y:w   y w  r:r  ;.

variable.  ?do?
:.   do   ( upper lower -- )         { r4,  r5, }  push   y t r=r  {drop}   w t r=r  {drop}             here'    1 ?do? +!.  ;.
:.  ?do   ( upper lower -- )         { r4,  r5, }  push   y t r=r  {drop}   w t r=r  {drop}   y:w if'<> here'   -1 ?do? +!.  ;.
:. ?loop    y+1   y:w   z=0?  then'  { r4,  r5, }  pop    ;.
:.  loop    y+1   y:w   z=0?         { r4,  r5, }  pop    ;.

\ usage:  : pp  10  0  ?do  i .  ?loop  ;    \  see pp    '' pp  dup.  66  p>t
\         : qq  10  0   do  i .   loop  ;





:.  y+w   y w r+r  ;.     \ ?????????????????????

mecrisp32F429/407? @.
#if    :.  y+w   442c  16,'  ;.
#then


:.  y-w   y w r-r  ;.
:.  +loop                 y 80000000  r+#  y-w  y+t  {drop}  y+w   y 80000000  r-#  v=0?   { R4, R5, }  pop  ;.

\ :  test1    10   3  do  i . loop ;
\ :  test2    9    2  do  cr  7 3 do  j .  i . loop loop ;

:. >m  ( from to -- ) 1+. swap. do.  i.  c@'  8,'  loop.  ;.
  \ -------------------------------------------------------------------------------
                                    t:  initialize.1
  (  000016D0  1D 49             )                  R1=40023800          \ RCC_BASE               \ (00001748)=40023800
  (  000016D2  4F F4 80 30       )                  R0=10000
  (  000016D6  08 60             )                  (R1)=R0

                                                 \  (40023800)=10000

  (  000016D8  08 68             )      begin'      R0=(R1)
  (  000016DA  00 F4 00 30       )                  R0n20000
  (  000016DE  FB D0             )      until'z=0 \ 16D8....z=1?(=?)
  (  000016E0  1A 49             )                  R1=40023808          \ RCC_CFGR               \ (0000174C)=40023808
  (  000016E2  4F F0 01 00       )                  R0=1
  (  000016E6  08 60             )                  (R1)=R0

                                                 \  (40023808)=1

  (  000016E8  17 49             )                  R1=40023800          \ RCC_BASE               \ (00001748)=40023800
  (  000016EA  08 68             )                  R0=(R1)
  (  000016EC  20 F0 01 00       )                  R0n1/
  (  000016F0  08 60             )                  (R1)=R0

                                                 \  (40023800)n1/

  (  000016F2  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  initialize.2
  (  000016F4  16 49             )                  R1=40023830          \ RCC_AHB1ENR            \ (00001750)=40023830
  (  000016F6  17 48             )                  R0=001007FF                                   \ (00001754)=001007FF
  (  000016F8  08 60             )                  (R1)=R0

                                                 \  (40023830)=001007FF

  (  000016FA  17 49             )                  R1=40020000          \ AHB1PERIPH_BASE        \ (00001758)=40020000
  (  000016FC  08 68             )                  R0=(R1)
  (  000016FE  40 F4 20 10       )                  R0o280000
  (  00001702  08 60             )                  (R1)=R0

                                                 \  (40020000)o280000

  (  00001704  15 49             )                  R1=40020024          \ GPIOA_AFRH             \ (0000175C)=40020024
  (  00001706  16 48             )                  R0=00000770                                   \ (00001760)=00000770
  (  00001708  08 60             )                  (R1)=R0

                                                 \  (40020024)=00000770

  (  0000170A  16 49             )                  R1=40023844          \ RCC_APB2ENR            \ (00001764)=40023844
  (  0000170C  16 48             )                  R0=00000010          \ DMA1_STREAM5_IRQN      \ (00001768)=00000010
  (  0000170E  08 60             )                  (R1)=R0

                                                 \  (40023844)=00000010

  (  00001710  16 49             )                  R1=40011008          \ USART1_BRR             \ (0000176C)=40011008
  (  00001712  46 20             )                  R0=46
  (  00001714  08 60             )                  (R1)=R0

                                                  \ (40011008)=46

  (  00001716  16 49             )                  R1=4001100C          \ USART1_CR1             \ (00001770)=4001100C
  (  00001718  16 48             )                  R0=0000200C                                   \ (00001774)=0000200C
  (  0000171A  08 60             )                  (R1)=R0

                                                  \ (4001100C)=0000200C

  (  0000171C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  initialize.all
  (  0000171E  00 B5             )                  push.LR
  (  00001720  FF F7 D6 FF       )                  initialize.1   \  rcall_16D0
  (  00001724  FF F7 E6 FF       )                  initialize.2   \  rcall_16F4
  (  00001728  00 BD             )                  ret
  \ -------------------------------------------------------------------------------
                                    t:  emit*
  (  00001696  2B 48             )                  R2=40011000          \ USART1_BASE            \ (00001744)=40011000
  (  0000169A  80 20             )                  R0=80
  (  00001698  01 68             )      begin'      R1=(R2)
  (  0000169C  01 40             )                  R1nR0
  (  0000169E  00 D0             )      until'z=0
  (  00001646  3E 4A             )                  R2=40011004          \ USART1_DR              \ (00001740)=40011004
  (  00001648  16 70             )                  2 t (r)=r,b  \ (R2)=T,b
  (  0000164A  40 CF             )                  {drop}
  (  0000164C  00 BD             )                  ret'


                                    t:  ?key*       {0}  \  0 ...
  (  000016C2  20 48             )                  R0=40011000          \ USART1_BASE            \ (00001744)=40011000
  (  000016C4  01 68             )                  R1=(R0)
  (  000016C6  20 20             )                  R0=20
  (  000016C8  01 40             )                  R1nR0
                                                 \  R1=(40011000)n20
  (  000016CA  00 D0             )      if'z=0
  (  000016CC  F6 43             )                  {invert}
  (  000016CE  00 BD             )      then        ret'


                                    t:  key*        push.LR
                                                    begin  ?key*   until   {dup}
  (  00001670  33 4A             )                  R2=40011004          \ USART1_DR              \ (00001740)=40011004
  (  00001672  16 78             )                  7816 16,' \  t 2  r=(R)b  ????????????
  (  00001674  00 BD             )                  ret

\    include  tF17.f


nuc442eF?  @.
#if
#else
   variable.  cfa'.of.eForth      12345678   cfa'.of.eForth  !.

:                 110000.20010000.1FF00.move   110000   20010000  1FF00  move  ;
:  eF20020000     110000.20010000.1FF00.move   cfa'.of.eForth  @.  ...   execute  ;  \  to be modified later
:  eF20028000     110000.20010000.1FF00.move   cfa'.of.eForth  @.  ...   execute  ;  \  to be modified later
:  eF51           110000.20010000.1FF00.move   cfa'.of.eForth  @.  ...   EXECUTE  ;  \ ( cold )  2BFEC === eForth
\  t: eF51'       r0=2BFED   0  jmp_r   -ret  \ ??????????????????  t: is not allowed in mecrispForth
#then






                                   t:  setup.clocks                                            cfa= AE4
  (  000016D0  1D 49             )                  R1=40023800                                   \ (00001748)=40023800
  (  000016D2  4F F4 80 30       )                  R0=10000
  (  000016D6  08 60             )                  (R1)=R0
                                          begin'                     \ 000016DE --> 000016D8 -------------------------------
  (  000016D8  08 68             )                  R0=(R1)
  (  000016DA  00 F4 00 30       )                  R0n20000
  (  000016DE  FB D0             )        until'<> \ z=1? eq?        \ 000016DE --> 000016D8 -------------------------------
  (  000016E0  1A 49             )                  R1=40023808                                   \ (0000174C)=40023808
  (  000016E2  4F F0 01 00       )                  R0=1
  (  000016E6  08 60             )                  (R1)=R0
  (  000016E8  17 49             )                  R1=40023800                                   \ (00001748)=40023800
  (  000016EA  08 68             )                  R0=(R1)
  (  000016EC  20 F0 01 00       )                  R0n1/
  (  000016F0  08 60             )                  (R1)=R0
\ (  000016F2  70 47             )                  ret'
  \ ------------------------------------------------------------------------
\                                   t:  setup.uart                                              cfa= B0A
  (  000016F4  16 49             )                  R1=40023830                                   \ (00001750)=40023830
  (  000016F6  17 48             )                  R0=001007FF                                   \ (00001754)=001007FF
  (  000016F8  08 60             )                  (R1)=R0
  (  000016FA  17 49             )                  R1=40020000                                   \ (00001758)=40020000
  (  000016FC  08 68             )                  R0=(R1)
  (  000016FE  40 F4 20 10       )                  R0o280000
  (  00001702  08 60             )                  (R1)=R0
  (  00001704  15 49             )                  R1=40020024                                   \ (0000175C)=40020024
  (  00001706  16 48             )                  R0=00000770                                   \ (00001760)=00000770
  (  00001708  08 60             )                  (R1)=R0
  (  0000170A  16 49             )                  R1=40023844                                   \ (00001764)=40023844
  (  0000170C  16 48             )                  R0=00000010                                   \ (00001768)=00000010
  (  0000170E  08 60             )                  (R1)=R0
  (  00001710  16 49             )                  R1=40011008                                   \ (0000176C)=40011008
  (  00001712  46 20             )                  R0=46
  (  00001714  08 60             )                  (R1)=R0
  (  00001716  16 49             )                  R1=4001100C                                   \ (00001770)=4001100C
  (  00001718  16 48             )                  R0=0000200C                                   \ (00001774)=0000200C
  (  0000171A  08 60             )                  (R1)=R0
  (  0000171C  70 47             )                  ret'

:. set.(LFA)=0  ( cfa' -- )  0   swap.  cfa'>lfa'(lnc)  0=. abort".  **** illegal LFA' **** "   32!'  ;.
:. nfa.link.to.former.last' ( cfa' -- )  cfa'>nfa'(lnc)  0=. abort".  **** illegal NFA' **** "   former.last'  !.  ;.

nuc453eF?  @.
#if
#else
\ *******************************************************************************************************
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           130000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           140000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           150000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           160000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
#then


nuc453eF?  @.
#if
#else
\ *******************************************************************************************************
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           1A0000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           1B0000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           1C0000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           1D0000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           1E0000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

           1F0000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

         20028000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool      \  8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
''  cold   cfa'.of.cold.20020000   !.         ''  cold   ''  eF20020000  12  +.  dup.  32@' cfa'.of.eForth  @.  =.  #if  32!'  #else  abort".  *** not right place **"  #then
\ =======================================================================================================


                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

         20020000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom  !.   include  865N18.F
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool      \  8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
''  cold   cfa'.of.cold.20028000   !.         ''  cold   ''  eF20028000  12  +.  dup.  32@' cfa'.of.eForth  @.  =.  #if  32!'  #else  abort".  *** not right place **"  #then
\ =======================================================================================================

#then


































103mF?  @.
#if   
\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

            08000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.  include  865N18.F   \ j
         USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'
         USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'     ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then

\ =======================================================================================================
#then



 























































































variable.  cfa'.of.t>h          
variable.  cfa'.of.t<h
 

\      (a')=FFFFFFFF  @. ( 4fff0 )       0001338e                                      32!'   \ ?????? TO BE CHANGED

\   :.  mmm     3EEE   cfa'.of.t<h  !.  ;.  \  mecrispForth
\   :.  ttt   '' t<h   cfa'.of.t<h  !.  ;.  \ target eForth


    :.  words(adjacent)   LAST'(ADJACENT)     @.
        begin.  cr.   dup.    count'  1f    and.    type'
                4  -. 32@'    dup.    0=.
        until.  drop.   ;.

    variable.  decompile.all.being.done?

\    :.  get.total.words(adjacent)  ( -- n )   0       >r.     LAST'(ADJACENT)     @.
\        begin.  decompile.all.being.done? @.  not. if.  head.spacing  @.  lfa+nfa+cfa.counter  +!.  then.
\                r>.     1+.    >r.
\                4  -.   32@'   dup.   0=.
\        until.  drop.   r>.    decompile.all.being.done?  on.  ;.

\    :.  get.total.words(adjacent)     lfa+nfa+cfa.COUNTER  @.  head.spacing  @.  /.  ;.

    :.  words(adjacent)'       0      >r.     LAST'(ADJACENT)     @.
        begin.  cr.    r>.     1+.    dup>r.  dup.  decimal.  9 u.r.  3 spaces.  10  base.  !.  ( hex. )  9 u.r.   3  spaces.
                dup.   count'  1f     and.    type'
                4  -.  32@'    dup.   0=.
        until.  drop.  r>drop.   ;.

    :.  nfa'>cfa(MULTIPLE.OF.4.ALIGNED)  ( nfa' -- cfa' )   count'  1f  and.  +.  MULTIPLE.OF.4.ALIGNED  ;.

    :.  cmove**  ( from' to len -- )  0   do. over.  i.  +.  c@'  over.  i.  +.  c!.  loop.   2drop.  ;.

    :.  words>lfa+nfa+cfa   ( -- )   get.total.words(adjacent)  1-.  head.spacing  @.  *.
        0       >r.     LAST'(ADJACENT)     @.
        begin.  dup.                                   2  pick.   r@.  -.  lfa+nfa+cfa.array   +.   8  +.  !.
                dup. 4  -. 32@'                        2  pick.   r@.  -.  lfa+nfa+cfa.array   +.   0  +.  !.            \  lfa'    8
                dup. count'    dup.                    4  pick.   r@.  -.  lfa+nfa+cfa.array   +.  10  +. c!.            \  length  1
                           1f  and.                    3  pick.   r@.  -.  lfa+nfa+cfa.array   +.  11  +. swap.  cmove** \  nfa'   31      8+8+8+1+31=50=32h
                dup. nfa'>cfa(MULTIPLE.OF.4.ALIGNED)   2  pick.   r@.  -.  lfa+nfa+cfa.array   +.  head.spacing @. 10 -. ( 30 )  +.  !.
                r>.    head.spacing  @. ( 64 ) +.   >r.
                4  -.  32@'    dup.   0=.
        until.  drop.   r>drop.  drop.  ;.

    :.  16@.  @.  ffff  and.  ;.

:. ret+3F***?  ( n -- f )  head.spacing  @. *.  lfa+nfa+cfa.array  +.  @.  dup. -1 =.  if. drop.  0  exit.  then.  2 -. 16@'  608c  and.  608c  =.  ;.

comment:
ice40?  @.
#if
    :.  .lfa+nfa+cfa(n)   ( n -- )  ( n=0 1 2 3 ... )    base.   @.  >r.       head.spacing  @. *.  >r.
\       ( words>lfa+nfa+cfa )      get.total.words(adjacent)  head.spacing  @. *.  0
      ( do. ) cr.  r@. head.spacing  @.  /.  dup.   dup. 0=.  over.  ret+3F***?  or.  if.  \.3F***.NO.CR  else.  \.3F---.NO.CR   then.
              decimal.  5  u.r.  dup.  hex. 5 u.r.  head.spacing @.   *.  0a u.r.  .".  <-- n "
                   r@. head.spacing  @.  /.  drop.  0  \ 23c.361.between?   \   361  between.
          if.
              cr.  r@. lfa+nfa+cfa.array  +.  8 +.  @.   6  -.     0d u.r.
                   r@. lfa+nfa+cfa.array  +.  dup.
                                              head.spacing  @.  +.  8   +.   @.  6 -.         0d u.r. .".  *"
                                                                                       5d ?y  0a u.r. .".  *  lfa"
                   r@. lfa+nfa+cfa.array  +.  head.spacing  @.  +.  8   -. 16@.        2a ?y  0a u.r. .".  <-- flag ( mecrispForth )"
          else.
              cr.  r@. lfa+nfa+cfa.array  +.             @.        0d u.r.
                   r@. lfa+nfa+cfa.array  +.  dup. 8 +.  @.        0d u.r.  .".  *"    5d ?y  0a u.r. .".  *  lfa"
          then.
\             cr.  r@. lfa+nfa+cfa.array  +.  dup. dup. @.  2 +.       0d u.r.   .".  *"    46 ?y  0a u.r. .".  *"
              cr.  r@. lfa+nfa+cfa.array  +.  dup.  @.  dup.  -1  =.
              if.      -1    0d  u.r.  drop.  24 ?y  10 +. dup.  count.  1f and.  type.
              else.    2 +.  0d  u.r.         24 ?y  10 +. dup.  count.  1f and.  type.
              then.    \  .".  *"    46 ?y  0a u.r. .".  *"
                       5d ?y  0a u.r. .".     nfa"
              cr.  r@. lfa+nfa+cfa.array  +.  head.spacing @. 10 -. ( f0 ) +. dup.  @.        0d u.r. .".  **"   5d ?y  0a u.r. .".  ** cfa"
                   r@. lfa+nfa+cfa.array  +.  head.spacing @.  8 -. ( f8 ) +.       @.  2d ?y 0d u.r. .".  **"
                   r>. lfa+nfa+cfa.array  +.  head.spacing @.  4 -. ( fc ) +.       @.  3d ?y 0d u.r. .".  **"
\                  head.spacing  @.  ( 64 )
      ( +loop. )   r>.   base.   !.  ;.
#else
    :.  .lfa+nfa+cfa(n)   ( n -- )      base.   @.  >r.       head.spacing  @. *.  >r.
\       ( words>lfa+nfa+cfa )      get.total.words(adjacent)  head.spacing  @. *.  0
      ( do. ) cr.  r@. head.spacing  @.  /.  dup.  dup. 0=. if. \.3F***.NO.CR  else. \.3F---.NO.CR  then.  decimal.  5  u.r.  hex. 5 u.r.
                   r@. head.spacing  @.  /.  23c.361.between?   \   361  between.
          if.
              cr.  r@. lfa+nfa+cfa.array  +.  8 +.  @.   6  -.     0d u.r.
                   r@. lfa+nfa+cfa.array  +.  dup.
                                              head.spacing  @.  +.  8   +.   @.  6 -.         0d u.r. .".  *"
                                                                                       5d ?y  0a u.r. .".  *  lfa"
                   r@. lfa+nfa+cfa.array  +.  head.spacing  @.  +.  8   -. 16@.        2a ?y  0a u.r. .".  <-- flag ( mecrispForth )"
          else.
              cr.  r@. lfa+nfa+cfa.array  +.  8 +.  @.   nfa'-lfa' ( 6 ) -.     0d u.r.
                   r@. lfa+nfa+cfa.array  +.  dup.       @.        0d u.r.  .".  *"    5d ?y  0a u.r. .".  *  lfa"
          then.
              cr.  r@. lfa+nfa+cfa.array  +.  dup.  8 +. dup.  @.  0d u.r.  .".  *"    46 ?y  0a u.r. .".  *"
                       10  +.   dup.      dup.  @.  FFFFFFFF   =.
                       if.      drop.
                       else.    24 ?y  count.  1f and.  type.
                       then.    5d ?y  0a u.r. .".     nfa"
              cr.  r>. lfa+nfa+cfa.array  +.  head.spacing @. 10 -. ( f0 ) +. dup.  @.        0d u.r. .".  **"   5d ?y  0a u.r. .".  ** cfa"
\                  head.spacing  @.  ( 64 )
      ( +loop. )   r>.   base.   !.  ;.
#then
comment;

:.  i>cfa*(lnc)   ( n -- cfa' )  lfa+nfa+cfa.array  +.  head.spacing  @.  10  -. ( f0 )  +.  ( cfa* )  ;.

2variable.  cfa'.to.next.cfa'.distance

:.  get.size  ( cfa' -- next.cfa' distance )          0  7fffffff  cfa'.to.next.cfa'.distance  2!.
    get.total.words(adjacent)  head.spacing  @.  *.   0
    ?do.      i.  i>cfa*(lnc)  @.  over.  -. dup>r.   cfa'.to.next.cfa'.distance  2@.  nip.  <.  r@.  0>.  and.
                                             r>.      cfa'.to.next.cfa'.distance  2@.  nip.  <.            and.
       if.    i.  i>cfa*(lnc)  @.  2dup.  swap.  -.   cfa'.to.next.cfa'.distance  2!.
       then.  head.spacing     @.
    +loop.    drop.  cfa'.to.next.cfa'.distance   2@.   ;.

:.  a'>next.cfa'    ( a' -- next.cfa' )     get.size   drop.  ;.

:.  a'>next.n(lnc)  ( a' -- n )   a'>next.cfa'  cfa'>n(lnc)   ;.

:.  a'>former.cfa'  ( a' -- former.cfa' )      a'>next.n(lnc)
    if.       head.spacing  @.  2*.  -.  dup.  0 >=.
       if.    n>cfa'(lnc)
       else.  0
       then.
    else.     0
    then.     ;.

:.  a'>current.cfa'  ( a' -- current.cfa' )    a'>next.n(lnc)
    if.       head.spacing  @.       -.  dup.  0 >=.
       if.    n>cfa'(lnc)
       else.  0
       then.
    else.     0
    then.     ;.

:.  a'.is.within.current.word?  ( a' cfa' -- f )  dup>r.  a'>current.cfa'  r>.  a'>next.cfa'  within.  ;.

'.  a'.is.within.current.word?   is.  _a'.is.within.current.word?

variable.  first.word's.cfa'  8  first.word's.cfa' !.

:.  words'(get.size)    ( -- )    0  >r.  first.word's.cfa' @.  ( 8 )
    begin.    cr.   .". ("  r@.   5  .r(decimal)  r@.  5 .r. .".  ) "  r>. 1+.  >r.   dup.  cfa'>n(lnc)
       if.    head.spacing  @.  /.  nth.word's.lfa'+nfa'+cfa''
       then.  get.size    drop.  ( next.cfa' )  dup.  last'  @.  nfa'>cfa'(lnc)  =.
    until.    r>drop.     drop.  cr.  ;.

:.  next.cfa',size>lnc.array  ( -- )         get.total.words(adjacent)        head.spacing  @.  *.     0
    ?do.    i.  i>cfa*(lnc)  @.  ( cfa' )    get.size  i.  lfa+nfa+cfa.array  head.spacing  @.  8  -.  +. +.  2!.
            head.spacing     @.
    +loop.  ;.






























    :.  .lfa+nfa+cfa   ( -- )         cr.    next.cfa',size>lnc.array   base.   @.   >r.
        get.total.words(adjacent)  0
        ?do.        i.    .lfa+nfa+cfa(n)   key?.  if.  leave.  then.
        loop.       r>.   base.   !.  cr.   ;.

    '.  .lfa+nfa+cfa  IS.   _.lfa+nfa+cfa

    :.  .lnc          .lfa+nfa+cfa   ;.
    :.  .lnc'    cls  .lfa+nfa+cfa   ;.
















    :.  decompile.all  ( -- )  0  '' bit@  0c -.  32!' ( 0  20028600  32!' )   base.  @.  >r.   .lfa+nfa+cfa   cr.  cr.  cr.  cr.  cr.
        ( words>lfa+nfa+cfa )      get.total.words(adjacent)  head.spacing  @. *.  0
        do.   cr.            i.  head.spacing  @.  /.  dup.   \.3F---.NO.CR   decimal.       5 u.r.  hex. 5 u.r.
                             i.  lfa+nfa+cfa.array  +.                   0a u.r.
                             i.  lfa+nfa+cfa.array  +. head.spacing @. 10 -. ( 30 ) +.  @.          0f u.r. \ pcfa'   8
              cr.  .".   ("  i.  lfa+nfa+cfa.array  +.  8 +.  @.   4  -. 0a u.r.
                             i.  lfa+nfa+cfa.array  +.  0 +.  @.         0d u.r.         21 ?y   .". )"
              cr.  .".   ("  i.  lfa+nfa+cfa.array  +.  dup.  8 +.  @.   0a u.r. 10  +.
                   count.  dup.  2 spaces. .xx   1f  and. bounds.  do.  space.  i.  c@.  .xx  loop. 6e ?y  .".  )"
                   drop. \ .". )  t:  "  count.  1f  and. type.
                             i.  lfa+nfa+cfa.array  +.  head.spacing @. 10 -. ( 30 ) +. @.
           begin.  U1           dup.
                             i.  lfa+nfa+cfa.array  +.  head.spacing  @.  8  ( 48 ) +. @.  5  -.  u>.
           until.  drop.
                   head.spacing  @.  ( 64 )       \    key?  if.  leave.  then.
        +loop.     r>.   base.  !.  ;.

    :.  dall    ( 20014000  700U  30U )  decompile.all  ;.
    :.  doll    DALL  ;.

  #then

\ mecrisp32F407?    @.
  m407?             @.
  #if    \ 0  rom.start  !.   30000  rom.end  !.  \ 16*64k
              3684  10 swap.  c!'    \  (  00003684  0A 21             )
                    18e  to.  0E2/18E/156|429/407/103 
             :.     words'    T:WORDS.MECRISPCMX.STM32F429   ( words'.stm32F407 )  ;.
  #else   20000338  0  32!'   382d  4  32!'

    variable.  link.with.51eForth?               link.with.51eForth?  on.
               link.with.51eForth?  @.
    #if                                   \  mecrispForth only
    #else               4000  3EE4  32!'  \  mecrispForth linking with 51eForth
  \ *******************************************************************************
  (      3EE4     10834          )
  (      3EE8         0          )
  (      3EEA  03 54 3C 50       )
  \ *******************************************************************************
  \                                 t:  t<h                                                   \ cfa=     3EEE
    #then
:.       mecrispForth+eF51  10834  3EE4  32!'  ;.
:.       mecrispForth.only   4000  3EE4  32!'  ;.
:.  mo   mecrispForth.only     ;.
:.  me   mecrispForth+eF51     ;.
  #then
#then
   nuc453eF?  @.
   #if
   #else    include   PRJIMAGE4.F  \  oo1  m2t+
   #then
   
:.  LCD+eF2002xxxx    20010000  110000  20000  cmove'      ( 200000   PROGRAM.LENGTH   !. )  ;.  \  1.hex  ;.
:.  LeF    LCD+eF2002xxxx  ;.                              ( 384K )

    LeF    \ delet it to check.blank    \  30000  4000  check.blank     40000  35000  check.blank

    -cr  20000400  org   ( 3812  last'  !. )    1.hex    DOS  hex2bin   1.hex

429.only?   @.
#if         :.  variable  var  ;.
  nuc453eF?  @.
  #if
  #else     include  STM32F4_DAC864b.f   append.(lfa')+flag+nfa'>LNC.array(103mF)
         \  include  429demoORG6.f                 \  include  429demoORG6A.f
            include  show_10_oscilloscopeORG5.f    \  include  show_10_oscilloscopeORG5A.f
         \  include  STM32F429AlbertOrg1.f         \  include  STM32F429AlbertOrg1A.f
         \  include  STM32F429AlbertOrg3.f         \  include  STM32F429AlbertOrg3A.f
         \  include  429LEDORG3.F                  \  include  429LEDORG3A.F
         \  include  103-1.f
         \  include  103hello1.f
         \  include  103mForg4.f   \ stm32f103 mecrispForth
         \  include  103MFandEForg2.f
         \  include  NUC140UARTorg1.F
         \  include  NUC472UARTorg4.F
         \  include  NUC472LEDorg1.F
         \  include  NUC140LEDorg1.F
         \  include  NUC140org1.F       \ removed
            include  NUC442eForthORG1.F
         \  include  NUC472_TARGET_PIN_ADDRESS1.F
         \  include  nuc442TemplateOrg1.f
  #then
  now.is.mF?  @.
  #if
  #else     now.is.mF?  off.
            new  MAX LFA+NFA+CFA.COUNTER  off.
            include  show_10_oscilloscopeORG2.f


\           include  STM32F429albertOrg2.f
        \   cls  .lnc
        \         lnc
        \   >x    lnc   x>
  #then

#then   \   '.  dup   @.  cfa.of.dup.@   !.
        \   '.  quit  @.  cfa.of.quit.@  !.
                                                                     
\ inf
\  include  103MFandTForg1a.f   \ for the saving of testing time purpose.

:.  U<<         lshift.           ;.
:.  UL<<        lshift.           ;.
:.  (#)|=#<<#   lshift.  (#)=#    ;.
:.  (#)=~#               (#)=#/   ;.
:.  (#)&=#               (#)n#    ;.
:.  (#)&=~#              (#)n#/   ;.
:.  (#)&=~#<<#  UL<<     (#)n#/   ;.
:.  (#)&=#<<#   UL<<     (#)n#    ;.
:.  (#)&=~#<<#  UL<<     (#)&=~#  ;.

 








































:.  org+offset  new.system.offset  @.  +.  org  ;.

  :. ,doNEX.    cfa'.of.doNEX.   @.  ,call.cfa'  ;.
  :. ,doVAR     cfa'.of.doVAR    @.  ,call.cfa'  ;.
  :. ,doUSER    cfa'.of.doUSER   @.  ,call.cfa'  ;.
  :. ,doLIT     cfa'.of.doLIT    @.  ,call.cfa'  ;.


\ :.  doLIT'    cfa'.of.doLIT    @.  ,call.cfa'  bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doLIT'           ,doLIT                    bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doUSER'          ,doUSER                   bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doVAR'           ,doVAR                    bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.   nex.'           ,doNEX.                   bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.


  :. ,doNEX.*   cfa'.of.doNEX.*  @.  ,call.cfa'  ;.
  :. ,doVAR*    cfa'.of.doVAR*   @.  ,call.cfa'  ;.
  :. ,doUSER*   cfa'.of.doUSER*  @.  ,call.cfa'  ;.
  :. ,doLIT*    cfa'.of.doLIT*   @.  ,call.cfa'  ;.

\ :.  doLIT'*   cfa'.of.doLIT*   @.  ,call.cfa'  bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doLIT'*          ,doLIT*                   bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doUSER'*         ,doUSER*                  bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doVAR'*          ,doVAR*                   bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.   nex.'*          ,doNEX.*                  bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.


  :.  doLIT'*          ,doLIT*                   bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doUSER'*         ,doUSER*                  bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.  doVAR'*          ,doVAR*                   bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.
  :.   nex.'*          ,doNEX.*                  bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.


\ :. dolit'  doLIT    bl. word.  count.  string>number  0=.  abort".  *** invalid number ***"   32,'  ;.

variable.  cfa'.of.doLIT

  :. ,doLIT+cfa'.of.doLIT                       ,doLIT  cfa'.of.doLIT  @. ( '' doLIT ) 32,' ;.  immediate.  \  doLIT  017C
  :. ...                                        ,doLIT             32,' ;.
  :. ,doLIT+(#)                                 ,doLIT      @.     32,' ;.  immediate.  \  doLIT  1234
  :. ,doLIT+#                                   ,doLIT             32,' ;.  immediate.  \  doLIT  1234
  :. ,doLIT+#+offset   new.system.offset @. +.  ,doLIT             32,' ;.  immediate.  \  doLIT  1234


  :. ,doLIT+cfa'.of.doLIT    cfa'.of.doLIT  @.     optimize?  @.  if.  {dup}  T=#  else.  ,doLIT   32,'  then.  ;.  immediate.  \  doLIT  017C
  :. ...                                           optimize?  @.  if.  {dup}  T=#  else.  ,doLIT   32,'  then.  ;.
  :. ,doLIT+(#)                             @.     optimize?  @.  if.  {dup}  T=#  else.  ,doLIT   32,'  then.  ;.  immediate.  \  doLIT  1234
  :. ,doLIT+#                                      optimize?  @.  if.  {dup}  T=#  else.  ,doLIT   32,'  then.  ;.  immediate.  \  doLIT  1234
  :. ,doLIT+#+offset   new.system.offset    @. +.  optimize?  @.  if.  {dup}  T=#  else.  ,doLIT   32,'  then.  ;.  immediate.  \  doLIT  1234


  :. ,doLIT*+cfa'.of.doLIT*  cfa'.of.doLIT* @.     optimize?  @.  if.  {dup}  T=#  else.  ,doLIT*  32,'  then.  ;.  immediate.  \  doLIT  017C
  :. ...*                                          optimize?  @.  if.  {dup}  T=#  else.  ,doLIT*  32,'  then.  ;.
  :. ,doLIT*+(#)                            @.     optimize?  @.  if.  {dup}  T=#  else.  ,doLIT*  32,'  then.  ;.  immediate.  \  doLIT  1234
  :. ,doLIT*+#                                     optimize?  @.  if.  {dup}  T=#  else.  ,doLIT*  32,'  then.  ;.  immediate.  \  doLIT  1234
  :. ,doLIT*+#+offset  new.system.offset    @. +.  optimize?  @.  if.  {dup}  T=#  else.  ,doLIT*  32,'  then.  ;.  immediate.  \  doLIT  1234


  :. ,doVAR+cfa'.of.doVAR    cfa'.of.doVAR    @.    optimize?  @.  if.  {dup}  T=#  else.  ,doVAR   32,'  then.  ;.  immediate.  \  doVAR  017C
  :. ,doVAR+(#)                               @.    optimize?  @.  if.  {dup}  T=#  else.  ,doVAR   32,'  then.  ;.  immediate.  \  doVAR  1234
  :. ,doVAR+#                                       optimize?  @.  if.  {dup}  T=#  else.  ,doVAR   32,'  then.  ;.  immediate.  \  doVAR  1234
  :. ,doVAR+#+offset   new.system.offset      @. +. optimize?  @.  if.  {dup}  T=#  else.  ,doVAR   32,'  then.  ;.  immediate.  \  doVAR  1234


  :. ,doVAR*+cfa'.of.doVAR*  cfa'.of.doVAR*   @.    optimize?  @.  if.  {dup}  T=#  else.  ,doVAR*  32,'  then.  ;.  immediate.  \  doVAR  017C
  :. ,doVAR*+(#)                              @.    optimize?  @.  if.  {dup}  T=#  else.  ,doVAR*  32,'  then.  ;.  immediate.  \  doVAR  1234
  :. ,doVAR*+#                                      optimize?  @.  if.  {dup}  T=#  else.  ,doVAR*  32,'  then.  ;.  immediate.  \  doVAR  1234
  :. ,doVAR*+#+offset  new.system.offset      @. +. optimize?  @.  if.  {dup}  T=#  else.  ,doVAR*  32,'  then.  ;.  immediate.  \  doVAR  1234


  :. ,doUSER+cfa'.of.doUSER  cfa'.of.doUSER   @.    optimize?  @.  if.  {dup}  T=#  else.  ,doUSER   32,'  then.  ;.  immediate.  \  doUSER  017C
  :. ,doUSER+(#)                              @.    optimize?  @.  if.  {dup}  T=#  else.  ,doUSER   32,'  then.  ;.  immediate.  \  doUSER  1234
  :. ,doUSER+#                                      optimize?  @.  if.  {dup}  T=#  else.  ,doUSER   32,'  then.  ;.  immediate.  \  doUSER  1234
  :. ,doUSER+#+offset   new.system.offset     @. +. optimize?  @.  if.  {dup}  T=#  else.  ,doUSER   32,'  then.  ;.  immediate.  \  doUSER  1234


  :. ,doUSER*+cfa'.of.doUSER* cfa'.of.doUSER* @.    optimize?  @.  if.  {dup}  T=#  else.  ,doUSER*  32,'  then.  ;.  immediate.  \  doUSER  017C
  :. ,doUSER*+(#)                             @.    optimize?  @.  if.  {dup}  T=#  else.  ,doUSER*  32,'  then.  ;.  immediate.  \  doUSER  1234
  :. ,doUSER*+#                                     optimize?  @.  if.  {dup}  T=#  else.  ,doUSER*  32,'  then.  ;.  immediate.  \  doUSER  1234
  :. ,doUSER*+#+offset  new.system.offset     @. +. optimize?  @.  if.  {dup}  T=#  else.  ,doUSER*  32,'  then.  ;.  immediate.  \  doUSER  1234










:.  all>pool   cfa'.of.doLIT*    @.   >CFA'.OF.doLIT*n.pool
               cfa'.of.doUSER*   @.   >CFA'.OF.doUSER*n.pool
            \   cfa'.of.abor."*   @.   >CFA'.OF.abor."*n.pool
               cfa'.of.$"|*      @.   >CFA'.OF.$"|*n.pool
               cfa'.of.."|*      @.   >CFA'.OF.."|*n.pool
               cfa'.of.branch*   @.   >CFA'.OF.branch*n.pool
               cfa'.of.?branch*  @.   >CFA'.OF.?branch*n.pool   ;.


( HF )   :.  R=(T+#)     T  swap.  R=(R+#)  ;.

472?   @.
#if  \ 4000486c     equ  rx ( pb11 )    \ 472
     \ 40004868     equ  tx ( pb10 )    \ 472

       40004940     equ  rx ( pf0  )    \ 472
       400048fc     equ  tx ( pd15 )    \ 472
       :.  r2=tx    2    tx ( pb10 )  r=#  ;.
       :.  r2=rx    2    rx ( pb10 )  r=#  ;.
#else  4000486c     equ  rx ( pb11 )    \      453
       40004870     equ  tx ( pb12 )    \      453
       :.  r2=tx    2    tx ( pb12 )  r=#  ;.
       :.  r2=rx    2    rx ( pb10 )  r=#  ;.
#then

nuc442eF?  @.   
#if
\ =======================================================================================================
                  t:*4?   on.
      :.  :    t:new*4    push.LR  ;.
      :.  t:      t:*4             ;.

new ( ???? )    4000    8051eForth.based.addr   !.    $40  doUSER.base.in.rom    !.

\ INCLUDE  thumb2eForth865b.f \  \s  \  include  865N18I.F




:.  PF0   1  ;.   \ sw2
:.  PF1   2  ;.
:.  PF2   4  ;.
:.  PF3   8  ;.
:.  PF4  10  ;.   \ sw1

:.  &PF0       0x40025004   ;.
:.  &PF1       0x40025008   ;.
:.  &PF2       0x40025010   ;.
:.  &PF3       0x40025020   ;.
:.  &PF4       0x40025040   ;.
:.  &LEDS      0x40025038   ;.
:.  SW2        0x01         ;.  \  PF0
:.  RED        0x02         ;.  \  PF1
:.  BLUE       0x04         ;.  \  PF2
:.  GREEN      0x08         ;.  \  PF3
:.  SW1        0x010        ;.  \  PF4
:.  &SWITCHES  0x40025044   ;.

\   86 00000000          PortF_Init
                     t:  PortF_Init

nuc442eF?  @.
#if
#else
\   87 00000000         ; activate clock for Port F

\   88 00000000 4922            LDR              R1, =SYSCTL_RCGC2_R ; R1 = &SYSCTL_RCGC2_R
                                                  1   SYSCTL_RCGC2_R   r=#
\   89 00000002 6808            LDR              R0, [R1]    ; R0 = [R1]
                                                 r0=(r1)
\   90 00000004 F040 0020       ORR              R0, R0, #SYSCTL_RCGC2_GPIOF ; R0 = R0|SYSCTL_RCGC2_GPIOF
                                                      0   SYSCTL_RCGC2_GPIOF   Ro#
\   91 00000008 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\   92 0000000A BF00            NOP
                                                 nop
\   93 0000000C BF00            NOP                          ; allow time to finish activating
                                                 nop
\   94 0000000E         ; unlock the lock register
                      t:  unlock.the.lock.register
\   95 0000000E 4920            LDR              R1, =GPIO_PORTF_LOCK_R ; R1 = &GPIO_PORTF_LOCK_R
                                                  1   GPIO_PORTF_LOCK_R   r=#
\   96 00000010 4820            LDR              R0, =GPIO_LOCK_KEY ; R0 = GPIO_LOCK_KEY (unlock GPIO Port F Commit Register)
                                                  0   GPIO_LOCK_KEY       r=#
\   97 00000012 6008            STR              R0, [R1]    ; [R1] = R0 = 0x4C4F434B
                                                (r1)=r0
\   98 00000014         ; set commit register
                      t:  set.commit.register
\   99 00000014 4920            LDR              R1, =GPIO_PORTF_CR_R ; R1 = &GPIO_PORTF_CR_R
                                                  1   GPIO_PORTF_CR_R   r=#
\  100 00000016 F04F 0001       MOV              R0, #0x01   ; R0 = 0x01 (enable commit for PF0)
                              F04F0001  32,^  \  r0=1
\  101 0000001A 6008            STR              R0, [R1]    ; [R1] = R0 = 0x1
                                                 (r1)=r0


\ ARM Macro Assembler    Page 4


\  102 0000001C         ; set direction register
                      t:  set.direction.register
\  103 0000001C 491F            LDR              R1, =GPIO_PORTF_DIR_R ; R1 = &GPIO_PORTF_DIR_R
                                                  1   GPIO_PORTF_DIR_R   r=#
\  104 0000001E 6808            LDR              R0, [R1]    ; R0 = [R1]
                                                 r0=(r1)
\  105 00000020 F020 0011       BIC              R0, R0, #(SW1|SW2) ; R0 = R0&~(SW1|SW2) (make PF0 and PF4 input; PF0 and PF4 built-in buttons)
   :.  sw1 10 ;.  :.  sw2 1 ;.                   0  sw1 sw2 or.  Rn#/
\  106 00000024 F040 000E       ORR              R0, R0, #(RED|BLUE|GREEN) ; R0 = R0|(RED|BLUE|GREEN) (make PF3-1 output; PF3-1 built-in LEDs)
   :.  red 2 ;.  :. blue  4 ;.  :. green 8 ;.    0  red blue green or. or.  Ro#
\  107 00000028 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\  108 0000002A         ; regular port function
                      t:  regular.port.function
\  109 0000002A 491D            LDR              R1, =GPIO_PORTF_AFSEL_R ; R1 = &GPIO_PORTF_AFSEL_R
                                                  1   GPIO_PORTF_AFSEL_R   r=#
\  110 0000002C 6808            LDR              R0, [R1]    ; R0 = [R1]
                                                 r0=(r1)
\  111 0000002E         ; R0 = R0&~0x1F (disable alt funct on PF4-0)
                                     t:  disable.alt.funct.on.PF4-0
\  112 0000002E F020 001F       BIC              R0, R0, #(SW1|SW2|RED|BLUE|GREEN)
                           0   SW1 SW2 RED BLUE GREEN  or.  or.  or.  or.  Rn#/
\  113 00000032 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\  114 00000034         ; put a delay here if you are seeing erroneous NMI

\  115 00000034         ; enable pull-up resistors
                      t:  enable.pull-up.resistors
\  116 00000034 491B            LDR              R1, =GPIO_PORTF_PUR_R ; R1 = &GPIO_PORTF_PUR_R
                                                  1   GPIO_PORTF_PUR_R   r=#
\  117 00000036 6808            LDR              R0, [R1]    ; R0 = [R1]
                                                 r0=(r1)
\  118 00000038 F040 0011       ORR              R0, R0, #(SW1|SW2) ; R0 = R0|(SW1|SW2) (enable weak pull-up on PF0 and PF4)
                                       0  SW1 SW2  or.  Ro#
\  119 0000003C 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\  120 0000003E         ; enable digital port
                      t:  enable.digital.port

\  121 0000003E 491A            LDR              R1, =GPIO_PORTF_DEN_R ; R1 = &GPIO_PORTF_DEN_R
                                                  1   GPIO_PORTF_DEN_R   r=#
\  122 00000040 6808            LDR              R0, [R1]    ; R0 = [R1]
                                                 r0=(r1)
\  123 00000042         ; R0 = R0|0x1F (enable digital I/O on PF4-0)
                                    t:  enable.digital.I/O.on.PF4-0
\  124 00000042 F040 001F       ORR              R0, R0, #(SW1|SW2|RED|BLUE|GREEN)
                           0   SW1 SW2 RED BLUE GREEN  or.  or.  or.  or.  Ro#
\  125 00000046 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\  126 00000048         ; configure as GPIO
                      t:  configure.as.GPIO
\  127 00000048 4918            LDR              R1, =GPIO_PORTF_PCTL_R ; R1 = &GPIO_PORTF_PCTL_R
                                                  1   GPIO_PORTF_PCTL_R   r=#
\  128 0000004A 6808            LDR              R0, [R1]    ; R0 = [R1]
                                                 r0=(r1)
\  129 0000004C 4A18            LDR              R2, =0x000FFFFF ; R2 = 0x000FFFFF (this constant must be in ROM; cannot generate in one instruction)
                                                 R2=000FFFFF
\  130 0000004E EA20 0002       BIC              R0, R0, R2  ; R0 = R0&~0x000FFFFF (clear port cont rol field for PF4-0 )
                                                 R0nR2/
\  131 00000052 F100 0000       ADD              R0, R0, #0x00000000 ; R0 = R0+0x00000000 (configure PF0 and PF4 as GPIO)
                              F1000000 32,^   \  r0=r0+0


\ ARM Macro Assembler    Page 5


\  132 00000056 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\  133 00000058         ; disable analog functionality
                     t:   disable.analog.functionality
\  134 00000058 4916            LDR              R1, =GPIO_PORTF_AMSEL_R ; R1 = &GPIO_PORTF_AMSEL_R
                                                  1   GPIO_PORTF_AMSEL_R   r=#
\  135 0000005A F04F 0000       MOV              R0, #0      ; R0 = 0 (disable analog functionality on PF)
                             f04f0000 32,^  \    r0=0
\  136 0000005E 6008            STR              R0, [R1]    ; [R1] = R0
                                                 (r1)=r0
\  137 00000060 4770            BX               LR          ; return
                                                 ret'
 






\  138 00000062

\  139 00000062         ;------------PortF_Input------------

\  140 00000062         ; Read and return the status of the switches.

\  141 00000062         ; Input: none

\  142 00000062         ; Output: R0  0x01 if only Switch 1 is pressed

\  143 00000062         ;         R0  0x10 if only Switch 2 is pressed

\  144 00000062         ;         R0  0x00 if both switches are pressed

\  145 00000062         ;         R0  0x11 if no switches are pressed

\  146 00000062         ; Modifies: R1

\  147 00000062         PortF_Input
                    t:  PortF_Input              {dup}
\  148 00000062 4915            LDR              R1, =SWITCHES ; R1 = &SWITCHES (pointer to locatio n of PF0 and PF4)
\              :.   SWITCHES  sw1  sw2  or. ;. \  1   SWITCHES   r=#
                                                  1  &SWITCHES   r=#
\  149 00000064 6808            LDR              R0, [R1]    ; R0 = [R1] (read PF0 and PF4)
                                                 t=(r1)
\  150 00000066 4770            BX               LR          ; return
                                                 ret'
\  151 00000068

\  152 00000068         ;------------PortF_Output------------

\  153 00000068         ; Set the output state of PF3-1.

\  154 00000068         ; Input: R0  new state of PF

\  155 00000068         ; Output: none

\  156 00000068         ; Modifies: R1

\  157 00000068         PortF_Output
                    t:  PortF_Output  ( n -- )
\  158 00000068 4914            LDR              R1, =LEDS   ; R1 = &LEDS
\  :.  LEDS  red green blue or. or. ;.      \     1   LEDS   r=#
                                                  1  &LEDS   r=#
\  159 0000006A 6008            STR              R0, [R1]    ; [R1] = R0 (write to PF3-1)
                                                 (r1)=t     {drop}
\  160 0000006C 4770            BX               LR          ; return
                                                 ret'
\  161 0000006E

\  162 0000006E         ;------------PortF_SW1------------

\  163 0000006E         ; Read and return the status of SW1.

\  164 0000006E         ; Input: none

\  165 0000006E         ; Output: R0  0x00 if switch 1 is pressed

\  166 0000006E         ;         R0  0x10 if switch 1 is not pressed

\  167 0000006E         ; Modifies: R1

\  168 0000006E         PortF_SW1
                    t:  PortF_SW1  ( -- 1/0 )    {dup}
\  169 0000006E 4914            LDR              R1, =PF4    ; R1 = &PF4
                                                  1  &PF4  r=#
\  170 00000070 6808            LDR              R0, [R1]    ; R0 = [R1] (read PF4)
                                                 t=(r1)
\  171 00000072 4770            BX               LR          ; return
                                                 ret'
\  172 00000074

\  173 00000074         ;------------PortF_Red------------


\  174 00000074         ; Set the output state of the red LED.

\  175 00000074         ; Input: R0  0x02 to turn LED on

\  176 00000074         ;        R0  0x00 to turn LED off

\  177 00000074         ; Output: none

\  178 00000074         ; Modifies: R1

\  179 00000074         PortF_Red
                    t:  PortF_Red   ( 2/0 -- )
\  180 00000074 4913            LDR              R1, =PF1    ; R1 = &PF1
                                                  1  &PF1  r=#
\  181 00000076 6008            STR              R0, [R1]    ; [R1] = R0 (write to PF1)
                                                 (r1)=t     {drop}


\ ARM Macro Assembler    Page 6



\  182 00000078 4770            BX               LR          ; return
                                                 ret'
\  183 0000007A

\  184 0000007A         ;------------PortF_Green------------

\  185 0000007A         ; Set the output state of the green LED.

\  186 0000007A         ; Input: R0  0x08 to turn LED on

\  187 0000007A         ;        R0  0x00 to turn LED off

\  188 0000007A         ; Output: none

\  189 0000007A         ; Modifies: R1

\  190 0000007A         PortF_Green
                    t:  PortF_Green ( 8/0 -- )
\  191 0000007A 4913            LDR              R1, =PF3    ; R1 = &PF3
                                                  1  &PF3  r=#
\  192 0000007C 6008            STR              R0, [R1]    ; [R1] = R0 (write to PF3)
                                                 (r1)=t     {drop}
\  193 0000007E 4770            BX               LR          ; return
                                                 ret'
\  194 00000080

\  195 00000080         ;------------PortF_Blue------------

\  196 00000080         ; Set the output state of the blue LED.

\  197 00000080         ; Input: R0  0x04 to turn LED on

\  198 00000080         ;        R0  0x00 to turn LED off

\  199 00000080         ; Output: none

\  200 00000080         ; Modifies: R1

\  201 00000080         PortF_Blue
                    t:  PortF_Blue  ( 4/0 -- )
\  202 00000080 4912            LDR              R1, =PF2    ; R1 = &PF2
                                                  1  &PF2  r=#
\  203 00000082 6008            STR              R0, [R1]    ; [R1] = R0 (write to PF2)
                                                 (r1)=t     {drop}
\  204 00000084 4770            BX               LR          ; return
                                                 ret'
\  205 00000086

\  206 00000086         ;------------PortF_SW2------------

\  207 00000086         ; Read and return the status of SW2.

\  208 00000086         ; Input: none

\  209 00000086         ; Output: R0  0x00 if switch 2 is pressed

\  210 00000086         ;         R0  0x01 if switch 2 is not pressed

\  211 00000086         ; Modifies: R1

\  212 00000086         PortF_SW2
                    t:  PortF_SW2  ( -- 1/0 )    {dup}
\  213 00000086 4912            LDR              R1, =PF0    ; R1 = &PF0
                                                 1   &PF0  r=#
\  214 00000088 6808            LDR              R0, [R1]    ; R0 = [R1] (read PF0)
                                                 t=(r1)
\  215 0000008A 4770            BX               LR          ; return
                                                 ret'
\  216 0000008C

\  217 0000008C                 ALIGN                        ; make sure the end of this section is aligned

\  218 0000008C                 END                          ; end of file

\              400FE108
\              40025520
\              4C4F434B
\              40025524
\              40025400
\              40025420
\              40025510
\              4002551C
\              4002552C
\              000FFFFF
\              40025528
\              40025044
\              40025038
\              40025040
\              40025008
\              40025020

#then

                                  t:  main  \  0 last' @.   4  -. 32!'  ( **** )  cfa= C000
\                                              0  '' main  0a  -. 32!'        \   cfa= C000
  (  C000  03 43             )                              3  R=0
  (  C002  31 40 F8 03       )                       rp   3F8  R=#
  (  C006  04 43             )                              T  R=0
  (  C008  35 40 78 03       )                      sp    378  R=#
  (  C00C  B2 40 80 5A 20 01 )                     120   5A80  (#)=#
  (  C012  F2 40 8E 00 57 00 )                      57     8E  (#)=# \ b=1
  (  C018  B2 40 9E A5 2A 01 )                     12A   A59E  (#)=#
  (  C01E  F2 D0 45 00 22 00 )                      22     45  (#)o# \ b=1
  (  C024  B0 12 60 C0       )                           \      !IO
  (  C028  30 40 3E D7       )                           \      COLD -;
                                                          ret'

  \                               t:  delay.20                 R1=20
  \ ------------------------------------------------------------------------
                                  t:  delay.R1                                 \   cfa= C04E
  (  C04E  0E 4F             )                                 R0=R1
  \ ------------------------------------------------------------------------
                                  t:  delay.R0                                \    cfa= C050
  (  C054  1E 83             )                      begin'     0 1 r-#.s  \  was R0-1
  (  C056  FC 23             )                      until'z=1
  (  C058  30 41             )                                 ret'    
  \ -------------------------------------------------------------------------------
                                 :{    {+!}    R0=T   nip>r1,T   2 0 R=(R)   1 2 R+R   0 1 (R)=R  };
                                 optimize?  @.
                                 #if
                                    t:  +!   {+!}    ret'
                                 #else
  (  C734  1C C7             )
  (  C736  02 2B 21          )    t:  +!        push.LR   cfa= C73A
  (  C73A  B0 12 A0 C1       )                  {swap}  
  (  C73E  B0 12 B2 C1       )                  {over}     
  (  C742  B0 12 1A C1       )                  {@}
  (  C746  B0 12 0E C3       )                  {+}  
  (  C74A  B0 12 A0 C1       )                  {swap}  
  (  C74E  B0 12 0E C1       )                  {!}  
  (  C752  30 41             )                                 ret
                                 #then
\ t:  300.ms  (  ret'  )     r0=30D40   begin'  r0-1  until'z=1  ret'
  \ ------------------------------------------------------------------------
                     t:  emit.io           \  t:  emit \ pf.3   ( n -- )                                \    cfa= C086
                                                { lr, }  push{}         \  lr ( re ) push{}
  (  C086  E2 C3 21 00       )                  (r2+3FC)n8/ \  (21)n2/ b=1           \ P1OUT    pf.3=0
  (  C08A  36 42             )                                 r3=8       r1=56 ( 26 ) \ 26~2A is ok.
  (  C08C  B0 12 4E C0       )        begin'                   delay.R1
  (  C090  44 10             )      t  rrc.r  \ t rrc_r,s \  0737ea50 32,'     \  7  rrc.r  \  t=t>>>1   \    7  7  1  ror.R,R,#                    \  rrc.t b=1
  (  C092  03 2C             )           if'c=0       \  C09A  c=1?''
  (  C094  E2 C3 21 00       )                  (r2+3FC)n8/ \  (21)n2/ b=1           \ P1OUT    pf.3=0
  (  C098  02 3C             )           else'    \  C09E  rjmp ok...
  (  C09A  E2 D3 21 00       )                  (r2+3FC)o8  \  (21)o2 b=1            \ P1OUT    pf.3=1
  (  C09E  16 83             )           then'                 r3-1
  (  C0A0  F5 23             )        until'z=1       \  C08C  z=0?''
  (  C0A2  B0 12 4E C0       )                                 delay.R1
  (  C0A6  E2 D3 21 00       )                  (r2+3FC)o8  \  (21)o2 b=1            \ P1OUT
  (  C0AA  B0 12 4E C0       )                                 delay.R1
  (  C0AE  34 45             )                               (  {drop}  \ {dup} )   t=1   _ #emit  +!
  (  C0B0  30 41             )                                 ret


t:  emit'    ( n -- )   push.lr  \ { lr, }  push{}
    pf.3=0     \  start.bit low
    r3=8          r1=56  \   57.6k    28 ( 115.2k baud.rate )
    begin'        delay.R1
        t  rrc.r  ( 0737ea50  32,' )
        if'c=0    pf.3=0   \ tx=0
        else'     pf.3=1   \ tx=1
        then'     r3-1
    until'z=1     delay.R1   pf.3=1  \ stop bit high
                  delay.R1    t=1   _ #emit  +!   \ {drop}
                  ret













\ :{ c=rx    0  &PF0  r=#    0  0  r=(r)  ( 0  rrc.r )  0030ea50  32,'  };   \ c=pf.0
t:   c=rx    0  &PF0  r=#    r0=(r0)      R0n1      ret'  \ c=pf.0

:.  t>>#   t  swap.  r>>#   ;.
:.  ToR    t  swap.  RoR    ;.

t:  key.io  t:  key ( ---- n )       {dup}           \ T is kept
t:  key'   ( t -- n )       push.lr \   { lr, } push{}  \ T is destroyed for q to use
    t=0  ( r7=0 )
    begin'        c=rx      0  0  r:#  \ wait start bit low    c=rx
    until'z    \  {DUP}  t=R0   .4n
                  r1=56   ( 51~5B )    \ 57.6k    \  28 ( 115.2k baud.rate )
    r0=r1>>1      delay.R0    r3=8
    begin'        delay.R1
                  c=rx      \ c=rx
                  R0>>>1    t>>1  ( r7>>1 )
                  ToR0  ( R7oR0 )
                  r3-1      3  0  r:#    ( ??? why not r3:0 msgFind )
    until'z=1     t>>18  (  R7>>18 )    delay.R1
                  ret
  \ ------------------------------------------------------------------------
 




  \ -------------------------------------------------------------------------------
  (  C05A  46 C0             )
  (  C05C  03 21 49 4F       )    t:  !IO                                            cfa= C060
                                                               ret'
  \ -------------------------------------------------------------------------------
                  0000C3D0  last'  !.    0000C3D8  hp'  !.

                                  t:  doLIT                                       cfa= C0A6
  (  C0A6  25 83             )        {dup}
  (  C0AC  36 41             )        Y=lr     r0=Y     R0n1/
  (  C0AE  34 46             )                 t=(r0)
                                               Y+4   \ 4 ??????
  (  C0B0  00 46             )                 pc=Y   compile-only'  \ immediate'

                                 ''   doLIT       cfa'.of.doLit       !.

  t:  test.doLIT(true)    push.LR   doLIT  12345678 32,'   ret                            
  \ -------------------------------------------------------------------------------
  (  C0B2  A0 C0             )
  (  C0B4  04 45 58 49 54    )    t:  EXIT                                        cfa= C0BA
  (  C0BA  36 41             )        \              pop.Y \ BC40 16,'  \ Y      rp R=(R+)
  (  C0BC  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  :. pc=R   jmp_r   ;.
  :. pc=R0  0 pc=R  ;.
                                 :{  {execute}  0  t  1 r=r+#  {drop}    pc=R0  };
                             \   :{  {execute}  0  t  1 r=Ro#  {drop}    pc=R0  };

  (  C0BE  B4 C0             )
  (  C0C0  07 45 58 45 43    )    t:  EXECUTE                                     cfa= C0C8
  (  C0C8  06 44             )               0 t 1 r=r+#  \  y=t+1  \ Y T  1  R=R+#  \ Y T  R=R  r6=r7+1
  (  C0CA  34 45             )                       {drop}
  (  C0CC  00 46             )                       pc=r0
  \ -------------------------------------------------------------------------------
optimize?   @.
#if     :.  dolit:    lit>   {dup}   t  swap.  r=#   ;.
#else   :.  doLit:    doLit   compiling.mode   @.   if.   lit>  32,'  then.  ;.
#then

:.  Y=re   y  0e  r=r    ;.
:.  Yn1/   y   1  Rn#/   ;.
:.  Y=(Y)  y   y  r=(r)  ;.
:.  Y+1    y   1  r+#    ;.
:.  pc=Y   pc  y  r=r    ;.
  \ -------------------------------------------------------------------------------
  (  C0E6  D0 C0             )
  (  C0E8  47 3F 62 72 61    )    t:  ?branch              \  cfa= C0F0
  (  C0F2  34 B3             )        Y=t  \  r6=T         \  T  RnFFFF,tst
  (  C0F4  34 45             )        {drop}        \  T      sp R=(R+)
  (  C0F6  08 24             )        if'Y<>0       \      C108  z=1?''
  (  C0F8  26 53             )            re+4      \         Y  R+4
  (  C0FA  00 46             )            ret'      \  pc     Y  R=R
                                          compile-only'
  \ -------------------------------------------------------------------------------
:{  {branch}     Y=re    Yn1/   Y=(Y)   Y+1     pc=Y  };

                                  t:  branch
                                      then'  {branch}    compile-only'

         ''  ?branch       cfa'.of.?branch       !.
  \ -------------------------------------------------------------------------------
:.  branch:   branch   compiling.mode  @.   if.   lit>   branch.offset  @.  -. here'(t:) @.   +.  32,'  then.  ;.
:. ?branch:  ?branch   compiling.mode  @.   if.   lit>   branch.offset  @.  -. here'(t:) @.   +.  32,'  then.  ;.

 ''  branch       cfa'.of.branch       !.





optimize?  @.
#if
:.  ahead#   ahead'                     ;.
:.  if#      t:0   {drop}   if'<>       ;.
:.  then#    then'                      ;.
:.  else#    else'                      ;.   \  if#    ahead#  then#    then#

:.  begin#   ( -- a' )  here'           ;.
:.  until#   ( a' -- )  t:0  {drop}  until'<>  ;.
:.  again#   ( a' -- )  again'                 ;.

:.  while#   ( -- a' )       if#        ;.   \  begin#  if#    again#  then#
:.  repeat#  ( a1' a2' -- )  swap.  again#  then#  ;.
#else
:.  ahead#   branch    here'  0  32,'   ;.
:.  if#      ?branch   here'  0  32,'   ;.
:.  then#    here'     swap.     32!'   ;.
:.  else#    ahead#    swap.  then#     ;.   \  if#    ahead#  then#    then#

:.  begin#   ( -- a' )  here'           ;.
:.  until#   ( a' -- )  ?branch  32,'   ;.
:.  again#   ( a' -- )  branch   32,'   ;.

:.  while#   ( -- a' )       if#        ;.   \  begin#  if#    again#  then#
:.  repeat#  ( a1' a2' -- )  swap.  again#  then#  ;.
#then


\ : next ( -- ) \ hiLevel model  16bit absolute branch     from 8051 eForth by Dr. C. H. Ting
\   r> r> dup if 1 - >r @ >r exit then drop cell+ >r ;

\ t: nex.'''''''''' ( -- ) \ hiLevel model  16bit absolute branch
\    push.lr   r> r> dup if#   ( {1-} ) T-1  >r @ >r ret then#  drop  cell+ >r   ret

:.  nex.:     nex.     compiling.mode  @.   if.   lit>    branch.offset  @.  -. here'(t:) @.   +.  32,'  then.  ;.

                                  ''  nex.       cfa'.of.nex.       !.
\  \ -------------------------------------------------------------------------------
\  (  C10A  FE C0             )
\  (  C10C  01 21             )    t:  !'                                     \      cfa= C10E
\  (  C10E  B4 45 00 00       )                          (t)=s  {nip}   \  ! ===> (t)=s,2drop
\  (  C112  34 45             )                                 {drop}         \
\  (  C114  30 41             )                                 ret'
\  \ -------------------------------------------------------------------------------

                                      abort".  jhhjhjjh????????????" 

                                   :{  {!}   r0=t   nip>r1,T   (r0)=r1  };

                                    t:  !                                                       cfa= 20000A00
  (  20000A00  30 00             )              R0=T
  (  20000A02  42 CF             )    nip>r1,T  \  { R1, t, } sp    ldm   \   { R1, Y, } R7   ldm
  (  20000A04  01 60             )              (R0+0)=R1
  (  20000A06  70 47             )              ret'

  (  C116  0C C1             )
  (  C118  01 40             )      t:   @                                           cfa= C11A
  (  C11A  24 44             )                       T      T  R=(R)
  (  C11C  30 41             )                                 ret'
  \ ------------------------------------------------------------------------
                                    t:   @.16       t:  h@                            cfa= 4AC
  (  000004AA  36 88             )             8836 16,'   \   T=(T+0),h
  (  000004AC  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:   !.16       t:  h!                            cfa= 4B8
  (  000004B8  03 CF             )                  nip>r0,r1
  (  000004BA  30 80             )             8030 16,'   \   (T)=R0,h
  (  000004BC  0E 46             )                  T=R1
  (  000004BE  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
:.  (R)=(R+4),b,p    Y swap. 4 r=(r+#),b,p  Y (r)=r  ;.  :{ (t)=s,b,drop  t sp (R)=(R+4),b,p  };


                                 :{  {C!}   r0=T   nip>r1,T             0  0  1 (R+#)=R,b     };

                                  t:  C!    r0=T   { r1,  t, } sp LDM   0  0  1 (R+#)=R,b    ret'
  \ -------------------------------------------------------------------------------
  (  C12E  20 C1             )
  (  C130  02 43 40          )    t:  C@                                          cfa= C134
  (  C134  64 44             )      t 7 =.  #if        783f 16,'   #then \    T      T  R=(R),b \ b=1
                                    t 6 =.  #if        7836 16,'   #then
  (  C136  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  t:  >r       push.t   {drop}             ret'
  t:  r>       {dup}    pop.t              ret'
  t:  r@       {dup}    t rp     r=(r)     ret'


                                 :{  {sp@}    Y=sp    {dup}   t=Y   };
  (  C16C  60 C1             )
  (  C16E  03 53 50 40       )    t:  SP@                                         cfa= C172
  (  C172  06 45             )           Y=sp   \      Y      sp R=R
  (  C174  25 83             )           {dup}  \             sp 4 r-#
  (  C176  85 44 00 00       )                  \      sp     T  (R)=R
  (  C17A  04 46             )           t=Y    \      T      Y  R=R
  (  C17C  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C17E  6E C1             )
  (  C180  04 44 52 4F 50    )    t:  DROP                                        cfa= C186
  (  C186  34 45             )               {drop} \  T      sp R=(R+)
  (  C188  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C2C0  AE C2             )
  (  C2C2  04 3F 44 55 50    )    t:  ?DUP                                        cfa= C2C8
  (  C2C8  04 93             )                              T  R:0
  (  C2CA  62 23             )        if'=         \           z=0?''       if't=0
  (  C2CC  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C18A  80 C1             )
  (  C18C  03 44 55 50       )    t:  DUP                                         cfa= C190
  (  C190  25 83             )        then'  {dup} \ sp     4  r-#
  (  C192  85 44 00 00       )                     \ sp     T  (R)=R
  (  C196  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                               :{  {swap}     Y  T  R=R     T  sp  R=(R)    sp  Y (R)=R  };

  (  C198  8C C1             )
  (  C19A  04 53 57 41 50    )    t:  SWAP                                        cfa= C1A0
  (  C1A0  06 44             )                       Y      T  R=R
  (  C1A2  24 45             )                       T      sp R=(R)
  (  C1A4  85 46 00 00       )                       sp     Y  (R)=R
  (  C1A8  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                                :.  y=s    y  sp r=(r)  ;.
                                :{ {over}  y=s  {dup}   T=Y   };
  (  C1AA  9A C1             )
  (  C1AC  04 4F 56 45 52    )    t:  OVER                                        cfa= C1B2
  (  C1B2  26 45             )                       Y      sp R=(R)
  (  C1B4  25 83             )                              sp 4 r-#
  (  C1B6  85 44 00 00       )                       sp     T  (R)=R
  (  C1BA  04 46             )                       T      Y  R=R
  (  C1BC  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C1BE  AC C1             )                                  :. r=ffff  ffffffff   r=#    ;.
                                                                :. r=ffff  00000000   r=#/'  ;.
 
  t:    <t=-1>          begin'         t=0/    ret'
  t:    0<       {2*}   until'c=0
  t:    <t=0>                          t=0     ret'

:.  TxR0      T  0  RxR   ;.
:.  ToR0      T  0  RoR   ;.
:.  TnR0      T  0  RnR   ;.

:{  {xor}   nip>r0  TxR0  };
:{  {or}    nip>r0  ToR0  };
:{  {and}   nip>r0  TnR0  };
  \ -------------------------------------------------------------------------------
  (  C1CE  C0 C1             )
  (  C1D0  03 41 4E 44       )    t:  AND                                         cfa= C1D4
  (  C1D4  34 F5             )                    {and}  \ T   sp Rn(R+)
  (  C1D6  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C1D8  D0 C1             )
  (  C1DA  02 4F 52          )    t:  OR                                          cfa= C1DE
  (  C1DE  34 D5             )                    {or}   \ T   sp Ro(R+)
  (  C1E0  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C1E2  DA C1             )
  (  C1E4  03 58 4F 52       )    t:  XOR                                         cfa= C1E8
  (  C1E8  34 E5             )                    {xor}  \ T   sp Rx(R+)
  (  C1EA  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                                  :.  R+(R),s     Y SWAP. R=(R)    Y R+R,s  ;.
                                  :.  r+r+c       2dup.   r0~r7,r0~r7?
                                      if.         r+r+c
                                      else.       >r.  dup.   r>.  r=r+r+c
                                      then.       ;.

  (  C1EC  E4 C1             )
  (  C1EE  03 55 4D 2B       )    t:  UM+                                         cfa= C1F2
  (  C1F2  06 43             )                              0  R=0        \ Y -> 0
  (  C1F4  24 55             )             t+s    \  T     sp  R+(R),s    \ : R+(R)  Y SWAP R=(R) Y R+R ;
  (  C1F6  06 66             )                       0      0  R+R+c
  (  C1F8  85 44 00 00       )                       sp     T  (R)=R
  (  C1FC  04 46             )                       T      0  R=R
  (  C1FE  30 41             )                                 ret'


\ variable.  system.variable.base.in.rom    extra.offset  @.      100 +.  system.variable.base.in.rom  !.
\ variable.  system.variable.base.in.RAM                     20000200     system.variable.base.in.RAM  !.
  \ -------------------------------------------------------------------------------
                                  t:  ('boot) {dup}  t  system.variable.base.in.RAM  @. 0 +. ( 20000200 ) ldri ( r=# )  ret'
                                             insert{    system.variable.base.in.rom  @. 0 +. org   ffffFFFF  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C200  EE C1             )
  (  C202  04 42 41 53 45    )    t:  BASE                                        cfa= C208
  (  C208  25 83             )                              sp 4 r-#
  (  C20A  85 44 00 00       )                       sp     T  (R)=R
  (  C20E  34 40 02 02       )                       T  system.variable.base.in.RAM  @. 4 +. ( 20000204 ) ldri ( r=# )
  (  C212  30 41             )                                 ret'
                                               insert{  system.variable.base.in.rom  @. 4 +. org         10  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C214  02 C2             )
  (  C216  43 74 6D 70       )    t:  tmp                                         cfa= C21A
  (  C21A  25 83             )                              sp 4 r-#
  (  C21C  85 44 00 00       )                       sp     T  (R)=R
  (  C220  34 40 04 02       )                       T  system.variable.base.in.RAM  @.  8 +. ( 20000208 ) ldri ( r=# )
  (  C224  30 41             )                                 ret' compile-only'
                                               insert{  system.variable.base.in.rom  @.  8 +. org   ffffffff 32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C226  16 C2             )
  (  C228  04 23 54 49 42    )    t:  #TIB                                        cfa= C22E
  (  C22E  25 83             )                              sp 4 r-#
  (  C230  85 44 00 00       )                       sp     T  (R)=R
  (  C234  34 40 06 02       )                       T  system.variable.base.in.RAM  @. 0c +. ( 2000020c ) ldri ( r=# )
  (  C238  30 41             )                                 ret'
                                               insert{  system.variable.base.in.rom  @. 0c +. org   20000380 32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C23A  28 C2             )
  (  C23C  03 3E 49 4E       )    t:  >IN                                         cfa= C240
  (  C240  25 83             )                              sp 4 r-#
  (  C242  85 44 00 00       )                       sp     T  (R)=R
  (  C246  34 40 08 02       )                       T  system.variable.base.in.RAM  @. 10 +. ( 20000210 ) ldri ( r=# )
  (  C24A  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 10 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C24C  3C C2             )
  (  C24E  03 48 4C 44       )    t:  HLD                                         cfa= C252
  (  C252  25 83             )                              sp 4 r-#
  (  C254  85 44 00 00       )                       sp     T  (R)=R
  (  C258  34 40 0A 02       )                       T  system.variable.base.in.RAM  @. 14 +. ( 20000214 ) ldri ( r=# )
  (  C25C  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 14 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C25E  4E C2             )
  (  C260  05 27 45 56 41    )    t:  'EVAL                                       cfa= C266
  (  C266  25 83             )                              sp 4 r-#
  (  C268  85 44 00 00       )                       sp     T  (R)=R
  (  C26C  34 40 0C 02       )                       T  system.variable.base.in.RAM  @. 18 +. ( 20000218 ) ldri ( r=# )
  (  C270  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 18 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C272  60 C2             )
  (  C274  07 43 4F 4E 54    )    t:  CONTEXT                                     cfa= C27C
  (  C27C  25 83             )                              sp 4 r-#
  (  C27E  85 44 00 00       )                       sp     T  (R)=R
  (  C282  34 40 0E 02       )                       T  system.variable.base.in.RAM  @. 1c +. ( 2000021c ) ldri ( r=# )
  (  C286  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 1c +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C288  74 C2             )
  (  C28A  02 43 50          )    t:  CP                                          cfa= C28E
  (  C28E  25 83             )                              sp 4 r-#
  (  C290  85 44 00 00       )                       sp     T  (R)=R
  (  C294  34 40 10 02       )                       T  system.variable.base.in.RAM  @. 20 +. ( 20000220 ) ldri ( r=# )
  (  C298  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 20 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C29A  8A C2             )
  (  C29C  02 44 50          )    t:  DP                                          cfa= C2A0
  (  C2A0  25 83             )                              sp 4 r-#
  (  C2A2  85 44 00 00       )                       sp     T  (R)=R
  (  C2A6  34 40 12 02       )                       T  system.variable.base.in.RAM  @. 24 +. ( 20000224 ) ldri ( r=# )
  (  C2AA  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 24 +. org         10  32,'  }insert
  \ -------------------------------------------------------------------------------
  (  C2AC  9C C2             )
  (  C2AE  04 4C 41 53 54    )    t:  LAST                                        cfa= C2B4
  (  C2B4  25 83             )                              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 28 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 28 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------








  \ -------------------------------------------------------------------------------
                                  t:   head?                sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 2c +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 2c +. org   ffffffff  32,'  }insert

  \ -------------------------------------------------------------------------------
                                  t:   hp                   sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 30 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 30 +. org   ffffffff  32,'  }insert


                           \   variable.  hp'
  \ -------------------------------------------------------------------------------
                                  t:   #emit                sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 34 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 34 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   'emit                sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 38 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 38 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   'key                 sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 3c +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 3c +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   'key.uart            sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 40 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 40 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   'emit.uart           sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 44 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 44 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   addr(uart.key)       sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 48 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 48 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   addr(uart.emit)      sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 4c +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 4c +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   user.var9              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 50 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 50 +. org   ffffffff  32,'  }insert 
 \ -------------------------------------------------------------------------------
                                  t:   '?key         sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 54 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 54 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
                                  t:   var1              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 58 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 58 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var2              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 5c +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 5c +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var3              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 60 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 60 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var4              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 64 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 64 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var5              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 68 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 68 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var6              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 6c +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 6c +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var7              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 70 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 70 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var8              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 74 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 74 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------
                                  t:   var9              sp 4 r-#
  (  C2B6  85 44 00 00       )                       sp     T  (R)=R
  (  C2BA  34 40 14 02       )                       T  system.variable.base.in.RAM  @. 78 +. ( 20000228 ) ldri ( r=# )
  (  C2BE  30 41             )                                 ret'
                                              insert{   system.variable.base.in.rom  @. 78 +. org   ffffffff  32,'  }insert
  \ -------------------------------------------------------------------------------


\  t:  key      push.LR        'key   {@}  execute  ( {dup}   t=r0 )  ret
\  t:  emit     push.LR  r0=t  'emit  {@}  execute  ( {drop}       )  ret















optimize?  @.
#if      :.  ...             {dup}    t  swap.  r=#   ;.
     \   :.  dolit:   lit>   {dup}    t  swap.  r=#   ;.
#else    :.  ...    doLIT    32,'  ;.
#then

  \ ------------------------------------------------------------------------
  (  0000A2AC  00000A0C          )
  (  0000A2B0  0000A2A8          )
  (  0000A2B4  04 65 6D 69 74    )  t:  emit.mecrisp4F120       push.LR                                      cfa= A0C
  (  00000A0C  03 B4             )                  { R0, R1, } push{}
                                                    1 ...       #emit  +!
  (  00000A0E  21 48             )                  R0=4000C018                                 \ (00000A94)=4000C018
                                        begin'                   \  00000A16 --> 00000A10  ******************************
  (  00000A10  01 68             )                  R1=(R0)
  (  00000A12  11 F0 20 01       )             1 20 Rn#,s
  (  00000A16  FB D1             )      until'z=1 \ z=0? ne?       \  00000A16 --> 00000A10  ******************************
  (  00000A18  1F 48             )                  R0=4000C000                                 \ (00000A98)=4000C000
  (  00000A1A  31 46             )                  R1=T
  (  00000A1C  40 CF             )                  {drop}
  (  00000A1E  01 60             )                  (r0)=r1
  (  00000A20  03 BC             )                  { R0, R1, } pop{}
  (  00000A22  70 47             )                  ret
  \ ------------------------------------------------------------------------
  (  0000A2A0  00000A2E          )
  (  0000A2A4  0000A298          )
  (  0000A2A8  03 6B 65 79       )  t:  key.mecrisp4F120                                                     cfa= A2E
  (  00000A2E  03 B4             )                  { R0, R1, } push{}
  (  00000A30  18 48             )                  R0=4000C018                                 \ (00000A94)=4000C018
                                        begin'                   \  00000A38 --> 00000A32  ******
  (  00000A32  01 68             )                  R1=(R0)
  (  00000A34  11 F0 10 01       )             1 10 Rn#,s        \  R1n10,s
  (  00000A38  FB D1             )      until'= \ z=0? ne?       \  00000A38 --> 00000A32  ******
  (  00000A3A  17 48             )                  R0=4000C000                                 \ (00000A98)=4000C000
  (  00000A3C  47 F8 04 6D       )                  {dup}
  (  00000A40  06 68             )                  T=(R0)
  (  00000A42  F6 B2             )              t t  uxtb_r,r  \ uxtb.T,T
  (  00000A44  03 BC             )                  { R0, R1, }  pop{}
  (  00000A46  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  (  0000A2A0  00000A2E          )
  (  0000A2A4  0000A298          )
  (  0000A2A8  03 6B 65 79       )  t:  ?key.mecrisp4F120                                                    cfa= A2E
\ (  00000A2E  03 B4             )                  { R0, R1, } push{}
  (  00000A30  18 48             )                  R0=4000C018                                 \ (00000A94)=4000C018
\                                       begin'                   \  00000A38 --> 00000A32  ******
  (  00000A32  01 68             )                  R1=(R0)
  (  00000A34  11 F0 10 01       )             1 10 Rn#,s        \  R1n10,s
\ (  00000A38  FB D1             )      until'= \ z=0? ne?       \  00000A38 --> 00000A32  ******
  (  00000A3A  17 48             )                  R0=4000C000                                 \ (00000A98)=4000C000
  (  00000A3C  47 F8 04 6D       )                  {dup}
  (  00000A40  06 68             )                  T=(R0)       \  to reset (4000c018).16=0
                                           1 0 r:#  if'<>  t=-1  else'  t=0  then'
\ (  00000A42  F6 B2             )              t t  uxtb_r,r    \ uxtb.T,T
\ (  00000A44  03 BC             )                  { R0, R1, }  pop{}
  (  00000A46  70 47             )                  ret'
  \ ------------------------------------------------------------------------

\ t:  mecrisp4F120   begin'  key.mecrisp4F120    emit.mecrisp4F120    key.mecrisp4F120    emit.mecrisp4F120  again'

\  :  mecrisp4F120   begin'  key.mecrisp4F120    emit.mecrisp4F120
\                            key.mecrisp4F120    emit.mecrisp4F120
\                    again'

 





  

















:.  r=(t)    t         r=(r)  ;.
:.  (t)=r    t  swap.  (r)=r  ;.
  \ ------------------------------------------------------------------------
                                    t:  setup.clocks.stm32F4.tF+eF+mF                                            cfa= AE4
  (  00000AE4  33 4E             )                  T=40023800
  (  00000AE6  4F F4 80 30       )                  R0=10000
  (  00000AEA  30 60             )                  (T)=R0
  \ ------------------------------------------------------------------------
                                    t:  awaitHSE                                                cfa= AEC
                                 \ begin'
  (  00000AEC  30 68             )                  R0=(T)
       f400  16,'  3000  16,'    \                  R0n20000
       f43f  16,'  affb  16,'    \ until'<>
  (  00000AF6  30 4E             )                  T=40023808
  (  00000AF8  4F F0 01 00       )                  R0=1
  (  00000AFC  30 60             )                  (T)=R0
  (  00000AFE  2D 4E             )                  T=40023800
  (  00000B00  30 68             )                  R0=(T)
  (  00000B02  20 F0 01 00       )                  R0n1/
  (  00000B06  30 60             )                  (T)=R0
  (  00000B08  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  setup.uart.stm32F4.tF+eF+mF                                              cfa= B0A
  (  00000B0A  2C 4E             )                  T=40023830
  (  00000B0C  2C 48             )                  R0=1001FF
  (  00000B0E  30 60             )                  (T)=R0
  (  00000B10  2C 4E             )                  T=40020000
  (  00000B12  30 68             )                  R0=(T)
  (  00000B14  2C 4D             )                  W  A0  r=#
  (  00000B16  40 EA 05 00       )                  0  w   RoR
  (  00000B1A  30 60             )                  (T)=R0
  (  00000B1C  2B 4E             )                  T=40020020
  (  00000B1E  2C 48             )                  R0=7700
  (  00000B20  30 60             )                  (T)=R0
  (  00000B22  2C 4E             )                  T=40023840
  (  00000B24  2C 48             )                  R0=20000
  (  00000B26  30 60             )                  (T)=R0
  (  00000B28  2C 4E             )                  T=40004408
  (  00000B2A  2D 48             )                  R0=46
  (  00000B2C  30 60             )                  (T)=R0
  (  00000B2E  2D 4E             )                  T=4000440C
  (  00000B30  2D 48             )                  R0=200C
  (  00000B32  30 60             )                  (T)=R0
  (  00000B34  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  uart.init.stm32F4.tF+eF+mF                                               cfa= B36
  (  00000B36  00 B5             )                  push.LR
  (  00000B38  FF F7 D4 FF       )                  setup.clocks.stm32F4.tF+eF+mF                                  \      AE4
  (  00000B3C  FF F7 E5 FF       )                  setup.uart.stm32F4.tF+eF+mF                                    \      B0A
  (  00000B40  00 BD             )                  ret
  \ ------------------------------------------------------------------------

















  \ ------------------------------------------------------------------------
                                    t:  emit.stm32F4.tF+eF+mF                                    \  cfa= B4E
  (  00000B4E  07 B4             )  { R0, R1, R2, }                push{}
  (  00000B50  30 46             )                  R0=T
  (  00000B52  40 CF             )                  {drop}
  (  00000B54  25 4A             )                  R2=40004400                                 \ (00000BEC)=40004400
                                        begin'                   \  00000B5C --> 00000B56  --------------------
  (  00000B56  11 68             )                  R1=(R2)
  (  00000B58  11 F0 80 01       )                  R1n80,s
  (  00000B5C  FB D0             )      until'<> \ z=1? eq?      \  00000B5C --> 00000B56  --------------------
  (  00000B5E  24 4A             )                  R2=40004404                                 \ (00000BF0)=40004404
  (  00000B60  10 70             )                2 0 (r)=r,b  \ (R2)=R0,b
  (  00000B62  07 BC             )    { R0, R1, R2, }              pop
  (  00000B64  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  t:  key.stm32F4.tF+eF+mF                                                    \ cfa= B70
  (  00000B70  07 B4             )      { R0, R1, R2, }            push{}
  (  00000B72  1E 4A             )                  R2=40004400                                 \ (00000BEC)=40004400
                                        begin'                   \  00000B7A --> 00000B74  --------------------
  (  00000B74  11 68             )                  R1=(R2)
  (  00000B76  11 F0 20 01       )                  R1n20,s
  (  00000B7A  FB D0             )      until'<> \ z=1? eq?      \  00000B7A --> 00000B74  --------------------
  (  00000B7C  1C 4A             )                  R2=40004404                                 \ (00000BF0)=40004404
  (  00000B7E  10 78             )          0 2 r=(r)b  \      R0=(R2)b
  (  00000B80  47 F8 04 6D       )                  {dup}
  (  00000B84  06 46             )                  T=R0
  (  00000B86  07 BC             )      { R0, R1, R2, }            pop
  (  00000B88  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  t:  emit.stm32F4.eF.PA.3'
      R2=40004400
      begin'       R1=(R2)          R1n80,s
      until'<>   \ z=1? eq?
      R2+4         2 t (r)=r,b      {drop}       ret'
  \ ------------------------------------------------------------------------
  t:  key.stm32F4.eForth'  ( -- char )
      {dup}        R2=40004400
      begin'       R1=(R2)          R1n20,s
      until'<>     \  z=1? eq?
      R2+4         t 2 r=(r)b       ret'
  \ ------------------------------------------------------------------------




















\  insert{  a2e  org  t:  key       a0c  org  t:  emit  }insert
t: @execute  ( cfa' --)           {@}  {execute}  \ no ret' is needed.  code @execute  {@} {execute}  end-code
\  @execute  ( cfa' --)  push.LR  {@}   execute   ret
   mecrisp4F120?   @.
#if        t:  key     push.LR     r0=0a2e   0 call_r    ret  \  0b70
           t:  emit    push.LR     r0=0a0c   0 call_r    ret  \  0b4e
#else
   mecrisp32F407?  @.
   #if     t:  emit    push.LR    'emit  @execute        ret
           t:  key     push.LR    'key   @execute        ret
           t: ?key     push.LR   '?key   @execute        ret
   #else   t:  emit    push.LR    'emit  @execute        ret
           t:  key     push.LR    'key   @execute        ret
           t: ?key     push.LR   '?key   @execute        ret
   #then
#then


t: uart.switch.to.stm32F4xx
mecrisp4F120?  @.
#if         push.LR {dup} t '' EMIT.stm32F4.tF+eF+mF  r=#  'emit  !     {dup}  t ''  key.mecrisp4F120       r=#  'key  !
\           ?key.stm32F407.eF.PA.2
#else       push.LR {dup} t '' emit.mecrisp4F120      r=#  'emit  !     {dup}  t ''  key.mecrisp4F120       r=#  'key  !
\           ?key.stm32F407.eF.PA.2
#then       ret

 
t: uart.switch.to.stm32F4xx
stellaris.launchpad?  @.  tF+eF+mF(stm32F4)?  @.   and.
#if         push.LR {dup} t '' EMIT.stm32F4.tF+eF+mF  r=#  'emit  !     {dup}  t ''  key.stm32F4.tF+eF+mF   r=#  'key  !
                                                                        {dup}  t '' ?key ( .stm32F407.eF.PA.2 ) r=# '?key  !
#else       push.LR {dup} t '' emit.mecrisp4F120      r=#  'emit  !     {dup}  t ''  key.mecrisp4F120       r=#  'key  !
                                                                        {dup}  t '' ?key.mecrisp4F120       r=# '?key  !
#then       ret


t: uart.switch.LF120   \ .to.tF+eF+mF
stellaris.launchpad?  @.  tF+eF+mF(stm32F4)?  @.   and.
#if         push.LR {dup} t '' EMIT.stm32F4.tF+eF+mF  r=#  'emit  !     {dup}  t ''  key.stm32F4.tF+eF+mF   r=#  'key  !
                                                                        {dup}  t '' ?key ( .stm32F407.eF.PA.2 ) r=# '?key  !
#else       push.LR {dup} t '' emit.mecrisp4F120      r=#  'emit  !     {dup}  t ''  key.mecrisp4F120       r=#  'key  !
                                                                        {dup}  t '' ?key.mecrisp4F120       r=# '?key  !
#then       ret


t: uart.io  push.LR {dup} t '' emit.io                r=#  'emit  !     {dup}  t ''  key.io                 r=#  'key  !
            ret

variable'   uart?
  t: uart   push.LR  uart?  {dup}  @   t:0  {drop}  if'<>  _ off  uart.switch.LF120  ret  then'  _ on  uart.io
            ret

 








 

                                 :{  {rot}      R0=T   nip>r1,T    sp-8    s=R0   s'=R1    };

                             optimize?  @.
                             #if
                                 t:   rot       R0=T   nip>r1,T    sp-8    s=R0   s'=R1    ret'
                             #else
  (  C2CE  C2 C2             )
  (  C2D0  03 52 4F 54       )    t:  ROT       push.LR   cfa= C2D4
  (  C2D4  B0 12 64 C1       )                  {>r}
  (  C2D8  B0 12 A0 C1       )                  {swap}
  (  C2DC  B0 12 3E C1       )                  {r>}
  (  C2E0  B0 12 A0 C1       )                  {swap}
  (  C2E4  30 41             )                                 ret
                             #then
  \ -------------------------------------------------------------------------------
                                  :{ {-rot}      nip>r0,r1    sp-8   s=R1   s'=T   T=R0    };
                                  t:  -rot       nip>r0,r1    sp-8   s=R1   s'=T   T=R0    ret'
  \ -------------------------------------------------------------------------------
  (  C2E6  D0 C2             )
  (  C2E8  05 32 44 52 4F    )    t:  2DROP   \  push.LR   cfa= C2EE
  (  C2EE  B0 12 86 C1       )                  {2drop}
  (  C2F2  B0 12 86 C1       )              \    {drop}
  (  C2F6  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                                 :{  {2dup}     R0=s   sp-8  s=R0  s'=T  };
                               optimize?  @.
                               #if
                                  t:  2dup      R0=s   sp-8  s=R0  s'=T   ret'   \ tested ok
                               #else
  (  C2F8  E8 C2             )
  (  C2FA  04 32 44 55 50    )    t:  2DUP   \  push.LR   cfa= C300
  (  C300  B0 12 B2 C1       )                  {over}
  (  C304  B0 12 B2 C1       )                  {over}
  (  C308  30 41             )                                 ret'
                               #then
  \ -------------------------------------------------------------------------------
                                  :.  t+r0      t  0  r+r   ;.

                                  :{ {+}        nip>r0      t+r0    };
                                  t:  +
                                                     nip>r0    \   { r0, } sp ldm
                                                     t+r0
                                                     ret'
  \ -------------------------------------------------------------------------------
\ :.  nip>r0,r1,r2   { R0, R1, R2, }  sp   LDM   ;.

:{  R0+R2    0  2  r+r   };
:{  T+R1+c   414e  16,'  };

:{  {d+}    nip>r0,r1,r2    R0+R2     T+R1+c   {-nip}    s=R0    };

optimize?  @.
#if
\   t:  d+   nip>r0,r1,r2     \  { R0, R1, R2, }  sp   LDM
\            1880  16,'  \    0  2  r+r,s   ??????
\            414e  16,'  \    t  1  r+r+c   ??????
\            sp-4        \    {-nip}
\            s=r0        \    (sp)=r0     s=r0
\            ret'
   t:  d+    nip>r0,r1,r2    R0+R2     T+R1+c   {-nip}    s=R0    ret'

#else
  (  C312  0C C3             )
  (  C314  02 44 2B          )    t:  D+        push.LR   cfa= C318
  (  C318  B0 12 A0 C1       )              \   {swap}
  (  C31C  B0 12 64 C1       )                  {>r}        rot
  (  C320  B0 12 F2 C1       )                  UM+      rot
  (  C324  B0 12 3E C1       )                  {r>}
  (  C328  B0 12 0E C3       )                  {+}
  (  C32C  B0 12 0E C3       )                  {+}      \   {swap}
  (  C330  30 41             )                                 ret
#then
 
    :{ {0=}  t:0  {if'=}  t=-1    ret'   then'   t=0     };

    t:  0=   t:0   if'=   t=-1    ret'   then'   t=0     ret'
  \ -------------------------------------------------------------------------------
                                optimize?   @.
                                #if
                                  t:  not   t:0  if'=   t=-1    ret'   then'   t=0     ret'
                                #else
  (  C332  14 C3             )
  (  C334  03 4E 4F 54       )    t:  NOT                                         cfa= C338
  (  C338  34 E3             )             push.lr    0=    ret           \     T  Rx-1
  (  C33A  30 41             )                        \         ret'
                                #then
  \ -------------------------------------------------------------------------------
  (  C33C  34 C3             )
  (  C33E  02 32 2F          )    t:  2/                                          cfa= C342
  (  C342  04 11             )                    {2/}   \  T  rra.R
  (  C344  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                                optimize?   @.
                                #if
                                  t:  negate    {negate}    ret'
                                #else
  (  C346  3E C3             )
  (  C348  06 4E 45 47 41    )    t:  NEGATE                                      cfa= C350
  (  C350  34 E3             )                              T  Rx-1
  (  C352  14 53             )                              T  R+1
  (  C354  30 41             )                                 ret'
                                #then
  \ -------------------------------------------------------------------------------
                   :{  rsb_R0,R0,0    4240  16,'  };
                   :{  r0=0-r0        4240  16,'  };
                   :{  t-r1-c         418e  16,'  };

                                  :{ {DNEGATE}  R0=s  1 R=T  0 T=#   R0=0-R0   t-R1-c   s=R0   };

                             optimize?  @.
                             #if
                                  t:  DNEGATE   R0=s    R1=T   T=0   R0=0-R0   t-R1-c   s=R0   ret'
                             #else
  (  C356  48 C3             )
  (  C358  07 44 4E 45 47    )    t:  DNEGATE   push.LR   cfa= C360
  (  C360  B0 12 38 C3       )                  {invert}    \  NOT
  (  C364  B0 12 64 C1       )                  {>r}
  (  C368  B0 12 38 C3       )                  {invert}    \  NOT
  (  C36C  B0 12 A6 C0 01 00 )                  DOLIT:      0001
  (  C372  B0 12 F2 C1       )                  UM+
  (  C376  B0 12 3E C1       )                  {r>}
  (  C37A  B0 12 0E C3       )                  {+}
  (  C37E  30 41             )                                 ret
                             #then
  \ -------------------------------------------------------------------------------
   :{  {-}   nip>r0  r0-t  t=r0   };    \ tested ok

                                 optimize?   @.
                                 #if
                                  t:  -      {-}               ret'
                                 #else
  (  C380  58 C3             )
  (  C382  01 2D             )    t:  -                                           cfa= C384
  (  C384  34 85             )     t-s  {nip}   \ r7-(r5) r5+4 \  pop.R7!,{ r0, }   ldm.R7!,{r0,}     \  T sp R-(R+)   T-S  {nip}
  (  C386  34 E3             )     {-t}         \           T  Rx-1    \  {-t}
  (  C388  14 53             )                  \           T  R+1     \
  (  C38A  30 41             )                                 ret'
                                 #then
  \ -------------------------------------------------------------------------------
                                  :{  {abs}   TnT,tst  {if'-}             {negate}   then'  };   \ tested. ok
                                \ :{  {abs}   TnT,tst  here' here' n=0?   {negate}   then'  };

                                 optimize?   @.
                                 #if
                                  t:  abs       {abs}          ret'
                                 #else
  (  C38C  82 C3             )
  (  C38E  03 41 42 53       )    t:  ABS       push.LR   cfa= C392
  (  C392  B0 12 90 C1       )                  {dup}
  (  C396  B0 12 C4 C1       )                  0<
  (  C39A  B0 12 F0 C0 A4 C3 )        if#  \    ?BRANCH:    C3A4
  (  C3A0  B0 12 50 C3       )                  {negate}
  (  C3A4  30 41             )        then#                    ret
                                 #then
  \ -------------------------------------------------------------------------------
\ :. nip>r0        { r0, }      sp  ldm  ;.
\ :. nip>r0,r1     { r0, r1, }  sp  ldm  ;.

optimize?  @.  not.
#if
  (  C3A6  8E C3             )
  (  C3A8  01 3D             )    t:  =         push.LR   cfa= C3AA  \ ????
  (  C3AA  B0 12 E8 C1       )                  {xor}   
  (  C3AE  B0 12 F0 C0 BC C3 )          if#   \     C3BC
  (  C3B4  B0 12 A6 C0 00 00 )                  DOLIT:      0
  (  C3BA  30 41             )                                 ret
                                        then# \     here' dup. 0e -. 16!'
  (  C3BC  B0 12 A6 C0 FF FF )                  DOLIT:      FFFFffff
  (  C3C2  30 41             )                                 ret
#else

  :.  T-R0   t  0  r-r  ;.

\ :{  {=}    nip>r0  T-R0  if'z=0   T=0   ret'   then'   T-1   };  \ ret' is not allowed here.
  :{  {=}    nip>r0  T-R0  if'z=0   T=0   else'  T-1     then' };

                                    t:  =                                                       cfa= BEC
  (  00000BEC  01 CF             )              nip>r0  \ ldm     { R0, } sp
  (  00000BEE  36 1A             )              T-R0
  (  00000BF0  01 D0             )      if'z=0  \        BF6....z=1?(=?)
  (  00000BF2  00 26             )              T=0
  (  00000BF4  70 47             )              ret'
  (  00000BF6  76 1E             )      then'   T-1
  (  00000BF8  70 47             )              ret'
\  :{ {0<>}   t-1   t-t-c   {invert}    };
\  t:  0<>    t-1   t-t-c   {invert}    ret'
  :{  {=}   nip>r0  T-R0  {1-}  t-t-c  };
 
#then

\                                 t:  test.doLIT     push.LR  ( {dup} T=12345678 )  DOLIT:  12345678     ret
  \ -------------------------------------------------------------------------------
 t:   u<   { r0, }  sp  ldm   0 t r:r   if'c=0   t=0/   ret'   then'   t=0   ret'
  \ -------------------------------------------------------------------------------
optimize?  @.  not.
#if
  (  C3D2  C6 C3             )
  (  C3D4  01 3C             )    t:  <         push.LR   cfa= C3D6
  (  C3D6  B0 12 00 C3       )                  2DUP
  (  C3DA  B0 12 E8 C1       )                  {xor}   
  (  C3DE  B0 12 C4 C1       )                  0<
  (  C3E2  B0 12 F0 C0 F2    )        if#   \   C3F2
  (  C3E8  B0 12 86 C1       )                  {drop} 
  (  C3EC  B0 12 C4 C1       )                  0<
  (  C3F0  30 41             )                                 ret
  (  C3F2  B0 12 84 C3       )        then#       -
  (  C3F6  B0 12 C4 C1       )                  0<
  (  C3FA  30 41             )                                 ret
#else
                                    t:  <                                                       cfa= BBC
  (  00000BBC  01 CF             )              nip>r0   \  ldm     { R0, } sp
  (  00000BBE  B0 42             )      0 t r:r \        R0:T
  (  00000BC0  02 D5             )      if'n=1  \       BC8....n=0?(+?)
  (  00000BC2  01 26             )              T=1
  (  00000BC4  76 42             )         t t 0  rsb_r,r,#  \   rsb_T,T,0
  (  00000BC6  70 47             )              ret'
  (  00000BC8  00 26             )      then'   T=0
  (  00000BCA  70 47             )              ret'
#then
  \ -------------------------------------------------------------------------------
optimize?  @.  not.
#if
  (  C3FC  D4 C3             )
  (  C3FE  03 4D 41 58       )    t:  MAX       push.LR   cfa= C402
  (  C402  B0 12 00 C3       )                  2DUP
  (  C406  B0 12 D6 C3       )                  <
  (  C40A  B0 12 F0 C0 14 C4 )        if#   \   C414
  (  C410  B0 12 A0 C1       )                  {swap}  
  (  C414  B0 12 86 C1       )        then#     {drop}
  (  C418  30 41             )                                 ret
#else
                                     t:  max                                                     cfa= BA4
  (  00000BA4  01 CF             )              nip>r0  \  ldm     { R0, } sp   \ nip>r0
  (  00000BA6  86 42             )      t 0 r:r  \        T:R0
  (  00000BA8  00 D5             )   if'n=1     \       BAC....n=0?(+?)
  (  00000BAA  06 46             )              T=R0
  (  00000BAC  70 47             )   then'      ret'
#then
\ -------------------------------------------------------------------------------
optimize?  @.  not.
#if
  (  C41A  FE C3             )
  (  C41C  03 4D 49 4E       )    t:  MIN       push.LR   cfa= C420
  (  C420  B0 12 00 C3       )                  2DUP
  (  C424  B0 12 A0 C1       )                  {swap}  
  (  C428  B0 12 D6 C3       )                  <
  (  C42C  B0 12 F0 C0 36 C4 )        if#   \   C436
  (  C432  B0 12 A0 C1       )                  {swap}  
  (  C436  B0 12 86 C1       )        then#     {drop} 
  (  C43A  30 41             )                                 ret
#else
                                    t:  min                                                     cfa= BB0
  (  00000BB0  01 CF             )              nip>r0 \  ldm     { R0, } sp   \ drop>0
  (  00000BB2  B0 42             )     0 t r:r  \         R0:T
  (  00000BB4  00 D5             )  if'n=1      \            BB8....n=0?(+?)
  (  00000BB6  06 46             )              T=R0
  (  00000BB8  70 47             )  then'       ret'
#then
  \ -------------------------------------------------------------------------------
                                    t:  umax                                                    cfa= 420
  (  0000041E  01 CF             )                  nip>r0
  (  00000420  B0 42             )                  R0:T
  (  00000422  88 BF             )      bf88 16,' \ it'u>......ithi
  (  00000424  06 46             )                  T=R0
  (  00000426  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  umin                                                    cfa= 434
  (  00000434  01 CF             )                  nip>r0
  (  00000436  B0 42             )                  R0:T
  (  00000438  38 BF             )      bf38 16,' \ it'c=0.....itcc
  (  0000043A  06 46             )                  T=R0
  (  0000043C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                             :{  t-t-c   41b6  16,'  };
                             optimize?  @.
#if
                               \  t:  between   t+1
                                  t:  within    nip>r0,r1   T-R0   R1-R0    R1-T    t-t-c  ret'
#else
  (  C43C  1C C4             ) \  t:  between   t+1
  (  C43E  06 57 49 54 48    )    t:  WITHIN    push.LR   cfa= C446
  (  C446  B0 12 B2 C1       )                  {over}
  (  C44A  B0 12 84 C3       )                  -
  (  C44E  B0 12 64 C1       )                  {>r}
  (  C452  B0 12 84 C3       )                  -
  (  C456  B0 12 3E C1       )                  {r>}
  (  C45A  B0 12 CA C3       )                  U<
  (  C45E  30 41             )                                 ret
#then
  \ -------------------------------------------------------------------------------
optimize?  @.  not.
#if
  (  C460  3E C4             )
  (  C462  06 55 4D 2F 4D    )    t:  UM/MOD    push.LR   cfa= C46A
  (  C46A  B0 12 00 C3       )                  2DUP
  (  C46E  B0 12 CA C3       )                  U<
  (  C472  B0 12 F0 C0 FC C4 )        if#   \   C4FC
  (  C478  B0 12 50 C3       )                  {negate}   
  (  C47C  B0 12 A6 C0 0F 00 )                  DOLIT:      001F
  (  C482  B0 12 64 C1       )               \  {>r} 
  (  C486  B0 12 64 C1       )           for    {>r} 
  (  C48A  B0 12 90 C1       )                  {dup} 
  (  C48E  B0 12 F2 C1       )                  UM+
  (  C492  B0 12 64 C1       )                  {>r} 
  (  C496  B0 12 64 C1       )                  {>r} 
  (  C49A  B0 12 90 C1       )                  {dup} 
  (  C49E  B0 12 F2 C1       )                  UM+
  (  C4A2  B0 12 3E C1       )                  {r>} 
  (  C4A6  B0 12 0E C3       )                  {+}  
  (  C4AA  B0 12 90 C1       )                  {dup} 
  (  C4AE  B0 12 3E C1       )                  {r>} 
  (  C4B2  B0 12 50 C1       )                  {r@}  
  (  C4B6  B0 12 A0 C1       )                  {swap}
  (  C4BA  B0 12 64 C1       )                  {>r} 
  (  C4BE  B0 12 F2 C1       )                  UM+
  (  C4C2  B0 12 3E C1       )                  {r>} 
  (  C4C6  B0 12 DE C1       )                  {or}   
  (  C4CA  B0 12 F0 C0 E4 C4 )          if#   \ C4E4
  (  C4D0  B0 12 64 C1       )                  {>r} 
  (  C4D4  B0 12 86 C1       )                  {drop} 
  (  C4D8  14 53             )                              T  R+1
  (  C4DA  B0 12 3E C1       )                  {r>} 
  (  C4DE  B0 12 06 C1 E8 C4 )          else# \ BRANCH:     C4E8
  (  C4E4  B0 12 86 C1       )                  {drop} 
  (  C4E8  B0 12 3E C1       )          then#   {r>}
  (  C4EC  B0 12 D6 C0 86 C4 )                  next  \        C486
  (  C4F2  B0 12 86 C1       )                  {drop} 
  (  C4F6  B0 12 A0 C1       )                  {swap}  
  (  C4FA  30 41             )                                 ret
  (  C4FC  B0 12 86 C1       )        then#     {drop} 
  (  C500  B0 12 EE C2       )                  {2drop}    
  (  C504  B0 12 A6 C0 FF FF )                  DOLIT:      ffffFFFF
  (  C50A  B0 12 90 C1       )                  {dup} 
  (  C50E  30 41             )                                 ret
#else     

:{  R0-T-c     0 t r-r-c  };
:{  R2+R2+c    2 2 r+r+c  };

      t:  um/mod'''                                                  cfa=     512C
  (  0000512C  03 CF             )                  nip>r0,r1
  (  0000512E  00 22             )                  R2=0
  (  00005130  21 23             )                  R3=21
                                    begin'.                    \  00005142 --> 00005132  +++++++++++++++++++++++++
  (  00005132  B0 42             )                  42B0 16,'  \  0 t r:r         \   R0:T
  (  00005134  00 D3             )     if'c=1                  \  if'u>= \ c=0? lo?     \  00005134 --> 00005138  --------------------------------
  (  00005136  B0 41             )                  41B0 16,'  \        R0-T-c
                                       then'                   \  00005134 --> 00005138  --------------------------------
                                          begin'
  (  00005138  52 41             )                  4152 16,'  \  2 2 r+r+c       \      R2+R2+c
  (  0000513A  5B 1E             )                  R3-1
  (  0000513C  05 D0             )        while'z=0            \  z=1? eq?        \  0000513C --> 0000514A  ===========
  (  0000513E  49 18             )                  R1+R1
  (  00005140  40 41             )                  4140 16,'  \  0 0 r+r+c       \  R0+R0+c
  (  00005142  F6 D3             )  until'c=1.                 \  u>= \ c=0? lo?  \  00005142 --> 00005132  +++++++++++++++++++++++++
  (  00005144  80 1B             )                  r0-t
  (  00005146  00 43             )                  R0oR0
  (  00005148  F6 E7             )        repeat'  \    jmp_513811
  (  0000514A  04 3F             )                  {-nip}
  (  0000514C  38 60             )                  s=R0
  (  0000514E  16 00             )                  t 2 r=r \    T=R2
  (  00005150  70 47             )                  ret'

:.  T222  ;.

t:  um/mod
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  R2=0        \  2200 16,'
( 0520   21 R3 MOVS     )                  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         42B0 16,'
( 0524   0528 BCC       )     if'c=1 \     D300 16,'
( 0526   R6 R0 SBCS     )                  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       4152 16,'
( 052A   1 R3 R3 SUBS   )                  1E5B 16,'
( 052C   053A BEQ       )     while'z=0  \    D005 16,'
( 052E   R1 R1 R1 ADDS  )                  1849 16,'
( 0530   R0 R0 ADCS     )                  4140 16,'
( 0532   0522 BCC       )  until'c=1. \ D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  1B80 16,'
( 0536   R0 R0 ORRS     )                  4300 16,'
( 0538   0528 B         )     repeat'  \      E7F6 16,'
( 053A   4 R7 SUBS      )                  3F04 16,'
( 053C   0 R7 R0 STR    )                  6038 16,'
( 053E   R2 R6 MOVS     )                  0016 16,'
( 0540   LR BX          )                  4770 16,'

:.  T333  ;.
:. TEEE  ;.
  (  C460  3E C4             )    :. TDDD ;.
  (  C462  06 55 4D 2F 4D    )    t:  UM/MOD*    push.LR   cfa= C46A

:.  TCCC  ;.

  (  C46A  B0 12 00 C3       )                  2DUP
  (  C46E  B0 12 CA C3       )                  U<

:.  TBBB ;.

  (  C472  B0 12 F0 C0 FC C4 )        if#   \   C4FC
  (  C478  B0 12 50 C3       )                  {negate}   
  (  C47C  B0 12 A6 C0 0F 00 )                  DOLIT:      001F
  (  C482  B0 12 64 C1       )          \       {>r}
  (  C486  B0 12 64 C1       )          for     {>r} 
  (  C48A  B0 12 90 C1       )                  {dup}

:.  TAAA  ;.


  (  C48E  B0 12 F2 C1       )                  UM+
  (  C492  B0 12 64 C1       )                  {>r} 
  (  C496  B0 12 64 C1       )                  {>r} 
  (  C49A  B0 12 90 C1       )                  {dup} 
  (  C49E  B0 12 F2 C1       )                  UM+
  (  C4A2  B0 12 3E C1       )                  {r>} 
  (  C4A6  B0 12 0E C3       )                  {+}  
  (  C4AA  B0 12 90 C1       )                  {dup} 
  (  C4AE  B0 12 3E C1       )                  {r>} 
  (  C4B2  B0 12 50 C1       )                  {r@}

:.  T777 ;.


  (  C4B6  B0 12 A0 C1       )                  {swap}  
  (  C4BA  B0 12 64 C1       )                  {>r} 
  (  C4BE  B0 12 F2 C1       )                  UM+
  (  C4C2  B0 12 3E C1       )                  {r>} 
  (  C4C6  B0 12 DE C1       )                  {or}   
  (  C4CA  B0 12 F0 C0 E4 C4 )          if#   \ C4E4
  (  C4D0  B0 12 64 C1       )                  {>r} 
  (  C4D4  B0 12 86 C1       )                  {drop} 
  (  C4D8  14 53             )                              T  R+1
  (  C4DA  B0 12 3E C1       )                  {r>} 
  (  C4DE  B0 12 06 C1 E8 C4 )          else# \ BRANCH:     C4E8

:.  T888  ;.

  (  C4E4  B0 12 86 C1       )                  {drop} 
  (  C4E8  B0 12 3E C1       )          then#   {r>} 
  (  C4EC  B0 12 D6 C0 86 C4 )                  next  \        C486
  (  C4F2  B0 12 86 C1       )                  {drop} 
  (  C4F6  B0 12 A0 C1       )                  {swap}  
  (  C4FA  30 41             )                                 ret
  (  C4FC  B0 12 86 C1       )        then#     {drop} 
  (  C500  B0 12 EE C2       )                  {2drop}    
  (  C504  B0 12 A6 C0 FF FF )                  DOLIT:      ffffFFFF
  (  C50A  B0 12 90 C1       )                  {dup} 
  (  C50E  30 41             )                                 ret


#then
:.  T444  ;.
  \ -------------------------------------------------------------------------------
  (  C510  62 C4             )
  (  C512  05 4D 2F 4D 4F    )    t:  M/MOD     push.LR   cfa= C518
  (  C518  B0 12 90 C1       )                  {dup}
  (  C51C  B0 12 C4 C1       )                  0<
  (  C520  B0 12 90 C1       )                  {dup}       \ {dup>r}
  (  C524  B0 12 64 C1       )                  {>r}        \
  (  C528  B0 12 F0 C0 3E C5 )        if#   \   C53E
  (  C52E  B0 12 50 C3       )                  {negate}
  (  C532  B0 12 64 C1       )                  {>r}
  (  C536  B0 12 60 C3       )                  DNEGATE
  (  C53A  B0 12 3E C1       )                  {r>}
  (  C53E  B0 12 64 C1       )        then#     {>r}
  (  C542  B0 12 90 C1       )                  {dup}       \ if't<0
  (  C546  B0 12 C4 C1       )                  0<          \
  (  C54A  B0 12 F0 C0 58 C5 )        if#   \     C558      \
  (  C550  B0 12 50 C1       )                  {r@}        \ t+(rp)
  (  C554  B0 12 0E C3       )                  {+}         \
  (  C558  B0 12 3E C1       )        then#     {r>}
  (  C55C  B0 12 6A C4       )                  UM/MOD
  (  C560  B0 12 3E C1       )                  {r>}
  (  C564  B0 12 F0 C0 76 C5 )        if#   \   C576
  (  C56A  B0 12 A0 C1       )                  {swap}      \ -s
  (  C56E  B0 12 50 C3       )                  {negate}    \
  (  C572  B0 12 A0 C1       )                  {swap}      \
  (  C576  30 41             )        then#                 ret
  \ -------------------------------------------------------------------------------
  (  C578  12 C5             )
  (  C57A  04 2F 4D 4F 44    )    t:  /MOD      push.LR   cfa= C580
  (  C580  B0 12 B2 C1       )                  {over}
  (  C584  B0 12 C4 C1       )                  0<
  (  C588  B0 12 A0 C1       )                  {swap}
  (  C58C  B0 12 18 C5       )                  M/MOD
  (  C590  30 41             )                                 ret

  \ -------------------------------------------------------------------------------
  (  C592  7A C5             )
  (  C594  03 4D 4F 44       )    t:  MOD       push.LR   cfa= C598
  (  C598  B0 12 80 C5       )                  /MOD
  (  C59C  B0 12 86 C1       )                  {drop}
  (  C5A0  30 41             )                                 ret
  \ -------------------------------------------------------------------------------

:.  T555  ;.

optimize?  @.  not.
#if
  (  C5A2  94 C5             )
  (  C5A4  01 2F             )    t:  /         push.LR   cfa= C5A6
  (  C5A6  B0 12 80 C5       )                  /MOD
  (  C5AA  B0 12 A0 C1       )                  {swap}         \ {nip}
  (  C5AE  B0 12 86 C1       )                  {drop}         \
  (  C5B2  30 41             )                                 ret
#else

                                    t:  /                                                       cfa= BB0
  (  00000BB0  00 B5             )      push.lr  \  lr                                    push{}
  (  00000BB2  01 CF             )      { R0, } sp                             ldm
  (  00000BB4  90 FB F6 F6       )                    6         0         6    sdiv_R,R,R
  (  00000BB8  00 BD             )      ret      \  { }  pc                                pop
#then
  \ -------------------------------------------------------------------------------
                             :.  umull_T,R0,T,T    FBA0 16,'    0606 16,'  ;.

                             optimize?  @.
                             #if
                                  t:  um*   R0=s    umull_T,R0,T,T   s=R0   ret'
                             #else
  (  C5B4  A4 C5             )
  (  C5B6  03 55 4D 2A       )    t:  UM*       push.LR   cfa= C5BA
  (  C5BA  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  C5C0  B0 12 A0 C1       )                  {swap}
  (  C5C4  B0 12 A6 C0 0F 00 )                  DOLIT:     1f \  000F
  (  C5CA  B0 12 64 C1       )                \  {>r}
  (  C5CE  B0 12 90 C1       )        for          {dup}
  (  C5D2  B0 12 F2 C1       )                  UM+
  (  C5D6  B0 12 64 C1       )                  {>r}
  (  C5DA  B0 12 64 C1       )                  {>r}
  (  C5DE  B0 12 90 C1       )                  {dup}
  (  C5E2  B0 12 F2 C1       )                  UM+
  (  C5E6  B0 12 3E C1       )                  {r>}
  (  C5EA  B0 12 0E C3       )                  {+}
  (  C5EE  B0 12 3E C1       )                  {r>}
  (  C5F2  B0 12 F0 C0 0C C6 )        if#   \   ?branch     C60C
  (  C5F8  B0 12 64 C1       )                  {>r}
  (  C5FC  B0 12 B2 C1       )                  {over}
  (  C600  B0 12 F2 C1       )                  UM+
  (  C604  B0 12 3E C1       )                  {r>}
  (  C608  B0 12 0E C3       )                  {+}
  (  C60C  B0 12 D6 C0 CE C5 )        then#     next  \      c5c8  \ C5CE
  (  C612  B0 12 D4 C2       )                  ROT
  (  C616  30 40 86 C1       )                  {drop}   -;
                             #then
  \ -------------------------------------------------------------------------------
                              \ :.  T*R0     t 0  R*R  ;.
                                   optimize?  @.
                                   #if
                                    t:  *                                                       cfa= 20001004
  (  20001004  01 CF             )                  nip>r0
  (  20001006  46 43             )                  T*R0
  (  20001008  70 47             )                  ret'
                                   #else
  (  C61A  B6 C5             )
  (  C61C  01 2A             )    t:  *         push.LR   cfa= C61E
  (  C61E  B0 12 BA C5       )                  UM*
  (  C622  30 40 86 C1       )                  {drop}   -;
                                   #then
  \ -------------------------------------------------------------------------------
           :.  smull_T,R0,T,T     FB80 16,'  0606  16,'  ;.

                             optimize?  @.
                             #if
                                 t:   m*      R0=s    smull_T,R0,T,T   s=R0   ret'
                             #else
  (  C626  1C C6             )
  (  C628  02 4D 2A          )    t:  M*        push.LR   cfa= C62C
  (  C62C  B0 12 00 C3       )                  2DUP
  (  C630  B0 12 E8 C1       )                  {xor}   
  (  C634  B0 12 C4 C1       )                  0<
  (  C638  B0 12 64 C1       )                  {>r} 
  (  C63C  B0 12 92 C3       )                  ABS
  (  C640  B0 12 A0 C1       )                  {swap}
  (  C644  B0 12 92 C3       )                  ABS
  (  C648  B0 12 BA C5       )                  UM*
  (  C64C  B0 12 3E C1       )                  {r>} 
  (  C650  B0 12 F0 C0 5A C6 )        if#   \   C65A
  (  C656  B0 12 60 C3       )                  DNEGATE
  (  C65A  30 41             )        then#                    ret
                             #then
  \ -------------------------------------------------------------------------------
  (  C65C  28 C6             )
  (  C65E  05 2A 2F 4D 4F    )    t:  */MOD     push.LR   cfa= C664
  (  C664  B0 12 64 C1       )                  {>r} 
  (  C668  B0 12 2C C6       )                  M*
  (  C66C  B0 12 3E C1       )                  {r>} 
  (  C670  B0 12 18 C5       )                  M/MOD
  (  C674  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C676  5E C6             )
  (  C678  02 2A 2F          )    t:  */        push.LR   cfa= C67C
  (  C67C  B0 12 64 C6       )                  */MOD
  (  C680  B0 12 A0 C1       )                  {nip}  \   {swap}
  (  C684  B0 12 86 C1       )                         \   {drop}
  (  C688  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
                                 :{ {4+}      T  4  R+#  };
                                 :{ {cell+}   T  4  R+#  };
  (  C68A  78 C6             )
  (  C68C  05 43 45 4C 4C    )    t:  CELL+                                       cfa= C692
  (  C692  24 53             )                T  4  R+#  \   T  R+4
  (  C694  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                                :{ {4-}       T  4  R-#  };
                                :{ {cell-}    T  4  R-#  };
  (  C696  8C C6             )
  (  C698  05 43 45 4C 4C    )    t:  CELL-                                       cfa= C69E
  (  C69E  24 83             )                T  4 r-#
  (  C6A0  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                                :{ {4*}     t t 2 R=R<<#    };
                                :{ {cells}  t t 2 R=R<<#    };
  (  C6A2  98 C6             )
  (  C6A4  05 43 45 4C 4C    )    t:  CELLS                                       cfa= C6AA
  (  C6AA  04 54             )              t t 2 R=R<<#   \ T      T  R+R                          \ ???????????
  (  C6AC  30 41             )                               ret'
  \ -------------------------------------------------------------------------------
  (  C6AE  A4 C6             )
  (  C6B0  07 41 4C 49 47    )    t:  ALIGNED                                     cfa= C6B8
  (  C6B8  14 53             )                  T 3 R+#   \ T  R+1
  (  C6BA  14 C3             )                  T 3 Rn#/  \ T  Rn1/
  (  C6BC  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C6BE  B0 C6             )
  (  C6C0  02 42 4C          )    t:  BL                                          cfa= C6C4
  (  C6C4  25 83             )                              sp 4 r-#
  (  C6C6  85 44 00 00       )                       sp     T  (R)=R
  (  C6CA  34 40 20 00       )                       T     20  R=#
  (  C6CE  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  C6D0  C0 C6             )
  (  C6D2  05 3E 43 48 41    )    t:  >CHAR     push.LR   cfa= C6D8
  (  C6D8  B0 12 90 C1       )                  {dup} 
  (  C6DC  B0 12 C4 C6       )                  BL
  (  C6E0  B0 12 A6 C0 7F 00 )                  DOLIT:      007F
  (  C6E6  B0 12 46 C4       )                  WITHIN
  (  C6EA  B0 12 F0 C0 F2 C6 )        if#   \   C6F2
  (  C6F0  30 41             )                                 ret
  (  C6F2  B0 12 86 C1       )        then#     {drop} 
  (  C6F6  B0 12 A6 C0 5F 00 )                  DOLIT:      005F
  (  C6FC  30 41             )                                 ret
  \ -------------------------------------------------------------------------------

 

  (  C6FE  D2 C6             )
  (  C700  05 44 45 50 54    )    t:  DEPTH     push.LR   cfa= C706
  (  C706  B0 12 72 C1       )                  SP@
  (  C70A  B0 12 A6 C0 78 03 )                  DOLIT:      20000378
  (  C710  B0 12 A0 C1       )                  {swap}
  (  C714  B0 12 84 C3       )                  -      {4/}   ret       
\ (  C718  14 3E             )      \    DOLIT:  00000004      /   ( 2/ )     ret  \ ???????????
\ (  C718  14 3E             )                     4 ...  /   ( 2/ )            -;
  \ -------------------------------------------------------------------------------
                               :.  T=(sp+T)   T  sp  T  r=(r+r)   ;.
                               :{ {pick}      {cells}   T=(sp+T)  };

                               optimize?  @.
                               #if
                                 t:  pick       {pick}    ret'
                               #else
  (  C71A  00 C7             )
  (  C71C  04 50 49 43 4B    )    t:  PICK      push.LR   cfa= C722
  (  C722  B0 12 AA C6       )                  CELLS
  (  C726  B0 12 72 C1       )                  SP@
  (  C72A  B0 12 0E C3       )                  {+}
  (  C72E  B0 12 1A C1       )                  {@}
  (  C732  30 41             )                                 ret
                               #then
  \ ------------------------------------------------------------------------
                                    t:  +!.16       t: h+!       ( 16n a' -- )    \ (T)+S,2drop,16bit    cfa= 4CC
  (  000004CA  03 CF             )                  nip>r0,r1
  (  000004CC  32 88             )        8832 16,' \          R2=(T),h
  (  000004CE  12 18             )                  R2+R0
  (  000004D0  32 80             )        8032 16,' \          (T)=R2,h
  (  000004D2  0E 46             )                  T=R1
  (  000004D4  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  +!.8        t: c+!       ( 8n a' -- )    \ (T)+S,2drop,8bit    cfa= 500
  (  00000500  03 CF             )                  nip>r0,r1
  (  00000502  32 78             )        7832 16,' \          R2=(T)b
  (  00000504  12 18             )                  R2=R2+R0
  (  00000506  32 70             )        7032 16,' \          (T)=R2,b
  (  00000508  0E 46             )                  T=R1
  (  0000050A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  \ ------------------------------------------------------------------------
                                    t:  xor!                ( 32n a' -- )   \ (T)xS,2drop       cfa= 548
  (  00000548  03 CF             )                  nip>r0,r1
  (  0000054A  32 68             )                  R2=(T)
  (  0000054C  42 40             )                  R2xR0
  (  0000054E  32 60             )                  (T)=R2
  (  00000550  0E 46             )                  T=R1
  (  00000552  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  or!       \ t:  bis!  ( 32n a' -- )    \ (T)oS,2drop      cfa= 518
  (  00000518  03 CF             )                  nip>r0,r1
  (  0000051A  32 68             )                  R2=(T)
  (  0000051C  02 43             )                  R2oR0
  (  0000051E  32 60             )                  (T)=R2
  (  00000520  0E 46             )                  T=R1
  (  00000522  70 47             )                  ret'

                                    t:  bis!        push.LR   or!   ret
  \ ------------------------------------------------------------------------
                                    t:  and!                  ( 32n a' -- )   \ (T)nS,2drop       cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bit@                ( 32n a' -- )   \ (T)nS,2drop,32bit=T/F     cfa= 560
  (  00000560  01 CF             )                  nip>r0
  (  00000562  36 68             )                  {@}
  (  00000564  06 40             )                  TnR0
  (  00000566  18 BF             )      bf18 16,' \            it'<>......itne
  (  00000568  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000056C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bic!                  ( 32n a' -- )   \ (T)nS/,2drop      cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0/
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'

  \ ------------------------------------------------------------------------
  \ ------------------------------------------------------------------------
                                    t:  xor!.16     t: hxor!   ( 16n a' -- )   \ (T)xS,2drop,16bit       cfa= 5AC
  (  000005AA  03 CF             )                  nip>r0,r1
  (  000005AC  32 88             )      8832 16,' \            R2=(T),h
  (  000005AE  42 40             )                  R2xR0
  (  000005B0  32 80             )      8032 16,' \            (T)=R2,h
  (  000005B2  0E 46             )                  T=R1
  (  000005B4  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  or!.16      t: hbis!    ( 16n a' -- )   \ (T)oS,2drop,16bit     cfa= 57C
  (  0000057C  32 88             )      8832 16,' \ R2=(T),h
  (  0000057E  02 43             )                  R2oR0
  (  00000580  32 80             )      8032 16,' \ (T)=R2,h
  (  00000582  0E 46             )                  T=R1
  (  00000584  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  and!.16               ( 16n a' -- )   \ (T)nS,2drop,16bit     cfa= 594
  (  00000592  03 CF             )                  nip>r0,r1
  (  00000594  32 88             )      8832 16,' \            R2=(T),h
  (  00000596  82 43             )                  R2nR0
  (  00000598  32 80             )      8032 16,' \            (T)=R2,h
  (  0000059A  0E 46             )                  T=R1
  (  0000059C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bit@.16     t: hbit@    ( 16n a' -- f )  \ (T)nS,2drop,16bit=T/F   cfa= 5C4
  (  000005C2  01 CF             )                  nip>r0
  (  000005C4  36 88             )      8836 16,' \            T=(T),h
  (  000005C6  06 40             )                  TnR0
  (  000005C8  18 BF             )      bf18 16,' \            it'<>......itne
  (  000005CA  4F F0 FF 36       )                  T=FFFFFFFF
  (  000005CE  70 47             )                  ret'
                                    t:  bic!.16     t:  hbic!    ( 16n a' -- )    \ (T)nS/,2drop,16bit     cfa= 594
  (  00000592  03 CF             )                  nip>r0,r1
  (  00000594  32 88             )      8832 16,' \            R2=(T),h
  (  00000596  82 43             )                  R2nR0/
  (  00000598  32 80             )      8032 16,' \            (T)=R2,h
  (  0000059A  0E 46             )                  T=R1
  (  0000059C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  \ ------------------------------------------------------------------------
                                    t:  xor!.8    t: cxor!    ( 8n a' -- )   \ (T)xS,2drop,8bit        cfa= 60C
  (  0000060C  03 CF             )                  nip>r0,r1
  (  0000060E  32 78             )      7832 16,' \            R2=(T)b
  (  00000610  42 40             )                  R2xR0
  (  00000612  32 70             )      7032 16,' \            (T)=R2,b
  (  00000614  0E 46             )                  T=R1
  (  00000616  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  or!.8     t: cbis!     ( 8n a' -- )   \ (T)oS,2drop,8bit      cfa= 5DC
  (  000005DC  03 CF             )                  nip>r0,r1
  (  000005DE  32 78             )      7832 16,' \ R2=(T)b
  (  000005E0  02 43             )                  R2oR0
  (  000005E2  32 70             )      7032 16,' \            (T+0)=R2,b
  (  000005E4  0E 46             )                  T=R1
  (  000005E6  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  and!.8                 ( 8n a' -- )   \ (T)nS,2drop,8bit      cfa= 5F4
  (  000005F4  03 CF             )                  nip>r0,r1
  (  000005F6  32 78             )      7832 16,' \            R2=(T)b
  (  000005F8  82 43             )                  R2nR0
  (  000005FA  32 70             )      7032 16,' \            (T)=R2,b
  (  000005FC  0E 46             )                  T=R1
  (  000005FE  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bit@.8      t:  cbit@                 ( 8n a' -- )   \ (T)nS,2drop,8bit=T/F    cfa= 624
  (  00000624  01 CF             )                  nip>r0
  (  00000626  36 78             )                  {c@}
  (  00000628  06 40             )                  TnR0
  (  0000062A  18 BF             )      bf18 16,' \            it'<>......itne
  (  0000062C  4F F0 FF 36       )                  T=FFFFFFFF
  (  00000630  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bic!.8      t: cbic!                  ( 8n a' -- )   \ (T)nS/,2drop,8bit      cfa= 5F4
  (  000005F4  03 CF             )                  nip>r0,r1
  (  000005F6  32 78             )      7832 16,' \            R2=(T)b
  (  000005F8  82 43             )                  R2nR0/
  (  000005FA  32 70             )      7032 16,' \            (T)=R2,b
  (  000005FC  0E 46             )                  T=R1
  (  000005FE  70 47             )                  ret'
  \ ------------------------------------------------------------------------




























                                optimize?  @.
                                #if
                                    t:  2!                cfa= AC0
  (  00000AC0  30 00             )                  R0=T
  (  00000AC2  46 CF             )                  { R1, R2, T, } sp    ldm
\ (  00000AC4  06 BC             )                  pop { R1, R2, }
  (  00000AAC  06 C0             )                  c006  16,'
  (  00000AC6  70 47             )                  ret'
                                #else
  (  C754  36 C7             )
  (  C756  02 32 21          )    t:  2!'       push.LR   cfa= C75A
  (  C75A  B0 12 A0 C1       )                  {swap}
  (  C75E  B0 12 B2 C1       )                  {over}
  (  C762  B0 12 0E C1       )                  {!}
  (  C766  B0 12 92 C6       )                  CELL+
  (  C76A  B0 12 0E C1       )                  {!}
  (  C76E  30 41             )                                 ret
                                #then
  \ ------------------------------------------------------------------------
                                    t:  2!"                                                      cfa= AA8
  (  00000AA8  30 46             )                  R0=T
  (  00000AAA  46 CF             )                  { R1, R2, T, } sp  ldm
  (  00000AAC  06 C0             )                  { R1, R2, }  pop{}      \ ???? pop
  (  00000AAE  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                             :.  R=(T+#)     T  swap.  R=(R+#)  ;.
                             :{  {2@}    0  t  4  R=(r+#)   {-nip}   s=R0  {@}   };
                             optimize? @.
                             #if
                                  t:  2@        R0=(T+4)   {-nip}   s=R0   {@}    ret'
                             #else
  (  C770  56 C7             )
  (  C772  02 32 40          )    t:  2@        push.LR   cfa= C776
  (  C776  B0 12 90 C1       )                  {dup} 
  (  C77A  B0 12 92 C6       )                  CELL+
  (  C77E  B0 12 1A C1       )                  {@}
  (  C782  B0 12 A0 C1       )                  {swap}  
  (  C786  B0 12 1A C1       )                  {@}
  (  C78A  30 41             )                                 ret
                             #then
  \ -------------------------------------------------------------------------------
                      :.  t=(r)b   t  swap.  r=(r)b   ;.

                  \    t:  count   R0=T   0 T=(R)b     R0+1   {-nip}    s=R0   ret'
                              :.   T=(R0)b  7806 16,'  ;.
                              optimize?  @.
                             #if
                                  t:  count   R0=T     T=(R0)b     R0+1   {-nip}    s=R0   ret'
                             #else
                                  t:  count  push.lr  {dup}  {1+}  {swap}   {c@}   ret
                             #then
  \ -------------------------------------------------------------------------------
                              \   t:  IHERE     push.LR   CP   @   ret
  (  C7A0  8E C7             )
  (  C7A2  04 48 45 52 45    )    t:  HERE      push.LR   cfa= C7A8
  (  C7A8  B0 12 A0 C2       )                  DP
  (  C7AC  B0 12 1A C1       )                  {@}
  (  C7B0  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C7B2  A2 C7             )
  (  C7B4  03 50 41 44       )    t:  PAD       push.LR   cfa= C7B8
  (  C7B8  B0 12 A8 C7       )                  HERE
  (  C7BC  34 50 32 00       )                       T     32  R+#
  (  C7C0  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C7C2  B4 C7             )
  (  C7C4  03 54 49 42       )    t:  TIB
  (  C7C8  25 83             )                              sp 4 r-#
  (  C7CA  85 44 00 00       )                       sp     T  (R)=R
  (  C7CE  34 40 80 03       )                       T    20000380  R=#
  (  C7D2  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
                             optimize?  @.
                             #if
  (  20001012  36 68             )                  {@}
  (  20001014  70 1C             )           0 t 1  r=r+#,s   \  R0=T+1,s
  (  20001016  40 CF             )                  {drop}
  (  20001018  01 28             )   \          0 1 r:#       \  R0:1
  (  2000101A  00 D0             )   \     if'<> \ z=1? eq?      \  2000101A --> 2000101E  **
  (  2000101C  00 47             )                  jmp_R0
                                     \     then'                 \  2000101A --> 2000101E  **
  (  2000101E  70 47             )   \              ret'
                             #else
  (  C7D4  C4 C7             )
  (  C7D6  08 40 45 58 45    )    t:  @EXECUTE  push.LR   cfa= C7E0
  (  C7E0  B0 12 1A C1       )                  {@}
  (  C7E4  B0 12 C8 C2       )                  ?DUP
  (  C7E8  B0 12 F0 C0 F2 C7 )        if#   \   C7F2
  (  C7EE  B0 12 C8 C0       )                  EXECUTE
  (  C7F2  30 41             )        then#                    ret
                             #then
  \ -------------------------------------------------------------------------------
optimize?  @.  not.
#if
  (  C7F4  D6 C7             )
  (  C7F6  05 43 4D 4F 56    )    t:  CMOVE     push.LR   cfa= C7FC
  (  C7FC  B0 12 64 C1       )                  {>r} 
  (  C800  B0 12 06 C1 1C C8 ) ( for# ) ahead#  \ BRANCH:     C81C
  (  C806  B0 12 64 C1       )      here' >1    \   {>r} 
  (  C80A  B0 12 94 C7       )                  COUNT
  (  C80E  B0 12 50 C1       )                  {r@}  
  (  C812  B0 12 24 C1       )                  {c!}
  (  C816  B0 12 3E C1       )                  {r>} 
  (  C81A  14 53             )                              T  R+1
  (  C81C  B0 12 D6 C0 06 C8 )        then# ( next# )    nex.  1>  n=0?   \        C806
  (  C822  B0 12 EE C2       )                  {2drop}    
  (  C826  30 41             )                                 ret
#else
  t:  cmove  ( from to length -- )    { R0, R1, } sp LDM     t=t,s
      if'z=0
         begin'
             \ r2=(r1),b     r1+1
             \ (r0)=r2,b     r0+1  \  r1+1
             \ r2=(r1),b
               2  1  r=(r),b    0 2 (r)=r,b   r0+1    r1+1
               t-1
         until'z
      then'    {drop}    ret'
#then
  \ -------------------------------------------------------------------------------
  (  C828  F6 C7             )
  (  C82A  04 46 49 4C 4C    )    t:  FILL      push.LR   cfa= C830
  (  C830  B0 12 A0 C1       )                  {swap}  
  (  C834  B0 12 64 C1       )                  {>r} 
  (  C838  B0 12 A0 C1       )                  {swap}
  (  C83C  B0 12 06 C1 4C C8 )        ahead# \  BRANCH:     C84C
  (  C842  B0 12 00 C3       )        here' >1  2DUP
  (  C846  B0 12 24 C1       )                  {c!}  
  (  C84A  14 53             )                              T  R+1
  (  C84C  B0 12 D6 C0 42 C8 )        then#     nex.  1> n=0?   \        C842
  (  C852  B0 12 EE C2       )                  {2drop}    
  (  C856  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C858  2A C8             )
  (  C85A  05 44 49 47 49    )    t:  DIGIT     push.LR   cfa= C860
  (  C860  B0 12 A6 C0 09 00 )                  DOLIT:      0009
  (  C866  B0 12 B2 C1       )                  {over}     
  (  C86A  B0 12 D6 C3       )                  <
  (  C86E  B0 12 A6 C0 07 00 )                  DOLIT:      0007
  (  C874  B0 12 D4 C1       )                  {and}  
  (  C878  B0 12 0E C3       )                  {+}  
  (  C87C  34 50 30 00       )                       T     30  R+#
  (  C880  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C882  5A C8             )
  (  C884  07 45 58 54 52    )    t:  EXTRACT   push.LR   cfa= C88C
  (  C88C  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  C892  B0 12 A0 C1       )                  {swap}  
  (  C896  B0 12 6A C4       )                  UM/MOD
  (  C89A  B0 12 A0 C1       )                  {swap}  
  (  C89E  B0 12 60 C8       )                  DIGIT
  (  C8A2  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C8A4  84 C8             )
  (  C8A6  02 3C 23          )    t:  <#        push.LR   cfa= C8AA
  (  C8AA  B0 12 B8 C7       )                  PAD
  (  C8AE  B0 12 52 C2       )                  HLD
  (  C8B2  B0 12 0E C1       )                  {!}  
  (  C8B6  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C8B8  A6 C8             )
  (  C8BA  04 48 4F 4C 44    )    t:  HOLD      push.LR   cfa= C8C0
  (  C8C0  B0 12 52 C2       )                  HLD
  (  C8C4  B0 12 1A C1       )                  {@}
  (  C8C8  14 83             )                              T  R-1
  (  C8CA  B0 12 90 C1       )                  {dup} 
  (  C8CE  B0 12 52 C2       )                  HLD
  (  C8D2  B0 12 0E C1       )                  {!}  
  (  C8D6  B0 12 24 C1       )                  {c!}
  (  C8DA  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C8DC  BA C8             )
  (  C8DE  01 23             )    t:  #         push.LR   cfa= C8E0
  (  C8E0  B0 12 08 C2       )                  BASE
  (  C8E4  B0 12 1A C1       )                  {@}
  (  C8E8  B0 12 8C C8       )                  EXTRACT
  (  C8EC  B0 12 C0 C8       )                  HOLD
  (  C8F0  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C8F2  DE C8             )
  (  C8F4  02 23 53          )    t:  #S        push.LR   cfa= C8F8
  (  C8F8  B0 12 E0 C8       )        begin#    #
  (  C8FC  B0 12 90 C1       )                  {dup} 
  (  C900  B0 12 F0 C0 0C C9 )        while#  \ C90C
  (  C906  B0 12 06 C1 F8 C8 )        repeat# \ BRANCH:     C8F8
  (  C90C  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C90E  F4 C8             )
  (  C910  04 53 49 47 4E    )    t:  SIGN      push.LR   cfa= C916
  (  C916  B0 12 C4 C1       )                  0<
  (  C91A  B0 12 F0 C0 2A C9 )        if#   \   C92A
  (  C920  B0 12 A6 C0 2D 00 )                  DOLIT:      002D    \  '-'
  (  C926  B0 12 C0 C8       )                  HOLD
  (  C92A  30 41             )        then#                    ret
  \ -------------------------------------------------------------------------------
  (  C92C  10 C9             )
  (  C92E  02 23 3E          )    t:  #>        push.LR   cfa= C932
  (  C932  B0 12 86 C1       )                  {drop} 
  (  C936  B0 12 52 C2       )                  HLD
  (  C93A  B0 12 1A C1       )                  {@}
  (  C93E  B0 12 B8 C7       )                  PAD
  (  C942  B0 12 B2 C1       )                  {over}     
  (  C946  B0 12 84 C3       )                  -
  (  C94A  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C94C  2E C9             )
  (  C94E  03 73 74 72       )    t:  str       push.LR   cfa= C952
  (  C952  B0 12 90 C1       )                  {dup} 
  (  C956  B0 12 64 C1       )                  {>r} 
  (  C95A  B0 12 92 C3       )                  ABS
  (  C95E  B0 12 AA C8       )                  <#
  (  C962  B0 12 F8 C8       )                  #S
  (  C966  B0 12 3E C1       )                  {r>} 
  (  C96A  B0 12 16 C9       )                  SIGN
  (  C96E  B0 12 32 C9       )                  #>
  (  C972  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C974  4E C9             )
  (  C976  03 48 45 58       )    t:  HEX       push.LR   cfa= C97A
  (  C97A  B0 12 A6 C0 10 00 )                  DOLIT:      0010
  (  C980  B0 12 08 C2       )                  BASE
  (  C984  B0 12 0E C1       )                  {!}  
  (  C988  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C98A  76 C9             )
  (  C98C  07 44 45 43 49    )    t:  DECIMAL   push.LR   cfa= C994
  (  C994  B0 12 A6 C0 0A 00 )                  DOLIT:      000A
  (  C99A  B0 12 08 C2       )                  BASE
  (  C99E  B0 12 0E C1       )                  {!}  
  (  C9A2  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C9A4  8C C9             )
  (  C9A6  06 44 49 47 49    )    t:  DIGIT?    push.LR   cfa= C9AE
  (  C9AE  B0 12 64 C1       )                  {>r}    _ upc
  (  C9B2  34 80 30 00       )                       T     30  R-#
  (  C9B6  B0 12 A6 C0 09 00 )                  DOLIT:      0009
  (  C9BC  B0 12 B2 C1       )                  {over}     
  (  C9C0  B0 12 D6 C3       )                  <
  (  C9C4  B0 12 F0 C0 E0 C9 )        if#   \     C9E0
  (  C9CA  34 80 07 00       )                       T      7  R-#
  (  C9CE  B0 12 90 C1       )                  {dup} 
  (  C9D2  B0 12 A6 C0 0A 00 )                  DOLIT:      000A
  (  C9D8  B0 12 D6 C3       )                  <
  (  C9DC  B0 12 DE C1       )                  {or}   
  (  C9E0  B0 12 90 C1       )        then#     {dup} 
  (  C9E4  B0 12 3E C1       )                  {r>} 
  (  C9E8  B0 12 CA C3       )                  U<
  (  C9EC  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  C9EE  A6 C9             )
  (  C9F0  07 4E 55 4D 42    )    t:  NUMBER?   push.LR   cfa= C9F8
  (  C9F8  B0 12 08 C2       )                  BASE
  (  C9FC  B0 12 1A C1       )                  {@}
  (  CA00  B0 12 64 C1       )                  {>r} 
  (  CA04  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  CA0A  B0 12 B2 C1       )                  {over}     
  (  CA0E  B0 12 94 C7       )                  COUNT
  (  CA12  B0 12 B2 C1       )                  {over}     
  (  CA16  B0 12 34 C1       )                  {c@}  
  (  CA1A  B0 12 A6 C0 24 00 )                  DOLIT:      0024    \ $
  (  CA20  B0 12 AA C3       )                  =
  (  CA24  B0 12 F0 C0 3A CA )        if#   \   CA3A
  (  CA2A  B0 12 7A C9       )                  HEX
  (  CA2E  B0 12 A0 C1       )                  {swap}  
  (  CA32  14 53             )                              T  R+1
  (  CA34  B0 12 A0 C1       )                  {swap}  
  (  CA38  14 83             )                              T  R-1
  (  CA3A  B0 12 B2 C1       )        then#     {over}     
  (  CA3E  B0 12 34 C1       )                  {c@}  
  (  CA42  B0 12 A6 C0 2D 00 )                  DOLIT:      002D    \ -
  (  CA48  B0 12 AA C3       )                  =
  (  CA4C  B0 12 64 C1       )                  {>r} 
  (  CA50  B0 12 A0 C1       )                  {swap}  
  (  CA54  B0 12 50 C1       )                  {r@}  
  (  CA58  B0 12 84 C3       )                  -
  (  CA5C  B0 12 A0 C1       )                  {swap}  
  (  CA60  B0 12 50 C1       )                  {r@}  
  (  CA64  B0 12 0E C3       )                  {+}
  (  CA68  B0 12 C8 C2       )                  ?DUP
  (  CA6C  B0 12 F0 C0 F0 CA )        if#   \   CAF0
  (  CA72  14 83             )                              T  R-1
  (  CA74  B0 12 64 C1       )                  {>r} 
  (  CA78  B0 12 90 C1       )     here' >1    ( for: ) {dup} 
  (  CA7C  B0 12 64 C1       )                  {>r} 
  (  CA80  B0 12 34 C1       )                  {c@}  
  (  CA84  B0 12 08 C2       )                  BASE
  (  CA88  B0 12 1A C1       )                  {@}
  (  CA8C  B0 12 AE C9       )                  DIGIT?
  (  CA90  B0 12 F0 C0 D6 CA )          if#   \ CAD6
  (  CA96  B0 12 A0 C1       )                  {swap}  
  (  CA9A  B0 12 08 C2       )                  BASE
  (  CA9E  B0 12 1A C1       )                  {@}
  (  CAA2  B0 12 1E C6       )                  *
  (  CAA6  B0 12 0E C3       )                  {+}  
  (  CAAA  B0 12 3E C1       )                  {r>} 
  (  CAAE  14 53             )                              T  R+1
  (  CAB0  B0 12 D6 C0 78 CA )      nex.   1> n=0?  \  ( next:)  next  \        CA78
  (  CAB6  B0 12 50 C1       )                  {r@}  
  (  CABA  B0 12 A0 C1       )                  {swap}  
  (  CABE  B0 12 86 C1       )                  {drop} 
  (  CAC2  B0 12 F0 C0 CC CA )            if#   \ CACC
  (  CAC8  B0 12 50 C3       )                  {negate}   
  (  CACC  B0 12 A0 C1       )            then#   {swap}  
  (  CAD0  B0 12 06 C1 EC CA )          else# \ BRANCH:     CAEC
  (  CAD6  B0 12 3E C1       )                  {r>} 
  (  CADA  B0 12 3E C1       )                  {r>} 
  (  CADE  B0 12 EE C2       )                  {2drop}    
  (  CAE2  B0 12 EE C2       )                  {2drop}    
  (  CAE6  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  CAEC  B0 12 90 C1       )          then#   {dup} 
  (  CAF0  B0 12 3E C1       )        then#     {r>} 
  (  CAF4  B0 12 EE C2       )                  {2drop}    
  (  CAF8  B0 12 3E C1       )                  {r>} 
  (  CAFC  B0 12 08 C2       )                  BASE
  (  CB00  B0 12 0E C1       )                  {!}  
  (  CB04  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CB06  F0 C9             )
  (  CB08  05 53 50 41 43    )    t:  SPACE     push.LR   cfa= CB0E
  (  CB0E  B0 12 C4 C6       )                  BL
  (  CB12  B0 12 4C C0       )                  EMIT
  (  CB16  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CB18  08 CB             )
  (  CB1A  06 53 50 41 43    )    t:  SPACES    push.LR   cfa= CB22
  (  CB22  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  CB28  B0 12 02 C4       )                  MAX
  (  CB2C  B0 12 64 C1       )                  {>r} 
  (  CB30  B0 12 06 C1 3A CB )        ahead# \  BRANCH:     CB3A
                                      here' >1
  (  CB36  B0 12 0E CB       )                  SPACE
  (  CB3A  B0 12 D6 C0 36 CB )        then#     nex.  1>  n=0?  \        CB36
  (  CB40  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CB42  1A CB             )
  (  CB44  04 54 59 50 45    )    t:  TYPE      push.LR   cfa= CB4A
  (  CB4A  B0 12 64 C1       )                  {>r} 
  (  CB4E  B0 12 06 C1 66 CB )        ahead# \  BRANCH:     CB66
  (  CB54  B0 12 90 C1       )        here' >1  {dup} 
  (  CB58  B0 12 34 C1       )                  {c@}  
  (  CB5C  B0 12 D8 C6       )                  >CHAR
  (  CB60  B0 12 4C C0       )                  EMIT
  (  CB64  14 53             )                              T  R+1
  (  CB66  B0 12 D6 C0 54 CB )        then#     nex.   1>  n=0?  \        CB54
  (  CB6C  B0 12 86 C1       )                  {drop} 
  (  CB70  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CB72  44 CB             )
  (  CB74  02 43 52          )    t:  CR        push.LR   cfa= CB78
  (  CB78  B0 12 A6 C0 0D 00 )                  DOLIT:      000D
  (  CB7e  B0 12 4C C0       )                  EMIT
  (  CB82  B0 12 A6 C0 0A 00 )                  DOLIT:      000A
  (  CB88  B0 12 4C C0       )                  EMIT
  (  CB8C  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
:.  t=r-#       t  -rot.  r=r-#      ;.
:.  R=(T+#),b   t  swap.  r=(r+#),b  ;.

\ :.  r=(T)b    t swap.  r-(r),b  ;.
  :.  (rp)=r    rp  swap.  (r)=r  ;.

                                   t:  do$                                                   cfa= 5544
  (  00005544  04 3F 3E 60       )                  {dup}
  (  00005548  00 98             )                  R0=(rp)
  (  0000554A  46 1E             )                  T=R0-1
  (  0000554C  31 78             )         7831 16,'      \  R1=(T)b
  (  0000554E  09 18             )                  R1+R0
  (  00005550  03 20             )                  R0=3
  (  00005552  09 18             )                  R1+R0
  (  00005554  81 43             )                  R1nR0/
  (  00005556  49 1C             )                  r1+1      \  R1=R1+1,s
  (  00005558  00 91             )                  (rp)=R1
  (  0000555A  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  CBBA  90 CB             )
  (  CBBC  43 24 22 7C       )    t:  $"|       push.LR   cfa= CBC0
  (  CBC0  B0 12 94 CB       )                  DO$
  (  CBC4  30 41             )                                 ret compile-only'     '' $"|  cfa'.of.$"|   !.
  \ -------------------------------------------------------------------------------
  (  CBC6  BC CB             )
  (  CBC8  43 2E 22 7C       )    t:  ."|       push.LR   cfa= CBCC
  (  CBCC  B0 12 94 CB       )                  DO$
  (  CBD0  B0 12 94 C7       )                  COUNT
  (  CBD4  B0 12 4A CB       )                  TYPE
  (  CBD8  30 41             )                                 ret compile-only'     '' ."|   cfa'.of.."|  !.
  \ -------------------------------------------------------------------------------
  (  D632  D2 D5             )
  (  D634  02 2E 53          )    t:  .S        push.LR   cfa= D638
  (  D638  B0 12 78 CB       )                  CR
  (  D63C  B0 12 06 C7       )                  DEPTH
  (  D640  B0 12 64 C1       )                  {>r} 
  (  D644  06 3C             )      ahead'.  \          .s1            -;
  (  D646  B0 12 50 C1       )         here'         {r@}  
  (  D64A  B0 12 22 C7       )                  PICK
  (  D64E  B0 12 4A CC       )                _ .
                                    then'.
\                                 t:  .s1
  (  D652  B0 12 D6 C0 46 D6 )         nex. n=0?   \        D646
  (  D658  B0 12 CC CB       )                 ."|:  <sp"
  (  D662  30 41             )                 ret

  t:  tp  ( n -- )  push.LR  {dup}  't'  t=#  emit  {dup} 'p' t=#  emit  _ .n   {dup} ':' t=#  emit  space  .s  ret
  \ -------------------------------------------------------------------------------
  (  CBDA  C8 CB             )
  (  CBDC  02 2E 52          )    t:  .R        push.LR   cfa= CBE0
  (  CBE0  B0 12 64 C1       )                  {>r} 
  (  CBE4  B0 12 52 C9       )                  STR
  (  CBE8  B0 12 3E C1       )                  {r>} 
  (  CBEC  B0 12 B2 C1       )                  {over}     
  (  CBF0  B0 12 84 C3       )                  -
  (  CBF4  B0 12 22 CB       )                  SPACES
  (  CBF8  B0 12 4A CB       )                  TYPE
  (  CBFC  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CBFE  DC CB             )
  (  CC00  03 55 2E 52       )    t:  U.R       push.LR   cfa= CC04
  (  CC04  B0 12 64 C1       )                  {>r} 
  (  CC08  B0 12 AA C8       )                  <#
  (  CC0C  B0 12 F8 C8       )                  #S
  (  CC10  B0 12 32 C9       )                  #>
  (  CC14  B0 12 3E C1       )                  {r>} 
  (  CC18  B0 12 B2 C1       )                  {over}     
  (  CC1C  B0 12 84 C3       )                  -
  (  CC20  B0 12 22 CB       )                  SPACES
  (  CC24  B0 12 4A CB       )                  TYPE
  (  CC28  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CC2A  00 CC             )
  (  CC2C  02 55 2E          )    t:  U.        push.LR   cfa= CC30
  (  CC30  B0 12 AA C8       )                  <#
  (  CC34  B0 12 F8 C8       )                  #S
  (  CC38  B0 12 32 C9       )                  #>
  (  CC3C  B0 12 0E CB       )                  SPACE
  (  CC40  B0 12 4A CB       )                  TYPE
  (  CC44  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CC46  2C CC             )
  (  CC48  01 2E             )    t:  .         push.LR   cfa= CC4A
  (  CC4A  B0 12 08 C2       )                  BASE
  (  CC4E  B0 12 1A C1       )                  {@}
  (  CC52  B0 12 A6 C0 0A 00 )                  DOLIT:      000A
  (  CC58  B0 12 E8 C1       )                  {xor}   
  (  CC5C  B0 12 F0 C0 64 CC )        if#   \   CC64
  (  CC62  E6 3F             )                  U.             -;
  (  CC64  B0 12 52 C9       )        then#     STR
  (  CC68  B0 12 0E CB       )                  SPACE
  (  CC6C  6E 3F             )                  TYPE           -;
  \ -------------------------------------------------------------------------------
  (  CC6E  48 CC             )
  (  CC70  01 3F             )    t:  ?         push.LR   cfa= CC72
  (  CC72  B0 12 1A C1       )                  {@}
  (  CC76  B0 12 4A CC       )                  .
  (  CC7A  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CC7C  70 CC             )
  (  CC7E  05 70 61 72 73    )    t:  pars.     push.LR   cfa= CC84
  (  CC84  B0 12 1A C2       )                  TMP
  (  CC88  B0 12 0E C1       )                  {!}  
  (  CC8C  B0 12 B2 C1       )                  {over}     
  (  CC90  B0 12 64 C1       )                  {>r} 
  (  CC94  B0 12 90 C1       )                  {dup} 
  (  CC98  B0 12 F0 C0 76 CD )    if# \  CD76
  (  CC9E  14 83             )                              T  R-1
  (  CCA0  B0 12 1A C2       )                  TMP
  (  CCA4  B0 12 1A C1       )                  {@}
  (  CCA8  B0 12 C4 C6       )                  BL
  (  CCAC  B0 12 AA C3       )                  =
  (  CCB0  B0 12 F0 C0 F8 CC )        if#   \   CCF8
  (  CCB6  B0 12 64 C1       )               \   {>r} 
  (  CCBA  B0 12 C4 C6       )          for >1    BL
  (  CCBE  B0 12 B2 C1       )                  {over}     
  (  CCC2  B0 12 34 C1       )                  {c@}  
  (  CCC6  B0 12 84 C3       )                  -
  (  CCCA  B0 12 C4 C1       )                  0<
  (  CCCE  B0 12 38 C3       )                  NOT
  (  CCD2  B0 12 F0 C0 F4 CC )           if#  \ CCF4
  (  CCD8  14 53             )                              T  R+1
  (  CCDA  B0 12 D6 C0 BA CC )                  nex.  1> n=0?  \        CCBA
  (  CCE0  B0 12 3E C1       )                  {r>} 
  (  CCE4  B0 12 86 C1       )                  {drop} 
  (  CCE8  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  CCEE  B0 12 90 C1       )                  {dup} 
  (  CCF2  30 41             )                                 ret
  (  CCF4  B0 12 3E C1       )           then#  {r>} 
  (  CCF8  B0 12 B2 C1       )        then#     {over}     
  (  CCFC  B0 12 A0 C1       )                  {swap}  
  (  CD00  B0 12 64 C1       )               \  {>r} 
  (  CD04  B0 12 1A C2       )         for >1   TMP
  (  CD08  B0 12 1A C1       )                  {@}
  (  CD0C  B0 12 B2 C1       )                  {over}     
  (  CD10  B0 12 34 C1       )                  {c@}  
  (  CD14  B0 12 84 C3       )                  -
  (  CD18  B0 12 1A C2       )                  TMP
  (  CD1C  B0 12 1A C1       )                  {@}
  (  CD20  B0 12 C4 C6       )                  BL
  (  CD24  B0 12 AA C3       )                  =
  (  CD28  B0 12 F0 C0 32 CD )        if#   \   CD32
  (  CD2E  B0 12 C4 C1       )                  0<
                                      then#
  (  CD32  B0 12 F0 C0 4E CD )        if#   \  CD4E
  (  CD38  14 53             )                              T  R+1
  (  CD3A  B0 12 D6 C0 04 CD )                  nex.  1> n=0?  \        CD04
  (  CD40  B0 12 90 C1       )                  {dup} 
  (  CD44  B0 12 64 C1       )                  {>r} 
  (  CD48  B0 12 06 C1 60 CD )        else# \   BRANCH:     CD60
  (  CD4E  B0 12 3E C1       )                  {r>} 
  (  CD52  B0 12 86 C1       )                  {drop} 
  (  CD56  B0 12 90 C1       )                  {dup} 
  (  CD5A  14 53             )                              T  R+1
  (  CD5C  B0 12 64 C1       )                  {>r} 
  (  CD60  B0 12 B2 C1       )        then#     {over}     
  (  CD64  B0 12 84 C3       )                  -
  (  CD68  B0 12 3E C1       )                  {r>} 
  (  CD6C  B0 12 3E C1       )                  {r>} 
  (  CD70  B0 12 84 C3       )                  -
  (  CD74  30 41             )                                 ret
                                  then#
  (  CD76  B0 12 B2 C1       )                  {over}     
  (  CD7A  B0 12 3E C1       )                  {r>} 
  (  CD7E  B0 12 84 C3       )                  -
  (  CD82  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CD84  7E CC             )
  (  CD86  05 50 41 52 53    )    t:  PARSE     push.LR   cfa= CD8C
  (  CD8C  B0 12 64 C1       )                  {>r} 
  (  CD90  B0 12 C8 C7       )                  TIB
  (  CD94  B0 12 40 C2       )                  >IN
  (  CD98  B0 12 1A C1       )                  {@}
  (  CD9C  B0 12 0E C3       )                  {+}  
  (  CDA0  B0 12 2E C2       )                  #TIB
  (  CDA4  B0 12 1A C1       )                  {@}
  (  CDA8  B0 12 40 C2       )                  >IN
  (  CDAC  B0 12 1A C1       )                  {@}
  (  CDB0  B0 12 84 C3       )                  -
  (  CDB4  B0 12 3E C1       )                  {r>} 
  (  CDB8  B0 12 84 CC       )                  pars.
  (  CDBC  B0 12 40 C2       )                  >IN
  (  CDC0  B0 12 3A C7       )                  +!
  (  CDC4  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CDC6  86 CD             )
  (  CDC8  82 2E 28          )    t:  .(        push.LR   cfa= CDCC
  (  CDCC  B0 12 A6 C0 29 00 )                  DOLIT:      0029
  (  CDD2  B0 12 8C CD       )                  PARSE
  (  CDD6  B0 12 4A CB       )                  TYPE
  (  CDDA  30 41             )                                 ret             immediate'
  \ -------------------------------------------------------------------------------
 

  (  CDDC  C8 CD             )
  (  CDDE  81 28             )    t:  (         push.LR   cfa= CDE0      \  (
                                                DOLIT:      0029
                                                PARSE
                                                {2drop}
                                                ret             immediate'


\ :.  (    (.  ;.   immediate.     \ ????????

:.  (     MULTI-LINE?
                IF.      ')'  _COMMENT
                ELSE.    ')'  PARSE.   2DROP.
                THEN.    ;.   IMMEDIATE.
  \ -------------------------------------------------------------------------------
  (  CDF0  DE CD             )
  (  CDF2  81 5C             )    t:  ~   ( **** )    push.LR   cfa= CDF4      \  \
  (  CDF4  B0 12 2E C2       )                  #TIB
  (  CDF8  B0 12 1A C1       )                  {@}
  (  CDFC  B0 12 40 C2       )                  >IN
  (  CE00  B0 12 0E C1       )                  {!}  
  (  CE04  30 41             )                                 ret             immediate'
  \ -------------------------------------------------------------------------------
  (  CE06  F2 CD             )
  (  CE08  04 43 48 41 52    )    t:  CHAR      push.LR   cfa= CE0E
  (  CE0E  B0 12 C4 C6       )                  BL
  (  CE12  B0 12 8C CD       )                  PARSE
  (  CE16  B0 12 86 C1       )                  {drop} 
  (  CE1A  B0 12 34 C1       )                  {c@}  
  (  CE1E  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CE3A  B0 12 A8 C7       )    t:  token1    push.LR
                                                HERE        \ a len here
  (  CE3E  B0 12 00 C3       )                  2DUP
  (  CE42  B0 12 24 C1       )                  {c!}  
  (  CE46  14 53             )                  T  R+1      \ a len here+1
  (  CE48  B0 12 A0 C1       )                  {swap}          \ a here+1 len
  (  CE4C  B0 12 FC C7       )                  CMOVE       \ --
  (  CE50  30 40 A8 C7       )                  HERE  -;    \ here
  \ -------------------------------------------------------------------------------
  (  CE20  08 CE             )
  (  CE22  05 54 4F 4B 45    )    t:  TOKEN     push.LR   cfa= CE28
  (  CE28  B0 12 C4 C6       )                  BL
  (  CE2C  B0 12 8C CD       )                  PARSE       \ a len       \  _ tp1
  (  CE30  B0 12 A6 C0 1F 00 )                  DOLIT:      001F
  (  CE36  B0 12 20 C4       )                  MIN         \ a len
                                                token1   -;

\ (  CE3A  B0 12 A8 C7       )    t:  token1    HERE        \ a len here
\ (  CE3E  B0 12 00 C3       )                  2DUP
\ (  CE42  B0 12 24 C1       )                  {c!}  
\ (  CE46  14 53             )                  T  R+1      \ a len here+1
\ (  CE48  B0 12 A0 C1       )                  {swap}          \ a here+1 len
\ (  CE4C  B0 12 FC C7       )                  CMOVE       \ --
\ (  CE50  30 40 A8 C7       )                  HERE  -;    \ here
  \ -------------------------------------------------------------------------------
  (  CE54  22 CE             )
  (  CE56  04 57 4F 52 44    )    t:  WORD      push.LR   cfa= CE5C
  (  CE5C  B0 12 8C CD       )                  PARSE
  (  CE60  EC 3F             )                  token1         -;
  \ -------------------------------------------------------------------------------
                                  t:  NAME>     push.LR    8 ...  -   {@}  -;        \ nfa -- cfa
  \ -------------------------------------------------------------------------------
      t:  between     push.LR     {1+}  within  -;
  \ -------------------------------------------------------------------------------
  \   t:  upc  ( char -- char )  push.LR  {dup} 61 ... 7b ... within  t r:0 {drop} if'z=0 0df ... {and}   ret  then'  ;
  \ -------------------------------------------------------------------------------
      t:  upc  ( c -- c' )     t 61 r:# if'n=0    t 7b r:# if'n=1   t 0df Rn#  then'  then'   ret'  \ 60 --> 61
  \ -------------------------------------------------------------------------------
  (  CE7A  64 CE             )
  (  CE7C  05 53 41 4D 45    )    t:  SAME?                                       push.LR   cfa= CE82
  (  CE82  B0 12 B2 C1       )                  {over}     
  (  CE86  B0 12 34 C1       )                  {c@}
  (  CE8A  16 45 02 00       )        begin'    Y    sp     4 ( 2 ) R=(R+#)
  (  CE8E  06 54             )                       Y      T  R+R
  (  CE90  66 46             )                       Y      Y  R=(R)b    y 61 r:# if'n=0    y 7b r:# if'n=1   y 0df Rn#  then'  then'  \ Y 0df  Rn#  \ b=1
  (  CE92  27 45             )                       0      sp R=(R)
  (  CE94  07 54             )                       0      T  R+R
  (  CE96  67 47             )                       0      0  R=(R)b    0 61 r:# if'n=0    0 7b r:# if'n=1   0 0df Rn#  then'  then'  \ R0n0DF   \ b=1
  (  CE98  06 87             )                       Y      0  R-R
  (  CE9A  03 20             )        if'z=1.            \     CEA2  z=0?''
  (  CE9C  14 83             )                              T  R-1
  (  CE9E  F5 23             )        until'z=1          \     CE8A  z=0?''
  (  CEA0  30 41             )                                 ret
  (  CEA2  34 43             )        then'.                   T=0/
  (  CEA4  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CEA6  7C CE             )
  (  CEA8  05 4E 41 4D 45    )    t:  NAME?   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )    push.LR   cfa= CEAE
  (  CEAE  B0 12 7C C2       )                  CONTEXT
  (  CEB2  B0 12 1A C1       )                  {@}        (  _ TP3 )
                                begin'.
  (  CEB6  04 93             )    t:  name?1    T  R:0
  (  CEB8  20 24             )        if'z=0  \ CEFA  z=1?''
  (  CEBA  B0 12 B2 C1       )                  {over}     
  (  CEBE  B0 12 1A C1       )                  {@}       DOLIT:      7F1F    {and}            \ the next byte can    be 00~FF
  (  CEC2  B0 12 B2 C1       )                  {over}        \ ^^^^^^^^^^^^^^^^^^^^^^^ without it, the next byte should be 00~FF
  (  CEC6  B0 12 1A C1       )                  {@}
  (  CECA  B0 12 A6 C0 1F 7F )                  DOLIT:      7F1F    \ mainly to test length, the next byte can    be 00~FF
  (  CED0  B0 12 D4 C1       )                  {and}  
  (  CED4  B0 12 AA C3       )                  =
  (  CED8  B0 12 F0 C0 E8 CE )        if#   \     CEE8
  (  CEDE  B0 12 82 CE       )                  SAME?
  (  CEE2  B0 12 F0 C0 EE CE )     if#    \     CEEE
  (  CEE8  24 83             )  swap. then#                 T  4 r-#    \ lfa
  (  CEEA  24 44             )                       T      T  R=(R)    \ next.nfa
  (  CEEC  E4 3F             )  again'.      \  name?1  -;
  (  CEEE  85 44 00 00       )     then#        sp     T  (R)=R
  (  CEF2  B0 12 6A CE       )         (  _ TP4 )      NAME>
  (  CEF6  30 40 A0 C1       )                  {swap}  
  (  CEFA  30 41             )        then'              ret

  \ -------------------------------------------------------------------------------
  (  CEA6  7C CE             )
  (  CEA8  05 4E 41 4D 45    )    t:  NAME?   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )    push.LR   cfa= CEAE
  (  CEAE  B0 12 7C C2       )                  CONTEXT   \  _ TP1
  (  CEB2  B0 12 1A C1       )                  {@}        \  _ TP2
                                begin'.
  (  CEB6  04 93             )    t:  name?1    T  R:0
  (  CEB8  20 24             )        if'z=0  \ CEFA  z=1?''
                                                          \  _ TP3
  (  CEBA  B0 12 B2 C1       )                  {over}     
  (  CEBE  B0 12 1A C1       )                  {c@}         DOLIT:     1F ( 7F1F )   {and}            \ the next byte can    be 00~FF
  (  CEC2  B0 12 B2 C1       )                  {over}        \ ^^^^^^^^^^^^^^^^^^^^^^^ without it, the next byte should be 00~FF
  (  CEC6  B0 12 1A C1       )                  {c@}
  (  CECA  B0 12 A6 C0 1F 7F )                  DOLIT:   1F \   7F1F    \ mainly to test length, the next byte can    be 00~FF
  (  CED0  B0 12 D4 C1       )                  {and}  
  (  CED4  B0 12 AA C3       )                  =
  (  CED8  B0 12 F0 C0 E8 CE )        if#   \     CEE8
  (  CEDE  B0 12 82 CE       )           (  _ TP4 )    SAME?  \ _ TP5
  (  CEE2  B0 12 F0 C0 EE CE )     if#    \     CEEE
  (  CEE8  24 83             )  swap. then#                 T  4 r-#    \ lfa
  (  CEEA  24 44             )                       T      T  R=(R)    \ next.nfa
  (  CEEC  E4 3F             )  again'.      \  name?1  -;
  (  CEEE  85 44 00 00       )     then#        sp     T  (R)=R
  (  CEF2  B0 12 6A CE       )         (  _ TP6 )      NAME>   \ _ TP7
  (  CEF6  30 40 A0 C1       )                  {swap}  
  (  CEFA  30 41             )        then'      (   _ TP8  )   ret
  \ -------------------------------------------------------------------------------
  (  CEFC  A8 CE             )
  (  CEFE  02 5E 48          )    t:  ^H        push.LR   cfa= CF02
  (  CF02  B0 12 64 C1       )                  {>r} 
  (  CF06  B0 12 B2 C1       )                  {over}     
  (  CF0A  B0 12 3E C1       )                  {r>} 
  (  CF0E  B0 12 A0 C1       )                  {swap}  
  (  CF12  B0 12 B2 C1       )                  {over}     
  (  CF16  B0 12 E8 C1       )                  {xor}   
  (  CF1A  B0 12 F0 C0 3E CF )        if#   \     CF3E
  (  CF20  B0 12 A6 C0 08 00 )                  DOLIT:      0008
  (  CF26  B0 12 4C C0       )                  EMIT
  (  CF2A  14 83             )                              T  R-1
  (  CF2C  B0 12 C4 C6       )                  BL
  (  CF30  B0 12 4C C0       )                  EMIT
  (  CF34  B0 12 A6 C0 08 00 )                  DOLIT:      0008
  (  CF3A  B0 12 4C C0       )                  EMIT
  (  CF3E  30 41             )        then#                    ret
  \ -------------------------------------------------------------------------------
  (  CF40  FE CE             )
  (  CF42  03 54 41 50       )    t:  TAP       push.LR   cfa= CF46
  (  CF46  B0 12 90 C1       )                  {dup} 
  (  CF4A  B0 12 4C C0       )                  EMIT
  (  CF4E  B0 12 B2 C1       )                  {over}     
  (  CF52  B0 12 24 C1       )                  {c!}  
  (  CF56  14 53             )                              T  R+1
  (  CF58  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  CF5A  42 CF             )
  (  CF5C  04 6B 54 41 50    )    t:  kTAP      push.LR   cfa= CF62
  (  CF62  B0 12 90 C1       )                  {dup}
  (  CF66  34 80 0D 00       )                       T     0D  R-#
  (  CF6A  B0 12 F0 C0 80 CF )        if#   \     CF80
  (  CF70  34 82             )                            T 8  R-#
  (  CF72  B0 12 F0 C0 7E CF )          if#   \     CF7E
  (  CF78  B0 12 C4 C6       )                  BL
  (  CF7C  E4 3F             )                  TAP            -;
  (  CF7E  C1 3F             )          then#   ^H             -;
  (  CF80  B0 12 86 C1       )        then#     {drop} 
  (  CF84  B0 12 A0 C1       )                  {swap}  
  (  CF88  B0 12 86 C1       )                  {drop} 
  (  CF8C  30 40 90 C1       )                  {dup}  -;
  \ -------------------------------------------------------------------------------
  (  CF90  5C CF             )
  (  CF92  06 61 63 63 65    )    t:  accept    push.LR   cfa= CF9A
  (  CF9A  B0 12 B2 C1       )                  {over}     
  (  CF9E  B0 12 0E C3       )                  {+}  
  (  CFA2  B0 12 B2 C1       )                  {over}     
                                  t:  accept1
                                begin#
  (  CFA6  B0 12 00 C3       )        begin#    2DUP
  (  CFAA  B0 12 E8 C1       )                  {xor}   
  (  CFAE  B0 12 F0 C0 E4 CF )        if#  swap. \     CFE4
  (  CFB4  B0 12 32 C0       )                  KEY
  (  CFB8  B0 12 90 C1       )                  {dup} 
  (  CFBC  B0 12 C4 C6       )                  BL
  (  CFC0  B0 12 84 C3       )                  -
  (  CFC4  B0 12 A6 C0 5F 00 )                  DOLIT:      005F
  (  CFCA  B0 12 CA C3       )                  U<
  (  CFCE  B0 12 F0 C0 DE CF )          while#   \     CFDE
  (  CFD4  B0 12 46 CF       )                  TAP
  (  CFD8  B0 12 06 C1 A6 CF )          repeat# \  BRANCH:     CFA6
  (  CFDE  B0 12 62 CF       )                  KTAP
  (  CFE2  E1 3F             ) swap. again#  \       accept1        -;
  (  CFE4  B0 12 86 C1       )        then#     {drop} 
  (  CFE8  B0 12 B2 C1       )                  {over}     
  (  CFEC  30 40 84 C3       )                  -  -;
  \ -------------------------------------------------------------------------------
  (  CFF0  92 CF             )
  (  CFF2  05 51 55 45 52    )    t:  QUERY     push.LR   cfa= CFF8
  (  CFF8  B0 12 C8 C7       )                  TIB
  (  CFFC  B0 12 A6 C0 50 00 )                  DOLIT:      0050
  (  D002  B0 12 9A CF       )                  ACCEPT
  (  D006  B0 12 2E C2       )                  #TIB
  (  D00A  B0 12 0E C1       )                  {!}
  (  D00E  B0 12 86 C1       )                  {drop} 
  (  D012  B0 12 A6 C0 00 00 )                  DOLIT:      0000
  (  D018  B0 12 40 C2       )                  >IN
  (  D01C  B0 12 0E C1       )                  {!}  
  (  D020  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  D022  F2 CF             )
  (  D024  05 45 52 52 4F    )    t:  ERROR     push.LR   cfa= D02A
  (  D02A  B0 12 0E CB       )                  SPACE
  (  D02E  B0 12 94 C7       )                  COUNT
  (  D032  B0 12 4A CB       )                  TYPE
  (  D036  B0 12 A6 C0 3F 00 )                  DOLIT:      003F
  (  D03C  B0 12 4C C0       )                  EMIT
  (  D040  B0 12 78 CB       )                  CR
  (  D044  8D 3C             )               _  quit   \ 0  32,'  \  here'  jmp  \  _QUIT           -;
  \ -------------------------------------------------------------------------------
  (  D046  24 D0             )
  (  D048  46 61 62 6F 72    )    t:  abor."    push.LR   cfa= D050
  (  D050  B0 12 F0 C0 64 D0 )        if#   \   D064
  (  D056  B0 12 94 CB       )                  DO$
  (  D05A  B0 12 94 C7       )                  COUNT
  (  D05E  B0 12 4A CB       )                  TYPE
  (  D062  7E 3C             )                _ QUIT    -;
  (  D064  B0 12 94 CB       )        then#     DO$
  (  D068  B0 12 86 C1       )                  {drop} 
  (  D06C  30 41             )                                 ret   compile-only'   '' abor."  cfa'.of.abor."  !.
  \ -------------------------------------------------------------------------------
  (  D06E  48 D0             )
  (  D070  0A 24 49 4E 54    )    t:  $INTERP  ( $INTERPRET )   push.LR   cfa= D07C
  (  D07C  B0 12 AE CE       )                  NAME?     ( nfa.to.test -- cfa nfa / nfa.to.test 0 )
  (  D080  B0 12 C8 C2       )                  ?DUP
  (  D084  B0 12 F0 C0 B0 D0 )        if#   \   D0B0
  (  D08A  B0 12 1A C1       )                  {@}
  (  D08E  B0 12 A6 C0 40 00 )                  DOLIT:      0040
  (  D094  B0 12 D4 C1       )                  {and}
  (  D098  B0 12 50 D0       )                  ABOR.":  compile only"
  (  D0AA  B0 12 C8 C0       )                  EXECUTE
  (  D0AE  30 41             )                                 ret
  (  D0B0  B0 12 F8 C9       )        then#     NUMBER?
  (  D0B4  B0 12 F0 C0 BC D0 )        if#   \   D0BC
  (  D0BA  30 41             )                                 ret
  (  D0BC  B6 3F             )        then#     ERROR          -;      \  T:NFA.QUEUE.COUNTER  @.  last.nfa'(head).length @.   last' @.  .s.  drop. 2drop.  key.
  \ -------------------------------------------------------------------------------
  (  D0BE  70 D0             )
  (  D0C0  81 5B             )    t:  [         push.LR   cfa= D0C2
  (  D0C2  B0 12 A6 C0 7C D0 )              dolit   '' $interp  32,'   \  DOLIT:    \  '' $interpret   D07C
  (  D0C8  B0 12 66 C2       )                  'EVAL
  (  D0CC  B0 12 0E C1       )                  {!}  
  (  D0D0  30 41             )                  ret            immediate'
  \ -------------------------------------------------------------------------------
  (  D0D2  C0 D0             )
  (  D0D4  03 2E 4F 4B       )    t:  .OK       push.LR   cfa= D0D8
  (  D0D8  B0 12 A6 C0 7C D0 )              dolit '' $interp  32,'   \  DOLIT:    \  '' $interpret   D07C
  (  D0DE  B0 12 66 C2       )                  'EVAL
  (  D0E2  B0 12 1A C1       )                  {@}
  (  D0E6  B0 12 AA C3       )                  =
  (  D0EA  B0 12 F0 C0 F8 D0 )        if#   \     D0F8
  (  D0F0  B0 12 CC CB       )                  ."|:  Ok"
  (  D0F8  B0 12 78 CB       )        then#     CR                      \   T:NFA.QUEUE.COUNTER  @.  last.nfa'(head).length @.  last' @.  .s.  drop. 2drop.  key.
  (  D0FC  30 41             )                                 ret   \  cr.  last' @.  .s.  key.  drop.
  \ -------------------------------------------------------------------------------
  (  D0FE  D4 D0             )
  (  D100  06 3F 53 54 41    )    t:  ?STACK    push.LR   cfa= D108
  (  D108  B0 12 06 C7       )                  DEPTH
  (  D10C  B0 12 C4 C1       )                  0<
  (  D110  B0 12 50 D0       )                  ABOR.":  underflow"
  (  D120  30 41             )                                 ret   \   cr.  last' @.  .s.  key.  drop.
  \ -------------------------------------------------------------------------------
  (  D122  00 D1             )
  (  D124  04 45 56 41 4C    )    t:  EVAL      push.LR   cfa= D12A
  (  D12A  B0 12 28 CE       )        begin#    TOKEN
  (  D12E  B0 12 90 C1       )                  {dup} 
  (  D132  B0 12 34 C1       )                  {c@}  
  (  D136  B0 12 F0 C0 4E D1 )        while#   \     D14E
  (  D13C  B0 12 66 C2       )                  'EVAL
  (  D140  B0 12 E0 C7       )                  @EXECUTE
  (  D144  B0 12 08 D1       )                  ?STACK
  (  D148  B0 12 06 C1 2A D1 )        repeat# \ BRANCH:     D12A
  (  D14E  B0 12 86 C1       )                  {drop} 
  (  D152  B0 12 D8 D0       )                  .OK
  (  D156  30 41             )                  ret

  variable'  stack.display?
\ t:  ss    t:   show.stack    push.LR   stack.display?  {dup}  {@}  t:0   {drop}   if'<>  _ off   ret   then'  _ on   ret
  t:  sd    t:  stack.display  push.LR   stack.display?  _ on   ret
  t:  nd    t: normal.display  push.LR   stack.display?  _ off  ret
  t:  ss    t:   show.stack    push.LR   stack.display?  {dup}  {@}                 if#    _ off   ret   then#  _ on   ret
  \ -------------------------------------------------------------------------------
                                  t:  QUIT ( warm )     push.LR
  (  D168  B0 12 C2 D0       )                  [
  (  D16C  B0 12 F8 CF       )        begin'    QUERY
  (  D170  B0 12 2A D1       )                  EVAL   ( uart.switch )
                                                stack.display?  {@}  t:0  {drop}  if'<>   _ .s   then'
  (  D174  FB 3F             )        again'
  \ -------------------------------------------------------------------------------
  (  D176  5A D1             )
  (  D178  01 27             )    t:  '         push.LR   cfa= D17A
  (  D17A  B0 12 28 CE       )                  TOKEN
  (  D17E  B0 12 AE CE       )                  NAME?
  (  D182  B0 12 F0 C0 8A D1 )        if#
  (  D188  30 41             )                                 ret
  (  D18A  4F 3F             )        then#     ERROR          -;
  \ -------------------------------------------------------------------------------
  (  D18C  78 D1             )
  (  D18E  05 41 4C 4C 4F    )    t:  ALLOT     push.LR   cfa= D194
  (  D194  B0 12 A0 C2       )                  DP
  (  D198  30 40 3A C7       )                  +!  -;
  \ -------------------------------------------------------------------------------
  (  D19C  8E D1             )
  (  D19E  06 49 41 4C 4C    )    t:  IALLOT    push.LR   cfa= D1A6
  (  D1A6  B0 12 8E C2       )                  CP
  (  D1AA  30 40 3A C7       )                  +!  -;
  \ -------------------------------------------------------------------------------
  (  D1AE  9E D1             )
  (  D1B0  02 49 21          )    t:  I!        push.LR   cfa= D1B4
\ (  D1B4  B2 40 00 A5 2C 01 )                     12C   A500  2drop.  \ (#)=#
\ (  D1BA  B2 40 40 A5 28 01 )                     128   A540  2drop.  \ (#)=#
  (  D1C0  B0 12 0E C1       )                  {!}
\ (  D1C4  B2 40 00 A5 28 01 )                     128   A500  2drop.  \ (#)=#
\ (  D1CA  B2 40 10 A5 2C 01 )                     12C   A510  2drop.  \ (#)=#
  (  D1D0  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  D1D2  B0 D1             )
  (  D1D4  05 45 52 41 53    )    t:  ERASE  (.a.len.--.)   push.LR   cfa= D1DA
  (  D1DA  B2 40 00 A5 2C 01 )                  {dup}    t=0   fill    \   12C   A500  2drop.  \ (#)=#
\ (  D1E0  B2 40 02 A5 28 01 )                     128   A502  2drop.  \ (#)=#
\ (  D1E6  84 43 00 00       )                              T  (R)=0
\ (  D1EA  B2 40 10 A5 2C 01 )                     12C   A510  2drop.  \ (#)=#
\ (  D1F0  34 45             )                       {drop}  \  T      sp R=(R+)
  (  D1F2  30 41             )                                 ret
  \ -------------------------------------------------------------------------------
  (  D1F4  D4 D1             )
  (  D1F6  05 57 52 49 54    )    t:  WRITE     push.LR   cfa= D1FC
  (  D1FC  04 11             )                              T  rra.R
  (  D1FE  B0 12 64 C1       )             \    {>r} 
  (  D202  B0 12 B2 C1       )          for     {over}     
  (  D206  B0 12 1A C1       )                  {@}
  (  D20A  B0 12 B2 C1       )                  {over}     
  (  D20E  B0 12 B4 D1       )                  I!
  (  D212  24 53             )                              T  R+4
\ (  D214  A5 53 00 00       )                              sp (R)+2
  (  D218  B0 12 D6 C0 02 D2 )          next  \        D202
  (  D21E  30 40 EE C2       )                  {2drop}      -;
  \ -------------------------------------------------------------------------------   (  D222  F6 D1             )
  (  D224  01 2C             )    t:  8,        push.LR   cfa= D226
  (  D226  B0 12 8E C2       )                  CP
  (  D22A  B0 12 1A C1       )                  {@}
  (  D22E  B0 12 90 C1       )                  {dup} 
  (  D232  B0 12 92 C6       )                  1+
  (  D236  B0 12 8E C2       )                  CP
  (  D23A  B0 12 0E C1       )                  {c!}  
  (  D23E  BA 3F             )                  I!             -;
  \ -------------------------------------------------------------------------------
  (  D222  F6 D1             )
  (  D224  01 2C             )    t:  8,*       push.LR   cfa= D226
  (  D226  B0 12 8E C2       )                  hp 
  (  D22A  B0 12 1A C1       )                  {@}
  (  D22E  B0 12 90 C1       )                  {dup} 
  (  D232  B0 12 92 C6       )                  1+
  (  D236  B0 12 8E C2       )                  hp 
  (  D23A  B0 12 0E C1       )                  {c!}  
  (  D23E  BA 3F             )                  I!             -;
  \ -------------------------------------------------------------------------------
                                  t:  16,       push.LR    0 ...   100  ...  um/mod   {swap}    8,    8,    ret
  \ -------------------------------------------------------------------------------
                                  t:  16,*      push.LR    0 ...   100  ...  um/mod   {swap}    8,*   8,*   ret
  \ -------------------------------------------------------------------------------
  (  D222  F6 D1             )
  (  D224  01 2C             )    t:  ,         push.LR   cfa= D226
  (  D226  B0 12 8E C2       )                  CP
  (  D22A  B0 12 1A C1       )                  {@}
  (  D22E  B0 12 90 C1       )                  {dup} 
  (  D232  B0 12 92 C6       )                  CELL+
  (  D236  B0 12 8E C2       )                  CP
  (  D23A  B0 12 0E C1       )                  {!}  
  (  D23E  BA 3F             )                  I!             -;
  \ -------------------------------------------------------------------------------
  (  D222  F6 D1             )
  (  D224  01 2C             )    t:  ,*        push.LR   cfa= D226
  (  D226  B0 12 8E C2       )                  hp 
  (  D22A  B0 12 1A C1       )                  {@}
  (  D22E  B0 12 90 C1       )                  {dup} 
  (  D232  B0 12 92 C6       )                  CELL+
  (  D236  B0 12 8E C2       )                  hp 
  (  D23A  B0 12 0E C1       )                  {!}  
  (  D23E  BA 3F             )                  I!             -;
  \ ------------------------------------------------------------------------------- 
                                  t:   [push.LR]    push.LR   b500 ...  16,   ;
  \  R0=5678    R0t=1234    call_R0    full 32 bit range.
  \             123456     rcall_#24
  \       : call,   dolit  ,  execute  ;

\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  |1 1 1 1|0 i 1 0|1 1 0 0|==imm4=|0 =imm3|===Rd==|=====imm8======|    f2c00000
\  |1 1 1 1|0 i 1 0|1 1 0 0|==imm4=|0 =imm3|0000000|=====imm8======|    f2c00000
\  |1 1 1 1|0 # 1 0|1 1 0 0|# # # #|0 # # #|0000000|# # # # # # # #|    f2c00000    Rt=#
\  |1 1 1 1|0 # 1 0|0 1 0 0|# # # #|0 # # #|0000000|# # # # # # # #|    f2400000     R=#

\  (imm32, carry) = (ZeroExtend(imm4:i:imm3:imm8, 32), APSR.C);
\  original.mnemonic?  off   f2400000  5ci6c4#c3#4r8#:  R=#16


\  f2c00000  5ci6c4#c3#4r8#:  Rt=#
\   t:  #24>call  ( 24# -- )
\   t:  #32>call  ( 32# -- )   10000 ...  /mod   {swap}    R0=#      {swap}     R0t=#     ,call_R0   ;
\   t:  call,,  ( a -- )   cp  {@} witnin.24#?   if   #24>call   else   #32>call   then  ;
\   t:  call,,  ( a -- )   #32>call   ;
\ (  20000A0C  C5 F2 78 60       )                  R0t=5678
\ (  20000A10  41 F2 34 20       )                  R0=1234
\ (  20000A14  CC F6 EF 50       )                  R0t=CDEF
\ (  20000A18  48 F6 AB 10       )                  R0=89AB

   t:  #>(ZeroExtend(imm4:i:imm3:imm8)  ( # -- 32# )  push.LR   {>r} 
       {r@}        0ff ...  {and}                          \ imm8
       {r@}        700 ...  {and}    4 ...  lshift  {+}        \ imm3
       {r@}        800 ...  {and}   0f ...  lshift  {+}        \ i
       {r>}       f000 ...  {and}    4 ...  lshift  {+}     ;  \ imm4

   t:  H<->L   ( 12345678 -- 56781234 )  push.LR   0 ...  10000  ...   um/mod   {swap}    10000 ...  *   {+}     ;

   t:  R0=#   ( # -- )  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2400000 ...   {+}     H<->L  ,  ;
   t:  R0t=#  ( # -- )  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2C00000 ...   {+}     H<->L  ,  ;

  (  D240  24 D2             )
  (  D242  05 63 61 6C 6C    )    t:  call,     push.LR   cfa= D248
  (  D248  B0 12 A6 C0 B0 12 )                  DOLIT:      12B0
  (  D24E  B0 12 26 D2       )                  ,
  (  D252  E9 3F             )                  ,              -;

   t:  16,   push.LR  ,   -2 ...  IALLOT  ;
\  t:  call_32#.target  ( 32# -- )  push.LR          10000 ...    /mod   {swap}          R0=#   {swap}     R0t=#   4780 ...  16,  ( ,call_R0 )  ;
\  t:  call_32#.target  ( 32# -- )  push.LR  0 ...   10000 ...  um/mod   {swap}          R0=#
   t:  call_32#.target  ( 32# -- )  push.LR  0 ...   10000 ...  um/mod   {swap}     To1  R0=#   \ cortex M,  bit0=1
       if't=0    {drop}
       else'     R0t=#
       then'     4780 ...  16,  ( ,call_R0 )  ;
  \ -------------------------------------------------------------------------------
t: 24rel.check.cm4.target  ( # -- #' )   push.LR   cp @ ( HERE )   cell+  -  2/  ret

t: 24#>5..10#2.j.j11#.target   ( 24# --> 5.s10#2.j.j11# )   push.LR   {>r}
         {r@}   00800000 ...  {and}   ( s   )   3 ...   lshift                                             \  s
         {r@}   00800000 ...  {and}   ( s   )
if#      {r@}   00400000 ...  {and}   ( I1  )   if#  ( s=1 I1=1 )                       2000 ...  {+}    then# \  s=1  J1
         {r@}   00200000 ...  {and}   ( I2  )   if#  ( s=1 I2=1 )                        800 ...  {+}    then# \  s=1  J2
else#    {r@}   00400000 ...  {and}   ( I1  )   if#  ( s=0 I1=1 )  else#  ( s=0 I1=0 )  2000 ...  {+}    then# \  s=0  J1
         {r@}   00200000 ...  {and}   ( I2  )   if#  ( s=0 I2=1 )  else#  ( s=0 I2=0 )   800 ...  {+}    then# \  s=0  J2
then#    {r@}   001ff800 ...  {and}   ( 10# )   5 ...  lshift   {+}  
         {r>}   000007ff ...  {and}   ( 11# )                   {+}     ret

\  t:  lshift                                                  cfa= 47E8
\  (  000047E8  30 00             )                  r0=t
\  (  000047EA  40 CF             )                  {drop}
\  (  000047EC  86 40             )                  T<<R0,s
\  (  000047EE  70 47             )                  ret'

   t:  0~15<->16~31.target  ( n1 -- n2 )  r0=t  r0<<10    r6>>10   ToR0  ret'
\  t:  rcall_24#.target...  ( 24# -- )  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target        f000d000 ...   {+}  0~15<->16~31.target   ,  ;
   t:  rcall_24#.target     ( 24# -- )  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target  To1   f000d000 ...   {+}  0~15<->16~31.target   ,  ;
   t:  call,  ( a -- )  push.LR   {dup}  cp  {@} -  abs  ffffff ...  <  if#   rcall_24#.target   else#   call_32#.target    then#   ;

  (  D254  42 D2             )
  (  D256  89 5B 43 4F 4D    )    t:  [COMPILE] push.LR   cfa= D260
  (  D260  B0 12 7A D1       )                  '
  (  D264  F1 3F             )                  call,          -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D266  56 D2             )
  (  D268  47 43 4F 4D 50    )    t:  COMPILE   push.LR   cfa= D270
  (  D270  B0 12 3E C1       )                  {r>} 
  (  D274  B0 12 90 C1       )                  {dup} 
  (  D278  B0 12 1A C1       )                  {@}
  (  D27C  B0 12 26 D2       )                  ,
  (  D280  B0 12 92 C6       )                  CELL+
  (  D284  B0 12 90 C1       )                  {dup} 
  (  D288  B0 12 1A C1       )                  {@}
  (  D28C  B0 12 26 D2       )                  ,
  (  D290  B0 12 92 C6       )                  CELL+
  (  D294  B0 12 64 C1       )                  {>r} 
  (  D298  30 41             )                                 ret compile-only'
  \ -------------------------------------------------------------------------------
  (  D29A  68 D2             )
  (  D29C  87 4C 49 54 45    )    t:  LITERAL   push.LR   cfa= D2A4
  (  D2A4  B0 12 A6 C0 A6 C0 )               (  DOLIT:      C0A6   \ ) '' dolit  rcall    cfa'.of.dolit    @.  32,'
  (  D2AA  B0 12 48 D2       )                  CALL,
  (  D2AE  BB 3F             )                  ,              -;                         immediate'
  \ -------------------------------------------------------------------------------
variable.  cell'       4  cell'  !.

 
  \ -------------------------------------------------------------------------------
                                  t:  <dup>     push.LR    603E3F04  ...  ,   -;  IMMEDIATE'
  \ -------------------------------------------------------------------------------
                                  t:  align,*   push.LR    hp   {@} ALIGNED  hp   {!}    -;
  \ -------------------------------------------------------------------------------
                                  t:  align,    push.LR    cp   {@} ALIGNED  cp   {!}    -;
  \ -------------------------------------------------------------------------------
  (  D2C0  B0 12 90 C1       )    t:  $,"1      push.LR    {dup}
  (  D2C4  B0 12 34 C1       )                  {c@}     ( 3 ...  + )  T+2 ( ????? )  T 1 Rn#/
  (  D2C8  B0 12 42 C3       )                  2/
  (  D2CC  B0 12 64 C1       )                  {>r}         ahead'.
  (  D2D0  B0 12 90 C1       )    begin' ( for )   {dup} 
  (  D2D4  B0 12 1A C1       )                  {@}
  (  D2D8  B0 12 26 D2       )                  16,
  (  D2DC  B0 12 92 C6       )                  2+        then'.
  (  D2E0  B0 12 D6 C0 D0 D2 )     nex.  n=0?  \   next  \        D2D0
  (  D2E6  30 40 86 C1       )                  {drop}    ALIGN,     -;
  \ -------------------------------------------------------------------------------
  (  D2C0  B0 12 90 C1       )    t:  $,"1*     push.LR    {dup}            \ head portion
  (  D2C4  B0 12 34 C1       )                  {c@}     ( 3 ...  + )  T+2 ( ????? )  T 1 Rn#/
  (  D2C8  B0 12 42 C3       )                  2/
  (  D2CC  B0 12 64 C1       )                  {>r}         ahead'.
  (  D2D0  B0 12 90 C1       )    begin' ( for )   {dup} 
  (  D2D4  B0 12 1A C1       )                  {@}
  (  D2D8  B0 12 26 D2       )                  16,*
  (  D2DC  B0 12 92 C6       )                  2+        then'.
  (  D2E0  B0 12 D6 C0 D0 D2 )     nex.  n=0?  \   next  \        D2D0
  (  D2E6  30 40 86 C1       )                  {drop}    ALIGN,*    -;
  \ -------------------------------------------------------------------------------
  (  D2B2  03 24 2C 22       )    t:  $,"       push.LR   cfa= D2B6
  (  D2B6  B0 12 A6 C0 22 00 )                  DOLIT:      0022
  (  D2BC  B0 12 5C CE       )                  WORD
  (  D2C0  B0 12 90 C1       )                  $,"1    -;
  \ -------------------------------------------------------------------------------
  (  D2B0  9C D2             )
  (  D2B2  03 24 2C 22       )    t:  $,"*      push.LR   cfa= D2B6       \ head portion
  (  D2B6  B0 12 A6 C0 22 00 )                  DOLIT:      0022
  (  D2BC  B0 12 5C CE       )                  WORD
  (  D2C0  B0 12 90 C1       )                  $,"1*   -;
  \ -------------------------------------------------------------------------------
:.  begin,   ''  begin  16,'   ;.  \ ???????????
  \ -------------------------------------------------------------------------------
  (  D2FC  EC D2             )
  (  D2FE  85 42 45 47 49    )    t:  BEGIN     push.LR   cfa= D304
  (  D304  B0 12 8E C2       )                  CP
  (  D308  30 40 1A C1       )                  {@} -;                                     immediate'
  \ -------------------------------------------------------------------------------
  (  D334  22 D3             )
  (  D336  85 41 47 41 49    )    t:  AGAIN     push.LR   cfa= D33C
  (  D33C  B0 12 A6 C0 06 C1 )             doLIT  '' branch  32,'   \   DOLIT:      C106
  (  D342  B0 12 48 D2       )                  CALL,
  (  D346  6F 3F             )                  ,              -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D364  4A D3             )
  (  D366  85 41 48 45 41    )    t:  AHEAD     push.LR   cfa= D36C
  (  D36C  B0 12 A6 C0 06 C1 )             doLIT  '' branch  32,'   \   DOLIT:      C106
  (  D372  B0 12 48 D2       )                  CALL,
  (  D376  B0 12 04 D3       )                  BEGIN
  (  D37A  B0 12 A6 C0 02 00 )                  DOLIT:       4    \ 0002
  (  D380  12 3F             )                  IALLOT         -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D39A  84 D3             )
  (  D39C  84 54 48 45 4E    )    t:  THEN      push.LR   cfa= D3A2
  (  D3A2  B0 12 04 D3       )                  BEGIN
  (  D3A6  B0 12 A0 C1       )                  {swap}  
  (  D3AA  04 3F             )                  I!             -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D2EA  B2 D2             )
  (  D2EC  83 46 4F 52       )    t:  FOR       push.LR   cfa= D2F0
  (  D2F0  B0 12 A6 C0 64 C1 )             doLIT  '' >r   32,'   \   DOLIT:      C164
  (  D2F6  B0 12 48 D2       )                  CALL,
  (  D2FA  04 3C             )                  BEGIN          -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D30C  FE D2             )
  (  D30E  84 4E 45 58 54    )    t:  NEXT      push.LR   cfa= D314
  (  D314  B0 12 A6 C0 D6 C0 )             doLIT  ''  nex.     32,' \   DOLIT:      C0D6
  (  D31A  B0 12 48 D2       )                  CALL,
  (  D31E  83 3F             )                ( , )   _ [n=0?]  -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D320  0E D3             )
  (  D322  85 55 4E 54 49    )    t:  UNTIL     push.LR   cfa= D328
  (  D328  B0 12 A6 C0 F0 C0 )             doLIT  '' ?branch   32,'   \   DOLIT:      C0F0
  (  D32E  B0 12 48 D2       )                  CALL,
  (  D332  79 3F             )                  ,              -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D348  36 D3             )
  (  D34A  82 49 46          )    t:  IF        push.LR   cfa= D34E
  (  D34E  B0 12 A6 C0 F0 C0 )            doLIT  '' ?branch    32,'   \      DOLIT:      C0F0
  (  D354  B0 12 48 D2       )                  CALL,
  (  D358  B0 12 04 D3       )                  BEGIN
  (  D35C  B0 12 A6 C0 02 00 )                  DOLIT:     4 \  0002
  (  D362  21 3F             )                  IALLOT         -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D382  66 D3             )
  (  D384  86 52 45 50 45    )    t:  REPEAT    push.LR   cfa= D38C
  (  D38C  B0 12 3C D3       )                  AGAIN
  (  D390  B0 12 04 D3       )                  BEGIN
  (  D394  B0 12 A0 C1       )                  {swap}  
  (  D398  0D 3F             )                  I!             -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D3AC  9C D3             )
  (  D3AE  83 41 46 54       )    t:  AFT       push.LR   cfa= D3B2
  (  D3B2  B0 12 86 C1       )                  {drop} 
  (  D3B6  B0 12 6C D3       )                  AHEAD
  (  D3BA  B0 12 04 D3       )                  BEGIN
  (  D3BE  30 40 A0 C1       )                  {swap}    -;                                  immediate'
  \ -------------------------------------------------------------------------------
  (  D3C2  AE D3             )
  (  D3C4  84 45 4C 53 45    )    t:  ELSE      push.LR   cfa= D3CA
  (  D3CA  B0 12 6C D3       )                  AHEAD
  (  D3CE  B0 12 A0 C1       )                  {swap}  
  (  D3D2  E7 3F             )                  THEN           -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D3D4  C4 D3             )
  (  D3D6  85 57 48 49 4C    )    t:  WHILE     push.LR   cfa= D3DC
  (  D3DC  B0 12 4E D3       )                  IF
  (  D3E0  30 40 A0 C1       )                  {swap}    -;                                  immediate'
  \ -------------------------------------------------------------------------------
  (  D3E4  D6 D3             )
  (  D3E6  86 41 42 4F 52    )    t:  ABORT"    push.LR   cfa= D3EE
  (  D3EE  B0 12 A6 C0 50 D0 )               (  DOLIT:      D050    \ )  '' dolit  rcall    cfa'.of.abor."  @.  32,'
  (  D3F4  B0 12 48 D2       )                  CALL,
  (  D3F8  5E 3F             )                  $,"            -;                         immediate'
  \ -------------------------------------------------------------------------------
  (  D3FA  E6 D3             )
  (  D3FC  82 24 22          )    t:  $"        push.LR   cfa= D400
  (  D400  B0 12 A6 C0 C0 CB )               (  DOLIT:      CBC0    \ )  '' dolit  rcall    cfa'.of.$"|     @.  32,'
  (  D406  B0 12 48 D2       )                  CALL,
  (  D40A  B0 12 B6 D2       )                  $,"
  (  D40E  30 41             )                                 ret             immediate'
  \ -------------------------------------------------------------------------------
  (  D410  FC D3             )
  (  D412  82 2E 22          )    t:  ."        push.LR   cfa= D416
  (  D416  B0 12 A6 C0 CC CB )               (  DOLIT:      CBCC    \ )  '' dolit  rcall    cfa'.of.."|     @.  32,'
  (  D41C  B0 12 48 D2       )                  CALL,
  (  D420  B0 12 B6 D2       )                  $,"
  (  D424  30 41             )                                 ret             immediate'
  \ -------------------------------------------------------------------------------
  (  D426  12 D4             )
  (  D428  07 3F 55 4E 49    )    t:  ?UNIQUE   push.LR   cfa= D430
  (  D430  B0 12 90 C1       )                  {dup} 
  (  D434  B0 12 AE CE       )                  NAME?
  (  D438  B0 12 F0 C0 56 D4 )        if#   \     D456
  (  D43E  B0 12 CC CB       )                  ."|:  reDef "
  (  D44A  B0 12 B2 C1       )                  {over}     
  (  D44E  B0 12 94 C7       )                  COUNT
  (  D452  B0 12 4A CB       )                  TYPE
  (  D456  30 40 86 C1       )        then#     {drop}   -;
  \ -------------------------------------------------------------------------------
  (  D45A  28 D4             )
  (  D45C  03 24 2C 6E       )    t:  $,n* ( a -- ) ( count --> a+1  len )      push.LR   cfa= D460
  (  D460  B0 12 90 C1       )                  {dup}
  (  D464  B0 12 34 C1       )                  {c@}  
  (  D468  B0 12 F0 C0 90 D4 )        if#   \   D490
  (  D46E  B0 12 30 D4       )                  ?UNIQUE
                                    CP {@} T-2   ,* \ push.LR takes 2 byte \ {dup}  name>   ,*  \  pcfa  in seperated head and body  PUSH.lR
  (  D472  B0 12 B4 C2       )                  LAST
  (  D476  B0 12 1A C1       )                  {@}
  (  D47A  B0 12 26 D2       )                  ,*            \  lfa
  (  D47E  B0 12 8E C2       )                  hp 
  (  D482  B0 12 1A C1       )                  {@}
  (  D486  B0 12 B4 C2       )                  LAST
  (  D48A  B0 12 0E C1       )                  {!}  
  (  D48E  18 3F             )                  $,"1*          -;
  (  D490  B0 12 C0 CB       )        then#     $"|:  name"
  (  D49A  30 40 2A D0       )                  ERROR  -;
  \ -------------------------------------------------------------------------------
  (  D49E  5C D4             )
  (  D4A0  08 24 43 4F 4D    )    t:  $COMPILE  push.LR   cfa= D4AA
  (  D4AA  B0 12 AE CE       )                  NAME?           \ cfa nfa   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )
  (  D4AE  B0 12 C8 C2       )                  ?DUP              \ cfa nfa nfa
  (  D4B2  B0 12 F0 C0 D2 D4 )        if#       \     D4D2
  (  D4B8  B0 12 1A C1       )                  {@}                \ cfa len~
  (  D4BC  B0 12 A6 C0 80 00 )                  DOLIT:      80    \ cfa len~  80
  (  D4C2  B0 12 D4 C1       )                  {and}                \ cfa len~n80
  (  D4C6  B0 12 F0 C0 D0 D4 )           if#    \     D4D0
  (  D4CC  30 40 C8 C0       )                  EXECUTE  -;       \ <-- compile-only
  (  D4D0  BB 3E             )           then#  call,          -; \ ---
  (  D4D2  B0 12 F8 C9       )        then#     NUMBER?
  (  D4D6  B0 12 F0 C0 DE D4 )        if#       \    D4DE
  (  D4DC  E3 3E             )                  LITERAL        -;
  (  D4DE  30 40 2A D0       )        then#     ERROR  -;
  \ -------------------------------------------------------------------------------
  (  D4E2  A0 D4             )
  (  D4E4  05 4F 56 45 52    )    t:  OVERT     push.LR   cfa= D4EA
  (  D4EA  B0 12 B4 C2       )                  LAST
  (  D4EE  B0 12 1A C1       )                  {@}
  (  D4F2  B0 12 7C C2       )                  CONTEXT
  (  D4F6  30 40 0E C1       )                  {!}    -;
  \ -------------------------------------------------------------------------------
  (  D4FA  E4 D4             )            variable.   op.code.of.ret     bd00   op.code.of.ret  !.
  (  D4FC  C1 3B             )    t:  ;'         push.LR   cfa= D4FE
  (  D4FE  B0 12 A6 C0 30 41 )            (  DOLIT:      4130    \ )   '' dolit rcall  op.code.of.ret  @.  32,'
  (  D504  B0 12 26 D2       )                  16,
  (  D508  B0 12 C2 D0       )                  [
  (  D50C  EE 3F             )                  OVERT          -;             immediate'  compile-only'
  \ -------------------------------------------------------------------------------
  (  D50E  FC D4             )
  (  D510  01 5D             )    t:  ]         push.LR   cfa= D512
  (  D512  B0 12 A6 C0 AA D4 )                  DOLIT   '' $COMPILE 32,'   \   D4AA
  (  D518  B0 12 66 C2       )                  'EVAL
  (  D51C  30 40 0E C1       )                  {!}    -;
  \ -------------------------------------------------------------------------------
                                                                          \  : token1  here    2dup {c!}  
                                                                          \            {1+}  {swap}    cmove  here  ;
  (  D520  10 D5             )                                            \  : $,"1   {dup} {c@}   ALIGNED 4 /
  (  D522  01 3A             )    t:  ::         push.LR   cfa= D524       \           FOR   {dup}  {@} ,*    CELL+
                                                [push.LR]                 \           NEXT  {drop}     ret
  (  D524  B0 12 28 CE       )                  TOKEN     \ BL PARSE 1F  MIN TOKEN1
  (  D528  B0 12 60 D4       )                  $,n*      \ {dup} {c@}  IF    ?UNIQUE? LAST {@} ,*   hp  {@} LAST {!}    $,"1  ret
                                                          \        THEN  $"|  name"  ERROR    ;
  (  D52C  F2 3F             )                  ]              -;     \  '' $COMPILE   'EVAL {!}  
  \ -------------------------------------------------------------------------------
  (  D52E  22 D5             )
  (  D530  09 49 4D 4D 45    )    t:  IMMEDIATE push.LR   cfa= D53A
  (  D53A  B0 12 A6 C0 80 00 )                  DOLIT:      0080
  (  D540  B0 12 B4 C2       )                  LAST
  (  D544  B0 12 1A C1       )                  {@} 
  (  D548  B0 12 1A C1       )                  {@} 
  (  D54C  B0 12 DE C1       )                  {or}   
  (  D550  B0 12 B4 C2       )                  LAST
  (  D554  B0 12 1A C1       )                  {@} 
  (  D558  2D 3E             )                  I!             -;
  \ -------------------------------------------------------------------------------
  (  D55A  30 D5             )
  (  D55C  45 64 6F 43 4F    )    t:  doCON???                                       cfa= D562
  (  D562  25 83             )        {dup}    \    sp      4  r-#
  (  D564  85 44 00 00       )                 \    sp      T  (R)=R
  (  D568  34 41             )        pop.t    \     T      1  R=(R+)
  (  D56A  24 44             )        {@}      \     T      T  R=(R)
  (  D56C  30 41             )                                 ret' compile-only'


  \ -------------------------------------------------------------------------------
  (  D55A  30 D5             )
  (  D55C  45 64 6F 43 4F    )    t:  doCON    push.LR                               cfa= D562
  (  D562  25 83             )        {dup}    \    sp      4  r-#
  (  D564  85 44 00 00       )                 \    sp      T  (R)=R
  (  D568  34 41             )        pop.t  {1-}  \     T      1  R=(R+)
  (  D56A  24 44             )        {@}      \     T      T  R=(R)
  (  D56C  30 41             )                                 ret  compile-only'
  \ -------------------------------------------------------------------------------
  (  D56E  5C D5             )
  (  D570  06 48 45 41 44    )    t:  HEADER    push.LR   cfa= D578
                                               [push.LR]
  (  D578  B0 12 28 CE       )                  TOKEN
  (  D57C  B0 12 60 D4       )                  $,n*
  (  D580  B0 12 EA D4       )                  OVERT
  (  D584  B0 12 A6 C0 62 D5 )        doLIT  '' doCON 32,'     \ DOLIT:      D562
  (  D58A  5E 3E             )                  call,          -;
  \ -------------------------------------------------------------------------------
  (  D58C  70 D5             )
  (  D58E  06 43 52 45 41    )    t:  CREATE    push.LR   cfa= D596
  (  D596  B0 12 78 D5       )                  HEADER
  (  D59A  B0 12 A0 C2       )            cp    \  DP
  (  D59E  B0 12 1A C1       )                  {@} 
  (  D5A2  41 3E             )         cell+    ,              -;

                              \   t:  CREATE    push.LR   :  cp  @  ;

 
  \ -------------------------------------------------------------------------------
  (  D5A4  8E D5             )
  (  D5A6  08 43 4F 4E 53    )    t:  CONSTANT  push.LR   cfa= D5B0
  (  D5B0  B0 12 78 D5       )                  HEADER
  (  D5B4  38 3E             )                  ,              -;
  \ -------------------------------------------------------------------------------
  (  D5B6  A6 D5             )
  (  D5B8  08 56 41 52 49    )    t:  VARIABLE  push.LR   cfa= D5C2
  (  D5C2  B0 12 96 D5       )                  CREATE
  (  D5C6  B0 12 A6 C0 02 00 )                  DOLIT:      0004  \ 2
  (  D5CC  30 40 94 D1       )                  iALLOT ( allot )  -;
  \ -------------------------------------------------------------------------------
  (  D5D0  B8 D5             )
  (  D5D2  04 44 55 4D 50    )    t:  DUMP***   push.LR   cfa= D5D8
  (  D5D8  B0 12 A6 C0 07 00 )                  DOLIT:      0007
  (  D5DE  B0 12 64 C1       )        \          {>r} 
  (  D5E2  B0 12 78 CB       )     for          CR
  (  D5E6  B0 12 90 C1       )                  {dup} 
  (  D5EA  B0 12 A6 C0 05 00 )                  DOLIT:         9  \   0005
  (  D5F0  B0 12 04 CC       )                  U.R
  (  D5F4  B0 12 A6 C0 0F 00 )                  DOLIT:      000F
  (  D5FA  B0 12 64 C1       )             \    {>r} 
  (  D5FE  B0 12 94 C7       )         for      COUNT
  (  D602  B0 12 A6 C0 03 00 )                  DOLIT:      0003
  (  D608  B0 12 04 CC       )                  U.R
  (  D60C  B0 12 D6 C0 FE D5 )         next  \        D5FE
  (  D612  B0 12 0E CB       )                  SPACE
  (  D616  B0 12 90 C1       )                  {dup} 
  (  D61A  34 80 10 00       )                       T     10  R-#
  (  D61E  B0 12 A6 C0 10 00 )                  DOLIT:      0010
  (  D624  B0 12 4A CB       )                  TYPE
  (  D628  B0 12 D6 C0 E2 D5 )     next  \        D5E2
  (  D62E  30 40 86 C1       )                  {drop}   -;
  \ -------------------------------------------------------------------------------
  (  D5D0  B8 D5             )
  (  D5D2  04 44 55 4D 50    )  \ t:  DUMP''' ( from to length --)  push.LR    0 ...  do {over}  i   {+}  {c@} {over}  i   {+}  {c!}  loop  {2drop} ret
                                  t:  DUMP''' ( from to length --)  push.LR  {1-}  for   {over} {r@} {+}  {c@} {over} {r@} {+}  {c!}  next  {2drop} ret
  \ -------------------------------------------------------------------------------
  (  D5D0  B8 D5             )
  (  D5D2  04 44 55 4D 50    )    t:  DUMP      push.LR     cfa= D5D8   ( from -- )  \ 80 bytes only
  (  D5D8  B0 12 A6 C0 07 00 )                  DOLIT:      0007
  (  D5DE  B0 12 64 C1       )                  {>r} 
  (  D5E2  B0 12 78 CB       )   begin' ( for )       CR
  (  D5E6  B0 12 90 C1       )                  {dup} 
  (  D5EA  B0 12 A6 C0 05 00 )                  DOLIT:         9  \   0005
  (  D5F0  B0 12 04 CC       )                  U.R
  (  D5F4  B0 12 A6 C0 0F 00 )                  DOLIT:      000F
  (  D5FA  B0 12 64 C1       )                  {>r} 
  (  D5FE  B0 12 94 C7       )     begin'  ( for )    COUNT
  (  D602  B0 12 A6 C0 03 00 )                  DOLIT:      0003
  (  D608  B0 12 04 CC       )                  U.R
  (  D60C  B0 12 D6 C0 FE D5 )         nex.  n=0?  \   next  \        D5FE
  (  D612  B0 12 0E CB       )                  SPACE
  (  D616  B0 12 90 C1       )                  {dup} 
  (  D61A  34 80 10 00       )                       T     10  R-#
  (  D61E  B0 12 A6 C0 10 00 )                  DOLIT:      0010
  (  D624  B0 12 4A CB       )                  TYPE
  (  D628  B0 12 D6 C0 E2 D5 )    nex.  n=0?  \ next  \        D5E2
  (  D62E  30 40 86 C1       )                  {drop}   -;

\ t: dump+  ( from len -- )  push.LR    bounds  do   i  dump  80 ... +loop  ret

                                  t:  DT        push.LR
                                                CR   DOWNLOAD.TO.RAM.START  @.  ( 20001000 ) ...   DUMP
                                                CR   hp0'                   @.  ( 20004000 ) ...   DUMP
                                                CR   head.start.in.ram      @.  ( 20006000 ) ...   DUMP   -;
  \ -------------------------------------------------------------------------------
  (  D632  D2 D5             )
  (  D634  02 2E 53          )    t:  .S        push.LR   cfa= D638
  (  D638  B0 12 78 CB       )                  CR
  (  D63C  B0 12 06 C7       )                  DEPTH
  (  D640  B0 12 64 C1       )                  {>r} 
  (  D644  06 3C             )      ahead'.  \          .s1            -;
  (  D646  B0 12 50 C1       )         here'         {r@}  
  (  D64A  B0 12 22 C7       )                  PICK
  (  D64E  B0 12 4A CC       )                  .
                                    then'.
                               \  t:  .s1
  (  D652  B0 12 D6 C0 46 D6 )         nex. n=0?   \        D646
  (  D658  B0 12 CC CB       )                  ."|:  <sp"
  (  D662  30 41             )                  cr          ret
  \ -------------------------------------------------------------------------------
  (  D664  34 D6             )
  (  D666  05 3E 4E 41 4D    )    t:  >NAME     push.LR   cfa= D66C
  (  D66C  B0 12 64 C1       )                  {>r} 
  (  D670  B0 12 7C C2       )                  CONTEXT
  (  D674  B0 12 1A C1       )                  {@} 
  (  D678  B0 12 90 C1       )        begin#    {dup} 
  (  D67C  B0 12 F0 C0 A6 D6 )        while#    \     D6A6
  (  D682  B0 12 90 C1       )                  {dup} 
  (  D686  B0 12 6A CE       )                  NAME>
  (  D68A  B0 12 50 C1       )                  {r@}  
  (  D68E  B0 12 E8 C1       )                  {xor}   
  (  D692  B0 12 F0 C0 A6 D6 )        if#   \     D6A6
  (  D698  B0 12 9E C6       )                  CELL-
  (  D69C  B0 12 1A C1       )                  {@} 
  (  D6A0  B0 12 06 C1 78 D6 ) -rot.  repeat# \ BRANCH:     D678
  (  D6A6  B0 12 3E C1       )        then#     {r>} 
  (  D6AA  30 40 86 C1       )                  {drop}   -;
  \ -------------------------------------------------------------------------------
  (  D6AE  66 D6             )
  (  D6B0  03 2E 49 44       )    t:  .ID       push.LR   cfa= D6B4
  (  D6B4  B0 12 94 C7       )                  COUNT
  (  D6B8  B0 12 A6 C0 1F 00 )                  DOLIT:      001F
  (  D6BE  B0 12 D4 C1       )                  {and}  
  (  D6C2  30 40 4A CB       )                  TYPE  -;

                                  :.  (t)=r        t  swap.             (r)=r   ;.
                                  :.  (r)=#/       0  swap.  r=#/     0 (r)=r   ;.
                                  :.  (t)=#/       t  swap.             (r)=#/  ;.
                                  :.  (t)=#        t  swap.             (r)=#   ;.
  \ --------------------------------------------------------------------------
                                  t:  ON    ( a -- )   (t)=0/   {drop}   ret'
  \ --------------------------------------------------------------------------
                                  t:  OFF   ( a -- )   (t)=0    {drop}   ret'
  \ --------------------------------------------------------------------------
  (  D6C6  B0 D6             )
  (  D6C8  05 57 4F 52 44    )    t:  WORDS/    push.LR   cfa= D6CE
                                                #emit  off
  (  D6CE  B0 12 78 CB       )                  CR
  (  D6D2  B0 12 7C C2       )                  CONTEXT
  (  D6D6  B0 12 1A C1       )        begin#    {@} 
  (  D6DA  B0 12 C8 C2       )      ( begin# )  ?DUP     1 ...  #emit  +!    #emit  {@}   68 ... >  if#  cr  #emit  off  then#
  (  D6DE  B0 12 F0 C0 FE D6 )        while#  \           D6FE
  (  D6E4  B0 12 90 C1       )                  {dup} 
  (  D6E8  B0 12 0E CB       )                  SPACE  space
  (  D6EC  B0 12 B4 D6       )                  .ID
  (  D6F0  B0 12 9E C6       )                  CELL-
  (  D6F4  B0 12 1A C1       )                \ @
  (  D6F8  B0 12 06 C1 DA D6 )        repeat# \ BRANCH:   D6DA
  (  D6FE  30 41             )                ( {r>}  {drop} )   ret
  \ -------------------------------------------------------------------------------
  t:      binary      ( ------ )   push.LR                                 2 ...  base  {!}  ret
  t:   .r(binary)     ( n r -- )   push.LR  base  {@}  {>r}   binary    .r  {r>}  base  {!}  ret
  t:  u.r(binary)     ( n r -- )   push.LR  base  {@}  {>r}   binary   u.r  {r>}  base  {!}  ret
  t:   .r(decimal)    ( n r -- )   push.LR  base  {@}  {>r}   decimal   .r  {r>}  base  {!}  ret
  t:  u.r(decimal)    ( n r -- )   push.LR  base  {@}  {>r}   decimal  u.r  {r>}  base  {!}  ret
  t:   .r(hex)        ( n r -- )   push.LR  base  {@}  {>r}   hex       .r  {r>}  base  {!}  ret
  t:  u.r(hex)        ( n r -- )   push.LR  base  {@}  {>r}   hex      u.r  {r>}  base  {!}  ret
  \ --------------------------------------------------------------------------
 
  \ --------------------------------------------------------------------------
  (  D700  C8 D6             )
  (  D702  02 68 69          )    t:  hi        push.LR                        cfa= D706
  (  D706  B0 12 78 CB       )                  CR
  (  D70A  B0 12 CC CB       )                  ."|: cortex M3/M4 eForth 4tF864  "
  (  D71E  30 40 78 CB       )                  CR  -;

  \ :. initialize.system.variable ( cfa' -- )   '' ('boot)  SYSTEM.VARIABLE.BASE.IN.ROM  @.  -.  0c /.  4 *.   SYSTEM.VARIABLE.BASE.IN.ROM  @.  +.  32!'  ;.
  \ -------------------------------------------------------------------------------
  (  D722  02 D7             )
  (  D724  05 27 42 4F 4F    )    t:  'BOOT                                           cfa= D72A
  (  D72A  25 83             )                              sp 4 r-#
  (  D72C  85 44 00 00       )                       sp     T  (R)=R
  (  D730  34 40 00 02       )                       T    20000200  ldri  \ R=#
  (  D734  30 41             )                                 ret'
  \ -------------------------------------------------------------------------------
  (  D736  24 D7             )         
  (  D738  04 43 4F 4C 44    )    t:  COLD   \  push.LR   cfa= D73E
                                             \  sp=20000378       \    rp=20000300
                                             \   sp 20000378  ldri      rp 20000300  ldri
  (  D73E  B0 12 A6 C0 00 10 )                  dolit  system.variable.base.in.rom  @.  32,'   \ DOLIT:  1000
  (  D744  B0 12 A6 C0 00 02 )                  DOLIT:      20000200
  (  D74A  B0 12 A6 C0 16 00 )                  DOLIT:          0054    \  2c    \
  (  D750  B0 12 FC C7       )                  CMOVE

    stellaris.launchpad?  @.
#if                                           _ uart.init.LF120       uart.switch.LF120  \ launchpad LF120
#else                                         _ uart.init.stm32F4   _ uart.switch.stm32F4.eF  \ 32F4xx
#then                                           8  ...  _ ms

  (  D754  B0 12 2A D7       )                  'BOOT
  (  D758  B0 12 E0 C7       )                  @EXECUTE
  (  D75C  B0 12 60 D1       )                  QUIT
  (  D760  EE 3F             )                  COLD         -;
  \ -------------------------------------------------------------------------------
                              \   t:  tF'       push.LR      _ tF   -;




  \ -------------------------------------------------------------------------------
  (  D736  24 D7             )
  (  D738  04 43 4F 4C 44    )    t:  COLD.stm32f4    \  push.LR   cfa= D73E
                                             \  sp=20000378        \   rp=20000300
                                             \  sp 20000378  ldri      rp 20000300  ldri
                                             \  r7=378  r7t=2000     \   rp=20000300  \ rp 20000300  ldri
                               system.variable.base.in.ram @.  ...  1fe00 ...  ff ... fill
  (  D73E  B0 12 A6 C0 00 10 )                  dolit  system.variable.base.in.rom  @.  32,'   \ DOLIT:  1000
  (  D744  B0 12 A6 C0 00 02 )                  DOLIT:      20000200
  (  D74A  B0 12 A6 C0 16 00 )                  DOLIT:      0A8 ( 54 ) \ 34  \   0054    \  2c    \
  (  D750  B0 12 FC C7       )                  CMOVE

                                  t:  warm.stm32f4
                                              _ uart.init.stm32f4      _ uart.switch.stm32f4.eF  \ 32F4xx
                                                8 ...  _ ms

  (  D754  B0 12 2A D7       )                  'BOOT
  (  D758  B0 12 E0 C7       )                  @EXECUTE
  (  D75C  B0 12 60 D1       )                  QUIT
  (  D760  EE 3F             )                  COLD.stm32f4        -;
  \ -------------------------------------------------------------------------------
                             \    t:  tF'       push.LR      _ tF   -;
                             \    t:  main      sp 20000378  ldri     rp 20000300  ldri   cold   ret
                                  t:  main      sp=20000378           rp=20000300         cold   ret































 

  \ ------------------------------------------------------------------------
\  insert{{   2f2  org    ahead'  }}insert     then'     6008 16,'   \  2F4  AGAIN'

  :.  t=r    t  swap.  r=r    ;.
  :.  Tn#,s  t  swap.  Rn#,s  ;.
  :.  if'u>=     if'c=1       ;.
  :.  if'u<      if'c=0       ;.
  :.  while'<>   while'z=0    ;.
  :.  if'<>      if'z=0       ;.
  :.  while'u>=  while'c=1    ;.
  :.  while'u<   while'c=0    ;.
\ ************************************************************************
  :{ {4drop}     { r0, r1, r2, t, }  sp  ldm  };    \  t:0a ?????
  :{ {3drop}     { r0, r1,     t, }  sp  ldm  };
  :{ {2drop}     { r0,         t, }  sp  ldm  };
head.Forth?  @.
#if
  t:  4drop      {4drop}   ret'
  t:  3drop      {3drop}   ret'
  t:  2drop      {2drop}   ret'
  t:  drop       {drop}    ret'
  t:  noop                 ret'
  t:  nip        {nip}     ret'
  t:  ?dup   if'T<>0
                 {dup}
             then'         ret'
  t:   dup       {dup}     ret'
#else
  t:  4drop      {nip}
  t:  3drop      {nip}
  t:  2drop      {nip}
  t:  drop       {drop}
  t:  noop                 ret'
  t:  nip        {nip}     ret'
  t:  ?dup                 if'T<>0
  t:   dup       {dup}     then'      ret'
#then

  :.  t=#/       t   swap.   r=#/  ;.
 

  t:  0~F>'0'~'F'    tn0F    t 0a r:#  ( t:0a ) ( not 9 )  if'u>=  t+7  then'   t+30   ret'   \ digit


cortex.m0?  @.
#if            :.  r0=100   0 100 r=#  ;.     :.  t:100   r0=100   t  0  r:r   ;.

  t:  '0'~'F'>0~F                      T+D0          ( 30 ... 0 )                  \ 32 10 digit --> 2 -1
                                       t:100 ( t:100 )
             IF'c=1           Tnff     T+F6          \  30~39 => F6~FF
                                       t:100 ( t:100 )
                 IF'c=0     ( Tn0f )   T+0A   Tn0f   ret'  \   0~9
                 ENDIF'                TnDF          \ lower case -> UPPER CASE
                                       T+F9          \
                                       t:100 ( t:100 )
                 IF'c=1       Tn0ff   T+FA          \  41~46 => FA~FF
                                       t:100 ( t:100 )
                      IF'c=0           Tn0F    ret'  \   A~F
                      ENDIF'
                 ENDIF'
             ENDIF'
  t:  <t=-1>          begin'           T=0/    ret'  \  error

  t:  0<       {2*}   until'c=0
  t:  0<'      t t r:r  ( T:T ) ( if'> )
      if'c=0   t:  <t=ffffffff>        T=1   t t r-r-c  ( T-T-c )   ret'
      then'    t:  <t=0>               T=0                          ret'
#else
  t:  '0'~'F'>0~F                      T+D0          ( 30 ... 0 )                  \ 32 10 digit --> 2 -1
                                       t 100 r:# ( t:100 )
             IF'c=1           Tnff     T+F6          \  30~39 => F6~FF
                                       t 100 r:# ( t:100 )
                 IF'c=0     ( Tn0f )   T+0A   Tn0f   ret'  \   0~9
                 ENDIF'                TnDF          \ lower case -> UPPER CASE
                                       T+F9          \
                                       t 100 r:# ( t:100 )
                 IF'c=1       Tn0ff   T+FA          \  41~46 => FA~FF
                                       t 100 r:# ( t:100 )
                      IF'c=0           Tn0F    ret'  \   A~F
                      ENDIF'
                 ENDIF'
             ENDIF'
  t:  <t=-1>          begin'           T=0/    ret'  \  error

  t:  0<       {2*}   until'c=0
  t:  0<'      t t r:r  ( T:T ) ( if'> )
      if'c=0   t:  <t=ffffffff>        T=1   t t r-r-c  ( T-T-c )   ret'
      then'    t:  <t=0>               T=0                          ret'
#then



                             ef:  d2/
( 0B60   0 R7 R0 LDR      )                6838  16,'
( 0B62   0 R0 R0 LSRS     )                0800  16,'
( 0B64   1 R6 R6 ASRS     )                1076  16,'
( 0B66   0B6C BCC         )       if'c=1 \ D301  16,'
( 0B68   80000000 R1 LDRI )          r1 80000000 LDRI  \           4901  16,'
( 0B6A   R1 R0 ORRS       )                4308  16,'
( 0B6C   0 R7 R0 STR      )       then'    6038  16,'
( 0B6E   LR BX            )           ret' \     4770  16,'

  t:  10/      {2/}                          \  10u/   10 u/
  t:   8/      {2/}
  t:   4/      {2/}
  t:   2/      {2/}                    ret'  \   2u/    2 u/   2 rshift    T.>>1
  t:  100/     push.LR    10/   10/    ret
  t:  10000/   push.LR   100/  100/    ret
  t:  10*      {2*}                          \   2 *   not lshift 2      T.a>>1
  t:   8*      {2*}
  t:   4*      {2*}
  t:   2*      {2*}      ret'
  t:  swap     {swap}    ret'

 
  :{  {u2/}    t  1 r>>#      };  \ still wrong in  ARMasm761.f  ???????????
  t:  u10/     {u2/}
  t:   u8/     {u2/}
  t:   u4/     {u2/}
  t:   u2/     {u2/}                   ret'    \ ??????????

  t:  u100/    push.LR  u10/   u10/    ret
  t:  u10000/  push.LR  u100/ u100/    ret

  t:  u10*     {u2*}
  t:   u8*     {u2*}
  t:   u4*     {u2*}
  t:   u2*     {u2*}     ret'                 

\  t: u10/mod   ( n ... r q )   push.LR  {dup}  Tn0F    swap  ( TnF0 )  u10/     ret    \ 10.u/mod
  t:  10/mod   ( n ... r q )   push.LR  {dup}  Tn0F    swap  ( TnF0 )   10/     ret    \ 10./mod
:. y=#  y  swap.  r=#  ;.
:. y-#  y  swap.  r-#  ;.
  t:  .n   ( n -- )  push.LR   0~F>'0'~'F'  emit   ret
  t:  .2n  ( n -- )  push.LR   10/mod   .n  .n     ret
  t:  .4n  ( n -- )  push.LR   10/mod   10/mod     10/mod      .n  .n  .n  .n   ret

  t:  .8n  ( n -- )  push.LR   6 ... {>r}  begin'   10/mod  nex.   n=0?  \ {drop}  \ r0-1.s ?????   \ r0:0 ???
                               7 ...  >r   begin'   .n      nex.   n=0?  ret
  :.  Y*2   Y  Y  1  r=r<<#   ;.
  :.  Y*10  Y  Y  4  r=r<<#   ;.
  :.  r+t      t     r+r      ;.
  :.  t=y      t  y  r=r      ;.

  t:  ENTER.8.digit   ( -- n)     push.LR     {dup}     Y=0
      begin'      drop      key ( KEY.io )  t 0d r:#  ( T:0d )
      while'<>    t 20 r:#  ( T:20 )
                  if'<>. \  t=w   ret    then'
                  '0'~'F'>0~F   ( T:0/  )    Tn0FF      t 0ff r:#  ( T:FF )
         if'<>    Y*10   Y+t    \ merge
         then'
      repeat'     then'.    t=Y   RET

  t:  cr          push.LR    {dup}  T=0a   emit     {dup}    T=0d   emit   ret     \ jmp   ?????
  t:  space       push.LR    {dup}  T=20   emit                          ret

:.   t+r      t   swap.   r+r  ;.
:.   t-r      t   swap.   r-r  ;.
:. t=t+r                  t+r  ;.
:. t=t-r                  t-r  ;.

\  :.  sp0@   20000378  ;.   \ sp0 is USER VARIABLE
\  :.  rp0@   20000300  ;.   \ rp0 is USER VARIABLE

  t:  .stack     push.LR           ( cr )  space   {dup}    T=28   emit ( space ) \ 28='('    29=')'  ."("   .")"
      {dup}   T sp0@ ldri  ( T=20000400 )          T-4    t sp r-r ( T-r5 )    {2/}   {2/}   .2n
                                        ( space )  {dup}    T=29   emit           \ (12)
      {dup}   T sp0@ ldri  ( T=20000400 )          T-8
      begin'      t sp ( 5 )  r:r ( r7:r5 )
      while'u>=   {dup}   space   T=(T)   .8n      T-4
      repeat'     cr      drop    ret


  :.   sp0.mF    2000238  ;.

  t:  .stack.stm32f4.eF      push.LR               cr        {dup}    T=28   emit ( space ) \ 28='('    29=')'  ."("   .")"
      {dup}   T sp0@ ldri  ( T=20000400 )          T-4    t sp r-r ( T-r5 )    {2/}   {2/}   .2n
                                        ( space )  {dup}    T=29   emit           \ (12)
      {dup}   T sp0@ ldri  ( T=20000400 )          T-8
      begin'      t sp ( 5 )  r:r ( r7:r5 )
      while'u>=   {dup}   space   T=(T)   .8n      T-4
      repeat'     cr      drop    ret

  :{  t=(rp)   t  rp  r=(r)     };
  :{  {>r}     push.t   {drop}  };
  :{  {r>}     {dup}    pop.t   };
  :{  {r@}     {dup}    t=(rp)  };
  t:  >r       push.t   {drop}             ret'
  t:  r>       {dup}    pop.t              ret'
  t:  r@       {dup}          t  r=(rp)    ret'
  t:  dup>r    {dup>r}                     ret'
  t:  r>drop   {r>drop}                    ret'
\ ```````````````````````````````
\  :{ {over}    {dup}  t=s'   };
                                    t:  over                                                    cfa= 9D4
  (  000009D4  04 3F 3E 60       )              {dup}
  (  000009D8  7E 68             )              t=s'
  (  000009DA  70 47             )              ret'

  t:  tuck     {swap}   {over}   ret'
  
  :{  {6*}     {dup}    {2*}  +  {2*}   };
  :.  r=t+#    t  swap.  r=r+#   ;.
  :.  t=r+#    t  -rot.  r=r+#   ;.

  t:  go.tbl        \ 4  8  *.  allot'
stm32f407.sF?  @.
#if  \ _ tf            ret  ret
#else
      QUIT ( warm )   ret  ret  \ a                     \  multiple of 4 address    ret  nop
#then
\     cold  ( tf )    ret  ret  \ a                     \  multiple of 4 address    ret  nop
\     tf              ret  ret  \ a                     \  multiple of 4 address    ret  nop
    _ execute         ret  ret  \ b   branch
      .stack          ret  ret  \ c   content of stack
      ENTER.8.digit   ret  ret  \ d   data


  t:  go.tbl.mF     \ 4  8  *.  allot'
stm32f407.sF?  @.
#if  \ _ tf            ret  ret
#else
      QUIT ( warm )   ret  ret  \ a                     \  multiple of 4 address    ret  nop
#then
\
\     cold  ( tf )    ret  ret  \ a                     \  multiple of 4 address    ret  nop
\     tf              ret  ret  \ a                     \  multiple of 4 address    ret  nop
    _ execute         ret  ret  \ b   branch
     .stack  ( .stack.mF ) ret  ret  \ c   content of stack
      ENTER.8.digit   ret  ret  \ d   data

  t:  GET+EXECUTE.COMMAND      push.lr     {dup}   begin'  {drop}   KEY   Tn0DF  T-41 ( 'A' )  t 4 r:# ( T:4 ) until'u<
                               {2*}  {2*}  {2*}    0  '' go.tbl     ldri  t+r0  ( R+# )     \ {@}
  t:  execute    r0=T+1        {drop}      jmp_r0  ( bx_r0 )   \ r0=T+1   1 means thumb mode only   0: arm mode


  t:  GET+EXECUTE.COMMAND.mF   push.lr     {dup}   begin'  {drop}   KEY   Tn0DF  T-41 ( 'A' )  t 4 r:# ( T:4 ) until'u<
                               {2*}  {2*}  {2*}    0  '' go.tbl.mF  ldri  t+r0  ( R+# )     \ {@}
  t:  execute    r0=T+1        {drop}      jmp_r0  ( bx_r0 )   \ r0=T+1   1 means thumb mode only   0: arm mode

  :{  .".tF"   cr  {dup}   t 't' r=#   emit  {dup}  t 'F' r=#  emit  space  };  \ disply tF

  variable.  system.variable.length           54  system.variable.length  !.


stm32f407.sF?  @.
#if    t:  cmove          ret'   \ ????????????????????
       t:  cold.stm32f4   ret'
#then
\

  t:  move.eforth.user.variable>ram    {dup}  t   system.variable.base.in.ROM  @.   ldri
                                       {dup}  t   system.variable.base.in.RAM  @.   ldri
                                       {dup}  t   system.variable.length       @.   ldri   cmove   ret


stm32f407.sF?  @.
#if    t:  fill   ret'   \ ????????????????????
       t:  cold   ret'
       t:  +!     ret'
#then


  t:  tF"      0d  rp0@ ldri    fsp  sp0@ ldri ( sp0 )  \   move.eforth.user.variable>ram
      DOWNLOAD.TO.RAM.START  @. ...   RAM.END  @.  DOWNLOAD.TO.RAM.START  @.  -.  ...   0ff ...   FILL
      PortF_Init ( initialize )       COLD  \ .".tF"  {dup} \ ''' t=# emit
\     begin'   GET+EXECUTE.COMMAND
\     again'   RESOLVE.DATA.PENDED''


  t:  tF       0d  rp0@ ldri    fsp  sp0@ ldri ( sp0 )  \   move.eforth.user.variable>ram
      DOWNLOAD.TO.RAM.START  @. ...   RAM.END  @.  DOWNLOAD.TO.RAM.START  @.  -.  ...   0ff ...   FILL
stellaris.launchpad?  @.  tF+eF+mF(stm32F4)?  @.  and.
#if   uart.init.stm32F4.tF+eF+mF
#else PortF_Init ( initialize )       \ .".tF"  {dup} \ ''' t=# emit
#then
  t:  tFw    \ tF.warm
      begin'   GET+EXECUTE.COMMAND
      again'   RESOLVE.DATA.PENDED''


\ t:  >tF0   3a3c     ...    execute   200055dc ...   execute   ret   \  see ef51>ram    see tF0
\ t:  >tF0   2000fff0 ...   @execute   2000fff4 ...  @execute   ret   \  see ef51>ram    see tF0
\ T:  >51    3AE4 ...   EXECUTE   20005B30 ...    EXECUTE  \ not push.LR  no ret are need????
\ '' ef51>ram   and   '' cold  in cortex M0 are unknown yet.  3AE4 and 20005B30 have to be changed accordingly.
  T:  51M0   push.LR     doUSER.base.in.rom  @.   8051eForth.based.addr  @.  -.        {dup}  t=#   @EXECUTE  ( ef51>ram in rom )
                         doUSER.base.in.rom  @.   8051eForth.based.addr  @.  -.  4 +.  {dup}  t=#   @EXECUTE  ( main*    in ram ) ret


























t: @execute  ( cfa' --)           {@}  {execute}  \ no ret' is needed.  code @execute  {@} {execute}  end-code
   mecrisp4F120?   @.
#if        t:  key     push.LR     r0=0a2e   0 call_r    ret  \  0b70
           t:  emit    push.LR     r0=0a0c   0 call_r    ret  \  0b4e
#else
   mecrisp32F407?  @.
   #if  \  t:  key     push.LR     r0=0a2e   0 call_r    ret  \  ????
        \  t:  emit    push.LR     r0=0a0c   0 call_r    ret  \  ???
           t:  emit    push.LR   'emit  @execute    ret
           t:  key     push.LR   'key   @execute    ret
         \ t: ?key     push.LR  '?key.stm32F407.eF.PA.2   @execute    ret
   #else \ t:  emit    push.LR   emit.io            ret
         \ t:  key     push.LR    key.io            ret
           t:  emit    push.LR   'emit  @execute    ret
           t:  key     push.LR   'key   @execute    ret
         \ t:  emit    push.LR   emit.mecrisp4F120  ret
         \ t:  key     push.LR    key.mecrisp4F120  ret
         \ t: ?key     push.LR  '?key.mecrisp4F120        @execute    ret
   #then
  \ ------------------------------------------------------------------------
                                    t:  emit.stm32F4.eF.PA.3        push.LR                      \  cfa= B4E
  (  00000B4E  07 B4             )  { R0, R1, R2, }                push{}
  (  00000B50  30 46             )                  R0=T
  (  00000B52  40 CF             )                  {drop}
  (  00000B54  25 4A             )                  R2=40004400                                 \ (00000BEC)=40004400
                                        begin'                   \  00000B5C --> 00000B56  --------------------
  (  00000B56  11 68             )                  R1=(R2)
  (  00000B58  11 F0 80 01       )                  R1n80,s
  (  00000B5C  FB D0             )      until'<> \ z=1? eq?      \  00000B5C --> 00000B56  --------------------
  (  00000B5E  24 4A             )                  R2=40004404                                 \ (00000BF0)=40004404
  (  00000B60  10 70             )                2 0 (r)=r,b  \ (R2)=R0,b
  (  00000B62  07 BC             )    { R0, R1, R2, }              pop
  (  00000B64  70 47             )    1 ...  #emit  +!    ret  \  ret'
  \ ------------------------------------------------------------------------
  t:  key.stm32F4.eF.PA.2  ( pa.2 )                                                 \ cfa= B70
  (  00000B70  07 B4             )      { R0, R1, R2, }            push{}
  (  00000B72  1E 4A             )                  R2=40004400                                 \ (00000BEC)=40004400
                                        begin'                   \  00000B7A --> 00000B74  --------------------
  (  00000B74  11 68             )                  R1=(R2)
  (  00000B76  11 F0 20 01       )                  R1n20,s
  (  00000B7A  FB D0             )      until'<> \ z=1? eq?      \  00000B7A --> 00000B74  --------------------
  (  00000B7C  1C 4A             )                  R2=40004404                                 \ (00000BF0)=40004404
  (  00000B7E  10 78             )          0 2 r=(r)b  \      R0=(R2)b
  (  00000B80  47 F8 04 6D       )                  {dup}
  (  00000B84  06 46             )                  T=R0
  (  00000B86  07 BC             )      { R0, R1, R2, }            pop
  (  00000B88  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  t:  emit.stm32F4.eF.PA.3'          push.LR
      R2=40004400
      begin'       R1=(R2)          R1n80,s
      until'<>   \ z=1? eq?
      R2+4         2 t (r)=r,b      {drop}  1 ... #emit  +!   ret
  \ ------------------------------------------------------------------------
  t:  key.stm32F4.eF.PA.2'  ( -- char )
      {dup}        R2=40004400
      begin'       R1=(R2)          R1n20,s
      until'<>     \  z=1? eq?
      R2+4         t 2 r=(r)b       ret'
  \ ------------------------------------------------------------------------
#then





 









:.  r=(t)    t         r=(r)  ;.
:.  (t)=r    t  swap.  (r)=r  ;.

  \ ------------------------------------------------------------------------
                                    t:  setup.clocks                                            cfa= AE4
  (  00000AE4  33 4E             )          {dup}   T=40023800
  (  00000AE6  4F F4 80 30       )                  R0=10000
  (  00000AEA  30 60             )                  (T)=R0
  \ ------------------------------------------------------------------------
                                    t:  awaitHSE                                                cfa= AEC
                                 \ begin'
  (  00000AEC  30 68             )                  R0=(T)
       f400  16,'  3000  16,'    \                  R0n20000
       f43f  16,'  affb  16,'    \ until'<>
  (  00000AF6  30 4E             )                  T=40023808
  (  00000AF8  4F F0 01 00       )                  R0=1
  (  00000AFC  30 60             )                  (T)=R0
  (  00000AFE  2D 4E             )                  T=40023800
  (  00000B00  30 68             )                  R0=(T)
  (  00000B02  20 F0 01 00       )                  R0n1/
  (  00000B06  30 60             )                  (T)=R0
  (  00000B08  70 47             )         {drop}   ret'
  \ ------------------------------------------------------------------------
                                    t:  setup.uart                                              cfa= B0A
  (  00000B0A  2C 4E             )         {dup}    T=40023830
  (  00000B0C  2C 48             )                  R0=1001FF
  (  00000B0E  30 60             )                  (T)=R0
  (  00000B10  2C 4E             )                  T=40020000
  (  00000B12  30 68             )                  R0=(T)
  (  00000B14  2C 4D             )                  W  A0  r=#
  (  00000B16  40 EA 05 00       )                  0  w   RoR
  (  00000B1A  30 60             )                  (T)=R0
  (  00000B1C  2B 4E             )                  T=40020020
  (  00000B1E  2C 48             )                  R0=7700
  (  00000B20  30 60             )                  (T)=R0
  (  00000B22  2C 4E             )                  T=40023840
  (  00000B24  2C 48             )                  R0=20000
  (  00000B26  30 60             )                  (T)=R0
  (  00000B28  2C 4E             )                  T=40004408
  (  00000B2A  2D 48             )                  R0=46
  (  00000B2C  30 60             )                  (T)=R0
  (  00000B2E  2D 4E             )                  T=4000440C
  (  00000B30  2D 48             )                  R0=200C
  (  00000B32  30 60             )                  (T)=R0
  (  00000B34  70 47             )          {drop}  ret'
  \ ------------------------------------------------------------------------
                                    t:  uart.init                                               cfa= B36
  (  00000B36  00 B5             )                  push.LR
  (  00000B38  FF F7 D4 FF       )                  setup.clocks                                  \      AE4
  (  00000B3C  FF F7 E5 FF       )                  setup.uart                                    \      B0A
  (  00000B40  00 BD             )                  ret
  \ ------------------------------------------------------------------------
t: uart.switch
mecrisp4F120?  @.
#if         push.LR {dup} t '' emit.mecrisp4F120     r=#  'emit  !   {dup}  t ''  key.mecrisp4F120     r=#  'key  !
#else       push.LR {dup} t '' emit.stm32F4.eF.PA.3' r=#  'emit  !   {dup}  t ''  key.stm32F4.eF.PA.2' r=#  'key  !
#then                                                                                                                ret
t: uart.io  push.LR {dup} t '' emit.io               r=#  'emit  !   {dup}  t ''  key.io               r=#  'key  !  ret

variable'  uart?
  t: uart  push.LR  uart?  {dup}  @   t:0  {drop}  if'<>  _ off  uart.switch  ret  then'  _ on  uart.io   ret

t: uart.switch->tF   push.LR {dup} t '' emit.stm32F4.eF.PA.3'  r=#  'emit  !   {dup}  t ''  key.stm32F4.eF.PA.2'  r=#  'key  !   ret
t: ustF    push.LR   uart.switch->tF    ret

t: uart.switch->tF'  push.LR {dup} t '' emit.stm32F4.eF.PA.3   r=#  'emit  !   {dup}  t ''  key.stm32F4.eF.PA.2   r=#  'key  !   ret
t: ustF'   push.LR   uart.switch->tF    ret
                      
  t:  ?key.stm32F407.eF.PA.2                                      \              cfa= 6F24
\ (  00006F24  07 B4             )  { R0, R1, R2, } push{}
                                                    {dup}
  (  00006F26  06 4A             )                  R2=40004400
  (  00006F28  11 68             )                  t=(R2)
\ (  00006F2A  11 F0 20 01       )                  Tn20  t 0 r:#  if'nz  T=-1  else'  T=0  then'
  (  00006F2A  11 F0 20 01       )                  Tn20,s         if'nz  T=-1  else'  T=0  then'
  (  00006F2E  05 4A             )                  R2+4
  (  00006F30  92 F9 00 00       )                  0 2 R=(R)b  \ to reset (40004400).1=0
\ (  00006F3A  07 BC             )  { R0, R1, R2, } pop
  (  00006F3C  70 47             )                  ret'

 
  t:  uart.switch.LF120       push.LR {dup} t '' emit.mecrisp4F120      r=#  'emit  !   {dup}  t ''  key.mecrisp4F120       r=#   'key  !  ret
  t:  uart.switch.stm32f4.eF  push.LR {dup} t '' emit.stm32F4.eF.PA.3'  r=#  'emit  !   {dup}  t ''  key.stm32F4.eF.PA.2'   r=#   'key  !
                                                                                        {dup}  t '' ?key.stm32F407.eF.PA.2  r=#  '?key  !  ret

  t:  uart.init.stm32f4       \                            cfa= B36
  (  00000B36  00 B5             )                  push.LR
  (  00000B38  FF F7 D4 FF       )                  setup.clocks                                  \      AE4
  (  00000B3C  FF F7 E5 FF       )                  setup.uart                                    \      B0A
  (  00000B40  00 BD             )                  ret


  t:  tF.stm32f4.eF      \ tfm'
\     fsp  sp0.mecrisp  ldri ( sp0 )  0d  rp0.mecrisp  ldri
      fsp  sp0@         ldri ( sp0 )  0d  rp0@         ldri
\     4100 ...   20008200 ...  34 ...   cmove
      uart.init.stm32f4      uart.switch.stm32f4.eF   \ tF.32F4.mecrispForth
      DOWNLOAD.TO.RAM.START  @. ...   RAM.END  @.  DOWNLOAD.TO.RAM.START  @.  -.  ...   0ff ...   FILL
  t:  tFm
      begin'   GET+EXECUTE.COMMAND.mF
      again'   RESOLVE.DATA.PENDED''


  t:  main    sp 0378 r=#  sp 2000 Rt=# ( sp=20000378    -2 allot' ) rp 0300 r=#  rp 2000 Rt=#  cold.stm32f4     ret
\ t:  main    rp=20000378               ( sp=20000378 )  -2 allot'   rp=20000300                cold.stm32f4     ret

\ 4f02  ''  main   16!'

  :.  sp=#     sp  swap.  r=#  ;.
  :.  rp=#     rp  swap.  r=#  ;.
                 
stm32f407.sF?  @.
#if        
#then

insert{          2f2  extra.offset @.  +.  ( STM32F407.sF?  @.  #if  08000000 +.  #then )  org    jmp_r1
}insert
  t:  tp  ( n -- )  push.LR  {dup}  't'  t=#  emit  {dup} 'p' t=#  emit  .n   {dup} ':' t=#  emit  space  .stack  ret
  t:  tp1 ( ---- )  push.LR  {dup}  t=1  tp   ret
  t:  tp2 ( ---- )  push.LR  {dup}  t=2  tp   ret
  t:  tp3 ( ---- )  push.LR  {dup}  t=3  tp   ret
  t:  tp4 ( ---- )  push.LR  {dup}  t=4  tp   ret
  t:  tp5 ( ---- )  push.LR  {dup}  t=5  tp   ret
  t:  tp6 ( ---- )  push.LR  {dup}  t=6  tp   ret
  t:  tp7 ( ---- )  push.LR  {dup}  t=7  tp   ret
  t:  tp8 ( ---- )  push.LR  {dup}  t=8  tp   ret
  t:  tp9 ( ---- )  push.LR  {dup}  t=9  tp   ret

  t:  q      push.lr  4 download.to.ram.end+1  @.  r=#
                      2 download.to.ram.start  @.  r=#
             begin'   key    2 0 t (r+#)=r,b   2 1 r+#    2 4 r:r   {drop}
             until'=  ret

  t:  qq     push.lr  ( from to+1 )
             r4=t  {drop}    \  4 download.to.ram.end+1  @.  r=#
             r2=t  {drop}    \  2 download.to.ram.start  @.  r=#
             begin'   key    2 0 t (r+#)=r,b   2 1 r+#    2 4 r:r   {drop}
             until'=  ret

\  68 ALLOT'    \ :  bounds  ( FROM LENGTH --  upper lower )    over  +  swap  ;   \ T>P  T<P

                     t:  bounds                                                \ cfa=     8500
  (  00008500  00 B5             )                  push.LR
  (  00008502  FC F7 3D FB       )                  OVER                                          \      4B80
  (  00008506  FC F7 99 FB       )                  +                                             \      4C3C
  (  0000850A  FC F7 2F FB       )                  SWAP                                          \      4B6C
  (  0000850E  00 BD             )                  ret

                                    :  t>p                                                   \ cfa=     8518
  (  00008518  00 B5             )              \   push.LR
  (  0000851A  FF F7 F1 FF       )                  BOUNDS                                        \      8500
  (  0000851E  FC F7 F7 F8       )                  DO                                          \      4710
                                      \  begin'                       \ 00008530 --> 00008522 ===
  (  00008522  FC F7 D5 F8       )                   dup  \  I                                             \      46D0
  (  00008526  36 78             )                  {c@}
  (  00008528  FC F7 FA FD       )                  EMIT                                          \      5120
  (  0000852C  FC F7 0E F9       )                  LOOP                                        \      474C
  (  00008530  F7 D7             )    \  until'v \ v=0? vc?           \ 00008530 --> 00008522 ===
  (  00008532  00 BD             )                  ;

                                    :  t<p
  (  0000853C  00 B5             )               \  push.LR
  (  0000853E  FF F7 DF FF       )                  BOUNDS                                        \      8500
  (  00008542  FC F7 E5 F8       )                  DO                                          \      4710
                                      \   begin'                      \ 00008558 --> 00008546 ===================
  (  00008546  FC F7 DD FD       )                  KEY                                           \      5104
  (  0000854A  FC F7 C1 F8       )                  dup  \  I                                             \      46D0
  (  0000854E  30 46 42 CF 01 70 )                  {C!}
  (  00008554  FC F7 FA F8       )                  LOOP                                        \      474C
  (  00008558  F5 D7             )    \   until'v \ v=0? vc?          \ 00008558 --> 00008546 ===================
  (  0000855A  00 BD             )                  ;






   '' qq  addr.of.qq  !.

:.  L   exi  ini   'D' COMnEMIT     '' q  ( cfa' ) number>232   'B'  COMnEMIT
        download.to.ram.end+1 @.    download.to.ram.start @.    DO.  I. C@'  COMnEMIT  LOOP.  ;.

:.  update.last                                            \ last'    @.  last     !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                   'D' COMnEMIT  '' last      number>232   \ cfa.of.last      in target
                   'B' COMnEMIT                            \ address of variable last
                   'D' COMnEMIT  '' !         number>232   \ cfa.of.!         in target
                   'B' COMnEMIT  ;.

:.  update.context                                         \ last'    @.  context  !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                   'D' COMnEMIT  '' context   number>232   \ cfa.of.context   in target
                   'B' COMnEMIT                            \ address of variable context
                   'D' COMnEMIT  '' !         number>232   \ cfa.of.!         in target
                   'B' COMnEMIT  ;.

:.  update.last                                            \ last'    @.         last     !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                    ''  last        (B')                   \ address of variable last
                    ''  !           (B')      ;.

:.  update.context                                         \ last'    @.         context  !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                    ''  context     (B')                   \ address of variable context
                    ''  !           (B')      ;.

:.  update.last+context     update.last    update.context  ;.


variable.  addr.of.t>p
variable.  addr.of.t<p
 
:.  LL       ( from to+1 -- )       swap.    2dup.    \ to+1 from from to+1
        exi  ini   'D' COMnEMIT     number>232   \ from
                   'D' COMnEMIT     number>232   \ to+1
                   'D' COMnEMIT     '' qq     ( cfa' ) number>232   'B'  COMnEMIT
                    DO.  I.  C@'    COMnEMIT  LOOP.  ;.

:.  LL.new   ( from to+1 -- )       swap.    2dup.  tuck.  -.  swap.  \ to+1 from  len from
        exi  ini   'D' COMnEMIT     number>232   \ from
                   'D' COMnEMIT     number>232   \ len
                   'D' COMnEMIT     addr.of.t<p  @.  ( '' t<p )  ( cfa' ) number>232   'B'  COMnEMIT
                    DO.  I.  C@'    COMnEMIT  LOOP.  ;.

:.  LLL      ( -- )  HEAD>TARGET  20000600 ( variable  20001000 )  20006000   LL       update.last+context  ;.
:.  LLL.new  ( -- )  HEAD>TARGET  20000600 ( variable  20001000 )  20006000   LL.new   update.last+context  ;.

:.  LLL.new  ( -- )  HEAD>TARGET  20000600 ( variable  20001000 )  cp' @. ( 20006000 )  LL.new
                                  20004000                         hp' @.               LL.new  update.last+context  ;.

:.  Lt    ( -- )  base.  @.  >r.        hex.
                  exi  ini  s". tFw"    string>232   LLL      \  ti LF120
                 'D' COMnEMIT   hp' @.  number>232
                 'D' COMnEMIT   cp' @.  number>232
                 'A' COMnEMIT   s". cp ! hp !"  string>232    r>. base. !.   ;.

:.  LLLL  Lt  ;.


:.  Lm    ( -- )  base.  @.  >r.        hex.
                  exi  ini  s". tFm"    string>232   LLL.new   \ stm32f4
                 'D' COMnEMIT   hp' @.  number>232
                 'D' COMnEMIT   cp' @.  number>232
                 'A' COMnEMIT   s". cp ! hp !"  string>232     r>. base. !.  ;.

:.  Lmm   Lm  oo  ;.
:.  >t    Lm  oo  ;.

:. dump.target   ( a' -- )  >r.  exi  ini   s". tFw"    string>232   \  232." ss tFw"
                                 exi  ini  ( to restart receiving prevent from "tFw" to leave in the 232 buffer)
   'D'   COMnEMIT  r@.              number>232  \ frpm
   'D'   COMnEMIT  80               number>232  \ length
   'D'   COMnEMIT  addr.of.t>p  @.  number>232   'B'  COMnEMIT   \ t>p ( from length -- )
   80  0    do.  COMnKEY  temp.dump   i. +.  c!.  loop.
   r>.      temp.dump     80   0
   do.      i.  10 mod.   0=.  if.   cr.  over.  i.  +.  space.  7  u.r.   then.
                                          dup.   i.  +.  c@.     3   .r.
   loop.   'A'  COMnEMIT  2drop.  ;.

:. DT'      CR.  .".  cp  :  code program"   DOWNLOAD.TO.RAM.START  @.  ( 20001000 )  DUMP.target
            CR.  .".  hp  :  head"           hp0'                   @.  ( 20004000 )  DUMP.target
            CR.  .".  dp  :  dp @ <- here"   head.start.in.ram      @.  ( 20006000 )  DUMP.target  ;.

:{  push.r0,r1  { r0, r1, }  push };
\ ------------------------------------------------------------------------
                                    t:  (do)                                                     cfa= A84
  (  00000A84  30 46             )   r0=t         \ 4630 16,'  \       R0=T
  (  00000A86  42 CF             )   r1=s,2drop   \ { R1, T, } sp ldm
\ (  00000A88  02 4A             ) \ 2  80000000  ( 80000000 ) ldri  \         R2=(pc+A94)     \ ( 00000A94 ) = 80000000
  (  00000A8A  51 40             )   R1x80000000  \ 4051 16,'  \         R1xR2
  (  00000A8C  40 1A             )   r0-r1        \ 1a40 16,'    \         R0=R0-R1
  (  00000A8E  03 B4             )   push.r0,r1   \ { r0, r1, }  push  \ b403 16,'  \         push{}  R0 R1
  (  00000A90  70 47             )              ret'    RESOLVE.DATA.PENDED
  (  00000A92  00 BF             )         \    nop
  (  00000A94  00 00 00 80       )   \ data:    80000000
  \ ------------------------------------------------------------------------
                                    t:  (?do)                                                    cfa= A98
  (  00000A98  30 46             )   r0=t         \ 4630 16,'  \          R0=T
  (  00000A9A  42 CF             )   r1=s,2drop   \ { R1, T, } sp   ldm
  (  00000A9C  88 42             )   4288 16,'    \  R0:R1
  (  00000A9E  03 D0             ) if'z=0         \         AA8....z=1?(=?)
  (  00000AA0  02 4A             ) \  2 80000000 ( 80000000 ) ldri  \         R2=(pc+AAC)     \ ( 00000AAC ) = 80000000
  (  00000AA2  51 40             )   R1x80000000  \ R1xR2  \  4051 16,'  \         R1xR2
  (  00000AA4  40 1A             )   r0-r1        \   1a40 16,'    \         R0=R0-R1
  (  00000AA6  03 B4             )   push.r0,r1   \  { r0, r1, }  push  \ b403 16,'   b403 16,'  \         push{}  R0 R1
  (  00000AA8  70 47             ) then'        ret'    RESOLVE.DATA.PENDED
  (  00000AAA  00 BF             )   \      \   nop
  (  00000AAC  00 00 00 80       )   \ data:    80000000
  \ ------------------------------------------------------------------------
 
  :.  r0=s      0  sp   0  r=(r+#)  ;.
  :.  r0=s'     0  sp   4  r=(r+#)  ;.
  :.  r0=s''    0  sp   8  r=(r+#)  ;.
  :.  r0=s'''   0  sp  0c  r=(r+#)  ;.
  :.  r0=s''''  0  sp  10  r=(r+#)  ;.
  :.  r0=s''''' 0  sp  14  r=(r+#)  ;.

  :.  t=s       t  sp   0  r=(r+#)  ;.
  :.  t=s'      t  sp   4  r=(r+#)  ;.
  :.  t=s''     t  sp   8  r=(r+#)  ;.
  :.  t=s'''    t  sp  0c  r=(r+#)  ;.
  :.  t=s''''   t  sp  10  r=(r+#)  ;.
  :.  t=s'''''  t  sp  14  r=(r+#)  ;.


  :{  r0=R      0  rp      r=(r)    };

\ :{  r0=R'     0  sp   4  r=(r+#)  };
  :{  r0=R'''   9801   16,'         };

\ :{  r0=R''    0  sp   8  r=(r+#)  };
  :{  r0=R''    9802   16,'         };

\ :{  r0=R'''   0  sp  0c  r=(r+#)  };
  :{  r0=R'''   9803   16,'         };

\ :{  r0=R''''  0  sp  10  r=(r+#)  };
  :{  r0=R'''   9804   16,'         };

\ :{  r0=R''''' 0  sp  14  r=(r+#)  };
  :{  r0=R''''' 9805   16,'         };

  :{  T=R'      t  rp   4  r=(r+#)  };
  :{  T=R''     t  rp   8  r=(r+#)  };
  :{  T=R'''    t  rp  0c  r=(r+#)  };
  :{  T=R''''   t  rp  10  r=(r+#)  };
  :{  T=R'''''  t  rp  14  r=(r+#)  };

  :{  T+r0,s    T  0       r+r      };

  :{  T=R+R'           r0=R      T=R'       T+r0,s  };
  :{  T=R''+R'''       r0=R''    T=R'''     T+r0,s  };
  :{  T=R''+R'''     9803 16,' ( r0=R''' )  T=R''      4406 16,'  ( T+r0 )  };

\ :{  T=R''''+R'''''   r0=R''''  T=R'''''   T+R0,s  };    \ ???????
  :{  T=R''''+R'''''   T=R''''   R0=R'''''  T+R0    };

                                    t:    i
  ( 0238   4 R7 SUBS              )  {dup} \ 3F04  16,'
  ( 023A   0 R7 R6 STR            )        \ 603E  16,'
  ( 023C   0 SP R0 LDR            )          9800  16,'   \ R0=(sp+0)
  ( 023E   4 SP R6 LDR            )          9E01  16,'   \ T=(sp+4)
  ( 0240   R0 R6 R6 ADDS          )  t+r0  \ 1836  16,'
  ( 0242   LR BX                  )  ret'  \ 4770  16,'      resolve.data.pended

                                    t:    j
  ( 0244   4 R7 SUBS              )  {dup} \ 3F04  16,'
  ( 0246   0 R7 R6 STR            )        \ 603E  16,'
  ( 024A   C SP R0 LDR            )          9803  16,'   \ R0=(sp+0C)
  ( 0248   8 SP R6 LDR            )          9E02  16,'   \ t=(sp+8)
\ ( 024A   C SP R0 LDR            )          9803  16,'   \ R0=(sp+0C)
  ( 024C   R0 R6 ADD              )          4406  16,'   \ t+r0
  ( 024E   LR BX                  )  ret'  \ 4770  16,'     resolve.data.pended

  \ ------------------------------------------------------------------------
                                    t:  k'                                                       cfa= B08
  (  00000B08  04 3F 3E 60       )              {dup}
  (  00000B0C  02 9E             )              T=R''''
  (  00000B0E  03 98             )              R0=R'''''
  (  00000B10  06 44             )              T+R0
  (  00000B12  70 47             )              ret'
 
\ :{  R+1         pop.r0    1c40 16,'                   push.r0  };   \ v is changed.
  :{  R+T,drop    pop.r0    1980 16,' ( R0+T ) {drop}   push.r0  };   \ v is changed.
  :{  {R+1}       pop.r0    1c40 16,' ( r0+1,s )        push.r0  };   \ v is changed.
                                    t:  (loop)                                                  cfa= AC8
  (  00000AC8  01 BC             )              pop.r0
  (  00000ACA  40 1C             )              1c40 16,'   \    r0+1
  (  00000ACC  01 B4             )              push.r0
  (  00000ACE  00 D7             )  if'v=1
  (  00000AD0  02 B0             )              b002 16,'   \    sp+8
  (  00000AD2  70 47             )  then'       ret'

                                    t:  (+loop)                                                 cfa= AD4
  (  00000AD4  01 BC             )              pop.R0  \     { R0, }
  (  00000AD6  80 19             )              R0+T
  (  00000AD8  40 CF             )              {drop}
  (  00000ADA  01 B4             )              push.R0
  (  00000ADC  00 D7             )  if'v=1   \  AE0....v=0?
  (  00000ADE  02 B0             )              B002  16,'   \  sp+8
  (  00000AE0  70 47             )  then'       ret'

  t:  last.or!      ( c -- )  push.LR  last  c@  or  last  c!   ret
  t:  smudge        ( -- )    push.LR  20 ...        last.or!   ret
  t:  compile-only  ( -- )    push.LR  40 ...        last.or!   ret
  t:  immediate     ( -- )    push.LR  80 ...        last.or!   ret    immediate'

  t:   iHERE    push.LR  cp      @                              ret
  t:   cHERE    push.LR  cp      @                              ret
  t:   c,       push.LR  cHERE  c!     1 ...  cp    +!          ret
  t:   cI,      push.LR  cHERE  c!     1 ...  cp    +!          ret
  t:   8I,      push.LR  cHERE  c!     1 ...  cp    +!          ret
  t:  16!       push.LR  >r  10/mod swap  r@  c!    r> {1+}  c! ret
  t:  16I,      push.LR  cHERE 16!     2 ...  cp    +!          ret


  t:  [x=0?]    ( code -- )  push.LR  cHERE   cell+   -  2/  c,   c,  ret  \ immediate'

  t:  [z=1?]                 push.LR   d0  ...  [x=0?]                ret    immediate'
  t:  [z=0?]                 push.LR   d1  ...  [x=0?]                ret    immediate'

  t:  [c=1?]                 push.LR   d2  ...  [x=0?]                ret    immediate'
  t:  [c=0?]                 push.LR   d3  ...  [x=0?]                ret    immediate'

  t:  [n=1?]                 push.LR   d4  ...  [x=0?]                ret    immediate'
  t:  [n=0?]                 push.LR   d5  ...  [x=0?]                ret    immediate'

  t:  [v=1?]                 push.LR   d6  ...  [x=0?]                ret    immediate'
  t:  [v=0?]                 push.LR   d7  ...  [x=0?]                ret    immediate'

  t:  [u>?]                  push.LR   d8  ...  [x=0?]                ret    immediate'
  t:  [u<=?]                 push.LR   d9  ...  [x=0?]                ret    immediate'

  t:  [>=?]                  push.LR   da  ...  [x=0?]                ret    immediate'
  t:  [<?]                   push.LR   db  ...  [x=0?]                ret    immediate'

  t:  [>?]                   push.LR   dc  ...  [x=0?]                ret    immediate'
  t:  [<=?]                  push.LR   dd  ...  [x=0?]                ret    immediate'

  t:  [jmp]                  push.LR   de  ...  [x=0?]                ret    immediate'
  t:  [???]                  push.LR   df  ...  [x=0?]                ret    immediate'

 
  t:  [v=0?]    push.LR  cHERE   cell+   -  2/  c,   d7 ... c,   ret    immediate'
  t:  [n=0?]    push.LR  cHERE   cell+   -  2/  c,   d5 ... c,   ret    immediate'

  t:   do       push.LR  '' (do)    ...  call,   chere           ret    immediate'
  t:  ?do       push.LR  '' (?do)   ...  call,   chere           ret    immediate'
  t:   loop     push.LR  '' (loop)  ...  call,   [v=0?]          ret    immediate'
  t:  +loop     push.LR  '' (+loop) ...  call,   [v=0?]          ret    immediate'

    :.  or!.   ( n a' -- )    dup>r.     @.     or.   r>.    !.  ;.
    :.  or!'   ( n a' -- )    2dup.    32@'     or.   swap.  32!'  drop.  ;.

forward.link?   @. 
#if
#else      head>target
#then

        ''     do    cfa'>nfa'   #if  80  swap.  or!'  #then
        ''    ?do    cfa'>nfa'   #if  80  swap.  or!'  #then
        ''   loop    cfa'>nfa'   #if  80  swap.  or!'  #then
        ''  +loop    cfa'>nfa'   #if  80  swap.  or!'  #then

\       ''     dx    cfa'>nfa'   #if  80  swap.  or!'  #then
\       ''    ?dx    cfa'>nfa'   #if  80  swap.  or!'  #then
\       ''   loox    cfa'>nfa'   #if  80  swap.  or!'  #then
\       ''  +loox    cfa'>nfa'   #if  80  swap.  or!'  #then

        ''  [v=0?]   cfa'>nfa'   #if  80  swap.  or!'  #then

  :.   do      (do)    here'  ;.   \ override the previous  do
  :.  ?do     (?do)    here'  ;.   \ override the previous ?do
  :.   loop    (loop)  v=0?   ;.   \ override the previous  loop
  :.  +loop   (+loop)  v=0?   ;.   \ override the previous +loop

  :.  goto     jmp                            ;.
  :.  ahead'   here'   here' goto             ;.
  :.  ahead    here'   here' goto ( jmp )     ;.
  :.  begin            here'                  ;.

\ :.  if       t 0 Ro# ( 0 Ao# )          if'z=0   {drop}  if.is.preceeded?  on.   ;.
\ :   IF'T<>0  T   R:0            HERE' DUP  Z=1?   ;
  :.  if       t 0 r:#   {drop}   HERE' DUP. Z=1?   ;.

\ :.  else     ahead   swap.  then' {drop}    ;.
\ :.  else     else'   {drop}               if.is.preceeded?  off.  ;.
  :.  else     else'                                                ;.
\ :.  then     if.is.preceeded? @.  if. else then.   then'          ;.
  :.  then     then'   ;.

  :.  endif            then'                  ;.
  :.  again            again'                 ;.
  :.  while    if                             ;.
  :.  repeat   swap.   again  then ( {drop} ) ;.
\ :.  until    not     while        repeat    ;.
  :.  until    t 0 r:#     {drop}   z=1?      ;.

  :.  goto     jmp                            ;.
\ :.  ahead'   here'   here'  goto            ;.
  :.  ahead'   here'   here'  jmp_#           ;.
\ :.  ahead    here'   here' (jmp)            ;.
  :.  ahead    here'   here'  goto ( jmp )     ;.

  :.  begin            here'                  ;.

\ :.  if       t 0 Ro# ( 0 Ao# )          if'z=0   {drop}  if.is.preceeded?  on.   ;.
\ :   IF'T<>0  T   R:0            HERE' DUP  Z=1?   ;
  :.  if       t 0 r:#   {drop}   HERE' DUP. Z=1?   ;.

\ :.  else     ahead   swap.  then' {drop}    ;.
\ :.  else     else'   {drop}               if.is.preceeded?  off.  ;.
  :.  else     else'                                                ;.
\ :.  then     if.is.preceeded? @.  if. else then.   then'          ;.
  :.  then     then'   ;.

  :.  endif            then'                  ;.
  :.  again            again'                 ;.
  :.  while    if                             ;.
  :.  repeat   swap.   again  then ( {drop} ) ;.
\ :.  until    not     while        repeat    ;.
  :.  until    t 0 r:#     {drop}   z=1?      ;.

\ :.  ahead'     here'   here' goto             ;.
  :.  ahead,     here'   here' goto ( jmp )   >1  ;.
  :.  ahead,,    here'   here' goto ( jmp )   >2  ;.
  :.  ahead,,,   here'   here' goto ( jmp )   >3  ;.
  :.  ahead,,,,  here'   here' goto ( jmp )   >4  ;.

  :.  begin,             here'                >1  ;.
  :.  begin,,            here'                >2  ;.
  :.  begin,,,           here'                >3  ;.
  :.  begin,,,,          here'                >4  ;.

  :.  until,         1>   until  ;.
  :.  until,,        2>   until  ;.
  :.  until,,,       3>   until  ;.
  :.  until,,,,      4>   until  ;.

  :.  again,         >1   again  ;.
  :.  again,,        >2   again  ;.
  :.  again,,,       >3   again  ;.
  :.  again,,,,      >4   again  ;.


  :.  while,         if        ;.
  :.  while,,        if        ;.
  :.  while,,,       if        ;.
  :.  while,,,,      if        ;.

  :.  while,         if >1.    ;.
  :.  while,,        if >2.    ;.
  :.  while,,,       if >3.    ;.
  :.  while,,,,      if >4.    ;.

\ :.  else,      ahead'    >1  swap.    1>  then'  ;.
\ :.  else,,     ahead'    >2  swap.    2>  then'  ;.
\ :.  else,,,    ahead'    >3  swap.    3>  then'  ;.
\ :.  else,,,,   ahead'    >4  swap.    4>  then'  ;.

   :.  else,     1>  else  >1  ;.
   :.  else,,    2>  else  >2  ;.
   :.  else,,,   3>  else  >3  ;.
   :.  else,,,,  4>  else  >4  ;.

  :.  if,            if    >1   ;.
  :.  if,,           if    >2   ;.
  :.  if,,,          if    >3   ;.
  :.  if,,,,         if    >4   ;.

  :.  then,      1>  then       ;.
  :.  then,,     2>  then       ;.
  :.  then,,,    3>  then       ;.
  :.  then,,,,   4>  then       ;.

  :.  else'c=0   here'  here'  c=0?  swap.  then'  ;.
  :.  else'c=1   here'  here'  c=1?  swap.  then'  ;.
  :.  else'z=0   here'  here'  z=0?  swap.  then'  ;.
  :.  else'z=1   here'  here'  z=1?  swap.  then'  ;.
  :.  else'n=0   here'  here'  n=0?  swap.  then'  ;.
  :.  else'n=1   here'  here'  n=1?  swap.  then'  ;.

  :.  repeat'c=0   swap.  c=1?   then'   ;.
  :.  repeat'c=0   swap.  c=1?   then'   ;.
  :.  repeat'z=0   swap.  z=1?   then'   ;.
  :.  repeat'z=0   swap.  z=1?   then'   ;.
  :.  repeat'n=0   swap.  n=1?   then'   ;.
  :.  repeat'n=0   swap.  n=1?   then'   ;.

  :.  else.if        if  swap.   then    ;.
  :.  else.true->    if  swap.   then    ;.

  :.  notif    T 0 R:# {DROP} HERE' DUP. Z=0? ;.
  :.  else.false->   notif  swap.   then      ;.
\ :.  IF       T 0 R:# {DROP} HERE' DUP. Z=1? ;.
\ :.  else.notif

  :.  until.false->   T 0 R:#   {drop}   z=0?  ;.
\ :.  until           T 0 R:#   {drop}   z=1?  ;.

  :.  repeat.if       swap.  until          then  ;.
  :.  repeat.true->   swap.  until          then  ;.
  :.  repeat.false->  swap.  until.false->  then  ;.

\ :.  repeat.notif   
  \ --------------------------------------------------------------------------
  (  D6C6  B0 D6             )
  (  D6C8  05 57 4F 52 44    )    t:  total.words  ( -- n )          push.LR
  (  D6D2  B0 12 7C C2       )        0 ... {>r}          CONTEXT
  (  D6D6  B0 12 1A C1       )        begin#    {@}       ?DUP
  (  D6DE  B0 12 F0 C0 FE D6 )        while#    CELL-     {r>}       {1+}    {>r}
  (  D6F8  B0 12 06 C1 DA D6 )        repeat#   {r>}      ret
  \ -------------------------------------------------------------------------------
var    spacing            
variable.             org.offset
  :.  org+  ( n -- )  org.offset  @.  +.  org  ;.

  t:  WORDS*      ( x.width spacing -- )   push.LR    spacing  !  base {@}  >r     total.words   {dup}     0 ( 1 )  ...
        ?do       CONTEXT    over    i   -    0 ...
                  ?do        {@}     t-4
                  loop       t+4     {dup}  {c@} ( len )  Tn1f   #emit  {@}  {+}  3 ... pick  >   i  0 ( 1 ) ... =  or
                  if#        cr      i  {1+}  4 ...  u.r(decimal)    #emit  off   space
                  else#      spacing @  spaces
                  then#      spacing @  100 ...  =
                  if#        dup  8 ...  -  @   0a ...  u.r   ."|:   org+  drop.  t:  "
                         \   10000 ...  for next  \    r0=10000000  delay.r0
                  then#      .ID     1 ...  _ ms
        loop      {2drop}    r>  base  {!}  ret        \  4f  3  words*      1  1  words*

\             begin
  t:  words   push.LR   77 ...     1 ...  words*                        ret
  t:  words1  push.LR    1 ...   100 ...  words*    1 ...  spacing  !   ret
  t:  words2  push.LR   76 ...     2 ...  words*                        ret
  t:  words3  push.LR   75 ...     3 ...  words*                        ret
  t:  ws   '' words     again





variable.  case.sensitive?  \ case.sensitive?  on.

           defer'>call.cfa'?      on.     ERASE.DEFER':NFA.QUEUE   DEFER':NFA.QUEUE.counter  off.
          :.  immediate       immediate'     ;.
          :.  compile-only    compile-only'  ;.

variable.  head.adjacent.to.cfa?        \ name> , >name are influenced.
           head.adjacent.to.cfa?  on.
          dual.head.Forth(51eF)?  on.   ( dual.headed )
               +Pcfa?             off.

\ variable.  ram.offset    10000  ram.offset  !.

 words'?  on.
\  20000300   ram.offset  @.  +.  (rp0)  !.
\  20000378   ram.offset  @.  +.  (sp0)  !.

  optimize?  off.    traditional.structure?  on.

last.FLOADed.souce.addr  @.  ?dup.  #if   org   #then
\ **********************************************************************************************
  var.space  @. ( 600 )  8051eForth.based.addr  @.  +.  org     \  20002000

cortex.m0?   @.
#if
  \ ------------------------------------------------------------------------
                                    t:  xor!                (.n.a.--.)   \ (T)xS,2drop       cfa= 548
  (  00000548  03 CF             )                  nip>r0,r1
  (  0000054A  32 68             )                  R2=(T)
  (  0000054C  42 40             )                  R2xR0
  (  0000054E  32 60             )                  (T)=R2
  (  00000550  0E 46             )                  T=R1
  (  00000552  70 47             )                  ret'

                                    t:  bis!        push.LR   xor!   ret
  \ ------------------------------------------------------------------------
                                    t:  or!     (  t:  bis! )   (.n.a.--.)    \ (T)oS,2drop      cfa= 518
  (  00000518  03 CF             )                  nip>r0,r1
  (  0000051A  32 68             )                  R2=(T)
  (  0000051C  02 43             )                  R2oR0
  (  0000051E  32 60             )                  (T)=R2
  (  00000520  0E 46             )                  T=R1
  (  00000522  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  and!                  (.n.a.--.)   \ (T)nS,2drop       cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bit@                (.a.--.f.)   \ (T)nS,2drop,32bit=T/F     cfa= 560
  (  00000560  01 CF             )                  nip>r0
  (  00000562  36 68             )                  {@}
  (  00000564  06 40             )                  TnR0
  (  00000566  18 BF             )      if'nz  \  bf18 16,' \            it'<>......itne
  (  00000568  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000056C  70 47             )      then'       ret'
#else

  \ --------------------------------------------------------------------------
                                    t:  bit@                ( a.--.f.)   \ (T)nS,2drop,32bit=T/F     cfa= 560
  (  00000560  01 CF             )                  nip>r0
  (  00000562  36 68             )                  {@}
  (  00000564  06 40             )                  TnR0
  (  00000566  18 BF             )      bf18 16,' \            it'<>......itne
  (  00000568  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000056C  70 47             )                  ret'
  \ --------------------------------------------------------------------------
#then                                           :.  T=R1   t 1  r=r  ;.
  \ ------------------------------------------------------------------------
                                    t:  bic!                  (.n.a.--.)   \ (T)nS/,2drop      cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0/
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  xor!                ( 32n a' -- )   \ (T)xS,2drop       cfa= 548
  (  00000548  03 CF             )                  nip>r0,r1
  (  0000054A  32 68             )                  R2=(T)
  (  0000054C  42 40             )                  R2xR0
  (  0000054E  32 60             )                  (T)=R2
  (  00000550  0E 46             )                  T=R1
  (  00000552  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  or!       \ t:  bis!  ( 32n a' -- )    \ (T)oS,2drop      cfa= 518
  (  00000518  03 CF             )                  nip>r0,r1
  (  0000051A  32 68             )                  R2=(T)
  (  0000051C  02 43             )                  R2oR0
  (  0000051E  32 60             )                  (T)=R2
  (  00000520  0E 46             )                  T=R1
  (  00000522  70 47             )                  ret'

                                    t:  bis!        push.LR   or!   ret
  \ ------------------------------------------------------------------------
                                    t:  and!                  ( 32n a' -- )   \ (T)nS,2drop       cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  0=                                                    \ cfa=     5060
  (  00005060  00 2E 02 D1 6F+07 )                  {0=}
  (  0000506C  70 47             )                  ret' 
  \ --------------------------------------------------------------------------
                                    t:  ON    ( a -- )   (t)=0/   {drop}   ret'
  \ --------------------------------------------------------------------------
                                    t:  OFF   ( a -- )   (t)=0    {drop}   ret'
  \ ------------------------------------------------------------------------
                                    t:  i
  ( 0238   4 R7 SUBS              )  {dup} \ 3F04  16,'
  ( 023A   0 R7 R6 STR            )        \ 603E  16,'
  ( 023C   0 SP R0 LDR            )          9800  16,'   \ R0=(sp+0)
  ( 023E   4 SP R6 LDR            )          9E01  16,'   \ T=(sp+4)
  ( 0240   R0 R6 R6 ADDS          )  t+r0  \ 1836  16,'
  ( 0242   LR BX                  )  ret'  \ 4770  16,'      resolve.data.pended

                                    t:  j
  ( 0244   4 R7 SUBS              )  {dup} \ 3F04  16,'
  ( 0246   0 R7 R6 STR            )        \ 603E  16,'
  ( 024A   C SP R0 LDR            )          9803  16,'   \ R0=(sp+0C)
  ( 0248   8 SP R6 LDR            )          9E02  16,'   \ t=(sp+8)
\ ( 024A   C SP R0 LDR            )          9803  16,'   \ R0=(sp+0C)
  ( 024C   R0 R6 ADD              )          4406  16,'   \ t+r0
  ( 024E   LR BX                  )  ret'  \ 4770  16,'     resolve.data.pended
  \ ------------------------------------------------------------------------
                                    t:  k'                                                       cfa= B08
  (  00000B08  04 3F 3E 60       )              {dup}
  (  00000B0C  02 9E             )              T=R''''
  (  00000B0E  03 98             )              R0=R'''''
  (  00000B10  06 44             )              T+R0
  (  00000B12  70 47             )              ret'
\ ------------------------------------------------------------------------
                                    t:  (do)                                                     cfa= A84
  (  00000A84  30 46             )   r0=t         \ 4630 16,'  \       R0=T
  (  00000A86  42 CF             )   r1=s,2drop   \ { R1, T, } sp ldm
cortex.m0?  @.
#if
                                     R2=80000000    R1xR2
#else
  (  00000A8A  51 40             )   R1x80000000  \ 4051 16,'  \         R1xR2
#then
  (  00000A8C  40 1A             )   r0-r1        \ 1a40 16,'    \         R0=R0-R1
  (  00000A8E  03 B4             )   push.r0,r1   \ { r0, r1, }  push  \ b403 16,'  \         push{}  R0 R1
  (  00000A90  70 47             )              ret'    RESOLVE.DATA.PENDED
  (  00000A92  00 BF             )         \    nop
  (  00000A94  00 00 00 80       )   \ data:    80000000
  \ ------------------------------------------------------------------------
                                    t:  (?do)                                                    cfa= A98
  (  00000A98  30 46             )   r0=t         \ 4630 16,'  \          R0=T
  (  00000A9A  42 CF             )   r1=s,2drop   \ { R1, T, } sp   ldm
  (  00000A9C  88 42             )   4288 16,'    \  R0:R1
  (  00000A9E  03 D0             ) if'z=0         \         AA8....z=1?(=?)
cortex.m0?  @.
#if
                                     R2=80000000    R1xR2
#else
  (  00000AA2  51 40             )   R1x80000000  \ R1xR2  \  4051 16,'  \         R1xR2
#then
  (  00000AA4  40 1A             )   r0-r1        \   1a40 16,'    \         R0=R0-R1
  (  00000AA6  03 B4             )   push.r0,r1   \  { r0, r1, }  push  \ b403 16,'   b403 16,'  \         push{}  R0 R1
  (  00000AA8  70 47             ) then'        ret'    RESOLVE.DATA.PENDED
  (  00000AAA  00 BF             )   \      \   nop
  (  00000AAC  00 00 00 80       )   \ data:    80000000
  \ ------------------------------------------------------------------------


                                    t:  (loop)                                                  cfa= AC8
  (  00000AC8  01 BC             )              pop.r0
  (  00000ACA  40 1C             )              1c40 16,'   \    r0+1
  (  00000ACC  01 B4             )              push.r0
  (  00000ACE  00 D7             )  if'v=1
  (  00000AD0  02 B0             )              b002 16,'   \    sp+8
  (  00000AD2  70 47             )  then'       ret'

                                    t:  (+loop)                                                 cfa= AD4
  (  00000AD4  01 BC             )              pop.R0  \     { R0, }
  (  00000AD6  80 19             )              R0+T
  (  00000AD8  40 CF             )              {drop}
  (  00000ADA  01 B4             )              push.R0
  (  00000ADC  00 D7             )  if'v=1   \  AE0....v=0?
  (  00000ADE  02 B0             )              B002  16,'   \  sp+8
  (  00000AE0  70 47             )  then'       ret'
  \ ------------------------------------------------------------------------
  (  0174  5C 01             )                                                                    \  lfa= 0174
  (  0176  45 64 6F 4C 49 54 )   t:  doLIT    (.--.n.)                             compile-only   \  cfa= 017C
  (  017C  D0 83 D0 82 08 +0D)                      {doLIT}   ret'

:.  ...  doLIT    32,'  ;.       :.  ...   {dup}  t=#  ;.  \  ?????????

     ''  doLIT  >mca
     ''  doLIT  cfa'.of.doLIT*   !.
     :.  doLIT          doLIT'*  ;.


:.  r=(t)    t         r=(r)  ;.
:.  (t)=r    t  swap.  (r)=r  ;.
  \ ------------------------------------------------------------------------
                                    t:  setup.clocks                                            cfa= AE4
  (  000016D0  1D 49             )                  R1=40023800                                   \ (00001748)=40023800
  (  000016D2  4F F4 80 30       )                  R0=10000
  (  000016D6  08 60             )                  (R1)=R0
                                          begin'                     \ 000016DE --> 000016D8 -------------------------------
  (  000016D8  08 68             )                  R0=(R1)
  (  000016DA  00 F4 00 30       )                  R0n20000
  (  000016DE  FB D0             )        until'<> \ z=1? eq?        \ 000016DE --> 000016D8 -------------------------------
  (  000016E0  1A 49             )                  R1=40023808                                   \ (0000174C)=40023808
  (  000016E2  4F F0 01 00       )                  R0=1
  (  000016E6  08 60             )                  (R1)=R0
  (  000016E8  17 49             )                  R1=40023800                                   \ (00001748)=40023800
  (  000016EA  08 68             )                  R0=(R1)
  (  000016EC  20 F0 01 00       )                  R0n1/
  (  000016F0  08 60             )                  (R1)=R0
  (  000016F2  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  setup.uart                                              cfa= B0A
  (  000016F4  16 49             )                  R1=40023830                                   \ (00001750)=40023830
  (  000016F6  17 48             )                  R0=001007FF                                   \ (00001754)=001007FF
  (  000016F8  08 60             )                  (R1)=R0
  (  000016FA  17 49             )                  R1=40020000                                   \ (00001758)=40020000
  (  000016FC  08 68             )                  R0=(R1)
  (  000016FE  40 F4 20 10       )                  R0o280000
  (  00001702  08 60             )                  (R1)=R0
  (  00001704  15 49             )                  R1=40020024                                   \ (0000175C)=40020024
  (  00001706  16 48             )                  R0=00000770                                   \ (00001760)=00000770
  (  00001708  08 60             )                  (R1)=R0
  (  0000170A  16 49             )                  R1=40023844                                   \ (00001764)=40023844
  (  0000170C  16 48             )                  R0=00000010                                   \ (00001768)=00000010
  (  0000170E  08 60             )                  (R1)=R0
  (  00001710  16 49             )                  R1=40011008                                   \ (0000176C)=40011008
  (  00001712  46 20             )                  R0=46
  (  00001714  08 60             )                  (R1)=R0
  (  00001716  16 49             )                  R1=4001100C                                   \ (00001770)=4001100C
  (  00001718  16 48             )                  R0=0000200C                                   \ (00001774)=0000200C
  (  0000171A  08 60             )                  (R1)=R0
  (  0000171C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  012E  00 00             )                                                                    \  lfa= 012E
  (  0130  03 21 49 4F       )     :  !IO       (.--.)                                            \  cfa= 0134
  (  0134  C2 AC             )            \     `   _0AC=0          \ ES
  (  0136  75 98 52          )            \     `   R98=52          \ SCON
  (  0139  22                )                      RET
  \ -------------------------------------------------------------------------------

nuc442eF?  @.
#if

t:  tx!      ( char -- )                                        \ ----------__7 6 5 4 3 2 1 0----------
    r2=tx  ( R2=40004868 ) ( 4000403C )   R0=0  (R2)=R0  8.68us   8       \        -->  <-- 8.68us
    for'r3      t rrc.r
       if'c=1   R0=1
       else'    R0=0
       then'    (R2)=R0    8.68us
    next'r3     R0=1  (R2)=R0   {drop}    8.68us   ret'    NOP  NOP  NOP  NOP  NOP  NOP NOP

  ''  TX!  cfa'.of.TX!*  !.

\ 40004868  equ  tx!(pb10)
\ 4000486c  equ  ?rx(pb11)
\ ---------------------------------------------------------------------------------
t:  ?rx(key)    ( -- char )
    {dup}       t=0    R2=4000486c  ( 4000403C )   \ (pb11)
    begin'      r0=(r2)     0  0  r:#
    until'=     4.34us      8
    for'r3      {2*}        8.68us           \ t rrc.r ( t<<1 )
                r0=(r2)     0  0  r:#
       if'=     {1+}  \ t+1
\      else'  \ nop
       then'
    next'r3   r1=t  t=0   8  for'r0   {2*}  1 rrc.r   if'c=0  {1+}   then'  next'r0  ret'

t:  ?rx    ( -- char -1 / 0 )


    {0}   ( {dup}  t=0 )    R2=4000486c  ( 4000403C )   \ (pb11)
    r0=(r2)     0  0  r:#
    if'<>     ( 8  for'r1   8.68us  next'r1  )  ret'
    then'       4.34us      8
    for'r3      {2*}        8.68us           \ t rrc.r ( t<<1 )
                r0=(r2)     0  0  r:#
       if'=     {1+}  \ t+1
\      else'  \ nop
       then'
    next'r3     r1=t  t=0   8  for'r0   {2*}  1 rrc.r   if'c=0  {1+}   then'  next'r0   -1 ...  ret'
\   {dup}   Tn0f  To30  tx!    {dup}  TnF0   T>>4  To30  tx!   t=39   -1 ...  ret'


 ''  ?RX  cfa'.of.?RX*  !.

 



t:  tx!???       ( char -- )  \ (pb10)
    R2=40004868  ( 4000403C )
    begin'  R0=0   (R2)=R0    \  8.68us
            R0=1   (R2)=R0    \  8.68us
    again'  ret'

t:  test.tx!'    push.LR  56 ( 'V' )  ...  tx!      20000 for'r0  next'r0
    30 ...  tx!  20000 for'r0  next'r0   R2=4000486c  r0=(r2)  0 1 r:#  if'=  31 ...  tx!  else'  38 ... tx!   then'
\   begin'  ?rx  tx!  again'       ret
            begin'  ?rx   T:0 {DROP} UNTIL'<>     tx!   ret

t:  test.tx!   push.LR   test.tx!'   8.68us  test.tx!'  8.68us  20002101 ... {c@}  tx!  8.68us  20002105 ... {c@}  tx!  ret

\       0x0000092e:    f8d80000    ....    LDR      r0,[r8,#0]
\       0x00000932:    2801        .(      CMP      r0,#1
\       0x00000934:    d1d3        ..      BNE      0x8de ; main + 60
t:  test.tx!    BEGIN'  55 ... TX!  AGAIN'

  ''  TX!  cfa'.of.TX!*  !.
#else
  (  015A  3C 01             )                                                                    \  lfa= 015A
  (  015C  03 54 58 21       )    t:  TX!    ( char -- )            {TX!}    ret'                 \  cfa= 0160

  ''  TX!  cfa'.of.TX!*  !.
   \ -------------------------------------------------------------------------------
  (  013A  30 01             )                                                                    \  lfa= 013A
  (  013C  03 3F 52 58       )    t:  ?RX    ( -- char -1 / 0 )     {?RX}    ret'                 \  cfa= 0140

  ''  ?RX  cfa'.of.?RX*  !.

#then

\ ''  ?RX  cfa'.of.?RX*  !.
  \ -------------------------------------------------------------------------------
  (  018E  76 01             )                                                                    \  lfa= 018E
  (  0190  44 6E 65 78 2E    )    t:  nex.                                         compile-only   \  cfa= 0196
  (  0196  D0 83 D0 82 D0 +1E)                      {nex.}
  (  01B9  22                )                      ret'

     ''  nex.  >mca
     ''  nex.  cfa'.of.nex.*   !.
  \ -------------------------------------------------------------------------------
  (  01D6  BC 01             )                                                                    \  lfa= 01D6
  (  01D8  46 62 72 61 6E 63 )    t:  branch                                       compile-only   \  cfa= 01E0

  (  01E0  D0 83 D0 82 E0 +06)                      {branch}
  (  01EB  22                )                      ret'     \ no need

  ''   branch  cfa'.of.branch*    !.
  \ -------------------------------------------------------------------------------
                                  t:  ?branch       {?branch}  ret'

  ''  ?branch  cfa'.of.?branch*   !.

:.  ,call.branch*                     cfa'.of.branch*   @.  ,call.cfa'  ;.
:.  ,call.?branch*                    cfa'.of.?branch*  @.  ,call.cfa'  ;.
  \ -------------------------------------------------------------------------------
  (  01EC  D8 01             )                                                                    \  lfa= 01EC
  (  01EE  07 45 58 45 43 55 )    t:  EXECUTE       {execute}   ret'  \ no ret                    \  cfa= 01F6
  \ -------------------------------------------------------------------------------
  (  0202  EE 01             )                                                                    \  lfa= 0202
  (  0204  01 21             )    t:  !    (.n.n.--.)                                             \  cfa= 0206
  (  0206  8A 82 8B 83 86 +0E)                      {!}
  (  0219  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  021A  04 02             )                                                                    \  lfa= 021A
  (  021C  01 40             )    t:  @    (.n.--.n.)                                             \  cfa= 021E
  (  021E  8A 82 8B 83 E0 +04)                      {@}
  (  0227  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0228  1C 02             )                                                                    \  lfa= 0228
  (  022A  02 43 21          )    t:  C!   (.n.n.--.)                                             \  cfa= 022E
  (  022E  8A 82 8B 83 18 +09)                      {C!}
  (  023C  22                )                      ret'
  (  023D  00                )
  \ -------------------------------------------------------------------------------
  (  023E  2A 02             )                                                                    \  lfa= 023E
  (  0240  02 43 40          )    t:  C@   (.a.--.char.)                                          \  cfa= 0244
  (  0244  8A 82 8B 83 E0 +03)                      {C@}
  (  024C  22                )                      ret'
  (  024D  00                )
  \ -------------------------------------------------------------------------------
  (  024E  40 02             )                                                                    \  lfa= 024E
  (  0250  42 3E 52          )    t:  >R   (.n.--.)                                compile-only   \  cfa= 0254
  (  0254  D0 83 D0 82 C0 +0B)                      {>R}    ret'

  ''  >R        cfa'.of.>R*   !.
  \ -------------------------------------------------------------------------------
  (  0264  50 02             )                                                                    \  lfa= 0264
  (  0266  02 52 40          )    t:  R@  (.--.n.)  {R@}    ret'                                  \  cfa= 026A
  \ -------------------------------------------------------------------------------
  (  027E  66 02             )                                                                    \  lfa= 027E
  (  0280  02 52 3E          )    t:  R>  (.--.n.)                                                \  cfa= 0284
  (  0284  08 A6 02 08 A6 +0B)                      {R>}    ret'
  \ -------------------------------------------------------------------------------
  (  0294  80 02             )                                                                    \  lfa= 0294
  (  0296  03 52 50 40       )    t:  RP@  (.--.n.)                                               \  cfa= 029A
  (  029A  08 A6 02 08 A6 +07)                      {RP@}
  (  02A6  22                )                      ret'
  (  02A7  00                )
  \ -------------------------------------------------------------------------------
  (  02A8  96 02             )                                                                    \  lfa= 02A8
  (  02AA  43 52 50 21       )    t:  RP!  (.n.--.)                                compile-only   \  cfa= 02AE
  (  02AE  D0 83 D0 82 8A +09)                      {RP!}     ret'
  \ -------------------------------------------------------------------------------
  (  02BC  AA 02             )                                                                    \  lfa= 02BC
  (  02BE  03 53 50 40       )    t:  SP@  (.--.n.)                                               \  cfa= 02C2
  (  02C2  08 A6 02 08 A6 +05)                      {SP@}
  (  02CC  22                )                      ret'
  (  02CD  00                )
  \ -------------------------------------------------------------------------------
  (  02CE  BE 02             )                                                                    \  lfa= 02CE
  (  02D0  03 53 50 21       )    t:  SP!   (.n.--.)                                              \  cfa= 02D4
  (  02D4  A8 02 86 03 18 +03)                      {SP!}
  (  02DC  22                )                      ret'
  (  02DD  00                )
  \ -------------------------------------------------------------------------------
                                    t:  ?dup   (.n.--.n.n./.0.)                                   \ cfa=     6B80
  (  00006B80  00 2E 01 D0 04+03 )                  {?dup}
  (  00006B88  70 47             )                  ret'
  (  00006B8A  00 BF             )                  nop
  \ ------------------------------------------------------------------------
                                    t:  dup    (.n.--.n.n.)                                       \ cfa=     6B84
  (  00006B84  04 3F 3E 60       )                  {dup}
  (  00006B88  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  02FA  EE 02             )                                                                    \  lfa= 02FA
  (  02FC  04 44 52 4F 50    )    t:  DROP     (.n.--.)                                           \  cfa= 0302
  (  0302  86 03 18 86 02 18 )                      {drop}
  (  0308  22                )                      ret'
  (  0309  00                )

  ''  drop    cfa'.of.drop*  !.
  \ -------------------------------------------------------------------------------
  (  030A  FC 02             )                                                                    \  lfa= 030A
  (  030C  04 53 57 41 50    )    t:  SWAP     (.n.n.--.n.n.)                                     \  cfa= 0312
  (  0312  EB C6 FB 18 EA +03)                      {swap}
  (  031A  22                )                      ret'
  (  031B  00                )
  \ -------------------------------------------------------------------------------
  (  031C  0C 03             )                                                                    \  lfa= 031C
  (  031E  04 4F 56 45 52    )    t:  OVER    (.n.n.--.n.n.n.)                                    \  cfa= 0324
  (  0324  86 F0 18 E6 08 +09)                      {over}
  (  0332  22                )                      ret'
  (  0333  00                )
  \ -------------------------------------------------------------------------------
  (  0334  1E 03             )                                                                    \  lfa= 0334
  (  0336  02 30 3C          )    t:  0<      (.n.--.f.)                                          \  cfa= 033A
  (  033A  EB 30 E7 04 74 +06)                      {0<}
  (  0345  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0346  36 03             )                                                                    \  lfa= 0346
  (  0348  03 41 4E 44       )    t:  AND     (.n.n.--.n.)                                        \  cfa= 034C
  (  034C  E6 52 03 18 E6 +03)                      {and}
  (  0354  22                )                      ret'
  (  0355  00                )                      
  \ -------------------------------------------------------------------------------
  (  0356  48 03             )                                                                    \  lfa= 0356
  (  0358  02 4F 52          )    t:  OR      (.n.n.--.n.)                                        \  cfa= 035C
  (  035C  E6 42 03 18 E6 +03)                      {or}
  (  0364  22                )                      ret'
  (  0365  00                )                      
  \ -------------------------------------------------------------------------------
  (  0366  58 03             )                                                                    \  lfa= 0366
  (  0368  03 58 4F 52       )    t:  XOR     (.n.n.--.n.)                                        \  cfa= 036C
  (  036C  E6 62 03 18 E6 +03)                      {xor}
  (  0374  22                )                      ret'
  (  0375  00                )
  \ -------------------------------------------------------------------------------

:.  T=c      0 0 r=#    T  0  0  r=r+#+c    ;.
:.  T+0+c               T  0       r+#+c    ;.
:{  T=c      T=0                   T+0+c    };

                                     :.  t+1     t  1  r+#  ;.
  (  20001AA4  01 CF             )   :.  t+s,nip    nip>r0  \  pop { R0, } sp
  (  20001AA6  36 18             )                  T+R0   ;.
                                     :{  {+}     t+s,nip   };


 :.  t=1     t  1  r=#  ;.
                                     :{  {um+}   t+s,nip  if'c=1  {dup}  t=1  ret'  then'  {dup}  t=0  };

                                  \  :{  {um+}   t+s,nip  {dup}  t=0  if'c=1  t+1  then'  };
  \ -------------------------------------------------------------------------------
  (  0376  68 03             )                                                                    \  lfa= 0376
  (  0378  03 55 4D 2B       )    t:  UM+    (.n.n.--.n.n.)   {um+}                               \  cfa= 037C
\ (  037C  18 EA 26 F6 08 +03)                  \   S+T
\ (  0384  E4 FB 3B FA       )                  \   T=c
  (  0388  22                )                      ret'
  (  0389  00                )
  \ -------------------------------------------------------------------------------
  (  038A  78 03             )                                                                    \  lfa= 038A
  (  038C  03 52 4F 54       )    t:  ROT    (.n.n.n.--.n.n.n.)                                   \  cfa= 0390
  (  0390  88 F0 EB C6 18 +0C)                      {rot}
  (  03A1  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  03A2  8C 03             )                                                                    \  lfa= 03A2
  (  03A4  05 32 44 52 4F 50 )    t:  2DROP  (.n.n.--.)                                           \  cfa= 03AA
  (  03AA  18 18             )                      {nip}
  (  03AC  86 03 18 86 02 18 )                      {drop}
  (  03B2  22                )                      ret'
  (  03B3  00                )
  \ -------------------------------------------------------------------------------
  (  03B4  A4 03             )                                                                    \  lfa= 03B4
  (  03B6  04 32 44 55 50    )    t:  2DUP   (.n.n.--.n.n.n.n.)                                   \  cfa= 03BC
  (  03BC  18 E6 08 86 F0 +0B)                      {2dup}
  (  03CC  22                )                      ret'
  (  03CD  00                )
  \ -------------------------------------------------------------------------------
  (  03CE  B6 03             )                                                                    \  lfa= 03CE
  (  03D0  01 2B             )    t:  +      (.n.n.--.n.)                                         \  cfa= 03D2
  (  03D2  86 F0 18 EA 26 +06)                      {+}
  (  03DD  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  03DE  D0 03             )                                                                    \  lfa= 03DE
  (  03E0  01 2D             )    t:  -      (.n.n.--.n.)                                         \  cfa= 03E2
  (  03E2  C3 86 F0 18 E6 +07)                      {-}
  (  03EE  22                )                      ret'
  (  03EF  00                )
  \ -------------------------------------------------------------------------------
  (  03F0  E0 03             )                                                                    \  lfa= 03F0
  (  03F2  03 4E 4F 54       )    t:  NOT     (.n.--.n.)                                          \  cfa= 03F6
  (  03F6  EA F4 FA EB F4 FB )                      {not}
  (  03FC  22                )                      ret'
  (  03FD  00                )
  \ -------------------------------------------------------------------------------
  (  03FE  F2 03             )                                                                    \  lfa= 03FE
  (  0400  06 4E 45 47 41 54 )    t:  NEGATE  (.n.--.n.)                                          \  cfa= 0408
  (  0408  E4 C3 9A FA E4 +02)                      {negate}
  (  040F  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0410  00 04             )                                                                    \  lfa= 0410
  (  0412  03 41 42 53       )    t:  ABS     (.n.--.n.)      {abs}                               \  cfa= 0416
  (  041A  22                )                      ret'
  (  041B  00                )
  \ -------------------------------------------------------------------------------
:.  t>>8   t  8  r>>#  ;.
:.  t<<8   t  8  r<<#  ;.

  (  041C  12 04             )                                               \  lfa= 041C
  (  041E  04 46 4C 49 50    )    t:  FLIP   (.n.--.n.)   \ {dup}   TnFF00    t>>8   {swap}   TnFF   t<<8  {or}
                                                \  cfa= 0424
\ (  0424  EA CB FA          )                      TL<->TH
  (  0427  22                )                      ret'
  \ -------------------------------------------------------------------------------
                                  t:  DNEGATE  (.n.n.--.n.n.)     \   cfa=     5080
  (  00005080  38 68             )                  R0=S
  (  00005082  31 00             )                  R1=T
  (  00005084  B6 1B             )                  T=0
  (  00005086  40 42             )                  -R0
  (  00005088  8E 41             )                  T-R1-c
  (  0000508A  38 60             )                  S=R0
  (  0000508C  70 47             )                  ret'

                         :{  -S   R0=S   -R0   S=R0   };   :{  -T-c   R1=T  T=0  T-R1-c  };
                         :{  {dnegate*}  -S    -T-c   };

  (  0428  1E 04             )                                                                    \  lfa= 0428
  (  042A  07 44 4E 45 47 41 )    t:  DNEGATE*  (.n.n.--.n.n.)  \ ????                            \  cfa= 0432
  (  0432  E4 C3 18 96 F6 +04)                      -S
  (  043B  E4 9A FA E4 9B FB )                      -T-c
  (  0441  22                )                      ret'
  \ -------------------------------------------------------------------------------
                                 :{  {=}               {xor}   if'T<>0   T=0   else'   T=-1   then'   };
                                 t:   =  (.n.n.--.f.)  {xor}   if'T<>0   T=0   else'   T=-1   then'   ret'
  \ ------------------------------------------------------------------------
                                    :{  {u<}                                                      \ cfa=     50B0
  (  000050B0  01 CF             )                  nip>r0
  (  000050B2  30 45             )                  r0:t
  (  000050B4  02 D2             )      if'u< \ c=1? hs?         \ 000050B4 --> 000050BC  ******************
  (  000050B6  6F F0 00 06       )                  T=-1
                                        else'                    \ 000050B4 --> 000050BC  ******************
  (  000050BC  B6 1B             )                  T=0
                                        then'
  (  000050BE  70 47             )                  };

                                  t:  u<  (.n.n.--.f.)   {u<}   ret'
  \ -------------------------------------------------------------------------------
  (  0470  5C 04             )                                                                    \  lfa= 0470
  (  0472  05 43 45 4C 4C 2B )    t:  CELL+   (.n.--.n.)                                          \  cfa= 0478
  (  0478  74 02 2A FA 50 +02)                      {cell+}
  (  047F  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0480  72 04             )                                                                    \  lfa= 0480
  (  0482  05 43 45 4C 4C 2D )    t:  CELL-    (.n.--.n.)                                         \  cfa= 0488
  (  0488  C3 EA 94 02 FA +03)                      {CELL-}
  (  0490  22                )                      ret'
  (  0491  00                )
  \ -------------------------------------------------------------------------------
  (  0492  82 04             )                                                                    \  lfa= 0492
  (  0494  05 43 45 4C 4C 53 )    t:  CELLS    (.n.--.n.)                                         \  cfa= 049A
  (  049A  EA C3 33 FA EB +02)                      {CELLS}
  (  04A1  22                )                      ret'

                                  t:  CELL/    (.n.--.n.)       {cell/}    ret'
  \ -------------------------------------------------------------------------------
  (  04A2  94 04             )                                                                    \  lfa= 04A2
  (  04A4  02 31 2B          )    t:  1+       (.n.--.n.)                                         \  cfa= 04A8
  (  04A8  74 01 2A FA 50 +02)                      {1+}
  (  04AF  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  04B0  A4 04             )                                                                    \  lfa= 04B0
  (  04B2  02 31 2D          )    t:  1-       (.n.--.n.)                                         \  cfa= 04B6
  (  04B6  C3 EA 94 01 FA +03)                      {1-}
  (  04BE  22                )                      ret'
  (  04BF  00                )
  \ -------------------------------------------------------------------------------
  (  04C0  B2 04             )                                                                    \  lfa= 04C0
  (  04C2  02 32 2F          )    t:  2/       (.n.--.n.)                                         \  cfa= 04C6
  (  04C6  C3 EB 30 E7 01 +06)                      {2/}
  (  04D1  22                )                      ret'
  \ -------------------------------------------------------------------------------                                                                                                                                                             \  lfa= 04D2
  (  04D4  07 41 4C 49 47 4E )    t:  ALIGNED   (.n.--.n.)    {aligned}    ret'                   \  cfa= 04DC
  \ -------------------------------------------------------------------------------
                                   :.  T=R2     T  2  R=R  ;.

                                   :{  {um/mod}'                                               \ cfa=     5138
  (  00005138  03 CF             )                  nip>r0,r1
  (  0000513A  00 22             )                  2   0  r=#   \    R2=0
  (  0000513C  21 23             )                  3  21  r=#   \    R3=21
                                        begin'                   \ 0000514E --> 0000513E  +++++++++++++++++
  (  0000513E  B0 42             )                  0   T  R:R   \ R0:T
  (  00005140  00 D3             )         if'u>= \ c=0? lo?     \ 00005140 --> 00005144  **************************
  (  00005142  B0 41             )                  0   T  R-R-c \ R0-T-c
                                           then'                 \ 00005140 --> 00005144  **************************
  (  00005144  52 41             )         begin'.. 2   2  R+R+c  \ R2+R2+c
  (  00005146  5B 1E             )                  3   1  r-#   \ R3-1
  (  00005148  05 D0             )           if'<>. \ z=1? eq?     \ 00005148 --> 00005156  +++++
  (  0000514A  49 18             )                  1   1  R+R   \ R1+R1
  (  0000514C  40 41             )                  0   0  R+R+c \ R0+R0+c
  (  0000514E  F6 D3             )      until'u>= \ c=0? lo?     \ 0000514E --> 0000513E  +++++++++++++++++
  (  00005150  80 1B             )                  0   t  R-R   \ r0-t
  (  00005152  00 43             )                  0   0  RoR   \ R0oR0
  (  00005154  F6 E7             )         again'..     \  jmp_5144
                                             then'.                \ 00005148 --> 00005156  +++++
  (  00005156  04 3F             )                  {-nip}
  (  00005158  38 60             )                  s=R0
  (  0000515A  16 00             )                  T=R2
  (  0000515C  70 47             )                  };

\ cortex.m0?  @. 

:.  r2=0       2   0  r=#    ;.
:.  r3=21      3  21  r=#    ;.
:.  R0:R6      0   6  r:r    ;.
:.  R0-R6-c    0   6  r-r-c  ;.
:.  R2+R2+c    2   2  r+r+c  ;.
:.  R3-1       3   1  r-#    ;.
:.  R1+R1      1   1  r+r    ;.
:.  R0+R0+c    0   0  r+r+c  ;.
:.  R0-R6      0   6  r-r    ;.
:.  R0oR0      0   0  RoR    ;.   \ c=0
:.  c=0        R0oR0         ;.
:.  R7-4       7   4  r-#    ;.
:.  (R7)=R0    7   0  (r)=r  ;.                                               \
:.  R6=R2      6   2  r=r    ;.



:{  {um/mod}
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  R2=0        \  2200 16,'   \   R2=0
( 0520   21 R3 MOVS     )                  R3=21       \  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         R0:R6       \  42B0 16,'
( 0524   0528 BCC       )     if'c=1                   \  D300 16,'
( 0526   R6 R0 SBCS     )                  R0-R6-c     \  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       R2+R2+c     \  4152 16,'
( 052A   1 R3 R3 SUBS   )                ( R3-1        )  1E5B 16,'
( 052C   053A BEQ       )     while'z=0                \  D005 16,'
( 052E   R1 R1 R1 ADDS  )                  R1+R1       \  1849 16,'
( 0530   R0 R0 ADCS     )                  R0+R0+c     \  4140 16,'
( 0532   0522 BCC       )  until'c=1.                  \  D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  R0-R6       \  1B80 16,'
( 0536   R0 R0 ORRS     )                  R0oR0       \  4300 16,'
( 0538   0528 B         )     repeat'                  \  E7F6 16,'
( 053A   4 R7 SUBS      )                  R7-4        \  3F04 16,'
( 053C   0 R7 R0 STR    )                  (R7)=R0     \  6038 16,'
( 053E   R2 R6 MOVS     )                  R6=R2       \  0016 16,'
( 0540   LR BX          )                  };          \  4770 16,'














:{  {um/mod}'
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  2200 16,'   \   R2=0
( 0520   21 R3 MOVS     )                  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         42B0 16,'
( 0524   0528 BCC       )     if'c=1 \     D300 16,'
( 0526   R6 R0 SBCS     )                  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       4152 16,'
( 052A   1 R3 R3 SUBS   )                  1E5B 16,'
( 052C   053A BEQ       )     while'z=0  \    D005 16,'
( 052E   R1 R1 R1 ADDS  )                  1849 16,'
( 0530   R0 R0 ADCS     )                  4140 16,'
( 0532   0522 BCC       )  until'c=1. \ D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  1B80 16,'
( 0536   R0 R0 ORRS     )                  4300 16,'
( 0538   0528 B         )     repeat'  \      E7F6 16,'
( 053A   4 R7 SUBS      )                  3F04 16,'
( 053C   0 R7 R0 STR    )                  6038 16,'
( 053E   R2 R6 MOVS     )                  0016 16,'  };
( 0540   LR BX          )               \  4770 16,'

#ELSE

:{  {um/mod}
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  2200 16,'   \   R2=0
( 0520   21 R3 MOVS     )                  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         42B0 16,'
( 0524   0528 BCC       )     if'c=1 \     D300 16,'
( 0526   R6 R0 SBCS     )                  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       4152 16,'
( 052A   1 R3 R3 SUBS   )                  1E5B 16,'
( 052C   053A BEQ       )     while'z=0  \    D005 16,'
( 052E   R1 R1 R1 ADDS  )                  1849 16,'
( 0530   R0 R0 ADCS     )                  4140 16,'
( 0532   0522 BCC       )  until'c=1. \ D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  1B80 16,'
( 0536   R0 R0 ORRS     )                  4300 16,'
( 0538   0528 B         )     repeat'  \      E7F6 16,'
( 053A   4 R7 SUBS      )                  3F04 16,'
( 053C   0 R7 R0 STR    )                  6038 16,'
( 053E   R2 R6 MOVS     )                  0016 16,'  };
( 0540   LR BX          )               \  4770 16,'
#THEN



                                  t:  UM/MOD   (.n.n.n.--.n.n.)      {um/mod}   ret'



 




  \ -------------------------------------------------------------------------------
                                  :{ {doVAR}   push.LR    {dup}    pop.T   T-1  };
  (  0572  3C 05             )                                                                    \  lfa= 0572
  (  0574  45 64 6F 56 41 52 )    t:  doVAR   (.--.n.)    push.LR                  compile-only   \  cfa= 057A
  (  057A  08 A6 02 08 A6 03 )                      {dup}
  (  0580  D0 03 D0 02       )                      pop.T   T-1  \  {1-}    \ using under ram only ????????
  (  0584  22                )                      ret
  (  0585  00                )

     ''  doVAR  >mca
     ''  doVAR  cfa'.of.doVAR*   !.
     :.  doVAR          doVAR'*  ;.
  \ -------------------------------------------------------------------------------
\                                20002040  doUSER.base.in.rom    !.
\                                20002100  doUSER.base.in.ram    !.
\                                     0A8  USER.variable.length  !.
  (  0586  74 05             )                                                                    \  lfa= 0586
  (  0588  02 55 50          )     :  UP     (.--.n.)                                             \  cfa= 058C
  (  058C  12 05 7A 00 80    )                    ( doVAR        8000 )  doUSER.base.in.ram  @.  RAM.OFFSET @.  +.  ,doVAR*+#
  (  058C  12 05 7A 00 80    )                    \ doLIT    20012100   \  32,'
  \ -------------------------------------------------------------------------------
  (  0592  88 05             )                                                                    \  lfa= 0592
  (  0594  46 64 6F 55 53 45 )    t:  doUSER   (.--.n.)                            compile-only   \  cfa= 059C
  (  059C  D0 83 D0 82 08 +09)                      {doUSER}
  (  05AA  22                )                      ret'
  (  05AB  00                )

     ''  doUSER  >mca
     ''  doUSER  cfa'.of.doUSER*   !.
     :.  doUSER          doUSER'*  ;.









nuc442eF?  @.
#if
\                                  :  (51)          doLIT    20012100    ret
  \ -------------------------------------------------------------------------------
  (  05AC  94 05             )                                                                    \  lfa= 05AC
  (  05AE  03 53 50 30       )     :  SP0    (.--.n.)                                             \  cfa= 05B2
  (  05B2  12 05 9C 08 00    )                      doLIT    20002110
  (  05B7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05B8  AE 05             )                                                                    \  lfa= 05B8
  (  05BA  03 52 50 30       )     :  RP0    (.--.n.)                                             \  cfa= 05BE
  (  05BE  12 05 9C 0A 00    )                      doLIT    20002114
  (  05C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05C4  BA 05             )                                                                    \  lfa= 05C4
  (  05C6  05 27 3F 4B 45 59 )     :  '?KEY   (.--.n.)                                            \  cfa= 05CC
  (  05CC  12 05 9C 0C 00    )                      doLIT    20002118
  (  05D1  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05D2  C6 05             )                                                                    \  lfa= 05D2
  (  05D4  05 27 45 4D 49 54 )     :  'EMIT   (.--.n.)                                            \  cfa= 05DA
  (  05DA  12 05 9C 0E 00    )                      doLIT    2000211C
  (  05DF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05E0  D4 05             )                                                                    \  lfa= 05E0
  (  05E2  07 27 45 58 50 45 )     :  'EXPECT  (.--.n.)                                           \  cfa= 05EA
  (  05EA  12 05 9C 10 00    )                      doLIT    20002120
  (  05EF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05F0  E2 05             )                                                                    \  lfa= 05F0
  (  05F2  04 27 54 41 50    )     :  'TAP     (.--.n.)                                           \  cfa= 05F8
  (  05F8  12 05 9C 12 00    )                      doLIT    20002124
  (  05FD  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05FE  F2 05             )                                                                    \  lfa= 05FE
  (  0600  05 27 45 43 48 4F )     :  'ECHO    (.--.n.)                                           \  cfa= 0606
  (  0606  12 05 9C 14 00    )                      doLIT    20002128
  (  060B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  060C  00 06             )                                                                    \  lfa= 060C
  (  060E  07 27 50 52 4F 4D )     :  'PROMPT  (.--.n.)                                           \  cfa= 0616
  (  0616  12 05 9C 16 00    )                      doLIT    2000212C
  (  061B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  061C  0E 06             )                                                                    \  lfa= 061C
  (  061E  04 42 41 53 45    )     :  BASE     (.--.n.)                                           \  cfa= 0624
  (  0624  12 05 9C 18 00    )                      doLIT    20002130
  (  0629  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  062A  1E 06             )                                                                    \  lfa= 062A
  (  062C  43 74 6D 70       )     :  tmp      (.--.n.)                            compile-only   \  cfa= 0630
  (  0630  12 05 9C 1A 00    )                      doLIT    20002134
  (  0635  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0636  2C 06             )                                                                    \  lfa= 0636
  (  0638  04 53 50 41 4E    )     :  SPAN     (.--.n.)                                           \  cfa= 063E
  (  063E  12 05 9C 1C 00    )                      doLIT    20002138
  (  0643  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0644  38 06             )                                                                    \  lfa= 0644
  (  0646  03 3E 49 4E       )     :  >IN      (.--.n.)                                           \  cfa= 064A
  (  064A  12 05 9C 1E 00    )                      doLIT    2000213C
  (  064F  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  #TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20002140
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  'TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20002144
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  065E  52 06             )                                                                    \  lfa= 065E
  (  0660  03 43 53 50       )     :  CSP      (.--.n.)                                           \  cfa= 0664
  (  0664  12 05 9C 24 00    )                      doLIT    20002148
  (  0669  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  066A  60 06             )                                                                    \  lfa= 066A
  (  066C  05 27 45 56 41 4C )     :  'EVAL    (.--.n.)                                           \  cfa= 0672
  (  0672  12 05 9C 26 00    )                      doLIT    2000214C
  (  0677  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0678  6C 06             )                                                                    \  lfa= 0678
  (  067A  07 27 4E 55 4D 42 )     :  'NUMBER   (.--.n.)                                          \  cfa= 0682
  (  0682  12 05 9C 28 00    )                      doLIT    20002150
  (  0687  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0688  7A 06             )                                                                    \  lfa= 0688
  (  068A  03 48 4C 44       )     :  HLD       (.--.n.)                                          \  cfa= 068E
  (  068E  12 05 9C 2A 00    )                      doLIT    20002154
  (  0693  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0694  8A 06             )                                                                    \  lfa= 0694
  (  0696  07 48 41 4E 44 4C )     :  HANDLER    (.--.n.)                                         \  cfa= 069E
  (  069E  12 05 9C 2C 00    )                      doLIT    20002158
  (  06A3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06A4  96 06             )                                                                    \  lfa= 06A4
  (  06A6  07 43 4F 4E 54 45 )     :  CONTEXT     (.--.n.)                                        \  cfa= 06AE
  (  06AE  12 05 9C 2E 00    )                      doLIT    2000215C
  (  06B3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06B4  A6 06             )                                                                    \  lfa= 06B4
  (  06B6  07 43 55 52 52 45 )     :  CURRENT     (.--.n.)                                        \  cfa= 06BE
  (  06BE  12 05 9C 40 00    )                      doLIT    20002180
  (  06C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06C4  B6 06             )                                                                    \  lfa= 06C4
  (  06C6  02 43 50          )     :  CP          (.--.n.)                                        \  cfa= 06CA
  (  06CA  12 05 9C 44 00    )                      doLIT    20002188
  (  06CF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06D0  C6 06             )                                                                    \  lfa= 06D0
  (  06D2  02 4E 50          )     :  NP          (.--.n.)                                        \  cfa= 06D6
  (  06D6  12 05 9C 46 00    )                      doLIT    2000218C
  (  06DB  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06DC  D2 06             )                                                                    \  lfa= 06DC
  (  06DE  04 4C 41 53 54    )     :  LAST        (.--.n.)                                        \  cfa= 06E4
  (  06E4  12 05 9C 48 00    )                      doLIT    20002190
  (  06E9  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06EA  DE 06             )                                                                    \  lfa= 06EA
  (  06EC  05 66 6F 72 74 68 )     :  fort.       (.--.n.)                                        \  cfa= 06F2
  (  06F2  12 05 9C 4A 00    )                      doLIT    20002194
  (  06F7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06F8  EC 06             )                                                                    \  lfa= 06F8
  (  06FA  05 46 4F 52 54 48 )     :  FORTH       (.--.)                                          \  cfa= 0700
  (  0700  12 06 F2          )                      fort.
  (  0703  12 06 AE          )                      CONTEXT
  (  0706  12 02 06          )                      !
  (  0709  22                )                      RET
  \ -------------------------------------------------------------------------------
#else            
\                                  :  (51)          doLIT    20012100    ret
  \ -------------------------------------------------------------------------------
  (  05AC  94 05             )                                                                    \  lfa= 05AC
  (  05AE  03 53 50 30       )     :  SP0    (.--.n.)                                             \  cfa= 05B2
  (  05B2  12 05 9C 08 00    )                      doLIT    20012110
  (  05B7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05B8  AE 05             )                                                                    \  lfa= 05B8
  (  05BA  03 52 50 30       )     :  RP0    (.--.n.)                                             \  cfa= 05BE
  (  05BE  12 05 9C 0A 00    )                      doLIT    20012114
  (  05C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05C4  BA 05             )                                                                    \  lfa= 05C4
  (  05C6  05 27 3F 4B 45 59 )     :  '?KEY   (.--.n.)                                            \  cfa= 05CC
  (  05CC  12 05 9C 0C 00    )                      doLIT    20012118
  (  05D1  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05D2  C6 05             )                                                                    \  lfa= 05D2
  (  05D4  05 27 45 4D 49 54 )     :  'EMIT   (.--.n.)                                            \  cfa= 05DA
  (  05DA  12 05 9C 0E 00    )                      doLIT    2001211C
  (  05DF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05E0  D4 05             )                                                                    \  lfa= 05E0
  (  05E2  07 27 45 58 50 45 )     :  'EXPECT  (.--.n.)                                           \  cfa= 05EA
  (  05EA  12 05 9C 10 00    )                      doLIT    20012120
  (  05EF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05F0  E2 05             )                                                                    \  lfa= 05F0
  (  05F2  04 27 54 41 50    )     :  'TAP     (.--.n.)                                           \  cfa= 05F8
  (  05F8  12 05 9C 12 00    )                      doLIT    20012124
  (  05FD  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05FE  F2 05             )                                                                    \  lfa= 05FE
  (  0600  05 27 45 43 48 4F )     :  'ECHO    (.--.n.)                                           \  cfa= 0606
  (  0606  12 05 9C 14 00    )                      doLIT    20012128
  (  060B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  060C  00 06             )                                                                    \  lfa= 060C
  (  060E  07 27 50 52 4F 4D )     :  'PROMPT  (.--.n.)                                           \  cfa= 0616
  (  0616  12 05 9C 16 00    )                      doLIT    2001212C
  (  061B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  061C  0E 06             )                                                                    \  lfa= 061C
  (  061E  04 42 41 53 45    )     :  BASE     (.--.n.)                                           \  cfa= 0624
  (  0624  12 05 9C 18 00    )                      doLIT    20012130
  (  0629  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  062A  1E 06             )                                                                    \  lfa= 062A
  (  062C  43 74 6D 70       )     :  tmp      (.--.n.)                            compile-only   \  cfa= 0630
  (  0630  12 05 9C 1A 00    )                      doLIT    20012134
  (  0635  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0636  2C 06             )                                                                    \  lfa= 0636
  (  0638  04 53 50 41 4E    )     :  SPAN     (.--.n.)                                           \  cfa= 063E
  (  063E  12 05 9C 1C 00    )                      doLIT    20012138
  (  0643  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0644  38 06             )                                                                    \  lfa= 0644
  (  0646  03 3E 49 4E       )     :  >IN      (.--.n.)                                           \  cfa= 064A
  (  064A  12 05 9C 1E 00    )                      doLIT    2001213C
  (  064F  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  #TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20012140
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  'TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20012144
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  065E  52 06             )                                                                    \  lfa= 065E
  (  0660  03 43 53 50       )     :  CSP      (.--.n.)                                           \  cfa= 0664
  (  0664  12 05 9C 24 00    )                      doLIT    20012148
  (  0669  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  066A  60 06             )                                                                    \  lfa= 066A
  (  066C  05 27 45 56 41 4C )     :  'EVAL    (.--.n.)                                           \  cfa= 0672
  (  0672  12 05 9C 26 00    )                      doLIT    2001214C
  (  0677  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0678  6C 06             )                                                                    \  lfa= 0678
  (  067A  07 27 4E 55 4D 42 )     :  'NUMBER   (.--.n.)                                          \  cfa= 0682
  (  0682  12 05 9C 28 00    )                      doLIT    20012150
  (  0687  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0688  7A 06             )                                                                    \  lfa= 0688
  (  068A  03 48 4C 44       )     :  HLD       (.--.n.)                                          \  cfa= 068E
  (  068E  12 05 9C 2A 00    )                      doLIT    20012154
  (  0693  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0694  8A 06             )                                                                    \  lfa= 0694
  (  0696  07 48 41 4E 44 4C )     :  HANDLER    (.--.n.)                                         \  cfa= 069E
  (  069E  12 05 9C 2C 00    )                      doLIT    20012158
  (  06A3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06A4  96 06             )                                                                    \  lfa= 06A4
  (  06A6  07 43 4F 4E 54 45 )     :  CONTEXT     (.--.n.)                                        \  cfa= 06AE
  (  06AE  12 05 9C 2E 00    )                      doLIT    2001215C
  (  06B3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06B4  A6 06             )                                                                    \  lfa= 06B4
  (  06B6  07 43 55 52 52 45 )     :  CURRENT     (.--.n.)                                        \  cfa= 06BE
  (  06BE  12 05 9C 40 00    )                      doLIT    20012180
  (  06C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06C4  B6 06             )                                                                    \  lfa= 06C4
  (  06C6  02 43 50          )     :  CP          (.--.n.)                                        \  cfa= 06CA
  (  06CA  12 05 9C 44 00    )                      doLIT    20012188
  (  06CF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06D0  C6 06             )                                                                    \  lfa= 06D0
  (  06D2  02 4E 50          )     :  NP          (.--.n.)                                        \  cfa= 06D6
  (  06D6  12 05 9C 46 00    )                      doLIT    2001218C
  (  06DB  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06DC  D2 06             )                                                                    \  lfa= 06DC
  (  06DE  04 4C 41 53 54    )     :  LAST        (.--.n.)                                        \  cfa= 06E4
  (  06E4  12 05 9C 48 00    )                      doLIT    20012190
  (  06E9  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06EA  DE 06             )                                                                    \  lfa= 06EA
  (  06EC  05 66 6F 72 74 68 )     :  fort.       (.--.n.)                                        \  cfa= 06F2
  (  06F2  12 05 9C 4A 00    )                      doLIT    20012194
  (  06F7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06F8  EC 06             )                                                                    \  lfa= 06F8
  (  06FA  05 46 4F 52 54 48 )     :  FORTH       (.--.)                                          \  cfa= 0700
  (  0700  12 06 F2          )                      fort.
  (  0703  12 06 AE          )                      CONTEXT
  (  0706  12 02 06          )                      !
  (  0709  22                )                      RET
  \ -------------------------------------------------------------------------------
#then

























  \ -------------------------------------------------------------------------------
  (  0962  4E 09             )                                                                    \  lfa= 0962
  (  0964  04 48 45 52 45    )     :  HERE      (.--.n.)                                          \  cfa= 096A
  (  096A  12 06 CA          )                      CP
  (  096D  12 02 1E          )                      @
  (  0970  22                )                      RET
  (  0971  00                )

  \ -------------------------------------------------------------------------------
  (  14FE  F0 14             )                                                                    \  lfa= 14FE
  (  1500  01 2C             )     :  ,          (.n.--.)                                         \  cfa= 1502
  (  1502  12 09 6A          )                      HERE
  (  1505  12 02 E4          )                      DUP
  (  1508  12 04 78          )                      CELL+
  (  150B  12 06 CA          )                      CP
  (  150E  12 02 06          )                      !
  (  1511  12 02 06          )                      !
  (  1514  22                )                      RET
  (  1515  00                )                      
  








                                   t:  IALLOT    (.n.--.)                                         \ cfa=     5F0C
  (  00005F0C  00 B5             )                  push.LR
  (  00005F0E  FE F7 A1 FE       )                  CP                                            \      4C54
  (  00005F12  FF F7 23 FA       )                _ +!                                            \      535C
  (  00005F16  00 BD             )                  ret

   t:  16,   (.n.--.)    push.LR  ,   -2 ...*   IALLOT  ;






  \ -------------------------------------------------------------------------------
  (  0994  86 09             )                                                                    \  lfa= 0994
  (  0996  08 40 45 58 45 43 )     :  @EXECUTE                                                    \  cfa= 09A0
  (  09A0  12 02 1E          )                      @
  (  09A3  12 02 F4          )                      ?DUP
  (  09A6  12 01 C4 AE 09    )   IF               \ ?branch  09AE   \ 09A6 --> 09AE  @@@@@@@@@@@@@@@@@@@@@
  (  09AB  12 01 F6          )                      EXECUTE
                                 THEN                               \ 09A6 --> 09AE  @@@@@@@@@@@@@@@@@@@@@
  (  09AE  22                )                      RET
  (  09AF  00                )
 \ -------------------------------------------------------------------------------

 
  (  0CC0  E6 0B             )                                                                    \  lfa= 0CC0
  (  0CC2  04 3F 4B 45 59    )     :  ?KEY   ( -- f )                                                     \  cfa= 0CC8
  (  0CC8  12 05 CC          )                      '?KEY
  (  0CCB  12 09 A0          )                      @EXECUTE
  (  0CCE  22                )                      RET
  (  0CCF  00                )



  \ -------------------------------------------------------------------------------
  (  0CD0  C2 0C             )                                                                    \  lfa= 0CD0
  (  0CD2  03 4B 45 59       )     :  KEY   ( -- c )                                                       \  cfa= 0CD6
                                 BEGIN                              \ 0CD9 --> 0CD6  *********
  (  0CD6  12 0C C8          )                      ?KEY
  (  0CD9  12 01 C4 D6 0C    )   UNTIL            \ ?branch  0CD6 ) \ 0CD9 --> 0CD6  *********
  (  0CDE  22                )                      RET
  (  0CDF  00                )

nuc442eF?  @.   
#if

t:  ?key    ( -- f )
    {dup}       t=0   R2=4000486c  ( 4000403C )   \ (pb11)
    r0=(r2)     0  0  r:#
    if'=        t-1
    then'       ret'

t:  key    ( -- char )
    {dup}       t=0    R2=4000486c  ( 4000403C )   \ (pb11)
    begin'      r0=(r2)     0  0  r:#
    until'=     4.34us      8
    for'r3      {2*}        8.68us           \ t rrc.r ( t<<1 )
                r0=(r2)     0  0  r:#
       if'=     {1+}  \ t+1
\      else'  \ nop
       then'
    next'r3     3.25us ( 4.34us )  r1=t  t=0   8  for'r0   {2*}  1 rrc.r   if'c=0  {1+}   then'  next'r0  ret'
#then

  \ -------------------------------------------------------------------------------
  (  0CE0  D2 0C             )                                                                    \  lfa= 0CE0
  (  0CE2  04 45 4D 49 54    )     :  EMIT   ( c -- )                                                     \  cfa= 0CE8
  (  0CE8  12 05 DA          )                      'EMIT
  (  0CEB  12 09 A0          )                      @EXECUTE
  (  0CEE  22                )                      RET
  (  0CEF  00                )

  ''  emit     cfa'.of.emit*  !.

  t:  uart.switch.stm32F429.eF   ( -- )          push.LR
      {dup}  t ''  TX! ( emit.stm32F407.eF.PA.3' )  ldri ( r=# )   'emit    !
      {dup}  t ''  ?RX ( ?key.stm32F407.eF.PA.2  )  r=#            '?key    !
      ret
  \ -------------------------------------------------------------------------------
                                    t:  uart.init.stm32F429.eF       \                            cfa= B36
  (  00000B36  00 B5             )                  push.LR
 
  (  00000044  10 48             )                  R0=40023800          \ RCC_BASE               \ (00000088)=40023800
  (  00000046  01 6B             )                  R1=(R0+30)
  (  00000048  41 F0 05 01       )                  R1=R1o5
  (  0000004C  01 63             )                  (R0+30)=R1
  (  0000004E  41 6C             )                  R1=(R0+44)
  (  00000050  41 F0 10 01       )                  R1=R1o10
  (  00000054  41 64             )                  (R0+44)=R1
  (  00000056  0D 48             )                  R0=40020000          \ AHB1PERIPH_BASE        \ (0000008C)=40020000
  (  00000058  01 68             )                  R1=(R0+0)
  (  0000005A  21 F4 70 11       )                  R1=R1n3C0000/
  (  0000005E  41 F4 20 11       )                  R1=R1o280000
  (  00000062  01 60             )                  (r0)=r1
  (  00000064  41 6A             )                  R1=(R0+24)
  (  00000066  21 F4 7F 61       )                  R1=R1nFF0/
  (  0000006A  41 F4 EE 61       )                  R1=R1o770
  (  0000006E  41 62             )                  (R0+24)=R1
  (  00000070  07 48             )                  R0=40011000          \ USART1_BASE            \ (00000090)=40011000
  (  00000072  08 49             )                  R1=0000200C                                   \ (00000094)=0000200C
  (  00000074  81 81             )            8181 16,' \      (R0+18)=R1,h
  (  00000076  8B 21             )                  R1=8B
  (  00000078  01 81             )            8101 16,' \      (R0+10)=R1,h
  (  0000007A  07 48             )                  R0=40020800          \ GPIOC_BASE             \ (00000098)=40020800
  (  0000007C  07 49             )                  R1=02040000                                   \ (0000009C)=02040000
  (  0000007E  01 60             )                  (r0)=r1
  (  00000080  07 49             )                  R1=00001200                                   \ (000000A0)=00001200
  (  00000082  41 61             )                  (R0+14)=R1
\ (  00000084  70 47             )                  ret'                                   \      B0A
                                                    uart.switch.stm32F429.eF
  (  00000B40  00 BD             )                  ret
  \ -------------------------------------------------------------------------------
                                  t:   [push.LR]    push.LR   b500 ...*  16,   ;

  \  R0=5678    R0t=1234    call_R0    full 32 bit range.
  \             123456     rcall_#24

\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  |1 1 1 1|0 i 1 0|1 1 0 0|==imm4=|0 =imm3|===Rd==|=====imm8======|    f2c00000
\  |1 1 1 1|0 i 1 0|1 1 0 0|==imm4=|0 =imm3|0000000|=====imm8======|    f2c00000
\  |1 1 1 1|0 # 1 0|1 1 0 0|# # # #|0 # # #|0000000|# # # # # # # #|    f2c00000    Rt=#
\  |1 1 1 1|0 # 1 0|0 1 0 0|# # # #|0 # # #|0000000|# # # # # # # #|    f2400000     R=#

\  (imm32, carry) = (ZeroExtend(imm4:i:imm3:imm8, 32), APSR.C);
\  original.mnemonic?  off   f2400000  5ci6c4#c3#4r8#:  R=#16

:.  t<<r   t  swap.  r<<r  ;.

                                    t:  lshift   (.n.n.--.n.)                                     \ cfa=     4800
  (  00004800  30 00             )                  r0=t
  (  00004802  40 CF             )                  {drop}
  (  00004804  86 40             )                  T<<R0
  (  00004806  70 47             )                  ret'

\  f2c00000  5ci6c4#c3#4r8#:  Rt=#
\   t:  #24>call  ( 24# -- )
\   t:  #32>call  ( 32# -- )   10000 ...* /mod   {swap}    [R0=#]    {swap}     [R0t=#]   ,call_R0   ;
\   t:  call,,  ( a -- )   cp  {@} witnin.24#?   if   #24>call   else   #32>call   then  ;
\   t:  call,,  ( a -- )   #32>call   ;
\ (  20000A0C  C5 F2 78 60       )                  R0t=5678
\ (  20000A10  41 F2 34 20       )                  R0=1234
\ (  20000A14  CC F6 EF 50       )                  R0t=CDEF
\ (  20000A18  48 F6 AB 10       )                  R0=89AB

   t:  #>(ZeroExtend(imm4:i:imm3:imm8)  (.#.--.32#.)     push.LR   {>r}
       {r@}        0ff ...* {and}                              \ imm8
       {r@}        700 ...* {and}    4 ...* lshift  {+}        \ imm3
       {r@}        800 ...* {and}   0f ...* lshift  {+}        \ i
       {r>}       f000 ...* {and}    4 ...* lshift  {+}     ;  \ imm4

   t:  H<->L   (.12345678.--.56781234.)  push.LR   0 ...* 10000  ...*  um/mod   {swap}    10000 ...*  _ *   {+}     ;

   t:  [R0=#]  (.n.--.)  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2400000 ...*  {+}     H<->L  ,  ;
   t:  [R0t=#] (.n.--.)  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2C00000 ...*  {+}     H<->L  ,  ;


\  t:  call_32#.target  ( 32# -- )  push.LR          10000 ...*   /mod   {swap}          [R0=#] {swap}     [R0t=#] 4780 ...* 16,  ( ,call_R0 )  ;
\  t:  call_32#.target  ( 32# -- )  push.LR  0 ...*  10000 ...* um/mod   {swap}          [R0=#]

   t:  call_32#.target  (.32#.--.)  push.LR  0 ...*  10000 ...* um/mod   {swap}     To1  [R0=#] \ cortex M,  bit0=1
       if't=0    {drop}
       else'     [R0t=#]
       then'     4780 ...* 16,  ( ,call_R0 )  ;
  \ -------------------------------------------------------------------------------
\  24rel.check.cm4.target  (.#.--.#'.)   push.LR   cp @ ( HERE ) ( ALIGNED )  cell+   -   2/    ret
t: 24rel.check.cm4.target  (.#.--.#'.)   push.LR   cp @ ( HERE ) ( ALIGNED )  cell+   -   2/    ret

t: 24#>5..10#2.j.j11#.target   (.24#.--.5,s10#2,j,j11#.)   push.LR   {>r}
         {r@}   00800000 ...* {and}   ( s   )   3 ...*  lshift                                             \  s
         {r@}   00800000 ...* {and}   ( s   )
if#      {r@}   00400000 ...* {and}   ( I1  )   if#  ( s=1 I1=1 )                       2000 ...* {+}    then# \  s=1  J1
         {r@}   00200000 ...* {and}   ( I2  )   if#  ( s=1 I2=1 )                        800 ...* {+}    then# \  s=1  J2
else#    {r@}   00400000 ...* {and}   ( I1  )   if#  ( s=0 I1=1 )  else#  ( s=0 I1=0 )  2000 ...* {+}    then# \  s=0  J1
         {r@}   00200000 ...* {and}   ( I2  )   if#  ( s=0 I2=1 )  else#  ( s=0 I2=0 )   800 ...* {+}    then# \  s=0  J2
then#    {r@}   001ff800 ...* {and}   ( 10# )   5 ...*  lshift  {+}
         {r>}   000007ff ...* {and}   ( 11# )                   {+}     ret

   t:  0~15<->16~31.target  (.n1.--.n2.)  r0=t  r0<<10    r6>>10   ToR0  ret'
\  t:  rcall_24#.target...  ( 24# -- )  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target        f000d000 ...*  {+}  0~15<->16~31.target   ,  ;  \ T1
   t:  rcall_24#.target     (.24#.--.)  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target  To1   f000d000 ...*  {+}  0~15<->16~31.target   ,  ;  \ T1
\  t:  rcall_24#.target     (.24#.--.)  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target  To1   f000c000 ...*  {+}  0~15<->16~31.target   ,  ;  \ T2

   t:  CALL  ( call, )  (.a.--.)  push.LR   {dup}  cp  {@}  -  abs  ffffff ...*  _ <  if#   rcall_24#.target   else#   call_32#.target    then#   ;
\  t:  CALL  ( call, )  (.a.--.)  push.LR   call_32#.target   ;

   :.  CALL_R0     0 CALL_R  ;.
   :.  CALL' ( a' -- )  1+.  0  swap. r=#   call_r0  ;. \ '' Get_Key_Input call'
   \ -------------------------------------------------------------------------------
  (  1562  46 15             )                                                                    \  lfa= 1562
  (  1564  87 4C 49 54 45 52 )     :  LITERAL   (.n.--.)              immediate                   \  cfa= 156C
  (  156C  12 01 7C 7C 01    )                    ( doLIT    017C )   cfa'.of.doLIT*  ,doLIT*+(#)
  (  1571  12 17 DA          )                      CALL
  (  1574  12 15 02          )                      ,
  (  1577  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1578  64 15             )                                                                    \  lfa= 1578
  (  157A  03 24 2E 22       )     :  $."                                                         \  cfa= 157E
  (  157E  12 01 7C 22 00    )                      doLIT    0022
  (  1583  12 0F C8          )                    _ WORD
  (  1586  12 09 54          )                    _ COUNT
  (  1589  12 03 D2          )                      +        ALIGNED    \ ????????
  (  158C  12 06 CA          )                      CP
  (  158F  12 02 06          )                      !
  (  1592  22                )                      RET
  (  1593  00                )
  \ -------------------------------------------------------------------------------
  (  1594  7A 15             )                                                                    \  lfa= 1594
  (  1596  87 52 45 43 55 52 )     :  RECURSE     (.--.)              immediate                   \  cfa= 159E
  (  159E  12 06 E4          )                      LAST
  (  15A1  12 02 1E          )                      @
  (  15A4  12 0F DA          )                    _ NAME>
  (  15A7  12 15 02          )                      ,
  (  15AA  22                )                      RET
  (  15AB  00                )
  \ -------------------------------------------------------------------------------
  (  15AC  96 15             )                                                                    \  lfa= 15AC
  (  15AE  83 46 4F 52       )     :  FOR         (.--.)              immediate                   \  cfa= 15B2
  (  15B2  12 01 7C 54 02    )                    ( doLIT    0254 )   cfa'.of.>R*  ,doLIT*+(#)
  (  15B7  12 17 DA          )                      CALL
  (  15BA  12 09 6A          )                      HERE
  (  15BD  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  15BE  AE 15             )                                                                    \  lfa= 15BE
  (  15C0  85 42 45 47 49 4E )     :  BEGIN                           immediate                   \  cfa= 15C6
  (  15C6  12 09 6A          )                      HERE
  (  15C9  22                )                      RET

\ ''  begin   cfa'.of.begin*  !.
  \ -------------------------------------------------------------------------------


  (  15CA  C0 15             )                                                                    \  lfa= 15CA
  (  15CC  84 4E 45 58 54    )     :  NEXT                            immediate                   \  cfa= 15D2
  (  15D2  12 01 7C 96 01    )                    ( doLIT    0196 )   cfa'.of.nex.*  ,doLIT*+(#)
  (  15D7  12 17 DA          )                      CALL
  (  15DA  12 15 02          )                      ,
  (  15DD  22                )                      RET


cortex.m0?  @.
#if
                                    :{  {nex:}
  (  00000188  15 68             )             w rp  r=(r)   \     W=(RP)
                                               w 1   r-#
  (  0000018A  2D 00             )             w 0   r:#     \     W=W<<0,s
  (  0000018C  04 D1             )        if'-    \ z=0? ne?            \ 0000018C --> 00000198 +++++++++  -  N=1 OK BUT??
  (  0000018E  02 F1 04 02       )                  RP+4
  (  00000192  0E F1 04 0E       )                  LR+4
  (  00000196  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                          then'                  \   0000018C --> 00000198 +++++++++
                                                0  rp  r=r    0  w   (r)=r
                                                0  lr  r=r    0  1   r-#   0  0  r=(r)
                                                0  1   Ro#    lr 0   r=r
                                    };


:.  V    00000000  ;.

:.  V=RP     V   RP   R=R     ;.
:.  W=(V)    W   V    R=(R)   ;.
:.  W-1      W   1    R-#     ;.
:.  W:0      W   0    R:#     ;.
:.  V=4      V   4    R=#     ;.
:.  RP+V     RP  V    R+R     ;.
:.  LR+V     LR  V    R+R     ;.
:.  LR=V     LR  V    R=R     ;.
:.  [V]=W    V   W    (R)=R   ;.
:.  V=LR     V   LR   R=R     ;.
:.  V-1      V   1    R-#     ;.
:.  V+1      V   1    R+#     ;.
:.  V=(V)    V   V    R=(R)   ;.


                                    :{  {nex:}                                                  \ cfa= 200034FC
  (  200034FC  68 46             )                  V=RP
  (  200034FE  05 68             )                  W=(V)                                                     \
  (  20003500  01 3D             )                  W-1
  (  20003502  00 2D             )                  W:0                                                         \
  (  20003504  04 D5             )      if'- \ n=0? pl?              \ 20003504 --> 20003510 ===========================
  (  20003506  04 20             )                  V=4
  (  20003508  85 44             )                  RP+V
\ (  2000350A  04 20             )              \   V=4
  (  2000350C  86 44             )                  LR+V
  (  2000350E  70 47             )                  ret'
                                        then'                        \ 20003504 --> 20003510 ===========================
  (  20003510  68 46             )              \   V=RP
  (  20003512  05 60             )                  [V]=W                                                     \
  (  20003514  70 46             )                  V=LR
  (  20003516  01 38             )                  V-1
  (  20003518  00 68             )                  V=(V)                                                     \
  (  2000351A  01 21             )              \   X=1
  (  2000351C  08 43             )              \   VoX
                                                    V+1
  (  2000351E  86 46             )                  LR=V
                                     };

#else

                                    :{  {nex:}
  (  00000188  15 68             )             w rp  r=(r)   \     W=(RP)
                                               w 1   r-#
  (  0000018A  2D 00             )             w 0   r:#     \     W=W<<0,s
  (  0000018C  04 D1             )        if'-    \ z=0? ne?            \ 0000018C --> 00000198 +++++++++  -  N=1 OK BUT??
  (  0000018E  02 F1 04 02       )                  RP+4
  (  00000192  0E F1 04 0E       )                  LR+4
  (  00000196  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                          then'                  \   0000018C --> 00000198 +++++++++
  (  0000019C  15 60             )              rp w   (r)=r     \   (RP)=W
                                                lr 1   r-#     lr lr r=(r)
  (  000001A2  4E F0 01 0E       )              lr 1   Ro#       \   LRo1
                                    };
#then


                                  t:  nex:     {nex:}    ret'      '' nex:   cfa'.of.nex.*  !.

  (  15CA  C0 15             )                                                                    \  lfa= 15CA
  (  15CC  84 4E 45 58 54    )     :  NEXT                            immediate                   \  cfa= 15D2
  (  15D2  12 01 7C 96 01    )                    ( doLIT    0196 )   cfa'.of.nex.*  ,doLIT*+(#)
  (  15D7  12 17 DA          )                      CALL
  (  15DA  12 15 02          )                      ,
  (  15DD  22                )                      RET


:.  next   0  '' nex.   1+.   ldri    0  call_r    n=0?   ;.

:.  NEXT,     1>   NEXT   ;.     :.  NEXT,,   2>   NEXT  ;.   :.  NEXT,,,   3>   NEXT  ;.  :.  NEXT,,,,   4>   NEXT  ;.   :.  NEXT,,,,,  5>   NEXT  ;.
  \ -------------------------------------------------------------------------------
  (  15DE  CC 15             )                                                                    \  lfa= 15DE
  (  15E0  85 55 4E 54 49 4C )     :  UNTIL                           immediate                   \  cfa= 15E6
  (  15E6  12 01 7C C4 01    )                    ( doLIT    01C4 )   cfa'.of.?branch*  ,doLIT*+(#)
  (  15EB  12 17 DA          )                      CALL
  (  15EE  12 15 02          )                      ,
  (  15F1  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  15F2  E0 15             )                                                                    \  lfa= 15F2
  (  15F4  85 41 47 41 49 4E )     :  AGAIN                           immediate                   \  cfa= 15FA
  (  15FA  12 01 7C E0 01    )                    ( doLIT    01E0 )   cfa'.of.branch*  ,doLIT*+(#)
  (  15FF  12 17 DA          )                      CALL
  (  1602  12 15 02          )                      ,
  (  1605  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1606  F4 15             )                                                                    \  lfa= 1606
  (  1608  82 49 46          )     :  IF                              immediate                   \  cfa= 160C
  (  160C  12 01 7C C4 01    )                    ( doLIT    01C4 )   cfa'.of.?branch*  ,doLIT*+(#)
  (  1611  12 17 DA          )                      CALL
  (  1614  12 09 6A          )                      HERE
  (  1617  12 08 6C          )                      0
  (  161A  12 15 02          )                      ,
  (  161D  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  161E  08 16             )                                                                    \  lfa= 161E
  (  1620  85 41 48 45 41 44 )     :  AHEAD                           immediate                   \  cfa= 1626
  (  1626  12 01 7C E0 01    )                    ( doLIT    01E0 )   cfa'.of.branch*  ,doLIT*+(#)
  (  162B  12 17 DA          )                      CALL
  (  162E  12 09 6A          )                      HERE
  (  1631  12 08 6C          )                      0
  (  1634  12 15 02          )                      ,
  (  1637  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1638  20 16             )                                                                    \  lfa= 1638
  (  163A  86 52 45 50 45 41 )     :  REPEAT                          immediate                   \  cfa= 1642
  (  1642  12 15 FA          )                      AGAIN
  (  1645  12 09 6A          )                      HERE
  (  1648  12 03 12          )                      SWAP
  (  164B  12 02 06          )                      !
  (  164E  22                )                      RET
  (  164F  00                )                      
  \ -------------------------------------------------------------------------------
  (  1650  3A 16             )                                                                    \  lfa= 1650
  (  1652  84 54 48 45 4E    )     :  THEN                            immediate                   \  cfa= 1658
  (  1658  12 09 6A          )                      HERE
  (  165B  12 03 12          )                      SWAP
  (  165E  12 02 06          )                      !
  (  1661  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1662  52 16             )                                                                    \  lfa= 1662
  (  1664  83 41 46 54       )     :  AFT                             immediate                   \  cfa= 1668
  (  1668  12 03 02          )                      DROP
  (  166B  12 16 26          )                      AHEAD
  (  166E  12 15 C6          )                      BEGIN
  (  1671  12 03 12          )                      SWAP
  (  1674  22                )                      RET
  (  1675  00                )                      
  \ -------------------------------------------------------------------------------
  (  1676  64 16             )                                                                    \  lfa= 1676
  (  1678  84 45 4C 53 45    )     :  ELSE                            immediate                   \  cfa= 167E
  (  167E  12 16 26          )                      AHEAD
  (  1681  12 03 12          )                      SWAP
  (  1684  12 16 58          )                      THEN
  (  1687  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1688  78 16             )                                                                    \  lfa= 1688
  (  168A  85 57 48 49 4C 45 )     :  WHILE                           immediate                   \  cfa= 1690
  (  1690  12 16 0C          )                      IF
  (  1693  12 03 12          )                      SWAP
  (  1696  22                )                      RET
  (  1697  00                )
  \ -------------------------------------------------------------------------------
:.  AHEAD     ,call.branch*   here'  0000  32,'  ;.
:.  IF        ,call.?branch*  here'  0000  32,'  ;.
:.  ELSE      ,call.branch*   here'  0000  32,'  here'  rot.  32!'  ;.
:.  THEN      here'    swap.               32!'  ;.

:.  BEGIN     BEGIN'                ;.
:.  AGAIN     ,call.branch*   32,'  ;.
:.  UNTIL     ,call.?branch*  32,'  ;.
:.  WHILE     IF                    ;.    :.  REPEAT    SWAP.  AGAIN   THEN   ;.
\   WHILE     IF      SWAP.         ;.    :.  REPEAT           AGAIN   THEN   ;.

:.  ahead   traditional.structure?  @.  if.  ,call.branch*   here'  0000  32,'                      else.  ahead'                       then.  ;.
:.  if      traditional.structure?  @.  if.  ,call.?branch*  here'  0000  32,'                      else.  t:0  {DROP}  if'<>           then.  ;.
:.  else    traditional.structure?  @.  if.  ,call.branch*   here'  0000  32,'  here'  rot.  32!'   else.  else'                        then.  ;.
:.  then    traditional.structure?  @.  if.   here'   swap.  32!'                                   else.  then'                        then.  ;.
:.  again   traditional.structure?  @.  if.  ,call.branch*   32,'                                   else.  again'                       then.  ;.
:.  until   traditional.structure?  @.  if.  ,call.?branch*  32,'                                   else.  t:0  {DROP}  until'<>        then.  ;.
:.  while   if   ;.
:.  repeat  traditional.structure?  @.  if.   SWAP.  AGAIN  THEN                                    else.  swap.    again'  then'       then.  ;.



:.  IF,             IF     >1   ;.
:.  ELSE,           AHEAD   1>  THEN   >1  ;.
:.  THEN,       1>  THEN        ;.
:.  BEGIN,          BEGIN  >1   ;.
:.  AGAIN,      1>  AGAIN       ;.
:.  UNTIL,      1>  UNTIL       ;.
\   WHILE,          WHILE  >1   ;.
:.  WHILE,      1>  IF          ;.
:.  REPEAT,     1>  REPEAT      ;.

:.  IF,,            IF     >2   ;.
:.  ELSE,,          AHEAD   2>  THEN  >2  ;.
:.  THEN,,      2>  THEN        ;.
:.  BEGIN,,         BEGIN  >2   ;.
:.  AGAIN,,     2>  AGAIN       ;.
:.  UNTIL,,     2>  UNTIL       ;.
\   WHILE,,         WHILE  >2   ;.
:.  WHILE,,     2>  IF          ;.
:.  REPEAT,,    2>  REPEAT      ;.

:.  IF,,,           IF     >3   ;.
:.  ELSE,,,         AHEAD   3>  THEN  >3  ;.
:.  THEN,,,     3>  THEN        ;.
:.  BEGIN,,,        BEGIN  >3   ;.
:.  AGAIN,,,    3>  AGAIN       ;.
:.  UNTIL,,,    3>  UNTIL       ;.
\   WHILE,,,        WHILE  >3   ;.
:.  WHILE,,,    3>  IF          ;.
:.  REPEAT,,,   3>  REPEAT      ;.

:.  IF,,,,          IF     >4   ;.
\   ELSE,,,,        ELSE        ;.  \ ????????
:.  ELSE,,,,        AHEAD   4>  THEN  >4  ;.
:.  THEN,,,,    4>  THEN        ;.
:.  BEGIN,,,,       BEGIN  >4   ;.
:.  AGAIN,,,,   4>  AGAIN       ;.
:.  UNTIL,,,,   4>  UNTIL       ;.
\   WHILE,,,,       WHILE  >4   ;.
:.  WHILE,,,,   4>  IF          ;.
:.  REPEAT,,,,  4>  REPEAT      ;.

:.  IF,,,,,         IF     >5   ;.
\   ELSE,,,,,       ELSE        ;.
:.  ELSE,,,,,       AHEAD   5>  THEN  >5  ;.
:.  THEN,,,,,   5>  THEN        ;.
:.  BEGIN,,,,,      BEGIN  >5   ;.
:.  AGAIN,,,,,  5>  AGAIN       ;.
:.  UNTIL,,,,,  5>  UNTIL       ;.
\   WHILE,,,,,      WHILE  >5   ;.
:.  WHILE,,,,,  5>  IF          ;.
:.  REPEAT,,,,, 5>  REPEAT      ;.

:.  AHEAD,          AHEAD  >1   ;.
:.  AHEAD,,         AHEAD  >2   ;.
:.  AHEAD,,,        AHEAD  >3   ;.
:.  AHEAD,,,,       AHEAD  >4   ;.
:.  AHEAD,,,,,      AHEAD  >5   ;.

:.  FOR        >R   here'  ( begin  )  ;.


  (  070A  FA 06             )                                                                    \  lfa= 070A
  (  070C  01 3C             )     :  <       (.n.n.--.f.)                                        \  cfa= 070E
  (  070E  12 03 BC          )                      2DUP
  (  0711  12 03 6C          )                      XOR
  (  0714  12 03 3A          )                      0<
  (  0717  12 01 C4 23 07    )   IF               \ ?branch  0723   \ 0717 --> 0723  *********
  (  071C  12 03 02          )                      DROP
  (  071F  12 03 3A          )                      0<
  (  0722  22                )                      RET
                                 THEN                               \ 0717 --> 0723  *********
  (  0723  12 03 E2          )                      -
  (  0726  12 03 3A          )                      0<
  (  0729  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  072A  0C 07             )                                                                    \  lfa= 072A
  (  072C  03 4D 41 58       )     :  MAX     (.n.n.--.n.)                                        \  cfa= 0730
  (  0730  12 03 BC          )                      2DUP
  (  0733  12 07 0E          )                      <
  (  0736  12 01 C4 3E 07    )   IF               \ ?branch  073E   \ 0736 --> 073E  ===============
  (  073B  12 03 12          )                      SWAP
                                 THEN                               \ 0736 --> 073E  ===============
  (  073E  12 03 02          )                      DROP
  (  0741  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0742  2C 07             )                                                                    \  lfa= 0742
  (  0744  03 4D 49 4E       )     :  MIN     (.n.n.--.n.)                                        \  cfa= 0748
  (  0748  12 03 BC          )                      2DUP
  (  074B  12 03 12          )                      SWAP
  (  074E  12 07 0E          )                      <
  (  0751  12 01 C4 59 07    )   IF               \ ?branch  0759   \ 0751 --> 0759  *********
  (  0756  12 03 12          )                      SWAP
                                 THEN                               \ 0751 --> 0759  *********
  (  0759  12 03 02          )                      DROP
  (  075C  22                )                      RET
  (  075D  00                )
  \ -------------------------------------------------------------------------------
  (  075E  44 07             )                                                                    \  lfa= 075E
  (  0760  06 57 49 54 48 49 )     :  WITHIN    (.n.n.n.--.f.)                                    \  cfa= 0768
  (  0768  12 03 24          )                      OVER
  (  076B  12 03 E2          )                      -
  (  076E  12 02 54          )                      >R
  (  0771  12 03 E2          )                      -
  (  0774  12 02 84          )                      R>
  (  0777  12 04 60          )                      U<
  (  077A  22                )                      RET
  (  077B  00                )                      
  \ -------------------------------------------------------------------------------
  (  077C  60 07             )                                                                    \  lfa= 077C
  (  077E  05 4D 2F 4D 4F 44 )     :  M/MOD     (.n.n.n.--.n.n.)                                  \  cfa= 0784
  (  0784  12 02 E4          )                      DUP
  (  0787  12 03 3A          )                      0<
  (  078A  12 02 E4          )                      DUP
  (  078D  12 02 54          )                      >R
  (  0790  12 01 C4 A1 07    )   IF               \ ?branch  07A1   \ 0790 --> 07A1  ===============
  (  0795  12 04 08          )                      NEGATE
  (  0798  12 02 54          )                      >R
  (  079B  12 04 32          )                      DNEGATE
  (  079E  12 02 84          )                      R>
                                 THEN                               \ 0790 --> 07A1  ===============
  (  07A1  12 02 54          )                      >R
  (  07A4  12 02 E4          )                      DUP
  (  07A7  12 03 3A          )                      0<
  (  07AA  12 01 C4 B5 07    )   IF               \ ?branch  07B5   \ 07AA --> 07B5  ------
  (  07AF  12 02 6A          )                      R@
  (  07B2  12 03 D2          )                      +
                                 THEN                               \ 07AA --> 07B5  ------
  (  07B5  12 02 84          )                      R>
  (  07B8  12 04 FE          )                      UM/MOD
  (  07BB  12 02 84          )                      R>
  (  07BE  12 01 C4 CC 07    )   IF               \ ?branch  07CC   \ 07BE --> 07CC  *********
  (  07C3  12 03 12          )                      SWAP
  (  07C6  12 04 08          )                      NEGATE
  (  07C9  12 03 12          )                      SWAP
                                 THEN                               \ 07BE --> 07CC  *********
  (  07CC  22                )                      RET
  (  07CD  00                )                      
  \ -------------------------------------------------------------------------------
  (  07CE  7E 07             )                                                                    \  lfa= 07CE
  (  07D0  04 2F 4D 4F 44    )     :  /MOD     (.n.n.--.n.n.)                                     \  cfa= 07D6
  (  07D6  12 03 24          )                      OVER
  (  07D9  12 03 3A          )                      0<
  (  07DC  12 03 12          )                      SWAP
  (  07DF  12 07 84          )                      M/MOD
  (  07E2  22                )                      RET
  (  07E3  00                )
  \ -------------------------------------------------------------------------------
  (  07E4  D0 07             )                                                                    \  lfa= 07E4
  (  07E6  03 4D 4F 44       )     :  MOD      (.n.n.--.n.)                                       \  cfa= 07EA
  (  07EA  12 07 D6          )                      /MOD
  (  07ED  12 03 02          )                      DROP
  (  07F0  22                )                      RET
  (  07F1  00                )                      
  \ -------------------------------------------------------------------------------
  (  07F2  E6 07             )                                                                    \  lfa= 07F2
  (  07F4  01 2F             )     :  /        (.n.n.--.n.)                                       \  cfa= 07F6
  (  07F6  12 07 D6          )                      /MOD
  (  07F9  12 03 12          )                      SWAP
  (  07FC  12 03 02          )                      DROP
  (  07FF  22                )                      RET
  \ -------------------------------------------------------------------------------

cortex.m0?  @.
#if
: UM*  ( u1 u2 -- ud )
  0   SWAP   ( u1 0 u2 )   1F   \ 15 = 0f
  FOR    DUP  UM+  >R >R   DUP    UM+  R> +  R>
    IF                >R   OVER   UM+  R> +
    THEN
  NEXT   ROT  DROP  ;
#ELSE
  \ -------------------------------------------------------------------------------
                                   :{  {um*}                                                \ cfa=     52AC
  (  000052AC  38 68             )                  R0=s
  (  000052AE  A0 FB 06 06       )                  umull_T,R0,T,T
  (  000052B2  38 60             )                  s=R0
  (  000052B4  70 47             )                  };

                                        t:  um*   (.n.n.--.d.)       {um*}                     \ cfa=     52AC
  (  000052B4  70 47             )                  ret'
  (  000052B6  00 BF             )
#THEN
  \ -------------------------------------------------------------------------------
  (  0800  F4 07             )                                                                    \  lfa= 0800
  (  0802  01 2A             )     :  *        (.n.n.--.n.)                                       \  cfa= 0804
  (  0804  12 05 40          )                      UM*
  (  0807  12 03 02          )                      DROP
  (  080A  22                )                      RET
  (  080B  00                )
  \ -------------------------------------------------------------------------------
  (  080C  02 08             )                                                                    \  lfa= 080C
  (  080E  02 4D 2A          )     :  M*        (.n.n.--.n.n.)                                    \  cfa= 0812
  (  0812  12 03 BC          )                      2DUP
  (  0815  12 03 6C          )                      XOR
  (  0818  12 03 3A          )                      0<
  (  081B  12 02 54          )                      >R
  (  081E  12 04 16          )                      ABS
  (  0821  12 03 12          )                      SWAP
  (  0824  12 04 16          )                      ABS
  (  0827  12 05 40          )                      UM*
  (  082A  12 02 84          )                      R>
  (  082D  12 01 C4 35 08    )   IF               \ ?branch  0835   \ 082D --> 0835  ------
  (  0832  12 04 32          )                      DNEGATE
                                 THEN                               \ 082D --> 0835  ------
  (  0835  22                )                      RET       
  \ -------------------------------------------------------------------------------
  (  0836  0E 08             )                                                                    \  lfa= 0836
  (  0838  05 2A 2F 4D 4F 44 )     :  */MOD      (.n.n.n.--.n.n.)                                 \  cfa= 083E
  (  083E  12 02 54          )                      >R
  (  0841  12 08 12          )                      M*
  (  0844  12 02 84          )                      R>
  (  0847  12 07 84          )                      M/MOD
  (  084A  22                )                      RET
  (  084B  00                )
  \ -------------------------------------------------------------------------------
  (  084C  38 08             )                                                                    \  lfa= 084C
  (  084E  02 2A 2F          )     :  */       (.n.n.n.--.n.)                                     \  cfa= 0852
  (  0852  12 08 3E          )                      */MOD
  (  0855  12 03 12          )                      SWAP
  (  0858  12 03 02          )                      DROP
  (  085B  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  085C  4E 08             )                                                                    \  lfa= 085C
  (  085E  02 42 4C          )     :  BL       (.--.n.)                                           \  cfa= 0862
  (  0862  12 01 7C 20 00    )                      doLIT    0020
  (  0867  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  0868  5E 08             )                                                                    \  lfa= 0868
  (  086A  01 30             )     :  0                                                           \  cfa= 086C
  (  086C  08 A6 02 08 A6 03 )                      {dup}
  (  0872  7A 00             )                      TL=0
  (  0874  AB 02             )                  `   R3=R2
  (  0876  22                )                      RET
  (  0877  00                )                      
  \ -------------------------------------------------------------------------------
  (  0878  6A 08             )                                                                    \  lfa= 0878
  (  087A  01 31             )     :  1                                                           \  cfa= 087C
  (  087C  08 A6 02 08 A6 03 )                      {dup}
  (  0882  7A 01             )                  `   R2=1
  (  0884  7B 00             )                      TH=0
  (  0886  22                )                      RET
  (  0887  00                )
  \ -------------------------------------------------------------------------------
  (  0888  7A 08             )                                                                    \  lfa= 0888
  (  088A  01 32             )     :  2                                                           \  cfa= 088C
  (  088C  08 A6 02 08 A6 03 )                      {dup}
  (  0892  7A 02             )                  `   R2=2
  (  0894  7B 00             )                      TH=0
  (  0896  22                )                      RET
  (  0897  00                )                      
  \ -------------------------------------------------------------------------------
  (  0898  8A 08             )                                                                    \  lfa= 0898
  (  089A  02 2D 31          )     :  -1                                                          \  cfa= 089E
  (  089E  08 A6 02 08 A6 03 )                      {dup}
  (  08A4  7A FF             )                  `   R2=0FF
  (  08A6  AB 02             )                  `   R3=R2
  (  08A8  22                )                      RET
  (  08A9  00                )
comment;
  \ -------------------------------------------------------------------------------
  (  08AA  9A 08             )                                                                    \  lfa= 08AA
  (  08AC  05 3E 43 48 41 52 )     :  >CHAR       (.n.--.n.)                                      \  cfa= 08B2
  (  08B2  12 01 7C 7F 00    )                      doLIT    007F
  (  08B7  12 03 4C          )                      AND
  (  08BA  12 02 E4          )                      DUP
  (  08BD  12 01 7C 7F 00    )                      doLIT    007F
  (  08C2  12 08 62          )                      BL
  (  08C5  12 07 68          )                      WITHIN
  (  08C8  12 01 C4 D5 08    )   IF               \ ?branch  08D5   \ 08C8 --> 08D5  ------
  (  08CD  12 03 02          )                      DROP
  (  08D0  12 01 7C 5F 00    )                      doLIT    005F
                                 THEN                               \ 08C8 --> 08D5  ------
  (  08D5  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  08D6  AC 08             )                                                                  \  lfa= 08D6
  (  08D8  05 44 45 50 54 48 )     :  DEPTH       (.--.n.)                                      \  cfa= 08DE
  (  08DE  12 02 C2          )                 \    SP@              \ stack growing toward higher address
  (  08E1  12 05 B2          )                      SP0
  (  08E4  12 02 1E          )                      @       SP@  \ stack growing toward higher address in 8051
  (  08E7  12 03 E2          )                      -
  (  08EA  12 04 C6          )                      cell/ \ abs  \ stack growing toward  lower address in stm32F407
  (  08ED  22                )                      RET
  \ -------------------------------------------------------------------------------

  (  08EE  D8 08             )                                                                    \  lfa= 08EE
  (  08F0  04 50 49 43 4B    )   t:  PICK   (.n.n.--.n.)          {pick}                          \  cfa= 08F6
  (  0904  22                )                      RET'
  (  0905  00                )                                
  \ -------------------------------------------------------------------------------
  (  0906  F0 08             )                                                                    \  lfa= 0906
  (  0908  02 2B 21          )    t:  +!    (.n.a.--.)           {+!}   ret'                      \  cfa= 090C
  \ -------------------------------------------------------------------------------
  (  0920  08 09             )                                                                    \  lfa= 0920
  (  0922  02 32 21          )     :  2!    (.n.n.a.--.)                                          \  cfa= 0926
  (  0926  12 03 12          )                      SWAP
  (  0929  12 03 24          )                      OVER
  (  092C  12 02 06          )                      !
  (  092F  12 04 78          )                      CELL+
  (  0932  12 02 06          )                      !
  (  0935  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0936  22 09             )                                                                    \  lfa= 0936
  (  0938  02 32 40          )     :  2@        (.a.--.n.n.)                                      \  cfa= 093C
  (  093C  12 02 E4          )                      DUP
  (  093F  12 04 78          )                      CELL+
  (  0942  12 02 1E          )                      @
  (  0945  12 03 12          )                      SWAP
  (  0948  12 02 1E          )                      @
  (  094B  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  094C  38 09             )                                                                    \  lfa= 094C
  (  094E  05 43 4F 55 4E 54 )     :  COUNT     (.a.--.a+1.len.)                                                   \  cfa= 0954
  (  0954  12 02 E4          )                      DUP
  (  0957  12 04 A8          )                      1+
  (  095A  12 03 12          )                      SWAP
  (  095D  12 02 44          )                      C@
  (  0960  22                )                      RET
  (  0961  00                )








  \ -------------------------------------------------------------------------------
  (  0972  64 09             )                                                                    \  lfa= 0972
  (  0974  03 50 41 44       )     :  PAD       (.--.here+100.)                                   \  cfa= 0978
  (  0978  12 09 6A          )                      HERE
  (  097B  12 01 7C 00 01    )                      doLIT    0100
  (  0980  12 03 D2          )                      +
  (  0983  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0984  74 09             )                                                                    \  lfa= 0984
  (  0986  03 54 49 42       )     :  TIB       (.--.a.)                                          \  cfa= 098A
  (  098A  12 06 58          )                      #TIB
  (  098D  12 04 78          )                      CELL+
  (  0990  12 02 1E          )                      @
  (  0993  22                )                      RET

nuc442eF?  @.
#if   nuc453eF?  @.
  #if    20007080
  #else  20008080
  #then            content.of.'tib*    !.
#else    20018080  content.of.'tib*    !.
#then
stm32f103? @.
#if      20004E80  content.of.'tib*    !.
#then

  \ -------------------------------------------------------------------------------
  :.  ahead,    branch   here'  >1   0000 32,'  ;.

  (  09B0  96 09             )                                                                    \  lfa= 09B0
  (  09B2  05 43 4D 4F 56 45 )     :  CMOVE   ( b b u -- )                                                    \  cfa= 09B8
  (  09B8  12 02 54          )                      >R
  (  09BB  12 01 E0 D8 09    )   AHEAD,           \ branch   09D8   \ 09BB --> 09D8  @@@@@@@@@@@@@@@@@@@@@
                                   BEGIN                            \ 09D8 --> 09C0  ===============
  (  09C0  12 02 54          )                      >R
  (  09C3  12 02 E4          )                      DUP
  (  09C6  12 02 44          )                      C@
  (  09C9  12 02 6A          )                      R@
  (  09CC  12 02 2E          )                      C!
  (  09CF  12 04 A8          )                      1+
  (  09D2  12 02 84          )                      R>
  (  09D5  12 04 A8          )                      1+
                                 THEN,                              \ 09BB --> 09D8  @@@@@@@@@@@@@@@@@@@@@
  (  09D8  12 01 96 C0 09    )     NEXT           \ nex.      09C0  \ 09D8 --> 09C0  ===============
  (  09DD  12 03 AA          )                      2DROP
  (  09E0  22                )                      RET
  (  09E1  00                )
  \ -------------------------------------------------------------------------------
  (  09E2  B2 09             )                                                                    \  lfa= 09E2
  (  09E4  04 46 49 4C 4C    )     :  FILL  ( b u c -- )                                                      \  cfa= 09EA
  (  09EA  12 03 12          )                      SWAP
  (  09ED  12 02 54          )                      >R
  (  09F0  12 03 12          )                      SWAP
  (  09F3  12 01 E0 01 0A    )   AHEAD,           \ branch   0A01   \ 09F3 --> 0A01  !!!!!!!!!!!!!!!!!!
                                   BEGIN                            \ 0A01 --> 09F8  ////////////
  (  09F8  12 03 BC          )                      2DUP
  (  09FB  12 02 2E          )                      C!
  (  09FE  12 04 A8          )                      1+
                                 THEN,                              \ 09F3 --> 0A01  !!!!!!!!!!!!!!!!!!
  (  0A01  12 01 96 F8 09    )   NEXT             \ nex.     09F8   \ 0A01 --> 09F8  ////////////
  (  0A06  12 03 AA          )                      2DROP
  (  0A09  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0A0A  E4 09             )                                                                    \  lfa= 0A0A
  (  0A0C  09 2D 54 52 41 49 )     :  -TRAILING  ( b u -- b u )                                                 \  cfa= 0A16
  (  0A16  12 02 54          )                      >R
  (  0A19  12 01 E0 3C 0A    )   AHEAD,           \ branch   0A3C   \ 0A19 --> 0A3C  ===============
                                   BEGIN                            \ 0A3C --> 0A1E  *********
  (  0A1E  12 08 62          )                      BL
  (  0A21  12 03 24          )                      OVER
  (  0A24  12 02 6A          )                      R@
  (  0A27  12 03 D2          )                      +
  (  0A2A  12 02 44          )                      C@
  (  0A2D  12 07 0E          )                      <
  (  0A30  12 01 C4 3C 0A    )       IF           \ ?branch  0A3C   \ 0A30 --> 0A3C  @@@@@@@@@@@@@@@@@@@@@
  (  0A35  12 02 84          )                      R>
  (  0A38  12 04 A8          )                      1+
  (  0A3B  22                )                      RET
                                     THEN                           \ 0A30 --> 0A3C  @@@@@@@@@@@@@@@@@@@@@
                                 THEN,                              \ 0A19 --> 0A3C  ===============
  (  0A3C  12 01 96 1E 0A    )     NEXT           \ nex.     0A1E   \ 0A3C --> 0A1E  *********
  (  0A41  12 08 6C          )                      0000  ...*
  (  0A44  22                )                      RET
  (  0A45  00                )                      
  \ -------------------------------------------------------------------------------
comment:
  (  0A46  0C 0A             )                                                                    \  lfa= 0A46
  (  0A48  05 50 41 43 4B 24 )     :  PACK$   ( b u a -- a )                                                   \  cfa= 0A4E
  (  0A4E  12 04 DC          )                      ALIGNED
  (  0A51  12 02 E4          )                      DUP
  (  0A54  12 02 54          )                      >R
  (  0A57  12 03 24          )                      OVER
  (  0A5A  12 02 E4          )                      DUP
  (  0A5D  12 08 7C          )                      1
  (  0A60  12 03 4C          )                      AND
  (  0A63  12 03 E2          )                      -
  (  0A66  12 03 24          )                      OVER
  (  0A69  12 03 D2          )                      +
  (  0A6C  12 08 6C          )                      0
  (  0A6F  12 03 12          )                      SWAP
  (  0A72  12 02 06          )                      !
  (  0A75  12 03 BC          )                      2DUP
  (  0A78  12 02 2E          )                      C!
  (  0A7B  12 04 A8          )                      1+
  (  0A7E  12 03 12          )                      SWAP
  (  0A81  12 09 B8          )                      CMOVE  
  (  0A84  12 02 84          )                      R>
  (  0A87  22                )                      RET
comment;
  \ -------------------------------------------------------------------------------
                                  :  PACK$+8   ( b u a -- a )
  (  0A51  12 02 E4          )                      DUP
  (  0A54  12 02 54          )                      >R
  (  0A57  12 03 24          )                      OVER
  (  0A5A  12 02 E4          )                      DUP
  (  0A5D  12 08 7C          )                      1
  (  0A60  12 03 4C          )                      AND
  (  0A63  12 03 E2          )                      -
  (  0A66  12 03 24          )                      OVER
  (  0A69  12 03 D2          )                      +
  (  0A6C  12 08 6C          )                      0
  (  0A6F  12 03 12          )                      SWAP
  (  0A72  12 02 06          )                      !
  (  0A75  12 03 BC          )                      2DUP
  (  0A78  12 02 2E          )                      C!
  (  0A7B  12 04 A8          )                      1+
  (  0A7E  12 03 12          )                      SWAP
  (  0A81  12 09 B8          )                      CMOVE  
  (  0A84  12 02 84          )                      R>
  (  0A87  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0A46  0C 0A             )                                                                    \  lfa= 0A46
  (  0A48  05 50 41 43 4B 24 )     :  PACK$   ( b u a -- a )                                                    \  cfa= 0A4E
  (  0A4E  12 04 DC          )                      ALIGNED
                                                    PACK$+8
                                                    ret
  \ -------------------------------------------------------------------------------
  (  0A88  48 0A             )                                                                    \  lfa= 0A88
  (  0A8A  05 44 49 47 49 54 )     :  DIGIT    (.0~F.--.'0'~'F'.)   ( u -- c )                               \  cfa= 0A90
  (  0A90  12 01 7C 09 00    )                      doLIT    0009
  (  0A95  12 03 24          )                      OVER
  (  0A98  12 07 0E          )                      <
  (  0A9B  12 01 7C 07 00    )                      doLIT    0007
  (  0AA0  12 03 4C          )                      AND
  (  0AA3  12 03 D2          )                      +
  (  0AA6  12 01 7C 30 00    )                      doLIT    0030
  (  0AAB  12 03 D2          )                      +
  (  0AAE  22                )                      RET
  (  0AAF  00                )                      
  \ -------------------------------------------------------------------------------
  (  0AB0  8A 0A             )                                                                    \  lfa= 0AB0
  (  0AB2  07 45 58 54 52 41 )     :  EXTRACT  ( n base -- n c )                                                   \  cfa= 0ABA
  (  0ABA  12 08 6C          )                      0
  (  0ABD  12 03 12          )                      SWAP
  (  0AC0  12 04 FE          )                      UM/MOD
  (  0AC3  12 03 12          )                      SWAP
  (  0AC6  12 0A 90          )                      DIGIT
  (  0AC9  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0ACA  B2 0A             )                                                                    \  lfa= 0ACA
  (  0ACC  02 3C 23          )     :  <#   ( -- )                                                       \  cfa= 0AD0
  (  0AD0  12 09 78          )                      PAD
  (  0AD3  12 06 8E          )                      HLD
  (  0AD6  12 02 06          )                      !
  (  0AD9  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0ADA  CC 0A             )                                                                    \  lfa= 0ADA
  (  0ADC  04 48 4F 4C 44    )     :  HOLD   ( c -- )                                                     \  cfa= 0AE2
  (  0AE2  12 06 8E          )                      HLD
  (  0AE5  12 02 1E          )                      @
  (  0AE8  12 04 B6          )                      1-
  (  0AEB  12 02 E4          )                      DUP
  (  0AEE  12 06 8E          )                      HLD
  (  0AF1  12 02 06          )                      !
  (  0AF4  12 02 2E          )                      C!
  (  0AF7  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0AF8  DC 0A             )                                                                    \  lfa= 0AF8
  (  0AFA  01 23             )     :  #    ( u -- u )                                                        \  cfa= 0AFC
  (  0AFC  12 06 24          )                      BASE
  (  0AFF  12 02 1E          )                      @
  (  0B02  12 0A BA          )                      EXTRACT
  (  0B05  12 0A E2          )                      HOLD
  (  0B08  22                )                      RET
  (  0B09  00                )                      
  \ -------------------------------------------------------------------------------
  (  0B0A  FA 0A             )                                                                    \  lfa= 0B0A
  (  0B0C  02 23 53          )     :  #S   ( u -- 0 )                                                       \  cfa= 0B10
                                 BEGIN                              \ 0B1B --> 0B10  !!!!!!!!!!!!!!!!!!
  (  0B10  12 0A FC          )                      #
  (  0B13  12 02 E4          )                      DUP
  (  0B16  12 01 C4 20 0B    )   WHILE            \ ?branch  0B20   \ 0B16 --> 0B20  *********
  (  0B1B  12 01 E0 10 0B    )   REPEAT           \ branch   0B10 ) \ 0B16 --> 0B20  *********!!!!!!!!!
  (  0B20  22                )                      RET
  (  0B21  00                )
  \ -------------------------------------------------------------------------------
  (  0B22  0C 0B             )                                                                    \  lfa= 0B22
  (  0B24  04 53 49 47 4E    )     :  SIGN   ( n -- )                                                     \  cfa= 0B2A
  (  0B2A  12 03 3A          )                      0<
  (  0B2D  12 01 C4 3A 0B    )   IF               \ ?branch  0B3A   \ 0B2D --> 0B3A  *********
  (  0B32  12 01 7C 2D 00    )                      doLIT    002D
  (  0B37  12 0A E2          )                      HOLD
                                 THEN                               \ 0B2D --> 0B3A  *********
  (  0B3A  22                )                      RET
  (  0B3B  00                )
  \ -------------------------------------------------------------------------------
  (  0B3C  24 0B             )                                                                    \  lfa= 0B3C
  (  0B3E  02 23 3E          )     :  #>   ( w -- b u )                                                        \  cfa= 0B42
  (  0B42  12 03 02          )                      DROP
  (  0B45  12 06 8E          )                      HLD
  (  0B48  12 02 1E          )                      @
  (  0B4B  12 09 78          )                      PAD
  (  0B4E  12 03 24          )                      OVER
  (  0B51  12 03 E2          )                      -
  (  0B54  22                )                      RET
  (  0B55  00                )
  \ -------------------------------------------------------------------------------
  (  0B56  3E 0B             )                                                                    \  lfa= 0B56
  (  0B58  03 73 74 72       )     :  str  ( w -- b u )                                                       \  cfa= 0B5C
  (  0B5C  12 02 E4          )                      DUP
  (  0B5F  12 02 54          )                      >R
  (  0B62  12 04 16          )                      ABS
  (  0B65  12 0A D0          )                      <#
  (  0B68  12 0B 10          )                      #S
  (  0B6B  12 02 84          )                      R>
  (  0B6E  12 0B 2A          )                      SIGN
  (  0B71  12 0B 42          )                      #>
  (  0B74  22                )                      RET
  (  0B75  00                )
  \ -------------------------------------------------------------------------------
  (  0B76  58 0B             )                                                                    \  lfa= 0B76
  (  0B78  03 48 45 58       )     :  HEX   ( -- )                                                      \  cfa= 0B7C
  (  0B7C  12 01 7C 10 00    )                      doLIT    0010
  (  0B81  12 06 24          )                      BASE
  (  0B84  12 02 06          )                      !
  (  0B87  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0B88  78 0B             )                                                                    \  lfa= 0B88
  (  0B8A  07 44 45 43 49 4D )     :  DECIMAL   ( -- )                                                \  cfa= 0B92
  (  0B92  12 01 7C 0A 00    )                      doLIT    000A
  (  0B97  12 06 24          )                      BASE
  (  0B9A  12 02 06          )                      !
  (  0B9D  22                )                      RET
  \ -------------------------------------------------------------------------------
:.  T:61     61  t:#  ;.
:.  T:7B     7B  t:#  ;. 

 t:  upc                                                                     \ cfa=     5B20
  (  00005B20  61 2E             )                  T:61
  (  00005B22  03 D4             )      if'n=0 \ n=1? mi?  +         \ 00005B22 --> 00005B2C --------------------
  (  00005B24  7B 2E             )                  T:7B
  (  00005B26  01 D5             )        if'- \ n=0? pl?            \ 00005B26 --> 00005B2C ------------------------
  (  00005B28  06 F0 DF 06       )                  Tn0DF
                                          then'                      \ 00005B26 --> 00005B2C ------------------------
                                        then'
  (  00005B2C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  >upc                                                   \ cfa=     5B20
  (  00005B20  60 2E             )                  T:61
  (  00005B22  03 D4             )      if'n=0 \ n=1? mi?              \ 00005B22 --> 00005B2C --------------------
  (  00005B24  7B 2E             )                  T:7B
  (  00005B26  01 D5             )        if'n=1  \ n=0? pl?            \ 00005B26 --> 00005B2C ------------------------
  (  00005B28  06 F0 DF 06       )                  Tn0DF
                                          then'                      \ 00005B26 --> 00005B2C ------------------------
                                        then'
  (  00005B2C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  :  swap.upc.swap.-     swap upc swap -   ret

  (  0B9E  8A 0B             )                                                                    \  lfa= 0B9E
  (  0BA0  06 44 49 47 49 54 )     :  DIGIT?    ( c base -- u t )                                                   \  cfa= 0BA8
  (  0BA8  12 02 54          )                      >R
  (  0BAB  12 01 7C 30 00    )                      doLIT    0030
                               case.sensitive?  @.
                               #if
  (  0BB0  12 1E 2E          )                      -     \  swap.upc.swap.-
                               #else
                                                             swap.upc.swap.-
                               #then

  (  0BB3  12 01 7C 09 00    )                      doLIT    0009
  (  0BB8  12 03 24          )                      OVER
  (  0BBB  12 07 0E          )                      <
  (  0BBE  12 01 C4 D9 0B    )   IF               \ ?branch  0BD9   \ 0BBE --> 0BD9  !!!!!!!!!!!!!!!!!!
  (  0BC3  12 01 7C 07 00    )                      doLIT    0007
  (  0BC8  12 03 E2          )                      -
  (  0BCB  12 02 E4          )                      DUP
  (  0BCE  12 01 7C 0A 00    )                      doLIT    000A
  (  0BD3  12 07 0E          )                      <
  (  0BD6  12 03 5C          )                      OR
                                 THEN                               \ 0BBE --> 0BD9  !!!!!!!!!!!!!!!!!!
  (  0BD9  12 02 E4          )                      DUP
  (  0BDC  12 02 84          )                      R>
  (  0BDF  12 04 60          )                      U<
  (  0BE2  22                )                      RET
  (  0BE3  00                )  \  1>
  \ -------------------------------------------------------------------------------
  (  0BE4  A0 0B             )                                                                    \  lfa= 0BE4
  (  0BE6  07 4E 55 4D 42 45 )     :  NUMBER?  ( a -- n T, a F )                                                   \  cfa= 0BEE
  (  0BEE  12 06 24          )                      BASE
  (  0BF1  12 02 1E          )                      @
  (  0BF4  12 02 54          )                      >R
  (  0BF7  12 08 6C          )                      0
  (  0BFA  12 03 24          )                      OVER
  (  0BFD  12 09 54          )                      COUNT
  (  0C00  12 03 24          )                      OVER
  (  0C03  12 02 44          )                      C@
  (  0C06  12 01 7C 24 00    )                      doLIT    0024
  (  0C0B  12 04 46          )                      =
  (  0C0E  12 01 C4 22 0C    )   IF               \ ?branch  0C22   \ 0C0E --> 0C22  ===============
  (  0C13  12 0B 7C          )                      HEX
  (  0C16  12 03 12          )                      SWAP
  (  0C19  12 04 A8          )                      1+
  (  0C1C  12 03 12          )                      SWAP
  (  0C1F  12 04 B6          )                      1-
                                 THEN                               \ 0C0E --> 0C22  ===============
  (  0C22  12 03 24          )                      OVER
  (  0C25  12 02 44          )                      C@
  (  0C28  12 01 7C 2D 00    )                      doLIT    002D
  (  0C2D  12 04 46          )                      =
  (  0C30  12 02 54          )                      >R
  (  0C33  12 03 12          )                      SWAP
  (  0C36  12 02 6A          )                      R@
  (  0C39  12 03 E2          )                      -
  (  0C3C  12 03 12          )                      SWAP
  (  0C3F  12 02 6A          )                      R@
  (  0C42  12 03 D2          )                      +
  (  0C45  12 02 F4          )                      ?DUP
  (  0C48  12 01 C4 AF 0C    )   IF               \ ?branch  0CAF   \ 0C48 --> 0CAF  +++
  (  0C4D  12 04 B6          )                      1-
  (  0C50  12 02 54          )                      >R
                                   BEGIN,                           \ 0C7F --> 0C53  !!!!!!!!!!!!!!!!!!
  (  0C53  12 02 E4          )                      DUP
  (  0C56  12 02 54          )                      >R
  (  0C59  12 02 44          )                      C@
  (  0C5C  12 06 24          )                      BASE
  (  0C5F  12 02 1E          )                      @
  (  0C62  12 0B A8          )                      DIGIT?
  (  0C65  12 01 C4 9D 0C    )       IF           \ ?branch  0C9D   \ 0C65 --> 0C9D  ===============
  (  0C6A  12 03 12          )                      SWAP
  (  0C6D  12 06 24          )                      BASE
  (  0C70  12 02 1E          )                      @
  (  0C73  12 08 04          )                      *
  (  0C76  12 03 D2          )                      +
  (  0C79  12 02 84          )                      R>
  (  0C7C  12 04 A8          )                      1+
  (  0C7F  12 01 96 53 0C    )     NEXT,          \ nex.     0C53   \ 0C7F --> 0C53  !!!!!!!!!!!!!!!!!!
  (  0C84  12 02 6A          )                      R@
  (  0C87  12 03 12          )                      SWAP
  (  0C8A  12 03 02          )                      DROP
  (  0C8D  12 01 C4 95 0C    )         IF         \ ?branch  0C95   \ 0C8D --> 0C95  ------
  (  0C92  12 04 08          )                      NEGATE
                                       THEN                         \ 0C8D --> 0C95  ------
  (  0C95  12 03 12          )                      SWAP
  (  0C98  12 01 E0 AC 0C    )       ELSE         \ branch   0CAC   \ 0C65 --> 0C9D  ===============
  (  0C9D  12 02 84          )                      R>
  (  0CA0  12 02 84          )                      R>
  (  0CA3  12 03 AA          )                      2DROP
  (  0CA6  12 03 AA          )                      2DROP
  (  0CA9  12 08 6C          )                      0
                                     THEN                           \ 0C98 --> 0CAC  +++
  (  0CAC  12 02 E4          )                      DUP
                                 THEN                               \ 0C48 --> 0CAF  +++
  (  0CAF  12 02 84          )                      R>
  (  0CB2  12 03 AA          )                      2DROP
  (  0CB5  12 02 84          )                      R>
  (  0CB8  12 06 24          )                      BASE
  (  0CBB  12 02 06          )                      !
  (  0CBE  22                )                      RET
  (  0CBF  00                )   \  1>
  \ -------------------------------------------------------------------------------
comment:
  (  0CC0  E6 0B             )                                                                    \  lfa= 0CC0
  (  0CC2  04 3F 4B 45 59    )     :  ?KEY   ( -- f )                                                     \  cfa= 0CC8
  (  0CC8  12 05 CC          )                      '?KEY
  (  0CCB  12 09 A0          )                      @EXECUTE
  (  0CCE  22                )                      RET
  (  0CCF  00                )
  \ -------------------------------------------------------------------------------
  (  0CD0  C2 0C             )                                                                    \  lfa= 0CD0
  (  0CD2  03 4B 45 59       )     :  KEY   ( -- c )                                                       \  cfa= 0CD6
                                 BEGIN                              \ 0CD9 --> 0CD6  *********
  (  0CD6  12 0C C8          )                      ?KEY
  (  0CD9  12 01 C4 D6 0C    )   UNTIL            \ ?branch  0CD6 ) \ 0CD9 --> 0CD6  *********
  (  0CDE  22                )                      RET
  (  0CDF  00                )
  \ -------------------------------------------------------------------------------
  (  0CE0  D2 0C             )                                                                    \  lfa= 0CE0
  (  0CE2  04 45 4D 49 54    )     :  EMIT   ( c -- )                                                     \  cfa= 0CE8
  (  0CE8  12 05 DA          )                      'EMIT
  (  0CEB  12 09 A0          )                      @EXECUTE
  (  0CEE  22                )                      RET
  (  0CEF  00                )

  ''  emit     cfa'.of.emit*  !.
comment;
  \ -------------------------------------------------------------------------------
  (  0CF0  E2 0C             )                                                                    \  lfa= 0CF0
  (  0CF2  04 4E 55 46 3F    )     :  NUF?   ( -- f )                                                      \  cfa= 0CF8
  (  0CF8  12 0C C8          )                      ?KEY
  (  0CFB  12 02 E4          )                      DUP
  (  0CFE  12 01 C4 11 0D    )   IF               \ ?branch  0D11   \ 0CFE --> 0D11  +++
  (  0D03  12 03 AA          )                      2DROP
  (  0D06  12 0C D6          )                      KEY
  (  0D09  12 01 7C 0D 00    )                      doLIT    000D
  (  0D0E  12 04 46          )                      =
                                 THEN                               \ 0CFE --> 0D11  +++
  (  0D11  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0D12  F2 0C             )                                                                    \  lfa= 0D12
  (  0D14  04 50 41 43 45    )     :  PACE   ( -- )                                                     \  cfa= 0D1A
  (  0D1A  12 01 7C 0B 00    )                      doLIT    000B
  (  0D1F  12 0C E8          )                      EMIT
  (  0D22  22                )                      RET
  (  0D23  00                )

  ''  pace        cfa'.of.pace*  !.
  \ -------------------------------------------------------------------------------
  (  0D24  14 0D             )                                                                    \  lfa= 0D24
  (  0D26  05 53 50 41 43 45 )     :  SPACE  ( -- )                                                     \  cfa= 0D2C
  (  0D2C  12 08 62          )                      BL
  (  0D2F  12 0C E8          )                      EMIT
  (  0D32  22                )                      RET
  (  0D33  00                )
  \ -------------------------------------------------------------------------------
  (  0D34  26 0D             )                                                                    \  lfa= 0D34
  (  0D36  06 53 50 41 43 45 )     :  SPACES   ( +n -- )                                                   \  cfa= 0D3E
  (  0D3E  12 08 6C          )                      0000
  (  0D41  12 07 30          )                      MAX
  (  0D44  12 02 54          )  ( 1> )              >R
  (  0D47  12 01 E0 4F 0D    )   AHEAD,            \ branch   0D4F  \ 0D47 --> 0D4F  *********
                                   BEGIN                            \ 0D4F --> 0D4C  +++
  (  0D4C  12 0D 2C          )                      SPACE
                                 THEN,                              \ 0D47 --> 0D4F  *********
  (  0D4F  12 01 96 4C 0D    )   NEXT             \ nex.     0D4C   \ 0D4F --> 0D4C  +++
  (  0D54  22                )                      RET
  (  0D55  00                )
  \ -------------------------------------------------------------------------------
  (  0D56  36 0D             )                                                                    \  lfa= 0D56
  (  0D58  04 54 59 50 45    )     :  TYPE  ( b u -- )                                                      \  cfa= 0D5E
  (  0D5E  12 02 54          )                      >R
  (  0D61  12 01 E0 72 0D    )   AHEAD,           \ branch   0D72   \ 0D61 --> 0D72  +++
                                   BEGIN                            \ 0D72 --> 0D66  !!!!!!!!!!!!!!!!!!
  (  0D66  12 02 E4          )                      DUP
  (  0D69  12 02 44          )                      C@
  (  0D6C  12 0C E8          )                      EMIT
  (  0D6F  12 04 A8          )                      1+
                                 THEN,                              \ 0D61 --> 0D72  +++
  (  0D72  12 01 96 66 0D    )   NEXT             \ nex.     0D66   \ 0D72 --> 0D66  !!!!!!!!!!!!!!!!!!
  (  0D77  12 03 02          )                      DROP
  (  0D7A  22                )                      RET
  (  0D7B  00                )
  \ -------------------------------------------------------------------------------
  (  0D7C  58 0D             )                                                                    \  lfa= 0D7C
  (  0D7E  02 43 52          )     :  CR  ( -- )    doLIT    000a   emit                          \  cfa= 0D82
  (  0D82  12 01 7C 0D 00    )                      doLIT    000D
  (  0D87  12 0C E8          )                      EMIT
  (  0D8A  22                )                      RET
  (  0D8B  00                )
  \ -------------------------------------------------------------------------------
  (  0D8C  7E 0D             )                                                                    \  lfa= 0D8C
  (  0D8E  43 64 6F 24       )     :  do$  ( +n -- )                                        compile-only   \  cfa= 0D92
  (  0D92  12 02 84          )                      R>
  (  0D95  12 02 6A          )                      R@
  (  0D98  12 02 84          )                      R>
  (  0D9B  12 09 54          )                      COUNT
  (  0D9E  12 03 D2          )                      +
  (  0DA1  12 02 54          )                      >R
  (  0DA4  12 03 12          )                      SWAP
  (  0DA7  12 02 54          )                      >R
  (  0DAA  22                )                      RET
  (  0DAB  00                )

:.  R1=(T)b    1  t  r=(r)b  ;.
:.  R1=(T)b    7831  16,'    ;.    \ ??????????????????????????????????????
                                    t:  do$   ( -- a )                                                \ cfa=     57E0
  (  000057E0  04 3F 3E 60       )                  {dup}
  (  000057E4  00 98             )                  r0=R
  (  000057E6  46 1E             )                  T=R0-1
  (  000057E8  31 78             )                  R1=(T)b
  (  000057EA  09 18             )                  R1+R0
  (  000057EC  03 20             )                  R0=3
  (  000057EE  09 18             )                  R1+R0
  (  000057F0  21 EA 00 01       )                  R1nR0/
  (  000057F4  01 31             )                  R1+1
  (  000057F6  CD F8 00 10       )                  (rp)=R1
  (  000057FA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  0DAC  8E 0D             )                                                                    \  lfa= 0DAC
  (  0DAE  43 24 22 7C       )     :  $"|                                          compile-only   \  cfa= 0DB2
  (  0DB2  12 0D 92          )                      do$
  (  0DB5  22                )                      RET

     ''  $"|  >mca
     ''  $"|  cfa'.of.$"|*   !.
     :.  $"|          $"|'*  ;.
  \ -------------------------------------------------------------------------------
  (  0DB6  AE 0D             )                                                                    \  lfa= 0DB6
  (  0DB8  43 2E 22 7C       )     :  ."|   ( -- )                                       compile-only   \  cfa= 0DBC
  (  0DBC  12 0D 92          )                      do$
  (  0DBF  12 09 54          )                      COUNT
  (  0DC2  12 0D 5E          )                      TYPE
  (  0DC5  22                )                      RET

     ''  ."|  >mca
     ''  ."|  cfa'.of.."|*    !.
     :.  ."|          ."|'*   ;.
  \ -------------------------------------------------------------------------------
  (  0DC6  B8 0D             )                                                                    \  lfa= 0DC6
  (  0DC8  02 2E 52          )     :  .R  ( n +n -- )                                                        \  cfa= 0DCC
  (  0DCC  12 02 54          )                      >R
  (  0DCF  12 0B 5C          )                      str
  (  0DD2  12 02 84          )                      R>
  (  0DD5  12 03 24          )                      OVER
  (  0DD8  12 03 E2          )                      -
  (  0DDB  12 0D 3E          )                      SPACES
  (  0DDE  12 0D 5E          )                      TYPE
  (  0DE1  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0DE2  C8 0D             )                                                                    \  lfa= 0DE2
  (  0DE4  03 55 2E 52       )     :  U.R   ( u +n -- )                                                      \  cfa= 0DE8
  (  0DE8  12 02 54          )                      >R
  (  0DEB  12 0A D0          )                      <#
  (  0DEE  12 0B 10          )                      #S
  (  0DF1  12 0B 42          )                      #>
  (  0DF4  12 02 84          )                      R>
  (  0DF7  12 03 24          )                      OVER
  (  0DFA  12 03 E2          )                      -
  (  0DFD  12 0D 3E          )                      SPACES
  (  0E00  12 0D 5E          )                      TYPE
  (  0E03  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0E04  E4 0D             )                                                                    \  lfa= 0E04
  (  0E06  02 55 2E          )     :  U.  ( u -- )                                                        \  cfa= 0E0A
  (  0E0A  12 0A D0          )                      <#
  (  0E0D  12 0B 10          )                      #S
  (  0E10  12 0B 42          )                      #>
  (  0E13  12 0D 2C          )                      SPACE
  (  0E16  12 0D 5E          )                      TYPE
  (  0E19  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0E1A  06 0E             )                                                                    \  lfa= 0E1A
  (  0E1C  01 2E             )     :  .  ( w -- )  \   .   $                                                \  cfa= 0E1E
  (  0E1E  12 06 24          )                      BASE
  (  0E21  12 02 1E          )                      @
  (  0E24  12 01 7C 0A 00    )                      doLIT    000A
  (  0E29  12 03 6C          )                      XOR
  (  0E2C  12 01 C4 35 0E    )   IF               \ ?branch  0E35   \ 0E2C --> 0E35  @@@@@@@@@@@@@@@@@@@@@
  (  0E31  12 0E 0A          )                      U.
  (  0E34  22                )                      RET
                                 THEN                               \ 0E2C --> 0E35  @@@@@@@@@@@@@@@@@@@@@
  (  0E35  12 0B 5C          )                      str
  (  0E38  12 0D 2C          )                      SPACE
  (  0E3B  12 0D 5E          )                      TYPE
  (  0E3E  22                )                      RET
  (  0E3F  00                )
  \ -------------------------------------------------------------------------------
  (  0E40  1C 0E             )                                                                    \  lfa= 0E40
  (  0E42  01 3F             )     :  ?   ( a -- )                                                        \  cfa= 0E44
  (  0E44  12 02 1E          )                      @
  (  0E47  12 0E 1E          )                      .
  (  0E4A  22                )                      RET
  (  0E4B  00                )
  \ -------------------------------------------------------------------------------
  (  0E4C  42 0E             )                                                                    \  lfa= 0E4C
  (  0E4E  05 70 61 72 73 65 )     :  pars.  ( b u c -- b u delta \ <string> )                                                     \  cfa= 0E54
  (  0E54  12 06 30          )                      tmp
  (  0E57  12 02 06          )                      !
  (  0E5A  12 03 24          )                      OVER
  (  0E5D  12 02 54          )                      >R
  (  0E60  12 02 E4          )                      DUP
  (  0E63  12 01 C4 11 0F    )   IF               \ ?branch  0F11 ) \ 0E63 --> 0F11  ------T+#
  (  0E68  12 04 B6          )                      1-
  (  0E6B  12 06 30          )                      tmp
  (  0E6E  12 02 1E          )                      @
  (  0E71  12 08 62          )                      BL
  (  0E74  12 04 46          )                      =
  (  0E77  12 01 C4 AE 0E    )     IF             \ ?branch  0EAE   \ 0E77 --> 0EAE  @@@@@@@@@@@@@@@@@@@@@
  (  0E7C  12 02 54          )                      >R
                                     BEGIN                          \ 0E99 --> 0E7F  +++
  (  0E7F  12 08 62          )                      BL
  (  0E82  12 03 24          )                      OVER
  (  0E85  12 02 44          )                      C@
  (  0E88  12 03 E2          )                      -
  (  0E8B  12 03 3A          )                      0<
  (  0E8E  12 03 F6          )                      NOT
  (  0E91  12 01 C4 AB 0E    )         IF,        \ ?branch  0EAB   \ 0E91 --> 0EAB  ------
  (  0E96  12 04 A8          )                      1+
  (  0E99  12 01 96 7F 0E    )       NEXT         \ nex.     0E7F   \ 0E99 --> 0E7F  +++
  (  0E9E  12 02 84          )                      R>
  (  0EA1  12 03 02          )                      DROP
  (  0EA4  12 08 6C          )                      0
  (  0EA7  12 02 E4          )                      DUP
  (  0EAA  22                )                      RET
                                       THEN,                        \ 0E91 --> 0EAB  ------
  (  0EAB  12 02 84          )                      R>
                                   THEN                             \ 0E77 --> 0EAE  @@@@@@@@@@@@@@@@@@@@@
  (  0EAE  12 03 24          )                      OVER
  (  0EB1  12 03 12          )                      SWAP
  (  0EB4  12 02 54          )                      >R
                                   BEGIN,                           \ 0EE2 --> 0EB7  ////////////
  (  0EB7  12 06 30          )                      tmp
  (  0EBA  12 02 1E          )                      @
  (  0EBD  12 03 24          )                      OVER
  (  0EC0  12 02 44          )                      C@
  (  0EC3  12 03 E2          )                      -
  (  0EC6  12 06 30          )                      tmp
  (  0EC9  12 02 1E          )                      @
  (  0ECC  12 08 62          )                      BL
  (  0ECF  12 04 46          )                      =
  (  0ED2  12 01 C4 DA 0E    )       IF           \ ?branch  0EDA   \ 0ED2 --> 0EDA  ------
  (  0ED7  12 03 3A          )                      0<
                                     THEN                           \ 0ED2 --> 0EDA  ------
  (  0EDA  12 01 C4 F2 0E    )         IF         \ ?branch  0EF2   \ 0EDA --> 0EF2  !!!!!!!!!!!!!!!!!!
  (  0EDF  12 04 A8          )                      1+
  (  0EE2  12 01 96 B7 0E    )     NEXT,           \ nex.    0EB7   \ 0EE2 --> 0EB7  ////////////
  (  0EE7  12 02 E4          )                      DUP
  (  0EEA  12 02 54          )                      >R
  (  0EED  12 01 E0 01 0F    )         ELSE       \ branch   0F01   \ 0EDA --> 0EF2  !!!!!!!!!!!!!!!!!!
  (  0EF2  12 02 84          )                      R>
  (  0EF5  12 03 02          )                      DROP
  (  0EF8  12 02 E4          )                      DUP
  (  0EFB  12 04 A8          )                      1+
  (  0EFE  12 02 54          )                      >R
                                       THEN                                                       \ 0EED --> 0F01  ===============
  (  0F01  12 03 24          )                      OVER
  (  0F04  12 03 E2          )                      -
  (  0F07  12 02 84          )                      R>
  (  0F0A  12 02 84          )                      R>
  (  0F0D  12 03 E2          )                      -
  (  0F10  22                )                      RET
                                 THEN                                                             \ 0E63 --> 0F11  ------
  (  0F11  12 03 24          )                      OVER
  (  0F14  12 02 84          )                      R>
  (  0F17  12 03 E2          )                      -
  (  0F1A  22                )                      RET
  (  0F1B  00                )
  \ -------------------------------------------------------------------------------
  (  0F1C  4E 0E             )                                                                    \  lfa= 0F1C
  (  0F1E  05 50 41 52 53 45 )     :  PARSE   ( c -- b u \ <string> )                                                    \  cfa= 0F24
  (  0F24  12 02 54          )                      >R
  (  0F27  12 09 8A          )                      TIB
  (  0F2A  12 06 4A          )                      >IN
  (  0F2D  12 02 1E          )                      @
  (  0F30  12 03 D2          )                      +
  (  0F33  12 06 58          )                      #TIB
  (  0F36  12 02 1E          )                      @
  (  0F39  12 06 4A          )                      >IN
  (  0F3C  12 02 1E          )                      @
  (  0F3F  12 03 E2          )                      -
  (  0F42  12 02 84          )                      R>
  (  0F45  12 0E 54          )                      pars.
  (  0F48  12 06 4A          )                      >IN
  (  0F4B  12 09 0C          )                      +!
  (  0F4E  22                )                      RET
  (  0F4F  00                )
  \ -------------------------------------------------------------------------------
  (  0F50  1E 0F             )                                                                    \  lfa= 0F50
  (  0F52  82 2E 28          )     :  .(                                 immediate                \  cfa= 0F56
  (  0F56  12 01 7C 29 00    )                      doLIT    0029
  (  0F5B  12 0F 24          )                      PARSE
  (  0F5E  12 0D 5E          )                      TYPE
  (  0F61  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0F62  52 0F             )                                                                    \  lfa= 0F62
  (  0F64  81 28             )     :  (        \    (     ~              immediate                \  cfa= 0F66
                                                    doLIT    0029
                                                    PARSE
                                                    2DROP
                                                    RET

:.  (     MULTI-LINE?
          IF.      ')'   _COMMENT
          ELSE.    ')'   PARSE.      2DROP.
          THEN.    ;.    IMMEDIATE.
  \ -------------------------------------------------------------------------------
  (  0F72  64 0F             )                                                                    \  lfa= 0F72
  (  0F74  81 5C             )     :   &   ( & \ )                       immediate                (  cfa= 0F76 )
  (  0F76  12 06 58          )                      #TIB
  (  0F79  12 02 1E          )                      @
  (  0F7C  12 06 4A          )                      >IN
  (  0F7F  12 02 06          )                      !
  (  0F82  22                )                      RET
  (  0F83  00                )

     '\'   ''  &   CFA'>NFA'(ADJACENT)   1+.  c!'     \  while decompling it is displayed as & ,  SUCH AS SEE &
  \ -------------------------------------------------------------------------------
  (  0F84  74 0F             )                                                                    \  lfa= 0F84
  (  0F86  04 43 48 41 52    )     :  CHAR  ( -- c )                                                      \  cfa= 0F8C
  (  0F8C  12 08 62          )                      BL
  (  0F8F  12 0F 24          )                      PARSE
  (  0F92  12 03 02          )                      DROP
  (  0F95  12 02 44          )                      C@
  (  0F98  22                )                      RET
  (  0F99  00                )
  \ -------------------------------------------------------------------------------
  (  0F9A  86 0F             )                                                                    \  lfa= 0F9A
  (  0F9C  05 54 4F 4B 45 4E )     :  TOKEN  ( -- a \ <string> )                                                     \  cfa= 0FA2
  (  0FA2  12 08 62          )                      BL
  (  0FA5  12 0F 24          )                      PARSE
  (  0FA8  12 01 7C 1F 00    )                      doLIT    001F
  (  0FAD  12 07 48          )                      MIN
  (  0FB0  12 06 CA          )                      CP
  (  0FB3  12 02 1E          )                      @
  (  0FB6  12 04 DC          )                      ALIGNED   \ [push.LR]   \ ?????????
  (  0FB9  12 04 78          )                      CELL+
  (  0FBC  12 0A 4E          )                      PACK$
  (  0FBF  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0FC0  9C 0F             )                                                                    \  lfa= 0FC0
  (  0FC2  04 57 4F 52 44    )   t:  WORD  ( c -- a \ <string> )         push.LR                                       \  cfa= 0FC8
  (  0FC8  12 0F 24          )                      PARSE
  (  0FCB  12 09 6A          )                      HERE
  (  0FCE  12 0A 51          )                      pack$+8   \   '' PACK$  4 +.  ,doLIT*+#   CALL   \ ??????? --> push.LR
  (  0FD1  22                )                      RET
  \ -------------------------------------------------------------------------------
\ head.adjacent.to.cfa?  @.
\ #if
  (  0FD2  C2 0F             )                                                                    \  lfa= 0FD2
  (  0FD4  05 4E 41 4D 45 3E )     :  NAME>   ( na -- ca )                                                    \  cfa= 0FDA
  (  0FDA  12 09 54          )                      COUNT
  (  0FDD  12 01 7C 1F 00    )                      doLIT    001F
  (  0FE2  12 03 4C          )                      AND
  (  0FE5  12 03 D2          )                      +
  (  0FE8  12 04 DC          )                      ALIGNED
  (  0FEB  22                )                      RET
\  \ ------------------------------------------------------------------------
\ #else                                             \ head and cfa are seperated.
\                                    t:  NAME>   ( nfa -- cfa )                                          \ cfa=     5B04
\  (  00005B04  00 B5             )                  push.LR
\  (  00005B06  04 3F 3E 60       )                  {dup}
\  (  00005B0A  08 26             )                  T=8
\  (  00005B0C  FF F7 C0 FA       )                  -       \ pcfa                                      \      5090
\  (  00005B10  36 68             )                  {@}     \  cfa
\  (  00005B12  00 BD             )                  ret
\ #then
  \ -------------------------------------------------------------------------------

   t:  >UPC(2BYTE)       (.n.--.n.)  push.LR   3 ...*
       for  0 ...*  100 ...*  um/mod   next    3 ...*
       for  8 ...*         lshift  +   next       ret


    :  @.>UPC(2BYTE)     @ >UPC(2BYTE)   ret    \ actually 4 byte

  (  0FEC  D4 0F             )                                                                    \  lfa= 0FEC
  (  0FEE  05 53 41 4D 45 3F )     :  SAME?  ( a a u -- a a f \ -0+ )                                                     \  cfa= 0FF4
  (  0FF4  12 02 54          )                      >R
  (  0FF7  12 01 E0 2C 10    )   AHEAD,            \ branch   102C  \ 0FF7 --> 102C  *********
                                   BEGIN                            \ 102C --> 0FFC  +++
  (  0FFC  12 03 24          )                      OVER
  (  0FFF  12 02 6A          )                      R@
  (  1002  12 04 9A          )                      CELLS
  (  1005  12 03 D2          )                      +
                                case.sensitive?  @.
                                #if
  (  1008  12 1D A4          )                      @      \   @.>UPC(2BYTE)
                                #else
                                                               @.>UPC(2BYTE)
                                #then
  (  100B  12 03 24          )                      OVER
  (  100E  12 02 6A          )                      R@
  (  1011  12 04 9A          )                      CELLS
  (  1014  12 03 D2          )                      +
                                case.sensitive?  @.
                                #if
  (  1017  12 1D A4          )                      @      \  @.>UPC(2BYTE)
                                #else
                                                              @.>UPC(2BYTE)
                                #then
  (  101A  12 03 E2          )                      -
  (  101D  12 02 F4          )                      ?DUP
  (  1020  12 01 C4 2C 10    )       IF           \ ?branch  102C   \ 1020 --> 102C  ------
  (  1025  12 02 84          )                      R>
  (  1028  12 03 02          )                      DROP
  (  102B  22                )                      RET
                                     THEN                           \ 1020 --> 102C  ------
                                 THEN,                              \ 0FF7 --> 102C  *********
  (  102C  12 01 96 FC 0F    )   NEXT             \ nex.     0FFC   \ 102C --> 0FFC  +++
  (  1031  12 08 6C          )                      0  ...*
  (  1034  22                )                      RET
  (  1035  00                )
  \ -------------------------------------------------------------------------------
                                    t:  >upc                                                   \ cfa=     5B20
  (  00005B20  60 2E             )                  T:61
  (  00005B22  03 D4             )      if'n=0 \ n=1? mi?              \ 00005B22 --> 00005B2C --------------------
  (  00005B24  7B 2E             )                  T:7B
  (  00005B26  01 D5             )        if'n=1  \ n=0? pl?            \ 00005B26 --> 00005B2C ------------------------
  (  00005B28  06 F0 DF 06       )                  Tn0DF
                                          then'                      \ 00005B26 --> 00005B2C ------------------------
                                        then'
  (  00005B2C  70 47             )                  ret'


    :  SWAP.100./MOD.>UPC.100.*.+.AND     SWAP 100 /MOD >UPC 100 * + AND   RET
    :  100./MOD.>UPC.100.*.+.XOR          100 /MOD >UPC 100 * + XOR        RET



  (  1036  EE 0F             )                                                                    \  lfa= 1036
  (  1038  04 66 69 6E 64    )     :  find   ( a va -- ca na, a F )                                                     \  cfa= 103E
  (  103E  12 03 12          )                      SWAP
  (  1041  12 02 E4          )                      DUP
  (  1044  12 02 44          )                      C@
  (  1047  12 04 C6          )                      {cell/}  \  2/   ?????????
  (  104A  12 06 30          )                      tmp
  (  104D  12 02 06          )                      !
  (  1050  12 02 E4          )                      DUP
  (  1053  12 02 1E          )                      @
  (  1056  12 02 54          )                      >R
  (  1059  12 04 78          )                      CELL+
  (  105C  12 03 12          )                      SWAP
                                 BEGIN                              \ 10BA --> 105F  ////////////
  (  105F  12 02 1E          )                      @
  (  1062  12 02 E4          )                      DUP
  (  1065  12 01 C4 9F 10    )     IF             \ ?branch  109F   \ 1065 --> 109F  ////////////
  (  106A  12 02 E4          )                      DUP
  (  106D  12 02 1E          )                      @
  (  1070  12 01 7C 1F 7F    )                      doLIT    7f7f7f1f  \  7fffff1f \ ????  \  7F1F  ?????????
                               case.sensitive?  @.
                               #if
  (  1075  12 1D E8          )                      and \    SWAP.100./MOD.>UPC.100.*.+.AND
                               #else                         SWAP.100./MOD.>UPC.100.*.+.AND

                               #then

  (  1078  12 02 6A          )                      R@
                               case.sensitive?  @.
                               #if
  (  107B  12 1E 10          )                      xor \       100./MOD.>UPC.100.*.+.XOR
                               #else                            100./MOD.>UPC.100.*.+.XOR

                               #then

  (  107E  12 01 C4 8E 10    )       IF           \ ?branch  108E   \ 107E --> 108E  ===============
  (  1083  12 04 78          )                      CELL+
  (  1086  12 08 9E          )                      -1
  (  1089  12 01 E0 9A 10    )       ELSE         \ branch   109A   \ 107E --> 108E  ===============@@@@@@
  (  108E  12 04 78          )                      CELL+
  (  1091  12 06 30          )                      tmp
  (  1094  12 02 1E          )                      @
  (  1097  12 0F F4          )                      SAME?
                                     THEN                           \ 1089 --> 109A  @@@@@@@@@@@@@@@@@@@@@
  (  109A  12 01 E0 AF 10    )     ELSE           \ branch   10AF   \ 1065 --> 109F  ////////////
  (  109F  12 02 84          )                      R>
  (  10A2  12 03 02          )                      DROP
  (  10A5  12 03 12          )                      SWAP
  (  10A8  12 04 88          )                      CELL-
  (  10AB  12 03 12          )                      SWAP
  (  10AE  22                )                      RET
                                   THEN                         \ 109A --> 10AF  *********
  (  10AF  12 01 C4 BF 10    )   WHILE            \ ?branch  10BF   \ 10AF --> 10BF  ===============
  (  10B4  12 04 88          )                      CELL-
  (  10B7  12 04 88          )                      CELL-
  (  10BA  12 01 E0 5F 10    )   REPEAT           \ branch   105F   \ 10AF --> 10BF  ===============
  (  10BF  12 02 84          )                      R>
  (  10C2  12 03 02          )                      DROP
  (  10C5  12 03 12          )                      SWAP
  (  10C8  12 03 02          )                      DROP
  (  10CB  12 04 88          )                      CELL-
  (  10CE  12 02 E4          )                      DUP
  (  10D1  12 0F DA          )                      NAME>
  (  10D4  12 03 12          )                      SWAP
  (  10D7  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  10D8  38 10             )                                                                    \  lfa= 10D8
  (  10DA  05 4E 41 4D 45 3F )     :  NAME?  ( a -- ca na, a F )                                                     \  cfa= 10E0
  (  10E0  12 06 AE          )                      CONTEXT
  (  10E3  12 02 E4          )                      DUP
  (  10E6  12 09 3C          )                      2@
  (  10E9  12 03 6C          )                      XOR
  (  10EC  12 01 C4 F4 10    )   IF               \ ?branch  10F4   \ 10EC --> 10F4  @@@@@@@@@@@@@@@@@@@@@
  (  10F1  12 04 88          )                      CELL-
                                 THEN                               \ 10EC --> 10F4  @@@@@@@@@@@@@@@@@@@@@
  (  10F4  12 02 54          )                      >R
                                 BEGIN                              \ 1114 --> 10F7  +++
  (  10F7  12 02 84          )                      R>
  (  10FA  12 04 78          )                      CELL+
  (  10FD  12 02 E4          )                      DUP
  (  1100  12 02 54          )                      >R
  (  1103  12 02 1E          )                      @
  (  1106  12 02 F4          )                      ?DUP     
  (  1109  12 01 C4 20 11    )     IF,            \ ?branch  1120   \ 1109 --> 1120  *********
  (  110E  12 10 3E          )                      find
  (  1111  12 02 F4          )                      ?DUP
  (  1114  12 01 C4 F7 10    )   UNTIL            \ ?branch  10F7   \ 1114 --> 10F7  +++
  (  1119  12 02 84          )                      R>
  (  111C  12 03 02          )                      DROP
  (  111F  22                )                      RET
                                   THEN,                            \ 1109 --> 1120  *********
  (  1120  12 02 84          )                      R>
  (  1123  12 03 02          )                      DROP
  (  1126  12 08 6C          )                      0   ...*   
  (  1129  22                )                      RET



comment:
                                t:  NAME?   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )    push.LR   cfa= CEAE
  (  CEAE  B0 12 7C C2       )                  CONTEXT
  (  CEB2  B0 12 1A C1       )                  {@}
                                begin'.
  (  CEB6  04 93             )                  T  R:0
  (  CEB8  20 24             )        if'z=0  \ CEFA  z=1?''
  (  CEBA  B0 12 B2 C1       )                  {over}
  (  CEBE  B0 12 1A C1       )                  {c@}         DOLIT:     1F ( 7F1F )   {and}   \ the next byte can    be 00~FF
  (  CEC2  B0 12 B2 C1       )                  {over}        \ ^^^^^^^^^^^^^^^^^^^^^^^ without it, the next byte should be 00~FF
  (  CEC6  B0 12 1A C1       )                  {c@}
  (  CECA  B0 12 A6 C0 1F 7F )                  DOLIT:   1F \   7F1F    \ mainly to test length, the next byte can    be 00~FF
  (  CED0  B0 12 D4 C1       )                  {and}
  (  CED4  B0 12 AA C3       )                  =
  (  CED8  B0 12 F0 C0 E8 CE )        if#   \     CEE8
  (  CEDE  B0 12 82 CE       )                  SAME?
  (  CEE2  B0 12 F0 C0 EE CE )     if#    \     CEEE
  (  CEE8  24 83             )  swap. then#                 T  4 r-#    \ lfa
  (  CEEA  24 44             )                       T      T  R=(R)    \ next.nfa
  (  CEEC  E4 3F             )  again'.
  (  CEEE  85 44 00 00       )     then#        sp     T  (R)=R
  (  CEF2  B0 12 6A CE       )                  NAME>
  (  CEF6  30 40 A0 C1       )                  {swap}
  (  CEFA  30 41             )        then'     ret
comment;

                                t:  NAME?'''   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )    push.LR   cfa= CEAE
  (  CEAE  B0 12 7C C2       )                  CONTEXT
  (  CEB2  B0 12 1A C1       )                  {@}
                                begin'.
  (  CEB6  04 93             )                  T  R:0
  (  CEB8  20 24             )        if'z=0  \ CEFA  z=1?''
  (  CEBA  B0 12 B2 C1       )                  {over}
  (  CEBE  B0 12 1A C1       )                  {c@}         DOLIT:     1F ( 7F1F )   {and}   \ the next byte can    be 00~FF
  (  CEC2  B0 12 B2 C1       )                  {over}        \ ^^^^^^^^^^^^^^^^^^^^^^^ without it, the next byte should be 00~FF
  (  CEC6  B0 12 1A C1       )                  {c@}
  (  CECA  B0 12 A6 C0 1F 7F )                  DOLIT:   1F \   7F1F    \ mainly to test length, the next byte can    be 00~FF
  (  CED0  B0 12 D4 C1       )                  {and}
  (  CED4  B0 12 AA C3       )                  =
  (  CED8  B0 12 F0 C0 E8 CE )        if#   \     CEE8
  (  CEDE  B0 12 82 CE       )                  SAME?
  (  CEE2  B0 12 F0 C0 EE CE )     if#    \     CEEE
  (  CEE8  24 83             )  swap. then#                 T  4 r-#    \ lfa
  (  CEEA  24 44             )                       T      T  R=(R)    \ next.nfa
  (  CEEC  E4 3F             )  again'.
  (  CEEE  85 44 00 00       )     then#        sp     T  (R)=R
  (  CEF2  B0 12 6A CE       )                  NAME>
  (  CEF6  30 40 A0 C1       )                  {swap}
  (  CEFA  30 41             )        then'     ret


















  \ -------------------------------------------------------------------------------
  (  1930  CE 18             )                                                                    \  lfa= 1930
  (  1932  02 2E 53          )     :  .S      \ .S                                                \  cfa= 1936
  (  1936  12 0D 82          )                      CR
  (  1939  12 08 DE          )                      DEPTH
  (  193C  12 02 54          ) (  1>  )             >R
  (  193F  12 01 E0 4D 19    )   AHEAD,           \ branch   194D   \ 193F --> 194D  ===============
                                   BEGIN                            \ 194D --> 1944  *********
  (  1944  12 02 6A          )                      R@
  (  1947  12 08 F6          )                      PICK
  (  194A  12 0E 1E          )                      .
                                 THEN,                              \ 193F --> 194D  ===============
  (  194D  12 01 96 44 19    )     NEXT           \ nex.     1944   \ 194D --> 1944  *********
  (  1952  12 0D BC          )                 \     ."|  <sp"
  (  195A  22                )                      RET
  (  195B  00                )
  \ -------------------------------------------------------------------------------

debug?  @.
#if
: TP1   cr   ." TP1"     .s  ;
: TP2   cr   ." TP2"     .s  ;
: TP3   cr   ." TP3"     .s  ;
: TP4   cr   ." TP4"     .s  ;
: TP5   cr   ." TP5"     .s  ;
: TP6   cr   ." TP6"     .s  ;
: TP7   cr   ." TP7"     .s  ;
: TP8   cr   ." TP8"     .s  ;
: TP9   cr   ." TP9"     .s  ;
: TP10  cr   ." TP10"    .s  ;
: TP11  cr   ." TP11"    .s  ;
: TP12  cr   ." TP12"    .s  ;
: TP13  cr   ." TP13"    .s  ;
: TP14  cr   ." TP14"    .s  ;
: TP15  cr   ." TP15"    .s  ;
: TP16  cr   ." TP16"    .s  ;
: TP17  cr   ." TP17"    .s  ;
: TP18  cr   ." TP18"    .s  ;
: TP19  cr   ." TP19"    .s  ;
: TP20  cr   ." TP20"    .s  ;
: TP21  cr   ." TP21"    .s  ;
: TP22  cr   ." TP22"    .s  ;
: TP23  cr   ." TP23"    .s  ;
: TP24  cr   ." TP24"    .s  ;
: TP25  cr   ." TP25"    .s  ;
: TP26  cr   ." TP26"    .s  ;
: TP27  cr   ." TP27"    .s  ;
: TP28  cr   ." TP28"    .s  ;
: TP29  cr   ." TP29"    .s  ;
: TP30  cr   ." TP30"    .s  ;
: TP31  cr   ." TP31"    .s  ;
: TP32  cr   ." TP32"    .s  ;
: TP33  cr   ." TP33"    .s  ;
: TP34  cr   ." TP34"    .s  ;
: TP35  cr   ." TP35"    .s  ;
: TP36  cr   ." TP36"    .s  ;
: TP37  cr   ." TP37"    .s  ;
: TP38  cr   ." TP38"    .s  ;
: TP39  cr   ." TP39"    .s  ;
: TP40  cr   ." TP40"    .s  ;
: TP41  cr   ." TP41"    .s  ;
: TP42  cr   ." TP42"    .s  ;
: TP43  cr   ." TP43"    .s  ;
: TP44  cr   ." TP44"    .s  ;
: TP45  cr   ." TP45"    .s  ;
: TP46  cr   ." TP46"    .s  ;
: TP47  cr   ." TP47"    .s  ;
: TP48  cr   ." TP48"    .s  ;
: TP49  cr   ." TP49"    .s  ;
: TP50  cr   ." TP50"    .s  ;
: TP51  cr   ." TP51"    .s  ;
#else
:. tp1    ;.
:. tp2    ;.
:. tp3    ;.
:. tp4    ;.
:. tp5    ;.
:. tp6    ;.
:. tp7    ;.
:. tp8    ;.
:. tp9    ;.
:. tp10   ;.
:. tp11   ;.
:. tp12   ;.
:. tp13   ;.
:. tp14   ;.
:. tp15   ;.
:. tp16   ;.
:. tp17   ;.
:. tp18   ;.
:. tp19   ;.
:. tp20   ;.
:. tp21   ;.
:. tp22   ;.
:. tp23   ;.
:. tp24   ;.
:. tp25   ;.
:. tp26   ;.
:. tp27   ;.
:. tp28   ;.
:. tp29   ;.
:. tp30   ;.
:. tp31   ;.
:. tp32   ;.
:. tp33   ;.
:. tp34   ;.
:. tp35   ;.
:. tp36   ;.
:. tp37   ;.
:. tp38   ;.
:. tp39   ;.
:. tp40   ;.
:. tp41   ;.
:. tp42   ;.
:. tp43   ;.
:. tp44   ;.
:. tp45   ;.
:. tp46   ;.
:. tp47   ;.
:. tp48   ;.
:. tp49   ;.
:. tp50   ;.
:. tp51   ;.
#then











  \ -------------------------------------------------------------------------------
  (  112A  DA 10             )                                                                    \  lfa= 112A
  (  112C  02 5E 48          )     :  ^H   ( b b b -- b b b )                                                       \  cfa= 1130
  (  1130  12 02 54          )                      >R        
  (  1133  12 03 24          )                      OVER
  (  1136  12 02 84          )                      R>
  (  1139  12 03 12          )                      SWAP
  (  113C  12 03 24          )                      OVER
  (  113F  12 03 6C          )                      XOR
  (  1142  12 01 C4 69 11    )   IF               \ ?branch  1169   \ 1142 --> 1169  @@@@@@@@@@@@@@@@@@@@@
  (  1147  12 01 7C 08 00    )                      doLIT    0008
  (  114C  12 06 06          )                      'ECHO
  (  114F  12 09 A0          )                      @EXECUTE
  (  1152  12 04 B6          )                      1-
  (  1155  12 08 62          )                      BL
  (  1158  12 06 06          )                      'ECHO
  (  115B  12 09 A0          )                      @EXECUTE
  (  115E  12 01 7C 08 00    )                      doLIT    0008
  (  1163  12 06 06          )                      'ECHO
  (  1166  12 09 A0          )                      @EXECUTE
                                 THEN                               \ 1142 --> 1169  @@@@@@@@@@@@@@@@@@@@@
  (  1169  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  116A  2C 11             )                                                                    \  lfa= 116A
  (  116C  03 54 41 50       )     :  TAP   ( bot eot cur key -- bot eot cur )                                                      \  cfa= 1170
  (  1170  12 02 E4          )                      DUP
  (  1173  12 06 06          )                      'ECHO       tp21   \ 20008080 200080D0 20008080 37 37 20002128 \ @ --> 9204
  (  1176  12 09 A0          )                      @EXECUTE    tp23   \ 20008080 200080D0 20008080 37
  (  1179  12 03 24          )                      OVER
  (  117C  12 02 2E          )                      C!
  (  117F  12 04 A8          )                      1+          tp24
  (  1182  22                )                      RET
  (  1183  00                )
  \ -------------------------------------------------------------------------------
  (  1184  6C 11             )                                                                    \  lfa= 1184
  (  1186  04 6B 54 41 50    )     :  kTAP   ( bot eot cur key -- bot eot cur )                                                     \  cfa= 118C
  (  118C  12 02 E4          )                      DUP
  (  118F  12 01 7C 0D 00    )                      doLIT    000D
  (  1194  12 03 6C          )                      XOR
  (  1197  12 01 C4 B4 11    )   IF               \ ?branch  11B4   \ 1197 --> 11B4  !!!!!!!!!!!!!!!!!!
  (  119C  12 01 7C 08 00    )                      doLIT    0008
  (  11A1  12 03 6C          )                      XOR
  (  11A4  12 01 C4 B0 11    )     IF             \ ?branch  11B0   \ 11A4 --> 11B0  +++
  (  11A9  12 08 62          )                      BL
  (  11AC  12 11 70          )                      TAP
  (  11AF  22                )                      RET
                                   THEN                               \ 11A4 --> 11B0  +++
  (  11B0  12 11 30          )                      ^H
  (  11B3  22                )                      RET
                                 THEN                               \ 1197 --> 11B4  !!!!!!!!!!!!!!!!!!
  (  11B4  12 03 02          )                      DROP
  (  11B7  12 03 12          )                      SWAP
  (  11BA  12 03 02          )                      DROP
  (  11BD  12 02 E4          )                      DUP
  (  11C0  12 0D 2C          )                      SPACE
  (  11C3  22                )                      RET

  ''  kTAP    cfa'.of.kTAP*  !.























  
  \ -------------------------------------------------------------------------------
  (  11C4  86 11             )                                                                    \  lfa= 11C4
  (  11C6  06 61 63 63 65 70 )     :  accept     ( b u -- b u )                                                  \  cfa= 11CE
  (  11CE  12 03 24          )                      OVER
  (  11D1  12 03 D2          )                      +
  (  11D4  12 03 24          )                      OVER
                                 BEGIN                              \ 1206 --> 11D7  ===============
  (  11D7  12 03 BC          )                      2DUP
  (  11DA  12 03 6C          )                      XOR
  (  11DD  12 01 C4 0B 12    )   WHILE            \ ?branch  120B   \ 11DD --> 120B  ------
  (  11E2  12 0C D6          )                      KEY      tp15
  (  11E5  12 02 E4          )                      DUP
  (  11E8  12 08 62          )                      BL              tp16
  (  11EB  12 01 7C 7F 00    )                      doLIT    007F
  (  11F0  12 07 68          )                      WITHIN          tp17
  (  11F3  12 01 C4 00 12    )     IF             \ ?branch  1200   \ 11F3 --> 1200  !!!!!!!!!!!!!!!!!!
  (  11F8  12 11 70          )                      TAP             tp18
  (  11FB  12 01 E0 06 12    )     ELSE           \ branch   1206   \ 11F3 --> 1200  !!!!!!!!!!!!!!!!!!
  (  1200  12 05 F8          )                      'TAP            tp19
  (  1203  12 09 A0          )                      @EXECUTE        tp20
                                   THEN                             \ 11FB --> 1206  !!!!!!!!!!!!!!!!!!
  (  1206  12 01 E0 D7 11    )   REPEAT           \ branch   11D7   \ 11DD --> 120B  ------=========
  (  120B  12 03 02          )                      DROP
  (  120E  12 03 24          )                      OVER
  (  1211  12 03 E2          )                      -
  (  1214  22                )                      RET
  (  1215  00                )

  ''  accept     cfa'.of.accept*  !.
  \ -------------------------------------------------------------------------------
  (  1216  C6 11             )                                                                    \  lfa= 1216
  (  1218  06 45 58 50 45 43 )     :  EXPECT    ( b u -- )                                                   \  cfa= 1220
  (  1220  12 05 EA          )                      'EXPECT
  (  1223  12 09 A0          )                      @EXECUTE
  (  1226  12 06 3E          )                      SPAN
  (  1229  12 02 06          )                      !
  (  122C  12 03 02          )                      DROP
  (  122F  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1230  18 12             )                                                                    \  lfa= 1230
  (  1232  05 51 55 45 52 59 )     :  QUERY    ( -- )   \  tib                                              \  cfa= 1238
  (  1238  12 09 8A          )                      TIB             tp10
  (  123B  12 01 7C 50 00    )                      doLIT    0050
  (  1240  12 05 EA          )                      'EXPECT         tp11      \  accept
  (  1243  12 09 A0          )                      @EXECUTE        tp12
  (  1246  12 06 58          )                      #TIB            tp13
  (  1249  12 02 06          )                      !
  (  124C  12 03 02          )                      DROP
  (  124F  12 08 6C          )                      0
  (  1252  12 06 4A          )                      >IN             tp14
  (  1255  12 02 06          )                      !
  (  1258  22                )                      RET
  (  1259  00                )
  \ -------------------------------------------------------------------------------
  (  125A  32 12             )                                                                    \  lfa= 125A
  (  125C  05 43 41 54 43 48 )     :  CATCH  ( ca -- err#/0 )                                                     \  cfa= 1262
  (  1262  12 02 C2          )                      SP@
  (  1265  12 02 54          )                      >R
  (  1268  12 06 9E          )                      HANDLER
  (  126B  12 02 1E          )                      @
  (  126E  12 02 54          )                      >R
  (  1271  12 02 9A          )                      RP@
  (  1274  12 06 9E          )                      HANDLER
  (  1277  12 02 06          )                      !
  (  127A  12 01 F6          )                      EXECUTE         \  .OK
  (  127D  12 02 84          )                      R>
  (  1280  12 06 9E          )                      HANDLER
  (  1283  12 02 06          )                      !
  (  1286  12 02 84          )                      R>
  (  1289  12 03 02          )                      DROP
  (  128C  12 08 6C          )                      0
  (  128F  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1290  5C 12             )                                                                    \  lfa= 1290
  (  1292  05 54 48 52 4F 57 )     :  THROW   ( err# -- err# )                                                    \  cfa= 1298
  (  1298  12 06 9E          )                      HANDLER
  (  129B  12 02 1E          )                      @
  (  129E  12 02 AE          )                      RP!
  (  12A1  12 02 84          )                      R>
  (  12A4  12 06 9E          )                      HANDLER
  (  12A7  12 02 06          )                      !
  (  12AA  12 02 84          )                      R>
  (  12AD  12 03 12          )                      SWAP
  (  12B0  12 02 54          )                      >R
  (  12B3  12 02 D4          )                      SP!
  (  12B6  12 03 02          )                      DROP
  (  12B9  12 02 84          )                      R>
  (  12BC  22                )                      RET
  (  12BD  00                )
  \ -------------------------------------------------------------------------------
  (  12BE  92 12             )                                                                    \  lfa= 12BE
  (  12C0  05 4E 55 4C 4C 24 )     :  NULL$                                                       \  cfa= 12C6
  (  12C6  12 05 7A 00 00    )                      doVAR    0000
  (  12CB  63 6F 79          ) \   00000000  32,'          \    `   R6Fx79  \ coyote ???  \ GRAPHIC.CHAR.SCALING
  (  12CE  6F                ) \   00000000  32,'          \    `   AxR7
  (  12CF  74 65             ) \   00000000  32,'          \    `   A=65
  (  12D1  00                )
  \ -------------------------------------------------------------------------------
  (  12D2  C0 12             )                                                                    \  lfa= 12D2
  (  12D4  05 41 42 4F 52 54 )     :  ABORT   ( -- )                                                    \  cfa= 12DA
  (  12DA  12 12 C6          )                      NULL$
  (  12DD  12 12 98          )                      THROW
  \ -------------------------------------------------------------------------------
  (  12E0  D4 12             )                                                                    \  lfa= 12E0
  (  12E2  46 61 62 6F 72 74 )     :  abor."   ( f -- )                                    compile-only   \  cfa= 12EA
  (  12EA  12 01 C4 FB 12    )   IF               \ ?branch  12FB   \ 12EA --> 12FB  @@@@@@@@@@@@@@@@@@@@@
  (  12EF  12 0D 92          )                      do$
  (  12F2  12 09 54          )                      COUNT
  (  12F5  12 0D 5E          )                      TYPE
  (  12F8  12 12 DA          )                      ABORT
                                 THEN                               \ 12EA --> 12FB  @@@@@@@@@@@@@@@@@@@@@
  (  12FB  12 0D 92          )                      do$
  (  12FE  12 03 02          )                      DROP
  (  1301  22                )                      RET

     ''  abor."  >mca
     ''  abor."  cfa'.of.abor."*   !.
     :.  abor."          abor."'*  ;.
  \ -------------------------------------------------------------------------------
  (  1302  E2 12             )                                                                    \  lfa= 1302
  (  1304  0A 24 49 4E 54 45 )     :  $INTERPRET   ( a -- )                                               \  cfa= 1310
  (  1310  12 10 E0          )                      NAME?
  (  1313  12 02 F4          )                      ?DUP
  (  1316  12 01 C4 3B 13    )   IF               \ ?branch  133B ) \ 1316 --> 133B  *********
  (  131B  12 02 1E          )                      @
  (  131E  12 01 7C 40 00    )                      doLIT    0040
  (  1323  12 03 4C          )                      AND
  (  1326  12 12 EA          )                      abor."  compile only"
  (  1337  12 01 F6          )                      EXECUTE
  (  133A  22                )                      RET
                                 THEN                               \ 1316 --> 133B  *********
  (  133B  12 06 82          )                      'NUMBER
  (  133E  12 09 A0          )                      @EXECUTE
  (  1341  12 01 C4 47 13    )   IF               \ ?branch  1347   \ 1341 --> 1347  ------
  (  1346  22                )                      RET
                                 THEN                               \ 1341 --> 1347  ------
  (  1347  12 12 98          )                      THROW

     ''  $INTERPRET  cfa'.of.$INTERPRET*   !.
  \ -------------------------------------------------------------------------------
  (  134A  04 13             )                                                                    \  lfa= 134A
  (  134C  81 5B             )     :  [    ( -- )                           immediate                   \  cfa= 134E
  (  134E  12 01 7C 10 13    )                    ( doLIT    1310 )   cfa'.of.$INTERPRET*  ,doLIT*+(#)
  (  1353  12 06 72          )                      'EVAL
  (  1356  12 02 06          )                      !          
  (  1359  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  135A  4C 13             )                                                                    \  lfa= 135A
  (  135C  03 2E 4F 4B       )     :  .OK   ( -- )                                                       \  cfa= 1360
  (  1360  12 01 7C 10 13    )                    ( doLIT    1310 )   cfa'.of.$INTERPRET*  ,doLIT*+(#)
  (  1365  12 06 72          )                      'EVAL
  (  1368  12 02 1E          )                      @
  (  136B  12 04 46          )                      =
  (  136E  12 01 C4 7A 13    )   IF               \ ?branch  137A   \ 136E --> 137A  @@@@@@@@@@@@@@@@@@@@@
  (  1373  12 0D BC          )                      ."|  OK "
                                 THEN                               \ 136E --> 137A  @@@@@@@@@@@@@@@@@@@@@
  (  137A  12 0D 82          )                      CR
  (  137D  22                )                      RET

  ''  .OK       cfa'.of..OK*  !.
  \ -------------------------------------------------------------------------------
  (  137E  5C 13             )                                                                    \  lfa= 137E
  (  1380  06 3F 53 54 41 43 )     :  ?STACK   ( -- )                                                    \  cfa= 1388
  (  1388  12 08 DE          )                      DEPTH
  (  138B  12 03 3A          )                      0<
  (  138E  12 12 EA          )                      abor."  underflow??"
  (  139C  22                )                      RET
  (  139D  00                )
  \ -------------------------------------------------------------------------------
  (  139E  80 13             )                                                                    \  lfa= 139E
  (  13A0  04 45 56 41 4C    )     :  EVAL    ( -- )                                                    \  cfa= 13A6
                                 BEGIN                              \ 13BD --> 13A6  ////////////
  (  13A6  12 0F A2          )                      TOKEN
  (  13A9  12 02 E4          )                      DUP
  (  13AC  12 02 44          )                      C@
  (  13AF  12 01 C4 C2 13    )   WHILE            \ ?branch  13C2 ) \ 13AF --> 13C2  ////////////
  (  13B4  12 06 72          )                      'EVAL
  (  13B7  12 09 A0          )                      @EXECUTE
  (  13BA  12 13 88          )                      ?STACK
  (  13BD  12 01 E0 A6 13    )   REPEAT           \ branch   13A6 ) \ 13AF --> 13C2  ////////////
  (  13C2  12 03 02          )                      DROP
  (  13C5  12 06 16          )                      'PROMPT
  (  13C8  12 09 A0          )                      @EXECUTE
  (  13CB  22                )                      RET

  ''  EVAL     cfa'.of.EVAL*  !.
  \ -------------------------------------------------------------------------------
  (  13CC  A0 13             )                                                                    \  lfa= 13CC
  (  13CE  06 50 52 45 53 45 )     :  PRESET  ( -- )                                                     \  cfa= 13D6
  (  13D6  12 05 B2          )                      SP0
  (  13D9  12 02 1E          )                      @
  (  13DC  12 02 D4          )                      SP!
  (  13DF  12 01 7C 80 80    )                    ( doLIT    20018080 )  content.of.'tib*  ,doLIT*+(#)
  (  13E4  12 06 58          )                      #TIB
  (  13E7  12 04 78          )                      CELL+
  (  13EA  12 02 06          )                      !
  (  13ED  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  13EE  CE 13             )                                                                    \  lfa= 13EE
  (  13F0  43 78 69 6F       )     :  xio   ( a a a -- )                                        compile-only   \  cfa= 13F4
  (  13F4  12 01 7C CE 11    )                    ( doLIT    11CE )   cfa'.of.accept*  ,doLIT*+(#)
  (  13F9  12 05 EA          )                      'EXPECT
  (  13FC  12 09 26          )                      2!
  (  13FF  12 06 06          )                      'ECHO
  (  1402  12 09 26          )                      2!
  (  1405  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1406  F0 13             )                                                                    \  lfa= 1406
  (  1408  04 46 49 4C 45    )     :  FILE   ( -- )                                                     \  cfa= 140E
  (  140E  12 01 7C 1A 0D    )                    ( doLIT    0D1A )   cfa'.of.PACE*    ,doLIT*+(#)
  (  1413  12 01 7C 02 03    )                    ( doLIT    0302 )   cfa'.of.DROP*    ,doLIT*+(#)
  (  1418  12 01 7C 8C 11    )                    ( doLIT    118C )   cfa'.of.kTAP*    ,doLIT*+(#)
  (  141D  12 13 F4          )                      xio
  (  1420  22                )                      RET
  (  1421  00                )
  \ -------------------------------------------------------------------------------
  (  1422  08 14             )                                                                    \  lfa= 1422
  (  1424  04 48 41 4E 44    )     :  HAND    ( -- )                                                    \  cfa= 142A
  (  142A  12 01 7C 60 13    )                    ( doLIT    1360 )   cfa'.of..OK*     ,doLIT*+(#)
  (  142F  12 01 7C E8 0C    )                    ( doLIT    0CE8 )   cfa'.of.EMIT*    ,doLIT*+(#)
  (  1434  12 01 7C 8C 11    )                    ( doLIT    118C )   cfa'.of.kTAP*    ,doLIT*+(#)
  (  1439  12 13 F4          )                      xio
  (  143C  22                )                      RET
  (  143D  00                )
  \ -------------------------------------------------------------------------------
  (  143E  24 14             )                                                                    \  lfa= 143E
  (  1440  03 49 2F 4F       )     :  I/O    ( -- )                                                    \  cfa= 1444
  (  1444  12 05 7A 40 01    )                    ( doVAR    0140 )   cfa'.of.?RX*     ,doVAR*+(#)
  (  1449  60 01             )                                        cfa'.of.TX!*  @.  32,'
  (  144B  00                )                      
  \ -------------------------------------------------------------------------------
  (  144C  40 14             )                                                                    \  lfa= 144C
  (  144E  07 43 4F 4E 53 4F )     :  CONSOLE   ( -- )                                                  \  cfa= 1456
  (  1456  12 14 44          )                      I/O
  (  1459  12 09 3C          )                      2@
  (  145C  12 05 CC          )                      '?KEY
  (  145F  12 09 26          )                      2!
  (  1462  12 14 2A          )                      HAND
  (  1465  22                )                      RET








  (  1466  4E 14             )                                                                    \  lfa= 1466
  (  1468  04 51 55 49 54    )     :  QUIT    ( -- )                                                    \  cfa= 146E
  (  146E  12 05 BE          )                      RP0
  (  1471  12 02 1E          )                      @
  (  1474  12 02 AE          )                      RP!
                                 BEGIN                              \ 14D5 --> 1477  *********
  (  1477  12 13 4E          )                      [
                                   BEGIN  \ 37 emit                         \ 1488 --> 147A  !!!!!!!!!!!!!!!!!!
  (  147A  12 12 38          )                      QUERY    tp1
  (  147D  12 01 7C A6 13    )                    ( doLIT    13A6 )   cfa'.of.EVAL*  ,doLIT*+(#)
  (  1482  12 12 62          )                      CATCH    tp2
  (  1485  12 02 F4          )                      ?DUP
  (  1488  12 01 C4 7A 14    )     UNTIL          \ ?branch  147A   \ 1488 --> 147A  !!!!!!!!!!!!!!!!!!
  (  148D  12 06 16          )                      'PROMPT  tp3
  (  1490  12 02 1E          )                      @
  (  1493  12 02 54          )                      >R
  (  1496  12 14 56          )                      CONSOLE  tp4
  (  1499  12 12 C6          )                      NULL$    tp5
  (  149C  12 03 24          )                      OVER
  (  149F  12 03 6C          )                      XOR      tp6
  (  14A2  12 01 C4 BA 14    )     IF             \ ?branch  14BA   \ 14A2 --> 14BA  ===============
  (  14A7  12 0D 2C          )                      SPACE
  (  14AA  12 09 54          )                      COUNT    tp7
  (  14AD  12 0D 5E          )                      TYPE     tp8
  (  14B0  12 0D BC          )                      ."|  ???"
  (  14B7  12 0D 82          )                      CR
                                   THEN                             \ 14A2 --> 14BA  ===============
  (  14BA  12 02 84          )                      R>
  (  14BD  12 01 7C 60 13    )                    ( doLIT    1360 )   cfa'.of..OK*  ,doLIT*+(#)
  (  14C2  12 03 6C          )                      XOR      tp9
  (  14C5  12 01 C4 D2 14    )     IF             \ ?branch  14D2   \ 14C5 --> 14D2  +++
  (  14CA  12 01 7C 1B 00    )                      doLIT    001B
  (  14CF  12 0C E8          )                      EMIT
                                   THEN                      tp10       \ 14C5 --> 14D2  +++
  (  14D2  12 13 D6          )                      PRESET   tp11
  (  14D5  12 01 E0 77 14    )   AGAIN            \ branch   1477   \ 14D5 --> 1477  *********
  \ -------------------------------------------------------------------------------
  (  14DA  68 14             )                                                                    \  lfa= 14DA
  (  14DC  01 27             )     :  '      ( -- ca )                                                      \  cfa= 14DE
  (  14DE  12 0F A2          )                      TOKEN
  (  14E1  12 10 E0          )                      NAME?
  (  14E4  12 01 C4 EA 14    )   IF               \ ?branch  14EA   \ 14E4 --> 14EA  @@@@@@@@@@@@@@@@@@@@@
  (  14E9  22                )                      RET
                                 THEN                               \ 14E4 --> 14EA  @@@@@@@@@@@@@@@@@@@@@
  (  14EA  12 12 98          )                      THROW
  (  14ED  00                )                      
  \ -------------------------------------------------------------------------------
  (  14EE  DC 14             )                                                                    \  lfa= 14EE
  (  14F0  05 41 4C 4C 4F 54 )     :  ALLOT                                                       \  cfa= 14F6
  (  14F6  12 06 CA          )                      CP
  (  14F9  12 09 0C          )                      +!
  (  14FC  22                )                      RET
  (  14FD  00                )                      
  \ -------------------------------------------------------------------------------
  (  14FE  F0 14             )                                                                    \  lfa= 14FE
  (  1500  01 2C             )     :  ,                                                           \  cfa= 1502
  (  1502  12 09 6A          )                      HERE
  (  1505  12 02 E4          )                      DUP
  (  1508  12 04 78          )                      CELL+
  (  150B  12 06 CA          )                      CP
  (  150E  12 02 06          )                      !
  (  1511  12 02 06          )                      !
  (  1514  22                )                      RET
  (  1515  00                )
  \ -------------------------------------------------------------------------------
  (  1516  00 15             )                                                                    \  lfa= 1516
  (  1518  02 43 2C          )     :  C,                                                          \  cfa= 151C
  (  151C  12 09 6A          )                      HERE
  (  151F  12 02 E4          )                      DUP
  (  1522  12 04 A8          )                      1+
  (  1525  12 06 CA          )                      CP
  (  1528  12 02 06          )                      !
  (  152B  12 02 2E          )                      C!
  (  152E  22                )                      RET
  (  152F  00                )
  \ -------------------------------------------------------------------------------
  (  1530  18 15             )                                                                    \  lfa= 1530
  (  1532  89 5B 43 4F 4D 50 )     :  [COMPILE]                       immediate                   \  cfa= 153C
  (  153C  12 14 DE          )                      '
  (  153F  12 15 02          )                      ,
  (  1542  22                )                      RET
  (  1543  00                )                      
  \ -------------------------------------------------------------------------------
  (  1544  32 15             )                                                                    \  lfa= 1544
  (  1546  47 43 4F 4D 50 49 )     :  COMPILE                                      compile-only   \  cfa= 154E
  (  154E  12 02 84          )                      R>
  (  1551  12 02 E4          )                      DUP
  (  1554  12 02 1E          )                      @
  (  1557  12 15 02          )                      ,
  (  155A  12 04 78          )                      CELL+
  (  155D  12 02 54          )                      >R
  (  1560  22                )                      RET
  (  1561  00                )
  \ -------------------------------------------------------------------------------









  \ -------------------------------------------------------------------------------
  t:  [x=0?]    ( code -- )  push.LR   SWAP  here ( cHERE )  {cell+}  -  {2/}  c,   c,  ret  \ immediate'

  t:  [z=1?]                 push.LR   d0  ...  [x=0?]                ret    immediate'
  t:  [z=0?]                 push.LR   d1  ...  [x=0?]                ret    immediate'

  t:  [c=1?]                 push.LR   d2  ...  [x=0?]                ret    immediate'
  t:  [c=0?]                 push.LR   d3  ...  [x=0?]                ret    immediate'

  t:  [n=1?]                 push.LR   d4  ...  [x=0?]                ret    immediate'
  t:  [n=0?]                 push.LR   d5  ...  [x=0?]                ret    immediate'

  t:  [v=1?]                 push.LR   d6  ...  [x=0?]                ret    immediate'
  t:  [v=0?]                 push.LR   d7  ...  [x=0?]                ret    immediate'

  t:  [u>?]                  push.LR   d8  ...  [x=0?]                ret    immediate'
  t:  [u<=?]                 push.LR   d9  ...  [x=0?]                ret    immediate'

  t:  [>=?]                  push.LR   da  ...  [x=0?]                ret    immediate'
  t:  [<?]                   push.LR   db  ...  [x=0?]                ret    immediate'

  t:  [>?]                   push.LR   dc  ...  [x=0?]                ret    immediate'
  t:  [<=?]                  push.LR   dd  ...  [x=0?]                ret    immediate'

  t:  [jmp]                  push.LR   de  ...  [x=0?]                ret    immediate'
  t:  [???]                  push.LR   df  ...  [x=0?]                ret    immediate'

  t:   do       push.LR  '' (do)    ...  call   here ( chere )  ret    immediate'  \ ??????
  t:  ?do       push.LR  '' (?do)   ...  call   here ( chere )  ret    immediate'  \ ??????
  t:   loop     push.LR  '' (loop)  ...  call   [v=0?]          ret    immediate'
  t:  +loop     push.LR  '' (+loop) ...  call   [v=0?]          ret    immediate'



  ''     do    cfa'>nfa'   #if  80  swap.  or!'  #then
  ''    ?do    cfa'>nfa'   #if  80  swap.  or!'  #then
  ''   loop    cfa'>nfa'   #if  80  swap.  or!'  #then
  ''  +loop    cfa'>nfa'   #if  80  swap.  or!'  #then

  :.     do      (do)    here'  ;.   \ override the previous  do
  :.    ?do     (?do)    here'  ;.   \ override the previous ?do
  :.   loop    (loop)    v=0?   ;.   \ override the previous  loop
  :.  +loop   (+loop)    v=0?   ;.   \ override the previous +loop















  \ -------------------------------------------------------------------------------
  (  1698  8A 16             )                                                                    \  lfa= 1698
  (  169A  86 41 42 4F 52 54 )     :  ABORT"                          immediate                   \  cfa= 16A2
  (  16A2  12 01 7C EA 12    )                    ( doLIT    12EA )   cfa'.of.abor."*  ,doLIT*+(#)
  (  16A7  12 17 DA          )                      CALL
  (  16AA  12 15 7E          )                      $."
  (  16AD  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  16AE  9A 16             )                                                                    \  lfa= 16AE
  (  16B0  82 24 22          )     :  $"                              immediate                   \  cfa= 16B4
  (  16B4  12 01 7C B2 0D    )                    ( doLIT    0DB2 )   cfa'.of.$"|*     ,doLIT*+(#)
  (  16B9  12 17 DA          )                      CALL
  (  16BC  12 15 7E          )                      $."
  (  16BF  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  16C0  B0 16             )                                                                    \  lfa= 16C0
  (  16C2  82 2E 22          )     :  ."                              immediate                   \  cfa= 16C6
  (  16C6  12 01 7C BC 0D    )                    ( doLIT    0DBC )   cfa'.of.."|*     ,doLIT*+(#)
  (  16CB  12 17 DA          )                      CALL
  (  16CE  12 15 7E          )                      $."
  (  16D1  22                )                      RET

  :.  ."   ."|   ;.
  \ -------------------------------------------------------------------------------
  (  16D2  C2 16             )                                                                    \  lfa= 16D2
  (  16D4  07 3F 55 4E 49 51 )     :  ?UNIQUE                                                     \  cfa= 16DC
  (  16DC  12 02 E4          )                      DUP
  (  16DF  12 10 E0          )                      NAME?
  (  16E2  12 01 C4 FB 16    )   IF               \ ?branch  16FB   \ 16E2 --> 16FB  *********
  (  16E7  12 0D BC          )                      ."|  reDef  "
  (  16F2  12 03 24          )                      OVER
  (  16F5  12 09 54          )                      COUNT
  (  16F8  12 0D 5E          )                      TYPE
                                 THEN                               \ 16E2 --> 16FB  *********
  (  16FB  12 03 02          )                      DROP
  (  16FE  22                )                      RET
  (  16FF  00                )
  \ -------------------------------------------------------------------------------
  (  1700  D4 16             )                                                                    \  lfa= 1700
  (  1702  03 24 2E 6E       )     :  $.n                                                         \  cfa= 1706
  (  1706  12 02 E4          )                      DUP
  (  1709  12 02 44          )                      C@
  (  170C  12 01 C4 48 17    )   IF               \ ?branch  1748   \ 170C --> 1748  *********
  (  1711  12 16 DC          )                      ?UNIQUE
  (  1714  12 02 E4          )                      DUP
  (  1717  12 06 E4          )                      LAST
  (  171A  12 02 06          )                      !
  (  171D  12 02 E4          )                      DUP
  (  1720  12 02 E4          )                      DUP
  (  1723  12 02 44          )                      C@
  (  1726  12 03 D2          )                      +
  (  1729  12 04 A8          )                      1+
  (  172C  12 04 DC          )                      ALIGNED
  (  172F  12 06 CA          )                      CP
  (  1732  12 02 06          )                      !
  (  1735  12 04 88          )                      CELL-
  (  1738  12 06 BE          )                      CURRENT
  (  173B  12 02 1E          )                      @
  (  173E  12 02 1E          )                      @
  (  1741  12 03 12          )                      SWAP
  (  1744  12 02 06          )                      !
  (  1747  22                )                      RET
                                 THEN                               \ 170C --> 1748  *********
  (  1748  12 0D B2          )                      $"|  name  "
  (  1751  12 12 98          )                      THROW
  \ -------------------------------------------------------------------------------
  (  1754  02 17             )                                                                    \  lfa= 1754
  (  1756  08 24 43 4F 4D 50 )     :  $COMPILE                                                    \  cfa= 1760
  (  1760  12 10 E0          )                      NAME?
  (  1763  12 02 F4          )                      ?DUP
  (  1766  12 01 C4 83 17    )   IF               \ ?branch  1783   \ 1766 --> 1783  ===============
  (  176B  12 02 1E          )                      @
  (  176E  12 01 7C 80 00    )                      doLIT    0080
  (  1773  12 03 4C          )                      AND
  (  1776  12 01 C4 7F 17    )     IF             \ ?branch  177F   \ 1776 --> 177F  *********
  (  177B  12 01 F6          )                      EXECUTE
  (  177E  22                )                      RET
                                   THEN                             \ 1776 --> 177F  *********
  (  177F  12 17 DA          )                      CALL
  (  1782  22                )                      RET
                                 THEN                               \ 1766 --> 1783  ===============
  (  1783  12 06 82          )                      'NUMBER
  (  1786  12 09 A0          )                      @EXECUTE
  (  1789  12 01 C4 92 17    )   IF               \ ?branch  1792   \ 1789 --> 1792  !!!!!!!!!!!!!!!!!!
  (  178E  12 15 6C          )                      LITERAL
  (  1791  22                )                      RET
                                 THEN                               \ 1789 --> 1792  !!!!!!!!!!!!!!!!!!
  (  1792  12 12 98          )                      THROW
  (  1795  00                )

  ''  $COMPILE    cfa'.of.$COMPILE*  !.
  \ -------------------------------------------------------------------------------
  (  1796  56 17             )                                                                    \  lfa= 1796
  (  1798  05 4F 56 45 52 54 )     :  OVERT                                                       \  cfa= 179E
  (  179E  12 06 E4          )                      LAST
  (  17A1  12 02 1E          )                      @
  (  17A4  12 06 BE          )                      CURRENT
  (  17A7  12 02 1E          )                      @
  (  17AA  12 02 06          )                      !
  (  17AD  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  17AE  98 17             )                                                                    \  lfa= 17AE
  (  17B0  C1 3B             )     :  ; \ ;   ^                           immediate    compile-only   \  cfa= 17B2
  (  17B2  12 01 7C 22 00    )                      doLIT    0022    \  ,;
  (  17B7  12 15 1C          )                      C,               \
  (  17BA  12 13 4E          )                      [
  (  17BD  12 17 9E          )                      OVERT
  (  17C0  22                )                      RET
  (  17C1  00                )
comment;

                                    t:  ;                                  immediate    compile-only   \ cfa=     6664
  (  00006664  00 B5             )                  push.LR
  (  00006666  FE F7 51 FA 00 BD )                  doLIT   0000BD00    \  ,;                     \      4B0C
  (  0000666E  FF F7 65 FD       )                  16,                 \                         \      613C
  (  00006672  FF F7 BF FB       )                  [                                             \      5DF4
  (  00006676  FF F7 EB FF       )                  OVERT                                         \      6650
  (  0000667A  00 BD             )                  ret

  :.  ;   RET   ;.
  \ -------------------------------------------------------------------------------
  (  17C2  B0 17             )                                                                    \  lfa= 17C2
  (  17C4  01 5D             )     :  ]                                                           \  cfa= 17C6
  (  17C6  12 01 7C 60 17    )                    ( doLIT    1760 )   cfa'.of.$COMPILE*  ,doLIT*+(#)
  (  17CB  12 06 72          )                      'EVAL
  (  17CE  12 02 06          )                      !
  (  17D1  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  17D2  C4 17             )                                                                    \  lfa= 17D2
  (  17D4  04 43 41 4C 4C    )     :  CALL                                                        \  cfa= 17DA
  (  17DA  12 01 7C 12 00    )                      doLIT    0012
  (  17DF  12 15 1C          )                      C,
  (  17E2  12 04 24          )                      FLIP
  (  17E5  12 15 02          )                      ,
  (  17E8  22                )                      RET
  (  17E9  00                )                      
comment;
  \ -------------------------------------------------------------------------------
  (  17EA  D4 17             )                                                                    \  lfa= 17EA
  (  17EC  01 3A             )     :  :        \ :  `                                             \  cfa= 17EE
                                       ( CP @ ALIGNED CP ! )   \  [push.LR]
  (  17EE  12 0F A2          )                      TOKEN
  (  17F1  12 17 06          )                      $.n           [push.LR]
  (  17F4  12 17 C6          )                      ]
  (  17F7  22                )                      RET

  :.  :    t:new*4   push.LR   ;.
  \ -------------------------------------------------------------------------------
  (  17F8  EC 17             )                                                                    \  lfa= 17F8
  (  17FA  09 49 4D 4D 45 44 )     :  IMMEDIATE                                                   \  cfa= 1804
  (  1804  12 01 7C 80 00    )                      doLIT    0080
  (  1809  12 06 E4          )                      LAST
  (  180C  12 02 1E          )                      @
  (  180F  12 02 1E          )                      @
  (  1812  12 03 5C          )                      OR
  (  1815  12 06 E4          )                      LAST
  (  1818  12 02 1E          )                      @
  (  181B  12 02 06          )                      !
  (  181E  22                )                      RET
  (  181F  00                )

:.  immediate   immediate'  ;.
  \ -------------------------------------------------------------------------------
  (  1820  FA 17             )                                                                    \  lfa= 1820
  (  1822  04 55 53 45 52    )     :  USER                                                        \  cfa= 1828
  (  1828  12 0F A2          )                      TOKEN
  (  182B  12 17 06          )                      $.n       [push.LR]
  (  182E  12 17 9E          )                      OVERT
  (  1831  12 01 7C 9C 05    )                    ( doLIT    059C )   cfa'.of.doUSER*  ,doLIT*+(#)
  (  1836  12 17 DA          )                      CALL
  (  1839  12 15 02          )                      ,
  (  183C  22                )                      RET
  (  183D  00                )                      
  \ -------------------------------------------------------------------------------
  (  183E  22 18             )                                                                    \  lfa= 183E
  (  1840  06 43 52 45 41 54 )     :  CREATE                                                      \  cfa= 1848
  (  1848  12 0F A2          )                      TOKEN
  (  184B  12 17 06          )                      $.n        [push.LR]
  (  184E  12 17 9E          )                      OVERT
  (  1851  12 01 7C 7A 05    )                    ( doLIT    057A )   cfa'.of.doVAR*  ,doLIT*+(#)
  (  1856  12 17 DA          )                      CALL
  (  1859  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  185A  40 18             )                                                                    \  lfa= 185A
  (  185C  08 56 41 52 49 41 )     :  VARIABLE               ( used in all RAM system only )      \  cfa= 1866
  (  1866  12 18 48          )                      CREATE
  (  1869  12 08 6C          )                      0
  (  186C  12 15 02          )                      ,
  (  186F  22                )                      RET

  :.  CREATE'    t:  push.LR  ,doLIT*  here'  6  +.  32,'  ret             ;.   \ used in ram only    ???????
  :.  VARIABLE'  t:  push.LR  ,doLIT*  here'  6  +.  32,'  ret  0  32,'    ;.   \ used in ram only    ???????
  \   var                                                                       \ used in ram and flash
  \ -------------------------------------------------------------------------------
  (  1870  5C 18             )                                                                    \  lfa= 1870
  (  1872  05 5F 54 59 50 45 )     :  _TYPE                                                       \  cfa= 1878
  (  1878  12 02 54          )                      >R
  (  187B  12 01 E0 8F 18    )   AHEAD,           \ branch   188F   \ 187B --> 188F  ////////////
                                   BEGIN                            \ 188F --> 1880  ------
  (  1880  12 02 E4          )                      DUP
  (  1883  12 02 44          )                      C@
  (  1886  12 08 B2          )                      >CHAR
  (  1889  12 0C E8          )                      EMIT
  (  188C  12 04 A8          )                      1+
                                 THEN,                                \ 187B --> 188F  ////////////
  (  188F  12 01 96 80 18    )     NEXT           \ nex.     1880     \ 188F --> 1880  ------
  (  1894  12 03 02          )                      DROP
  (  1897  22                )                      RET       
  \ -------------------------------------------------------------------------------
  (  1898  72 18             )                                                                    \  lfa= 1898
  (  189A  03 64 6D 2B       )     :  dm+                                                         \  cfa= 189E
  (  189E  12 03 24          )                      OVER
  (  18A1  12 01 7C 04 00    )                      doLIT    0004
  (  18A6  12 0D E8          )                      U.R
  (  18A9  12 0D 2C          )                      SPACE
  (  18AC  12 02 54          )                      >R
  (  18AF  12 01 E0 C5 18    )   AHEAD,           \ branch   18C5   \ 18AF --> 18C5  ===============
                                   BEGIN                            \ 18C5 --> 18B4  *********
  (  18B4  12 02 E4          )                      DUP
  (  18B7  12 02 44          )                      C@
  (  18BA  12 01 7C 03 00    )                      doLIT    0003
  (  18BF  12 0D E8          )                      U.R
  (  18C2  12 04 A8          )                      1+
                                 THEN,
  (  18C5  12 01 96 B4 18    )     NEXT           \ nex.     18B4   \ 18C5 --> 18B4  *********
  (  18CA  22                )                      RET
  (  18CB  00                )
  \ -------------------------------------------------------------------------------
  (  18CC  9A 18             )                                                                    \  lfa= 18CC
  (  18CE  04 44 55 4D 50    )     :  DUMP                                                        \  cfa= 18D4
  (  18D4  12 06 24          )                      BASE
  (  18D7  12 02 1E          )                      @
  (  18DA  12 02 54          )                      >R
  (  18DD  12 0B 7C          )                      HEX
  (  18E0  12 01 7C 10 00    )                      doLIT    0010
  (  18E5  12 07 F6          )                      /
  (  18E8  12 02 54          )                      >R
                                 BEGIN                              \ 1913 --> 18EB  *********
  (  18EB  12 0D 82          )                      CR
  (  18EE  12 01 7C 10 00    )                      doLIT    0010
  (  18F3  12 03 BC          )                      2DUP
  (  18F6  12 18 9E          )                      dm+
  (  18F9  12 03 90          )                      ROT
  (  18FC  12 03 90          )                      ROT
  (  18FF  12 08 8C          )                      2
  (  1902  12 0D 3E          )                      SPACES
  (  1905  12 18 78          )                      _TYPE
  (  1908  12 0C F8          )                      NUF?
  (  190B  12 03 F6          )                      NOT
  (  190E  12 01 C4 1D 19    )     IF,            \ ?branch  191D   \ 190E --> 191D  !!!!!!!!!!!!!!!!!!
  (  1913  12 01 96 EB 18    )   NEXT             \ nex.     18EB   \ 1913 --> 18EB  *********
  (  1918  12 01 E0 23 19    )     ELSE,          \ branch   1923 ) \ 190E --> 191D  !!!!!!!!!!!!!!!!!!
  (  191D  12 02 84          )                      R>
  (  1920  12 03 02          )                      DROP
                                   THEN,                            \ 1918 --> 1923  +++
  (  1923  12 03 02          )                      DROP
  (  1926  12 02 84          )                      R>
  (  1929  12 06 24          )                      BASE
  (  192C  12 02 06          )                      !
  (  192F  22                )                      RET       
  \ -------------------------------------------------------------------------------
comment:
  (  1930  CE 18             )                                                                    \  lfa= 1930
  (  1932  02 2E 53          )     :  .S      \ .S                                                \  cfa= 1936
  (  1936  12 0D 82          )                      CR
  (  1939  12 08 DE          )                      DEPTH
  (  193C  12 02 54          ) (  1>  )             >R
  (  193F  12 01 E0 4D 19    )   AHEAD,           \ branch   194D   \ 193F --> 194D  ===============
                                   BEGIN                            \ 194D --> 1944  *********
  (  1944  12 02 6A          )                      R@
  (  1947  12 08 F6          )                      PICK
  (  194A  12 0E 1E          )                      .
                                 THEN,                              \ 193F --> 194D  ===============
  (  194D  12 01 96 44 19    )     NEXT           \ nex.     1944   \ 194D --> 1944  *********
  (  1952  12 0D BC          )                 \     ."|  <sp"
  (  195A  22                )                      RET
  (  195B  00                )
comment;
  \ -------------------------------------------------------------------------------
  (  195C  32 19             )                                                                    \  lfa= 195C
  (  195E  04 21 43 53 50    )     :  !CSP                                                        \  cfa= 1964
  (  1964  12 02 C2          )                      SP@
  (  1967  12 06 64          )                      CSP
  (  196A  12 02 06          )                      !
  (  196D  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  196E  5E 19             )                                                                    \  lfa= 196E
  (  1970  04 3F 43 53 50    )     :  ?CSP                                                        \  cfa= 1976
  (  1976  12 02 C2          )                      SP@
  (  1979  12 06 64          )                      CSP
  (  197C  12 02 1E          )                      @
  (  197F  12 03 6C          )                      XOR
  (  1982  12 12 EA          )                      abor." stacks"
  (  198C  22                )                      RET
  (  198D  00                )
  \ -------------------------------------------------------------------------------
head.adjacent.to.cfa?  @.
#if
  (  198E  70 19             )                                                                    \  lfa= 198E
  (  1990  05 3E 4E 41 4D 45 )     :  >NAME   ( ca -- na, F )                                                   \  cfa= 1996
  (  1996  12 06 BE          )                      CURRENT
                                 BEGIN                              \ 19D4 --> 1999  !!!!!!!!!!!!!!!!!!
  (  1999  12 04 78          )                      CELL+
  (  199C  12 02 1E          )                      @
  (  199F  12 02 F4          )                      ?DUP
  (  19A2  12 01 C4 E6 19    )     IF,,           \ ?branch  19E6   \ 19A2 --> 19E6  ===============
  (  19A7  12 03 BC          )                      2DUP
                                     BEGIN                          \ 19C6 --> 19AA  ------
  (  19AA  12 02 1E          )                      @
  (  19AD  12 02 E4          )                      DUP
  (  19B0  12 01 C4 CB 19    )       WHILE        \ ?branch  19CB   \ 19B0 --> 19CB  !!!!!!!!!!!!!!!!!!
  (  19B5  12 03 BC          )                      2DUP
  (  19B8  12 0F DA          )                      NAME>
  (  19BB  12 03 6C          )                      XOR
  (  19BE  12 01 C4 CB 19    )         if,        \ ?branch  19CB   \ 19BE --> 19CB  !!!!!!!!!!!!!!!!!!
  (  19C3  12 04 88          )                      CELL-
  (  19C6  12 01 E0 AA 19    )       REPEAT       \ branch   19AA   \ 19B0 --> 19CB  !!!!!!!!!!!!!!!!!!
                                       THEN,                        \ 19BE --> 19CB  !!!!!!!!!!!!!!!!!!
  (  19CB  12 03 12          )                      SWAP
  (  19CE  12 03 02          )                      DROP
  (  19D1  12 02 F4          )                      ?DUP
  (  19D4  12 01 C4 99 19    )   UNTIL            \ ?branch  1999   \ 19D4 --> 1999  !!!!!!!!!!!!!!!!!!
  (  19D9  12 03 12          )                      SWAP
  (  19DC  12 03 02          )                      DROP
  (  19DF  12 03 12          )                      SWAP
  (  19E2  12 03 02          )                      DROP
  (  19E5  22                )                      RET
                                   THEN,,                               \ 19A2 --> 19E6  ===============
  (  19E6  12 03 02          )                      DROP
  (  19E9  12 08 6C          )                      0     ...*
  (  19EC  22                )                      RET
  (  19ED  00                )
  \ ------------------------------------------------------------------------
#else                                             \ head and cfa are seperated.
                                    t:  >NAME   ( ca -- na, F )                                              \ cfa=     68A0
  (  000068A0  00 B5             )                  push.LR
  (  000068A2  40 B4 40 CF       )                  {>r}
  (  000068A6  FE F7 CF F9       )                  CONTEXT                                       \      4C48
  (  000068AA  36 68             )                  {@}
                                      begin'.
  (  000068AC  04 3F 3E 60       )                  {dup}
  (  000068B0  00 2E             )                  T:0
  (  000068B2  40 CF             )                  {drop}
  (  000068B4  0F D0             )      if'<> \ z=1? eq?             \ 000068B4 --> 000068D6 --------------------------------

  (  000068B6  04 3F 3E 60       )                  {dup}
  (  000068BA  FF F7 23 F9       )                  NAME>                                         \      5B04
  (  000068BE  04 3F 3E 60 00 9E )                  {r@}
  (  000068C4  01 CF 46 40       )                  {xor}
  (  000068C8  00 2E             )                  T:0
  (  000068CA  40 CF             )                  {drop}
  (  000068CC  03 D0             )        if'<> \ z=1? eq?           \ 000068CC --> 000068D6 +++++++++
  (  000068CE  FE F7 11 FD       )                  CELL-                                         \      52F4
  (  000068D2  36 68             )                  {@}
  (  000068D4  EA E7             )    again'.   \   jmp_68AC11
                                          then'                      \ 000068CC --> 000068D6 +++++++++
                                        then'
  (  000068D6  04 3F 3E 60 40 BC )                  {r>}
  (  000068DC  40 CF             )                  {drop}
  (  000068DE  00 BD             )                  ret
#then
  \ -------------------------------------------------------------------------------
  (  19EE  90 19             )                                                                    \  lfa= 19EE
  (  19F0  03 2E 49 44       )     :  .ID  ( na -- )                                                       \  cfa= 19F4
  (  19F4  12 02 F4          )                      ?DUP
  (  19F7  12 01 C4 0B 1A    )   IF               \ ?branch  1A0B   \ 19F7 --> 1A0B  +++
  (  19FC  12 09 54          )                      COUNT
  (  19FF  12 01 7C 1F 00    )                      doLIT    001F
  (  1A04  12 03 4C          )                      AND
  (  1A07  12 18 78          )                      _TYPE
  (  1A0A  22                )                      RET
                                 THEN                               \ 19F7 --> 1A0B  +++
  (  1A0B  12 0D BC          )                      ."|  {noName}  "
  (  1A18  22                )                      RET
  (  1A19  00                )
  \ -------------------------------------------------------------------------------
  (  1A1A  F0 19             )                                                                    \  lfa= 1A1A
  (  1A1C  03 53 45 45       )     :  SEE    \  SE.                                               \  cfa= 1A20
  (  1A20  12 14 DE          )                      '
  (  1A23  12 0D 82          )                      CR
                                 BEGIN                              \ 1A5C --> 1A26  *********
  (  1A26  12 09 54          )                      COUNT
  (  1A29  12 02 E4          )                      DUP
  (  1A2C  12 01 7C 12 00    )                      doLIT    0012     \ ???????????????
  (  1A31  12 03 6C          )                      XOR
  (  1A34  12 01 C4 41 1A    )     IF             \ ?branch  1A41   \ 1A34 --> 1A41  ////////////
  (  1A39  12 0E 1E          )                      .
  (  1A3C  12 01 E0 59 1A    )     ELSE           \ branch   1A59   \ 1A34 --> 1A41  ////////////
  (  1A41  12 03 02          )                      DROP
  (  1A44  12 02 E4          )                      DUP
  (  1A47  12 02 1E          )                      @
  (  1A4A  12 04 24          )                      FLIP    \ ????????????
  (  1A4D  12 19 96          )                      >NAME
  (  1A50  12 0D 2C          )                      SPACE
  (  1A53  12 19 F4          )                      .ID
  (  1A56  12 04 78          )                      CELL+
                                   THEN                             \ 1A3C --> 1A59  +++
  (  1A59  12 0C F8          )                      NUF?
  (  1A5C  12 01 C4 26 1A    )   UNTIL            \ ?branch  1A26   \ 1A5C --> 1A26  *********
  (  1A61  12 03 02          )                      DROP
  (  1A64  22                )                      RET
  (  1A65  00                )

  :.  see  see'  ;.
  \ -------------------------------------------------------------------------------
  (  1A66  1C 1A             )                                                                    \  lfa= 1A66
  (  1A68  05 57 4F 52 44 53 )     :  WORDS  ( -- )                                                     \  cfa= 1A6E
  (  1A6E  12 0D 82          )                      CR
  (  1A71  12 06 AE          )                      CONTEXT
  (  1A74  12 02 1E          )                      @
                                 BEGIN                              \ 1A91 --> 1A77  ////////////
  (  1A77  12 02 1E          )                      @
  (  1A7A  12 02 F4          )                      ?DUP
  (  1A7D  12 01 C4 99 1A    )     IF,            \ ?branch  1A99   \ 1A7D --> 1A99  ////////////
  (  1A82  12 02 E4          )                      DUP
  (  1A85  12 0D 2C          )                      SPACE
  (  1A88  12 19 F4          )                      .ID
  (  1A8B  12 04 88          )                      CELL-
  (  1A8E  12 0C F8          )                      NUF?
  (  1A91  12 01 C4 77 1A    )   UNTIL            \ ?branch  1A77   \ 1A91 --> 1A77  ////////////
  (  1A96  12 03 02          )                      DROP
                                   THEN,                            \ 1A7D --> 1A99  ////////////
  (  1A99  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1A9A  68 1A             )                                                                    \  lfa= 1A9A
  (  1A9C  04 52 45 41 44    )     :  READ  ( a len -- )                                                      \  cfa= 1AA2
  (  1AA2  12 03 24          )                      OVER
  (  1AA5  12 06 64          )                      CSP
  (  1AA8  12 02 06          )                      !
  (  1AAB  12 02 54          )                      >R
                                 BEGIN,                             \ 1ACA --> 1AAE  ////////////
  (  1AAE  12 0C D6          )                      KEY
  (  1AB1  12 02 E4          )                      DUP
  (  1AB4  12 01 7C 1B 00    )                      doLIT    001B
  (  1AB9  12 03 6C          )                      XOR
  (  1ABC  12 01 C4 D7 1A    )     IF             \ ?branch  1AD7   \ 1ABC --> 1AD7  *********
  (  1AC1  12 03 24          )                      OVER
  (  1AC4  12 02 2E          )                      C!
  (  1AC7  12 04 A8          )                      1+
  (  1ACA  12 01 96 AE 1A    )   NEXT,            \ nex.     1AAE   \ 1ACA --> 1AAE  ////////////
  (  1ACF  12 03 02          )                      DROP
  (  1AD2  12 01 E0 DD 1A    )     ELSE           \ branch   1ADD   \ 1ABC --> 1AD7  *********
  (  1AD7  12 02 84          )                      R>
  (  1ADA  12 03 AA          )                      2DROP
                                   THEN                             \ 1AD2 --> 1ADD  *********
  (  1ADD  12 06 64          )                      CSP
  (  1AE0  12 02 1E          )                      @
  (  1AE3  12 03 E2          )                      -
  (  1AE6  12 02 E4          )                      DUP
  (  1AE9  12 0E 1E          )                      .
  (  1AEC  12 06 64          )                      CSP
  (  1AEF  12 02 06          )                      !
  (  1AF2  22                )                      RET
  (  1AF3  00                )
  \ -------------------------------------------------------------------------------
  (  1AF4  9C 1A             )                                                                    \  lfa= 1AF4
  (  1AF6  04 4C 4F 41 44    )     :  LOAD                                                        \  cfa= 1AFC
  (  1AFC  12 06 4A          )                      >IN
  (  1AFF  12 02 1E          )                      @
  (  1B02  12 06 58          )                      #TIB
  (  1B05  12 09 3C          )                      2@
  (  1B08  12 02 54          )                      >R
  (  1B0B  12 02 54          )                      >R
  (  1B0E  12 02 54          )                      >R
  (  1B11  12 01 7C 00 00    )                      doLIT    0000
  (  1B16  12 06 4A          )                      >IN
  (  1B19  12 02 06          )                      !
  (  1B1C  12 06 58          )                      #TIB
  (  1B1F  12 02 06          )                      !
  (  1B22  12 06 58          )                      #TIB
  (  1B25  12 04 78          )                      CELL+
  (  1B28  12 02 06          )                      !
  (  1B2B  12 13 A6          )                      EVAL
  (  1B2E  12 02 84          )                      R>
  (  1B31  12 02 84          )                      R>
  (  1B34  12 02 84          )                      R>
  (  1B37  12 06 58          )                      #TIB
  (  1B3A  12 09 26          )                      2!
  (  1B3D  12 06 4A          )                      >IN
  (  1B40  12 02 06          )                      !
  (  1B43  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  1B44  F6 1A             )                                                                    \  lfa= 1B44
  (  1B46  04 53 45 4E 44    )     :  SEND                                                        \  cfa= 1B4C
  (  1B4C  12 0B 7C          )                      HEX
  (  1B4F  12 02 54          )                      >R
  (  1B52  12 01 E0 09 1C    )   AHEAD,           \ branch   1C09   \ 1B52 --> 1C09  ////////////
                                   BEGIN                            \ 1C09 --> 1B57  ------
  (  1B57  12 02 E4          )                      DUP
  (  1B5A  12 01 7C 1F 00    )                      doLIT    001F
  (  1B5F  12 03 4C          )                      AND
  (  1B62  12 01 C4 6C 1B    )       IF           \ ?branch  1B6C   \ 1B62 --> 1B6C  *********
  (  1B67  12 01 E0 C1 1B    )       ELSE         \ branch   1BC1   \ 1B62 --> 1B6C  *********
  (  1B6C  12 0D 82          )                      CR
  (  1B6F  12 02 E4          )                      DUP
  (  1B72  12 01 7C FF 00    )                      doLIT    00FF
  (  1B77  12 03 4C          )                      AND
  (  1B7A  12 06 64          )                      CSP
  (  1B7D  12 02 06          )                      !
  (  1B80  12 02 E4          )                      DUP
  (  1B83  12 01 7C 00 01    )                      doLIT    0100
  (  1B88  12 07 F6          )                      /
  (  1B8B  12 06 64          )                      CSP
  (  1B8E  12 09 0C          )                      +!
  (  1B91  12 01 7C 20 00    )                      doLIT    0020
  (  1B96  12 06 64          )                      CSP
  (  1B99  12 09 0C          )                      +!
  (  1B9C  12 0D BC          )                      ."| :20"
  (  1BA3  12 02 E4          )                      DUP
  (  1BA6  12 0A D0          )                      <#
  (  1BA9  12 0A FC          )                      #
  (  1BAC  12 0A FC          )                      #
  (  1BAF  12 0A FC          )                      #
  (  1BB2  12 0A FC          )                      #
  (  1BB5  12 0B 42          )                      #>
  (  1BB8  12 0D 5E          )                      TYPE
  (  1BBB  12 0D BC          )                      ."| 00"
                                     THEN                           \ 1B67 --> 1BC1  ------
  (  1BC1  12 09 54          )                      COUNT
  (  1BC4  12 02 E4          )                      DUP
  (  1BC7  12 06 64          )                      CSP
  (  1BCA  12 09 0C          )                      +!
  (  1BCD  12 0A D0          )                      <#
  (  1BD0  12 0A FC          )                      #
  (  1BD3  12 0A FC          )                      #
  (  1BD6  12 0B 42          )                      #>
  (  1BD9  12 0D 5E          )                      TYPE
  (  1BDC  12 02 E4          )                      DUP
  (  1BDF  12 01 7C 1F 00    )                      doLIT    001F
  (  1BE4  12 03 4C          )                      AND
  (  1BE7  12 01 C4 F1 1B    )       IF           \ ?branch  1BF1   \ 1BE7 --> 1BF1  *********
  (  1BEC  12 01 E0 09 1C    )       ELSE         \ branch   1C09   \ 1BE7 --> 1BF1  *********///
  (  1BF1  12 06 64          )                      CSP
  (  1BF4  12 02 44          )                      C@
  (  1BF7  12 04 08          )                      NEGATE
  (  1BFA  12 0A D0          )                      <#
  (  1BFD  12 0A FC          )                      #
  (  1C00  12 0A FC          )                      #
  (  1C03  12 0B 42          )                      #>
  (  1C06  12 0D 5E          )                      TYPE
                                     THEN
                                 THEN,
  (  1C09  12 01 96 57 1B    )     NEXT           \ nex.     1B57   \ 1C09 --> 1B57  ------
  (  1C0E  12 0D 82          )                      CR
  (  1C11  12 03 02          )                      DROP
  (  1C14  12 0D BC          )                      ."| :00000001FF"
  (  1C23  12 0D 82          )                      CR
  (  1C26  22                )                      RET
  (  1C27  00                )


  (  1B44  F6 1A             )                                                                    \  lfa= 1B44
  (  1B46  04 53 45 4E 44    )     :  SEND                                                        \  cfa= 1B4C
  (  1B4C  12 0B 7C          )                      HEX
  (  1B4F  12 02 54          )                      >R
  (  1B52  12 01 E0 09 1C    )   AHEAD,           \ branch   1C09   \ 1B52 --> 1C09  ////////////
                                   BEGIN                            \ 1C09 --> 1B57  ------
  (  1B57  12 02 E4          )                    \ DUP
  (  1B5A  12 01 7C 1F 00    )                    \ doLIT    001F
  (  1B5F  12 03 4C          )            Tn1F    \ AND
  (  1B62  12 01 C4 6C 1B    )       IF           \ ?branch  1B6C   \ 1B62 --> 1B6C  *********
  (  1B67  12 01 E0 C1 1B    )       ELSE         \ branch   1BC1   \ 1B62 --> 1B6C  *********
  (  1B6C  12 0D 82          )                      CR
  (  1B6F  12 02 E4          )                    \ DUP
  (  1B72  12 01 7C FF 00    )                    \ doLIT    00FF
  (  1B77  12 03 4C          )            TnFF    \ AND
  (  1B7A  12 06 64          )                      CSP
  (  1B7D  12 02 06          )                      !
  (  1B80  12 02 E4          )                      DUP
  (  1B83  12 01 7C 00 01    )                    \ doLIT    0100
  (  1B88  12 07 F6          )            T<<8    \ /
  (  1B8B  12 06 64          )                      CSP
  (  1B8E  12 09 0C          )                      +!
  (  1B91  12 01 7C 20 00    )                      doLIT    0020
  (  1B96  12 06 64          )                      CSP
  (  1B99  12 09 0C          )                      +!
  (  1B9C  12 0D BC          )                      ."| :20"
  (  1BA3  12 02 E4          )                      DUP
  (  1BA6  12 0A D0          )                      <#
  (  1BA9  12 0A FC          )                      #
  (  1BAC  12 0A FC          )                      #
  (  1BAF  12 0A FC          )                      #
  (  1BB2  12 0A FC          )                      #
  (  1BB5  12 0B 42          )                      #>
  (  1BB8  12 0D 5E          )                      TYPE
  (  1BBB  12 0D BC          )                      ."| 00"
                                     THEN                           \ 1B67 --> 1BC1  ------
  (  1BC1  12 09 54          )                      COUNT
  (  1BC4  12 02 E4          )                      DUP
  (  1BC7  12 06 64          )                      CSP
  (  1BCA  12 09 0C          )                      +!
  (  1BCD  12 0A D0          )                      <#
  (  1BD0  12 0A FC          )                      #
  (  1BD3  12 0A FC          )                      #
  (  1BD6  12 0B 42          )                      #>
  (  1BD9  12 0D 5E          )                      TYPE
  (  1BDC  12 02 E4          )                      DUP
  (  1BDF  12 01 7C 1F 00    )                    \ doLIT    001F
  (  1BE4  12 03 4C          )             Tn1F   \ AND
  (  1BE7  12 01 C4 F1 1B    )       IF           \ ?branch  1BF1   \ 1BE7 --> 1BF1  *********
  (  1BEC  12 01 E0 09 1C    )       ELSE         \ branch   1C09   \ 1BE7 --> 1BF1  *********///
  (  1BF1  12 06 64          )                      CSP
  (  1BF4  12 02 44          )                      C@
  (  1BF7  12 04 08          )                      NEGATE
  (  1BFA  12 0A D0          )                      <#
  (  1BFD  12 0A FC          )                      #
  (  1C00  12 0A FC          )                      #
  (  1C03  12 0B 42          )                      #>
  (  1C06  12 0D 5E          )                      TYPE
                                     THEN
                                 THEN,
  (  1C09  12 01 96 57 1B    )     NEXT           \ nex.     1B57   \ 1C09 --> 1B57  ------
  (  1C0E  12 0D 82          )                      CR
  (  1C11  12 03 02          )                      DROP
  (  1C14  12 0D BC          )                      ."| :00000001FF"
  (  1C23  12 0D 82          )                      CR
  (  1C26  22                )                      RET
  (  1C27  00                )

comment;
  \ -------------------------------------------------------------------------------
  (  1C28  46 1B             )                                                                    \  lfa= 1C28
  (  1C2A  06 46 4F 52 47 45 )     :  FORGET                                                      \  cfa= 1C32
  (  1C32  12 14 DE          )                      '
  (  1C35  12 19 96          )                      >NAME
  (  1C38  12 04 88          )                      CELL-
  (  1C3B  12 02 E4          )                      DUP
  (  1C3E  12 06 CA          )                      CP
  (  1C41  12 02 06          )                      !
  (  1C44  12 02 1E          )                      @
  (  1C47  12 02 E4          )                      DUP
  (  1C4A  12 06 E4          )                      LAST
  (  1C4D  12 09 26          )                      2!
  (  1C50  22                )                      RET
  (  1C51  00                )                      
  \ -------------------------------------------------------------------------------
  (  1C52  2A 1C             )                                                                    \  lfa= 1C52
  (  1C54  03 56 45 52       )     :  VER                                                         \  cfa= 1C58
  (  1C58  12 01 7C 02 02    )                      doLIT    0202
  (  1C5D  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1C5E  54 1C             )                                                                    \  lfa= 1C5E
  (  1C60  02 68 69          )     :  hi                                                          \  cfa= 1C64
  (  1C64  12 01 34          )                      !IO
  (  1C67  12 0D 82          )                      CR
  (  1C6A  12 0D BC          )                      ."| eForth v2.2xx"
  (  1C79  12 0D 82          )                      CR
  (  1C7C  22                )                      RET
  (  1C7D  00                )

  ''  hi      cfa'.of.hi*    !.
  \ -------------------------------------------------------------------------------
  (  1C7E  60 1C             )                                                                    \  lfa= 1C7E
  (  1C80  05 27 42 4F 4F 54 )     :  'BOOT                                                       \  cfa= 1C86
  (  1C86  12 05 7A 64 1C    )                   ( doVAR    1C64 )    cfa'.of.hi*   ,doVAR*+(#)
  (  1C8B  00                )                     ret
  \ -------------------------------------------------------------------------------












 \ -------------------------------------------------------------------------------
  (  1F56  3C 1F             )                                                                    \  lfa= 1F56
  (  1F58  02 57 53          )     :  WS                                                          \  cfa= 1F5C
  (  1F5C  12 1A 6E          )                      WORDS
  (  1F5F  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1F60  58 1F             )                                                                    \  lfa= 1F60
  (  1F62  03 54 3C 50       )     :  T<P'   (.to.length.--.)                                   \  cfa= 1F66
  (  1F66  12 02 54          )                      >R
  (  1F69  12 01 E0 7D 1F    )   AHEAD,           \ branch   1F7D   \ 1F69 --> 1F7D  *********
                                   BEGIN                            \ 1F7D --> 1F6E  +++
  (  1F6E  12 0C D6          )                      KEY
  (  1F71  12 03 24          )                      OVER
  (  1F74  12 02 6A          )                      R@
  (  1F77  12 03 D2          )                      +
  (  1F7A  12 02 2E          )                      C!
                                 THEN,                              \ 1F69 --> 1F7D  *********
  (  1F7D  12 01 96 6E 1F    )     NEXT           \ nex.     1F6E   \ 1F7D --> 1F6E  +++
  (  1F82  12 03 02          )                      DROP
  (  1F85  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1F60  58 1F             )                                                                    \  lfa= 1F60
  (  1F62  03 54 3C 50       )     :  T<P    (.to.length.--.)                                   \  cfa= 1F66
  (  1F66  12 02 54          )                   {1-}  {DUP>R}  \  >R
                                   BEGIN                            \ 1F7D --> 1F6E  +++
                                      2DUP R@ -  +  KEY  SWAP  C!
  (  1F6E  12 0C D6          )                    \ KEY
  (  1F71  12 03 24          )                    \ OVER
  (  1F74  12 02 6A          )                    \ R@
  (  1F77  12 03 D2          )                    \ +
  (  1F7A  12 02 2E          )                    \ C!
  (  1F7D  12 01 96 6E 1F    )     NEXT           \ nex.     1F6E   \ 1F7D --> 1F6E  +++
  (  1F82  12 03 02          )             2DROP  \ DROP
  (  1F85  22                )                      RET

:.  r=t     t  r=r  ;.

t:  T<P'   (.to.length.--.)  r3=t {drop}   r2=t {drop}
                     R4=40004400
    begin'
         begin'      R1=(R4)
                     R1n20,s
         until'nz    1 4 r=(r)b
                     0 4 R=(R)b   \ to reset (40004400).1=0
                     2 1 (r)=r,b
                     r2+1
                     r3-1
   until'z  ret'

t:  T<P'''    (.to.length.--.)  r3=t {drop}   r2=t {drop}
                     R4=40004400
    begin'
         begin'      R1=(R4)
                     R1n20,s
         until'nz    1 4 4 r=(r+#)b
                     0 4 0 R=(R+#)b   \ to reset (40004400).1=0
                     2 1 (r)=r,b
                     r2+1
                     r3-1
   until'z  ret'
  \ -------------------------------------------------------------------------------
  (  1F86  62 1F             )                                                                    \  lfa= 1F86
  (  1F88  03 54 3E 50       )     :  T>P'   (.from.length.--.)                                   \  cfa= 1F8C
  (  1F8C  12 02 54          )                      >R
  (  1F8F  12 01 E0 A0 1F    )   AHEAD,           \ branch   1FA0   \ 1F8F --> 1FA0  !!!!!!!!!!!!!!!!!!
                                   BEGIN                            \ 1FA0 --> 1F94  ////////////
  (  1F94  12 02 E4          )                      DUP
  (  1F97  12 02 6A          )                      R@
  (  1F9A  12 03 D2          )                      +    C@
  (  1F9D  12 0C E8          )                      EMIT
                                 THEN,                              \ 1F8F --> 1FA0  !!!!!!!!!!!!!!!!!!
  (  1FA0  12 01 96 94 1F    )     NEXT           \ nex.     1F94   \ 1FA0 --> 1F94  ////////////
  (  1FA5  12 03 02          )                      DROP
  (  1FA8  22                )                      RET
  (  1FA9  00                )

  \ -------------------------------------------------------------------------------
  (  1F86  62 1F             )                                                                    \  lfa= 1F86
  (  1F88  03 54 3E 50       )     :  T>P    (.from.length.--.)                                   \  cfa= 1F8C
  (  1F8C  12 02 54          )                {1-}  {DUP>R}  \ >R
                                   BEGIN                            \ 1FA0 --> 1F94  ////////////
  (  1F94  12 02 E4          )                      2DUP     \ DUP
  (  1F97  12 02 6A          )                      R@       \ R@
  (  1F9A  12 03 D2          )                      -  +  C@ \  +    C@
  (  1F9D  12 0C E8          )                      EMIT
  (  1FA0  12 01 96 94 1F    )     NEXT           \ nex.     1F94   \ 1FA0 --> 1F94  ////////////
  (  1FA5  12 03 02          )           2DROP    \ DROP
  (  1FA8  22                )                      RET
  (  1FA9  00                )
  \ -------------------------------------------------------------------------------
  (  1FAA  88 1F             )                                                                    \  lfa= 1FAA
  (  1FAC  05 44 4F 45 53 3E )     :  DOES>                                                       \  cfa= 1FB2
  (  1FB2  12 02 84          )                      R>
\ (  1FB5  12 04 24          )                      FLIP
  (  1FB8  12 06 CA          )                      CP
  (  1FBB  12 02 1E          )                      @
  (  1FBE  12 01 7C 03 00    )                      doLIT    8
  (  1FC7  12 03 E2          )                      -
  (  1FC6  12 02 06          )                      !
  (  1FC9  22                )                      RET
  \ -------------------------------------------------------------------------------




  (  1C8C  80 1C             )                                                                      \  lfa= 1C8C
  (  1C8E  04 43 4F 4C 44    )     :  COLD''                                                        \  cfa= 1C94
\                               ( t:  main )   sp 0378 r=#  sp 2001 Rt=#     ( sp=20010378    -2 allot' )
\                                              rp 0300 r=#  rp 2001 Rt=#     \  cold.stm32f4     ret
                                 BEGIN                                       \ 1CC7 --> 1C94  ===============
  (  1C94  12 01 7C 40 00    )                    ( doLIT    20012040 )  doUSER.base.in.rom    @.  ,doLIT*+#   \ 0040
  (  1C99  12 01 7C 00 80    )                    ( doLIT    20012100 )  doUSER.base.in.ram    @.  ,doLIT*+#   \ 8000
  (  1C9E  12 01 7C 50 00    )                    ( doLIT          54 )  USER.variable.length  @.  ,doLIT*+#   \ 0050
  (  1CA3  12 09 B8          )                      CMOVE
                                                    uart.init.stm32F429.eF
                                                    uart.switch.stm32F429.eF
  (  1CA6  12 13 D6          )                      PRESET
  (  1CA9  12 1C 86          )                   \  'BOOT
  (  1CAC  12 09 A0          )                   \  @EXECUTE
  (  1CAF  12 07 00          )                      FORTH
  (  1CB2  12 06 AE          )                      CONTEXT
  (  1CB5  12 02 1E          )                      @
  (  1CB8  12 02 E4          )                      DUP
  (  1CBB  12 06 BE          )                      CURRENT
  (  1CBE  12 09 26          )                      2!
  (  1CC1  12 17 9E          )                      OVERT      ret
  (  1CC4  12 14 6E          )                      QUIT
  (  1CC7  12 01 E0 94 1C    )   AGAIN             -ret   \ branch   1C94 ) \ 1CC7 --> 1C94  ===============
  \ -------------------------------------------------------------------------------
  :. CREATE'     :   ,doLIT*  here'  6  +.  32,'  ret           ;.   \ used in ram only
  :. VARIABLE'   :   ,doLIT*  here'  6  +.  32,'  ret  0  32,'  ;.   \ used in ram only
  :. exit    bd00 16,'  ( ret )  ;.


  :  >     SWAP  <      ;
  :  BETWEEN     >R    OVER   >    SWAP   R>   >   OR   NOT  ;

     CREATE'   command.table   here' 10  >DATA.RANGE.BUFFER     10  allot'           \  10  CP'  +!.  \  ALLOT   \ 8*3=24=18

  :  get.command  ( - n)   0
     BEGIN  DROP  KEY  0DF   AND  41  -  DUP 4  U<   \  A~D or a~d
     UNTIL  ;      \ 'A'=41 ;  'a'=61.

  :  execute.command   ( n -)  4  *  command.table  +  @  EXECUTE  ;

  t:  init.tF0   '' '?KEY 6 +.  32@'  '' ?rx   (#)=#
                 '' 'emit 6 +.  32@'  '' tx!   (#)=#
                 (20012130)=10                               \  base
                  20012130  10                 (#)=#         \  base
              \  (20012110)=20010378                         \  sp0     ???????????
                  20012110  (sp0)  @.          (#)=#         \  sp0
              \  (20012114)=20010300                   ret'  \  rp0     ???????????
                  20012114  (rp0)  @.          (#)=#   ret'  \  rp0

  :  tF      hex     \  rp=20010300   sp=20010378   initialize
     BEGIN   ( CR )     get.command   execute.command   \ CR    .S
     AGAIN   ;

  :  tF0     init.tF0   tF  ; \ 36f0  execute


  :  '0'~'F'>0~F  ( n - n1 -1 | n 0 )   \ DIGIT
     >R  R@  30  39   BETWEEN  IF   R>  30  -  -1   exit    THEN
         R@  41  46   BETWEEN  IF   R>  37  -  -1   exit    THEN  R>  0   ;

  :  10*  4   LSHIFT  ;


   : enter.8n      ( - n)      0 
     BEGIN    KEY   DUP  0D  =   OVER  20  =  OR
       IF     DROP  EXIT
       THEN   upc   '0'~'F'>0~F
       IF     SWAP  10*   +
       ELSE   DROP
       THEN
     AGAIN    ;



  t:  10/    T>>4    ret'

  t:  10/mod   ( n ... r q )   push.LR  {dup}  Tn0F    swap   10/   ret
  t:  0~F>'0'~'F'    tn0F    t 0a r:#  ( t:0a ) ( not 9 )  if'u>=  t+7  then'   t+30   ret'   \ digit
  t:  .n   ( n -- )  push.LR   0~F>'0'~'F'  emit   ret
  t:  .2n  ( n -- )  push.LR   10/mod   .n  .n     ret

  t:  .8n? ( n -- )  push.LR   {dup}  t=6  for  10/mod  next
                               {dup}  t=7  for  .n      next     ret

  t:  .8n  ( n -- )  push.LR   10/mod   10/mod     10/mod   10/mod   10/mod  10/mod   10/mod  .n  .n  .n  .n     .n  .n  .n  .n   ret

  t:  ENTER.8.digit   ( -- n)     push.LR     {dup}     Y=0
      begin'      drop      key ( KEY.io )  t 0d r:#  ( T:0d )
      while'<>    t 20 r:#  ( T:20 )
                  if'<>. \  t=w   ret    then'
                  '0'~'F'>0~F   ( T:0/  )    Tn0FF      t 0ff r:#  ( T:FF )
         if'<>    Y*10   Y+t    \ merge
         then'
      repeat'     then'.    t=Y   RET

  :.   t-sp   t  sp  r-r  ;.
  :.   t:sp   t  sp  r:r  ;.

  t:  .stack     push.LR             cr  ( space ) {dup}    T=28   emit    \  (
      {dup}   T (sp0)  @. ( sp0 ) ldri      t-sp    {cell/}   .2n
                                                   {dup}    T=29   emit    \  )
      {dup}   T (sp0)  @. ( sp0 ) ldri              {cell-}
      begin'      t:sp
      while'u>=   {dup}   space   T=(T)   .8n      {cell-}
      repeat'     cr      drop    ret

  insert{  ''  command.table  0C  +.  ORG
                     ''  QUIT         32,'  \  A
                     ''  EXECUTE      32,'  \  B
                     ''  .stack       32,'  \  C   .s
                     ''  enter.8n     32,'  \  D
  }insert


  :  get.command.1    (.--.n.)         key   ;
  :  execute.command.1  (.n.--.)               df    and
     dup  'A' = if  drop    QUIT       exit  then
     dup  'B' = if  drop    execute    exit  then
     dup  'C' = if  drop    .stack     exit  then
          'D' = if          enter.8n   exit  then  ;

  :  tF1   begin   ( cr )   get.command.1   execute.command.1     again

  :  get+execute.command.2  (.--.)     key   df    and
     dup  'A' = if  drop    QUIT       exit  then
     dup  'B' = if  drop    execute    exit  then
     dup  'C' = if  drop    .stack     exit  then
          'D' = if          enter.8n   exit  then  ;

  :  tF2    begin  ( cr )   get+execute.command.2     again

variable'  Xa
variable'  Xn

variable'  Xa'
variable'  Xn'

: replace  ( a' -- )  dup  Xa  !   dup  @  Xn  !   bd00 ( ret  )  swap ! ;     : \\    replace   ;
: replace' ( a' -- )  dup  Xa' !   dup  @  Xn' !   4770 ( ret' )  swap ! ;     : \\'   replace'  ;
: restore  ( -- )     Xn   @   Xa   @   !   ;                                  : //    restore   ;
: restore' ( -- )     Xn'  @   Xa'  @   !   ;                                  : //'   restore'  ;

\ :  main.Forth    MAIN  ret           :  mF     main.Forth   ret
  :  mecrispForth  382c  execute  ;    :  mF   mecrispForth   ;


:.  SPT=#  SP  SWAP.  RT=#  ;.
:.  RPT=#  RP  SWAP.  RT=#  ;.

:.  SP=#   0  10000   UM/MOD.     SP  rot.  R=#16      SPT=#  ;.
:.  RP=#   0  10000   UM/MOD.     RP  rot.  R=#16      RPT=#  ;.


:.    sp=20010378     (sp0)  @.    SP=#   ;.
:.    rp=20010300     (rp0)  @.   RP=#   ;.


cortex.m0?  @.
#if
:.    sp=20010378    0 (sp0)  @. r=#   sp 0  r=r  ;.
:.    rp=20010300    0 (rp0)  @. r=#   rp 0  r=r  ;.
#then

  t:  ef51>ram     r0=20016000  r1=4000  begin'   r0-4  r1-4   r2=(r1)   (r0)=r2    until'z   ret'

  :. >tF0    exi  ini
     '' ef51>ram  20012000  -.  number>232  232." execute"
     '' tF0                     number>232  232." execute"   ;.


\ : EF430                  72EC    EXECUTE  ;
  : EF430   '' MAIN  ... ( 72F4 )  EXECUTE  ;




: YY  10     FOR  R@ .  NEXT  ;
: PP  10  0  DO    I .  LOOP  ;


\ t: SCOPE     rp=20003ef8       5991  jmp_#24   -ret
  t: SCOPE     rp=20003ef8    R0=5991  jmp_R0    -ret

comment:
  (  1C8C  80 1C             )                                                                    \  lfa= 1C8C
  (  1C8E  04 43 4F 4C 44    )   t:  COLD                                                        \  cfa= 1C94

                                                     R0  (rp0)  @.   r=#    RP  0  r=r
                                                     R0  (sp0)  @.   r=#    SP  0  r=r


                                 BEGIN                                       \ 1CC7 --> 1C94  ===============
  (  1C94  12 01 7C 40 00    )                    ( doLIT    20012040 )  doUSER.base.in.rom      @.  8051eForth.based.addr @. +.  ,doLIT*+#   \ 0040
  (  1C99  12 01 7C 00 80    )                    ( doLIT    20012100 )  doUSER.base.in.ram      @.  ,doLIT*+#   \ 8000
  (  1C9E  12 01 7C 50 00    )                    ( doLIT          54 )    USER.variable.length  @.  ,doLIT*+#   \ 0050
  (  1CA3  12 09 B8          )                      CMOVE
                                           cortex.m0?  @.
                                           #if      uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF     \ ??????????
                                           #else
                                                    uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF
                                           #then
  (  1CA6  12 13 D6          )                      PRESET  \ doLIT 0000  \ ??????????  sp0=20010374
  (  1CA9  12 1C 86          )                      'BOOT
  (  1CAC  12 09 A0          )                      @EXECUTE
  (  1CAF  12 07 00          )                      FORTH
  (  1CB2  12 06 AE          )                      CONTEXT
  (  1CB5  12 02 1E          )                      @
  (  1CB8  12 02 E4          )                      DUP
  (  1CBB  12 06 BE          )                      CURRENT
  (  1CBE  12 09 26          )                      2!
  (  1CC1  12 17 9E          )                      OVERT   \ 38 emit 39 emit
  (  1CC4  12 14 6E          )                      QUIT
  (  1CC7  12 01 E0 94 1C    )   AGAIN              -ret   \ branch   1C94 ) \ 1CC7 --> 1C94  ===============


  (  1C8C  80 1C             )                                                                    \  lfa= 1C8C
  (  1C8E  04 43 4F 4C 44    )   t:  COLD                                                        \  cfa= 1C94

                                                     R0  (rp0)  @.   r=#    RP  0  r=r
                                                     R0  (sp0)  @.   r=#    SP  0  r=r


                                 BEGIN                                       \ 1CC7 --> 1C94  ===============
  (  1C94  12 01 7C 40 00    )                    ( doLIT    20012040 )  doUSER.base.in.rom      @.  8051eForth.based.addr @. +.  ,doLIT*+#   \ 0040
  (  1C99  12 01 7C 00 80    )                    ( doLIT    20012100 )  doUSER.base.in.ram      @.  ,doLIT*+#   \ 8000
  (  1C9E  12 01 7C 50 00    )                    ( doLIT          54 )    USER.variable.length  @.  ,doLIT*+#   \ 0050
  (  1CA3  12 09 B8          )                      CMOVE
                                           cortex.m0?  @.
                                           #if      uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF     \ ??????????
                                           #else
                                                    uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF
                                           #then
  (  1CA6  12 13 D6          )                      PRESET  \ doLIT 0000  \ ??????????  sp0=20010374
  (  1CA9  12 1C 86          )                      'BOOT
  (  1CAC  12 09 A0          )                      @EXECUTE
  (  1CAF  12 07 00          )                      FORTH
  (  1CB2  12 06 AE          )                      CONTEXT
  (  1CB5  12 02 1E          )                      @
  (  1CB8  12 02 E4          )                      DUP
  (  1CBB  12 06 BE          )                      CURRENT
  (  1CBE  12 09 26          )                      2!
  (  1CC1  12 17 9E          )                      OVERT   \ 38 emit 39 emit
  (  1CC4  12 14 6E          )                      QUIT
  (  1CC7  12 01 E0 94 1C    )   AGAIN              -ret   \ branch   1C94 ) \ 1CC7 --> 1C94  ===============
comment;

  (  1C8C  80 1C             )                                                                    \  lfa= 1C8C
  (  1C8E  04 43 4F 4C 44    )   t:  COLD                                                         \  cfa= 1C94
                                                     R0  (rp0)  @.   r=#    RP  0  r=r
                                                     R0  (sp0)  @.   r=#    SP  0  r=r

                                           cortex.m0?  @.
                                           #if      uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF     \ ??????????
                                           #else
                                                    uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF
                                           #then

                                                 \   R0  (rp0)  @.   r=#    RP  0  r=r
                                                 \   R0  (sp0)  @.   r=#    SP  0  r=r


                                 BEGIN                                       \ 1CC7 --> 1C94  ===============
  (  1C94  12 01 7C 40 00    )                    ( doLIT    20012040 )  doUSER.base.in.rom      @.  8051eForth.based.addr @. +.  ,doLIT*+#   \ 0040
  (  1C99  12 01 7C 00 80    )                    ( doLIT    20012100 )  doUSER.base.in.ram      @.  ram.offset  @.  +.           ,doLIT*+#   \ 8000
  (  1C9E  12 01 7C 50 00    )                    ( doLIT          54 )    USER.variable.length  @.  ,doLIT*+#   \ 0050
  (  1CA3  12 09 B8          )                      CMOVE     \  BEGIN  55 ...  TX!  1000 ... 0 ...  do loop  AGAIN
                                        comment:
                                           cortex.m0?  @.
                                           #if      uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF     \ ??????????
                                           #else
                                                    uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF
                                           #then
                                         comment;
  (  1CA6  12 13 D6          )                      PRESET  \ doLIT 0000  \ ??????????  sp0=20010374
  (  1CA9  12 1C 86          )                      'BOOT
  (  1CAC  12 09 A0          )                      @EXECUTE
  (  1CAF  12 07 00          )                      FORTH
  (  1CB2  12 06 AE          )                      CONTEXT
  (  1CB5  12 02 1E          )                      @
  (  1CB8  12 02 E4          )                      DUP
  (  1CBB  12 06 BE          )                      CURRENT
  (  1CBE  12 09 26          )                      2!
  (  1CC1  12 17 9E          )                      OVERT   \ 38 ...  emit 39 ...  emit
  (  1CC4  12 14 6E          )                      QUIT
  (  1CC7  12 01 E0 94 1C    )   AGAIN              -ret   \ branch   1C94 ) \ 1CC7 --> 1C94  ===============


  ''  cold       cfa'.of.cold*    !.
\ ''  cold    '' eF51  3F38  -.   3F48  +.  32!'   \ *** caution ! ***   see  eF51

  :. >IC      >tF0   IC    ;.   \ under 430stm32F407.eF ( by reset )

  :. 51M0     >tF0   'D' COMNEMIT  '' COLD   NUMBER>232  200  MS  'B' COMNEMIT  OO  ;.

\ '' ef51>ram  (51)          32!'
\ '' cold      (51)  4  +.   32!'

:.  CALL_R0     0 CALL_R  ;.

:.  CALL.COLD   0 '' COLD 1+.  R=#      0 CALL_R  ;.
\ ***********************************************************************************************
cortex.m0?  @.
#if
                                  :{  {ON}   ( a -- )   t 0 (r)=#/   {drop}  };
                                  :{  {OFF}  ( a -- )   t 0 (r)=#    {drop}  };
                                  t:   ON    ( a -- )   (t)=0/   {drop}   ret'
                                  t:   OFF   ( a -- )   (t)=0    {drop}   ret'


  it?  @.
  #if
                                   t:  >                                                       cfa= 364
  (  00000364  01 CF             )                  nip>r0
  (  00000366  B0 42             )                  0 t r:r  \  R0:T
  (  00000368  CC BF             )                  it'=.>.....itegt
  (  0000036A  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000036E  00 26             )                  T=0
  (  00000370  70 47             )                  ret'
  #else
                                   t:  >                                                       cfa= BBC
  (  00000BBC  01 CF             )              nip>r0   \  ldm     { R0, } sp
  (  00000BBE  B0 42             )      t 0 r:r \        R0:T
  (  00000BC0  02 D5             )      if'n=1  \       BC8....n=0?(+?)
  (  00000BC2  01 26             )              T=0/
  (  00000BC6  70 47             )              ret'
  (  00000BC8  00 26             )      then'   t=0
  (  00000BC4  76 42             )      \  t t 0  rsb_r,r,#  \   rsb_T,T,0
  (  00000BCA  70 47             )              ret'
  #then

                                     t:  nex.   \ swiftx_Forth_styled nex.
  (  00000BA0  04 BC             )              pop.r2
  (  00000BA2  01 3A             )              R2-1
  (  00000BA4  04 B4             )              push.r2
  (  00000BA6  00 2A             )              2  0  r:#  \  R2:0                                                            \
  (  00000BA8  01 D5             )       if'n=1  \      BAE....n=0?(+?)
  (  00000BAA  0D F2 04 0D       )              {r>drop}   \  RD=RD+4
  (  00000BAE  70 47             )       then'  ret'       \  jmp_RE
  \ ------------------------------------------------------------------------
                                    t:  >=                                                      cfa= 320
  (  00000320  01 CF             )                  nip>r0
  (  00000322  B0 42             )                  R0:T
  (  00000324  B4 BF             )      bfb4 16,' \ it'=.<.....itelt
  (  00000326  00 26             )                  T=0
  (  00000328  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000032C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  <=                                                      cfa= 338
  (  00000338  01 CF             )                  nip>r0
  (  0000033A  B0 42             )                  R0:T
  (  0000033C  CC BF             )      bfcc 16,' \ it'=.>.....itegt
  (  0000033E  00 26             )                  T=0
  (  00000340  4F F0 FF 36       )                  T=FFFFFFFF
  (  00000344  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  cortex.m0?   @.
  #if      t:  u>=  nip>r0   0 T R:R  ( T=T-R0 )  IF'C=1  t=-1   ret'  THEN'  t=0  RET'    \ OK
  #else
                                    t:  u>=                                                     cfa= 37C
  (  0000037C  01 CF             )                  nip>r0
  (  0000037E  D6 EB 00 06       )      t t 0 r=r-r \  sub_T,T,R0<<0
  (  00000382  B6 41             )                  t-t-c
  (  00000384  F6 43             )                  {invert}
  (  00000386  70 47             )                  ret'
  #then

t: u<=  nip>r0   0 T R:R (  T=T-R0 )  IF'C=0    0 T R:R  IF'Z=1  t=-1   ret'  THEN'  THEN'  t=0  RET'  \ ???????
  \ ------------------------------------------------------------------------
                                    t:  u<'                                                      cfa= 3A8
  (  000003A6  01 CF             )                  nip>r0
  (  000003A8  D6 EB 00 06       )      t 0 r-r \            sub_T,T,R0<<0
  (  000003AC  B6 41             )                  t-t-c
  (  000003AE  70 47             )                  ret'
  (  000003BA  01 CF             )                  nip>r0

t: u<  nip>r0   0 T R:R ( T=T-R0 )  IF'C=0   t=-1   ret'  THEN'  t=0  RET'   \ OK
  \ ------------------------------------------------------------------------
                                    t:  u>'         nip>r0                                            cfa= 3BC
  (  000003BC  36 1A             )      t t 0 r=r-r \     T=T-R0
  (  000003BE  B6 41             )                  t-t-c
  (  000003C0  70 47             )                  ret'

t: u>  nip>r0   0 T R:R (  T=T-R0 )  IF'C=1   IF'Z=0  t=-1    ret'  THEN'  THEN'  t=0  RET'  \ OK
  \ ------------------------------------------------------------------------
                                    t:  <>'                                                      cfa= 3CC
  (  000003CC  01 CF             )                  nip>r0
  (  000003CE  36 1A             )                  T-R0
  (  000003D0  18 BF             )     if'nz \  bf18 16,' \ it'<>......itne
  (  000003D2  4F F0 FF 36       )                  T=FFFFFFFF
  (  000003D6  70 47             )     then'        ret'

t: <>   nip>r0   T=T-R0  IF'Z=1   t=0   ret'  THEN'  t=-1  RET'     \ OK
  \ ------------------------------------------------------------------------
                                    t:  invert      {invert}   ret'
#then
\ *******************************************************************************************************
:.  erase.flash'  0 10000 ff fill'  ;.

nuc442eF?  @.
#if
#else
:  ++++    (.n.n.n.n.--.n.)   >r0~3  '' add4  call.c  {dup}  t=r0  ;

:  LCD           ( 200116B8 )   CH8_ILI9341    CALL.C   ;  \ ?????
\  LCD''           200116B8   ( CH8_ILI9341 )  EXECUTE  ;  \ OK
\  LCD'''              '' LCD'  ...     EXECUTE  ;         \ OK
\  LCD                    LCD'                   ;         \ OK

:  LINE' (.x1.y1.x2.y2.--.)   >r0~3    ( 2001168C )   DRAWLINE     CALL.C   ;  \ OK  ( x1 y1 x2 y2 -- )  \  0 0 100 100  LINE
\  LL    ( 20000444 )   '' LINE  ...     EXECUTE  ;         \ OK  ( x1 y1 x2 y2 -- )     0 0 100 100  LL
:  LINE  (.x1.y1.x2.y2.--.)   {>r}  {>r}  {>r}  0ef  {r>}  -  {r>}  0ef  {r>}  -
                              >r0~3    ( 2001168C )   DRAWLINE     CALL.C   ;  \ OK  ( x1 y1 x2 y2 -- )  \  0 0 100 100  LINE
:  ----'   LINE'  ;
:  ----    LINE   ;

:  DOT'  (.x.y.--.)              over  {1+}  over  {1+}   line  ;
:  DOT'' (.x.y.--.)  2dup  {1+}  over  {1+}  over         line
                                 over  {1+}  over  {1+}   line  ;

:  DOT   (.x.y.--.)  2dup  {1+}  over  {1+}  over  {1-}   line
                                 over  {1+}  over  {1+}   line  ;

:       circle     ( x y radius color -- )  >r0~3  TM_ILI9341_DrawCircle     call.c  ;
:  o    circle     ( x y radius color -- )  ;

:       Rectangle  ( x y x2 y2  -- )        >r0~3  TM_ILI9341_DrawRectangle  call.c  ;
:  []   Rectangle  ( x y x2 y2  -- )        ;

\  20000400 ( from )  DUP. ( to ) 20020000  OVER.  -. ( length )  p>t
:  dram   '' ch14_sdram ... ( 20011724 ) EXECUTE  '' write_sdram ... ( 200117C4 ) EXECUTE  '' read_sdram ...  ( 2001180C ) EXECUTE ;

   \  include   nuc472_target_pin_address1.f
  t:  PG.2=0   (.--.)   40004988 0  (#)=#   ret'
  t:  PG.3=0   (.--.)   4000498C 0  (#)=#   ret'
  t:  PG.4=0   (.--.)   40004990 0  (#)=#   ret'

  t:  PG.2=1   (.--.)   40004988 1  (#)=#   ret'
  t:  PG.3=1   (.--.)   4000498C 1  (#)=#   ret'
  t:  PG.4=1   (.--.)   40004990 1  (#)=#   ret'
\ include  NUC472_TARGET_PIN_ADDRESS1a.F



:  dram   '' ch14_sdram ... ( 20011724 ) EXECUTE  '' write_sdram ... ( 200117C4 ) EXECUTE  '' read_sdram ...  ( 2001180C ) EXECUTE ;
#then


:  end  ;  \ always at the end to ensure the linking to the previous eForth linkage.


8051eForth.based.addr @.   20000000  2001FFFF  between.
#if  \  t:  main*  push.LR  sp=20010378    ( rp=20010300 ) 0 '' ef51>ram 8051eForth.based.addr @. -. 1+.  r=#   call_r0   0 '' COLD  1+. R=#  0 CALL_R  ret
        t:  main*  push.LR (sp0)  @.  sp=# ( rp=20010300 ) 0 '' ef51>ram 8051eForth.based.addr @. -. 1+.  r=#   call_r0   0 '' COLD  1+. R=#  0 CALL_R  ret
:.      51stm32f4xx.eForth.ONLY     erase.flash'  8051eForth.based.addr @. dup>r. ( 20012000 ) 0 4000 cmove'  (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.51          8051eForth.based.addr @. dup>r. ( 20012000 ) 0 4000 cmove'  (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.430         8051eForth.based.addr @.        ( 20012000 ) 0 4000 cmove'  (rp0)  @. 0 32!'  '' main  1+.           4 32!'  1.hex  ;.

#else   t:  main*  push.LR (sp0)  @.  sp=# ( rp=20010300 ) 0 '' ef51>ram 8051eForth.based.addr @. -. 1+.  r=#   call_r0   0 '' COLD  1+. R=#  0 CALL_R  ret

:.      51stm32f4xx.eForth.ONLY               erase.flash'     (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.51                       (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.430                      (rp0)  @. 0 32!'  '' main  1+.           4 32!'  1.hex  ;.
#then

 '' main*    cfa'.of.MAIN*  !.





  \ -------------------------------------------------------------------------------
variable.  here'(cold)
here'      here'(cold)  !.

insert{     0  8051eForth.based.addr  @.  +.   org       (rp0)  @.    32,'   \ native return stack pointer content
            4  8051eForth.based.addr  @.  +.   org    '' cold 1+.    jmp    \ 20012004   jmp cold

               8051eForth.based.addr  @.  doUSER.base.in.rom  @.  +.  org   \ 20012040
  (  0040  )     '' ef51>ram  8051eForth.based.addr @. -.  ( 20012000 -. )  ( 0000 )  32,'  \ in rom area
  (  0042  )     '' main*                                  ( 0000 )  32,'                   \ in ram area
  (  0044  )                                                 0000    32,'
  (  0046  )                                                 0000    32,'
  (  0048  )        (sp0)  @.                              ( 0050 )  32,'   \ 20010378 --> 20012050
  (  004A  )        (rp0)  @.                              ( 0010 )  32,'   \ 20010300 --> 20012010
  (  004C  )     ''  ?RX                                   ( 0140 )  32,'
  (  004E  )     ''  TX!                                   ( 0160 )  32,'
  (  0050  )     ''  accept                                ( 11CE )  32,'
  (  0052  )     ''  kTAP                                  ( 118C )  32,'
  (  0054  )     ''  emit   ( TX! )                        ( 0160 )  32,'
  (  0056  )     ''  .OK                                   ( 1360 )  32,'
  (  0058  )                                                 0010    32,'   \ base   16
  (  005A  )                                                 0000    32,'
  (  005C  )                                                 0000    32,'
  (  005E  )                                                 0000    32,'
  (  0060  )    ( #TIB )                                     0000    32,'
  (  0062  )    ( 'tib ) content.of.'tib*  @. ( 20018080 ) ( 8080 )  32,'   \
  (  0064  )                                                 0000    32,'
  (  0066  )     ''  $INTERPRET                            ( 1310 )  32,'
  (  0068  )     ''  NUMBER?                               ( 0BEE )  32,'
  (  006A  )                                                 0000    32,'
  (  006C  )                                                 0000    32,'
  (  006E  )    ( CONTEXT )                                             0000    32,'
  (  0070  )                                                 0000    32,'
  (  0072  )                                                 0000    32,'
  (  0074  )                                                 0000    32,'
  (  0076  )                                                 0000    32,'
  (  0078  )                                                 0000    32,'
  (  007A  )                                                 0000    32,'
  (  007C  )                                                 0000    32,'
  (  007E  )                                                 0000    32,'
  (  0080  )    ( CURRENT )                                             0000    32,'
  (  0082  )                                                 0000    32,'

  (  0084  )  here'(cold) @.   8051eForth.based.addr  @.  20000000 2001FFFF  between.  not. #if  drop.  DOWNLOAD.TO.RAM.START  @.  #then  32,'  \ cp
  (  0086  )  here'(cold) @.   8051eForth.based.addr  @.  20000000 2001FFFF  between.  not. #if  drop.  DOWNLOAD.TO.RAM.START  @.  #then  32,'  \ cp

\ (  0084  )  here'(cold) @. ( 8051eForth.based.addr  @. ) ( 8100 )  32,'  \ cp
\ (  0086  )  here'(cold) @. ( 8051eForth.based.addr  @. ) ( 8100 )  32,'  \ np

  (  0088  )     ''  main* ( COLD )  CFA'>NFA'(ADJACENT)   ( 1C8E )  32,'  \ last*  @.
  (  008A  )     ''  main* ( COLD )  CFA'>NFA'(ADJACENT)   ( 1C8E )  32,'  \ last*  @.
  (  008C  )                                                 0000    32,'
  (  008E  )                                                 0000    32,'

}insert

:.  code      t:      ;.
:.  end-code  ret'    ;.
:.  c;        ret'    ;.

          T:QUEUE.COUNTER.old   @.  0=.
#if       T:QUEUE.COUNTER   @.          T:QUEUE.COUNTER.old  !.
   from->to.QUEUE.COUNTER   @.   from->to.QUEUE.COUNTER.old  !.
      T:NFA.QUEUE.COUNTER   @.      T:NFA.QUEUE.COUNTER.old  !.
      T:NFA.QUEUE.COUNTER*  @.      T:NFA.QUEUE.COUNTER.old* !.
#then

:.  mu    20011000  200u   30u  ;.
\   mu




cortex.m0?  @.
#if
: nfa>cfa ( nfa -- cfa )  count  1f  and  +  aligned  ;  \ 51m0stm32F407eF  51m3stm32F407eF
#else
: nfa>cfa ( nfa -- cfa )  8 - @  ;   \ 430stm32F407eF
#then

comment:




: cfa>nfa ( cfa -- nfa )  >r  last @
  begin   dup  nfa>cfa  r@  <>
  while   cell-    @
  repeat  r>drop   ;

: mF   382c  execute  ;

: test.pattern ( cfa -- )  >r
  0  0  over  .8n   dup  .8n   r@  cfa>nfa  .id  r>  execute  .  ;


 
















   :  get.command      (.--.n.)         key   ;
   :  execute.command  (.n.--.)               df    and
      dup  'A' = if  drop    tF         exit  then
      dup  'B' = if  drop    execute    exit  then
      dup  'C' = if  drop    .stack     exit  then
           'D' = if          enter.8n   exit  then  ;

   :  tF1   begin   get.command    execute.command     again

   :  get+execute.command.2  (.--.)     key   df    and
      dup  'A' = if  drop    tF         exit  then
      dup  'B' = if  drop    execute    exit  then
      dup  'C' = if  drop    .stack     exit  then
           'D' = if          enter.8n   exit  then  ;

  :  tF2    begin   get+execute.command.2     again

  :.  T:41   T 41  R:#  ;.
  :.  T:42   T 42  R:#  ;.
  :.  T:43   T 43  R:#  ;.
  :.  T:44   T 44  R:#  ;.

  :. R0:41   0 41  R:#  ;.
  :. R0:42   0 42  R:#  ;.
  :. R0:43   0 43  R:#  ;.
  :. R0:44   0 44  R:#  ;.

  t:  get+execute.command.3 (.--.)  push.LR  key   TnDF
       T:41  if'=  drop  tF         ret  then'
       T:42  if'=  drop  execute    ret  then'
       T:43  if'=  drop  .stack     ret  then'
       T:44  if'=  drop  enter.8n        then'     ret

   :  tF3    begin   get+execute.command.3     again

  t:  get+execute.command.4 (.--.)  push.LR  key   TnDF   R0=T
      R0:41  if'=        tF         ret  then'
      R0:42  if'=        execute    ret  then'
      R0:43  if'=        .stack     ret  then'
      R0:44  if'=        enter.8n        then'     ret

   :  tF4    begin   get+execute.command.4     again

----------------------------------------------------------------------------------------
00000000  20000300  \ rp=20000300
00000004  00007285  \ jmp main in 430stm32F4xx.eForth or 3769 in 51stm32F4xx.eForth

0000003F
----------------------------------------------------------------------------------------
00000040                                                        image of eForth*  <--  51stm32F4xx.eForth start
                                                                            |
00000600   image of start of eForth* program                                |
                                                                            |
00003759                                                        image of eForth*  <--  51stm32F4xx.eForth start

00003FFF
----------------------------------------------------------------------------------------
00004000                                                                 eForth   <-- 430stm32F4xx.eForth start

00008C2B                                                                 eForth   <-- 430stm32F4xx.eForth end

0000BFFF
----------------------------------------------------------------------------------------
0000C000    PCFA+NFA+NFA   seperated head portion of 430+51.eForth start

0000EF23    PCFA+NFA+NFA   seperated head portion of 430+51.eForth .....

0000FFFF    PCFA+NFA+NFA   seperated head portion of 430+51.eForth .....
00010000
                     |
                     |
                1M byte space
                     |
                     |
000FFFFF    end of flash memory      \ 100000 = 16*64k=1M
****************************************************************************************
20000000                start of ram

20001FFF
----------------------------------------------------------------------------------------
20002000                                                                 eForth*  <--  51stm32F4xx.eForth start
20002040    doUSER.variable*  to be placed in flash memory if possible      |
     +A7           |                                                        |
200020E7    doUSER.variable*  to be placed in flash memory if possible      |
                                                                            |
20002100    doUSER.variable*  in ram                                        | 4000
                   |                                                        |
200021A7    doUSER.variable*  in ram                                        |
                                                                            |
20002600    program starting area                                           |
                                                                            |
2000544D                                                                 eForth*  <--  51stm32F4xx.eForth end
----------------------------------------------------------------------------------------
20008080    address of Terminal Input Buffer    \ 'TIB



2000C000    PCFA+NFA+NFA   seperated head portion of 430+51.eForth for program developped in ram


2000FFFF    PCFA+NFA+NFA   seperated head portion of 430+51.eForth for program developped in ram
*****************************************************************************************
comment;


















































       ( USART1_BASE  ''  ?rx            00020870  00020848               -.  +.  32!'  )
       ( USART1_BASE  ''  tx!            00020890  0002087C               -.  +.  32!'  )  ''  bit@   cfa'.of.bit@  !.

    all>pool         8051eForth.based.addr   @.  10000  +.    PROGRAM.LENGTH  !.

  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   '' end  4  -.  ( cfa'>nfa' )    former.last'  !.

8051eForth.based.addr  @.  eForth.start.from?  @.  =.  #if  ''  cold    '' eF51  14   +.  32!'   ( *** caution ! ***   see  eF51 )  #then
\ include  nuc472_target_pin_address1b.f   \  :  end  ;  \ always at the end to ensure the linking to the previous eForth linkage.
\ =======================================================================================================
#then
:{  R4=T+1   4  t  1 r=r+#   };
:{   jmp_r4  4   jmp_r       };
:{  call_r4  4  call_r       };
:{          {execute}   R4=T+1   {drop}    jmp_r4  };   \ to replace the old one.
:{  {no.drop.execute}   R4=T+1             jmp_r4  };

:{          {call}               R4=T+1   {drop}   call_r4         };   \ to replace the old one.
:{          {call}+     push.R4  R4=T+1   {drop}   call_r4  pop.R4 }; 
:{  {no.drop.call}               R4=T+1            call_r4         };
:{  {no.drop.call}+     push.R4  R4=T+1            call_r4  pop.R4 };

:  bounds  ( FROM LENGTH --  upper lower )    over  +  swap  ;

:  t>h     ( from len -- )  bounds    do             i   {c@}   emit  loop   ;
\ '' t>h   addr.of.t>h  !.

:  t<h     ( from len -- )  bounds    do     key     i   {c!}         loop   ;
\ '' t<h   addr.of.t<h  !.

:  ws       words   ;
 
'' t>h   cfa'.of.t>h   !.
'' t<h   cfa'.of.t<h   !.

:. p<t     ( from to len --)  rot.  232." HEX"  50 MS.  number>232  dup.  number>232  '' t>h          number>232  232." EXECUTE"    8 0 do. COMnKEY drop. loop.            bounds.  do.  COMnKEY  i.   c!'  loop.  ;.
:. p<t     ( from to len --)  rot.  232." HEX"  50 MS.  number>232  dup.  number>232  cfa'.of.t>h @.  number>232  232." EXECUTE"    8 0 do. COMnKEY drop. loop.            bounds.  do.  COMnKEY  i.   c!'  loop.  ;.


:. p>t     ( from to len --)
           exi  ini  232." HEX"  50 MS.  swap.  number>232  50 ms.  dup.  number>232  50 ms. cfa'.of.t<h  @.  \ '' t<h
           number>232  50 ms.   232." EXECUTE"
           50 ms.    bounds.  do.    i.  c@'  COMnEMIT   loop.  ;. \ It takes longer to find word/number under eForth.

:. P<T*    ( from to len -- )  EXI  INI  rot.   number>232  dup.  number>232  232." t>h"  4 0 DO. COMnKEY DROP. LOOP.  1-.  BOUNDS.  swap.  ?DO.           COMnKEY    I.  c!'  -1  +LOOP.  ;.
:. P>T*    ( from to len -- )  EXI  INI  swap.  number>232  dup.  number>232  232." t<h"                               1-.  BOUNDS.  swap.  ?DO.  I.  c@'  COMnEMIT            -1  +LOOP.  ;.

:. update.p<t*   20000000    20000000   10000   P<T*  ;.  \ It takes 7 second to complete.
:. update.p<t    20000000    20000000   10000   P<T   ;.  \ It takes 7 second to complete.

:. ud*    update.p<t*   ;.
:. ud     update.p<t    ;.

:. p<t(tF)   ( from    len -- )  exi  ini  over. (D')  dup.  (D')  cfa'.of.t>h  @. (B')  bounds.  ?do.  COMnKEY   i.   c!'   loop.  ;.
                                                         \  '' t>p   cfa'.of.t>h  !.
:. p>t(tF)   ( from    len -- )  exi  ini  over. (D')  dup.  (D')  cfa'.of.t<h  @. (B')  bounds.  ?do.  i.  c@'   COMnEMIT   loop.  ;.
                                                         \  '' t<p   cfa'.of.t<h  !.

\  p<t(tF)+  ( from to len -- )  exi  ini   rot.  (D')  dup.  (D')  cfa'.of.t>h  @. (B')  bounds.  ?do.  COMnKEY   i.   c!'   loop.  ;.
\  p>t(tF)+  ( from to len -- )  exi  ini   swap. (D')  dup.  (D')  cfa'.of.t<h  @. (B')  bounds.  ?do.  i.  c@'   COMnEMIT   loop.  ;.

:. p<t(tF)+  ( from to len -- )  232." TF"  rot.  (D')  dup.  (D')  cfa'.of.t>h  @. (B')  bounds.  ?do.  COMnKEY   i.   c!'   loop.  'A'  COMnEMIT  ;.
:. p>t(tF)+  ( from to len -- )  232." TF"  swap. (D')  dup.  (D')  cfa'.of.t<h  @. (B')  bounds.  ?do.  i.  c@'   COMnEMIT   loop.  'A'  COMnEMIT  ;.

:. p<t'      ( from to len -- )  p<t(tF)+   ;.    \ It takes longer to find word/number under eForth. So, here tF.
:. p>t'      ( from to len -- )  p>t(tF)+   ;.    \ It takes longer to find word/number under eForth. So, here tF.

   :.  P2T   20020000   20020000   FF00  P>T  ;.  \ 2002FF00 ~ 2002FFFF are reserved by mecrispForth
   :.  T2P   20020000   20020000  10000  P<T  ;.

   :.  P2T+  20010000   20010000  2FF00  P>T  ;.  \ 2002FF00 ~ 2002FFFF are reserved by mecrispForth
   :.  T2P+  20010000   20010000  20000  P<T  ;.


   :.  menu  ( -- )
       cr.   .".  :.  ttt   '' t<h   cfa'.of.t<h  !.  ;.         \ target eForth "
       cr.   .".  :.  mmm     3EEE   cfa'.of.t<h  !.  ;.         \  mecrispForth "
       cr.
       cr.   .".  :.  p>t     ( from to len --) "
       cr.   .".      exi  ini  232."  '"' emit. .".  HEX" '"'  emit.  .".   swap. "
             .".   number>232  50 ms.  dup.  number>232  50 ms.    cfa'.of.t<h  @."
       cr.   .".      number>232  50 ms.    232."  '"'  emit.  .".  EXECUTE"  '"'  emit.
             .".       50 ms.  bounds.  do.  i.  c@'  COMnEMIT  loop.   ;. "
       cr.
       cr.   .".  :.  p>t(tF)  ( from len -- )     exi  ini  over. (D')  dup. (D') '' t<h  (B')  bounds. ?do.  i.  c@'   COMnEMIT  loop.  ;."
       cr.   .".  :.  p>t(tF)' ( from to len -- )  exi  ini  swap. (D')  dup. (D') '' t<h  (B')  bounds. ?do.  i.  c@'   COMnEMIT  loop.  ;."
       cr.   .".  :.  p<t(tF)  ( from len -- )     exi  ini  over. (D')  dup. (D') '' t>h  (B')  bounds. ?do.  COMnKEY   i.   c!'  loop.  ;."
       cr.   .".  :.  p<t(tF)' ( from to len -- )  exi  ini  swap. (D')  dup. (D') '' t>h  (B')  bounds. ?do.  COMnKEY   i.   c!'  loop.  ;."
       cr.
       cr.   .".  :.  P2T   20020000   20020000   FF00  P>T  ;.  \ 2002FF00 ~ 2002FFFF are reserved by mecrispForth "
       cr.   .".  :.  P2T+  20010000   20010000  2FF00  P>T  ;.  \ 2002FF00 ~ 2002FFFF are reserved by mecrispForth "
       cr.   .".  :.  T2P   20020000   20020000  10000  P<T  ;.  "
       cr.   .".  :.  T2P+  20010000   20010000  20000  P<T  ;.  "
       cr.
       cr.   .".  :.  T2T   ttt   P2T  '' cold  number>232  232."  '"' emit. .".  EXECUTE" '"'  emit. .".  ;. "
       cr.   .".  :.  M2T   mmm   P2T  '' cold  number>232  232."  '"' emit. .".  EXECUTE" '"'  emit. .".  ;. "
       cr.
       cr.   .".  :.  T2T+  ttt   P2T+ '' cold  number>232  232."  '"' emit. .".  EXECUTE" '"'  emit. .".  ;. "
       cr.   .".  :.  M2T+  mmm   P2T+ '' cold  number>232  232."  '"' emit. .".  EXECUTE" '"'  emit. .".  ;. "
       cr.   ;.










:.  y:w     y w r:r  ;.

:.  i   {dup}  t  y  r=r  ;.
:.  j   {dup}  t=r        ;.
:.  k   {dup}  t=r''      ;.

:. {i}  {dup}  t  y  r=r  };     \  :{  {i}   i  };
\ :{ {j}  {dup}  t=r        };
\ :. {k}  {dup}  t=r''      };

:.  tu  ( a' -- )  dup.  dup.  100  p<t  uu         ;.   \  target  u
:.  td  ( a' -- )  dup.  dup.  100  p<t  100 dump'  ;.   \  target  dump

mecrisp32F429/407?  @.
#if
   m407?  @.
   #if
       insert{  18b6  org  t:  ."|      ''  ."|  CFA'.OF.."|  !.    }insert

                      0   3810  16!'    \ ---.Flash.Dictionary.---     it was FFFF to cause the sease.
                  \   0 ( ffff )  current.nfa'   @.   2   -.   16!'
                     10   3602   c!'    \  default  hex number

   #else
       insert{  18fc  org  t:  ."|      ''  ."|  CFA'.OF.."|  !.    }insert  \  was ." ????

                      0   3810  16!'    \ ---.Flash.Dictionary.---     it was FFFF to cause the sease.
                  \   0 ( ffff )  current.nfa'   @.   2   -.   16!'
                     10   3602   c!'    \  default  hex number
   #then
#then

 

variable.  start.from.tF?     \  start.from.tF?  on.

start.from.tF?  @.
#if     '' tF    '' quit    35FA  35EA  -.    -.  32!'   \   .. 366C      .. 35EA
#then

:. jj''  ( upper lower -- )   max.min   ?do.  cr.  i.  _DISASSEM.CALL/JMP   2  +loop.  ;.
:. jj    ( -- )               4000  0   jj''  ;.

variable.  103.test?   \  103.test? on.

103.test?  @.
#if        jj
#then

comment:
\ :{{ >r0                     3 t r=r {drop}  }};
  :{{ >r0~1     nip>r0        3 t r=r {drop}  }};
\ :{{ >r0~2     nip>r0,r1     3 t r=r {drop}  }};
  :{{ >r0~3     nip>r0,r1,r2  3 t r=r {drop}  }};
  :{{ >r0~3     cf0e 16,'  ( nip>r1,r2,r3 ) 0 t r=r {drop}  }};
  :{{ >r0~3^    r0=t  {drop}  r1=t  {drop}  r2=t  {drop}  r3=t  {drop}  }};
  :{{ >r0~3     r3=t  {drop}  r2=t  {drop}  r1=t  {drop}  r0=t  {drop}  }};
comment;

nuc453eF?  @.
#if   \  include  865N18I.F
#else    include  bss.f
         include  data.f          :.  label  label'(gcc)  ;.
         include  text2label.f
#then
:. call.c  ( a' -- )  dup.  here'  -.  abs.  7fFFFF  <.
   if.     1+.                    rcall_#24
   else.   1+.   0  swap. r=#     ,call_r0
   then.   ;.  \ 0 '' add4  r0=#   call.r0

:. >t      ( a' -- )  dup.  DUP.  9 U.R.  100   p>t  ;.  \  '' ++++  >t


:.  r=(t)    t         r=(r)  ;.
:.  (t)=r    t  swap.  (r)=r  ;.

nuc453eF?  @.
#if       : add4  ;
       \  include  text2label.f
    NEW













\    include  865N18I16.F

variable.  case.sensitive?  \ case.sensitive?  on.

           defer'>call.cfa'?      on.     ERASE.DEFER':NFA.QUEUE   DEFER':NFA.QUEUE.counter  off.
          :.  immediate       immediate'     ;.
          :.  compile-only    compile-only'  ;.

variable.  head.adjacent.to.cfa?        \ name> , >name are influenced.
           head.adjacent.to.cfa?  on.
          dual.head.Forth(51eF)?  on.   ( dual.headed )
               +Pcfa?             off.

\ variable.  ram.offset    10000  ram.offset  !.

 words'?  on.
\  20000300   ram.offset  @.  +.  (rp0)  !.
\  20000378   ram.offset  @.  +.  (sp0)  !.

  optimize?  off.    traditional.structure?  on.

last.FLOADed.souce.addr  @.  ?dup.  #if   org   #then
\ **********************************************************************************************
  var.space  @. ( 600 )  8051eForth.based.addr  @.  +.  org     \  20002000

cortex.m0?   @.
#if
  \ ------------------------------------------------------------------------
                                    t:  xor!                (.n.a.--.)   \ (T)xS,2drop       cfa= 548
  (  00000548  03 CF             )                  nip>r0,r1
  (  0000054A  32 68             )                  R2=(T)
  (  0000054C  42 40             )                  R2xR0
  (  0000054E  32 60             )                  (T)=R2
  (  00000550  0E 46             )                  T=R1
  (  00000552  70 47             )                  ret'

                                    t:  bis!        push.LR   xor!   ret
  \ ------------------------------------------------------------------------
                                    t:  or!     (  t:  bis! )   (.n.a.--.)    \ (T)oS,2drop      cfa= 518
  (  00000518  03 CF             )                  nip>r0,r1
  (  0000051A  32 68             )                  R2=(T)
  (  0000051C  02 43             )                  R2oR0
  (  0000051E  32 60             )                  (T)=R2
  (  00000520  0E 46             )                  T=R1
  (  00000522  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  and!                  (.n.a.--.)   \ (T)nS,2drop       cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  bit@                (.a.--.f.)   \ (T)nS,2drop,32bit=T/F     cfa= 560
  (  00000560  01 CF             )                  nip>r0
  (  00000562  36 68             )                  {@}
  (  00000564  06 40             )                  TnR0
  (  00000566  18 BF             )      if'nz  \  bf18 16,' \            it'<>......itne
  (  00000568  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000056C  70 47             )      then'       ret'
#else

  \ --------------------------------------------------------------------------
                                    t:  bit@                ( a.--.f.)   \ (T)nS,2drop,32bit=T/F     cfa= 560
  (  00000560  01 CF             )                  nip>r0
  (  00000562  36 68             )                  {@}
  (  00000564  06 40             )                  TnR0
  (  00000566  18 BF             )      bf18 16,' \            it'<>......itne
  (  00000568  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000056C  70 47             )                  ret'
  \ --------------------------------------------------------------------------
#then                                           :.  T=R1   t 1  r=r  ;.
  \ ------------------------------------------------------------------------
                                    t:  bic!                  (.n.a.--.)   \ (T)nS/,2drop      cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0/
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  xor!                ( 32n a' -- )   \ (T)xS,2drop       cfa= 548
  (  00000548  03 CF             )                  nip>r0,r1
  (  0000054A  32 68             )                  R2=(T)
  (  0000054C  42 40             )                  R2xR0
  (  0000054E  32 60             )                  (T)=R2
  (  00000550  0E 46             )                  T=R1
  (  00000552  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  or!       \ t:  bis!  ( 32n a' -- )    \ (T)oS,2drop      cfa= 518
  (  00000518  03 CF             )                  nip>r0,r1
  (  0000051A  32 68             )                  R2=(T)
  (  0000051C  02 43             )                  R2oR0
  (  0000051E  32 60             )                  (T)=R2
  (  00000520  0E 46             )                  T=R1
  (  00000522  70 47             )                  ret'

                                    t:  bis!        push.LR   or!   ret
  \ ------------------------------------------------------------------------
                                    t:  and!                  ( 32n a' -- )   \ (T)nS,2drop       cfa= 530
  (  00000530  03 CF             )                  nip>r0,r1
  (  00000532  32 68             )                  R2=(T)
  (  00000534  82 43             )                  R2nR0
  (  00000536  32 60             )                  (T)=R2
  (  00000538  0E 46             )                  T=R1
  (  0000053A  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  0=                                                    \ cfa=     5060
  (  00005060  00 2E 02 D1 6F+07 )                  {0=}
  (  0000506C  70 47             )                  ret' 
  \ --------------------------------------------------------------------------
                                    t:  ON    ( a -- )   (t)=0/   {drop}   ret'
  \ --------------------------------------------------------------------------
                                    t:  OFF   ( a -- )   (t)=0    {drop}   ret'
  \ ------------------------------------------------------------------------
                                    t:  i
  ( 0238   4 R7 SUBS              )  {dup} \ 3F04  16,'
  ( 023A   0 R7 R6 STR            )        \ 603E  16,'
  ( 023C   0 SP R0 LDR            )          9800  16,'   \ R0=(sp+0)
  ( 023E   4 SP R6 LDR            )          9E01  16,'   \ T=(sp+4)
  ( 0240   R0 R6 R6 ADDS          )  t+r0  \ 1836  16,'
  ( 0242   LR BX                  )  ret'  \ 4770  16,'      resolve.data.pended

                                    t:  j
  ( 0244   4 R7 SUBS              )  {dup} \ 3F04  16,'
  ( 0246   0 R7 R6 STR            )        \ 603E  16,'
  ( 024A   C SP R0 LDR            )          9803  16,'   \ R0=(sp+0C)
  ( 0248   8 SP R6 LDR            )          9E02  16,'   \ t=(sp+8)
\ ( 024A   C SP R0 LDR            )          9803  16,'   \ R0=(sp+0C)
  ( 024C   R0 R6 ADD              )          4406  16,'   \ t+r0
  ( 024E   LR BX                  )  ret'  \ 4770  16,'     resolve.data.pended
  \ ------------------------------------------------------------------------
                                    t:  k'                                                       cfa= B08
  (  00000B08  04 3F 3E 60       )              {dup}
  (  00000B0C  02 9E             )              T=R''''
  (  00000B0E  03 98             )              R0=R'''''
  (  00000B10  06 44             )              T+R0
  (  00000B12  70 47             )              ret'
\ ------------------------------------------------------------------------
                                    t:  (do)                                                     cfa= A84
  (  00000A84  30 46             )   r0=t         \ 4630 16,'  \       R0=T
  (  00000A86  42 CF             )   r1=s,2drop   \ { R1, T, } sp ldm
cortex.m0?  @.
#if
                                     R2=80000000    R1xR2
#else
  (  00000A8A  51 40             )   R1x80000000  \ 4051 16,'  \         R1xR2
#then
  (  00000A8C  40 1A             )   r0-r1        \ 1a40 16,'    \         R0=R0-R1
  (  00000A8E  03 B4             )   push.r0,r1   \ { r0, r1, }  push  \ b403 16,'  \         push{}  R0 R1
  (  00000A90  70 47             )              ret'    RESOLVE.DATA.PENDED
  (  00000A92  00 BF             )         \    nop
  (  00000A94  00 00 00 80       )   \ data:    80000000
  \ ------------------------------------------------------------------------
                                    t:  (?do)                                                    cfa= A98
  (  00000A98  30 46             )   r0=t         \ 4630 16,'  \          R0=T
  (  00000A9A  42 CF             )   r1=s,2drop   \ { R1, T, } sp   ldm
  (  00000A9C  88 42             )   4288 16,'    \  R0:R1
  (  00000A9E  03 D0             ) if'z=0         \         AA8....z=1?(=?)
cortex.m0?  @.
#if
                                     R2=80000000    R1xR2
#else
  (  00000AA2  51 40             )   R1x80000000  \ R1xR2  \  4051 16,'  \         R1xR2
#then
  (  00000AA4  40 1A             )   r0-r1        \   1a40 16,'    \         R0=R0-R1
  (  00000AA6  03 B4             )   push.r0,r1   \  { r0, r1, }  push  \ b403 16,'   b403 16,'  \         push{}  R0 R1
  (  00000AA8  70 47             ) then'        ret'    RESOLVE.DATA.PENDED
  (  00000AAA  00 BF             )   \      \   nop
  (  00000AAC  00 00 00 80       )   \ data:    80000000
  \ ------------------------------------------------------------------------ 
                                    t:  (loop)                                                  cfa= AC8
  (  00000AC8  01 BC             )              pop.r0
  (  00000ACA  40 1C             )              1c40 16,'   \    r0+1
  (  00000ACC  01 B4             )              push.r0
  (  00000ACE  00 D7             )  if'v=1
  (  00000AD0  02 B0             )              b002 16,'   \    sp+8
  (  00000AD2  70 47             )  then'       ret'

                                    t:  (+loop)                                                 cfa= AD4
  (  00000AD4  01 BC             )              pop.R0  \     { R0, }
  (  00000AD6  80 19             )              R0+T
  (  00000AD8  40 CF             )              {drop}
  (  00000ADA  01 B4             )              push.R0
  (  00000ADC  00 D7             )  if'v=1   \  AE0....v=0?
  (  00000ADE  02 B0             )              B002  16,'   \  sp+8
  (  00000AE0  70 47             )  then'       ret'
  \ ------------------------------------------------------------------------
  (  0174  5C 01             )                                                                    \  lfa= 0174
  (  0176  45 64 6F 4C 49 54 )   t:  doLIT    (.--.n.)                             compile-only   \  cfa= 017C
  (  017C  D0 83 D0 82 08 +0D)                      {doLIT}   ret'

:.  ...  doLIT    32,'  ;.       :.  ...   {dup}  t=#  ;.  \  ?????????

     ''  doLIT  >mca
     ''  doLIT  cfa'.of.doLIT*   !.
     :.  doLIT          doLIT'*  ;.


:.  r=(t)    t         r=(r)  ;.
:.  (t)=r    t  swap.  (r)=r  ;.
  \ ------------------------------------------------------------------------
                                    t:  setup.clocks                                            cfa= AE4
comment:
  (  00000AE4  33 4E             )          {dup}   T=40023800
  (  00000AE6  4F F4 80 30       )                  R0=10000
  (  00000AEA  30 60             )                  (T)=R0
  \ ------------------------------------------------------------------------
                                 \  t:  awaitHSE   \ not allowed in adjacent version            cfa= AEC
                                 \ begin'
  (  00000AEC  30 68             )                  R0=(T)
  (    f400  16,'  3000  16,'    )                  R0n20000
       f43f  16,'  affb  16,'    \ until'<>
  (  00000AF6  30 4E             )                  T=40023808
  (  00000AF8  4F F0 01 00       )                  R0=1
  (  00000AFC  30 60             )                  (T)=R0
  (  00000AFE  2D 4E             )                  T=40023800
  (  00000B00  30 68             )                  R0=(T)
  (  00000B02  20 F0 01 00       )                  R0n1/
  (  00000B06  30 60             )                  (T)=R0
  (  00000B08  70 47             )         {drop}   ret'
comment;


  (  000016D0  1D 49             )                  R1=40023800                                   \ (00001748)=40023800
  (  000016D2  4F F4 80 30       )                  R0=10000
  (  000016D6  08 60             )                  (R1)=R0
                                          begin'                     \ 000016DE --> 000016D8 -------------------------------
  (  000016D8  08 68             )                  R0=(R1)
  (  000016DA  00 F4 00 30       )                  R0n20000
  (  000016DE  FB D0             )        until'<> \ z=1? eq?        \ 000016DE --> 000016D8 -------------------------------
  (  000016E0  1A 49             )                  R1=40023808                                   \ (0000174C)=40023808
  (  000016E2  4F F0 01 00       )                  R0=1
  (  000016E6  08 60             )                  (R1)=R0
  (  000016E8  17 49             )                  R1=40023800                                   \ (00001748)=40023800
  (  000016EA  08 68             )                  R0=(R1)
  (  000016EC  20 F0 01 00       )                  R0n1/
  (  000016F0  08 60             )                  (R1)=R0
  (  000016F2  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  setup.uart                                              cfa= B0A
comment:
  (  00000B0A  2C 4E             )         {dup}    T=40023830
  (  00000B0C  2C 48             )                  R0=1001FF
  (  00000B0E  30 60             )                  (T)=R0
  (  00000B10  2C 4E             )                  T=40020000
  (  00000B12  30 68             )                  R0=(T)
  (  00000B14  2C 4D             )                  W  A0  r=#
  (  00000B16  40 EA 05 00       )                  0  w   RoR
  (  00000B1A  30 60             )                  (T)=R0
  (  00000B1C  2B 4E             )                  T=40020020
  (  00000B1E  2C 48             )                  R0=7700
  (  00000B20  30 60             )                  (T)=R0
  (  00000B22  2C 4E             )                  T=40023840
  (  00000B24  2C 48             )                  R0=20000
  (  00000B26  30 60             )                  (T)=R0
  (  00000B28  2C 4E             )                  T=40004408
  (  00000B2A  2D 48             )                  R0=46
  (  00000B2C  30 60             )                  (T)=R0
  (  00000B2E  2D 4E             )                  T=4000440C
  (  00000B30  2D 48             )                  R0=200C
  (  00000B32  30 60             )                  (T)=R0
  (  00000B34  70 47             )          {drop}  ret'
comment;



  (  000016F4  16 49             )                  R1=40023830                                   \ (00001750)=40023830
  (  000016F6  17 48             )                  R0=001007FF                                   \ (00001754)=001007FF
  (  000016F8  08 60             )                  (R1)=R0
  (  000016FA  17 49             )                  R1=40020000                                   \ (00001758)=40020000
  (  000016FC  08 68             )                  R0=(R1)
  (  000016FE  40 F4 20 10       )                  R0o280000
  (  00001702  08 60             )                  (R1)=R0
  (  00001704  15 49             )                  R1=40020024                                   \ (0000175C)=40020024
  (  00001706  16 48             )                  R0=00000770                                   \ (00001760)=00000770
  (  00001708  08 60             )                  (R1)=R0
  (  0000170A  16 49             )                  R1=40023844                                   \ (00001764)=40023844
  (  0000170C  16 48             )                  R0=00000010                                   \ (00001768)=00000010
  (  0000170E  08 60             )                  (R1)=R0
  (  00001710  16 49             )                  R1=40011008                                   \ (0000176C)=40011008
  (  00001712  46 20             )                  R0=46
  (  00001714  08 60             )                  (R1)=R0
  (  00001716  16 49             )                  R1=4001100C                                   \ (00001770)=4001100C
  (  00001718  16 48             )                  R0=0000200C                                   \ (00001774)=0000200C
  (  0000171A  08 60             )                  (R1)=R0
  (  0000171C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  012E  00 00             )                                                                    \  lfa= 012E
  (  0130  03 21 49 4F       )     :  !IO       (.--.)                                            \  cfa= 0134
  (  0134  C2 AC             )            \     `   _0AC=0          \ ES
  (  0136  75 98 52          )            \     `   R98=52          \ SCON
  (  0139  22                )                      RET
  \ -------------------------------------------------------------------------------

nuc442eF?  @.
#if

t:  tx!      ( char -- )                                        \ ----------__7 6 5 4 3 2 1 0----------
    r2=tx  ( R2=40004868 ) ( 4000403C )   R0=0  (R2)=R0  8.68us   8       \        -->  <-- 8.68us
    for'r3      rrc.T
       if'c=1   R0=1
       else'    R0=0  \ nop  nop
       then'    (R2)=R0    8.68us
    next'r3     R0=1  (R2)=R0   {drop}    8.68us   ret'    NOP  NOP  NOP  NOP  NOP  NOP NOP

comment:   ??????????
t:  tx!      ( char -- )     To100                                       \ ----------__7 6 5 4 3 2 1 0----------
    r2=tx  ( R2=40004868 ) ( 4000403C )   r3=0a
                ahead'.                                                  \        -->  <-- 8.68us
    begin'                 rrc.t
       if'c=1              R0=1
       else'    then'.     R0=0   \ nop  nop
       then'    (R2)=R0    8.68us
    next'r3    {drop}      ret'     NOP  NOP  NOP  NOP  NOP  NOP NOP



 t: SendChar_ToUART(c)  (.n.--.)          {>r0}    \ nuc472
                                          begin'                     \ 00000AD2 --> 00000ACA ===========================
  (  00000ACA  09 49             )                  R1=40070000                                 \ (00000AF0)=40070000
  (  00000ACC  89 69             )                  R1=(R1+18)
  (  00000ACE  11 F4 00 0F       )                  R1n800000,tst
  (  00000AD2  FA D1             )        until'= \ z=0? ne?         \ 00000AD2 --> 00000ACA ===========================
  (  00000AD4  06 49             )                  R1=40070000                                 \ (00000AF0)=40070000
  (  00000AD6  08 60             )                  (R1+0)=R0
  (  00000AD8  0A 28             )                  0  0A  R:#  \ R0:0A
  (  00000ADA  08 D1             )        if'= \ z=0? ne?            \ 00000ADA --> 00000AEE +++++++++
  (  00000ADC  00 BF             )                  nop
                                            begin'                   \ 00000AE6 --> 00000ADE +++++
  (  00000ADE  04 49             )                  R1=40070000                                 \ (00000AF0)=40070000
  (  00000AE0  89 69             )                  R1=(R1+18)
  (  00000AE2  11 F4 00 0F       )                  R1n800000,tst
  (  00000AE6  FA D1             )          until'= \ z=0? ne?       \ 00000AE6 --> 00000ADE +++++
  (  00000AE8  0D 21             )                  R1=0D
  (  00000AEA  01 4A             )                  R2=40070000                                 \ (00000AF0)=40070000
  (  00000AEC  11 60             )                  (R2+0)=R1
                                          then'                      \ 00000ADA --> 00000AEE +++++++++
  (  00000AEE  70 47             )                  ret'
comment;

  ''  TX!  cfa'.of.TX!*  !.

\ 40004868  equ  tx!(pb10)
\ 4000486c  equ  ?rx(pb11)
\ ---------------------------------------------------------------------------------
\ t:  ?rx(key)    ( -- char )
\    {dup}       t=0    R2=rx    ( 4000403C )   \ (pb11)
\    begin'      r0=(r2)     0  0  r:#
\    until'=     4.34us      8
\    for'r3      {2*}        8.68us           \ t rrc.r ( t<<1 )
\                r0=(r2)     0  0  r:#
\       if'=     {1+}  \ t+1
\ \      else'  \ nop
\       then'
\    next'r3   r1=t  t=0   8  for'r0   {2*}  1 rrc.r   if'c=0  {1+}   then'  next'r0  ret'

t:  ?rx    ( -- char )
    {dup}       t=0    R2=rx
                r0=(r2)     0  0  r:#
    if'<> ret'  then'
    begin'      r0=(r2)     0  0  r:#
    until'=
    4.34us      8
    for'r3      {2*}        8.68us           \ t rrc.r ( t<<1 )
                r0=(r2)     0  0  r:#
       if'=     {1+}  \ t+1
\      else'  \ nop
       then'
    next'r3     3.25us ( 4.34us )  r1=t  t=0   8  for'r0   {2*}  1 rrc.r   if'c=0  {1+}   then'  next'r0 {-1} ret'


 ''  ?RX  cfa'.of.?RX*  !.

comment:
  \ -------------------------------------------------------------------------------
                                    t:  ?RX       ( stm32f429 )                                   \ cfa= 20020870
  (  20020870  04 3F 3E 60       )                  {dup}
  (  20020874  08 4A             )                  R2=40011000          \ USART1_BASE            \ (20020898)=40011000
  (  20020876  11 68             )                  R1=(R2+0)
  (  20020878  11 F0 20 01       )                  R1=R1n20,s
  (  2002087C  07 D0             )      if'<> \ z=1? eq?             \ 2002087C --> 2002088E ===
  (  2002087E  04 32             )                  R2+4,s
  (  20020880  92 F9 00 60       )                  T=(R2+0)b
  (  20020884  04 3F 3E 60       )                  {dup}
  (  20020888  6F F0 00 06       )                  T=-1
  (  2002088C  00 E0             )                  jmp_20020890    \
                                        then'                        \ 2002087C --> 2002088E ===
  (  2002088E  B6 1B             )                  T=0
  (  20020890  92 F9 00 00       )                  R0=(R2+0)b
  (  20020894  70 47             )                  ret'
  (  20020896  00 BF             )                  nop
  (  20020898  00 10 01 40       )           data:  40011000 ok........  \ from 20020874
comment;








t:  tx!???       ( char -- )  \ (pb10)
    R2=40004868  ( 4000403C )
    begin'  R0=0   (R2)=R0    \  8.68us
            R0=1   (R2)=R0    \  8.68us
    again'  ret'

t:  test.tx!'    push.LR  56 ( 'V' )  ...  tx!      20000 for'r0  next'r0
    30 ...  tx!  20000 for'r0  next'r0   R2=4000486c  r0=(r2)  0 1 r:#  if'=  31 ...  tx!  else'  38 ... tx!   then'
\   begin'  ?rx  tx!  again'       ret
            begin'  ?rx   T:0 {DROP} UNTIL'<>     tx!   ret

t:  test.tx!   push.LR   test.tx!'   8.68us  test.tx!'  8.68us  20002101 ... {c@}  tx!  8.68us  20002105 ... {c@}  tx!  ret

\       0x0000092e:    f8d80000    ....    LDR      r0,[r8,#0]
\       0x00000932:    2801        .(      CMP      r0,#1
\       0x00000934:    d1d3        ..      BNE      0x8de ; main + 60
t:  test.tx!    BEGIN'  55 ... TX!  AGAIN'

  ''  TX!  cfa'.of.TX!*  !.
#else
  (  015A  3C 01             )                                                                    \  lfa= 015A
  (  015C  03 54 58 21       )    t:  TX!    ( char -- )            {TX!}    ret'                 \  cfa= 0160

  ''  TX!  cfa'.of.TX!*  !.
   \ -------------------------------------------------------------------------------
  (  013A  30 01             )                                                                    \  lfa= 013A
  (  013C  03 3F 52 58       )    t:  ?RX    ( -- char -1 / 0 )     {?RX}    ret'                 \  cfa= 0140

  ''  ?RX  cfa'.of.?RX*  !.

#then

\ ''  ?RX  cfa'.of.?RX*  !.
  \ -------------------------------------------------------------------------------
  (  018E  76 01             )                                                                    \  lfa= 018E
  (  0190  44 6E 65 78 2E    )    t:  nex.                                         compile-only   \  cfa= 0196
  (  0196  D0 83 D0 82 D0 +1E)                      {nex.}
  (  01B9  22                )                      ret'

     ''  nex.  >mca
     ''  nex.  cfa'.of.nex.*   !.
  \ -------------------------------------------------------------------------------
  (  01D6  BC 01             )                                                                    \  lfa= 01D6
  (  01D8  46 62 72 61 6E 63 )    t:  branch                                       compile-only   \  cfa= 01E0

  (  01E0  D0 83 D0 82 E0 +06)                      {branch}
  (  01EB  22                )                      ret'     \ no need

  ''   branch  cfa'.of.branch*    !.
  \ -------------------------------------------------------------------------------
                                  t:  ?branch       {?branch}  ret'

  ''  ?branch  cfa'.of.?branch*   !.

:.  ,call.branch*                     cfa'.of.branch*   @.  ,call.cfa'  ;.
:.  ,call.?branch*                    cfa'.of.?branch*  @.  ,call.cfa'  ;.
  \ -------------------------------------------------------------------------------
  (  01EC  D8 01             )                                                                    \  lfa= 01EC
  (  01EE  07 45 58 45 43 55 )    t:  EXECUTE       {execute}   ret'  \ no ret                    \  cfa= 01F6
  \ -------------------------------------------------------------------------------
  (  0202  EE 01             )                                                                    \  lfa= 0202
  (  0204  01 21             )    t:  !    (.n.n.--.)                                             \  cfa= 0206
  (  0206  8A 82 8B 83 86 +0E)                      {!}
  (  0219  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  021A  04 02             )                                                                    \  lfa= 021A
  (  021C  01 40             )    t:  @    (.n.--.n.)                                             \  cfa= 021E
  (  021E  8A 82 8B 83 E0 +04)                      {@}
  (  0227  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0228  1C 02             )                                                                    \  lfa= 0228
  (  022A  02 43 21          )    t:  C!   (.n.n.--.)                                             \  cfa= 022E
  (  022E  8A 82 8B 83 18 +09)                      {C!}
  (  023C  22                )                      ret'
  (  023D  00                )
  \ -------------------------------------------------------------------------------
  (  023E  2A 02             )                                                                    \  lfa= 023E
  (  0240  02 43 40          )    t:  C@   (.a.--.char.)                                          \  cfa= 0244
  (  0244  8A 82 8B 83 E0 +03)                      {C@}
  (  024C  22                )                      ret'
  (  024D  00                )
  \ -------------------------------------------------------------------------------
  (  024E  40 02             )                                                                    \  lfa= 024E
  (  0250  42 3E 52          )    t:  >R   (.n.--.)                                compile-only   \  cfa= 0254
  (  0254  D0 83 D0 82 C0 +0B)                      {>R}    ret'

  ''  >R        cfa'.of.>R*   !.
  \ -------------------------------------------------------------------------------
  (  0264  50 02             )                                                                    \  lfa= 0264
  (  0266  02 52 40          )    t:  R@  (.--.n.)  {R@}    ret'                                  \  cfa= 026A
  \ -------------------------------------------------------------------------------
  (  027E  66 02             )                                                                    \  lfa= 027E
  (  0280  02 52 3E          )    t:  R>  (.--.n.)                                                \  cfa= 0284
  (  0284  08 A6 02 08 A6 +0B)                      {R>}    ret'
  \ -------------------------------------------------------------------------------
  (  0294  80 02             )                                                                    \  lfa= 0294
  (  0296  03 52 50 40       )    t:  RP@  (.--.n.)                                               \  cfa= 029A
  (  029A  08 A6 02 08 A6 +07)                      {RP@}
  (  02A6  22                )                      ret'
  (  02A7  00                )
  \ -------------------------------------------------------------------------------
  (  02A8  96 02             )                                                                    \  lfa= 02A8
  (  02AA  43 52 50 21       )    t:  RP!  (.n.--.)                                compile-only   \  cfa= 02AE
  (  02AE  D0 83 D0 82 8A +09)                      {RP!}     ret'
  \ -------------------------------------------------------------------------------
  (  02BC  AA 02             )                                                                    \  lfa= 02BC
  (  02BE  03 53 50 40       )    t:  SP@  (.--.n.)                                               \  cfa= 02C2
  (  02C2  08 A6 02 08 A6 +05)                      {SP@}
  (  02CC  22                )                      ret'
  (  02CD  00                )
  \ -------------------------------------------------------------------------------
  (  02CE  BE 02             )                                                                    \  lfa= 02CE
  (  02D0  03 53 50 21       )    t:  SP!   (.n.--.)                                              \  cfa= 02D4
  (  02D4  A8 02 86 03 18 +03)                      {SP!}
  (  02DC  22                )                      ret'
  (  02DD  00                )
  \ -------------------------------------------------------------------------------
                                    t:  ?dup   (.n.--.n.n./.0.)                                   \ cfa=     6B80
  (  00006B80  00 2E 01 D0 04+03 )                  {?dup}
  (  00006B88  70 47             )                  ret'
  (  00006B8A  00 BF             )                  nop
  \ ------------------------------------------------------------------------
                                    t:  dup    (.n.--.n.n.)                                       \ cfa=     6B84
  (  00006B84  04 3F 3E 60       )                  {dup}
  (  00006B88  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  02FA  EE 02             )                                                                    \  lfa= 02FA
  (  02FC  04 44 52 4F 50    )    t:  DROP     (.n.--.)                                           \  cfa= 0302
  (  0302  86 03 18 86 02 18 )                      {drop}
  (  0308  22                )                      ret'
  (  0309  00                )

  ''  drop    cfa'.of.drop*  !.
  \ -------------------------------------------------------------------------------
  (  030A  FC 02             )                                                                    \  lfa= 030A
  (  030C  04 53 57 41 50    )    t:  SWAP     (.n.n.--.n.n.)                                     \  cfa= 0312
  (  0312  EB C6 FB 18 EA +03)                      {swap}
  (  031A  22                )                      ret'
  (  031B  00                )
  \ -------------------------------------------------------------------------------
  (  031C  0C 03             )                                                                    \  lfa= 031C
  (  031E  04 4F 56 45 52    )    t:  OVER    (.n.n.--.n.n.n.)                                    \  cfa= 0324
  (  0324  86 F0 18 E6 08 +09)                      {over}
  (  0332  22                )                      ret'
  (  0333  00                )
  \ -------------------------------------------------------------------------------
  (  0334  1E 03             )                                                                    \  lfa= 0334
  (  0336  02 30 3C          )    t:  0<      (.n.--.f.)                                          \  cfa= 033A
  (  033A  EB 30 E7 04 74 +06)                      {0<}
  (  0345  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0346  36 03             )                                                                    \  lfa= 0346
  (  0348  03 41 4E 44       )    t:  AND     (.n.n.--.n.)                                        \  cfa= 034C
  (  034C  E6 52 03 18 E6 +03)                      {and}
  (  0354  22                )                      ret'
  (  0355  00                )                      
  \ -------------------------------------------------------------------------------
  (  0356  48 03             )                                                                    \  lfa= 0356
  (  0358  02 4F 52          )    t:  OR      (.n.n.--.n.)                                        \  cfa= 035C
  (  035C  E6 42 03 18 E6 +03)                      {or}
  (  0364  22                )                      ret'
  (  0365  00                )                      
  \ -------------------------------------------------------------------------------
  (  0366  58 03             )                                                                    \  lfa= 0366
  (  0368  03 58 4F 52       )    t:  XOR     (.n.n.--.n.)                                        \  cfa= 036C
  (  036C  E6 62 03 18 E6 +03)                      {xor}
  (  0374  22                )                      ret'
  (  0375  00                )
  \ -------------------------------------------------------------------------------

:.  T=c      0 0 r=#    T  0  0  r=r+#+c    ;.
:.  T+0+c               T  0       r+#+c    ;.
:{  T=c      T=0                   T+0+c    };

                                     :.  t+1     t  1  r+#  ;.
  (  20001AA4  01 CF             )   :.  t+s,nip    nip>r0  \  pop { R0, } sp
  (  20001AA6  36 18             )                  T+R0   ;.
                                     :{  {+}     t+s,nip   };


 :.  t=1     t  1  r=#  ;.
                                     :{  {um+}   t+s,nip  if'c=1  {dup}  t=1  ret'  then'  {dup}  t=0  };

                                  \  :{  {um+}   t+s,nip  {dup}  t=0  if'c=1  t+1  then'  };
  \ -------------------------------------------------------------------------------
  (  0376  68 03             )                                                                    \  lfa= 0376
  (  0378  03 55 4D 2B       )    t:  UM+    (.n.n.--.n.n.)   {um+}                               \  cfa= 037C
\ (  037C  18 EA 26 F6 08 +03)                  \   S+T
\ (  0384  E4 FB 3B FA       )                  \   T=c
  (  0388  22                )                      ret'
  (  0389  00                )
  \ -------------------------------------------------------------------------------
  (  038A  78 03             )                                                                    \  lfa= 038A
  (  038C  03 52 4F 54       )    t:  ROT    (.n.n.n.--.n.n.n.)                                   \  cfa= 0390
  (  0390  88 F0 EB C6 18 +0C)                      {rot}
  (  03A1  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  03A2  8C 03             )                                                                    \  lfa= 03A2
  (  03A4  05 32 44 52 4F 50 )    t:  2DROP  (.n.n.--.)                                           \  cfa= 03AA
  (  03AA  18 18             )                      {nip}
  (  03AC  86 03 18 86 02 18 )                      {drop}
  (  03B2  22                )                      ret'
  (  03B3  00                )
  \ -------------------------------------------------------------------------------
  (  03B4  A4 03             )                                                                    \  lfa= 03B4
  (  03B6  04 32 44 55 50    )    t:  2DUP   (.n.n.--.n.n.n.n.)                                   \  cfa= 03BC
  (  03BC  18 E6 08 86 F0 +0B)                      {2dup}
  (  03CC  22                )                      ret'
  (  03CD  00                )
  \ -------------------------------------------------------------------------------
  (  03CE  B6 03             )                                                                    \  lfa= 03CE
  (  03D0  01 2B             )    t:  +      (.n.n.--.n.)                                         \  cfa= 03D2
  (  03D2  86 F0 18 EA 26 +06)                      {+}
  (  03DD  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  03DE  D0 03             )                                                                    \  lfa= 03DE
  (  03E0  01 2D             )    t:  -      (.n.n.--.n.)                                         \  cfa= 03E2
  (  03E2  C3 86 F0 18 E6 +07)                      {-}
  (  03EE  22                )                      ret'
  (  03EF  00                )
  \ -------------------------------------------------------------------------------
  (  03F0  E0 03             )                                                                    \  lfa= 03F0
  (  03F2  03 4E 4F 54       )    t:  NOT     (.n.--.n.)                                          \  cfa= 03F6
  (  03F6  EA F4 FA EB F4 FB )                      {not}
  (  03FC  22                )                      ret'
  (  03FD  00                )
  \ -------------------------------------------------------------------------------
  (  03FE  F2 03             )                                                                    \  lfa= 03FE
  (  0400  06 4E 45 47 41 54 )    t:  NEGATE  (.n.--.n.)                                          \  cfa= 0408
  (  0408  E4 C3 9A FA E4 +02)                      {negate}
  (  040F  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0410  00 04             )                                                                    \  lfa= 0410
  (  0412  03 41 42 53       )    t:  ABS     (.n.--.n.)      {abs}                               \  cfa= 0416
  (  041A  22                )                      ret'
  (  041B  00                )
  \ -------------------------------------------------------------------------------
:.  t>>8   t  8  r>>#  ;.
:.  t<<8   t  8  r<<#  ;.

  (  041C  12 04             )                                               \  lfa= 041C
  (  041E  04 46 4C 49 50    )    t:  FLIP   (.n.--.n.)   \ {dup}   TnFF00    t>>8   {swap}   TnFF   t<<8  {or}
                                                \  cfa= 0424
\ (  0424  EA CB FA          )                      TL<->TH
  (  0427  22                )                      ret'
  \ -------------------------------------------------------------------------------
                                  t:  DNEGATE  (.n.n.--.n.n.)     \   cfa=     5080
  (  00005080  38 68             )                  R0=S
  (  00005082  31 00             )                  R1=T
  (  00005084  B6 1B             )                  T=0
  (  00005086  40 42             )                  -R0
  (  00005088  8E 41             )                  T-R1-c
  (  0000508A  38 60             )                  S=R0
  (  0000508C  70 47             )                  ret'

                         :{  -S   R0=S   -R0   S=R0   };   :{  -T-c   R1=T  T=0  T-R1-c  };
                         :{  {dnegate*}  -S    -T-c   };

  (  0428  1E 04             )                                                                    \  lfa= 0428
  (  042A  07 44 4E 45 47 41 )    t:  DNEGATE*  (.n.n.--.n.n.)  \ ????                            \  cfa= 0432
  (  0432  E4 C3 18 96 F6 +04)                      -S
  (  043B  E4 9A FA E4 9B FB )                      -T-c
  (  0441  22                )                      ret'
  \ -------------------------------------------------------------------------------
                                 :{  {=}               {xor}   if'T<>0   T=0   else'   T=-1   then'   };
                                 t:   =  (.n.n.--.f.)  {xor}   if'T<>0   T=0   else'   T=-1   then'   ret'
  \ ------------------------------------------------------------------------
                                    :{  {u<}                                                      \ cfa=     50B0
  (  000050B0  01 CF             )                  nip>r0
  (  000050B2  30 45             )                  r0:t
  (  000050B4  02 D2             )      if'u< \ c=1? hs?         \ 000050B4 --> 000050BC  ******************
  (  000050B6  6F F0 00 06       )                  T=-1
                                        else'                    \ 000050B4 --> 000050BC  ******************
  (  000050BC  B6 1B             )                  T=0
                                        then'
  (  000050BE  70 47             )                  };

                                  t:  u<  (.n.n.--.f.)   {u<}   ret'
  \ -------------------------------------------------------------------------------
  (  0470  5C 04             )                                                                    \  lfa= 0470
  (  0472  05 43 45 4C 4C 2B )    t:  CELL+   (.n.--.n.)                                          \  cfa= 0478
  (  0478  74 02 2A FA 50 +02)                      {cell+}
  (  047F  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  0480  72 04             )                                                                    \  lfa= 0480
  (  0482  05 43 45 4C 4C 2D )    t:  CELL-    (.n.--.n.)                                         \  cfa= 0488
  (  0488  C3 EA 94 02 FA +03)                      {CELL-}
  (  0490  22                )                      ret'
  (  0491  00                )
  \ -------------------------------------------------------------------------------
  (  0492  82 04             )                                                                    \  lfa= 0492
  (  0494  05 43 45 4C 4C 53 )    t:  CELLS    (.n.--.n.)                                         \  cfa= 049A
  (  049A  EA C3 33 FA EB +02)                      {CELLS}
  (  04A1  22                )                      ret'

                                  t:  CELL/    (.n.--.n.)       {cell/}    ret'
  \ -------------------------------------------------------------------------------
  (  04A2  94 04             )                                                                    \  lfa= 04A2
  (  04A4  02 31 2B          )    t:  1+       (.n.--.n.)                                         \  cfa= 04A8
  (  04A8  74 01 2A FA 50 +02)                      {1+}
  (  04AF  22                )                      ret'
  \ -------------------------------------------------------------------------------
  (  04B0  A4 04             )                                                                    \  lfa= 04B0
  (  04B2  02 31 2D          )    t:  1-       (.n.--.n.)                                         \  cfa= 04B6
  (  04B6  C3 EA 94 01 FA +03)                      {1-}
  (  04BE  22                )                      ret'
  (  04BF  00                )
  \ -------------------------------------------------------------------------------
  (  04C0  B2 04             )                                                                    \  lfa= 04C0
  (  04C2  02 32 2F          )    t:  2/       (.n.--.n.)                                         \  cfa= 04C6
  (  04C6  C3 EB 30 E7 01 +06)                      {2/}
  (  04D1  22                )                      ret'
  \ -------------------------------------------------------------------------------                                                                                                                                                             \  lfa= 04D2
  (  04D4  07 41 4C 49 47 4E )    t:  ALIGNED   (.n.--.n.)    {aligned}    ret'                   \  cfa= 04DC
  \ -------------------------------------------------------------------------------
                                   :.  T=R2     T  2  R=R  ;.

                                   :{  {um/mod}'                                               \ cfa=     5138
  (  00005138  03 CF             )                  nip>r0,r1
  (  0000513A  00 22             )                  2   0  r=#   \    R2=0
  (  0000513C  21 23             )                  3  21  r=#   \    R3=21
                                        begin'                   \ 0000514E --> 0000513E  +++++++++++++++++
  (  0000513E  B0 42             )                  0   T  R:R   \ R0:T
  (  00005140  00 D3             )         if'u>= \ c=0? lo?     \ 00005140 --> 00005144  **************************
  (  00005142  B0 41             )                  0   T  R-R-c \ R0-T-c
                                           then'                 \ 00005140 --> 00005144  **************************
  (  00005144  52 41             )         begin'.. 2   2  R+R+c  \ R2+R2+c
  (  00005146  5B 1E             )                  3   1  r-#   \ R3-1
  (  00005148  05 D0             )           if'<>. \ z=1? eq?     \ 00005148 --> 00005156  +++++
  (  0000514A  49 18             )                  1   1  R+R   \ R1+R1
  (  0000514C  40 41             )                  0   0  R+R+c \ R0+R0+c
  (  0000514E  F6 D3             )      until'u>= \ c=0? lo?     \ 0000514E --> 0000513E  +++++++++++++++++
  (  00005150  80 1B             )                  0   t  R-R   \ r0-t
  (  00005152  00 43             )                  0   0  RoR   \ R0oR0
  (  00005154  F6 E7             )         again'..     \  jmp_5144
                                             then'.                \ 00005148 --> 00005156  +++++
  (  00005156  04 3F             )                  {-nip}
  (  00005158  38 60             )                  s=R0
  (  0000515A  16 00             )                  T=R2
  (  0000515C  70 47             )                  };

\ cortex.m0?  @. 

:.  r2=0       2   0  r=#    ;.
:.  r3=21      3  21  r=#    ;.
:.  R0:R6      0   6  r:r    ;.
:.  R0-R6-c    0   6  r-r-c  ;.
:.  R2+R2+c    2   2  r+r+c  ;.
:.  R3-1       3   1  r-#    ;.
:.  R1+R1      1   1  r+r    ;.
:.  R0+R0+c    0   0  r+r+c  ;.
:.  R0-R6      0   6  r-r    ;.
:.  R0oR0      0   0  RoR    ;.   \ c=0
:.  c=0        R0oR0         ;.
:.  R7-4       7   4  r-#    ;.
:.  (R7)=R0    7   0  (r)=r  ;.                                               \
:.  R6=R2      6   2  r=r    ;.


comment:
:.  R0:R6      0  6  R:R    ;.
:.  R0-R6-c    0  6  r-r-c  ;.
:.  R0+R0+c    0  0  r+r+c  ;.

  t:  UM/MOD   ( n n n -- n n )                             \ cfa= 20002CA4
  (  20002CA4  03 CF             )                  nip>r0,r1  \   pop_R7,{R3}
  (  20002CA6  00 22             )                  R2=0                                                        \
  (  20002CA8  21 23             )                  R3=21
                                        begin'                       \ 20002CBA --> 20002CAA ===========
  (  20002CAA  B0 42             )                  R0:R6
  (  20002CAC  00 D3             )        if'u>= \ c=0? lo?          \ 20002CAC --> 20002CB0 ===
  (  20002CAE  B0 41             )                  R0-R6-c
                                          then'                      \ 20002CAC --> 20002CB0 ===
                                          begin'
  (  20002CB0  52 41             )                  R2+R2+c
  (  20002CB2  5B 1E             )                     R3-1
  (  20002CB4  05 D0             )          if'<> \ z=1? eq?         \ 20002CB4 --> 20002CC2 ===============================
  (  20002CB6  49 18             )                     R1+R1
  (  20002CB8  40 41             )                  R0+R0+c
  (  20002CBA  F6 D3             )      until'u>= \ c=0? lo?         \ 20002CBA --> 20002CAA ===========
  (  20002CBC  80 1B             )                     R0-R6
  (  20002CBE  00 43             )                  R0oR0
  (  20002CC0  F6 E7             )        again' \          jmp_20002CB011
                                            then'                    \ 20002CB4 --> 20002CC2 ===============================
  (  20002CC2  04 3F             )                  R7-4
  (  20002CC4  38 60             )                  [R7+0]=R0                                                   \
  (  20002CC6  16 00             )                  R6=R2                                                    \
  (  20002CC8  70 47             )                  ret'  \  jmp_RE
comment;

:{  {um/mod}
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  R2=0        \  2200 16,'   \   R2=0
( 0520   21 R3 MOVS     )                  R3=21       \  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         R0:R6       \  42B0 16,'
( 0524   0528 BCC       )     if'c=1                   \  D300 16,'
( 0526   R6 R0 SBCS     )                  R0-R6-c     \  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       R2+R2+c     \  4152 16,'
( 052A   1 R3 R3 SUBS   )                ( R3-1        )  1E5B 16,'
( 052C   053A BEQ       )     while'z=0                \  D005 16,'
( 052E   R1 R1 R1 ADDS  )                  R1+R1       \  1849 16,'
( 0530   R0 R0 ADCS     )                  R0+R0+c     \  4140 16,'
( 0532   0522 BCC       )  until'c=1.                  \  D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  R0-R6       \  1B80 16,'
( 0536   R0 R0 ORRS     )                  R0oR0       \  4300 16,'
( 0538   0528 B         )     repeat'                  \  E7F6 16,'
( 053A   4 R7 SUBS      )                  R7-4        \  3F04 16,'
( 053C   0 R7 R0 STR    )                  (R7)=R0     \  6038 16,'
( 053E   R2 R6 MOVS     )                  R6=R2       \  0016 16,'
( 0540   LR BX          )                  };          \  4770 16,'














:{  {um/mod}'
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  2200 16,'   \   R2=0
( 0520   21 R3 MOVS     )                  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         42B0 16,'
( 0524   0528 BCC       )     if'c=1 \     D300 16,'
( 0526   R6 R0 SBCS     )                  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       4152 16,'
( 052A   1 R3 R3 SUBS   )                  1E5B 16,'
( 052C   053A BEQ       )     while'z=0  \    D005 16,'
( 052E   R1 R1 R1 ADDS  )                  1849 16,'
( 0530   R0 R0 ADCS     )                  4140 16,'
( 0532   0522 BCC       )  until'c=1. \ D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  1B80 16,'
( 0536   R0 R0 ORRS     )                  4300 16,'
( 0538   0528 B         )     repeat'  \      E7F6 16,'
( 053A   4 R7 SUBS      )                  3F04 16,'
( 053C   0 R7 R0 STR    )                  6038 16,'
( 053E   R2 R6 MOVS     )                  0016 16,'  };
( 0540   LR BX          )               \  4770 16,'

#ELSE

:{  {um/mod}
( 051C   R0 R1 R7 LDM   )                  nip>r0,r1   \  CF03 16,'
( 051E   0 R2 MOVS      )                  2200 16,'   \   R2=0
( 0520   21 R3 MOVS     )                  2321 16,'
( 0522   R6 R0 CMP      )  begin'.         42B0 16,'
( 0524   0528 BCC       )     if'c=1 \     D300 16,'
( 0526   R6 R0 SBCS     )                  41B0 16,'
                              then'
( 0528   R2 R2 ADCS     )     begin'       4152 16,'
( 052A   1 R3 R3 SUBS   )                  1E5B 16,'
( 052C   053A BEQ       )     while'z=0  \    D005 16,'
( 052E   R1 R1 R1 ADDS  )                  1849 16,'
( 0530   R0 R0 ADCS     )                  4140 16,'
( 0532   0522 BCC       )  until'c=1. \ D3F6 16,'
( 0534   R6 R0 R0 SUBS  )                  1B80 16,'
( 0536   R0 R0 ORRS     )                  4300 16,'
( 0538   0528 B         )     repeat'  \      E7F6 16,'
( 053A   4 R7 SUBS      )                  3F04 16,'
( 053C   0 R7 R0 STR    )                  6038 16,'
( 053E   R2 R6 MOVS     )                  0016 16,'  };
( 0540   LR BX          )               \  4770 16,'
#THEN



                                  t:  UM/MOD   (.n.n.n.--.n.n.)      {um/mod}   ret'






comment:
  \ -------------------------------------------------------------------------------
  (  053A  F6 04             )                                                                    \  lfa= 053A
  (  053C  03 55 4D 2A       )     :  UM*                                                         \  cfa= 0540
  (  0540  E4 FE FF          )                      R6~=0000
  (  0543  18 E6 8A F0 A4 +03)                      R4~=SL*TL,sp-1
  (  054B  E6 8B F0 A4 2D +05)                      R5~=SH*TH+R5~
  (  0555  A6 04             )                      SH=R4
  (  0557  08 E6 8A F0 A4 +09)                      R5~=SH*TL+R5~,R7=c,sp+1
  (  0565  E6 8B F0 A4 2E +05)                      T=SH*TH+R6~
  (  056F  A6 05             )                      SH=R5
  (  0571  22                )                      RET
comment;









  \ -------------------------------------------------------------------------------
                                  :{ {doVAR}   push.LR    {dup}    pop.T   T-1  };
  (  0572  3C 05             )                                                                    \  lfa= 0572
  (  0574  45 64 6F 56 41 52 )    t:  doVAR   (.--.n.)    push.LR                  compile-only   \  cfa= 057A
  (  057A  08 A6 02 08 A6 03 )                      {dup}
  (  0580  D0 03 D0 02       )                      pop.T   T-1  \  {1-}    \ using under ram only ????????
  (  0584  22                )                      ret
  (  0585  00                )

     ''  doVAR  >mca
     ''  doVAR  cfa'.of.doVAR*   !.
     :.  doVAR          doVAR'*  ;.
  \ -------------------------------------------------------------------------------
\                                20002040  doUSER.base.in.rom    !.
\                                20002100  doUSER.base.in.ram    !.
\                                     0A8  USER.variable.length  !.
  (  0586  74 05             )                                                                    \  lfa= 0586
  (  0588  02 55 50          )     :  UP     (.--.n.)                                             \  cfa= 058C
  (  058C  12 05 7A 00 80    )                    ( doVAR        8000 )  doUSER.base.in.ram  @.  RAM.OFFSET @.  +.  ,doVAR*+#
  (  058C  12 05 7A 00 80    )                    \ doLIT    20012100   \  32,'
  \ -------------------------------------------------------------------------------
  (  0592  88 05             )                                                                    \  lfa= 0592
  (  0594  46 64 6F 55 53 45 )    t:  doUSER   (.--.n.)                            compile-only   \  cfa= 059C
  (  059C  D0 83 D0 82 08 +09)                      {doUSER}
  (  05AA  22                )                      ret'
  (  05AB  00                )

     ''  doUSER  >mca
     ''  doUSER  cfa'.of.doUSER*   !.
     :.  doUSER          doUSER'*  ;.









nuc442eF?  @.
#if
\                                  :  (51)          doLIT    20012100    ret
  \ -------------------------------------------------------------------------------
  (  05AC  94 05             )                                                                    \  lfa= 05AC
  (  05AE  03 53 50 30       )     :  SP0    (.--.n.)                                             \  cfa= 05B2
  (  05B2  12 05 9C 08 00    )                      doLIT    20002110
  (  05B7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05B8  AE 05             )                                                                    \  lfa= 05B8
  (  05BA  03 52 50 30       )     :  RP0    (.--.n.)                                             \  cfa= 05BE
  (  05BE  12 05 9C 0A 00    )                      doLIT    20002114
  (  05C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05C4  BA 05             )                                                                    \  lfa= 05C4
  (  05C6  05 27 3F 4B 45 59 )     :  '?KEY   (.--.n.)                                            \  cfa= 05CC
  (  05CC  12 05 9C 0C 00    )                      doLIT    20002118
  (  05D1  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05D2  C6 05             )                                                                    \  lfa= 05D2
  (  05D4  05 27 45 4D 49 54 )     :  'EMIT   (.--.n.)                                            \  cfa= 05DA
  (  05DA  12 05 9C 0E 00    )                      doLIT    2000211C
  (  05DF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05E0  D4 05             )                                                                    \  lfa= 05E0
  (  05E2  07 27 45 58 50 45 )     :  'EXPECT  (.--.n.)                                           \  cfa= 05EA
  (  05EA  12 05 9C 10 00    )                      doLIT    20002120
  (  05EF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05F0  E2 05             )                                                                    \  lfa= 05F0
  (  05F2  04 27 54 41 50    )     :  'TAP     (.--.n.)                                           \  cfa= 05F8
  (  05F8  12 05 9C 12 00    )                      doLIT    20002124
  (  05FD  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05FE  F2 05             )                                                                    \  lfa= 05FE
  (  0600  05 27 45 43 48 4F )     :  'ECHO    (.--.n.)                                           \  cfa= 0606
  (  0606  12 05 9C 14 00    )                      doLIT    20002128
  (  060B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  060C  00 06             )                                                                    \  lfa= 060C
  (  060E  07 27 50 52 4F 4D )     :  'PROMPT  (.--.n.)                                           \  cfa= 0616
  (  0616  12 05 9C 16 00    )                      doLIT    2000212C
  (  061B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  061C  0E 06             )                                                                    \  lfa= 061C
  (  061E  04 42 41 53 45    )     :  BASE     (.--.n.)                                           \  cfa= 0624
  (  0624  12 05 9C 18 00    )                      doLIT    20002130
  (  0629  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  062A  1E 06             )                                                                    \  lfa= 062A
  (  062C  43 74 6D 70       )     :  tmp      (.--.n.)                            compile-only   \  cfa= 0630
  (  0630  12 05 9C 1A 00    )                      doLIT    20002134
  (  0635  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0636  2C 06             )                                                                    \  lfa= 0636
  (  0638  04 53 50 41 4E    )     :  SPAN     (.--.n.)                                           \  cfa= 063E
  (  063E  12 05 9C 1C 00    )                      doLIT    20002138
  (  0643  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0644  38 06             )                                                                    \  lfa= 0644
  (  0646  03 3E 49 4E       )     :  >IN      (.--.n.)                                           \  cfa= 064A
  (  064A  12 05 9C 1E 00    )                      doLIT    2000213C
  (  064F  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  #TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20002140
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  'TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20002144
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  065E  52 06             )                                                                    \  lfa= 065E
  (  0660  03 43 53 50       )     :  CSP      (.--.n.)                                           \  cfa= 0664
  (  0664  12 05 9C 24 00    )                      doLIT    20002148
  (  0669  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  066A  60 06             )                                                                    \  lfa= 066A
  (  066C  05 27 45 56 41 4C )     :  'EVAL    (.--.n.)                                           \  cfa= 0672
  (  0672  12 05 9C 26 00    )                      doLIT    2000214C
  (  0677  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0678  6C 06             )                                                                    \  lfa= 0678
  (  067A  07 27 4E 55 4D 42 )     :  'NUMBER   (.--.n.)                                          \  cfa= 0682
  (  0682  12 05 9C 28 00    )                      doLIT    20002150
  (  0687  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0688  7A 06             )                                                                    \  lfa= 0688
  (  068A  03 48 4C 44       )     :  HLD       (.--.n.)                                          \  cfa= 068E
  (  068E  12 05 9C 2A 00    )                      doLIT    20002154
  (  0693  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0694  8A 06             )                                                                    \  lfa= 0694
  (  0696  07 48 41 4E 44 4C )     :  HANDLER    (.--.n.)                                         \  cfa= 069E
  (  069E  12 05 9C 2C 00    )                      doLIT    20002158
  (  06A3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06A4  96 06             )                                                                    \  lfa= 06A4
  (  06A6  07 43 4F 4E 54 45 )     :  CONTEXT     (.--.n.)                                        \  cfa= 06AE
  (  06AE  12 05 9C 2E 00    )                      doLIT    2000215C
  (  06B3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06B4  A6 06             )                                                                    \  lfa= 06B4
  (  06B6  07 43 55 52 52 45 )     :  CURRENT     (.--.n.)                                        \  cfa= 06BE
  (  06BE  12 05 9C 40 00    )                      doLIT    20002180
  (  06C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06C4  B6 06             )                                                                    \  lfa= 06C4
  (  06C6  02 43 50          )     :  CP          (.--.n.)                                        \  cfa= 06CA
  (  06CA  12 05 9C 44 00    )                      doLIT    20002188
  (  06CF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06D0  C6 06             )                                                                    \  lfa= 06D0
  (  06D2  02 4E 50          )     :  NP          (.--.n.)                                        \  cfa= 06D6
  (  06D6  12 05 9C 46 00    )                      doLIT    2000218C
  (  06DB  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06DC  D2 06             )                                                                    \  lfa= 06DC
  (  06DE  04 4C 41 53 54    )     :  LAST        (.--.n.)                                        \  cfa= 06E4
  (  06E4  12 05 9C 48 00    )                      doLIT    20002190
  (  06E9  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06EA  DE 06             )                                                                    \  lfa= 06EA
  (  06EC  05 66 6F 72 74 68 )     :  fort.       (.--.n.)                                        \  cfa= 06F2
  (  06F2  12 05 9C 4A 00    )                      doLIT    20002194
  (  06F7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06F8  EC 06             )                                                                    \  lfa= 06F8
  (  06FA  05 46 4F 52 54 48 )     :  FORTH       (.--.)                                          \  cfa= 0700
  (  0700  12 06 F2          )                      fort.
  (  0703  12 06 AE          )                      CONTEXT
  (  0706  12 02 06          )                      !
  (  0709  22                )                      RET
  \ -------------------------------------------------------------------------------
#else            
\                                  :  (51)          doLIT    20012100    ret
  \ -------------------------------------------------------------------------------
  (  05AC  94 05             )                                                                    \  lfa= 05AC
  (  05AE  03 53 50 30       )     :  SP0    (.--.n.)     L:  ('boot)  \ 2016.9.5                 \  cfa= 05B2
  (  05B2  12 05 9C 08 00    )                      doLIT    20012110
  (  05B7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05B8  AE 05             )                                                                    \  lfa= 05B8
  (  05BA  03 52 50 30       )     :  RP0    (.--.n.)                                             \  cfa= 05BE
  (  05BE  12 05 9C 0A 00    )                      doLIT    20012114
  (  05C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05C4  BA 05             )                                                                    \  lfa= 05C4
  (  05C6  05 27 3F 4B 45 59 )     :  '?KEY   (.--.n.)                                            \  cfa= 05CC
  (  05CC  12 05 9C 0C 00    )                      doLIT    20012118
  (  05D1  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05D2  C6 05             )                                                                    \  lfa= 05D2
  (  05D4  05 27 45 4D 49 54 )     :  'EMIT   (.--.n.)                                            \  cfa= 05DA
  (  05DA  12 05 9C 0E 00    )                      doLIT    2001211C
  (  05DF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05E0  D4 05             )                                                                    \  lfa= 05E0
  (  05E2  07 27 45 58 50 45 )     :  'EXPECT  (.--.n.)                                           \  cfa= 05EA
  (  05EA  12 05 9C 10 00    )                      doLIT    20012120
  (  05EF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05F0  E2 05             )                                                                    \  lfa= 05F0
  (  05F2  04 27 54 41 50    )     :  'TAP     (.--.n.)                                           \  cfa= 05F8
  (  05F8  12 05 9C 12 00    )                      doLIT    20012124
  (  05FD  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  05FE  F2 05             )                                                                    \  lfa= 05FE
  (  0600  05 27 45 43 48 4F )     :  'ECHO    (.--.n.)                                           \  cfa= 0606
  (  0606  12 05 9C 14 00    )                      doLIT    20012128
  (  060B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  060C  00 06             )                                                                    \  lfa= 060C
  (  060E  07 27 50 52 4F 4D )     :  'PROMPT  (.--.n.)                                           \  cfa= 0616
  (  0616  12 05 9C 16 00    )                      doLIT    2001212C
  (  061B  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  061C  0E 06             )                                                                    \  lfa= 061C
  (  061E  04 42 41 53 45    )     :  BASE     (.--.n.)                                           \  cfa= 0624
  (  0624  12 05 9C 18 00    )                      doLIT    20012130
  (  0629  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  062A  1E 06             )                                                                    \  lfa= 062A
  (  062C  43 74 6D 70       )     :  tmp      (.--.n.)                            compile-only   \  cfa= 0630
  (  0630  12 05 9C 1A 00    )                      doLIT    20012134
  (  0635  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0636  2C 06             )                                                                    \  lfa= 0636
  (  0638  04 53 50 41 4E    )     :  SPAN     (.--.n.)                                           \  cfa= 063E
  (  063E  12 05 9C 1C 00    )                      doLIT    20012138
  (  0643  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0644  38 06             )                                                                    \  lfa= 0644
  (  0646  03 3E 49 4E       )     :  >IN      (.--.n.)                                           \  cfa= 064A
  (  064A  12 05 9C 1E 00    )                      doLIT    2001213C
  (  064F  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  #TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20012140
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  0650  46 06             )                                                                    \  lfa= 0650
  (  0652  04 23 54 49 42    )     :  'TIB     (.--.n.)                                           \  cfa= 0658
  (  0658  12 05 9C 20 00    )                      doLIT    20012144
  (  065D  00                )                      ret
  \ -------------------------------------------------------------------------------
  \ -------------------------------------------------------------------------------
  (  065E  52 06             )                                                                    \  lfa= 065E
  (  0660  03 43 53 50       )     :  CSP      (.--.n.)                                           \  cfa= 0664
  (  0664  12 05 9C 24 00    )                      doLIT    20012148
  (  0669  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  066A  60 06             )                                                                    \  lfa= 066A
  (  066C  05 27 45 56 41 4C )     :  'EVAL    (.--.n.)                                           \  cfa= 0672
  (  0672  12 05 9C 26 00    )                      doLIT    2001214C
  (  0677  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0678  6C 06             )                                                                    \  lfa= 0678
  (  067A  07 27 4E 55 4D 42 )     :  'NUMBER   (.--.n.)                                          \  cfa= 0682
  (  0682  12 05 9C 28 00    )                      doLIT    20012150
  (  0687  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0688  7A 06             )                                                                    \  lfa= 0688
  (  068A  03 48 4C 44       )     :  HLD       (.--.n.)                                          \  cfa= 068E
  (  068E  12 05 9C 2A 00    )                      doLIT    20012154
  (  0693  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  0694  8A 06             )                                                                    \  lfa= 0694
  (  0696  07 48 41 4E 44 4C )     :  HANDLER    (.--.n.)                                         \  cfa= 069E
  (  069E  12 05 9C 2C 00    )                      doLIT    20012158
  (  06A3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06A4  96 06             )                                                                    \  lfa= 06A4
  (  06A6  07 43 4F 4E 54 45 )     :  CONTEXT     (.--.n.)                                        \  cfa= 06AE
  (  06AE  12 05 9C 2E 00    )                      doLIT    2001215C
  (  06B3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06B4  A6 06             )                                                                    \  lfa= 06B4
  (  06B6  07 43 55 52 52 45 )     :  CURRENT     (.--.n.)                                        \  cfa= 06BE
  (  06BE  12 05 9C 40 00    )                      doLIT    20012180
  (  06C3  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06C4  B6 06             )                                                                    \  lfa= 06C4
  (  06C6  02 43 50          )     :  CP          (.--.n.)                                        \  cfa= 06CA
  (  06CA  12 05 9C 44 00    )                      doLIT    20012188
  (  06CF  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06D0  C6 06             )                                                                    \  lfa= 06D0
  (  06D2  02 4E 50          )     :  NP          (.--.n.)                                        \  cfa= 06D6
  (  06D6  12 05 9C 46 00    )                      doLIT    2001218C
  (  06DB  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06DC  D2 06             )                                                                    \  lfa= 06DC
  (  06DE  04 4C 41 53 54    )     :  LAST        (.--.n.)                                        \  cfa= 06E4
  (  06E4  12 05 9C 48 00    )                      doLIT    20012190
  (  06E9  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06EA  DE 06             )                                                                    \  lfa= 06EA
  (  06EC  05 66 6F 72 74 68 )     :  fort.       (.--.n.)                                        \  cfa= 06F2
  (  06F2  12 05 9C 4A 00    )                      doLIT    20012194
  (  06F7  00                )                      ret
  \ -------------------------------------------------------------------------------
  (  06F8  EC 06             )                                                                    \  lfa= 06F8
  (  06FA  05 46 4F 52 54 48 )     :  FORTH       (.--.)                                          \  cfa= 0700
  (  0700  12 06 F2          )                      fort.
  (  0703  12 06 AE          )                      CONTEXT
  (  0706  12 02 06          )                      !
  (  0709  22                )                      RET
  \ -------------------------------------------------------------------------------
#then

























  \ -------------------------------------------------------------------------------
  (  0962  4E 09             )                                                                    \  lfa= 0962
  (  0964  04 48 45 52 45    )     :  HERE      (.--.n.)                                          \  cfa= 096A
  (  096A  12 06 CA          )                      CP
  (  096D  12 02 1E          )                      @
  (  0970  22                )                      RET
  (  0971  00                )

  \ -------------------------------------------------------------------------------
  (  14FE  F0 14             )                                                                    \  lfa= 14FE
  (  1500  01 2C             )     :  ,          (.n.--.)                                         \  cfa= 1502
  (  1502  12 09 6A          )                      HERE
  (  1505  12 02 E4          )                      DUP
  (  1508  12 04 78          )                      CELL+
  (  150B  12 06 CA          )                      CP
  (  150E  12 02 06          )                      !
  (  1511  12 02 06          )                      !
  (  1514  22                )                      RET
  (  1515  00                )                      
  








                                   t:  IALLOT    (.n.--.)                                         \ cfa=     5F0C
  (  00005F0C  00 B5             )                  push.LR
  (  00005F0E  FE F7 A1 FE       )                  CP                                            \      4C54
  (  00005F12  FF F7 23 FA       )                _ +!                                            \      535C
  (  00005F16  00 BD             )                  ret

   t:  16,   (.n.--.)    push.LR  ,   -2 ...*   IALLOT  ;






  \ -------------------------------------------------------------------------------
  (  0994  86 09             )                                                                    \  lfa= 0994
  (  0996  08 40 45 58 45 43 )     :  @EXECUTE                                                    \  cfa= 09A0
  (  09A0  12 02 1E          )                      @
  (  09A3  12 02 F4          )                      ?DUP
  (  09A6  12 01 C4 AE 09    )   IF               \ ?branch  09AE   \ 09A6 --> 09AE  @@@@@@@@@@@@@@@@@@@@@
  (  09AB  12 01 F6          )                      EXECUTE
                                 THEN                               \ 09A6 --> 09AE  @@@@@@@@@@@@@@@@@@@@@
  (  09AE  22                )                      RET
  (  09AF  00                )
 \ -------------------------------------------------------------------------------
comment:
 
  (  0CC0  E6 0B             )                                                                    \  lfa= 0CC0
  (  0CC2  04 3F 4B 45 59    )     :  ?KEY   ( -- f )                                                     \  cfa= 0CC8
  (  0CC8  12 05 CC          )                      '?KEY
  (  0CCB  12 09 A0          )                      @EXECUTE
  (  0CCE  22                )                      RET
  (  0CCF  00                )



  \ -------------------------------------------------------------------------------
  (  0CD0  C2 0C             )                                                                    \  lfa= 0CD0
  (  0CD2  03 4B 45 59       )     :  KEY   ( -- c )                                                       \  cfa= 0CD6
                                 BEGIN                              \ 0CD9 --> 0CD6  *********
  (  0CD6  12 0C C8          )                      ?KEY
  (  0CD9  12 01 C4 D6 0C    )   UNTIL            \ ?branch  0CD6 ) \ 0CD9 --> 0CD6  *********
  (  0CDE  22                )                      RET
  (  0CDF  00                )
comment;


nuc442eF?  @.   
#if
  same.as.eF51?   @.
  #if
t: ?key    ( -- f )      push.LR           '?key   @execute                           ret
t:  key    ( -- char )   push.LR   begin'   ?key              t:0  {drop}  until'<>   ret
\   key    ( -- char )   push.LR   begin'  '?key   @execute   t:0  {drop}  until'<>   ret   \ OK
\ : key    ( -- char )             begin    ?key                           until      ; 

  #else
t:  ?key    ( -- f )
    {dup}       t=0   R2=rx   \ (pb11)
    r0=(r2)     0  0  r:#
    if'=        t-1
    then'       ret'


t:  ?key   ( -- f )      push.LR           '?key   @execute                           ret    \ ( -- char -1 / 0 )


t:  key    ( -- char )
    {dup}       t=0    R2=rx   \ (pb11)
    begin'      r0=(r2)     0  0  r:#
    until'=     4.34us      8
    for'r3      {2*}        8.68us           \ t rrc.r ( t<<1 )
                r0=(r2)     0  0  r:#
       if'=     {1+}  \ t+1
\      else'  \ nop
       then'
    next'r3     3.25us ( 4.34us )  r1=t  t=0   8  for'r0   {2*}  1 rrc.r   if'c=0  {1+}   then'  next'r0  ret'

  #then
#then

  \ -------------------------------------------------------------------------------
  (  0CE0  D2 0C             )                                                                    \  lfa= 0CE0
  (  0CE2  04 45 4D 49 54    )     :  EMIT   ( c -- )                                                     \  cfa= 0CE8
  (  0CE8  12 05 DA          )                      'EMIT
  (  0CEB  12 09 A0          )                      @EXECUTE
  (  0CEE  22                )                      RET
  (  0CEF  00                )

  ''  emit     cfa'.of.emit*  !.

  t:  uart.switch.stm32F429.eF   ( -- )          push.LR
      {dup}  t ''  TX! ( emit.stm32F407.eF.PA.3' )  ldri ( r=# )    'emit   !
      {dup}  t ''  ?RX ( ?key.stm32F407.eF.PA.2  )  r=#            '?key    !
      ret
  \ -------------------------------------------------------------------------------
                                    t:  uart.init.stm32F429.eF       \                            cfa= B36
  (  00000B36  00 B5             )                  push.LR
comment:
  (  00000B38  FF F7 D4 FF       )                  setup.clocks                                  \      AE4
  (  00000B3C  FF F7 E5 FF       )                  setup.uart
comment;
  (  00000044  10 48             )                  R0=40023800          \ RCC_BASE               \ (00000088)=40023800
  (  00000046  01 6B             )                  R1=(R0+30)
  (  00000048  41 F0 05 01       )                  R1=R1o5
  (  0000004C  01 63             )                  (R0+30)=R1
  (  0000004E  41 6C             )                  R1=(R0+44)
  (  00000050  41 F0 10 01       )                  R1=R1o10
  (  00000054  41 64             )                  (R0+44)=R1
  (  00000056  0D 48             )                  R0=40020000          \ AHB1PERIPH_BASE        \ (0000008C)=40020000
  (  00000058  01 68             )                  R1=(R0+0)
  (  0000005A  21 F4 70 11       )                  R1=R1n3C0000/
  (  0000005E  41 F4 20 11       )                  R1=R1o280000
  (  00000062  01 60             )                  (r0)=r1
  (  00000064  41 6A             )                  R1=(R0+24)
  (  00000066  21 F4 7F 61       )                  R1=R1nFF0/
  (  0000006A  41 F4 EE 61       )                  R1=R1o770
  (  0000006E  41 62             )                  (R0+24)=R1
  (  00000070  07 48             )                  R0=40011000          \ USART1_BASE            \ (00000090)=40011000
  (  00000072  08 49             )                  R1=0000200C                                   \ (00000094)=0000200C
  (  00000074  81 81             )            8181 16,' \      (R0+18)=R1,h
  (  00000076  8B 21             )                  R1=8B
  (  00000078  01 81             )            8101 16,' \      (R0+10)=R1,h
  (  0000007A  07 48             )                  R0=40020800          \ GPIOC_BASE             \ (00000098)=40020800
  (  0000007C  07 49             )                  R1=02040000                                   \ (0000009C)=02040000
  (  0000007E  01 60             )                  (r0)=r1
  (  00000080  07 49             )                  R1=00001200                                   \ (000000A0)=00001200
  (  00000082  41 61             )                  (R0+14)=R1
\ (  00000084  70 47             )                  ret'                                   \      B0A
                                                    uart.switch.stm32F429.eF
  (  00000B40  00 BD             )                  ret
  \ -------------------------------------------------------------------------------
                                  t:   [push.LR]    push.LR   b500 ...*  16,   ;

  \  R0=5678    R0t=1234    call_R0    full 32 bit range.
  \             123456     rcall_#24

\  151413121110 9 8 7 6 5 4 3 2 1 0151413121110 9 8 7 6 5 4 3 2 1 0
\  |1 1 1 1|0 i 1 0|1 1 0 0|==imm4=|0 =imm3|===Rd==|=====imm8======|    f2c00000
\  |1 1 1 1|0 i 1 0|1 1 0 0|==imm4=|0 =imm3|0000000|=====imm8======|    f2c00000
\  |1 1 1 1|0 # 1 0|1 1 0 0|# # # #|0 # # #|0000000|# # # # # # # #|    f2c00000    Rt=#
\  |1 1 1 1|0 # 1 0|0 1 0 0|# # # #|0 # # #|0000000|# # # # # # # #|    f2400000     R=#

\  (imm32, carry) = (ZeroExtend(imm4:i:imm3:imm8, 32), APSR.C);
\  original.mnemonic?  off   f2400000  5ci6c4#c3#4r8#:  R=#16

:.  t<<r   t  swap.  r<<r  ;.

                                    t:  lshift   (.n.n.--.n.)                                     \ cfa=     4800
  (  00004800  30 00             )                  r0=t
  (  00004802  40 CF             )                  {drop}
  (  00004804  86 40             )                  T<<R0
  (  00004806  70 47             )                  ret'

\  f2c00000  5ci6c4#c3#4r8#:  Rt=#
\   t:  #24>call  ( 24# -- )
\   t:  #32>call  ( 32# -- )   10000 ...* /mod   {swap}    [R0=#]    {swap}     [R0t=#]   ,call_R0   ;
\   t:  call,,  ( a -- )   cp  {@} witnin.24#?   if   #24>call   else   #32>call   then  ;
\   t:  call,,  ( a -- )   #32>call   ;
\ (  20000A0C  C5 F2 78 60       )                  R0t=5678
\ (  20000A10  41 F2 34 20       )                  R0=1234
\ (  20000A14  CC F6 EF 50       )                  R0t=CDEF
\ (  20000A18  48 F6 AB 10       )                  R0=89AB

   t:  #>(ZeroExtend(imm4:i:imm3:imm8)  (.#.--.32#.)     push.LR   {>r}
       {r@}        0ff ...* {and}                              \ imm8
       {r@}        700 ...* {and}    4 ...* lshift  {+}        \ imm3
       {r@}        800 ...* {and}   0f ...* lshift  {+}        \ i
       {r>}       f000 ...* {and}    4 ...* lshift  {+}     ;  \ imm4

   t:  H<->L   (.12345678.--.56781234.)  push.LR   0 ...* 10000  ...*  um/mod   {swap}    10000 ...*  _ *   {+}     ;

   t:  [R4=#]  (.n.--.)  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2400400 ...*  {+}     H<->L  ,  ;
   t:  [R0=#]  (.n.--.)  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2400000 ...*  {+}     H<->L  ,  ;
   t:  [R4t=#] (.n.--.)  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2C00400 ...*  {+}     H<->L  ,  ;
   t:  [R0t=#] (.n.--.)  push.LR   #>(ZeroExtend(imm4:i:imm3:imm8)   F2C00000 ...*  {+}     H<->L  ,  ;


\  t:  call_32#.target  ( 32# -- )  push.LR          10000 ...*   /mod   {swap}          [R0=#] {swap}     [R0t=#] 4780 ...* 16,  ( ,call_R0 )  ;
\  t:  call_32#.target  ( 32# -- )  push.LR  0 ...*  10000 ...* um/mod   {swap}          [R0=#]

   t:  call_32#.target     (.32#.--.)  push.LR  0 ...*  10000 ...* um/mod   {swap}     To1  [R0=#] \ cortex M,  bit0=1
       if't=0    {drop}
       else'     [R0t=#]
       then'     4780 ...* 16,  ( ,call_R0 )  ;

   t:  call_32#.target(R4) (.32#.--.)  push.LR  0 ...*  10000 ...* um/mod   {swap}     To1  [R4=#] \ cortex M,  bit0=1
       if't=0    {drop}
       else'     [R4t=#]
       then'     47A0 ...* 16,  ( ,call_R4 )  ;
  \ -------------------------------------------------------------------------------
\  24rel.check.cm4.target  (.#.--.#'.)   push.LR   cp @ ( HERE ) ( ALIGNED )  cell+   -   2/    ret
t: 24rel.check.cm4.target  (.#.--.#'.)   push.LR   cp @ ( HERE ) ( ALIGNED )  cell+   -   2/    ret

t: 24#>5..10#2.j.j11#.target  (.24#.--.5,s10#2,j,j11#.)   push.LR   {>r}
         {r@}   00800000 ...* {and}   ( s   )   3 ...*  lshift                                             \  s
         {r@}   00800000 ...* {and}   ( s   )
if#      {r@}   00400000 ...* {and}   ( I1  )   if#  ( s=1 I1=1 )                       2000 ...* {+}    then# \  s=1  J1
         {r@}   00200000 ...* {and}   ( I2  )   if#  ( s=1 I2=1 )                        800 ...* {+}    then# \  s=1  J2
else#    {r@}   00400000 ...* {and}   ( I1  )   if#  ( s=0 I1=1 )  else#  ( s=0 I1=0 )  2000 ...* {+}    then# \  s=0  J1
         {r@}   00200000 ...* {and}   ( I2  )   if#  ( s=0 I2=1 )  else#  ( s=0 I2=0 )   800 ...* {+}    then# \  s=0  J2
then#    {r@}   001ff800 ...* {and}   ( 10# )   5 ...*  lshift  {+}
         {r>}   000007ff ...* {and}   ( 11# )                   {+}     ret

   t:  0~15<->16~31.target  (.n1.--.n2.)  r0=t  r0<<10    r6>>10   ToR0  ret'
\  t:  rcall_24#.target...  ( 24# -- )  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target        f000d000 ...*  {+}  0~15<->16~31.target   ,  ;  \ T1
   t:  rcall_24#.target     (.24#.--.)  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target  To1   f000d000 ...*  {+}  0~15<->16~31.target   ,  ;  \ T1
\  t:  rcall_24#.target     (.24#.--.)  push.LR    24rel.check.cm4.target   24#>5..10#2.j.j11#.target  To1   f000c000 ...*  {+}  0~15<->16~31.target   ,  ;  \ T2

   t:  CALL  ( call, )  (.a.--.)  push.LR   {dup}  cp  {@}  -  abs  ffffff ...*  _ <  if#   rcall_24#.target  else#   call_32#.target      then#   ;
   t:  CALL  ( call, )  (.a.--.)  push.LR   {dup}  cp  {@}  -  abs  ffffff ...*  _ <  if#   rcall_24#.target  else#   call_32#.target(R4)  then#   ;
\  t:  CALL  ( call, )  (.a.--.)  push.LR   call_32#.target   ;

comment:
For BL (encoding T1), the assembler calculates the required value of the offset from the PC
value of the BL instruction to this label, then selects an encoding that will set imm32 to that
offset. Allowed offsets are even numbers in the range -16777216 to 16777214.

For BLX (encoding T2), the assembler calculates the required value of the offset from the
Align(PC,4) value of the BLX instruction to this label, then selects an encoding that will
set imm32 to that offset. Allowed offsets are multiples of 4 in the range -16777216 to
16777212.
 
  t:   do       push.LR  '' (do)    ...  call   here ( chere )  ret    immediate'  \ ??????
  t:  ?do       push.LR  '' (?do)   ...  call   here ( chere )  ret    immediate'  \ ??????
  t:   loop     push.LR  '' (loop)  ...  call   [v=0?]          ret    immediate'
  t:  +loop     push.LR  '' (+loop) ...  call   [v=0?]          ret    immediate'
COMMENT;

  \ -------------------------------------------------------------------------------
  (  1562  46 15             )                                                                    \  lfa= 1562
  (  1564  87 4C 49 54 45 52 )     :  LITERAL   (.n.--.)              immediate                   \  cfa= 156C
  (  156C  12 01 7C 7C 01    )                    ( doLIT    017C )   cfa'.of.doLIT*  ,doLIT*+(#)
  (  1571  12 17 DA          )                      CALL
  (  1574  12 15 02          )                      ,
  (  1577  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1578  64 15             )                                                                    \  lfa= 1578
  (  157A  03 24 2E 22       )     :  $."                                                         \  cfa= 157E
  (  157E  12 01 7C 22 00    )                      doLIT    0022
  (  1583  12 0F C8          )                    _ WORD
  (  1586  12 09 54          )                    _ COUNT
  (  1589  12 03 D2          )                      +        ALIGNED    \ ????????
  (  158C  12 06 CA          )                      CP
  (  158F  12 02 06          )                      !
  (  1592  22                )                      RET
  (  1593  00                )
  \ -------------------------------------------------------------------------------
  (  1594  7A 15             )                                                                    \  lfa= 1594
  (  1596  87 52 45 43 55 52 )     :  RECURSE     (.--.)              immediate                   \  cfa= 159E
  (  159E  12 06 E4          )                      LAST
  (  15A1  12 02 1E          )                      @
  (  15A4  12 0F DA          )                    _ NAME>
  (  15A7  12 15 02          )                      ,
  (  15AA  22                )                      RET
  (  15AB  00                )
  \ -------------------------------------------------------------------------------
  (  15AC  96 15             )                                                                    \  lfa= 15AC
  (  15AE  83 46 4F 52       )     :  FOR         (.--.)              immediate                   \  cfa= 15B2
  (  15B2  12 01 7C 54 02    )                    ( doLIT    0254 )   cfa'.of.>R*  ,doLIT*+(#)
  (  15B7  12 17 DA          )                      CALL
  (  15BA  12 09 6A          )                      HERE
  (  15BD  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  15BE  AE 15             )                                                                    \  lfa= 15BE
  (  15C0  85 42 45 47 49 4E )     :  BEGIN                           immediate                   \  cfa= 15C6
  (  15C6  12 09 6A          )                      HERE
  (  15C9  22                )                      RET

\ ''  begin   cfa'.of.begin*  !.
  \ -------------------------------------------------------------------------------


  (  15CA  C0 15             )                                                                    \  lfa= 15CA
  (  15CC  84 4E 45 58 54    )     :  NEXT                            immediate                   \  cfa= 15D2
  (  15D2  12 01 7C 96 01    )                    ( doLIT    0196 )   cfa'.of.nex.*  ,doLIT*+(#)
  (  15D7  12 17 DA          )                      CALL
  (  15DA  12 15 02          )                      ,
  (  15DD  22                )                      RET


cortex.m0?  @.
#if
                                    :{  {nex:}
  (  00000188  15 68             )             w rp  r=(r)   \     W=(RP)
                                               w 1   r-#
  (  0000018A  2D 00             )             w 0   r:#     \     W=W<<0,s
  (  0000018C  04 D1             )        if'-    \ z=0? ne?            \ 0000018C --> 00000198 +++++++++  -  N=1 OK BUT??
  (  0000018E  02 F1 04 02       )                  RP+4
  (  00000192  0E F1 04 0E       )                  LR+4
  (  00000196  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                          then'                  \   0000018C --> 00000198 +++++++++
                                                0  rp  r=r    0  w   (r)=r
                                                0  lr  r=r    0  1   r-#   0  0  r=(r)
                                                0  1   Ro#    lr 0   r=r
                                    };


:.  V    00000000  ;.

:.  V=RP     V   RP   R=R     ;.
:.  W=(V)    W   V    R=(R)   ;.
:.  W-1      W   1    R-#     ;.
:.  W:0      W   0    R:#     ;.
:.  V=4      V   4    R=#     ;.
:.  RP+V     RP  V    R+R     ;.
:.  LR+V     LR  V    R+R     ;.
:.  LR=V     LR  V    R=R     ;.
:.  [V]=W    V   W    (R)=R   ;.
:.  V=LR     V   LR   R=R     ;.
:.  V-1      V   1    R-#     ;.
:.  V+1      V   1    R+#     ;.
:.  V=(V)    V   V    R=(R)   ;.


                                    :{  {nex:}                                                  \ cfa= 200034FC
  (  200034FC  68 46             )                  V=RP
  (  200034FE  05 68             )                  W=(V)                                                     \
  (  20003500  01 3D             )                  W-1
  (  20003502  00 2D             )                  W:0                                                         \
  (  20003504  04 D5             )      if'- \ n=0? pl?              \ 20003504 --> 20003510 ===========================
  (  20003506  04 20             )                  V=4
  (  20003508  85 44             )                  RP+V
\ (  2000350A  04 20             )              \   V=4
  (  2000350C  86 44             )                  LR+V
  (  2000350E  70 47             )                  ret'
                                        then'                        \ 20003504 --> 20003510 ===========================
  (  20003510  68 46             )              \   V=RP
  (  20003512  05 60             )                  [V]=W                                                     \
  (  20003514  70 46             )                  V=LR
  (  20003516  01 38             )                  V-1
  (  20003518  00 68             )                  V=(V)                                                     \
  (  2000351A  01 21             )              \   X=1
  (  2000351C  08 43             )              \   VoX
                                                    V+1
  (  2000351E  86 46             )                  LR=V
                                     };

#else

                                    :{  {nex:}
  (  00000188  15 68             )             w rp  r=(r)   \     W=(RP)
                                               w 1   r-#
  (  0000018A  2D 00             )             w 0   r:#     \     W=W<<0,s
  (  0000018C  04 D1             )        if'-    \ z=0? ne?            \ 0000018C --> 00000198 +++++++++  -  N=1 OK BUT??
  (  0000018E  02 F1 04 02       )                  RP+4
  (  00000192  0E F1 04 0E       )                  LR+4
  (  00000196  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                          then'                  \   0000018C --> 00000198 +++++++++
  (  0000019C  15 60             )              rp w   (r)=r     \   (RP)=W
                                                lr 1   r-#     lr lr r=(r)
  (  000001A2  4E F0 01 0E       )              lr 1   Ro#       \   LRo1
                                    };
#then


                                  t:  nex:     {nex:}    ret'      '' nex:   cfa'.of.nex.*  !.

  (  15CA  C0 15             )                                                                    \  lfa= 15CA
  (  15CC  84 4E 45 58 54    )     :  NEXT                            immediate                   \  cfa= 15D2
  (  15D2  12 01 7C 96 01    )                    ( doLIT    0196 )   cfa'.of.nex.*  ,doLIT*+(#)
  (  15D7  12 17 DA          )                      CALL
  (  15DA  12 15 02          )                      ,
  (  15DD  22                )                      RET


:.  next   0  '' nex.   1+.   ldri    0  call_r    n=0?   ;.

:.  NEXT,     1>   NEXT   ;.     :.  NEXT,,   2>   NEXT  ;.   :.  NEXT,,,   3>   NEXT  ;.  :.  NEXT,,,,   4>   NEXT  ;.   :.  NEXT,,,,,  5>   NEXT  ;.
  \ -------------------------------------------------------------------------------
  (  15DE  CC 15             )                                                                    \  lfa= 15DE
  (  15E0  85 55 4E 54 49 4C )     :  UNTIL                           immediate                   \  cfa= 15E6
  (  15E6  12 01 7C C4 01    )                    ( doLIT    01C4 )   cfa'.of.?branch*  ,doLIT*+(#)
  (  15EB  12 17 DA          )                      CALL
  (  15EE  12 15 02          )                      ,
  (  15F1  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  15F2  E0 15             )                                                                    \  lfa= 15F2
  (  15F4  85 41 47 41 49 4E )     :  AGAIN                           immediate                   \  cfa= 15FA
  (  15FA  12 01 7C E0 01    )                    ( doLIT    01E0 )   cfa'.of.branch*  ,doLIT*+(#)
  (  15FF  12 17 DA          )                      CALL
  (  1602  12 15 02          )                      ,
  (  1605  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1606  F4 15             )                                                                    \  lfa= 1606
  (  1608  82 49 46          )     :  IF                              immediate                   \  cfa= 160C
  (  160C  12 01 7C C4 01    )                    ( doLIT    01C4 )   cfa'.of.?branch*  ,doLIT*+(#)
  (  1611  12 17 DA          )                      CALL
  (  1614  12 09 6A          )                      HERE
  (  1617  12 08 6C          )                      0
  (  161A  12 15 02          )                      ,
  (  161D  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  161E  08 16             )                                                                    \  lfa= 161E
  (  1620  85 41 48 45 41 44 )     :  AHEAD                           immediate                   \  cfa= 1626
  (  1626  12 01 7C E0 01    )                    ( doLIT    01E0 )   cfa'.of.branch*  ,doLIT*+(#)
  (  162B  12 17 DA          )                      CALL
  (  162E  12 09 6A          )                      HERE
  (  1631  12 08 6C          )                      0
  (  1634  12 15 02          )                      ,
  (  1637  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1638  20 16             )                                                                    \  lfa= 1638
  (  163A  86 52 45 50 45 41 )     :  REPEAT                          immediate                   \  cfa= 1642
  (  1642  12 15 FA          )                      AGAIN
  (  1645  12 09 6A          )                      HERE
  (  1648  12 03 12          )                      SWAP
  (  164B  12 02 06          )                      !
  (  164E  22                )                      RET
  (  164F  00                )                      
  \ -------------------------------------------------------------------------------
  (  1650  3A 16             )                                                                    \  lfa= 1650
  (  1652  84 54 48 45 4E    )     :  THEN                            immediate                   \  cfa= 1658
  (  1658  12 09 6A          )                      HERE
  (  165B  12 03 12          )                      SWAP
  (  165E  12 02 06          )                      !
  (  1661  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1662  52 16             )                                                                    \  lfa= 1662
  (  1664  83 41 46 54       )     :  AFT                             immediate                   \  cfa= 1668
  (  1668  12 03 02          )                      DROP
  (  166B  12 16 26          )                      AHEAD
  (  166E  12 15 C6          )                      BEGIN
  (  1671  12 03 12          )                      SWAP
  (  1674  22                )                      RET
  (  1675  00                )                      
  \ -------------------------------------------------------------------------------
  (  1676  64 16             )                                                                    \  lfa= 1676
  (  1678  84 45 4C 53 45    )     :  ELSE                            immediate                   \  cfa= 167E
  (  167E  12 16 26          )                      AHEAD
  (  1681  12 03 12          )                      SWAP
  (  1684  12 16 58          )                      THEN
  (  1687  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1688  78 16             )                                                                    \  lfa= 1688
  (  168A  85 57 48 49 4C 45 )     :  WHILE                           immediate                   \  cfa= 1690
  (  1690  12 16 0C          )                      IF
  (  1693  12 03 12          )                      SWAP
  (  1696  22                )                      RET
  (  1697  00                )
  \ -------------------------------------------------------------------------------
:.  AHEAD     ,call.branch*   here'  0000  32,'  ;.
:.  IF        ,call.?branch*  here'  0000  32,'  ;.
:.  ELSE      ,call.branch*   here'  0000  32,'  here'  rot.  32!'  ;.
:.  THEN      here'    swap.               32!'  ;.

:.  BEGIN     BEGIN'                ;.
:.  AGAIN     ,call.branch*   32,'  ;.
:.  UNTIL     ,call.?branch*  32,'  ;.
:.  WHILE     IF                    ;.    :.  REPEAT    SWAP.  AGAIN   THEN   ;.
\   WHILE     IF      SWAP.         ;.    :.  REPEAT           AGAIN   THEN   ;.

:.  ahead   traditional.structure?  @.  if.  ,call.branch*   here'  0000  32,'                      else.  ahead'                       then.  ;.
:.  if      traditional.structure?  @.  if.  ,call.?branch*  here'  0000  32,'                      else.  t:0  {DROP}  if'<>           then.  ;.
:.  else    traditional.structure?  @.  if.  ,call.branch*   here'  0000  32,'  here'  rot.  32!'   else.  else'                        then.  ;.
:.  then    traditional.structure?  @.  if.   here'   swap.  32!'                                   else.  then'                        then.  ;.
:.  again   traditional.structure?  @.  if.  ,call.branch*   32,'                                   else.  again'                       then.  ;.
:.  until   traditional.structure?  @.  if.  ,call.?branch*  32,'                                   else.  t:0  {DROP}  until'<>        then.  ;.
:.  while   if   ;.
:.  repeat  traditional.structure?  @.  if.   SWAP.  AGAIN  THEN                                    else.  swap.    again'  then'       then.  ;.



:.  IF,             IF     >1   ;.
:.  ELSE,           AHEAD   1>  THEN   >1  ;.
:.  THEN,       1>  THEN        ;.
:.  BEGIN,          BEGIN  >1   ;.
:.  AGAIN,      1>  AGAIN       ;.
:.  UNTIL,      1>  UNTIL       ;.
\   WHILE,          WHILE  >1   ;.
:.  WHILE,      1>  IF          ;.
:.  REPEAT,     1>  REPEAT      ;.

:.  IF,,            IF     >2   ;.
:.  ELSE,,          AHEAD   2>  THEN  >2  ;.
:.  THEN,,      2>  THEN        ;.
:.  BEGIN,,         BEGIN  >2   ;.
:.  AGAIN,,     2>  AGAIN       ;.
:.  UNTIL,,     2>  UNTIL       ;.
\   WHILE,,         WHILE  >2   ;.
:.  WHILE,,     2>  IF          ;.
:.  REPEAT,,    2>  REPEAT      ;.

:.  IF,,,           IF     >3   ;.
:.  ELSE,,,         AHEAD   3>  THEN  >3  ;.
:.  THEN,,,     3>  THEN        ;.
:.  BEGIN,,,        BEGIN  >3   ;.
:.  AGAIN,,,    3>  AGAIN       ;.
:.  UNTIL,,,    3>  UNTIL       ;.
\   WHILE,,,        WHILE  >3   ;.
:.  WHILE,,,    3>  IF          ;.
:.  REPEAT,,,   3>  REPEAT      ;.

:.  IF,,,,          IF     >4   ;.
\   ELSE,,,,        ELSE        ;.  \ ????????
:.  ELSE,,,,        AHEAD   4>  THEN  >4  ;.
:.  THEN,,,,    4>  THEN        ;.
:.  BEGIN,,,,       BEGIN  >4   ;.
:.  AGAIN,,,,   4>  AGAIN       ;.
:.  UNTIL,,,,   4>  UNTIL       ;.
\   WHILE,,,,       WHILE  >4   ;.
:.  WHILE,,,,   4>  IF          ;.
:.  REPEAT,,,,  4>  REPEAT      ;.

:.  IF,,,,,         IF     >5   ;.
\   ELSE,,,,,       ELSE        ;.
:.  ELSE,,,,,       AHEAD   5>  THEN  >5  ;.
:.  THEN,,,,,   5>  THEN        ;.
:.  BEGIN,,,,,      BEGIN  >5   ;.
:.  AGAIN,,,,,  5>  AGAIN       ;.
:.  UNTIL,,,,,  5>  UNTIL       ;.
\   WHILE,,,,,      WHILE  >5   ;.
:.  WHILE,,,,,  5>  IF          ;.
:.  REPEAT,,,,, 5>  REPEAT      ;.

:.  AHEAD,          AHEAD  >1   ;.
:.  AHEAD,,         AHEAD  >2   ;.
:.  AHEAD,,,        AHEAD  >3   ;.
:.  AHEAD,,,,       AHEAD  >4   ;.
:.  AHEAD,,,,,      AHEAD  >5   ;.

:.  FOR        >R   here'  ( begin  )  ;.


  (  070A  FA 06             )                                                                    \  lfa= 070A
  (  070C  01 3C             )     :  <       (.n.n.--.f.)                                        \  cfa= 070E
  (  070E  12 03 BC          )                      2DUP
  (  0711  12 03 6C          )                      XOR
  (  0714  12 03 3A          )                      0<
  (  0717  12 01 C4 23 07    )   IF               \ ?branch  0723   \ 0717 --> 0723  *********
  (  071C  12 03 02          )                      DROP
  (  071F  12 03 3A          )                      0<
  (  0722  22                )                      RET
                                 THEN                               \ 0717 --> 0723  *********
  (  0723  12 03 E2          )                      -
  (  0726  12 03 3A          )                      0<
  (  0729  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  072A  0C 07             )                                                                    \  lfa= 072A
  (  072C  03 4D 41 58       )     :  MAX     (.n.n.--.n.)                                        \  cfa= 0730
  (  0730  12 03 BC          )                      2DUP
  (  0733  12 07 0E          )                      <
  (  0736  12 01 C4 3E 07    )   IF               \ ?branch  073E   \ 0736 --> 073E  ===============
  (  073B  12 03 12          )                      SWAP
                                 THEN                               \ 0736 --> 073E  ===============
  (  073E  12 03 02          )                      DROP
  (  0741  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0742  2C 07             )                                                                    \  lfa= 0742
  (  0744  03 4D 49 4E       )     :  MIN     (.n.n.--.n.)                                        \  cfa= 0748
  (  0748  12 03 BC          )                      2DUP
  (  074B  12 03 12          )                      SWAP
  (  074E  12 07 0E          )                      <
  (  0751  12 01 C4 59 07    )   IF               \ ?branch  0759   \ 0751 --> 0759  *********
  (  0756  12 03 12          )                      SWAP
                                 THEN                               \ 0751 --> 0759  *********
  (  0759  12 03 02          )                      DROP
  (  075C  22                )                      RET
  (  075D  00                )
  \ -------------------------------------------------------------------------------
  (  075E  44 07             )                                                                    \  lfa= 075E
  (  0760  06 57 49 54 48 49 )     :  WITHIN    (.n.n.n.--.f.)                                    \  cfa= 0768
  (  0768  12 03 24          )                      OVER
  (  076B  12 03 E2          )                      -
  (  076E  12 02 54          )                      >R
  (  0771  12 03 E2          )                      -
  (  0774  12 02 84          )                      R>
  (  0777  12 04 60          )                      U<
  (  077A  22                )                      RET
  (  077B  00                )                      
  \ -------------------------------------------------------------------------------
  (  077C  60 07             )                                                                    \  lfa= 077C
  (  077E  05 4D 2F 4D 4F 44 )     :  M/MOD     (.n.n.n.--.n.n.)                                  \  cfa= 0784
  (  0784  12 02 E4          )                      DUP
  (  0787  12 03 3A          )                      0<
  (  078A  12 02 E4          )                      DUP
  (  078D  12 02 54          )                      >R
  (  0790  12 01 C4 A1 07    )   IF               \ ?branch  07A1   \ 0790 --> 07A1  ===============
  (  0795  12 04 08          )                      NEGATE
  (  0798  12 02 54          )                      >R
  (  079B  12 04 32          )                      DNEGATE
  (  079E  12 02 84          )                      R>
                                 THEN                               \ 0790 --> 07A1  ===============
  (  07A1  12 02 54          )                      >R
  (  07A4  12 02 E4          )                      DUP
  (  07A7  12 03 3A          )                      0<
  (  07AA  12 01 C4 B5 07    )   IF               \ ?branch  07B5   \ 07AA --> 07B5  ------
  (  07AF  12 02 6A          )                      R@
  (  07B2  12 03 D2          )                      +
                                 THEN                               \ 07AA --> 07B5  ------
  (  07B5  12 02 84          )                      R>
  (  07B8  12 04 FE          )                      UM/MOD
  (  07BB  12 02 84          )                      R>
  (  07BE  12 01 C4 CC 07    )   IF               \ ?branch  07CC   \ 07BE --> 07CC  *********
  (  07C3  12 03 12          )                      SWAP
  (  07C6  12 04 08          )                      NEGATE
  (  07C9  12 03 12          )                      SWAP
                                 THEN                               \ 07BE --> 07CC  *********
  (  07CC  22                )                      RET
  (  07CD  00                )                      
  \ -------------------------------------------------------------------------------
  (  07CE  7E 07             )                                                                    \  lfa= 07CE
  (  07D0  04 2F 4D 4F 44    )     :  /MOD     (.n.n.--.n.n.)                                     \  cfa= 07D6
  (  07D6  12 03 24          )                      OVER
  (  07D9  12 03 3A          )                      0<
  (  07DC  12 03 12          )                      SWAP
  (  07DF  12 07 84          )                      M/MOD
  (  07E2  22                )                      RET
  (  07E3  00                )
  \ -------------------------------------------------------------------------------
  (  07E4  D0 07             )                                                                    \  lfa= 07E4
  (  07E6  03 4D 4F 44       )     :  MOD      (.n.n.--.n.)                                       \  cfa= 07EA
  (  07EA  12 07 D6          )                      /MOD
  (  07ED  12 03 02          )                      DROP
  (  07F0  22                )                      RET
  (  07F1  00                )                      
  \ -------------------------------------------------------------------------------
  (  07F2  E6 07             )                                                                    \  lfa= 07F2
  (  07F4  01 2F             )     :  /        (.n.n.--.n.)                                       \  cfa= 07F6
  (  07F6  12 07 D6          )                      /MOD
  (  07F9  12 03 12          )                      SWAP
  (  07FC  12 03 02          )                      DROP
  (  07FF  22                )                      RET
  \ -------------------------------------------------------------------------------

cortex.m0?  @.
#if
: UM*  ( u1 u2 -- ud )
  0   SWAP   ( u1 0 u2 )   1F   \ 15 = 0f
  FOR    DUP  UM+  >R >R   DUP    UM+  R> +  R>
    IF                >R   OVER   UM+  R> +
    THEN
  NEXT   ROT  DROP  ;
#ELSE
  \ -------------------------------------------------------------------------------
                                   :{  {um*}                                                \ cfa=     52AC
  (  000052AC  38 68             )                  R0=s
  (  000052AE  A0 FB 06 06       )                  umull_T,R0,T,T
  (  000052B2  38 60             )                  s=R0
  (  000052B4  70 47             )                  };

                                        t:  um*   (.n.n.--.d.)       {um*}                     \ cfa=     52AC
  (  000052B4  70 47             )                  ret'
  (  000052B6  00 BF             )
#THEN
  \ -------------------------------------------------------------------------------
  (  0800  F4 07             )                                                                    \  lfa= 0800
  (  0802  01 2A             )     :  *        (.n.n.--.n.)                                       \  cfa= 0804
  (  0804  12 05 40          )                      UM*
  (  0807  12 03 02          )                      DROP
  (  080A  22                )                      RET
  (  080B  00                )
  \ -------------------------------------------------------------------------------
  (  080C  02 08             )                                                                    \  lfa= 080C
  (  080E  02 4D 2A          )     :  M*        (.n.n.--.n.n.)                                    \  cfa= 0812
  (  0812  12 03 BC          )                      2DUP
  (  0815  12 03 6C          )                      XOR
  (  0818  12 03 3A          )                      0<
  (  081B  12 02 54          )                      >R
  (  081E  12 04 16          )                      ABS
  (  0821  12 03 12          )                      SWAP
  (  0824  12 04 16          )                      ABS
  (  0827  12 05 40          )                      UM*
  (  082A  12 02 84          )                      R>
  (  082D  12 01 C4 35 08    )   IF               \ ?branch  0835   \ 082D --> 0835  ------
  (  0832  12 04 32          )                      DNEGATE
                                 THEN                               \ 082D --> 0835  ------
  (  0835  22                )                      RET       
  \ -------------------------------------------------------------------------------
  (  0836  0E 08             )                                                                    \  lfa= 0836
  (  0838  05 2A 2F 4D 4F 44 )     :  */MOD      (.n.n.n.--.n.n.)                                 \  cfa= 083E
  (  083E  12 02 54          )                      >R
  (  0841  12 08 12          )                      M*
  (  0844  12 02 84          )                      R>
  (  0847  12 07 84          )                      M/MOD
  (  084A  22                )                      RET
  (  084B  00                )
  \ -------------------------------------------------------------------------------
  (  084C  38 08             )                                                                    \  lfa= 084C
  (  084E  02 2A 2F          )     :  */       (.n.n.n.--.n.)                                     \  cfa= 0852
  (  0852  12 08 3E          )                      */MOD
  (  0855  12 03 12          )                      SWAP
  (  0858  12 03 02          )                      DROP
  (  085B  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  085C  4E 08             )                                                                    \  lfa= 085C
  (  085E  02 42 4C          )     :  BL       (.--.n.)                                           \  cfa= 0862
  (  0862  12 01 7C 20 00    )                      doLIT    0020
  (  0867  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  0868  5E 08             )                                                                    \  lfa= 0868
  (  086A  01 30             )     :  0                                                           \  cfa= 086C
  (  086C  08 A6 02 08 A6 03 )                      {dup}
  (  0872  7A 00             )                      TL=0
  (  0874  AB 02             )                  `   R3=R2
  (  0876  22                )                      RET
  (  0877  00                )                      
  \ -------------------------------------------------------------------------------
  (  0878  6A 08             )                                                                    \  lfa= 0878
  (  087A  01 31             )     :  1                                                           \  cfa= 087C
  (  087C  08 A6 02 08 A6 03 )                      {dup}
  (  0882  7A 01             )                  `   R2=1
  (  0884  7B 00             )                      TH=0
  (  0886  22                )                      RET
  (  0887  00                )
  \ -------------------------------------------------------------------------------
  (  0888  7A 08             )                                                                    \  lfa= 0888
  (  088A  01 32             )     :  2                                                           \  cfa= 088C
  (  088C  08 A6 02 08 A6 03 )                      {dup}
  (  0892  7A 02             )                  `   R2=2
  (  0894  7B 00             )                      TH=0
  (  0896  22                )                      RET
  (  0897  00                )                      
  \ -------------------------------------------------------------------------------
  (  0898  8A 08             )                                                                    \  lfa= 0898
  (  089A  02 2D 31          )     :  -1                                                          \  cfa= 089E
  (  089E  08 A6 02 08 A6 03 )                      {dup}
  (  08A4  7A FF             )                  `   R2=0FF
  (  08A6  AB 02             )                  `   R3=R2
  (  08A8  22                )                      RET
  (  08A9  00                )
comment;
  \ -------------------------------------------------------------------------------
  (  08AA  9A 08             )                                                                    \  lfa= 08AA
  (  08AC  05 3E 43 48 41 52 )     :  >CHAR       (.n.--.n.)                                      \  cfa= 08B2
  (  08B2  12 01 7C 7F 00    )                      doLIT    007F
  (  08B7  12 03 4C          )                      AND
  (  08BA  12 02 E4          )                      DUP
  (  08BD  12 01 7C 7F 00    )                      doLIT    007F
  (  08C2  12 08 62          )                      BL
  (  08C5  12 07 68          )                      WITHIN
  (  08C8  12 01 C4 D5 08    )   IF               \ ?branch  08D5   \ 08C8 --> 08D5  ------
  (  08CD  12 03 02          )                      DROP
  (  08D0  12 01 7C 5F 00    )                      doLIT    005F
                                 THEN                               \ 08C8 --> 08D5  ------
  (  08D5  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  08D6  AC 08             )                                                                  \  lfa= 08D6
  (  08D8  05 44 45 50 54 48 )     :  DEPTH       (.--.n.)                                      \  cfa= 08DE
  (  08DE  12 02 C2          )                 \    SP@              \ stack growing toward higher address
  (  08E1  12 05 B2          )                      SP0
  (  08E4  12 02 1E          )                      @       SP@  \ stack growing toward higher address in 8051
  (  08E7  12 03 E2          )                      -
  (  08EA  12 04 C6          )                      cell/ \ abs  \ stack growing toward  lower address in stm32F407
  (  08ED  22                )                      RET
  \ -------------------------------------------------------------------------------

  (  08EE  D8 08             )                                                                    \  lfa= 08EE
  (  08F0  04 50 49 43 4B    )   t:  PICK   (.n.n.--.n.)          {pick}                          \  cfa= 08F6
  (  0904  22                )                      RET'
  (  0905  00                )                                
  \ -------------------------------------------------------------------------------
  (  0906  F0 08             )                                                                    \  lfa= 0906
  (  0908  02 2B 21          )    t:  +!    (.n.a.--.)           {+!}   ret'                      \  cfa= 090C
  \ -------------------------------------------------------------------------------
  (  0920  08 09             )                                                                    \  lfa= 0920
  (  0922  02 32 21          )     :  2!    (.n.n.a.--.)                                          \  cfa= 0926
  (  0926  12 03 12          )                      SWAP
  (  0929  12 03 24          )                      OVER
  (  092C  12 02 06          )                      !
  (  092F  12 04 78          )                      CELL+
  (  0932  12 02 06          )                      !
  (  0935  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0936  22 09             )                                                                    \  lfa= 0936
  (  0938  02 32 40          )     :  2@        (.a.--.n.n.)                                      \  cfa= 093C
  (  093C  12 02 E4          )                      DUP
  (  093F  12 04 78          )                      CELL+
  (  0942  12 02 1E          )                      @
  (  0945  12 03 12          )                      SWAP
  (  0948  12 02 1E          )                      @
  (  094B  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  094C  38 09             )                                                                    \  lfa= 094C
  (  094E  05 43 4F 55 4E 54 )     :  COUNT     (.a.--.a+1.len.)                                                   \  cfa= 0954
  (  0954  12 02 E4          )                      DUP
  (  0957  12 04 A8          )                      1+
  (  095A  12 03 12          )                      SWAP
  (  095D  12 02 44          )                      C@
  (  0960  22                )                      RET
  (  0961  00                )








  \ -------------------------------------------------------------------------------
  (  0972  64 09             )                                                                    \  lfa= 0972
  (  0974  03 50 41 44       )     :  PAD       (.--.here+100.)                                   \  cfa= 0978
  (  0978  12 09 6A          )                      HERE
  (  097B  12 01 7C 00 01    )                      doLIT    0100
  (  0980  12 03 D2          )                      +
  (  0983  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0984  74 09             )                                                                    \  lfa= 0984
  (  0986  03 54 49 42       )     :  TIB       (.--.a.)                                          \  cfa= 098A
  (  098A  12 06 58          )                      #TIB
  (  098D  12 04 78          )                      CELL+
  (  0990  12 02 1E          )                      @
  (  0993  22                )                      RET

comment:
nuc442eF?  @.
#if   nuc453eF?  @.
  #if    20007080
  #else  20008080
  #then            content.of.'tib*    !.
#else    20018080  content.of.'tib*    !.
#then

stm32F103?  @.
#if      20004E80  content.of.'tib*    !.
#then
comment;
  \ -------------------------------------------------------------------------------
  :.  ahead,    branch   here'  >1   0000 32,'  ;.

  (  09B0  96 09             )                                                                    \  lfa= 09B0
  (  09B2  05 43 4D 4F 56 45 )     :  CMOVE   ( b b u -- )                                                    \  cfa= 09B8
  (  09B8  12 02 54          )                      >R
  (  09BB  12 01 E0 D8 09    )   AHEAD,           \ branch   09D8   \ 09BB --> 09D8  @@@@@@@@@@@@@@@@@@@@@
                                   BEGIN                            \ 09D8 --> 09C0  ===============
  (  09C0  12 02 54          )                      >R
  (  09C3  12 02 E4          )                      DUP
  (  09C6  12 02 44          )                      C@
  (  09C9  12 02 6A          )                      R@
  (  09CC  12 02 2E          )                      C!
  (  09CF  12 04 A8          )                      1+
  (  09D2  12 02 84          )                      R>
  (  09D5  12 04 A8          )                      1+
                                 THEN,                              \ 09BB --> 09D8  @@@@@@@@@@@@@@@@@@@@@
  (  09D8  12 01 96 C0 09    )     NEXT           \ nex.      09C0  \ 09D8 --> 09C0  ===============
  (  09DD  12 03 AA          )                      2DROP
  (  09E0  22                )                      RET
  (  09E1  00                )
  \ -------------------------------------------------------------------------------
  (  09E2  B2 09             )                                                                    \  lfa= 09E2
  (  09E4  04 46 49 4C 4C    )     :  FILL  ( b u c -- )                                                      \  cfa= 09EA
  (  09EA  12 03 12          )                      SWAP
  (  09ED  12 02 54          )                      >R
  (  09F0  12 03 12          )                      SWAP
  (  09F3  12 01 E0 01 0A    )   AHEAD,           \ branch   0A01   \ 09F3 --> 0A01  !!!!!!!!!!!!!!!!!!
                                   BEGIN                            \ 0A01 --> 09F8  ////////////
  (  09F8  12 03 BC          )                      2DUP
  (  09FB  12 02 2E          )                      C!
  (  09FE  12 04 A8          )                      1+
                                 THEN,                              \ 09F3 --> 0A01  !!!!!!!!!!!!!!!!!!
  (  0A01  12 01 96 F8 09    )   NEXT             \ nex.     09F8   \ 0A01 --> 09F8  ////////////
  (  0A06  12 03 AA          )                      2DROP
  (  0A09  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0A0A  E4 09             )                                                                    \  lfa= 0A0A
  (  0A0C  09 2D 54 52 41 49 )     :  -TRAILING  ( b u -- b u )                                                 \  cfa= 0A16
  (  0A16  12 02 54          )                      >R
  (  0A19  12 01 E0 3C 0A    )   AHEAD,           \ branch   0A3C   \ 0A19 --> 0A3C  ===============
                                   BEGIN                            \ 0A3C --> 0A1E  *********
  (  0A1E  12 08 62          )                      BL
  (  0A21  12 03 24          )                      OVER
  (  0A24  12 02 6A          )                      R@
  (  0A27  12 03 D2          )                      +
  (  0A2A  12 02 44          )                      C@
  (  0A2D  12 07 0E          )                      <
  (  0A30  12 01 C4 3C 0A    )       IF           \ ?branch  0A3C   \ 0A30 --> 0A3C  @@@@@@@@@@@@@@@@@@@@@
  (  0A35  12 02 84          )                      R>
  (  0A38  12 04 A8          )                      1+
  (  0A3B  22                )                      RET
                                     THEN                           \ 0A30 --> 0A3C  @@@@@@@@@@@@@@@@@@@@@
                                 THEN,                              \ 0A19 --> 0A3C  ===============
  (  0A3C  12 01 96 1E 0A    )     NEXT           \ nex.     0A1E   \ 0A3C --> 0A1E  *********
  (  0A41  12 08 6C          )                      0000  ...*
  (  0A44  22                )                      RET
  (  0A45  00                )                      
  \ -------------------------------------------------------------------------------
comment:
  (  0A46  0C 0A             )                                                                    \  lfa= 0A46
  (  0A48  05 50 41 43 4B 24 )     :  PACK$   ( b u a -- a )                                                   \  cfa= 0A4E
  (  0A4E  12 04 DC          )                      ALIGNED
  (  0A51  12 02 E4          )                      DUP
  (  0A54  12 02 54          )                      >R
  (  0A57  12 03 24          )                      OVER
  (  0A5A  12 02 E4          )                      DUP
  (  0A5D  12 08 7C          )                      1
  (  0A60  12 03 4C          )                      AND
  (  0A63  12 03 E2          )                      -
  (  0A66  12 03 24          )                      OVER
  (  0A69  12 03 D2          )                      +
  (  0A6C  12 08 6C          )                      0
  (  0A6F  12 03 12          )                      SWAP
  (  0A72  12 02 06          )                      !
  (  0A75  12 03 BC          )                      2DUP
  (  0A78  12 02 2E          )                      C!
  (  0A7B  12 04 A8          )                      1+
  (  0A7E  12 03 12          )                      SWAP
  (  0A81  12 09 B8          )                      CMOVE  
  (  0A84  12 02 84          )                      R>
  (  0A87  22                )                      RET
comment;
  \ -------------------------------------------------------------------------------
                                  :  PACK$+8   ( b u a -- a )
  (  0A51  12 02 E4          )                      DUP
  (  0A54  12 02 54          )                      >R
  (  0A57  12 03 24          )                      OVER
  (  0A5A  12 02 E4          )                      DUP
  (  0A5D  12 08 7C          )                      1
  (  0A60  12 03 4C          )                      AND
  (  0A63  12 03 E2          )                      -
  (  0A66  12 03 24          )                      OVER
  (  0A69  12 03 D2          )                      +
  (  0A6C  12 08 6C          )                      0
  (  0A6F  12 03 12          )                      SWAP
  (  0A72  12 02 06          )                      !
  (  0A75  12 03 BC          )                      2DUP
  (  0A78  12 02 2E          )                      C!
  (  0A7B  12 04 A8          )                      1+
  (  0A7E  12 03 12          )                      SWAP
  (  0A81  12 09 B8          )                      CMOVE  
  (  0A84  12 02 84          )                      R>
  (  0A87  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0A46  0C 0A             )                                                                    \  lfa= 0A46
  (  0A48  05 50 41 43 4B 24 )     :  PACK$   ( b u a -- a )                                                    \  cfa= 0A4E
  (  0A4E  12 04 DC          )                      ALIGNED
                                                    PACK$+8
                                                    ret
  \ -------------------------------------------------------------------------------
  (  0A88  48 0A             )                                                                    \  lfa= 0A88
  (  0A8A  05 44 49 47 49 54 )     :  DIGIT    (.0~F.--.'0'~'F'.)   ( u -- c )                               \  cfa= 0A90
  (  0A90  12 01 7C 09 00    )                      doLIT    0009
  (  0A95  12 03 24          )                      OVER
  (  0A98  12 07 0E          )                      <
  (  0A9B  12 01 7C 07 00    )                      doLIT    0007
  (  0AA0  12 03 4C          )                      AND
  (  0AA3  12 03 D2          )                      +
  (  0AA6  12 01 7C 30 00    )                      doLIT    0030
  (  0AAB  12 03 D2          )                      +
  (  0AAE  22                )                      RET
  (  0AAF  00                )                      
  \ -------------------------------------------------------------------------------
  (  0AB0  8A 0A             )                                                                    \  lfa= 0AB0
  (  0AB2  07 45 58 54 52 41 )     :  EXTRACT  ( n base -- n c )                                                   \  cfa= 0ABA
  (  0ABA  12 08 6C          )                      0
  (  0ABD  12 03 12          )                      SWAP
  (  0AC0  12 04 FE          )                      UM/MOD
  (  0AC3  12 03 12          )                      SWAP
  (  0AC6  12 0A 90          )                      DIGIT
  (  0AC9  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0ACA  B2 0A             )                                                                    \  lfa= 0ACA
  (  0ACC  02 3C 23          )     :  <#   ( -- )                                                       \  cfa= 0AD0
  (  0AD0  12 09 78          )                      PAD
  (  0AD3  12 06 8E          )                      HLD
  (  0AD6  12 02 06          )                      !
  (  0AD9  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0ADA  CC 0A             )                                                                    \  lfa= 0ADA
  (  0ADC  04 48 4F 4C 44    )     :  HOLD   ( c -- )                                                     \  cfa= 0AE2
  (  0AE2  12 06 8E          )                      HLD
  (  0AE5  12 02 1E          )                      @
  (  0AE8  12 04 B6          )                      1-
  (  0AEB  12 02 E4          )                      DUP
  (  0AEE  12 06 8E          )                      HLD
  (  0AF1  12 02 06          )                      !
  (  0AF4  12 02 2E          )                      C!
  (  0AF7  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0AF8  DC 0A             )                                                                    \  lfa= 0AF8
  (  0AFA  01 23             )     :  #    ( u -- u )                                                        \  cfa= 0AFC
  (  0AFC  12 06 24          )                      BASE
  (  0AFF  12 02 1E          )                      @
  (  0B02  12 0A BA          )                      EXTRACT
  (  0B05  12 0A E2          )                      HOLD
  (  0B08  22                )                      RET
  (  0B09  00                )                      
  \ -------------------------------------------------------------------------------
  (  0B0A  FA 0A             )                                                                    \  lfa= 0B0A
  (  0B0C  02 23 53          )     :  #S   ( u -- 0 )                                                       \  cfa= 0B10
                                 BEGIN                              \ 0B1B --> 0B10  !!!!!!!!!!!!!!!!!!
  (  0B10  12 0A FC          )                      #
  (  0B13  12 02 E4          )                      DUP
  (  0B16  12 01 C4 20 0B    )   WHILE            \ ?branch  0B20   \ 0B16 --> 0B20  *********
  (  0B1B  12 01 E0 10 0B    )   REPEAT           \ branch   0B10 ) \ 0B16 --> 0B20  *********!!!!!!!!!
  (  0B20  22                )                      RET
  (  0B21  00                )
  \ -------------------------------------------------------------------------------
  (  0B22  0C 0B             )                                                                    \  lfa= 0B22
  (  0B24  04 53 49 47 4E    )     :  SIGN   ( n -- )                                                     \  cfa= 0B2A
  (  0B2A  12 03 3A          )                      0<
  (  0B2D  12 01 C4 3A 0B    )   IF               \ ?branch  0B3A   \ 0B2D --> 0B3A  *********
  (  0B32  12 01 7C 2D 00    )                      doLIT    002D
  (  0B37  12 0A E2          )                      HOLD
                                 THEN                               \ 0B2D --> 0B3A  *********
  (  0B3A  22                )                      RET
  (  0B3B  00                )
  \ -------------------------------------------------------------------------------
  (  0B3C  24 0B             )                                                                    \  lfa= 0B3C
  (  0B3E  02 23 3E          )     :  #>   ( w -- b u )                                                        \  cfa= 0B42
  (  0B42  12 03 02          )                      DROP
  (  0B45  12 06 8E          )                      HLD
  (  0B48  12 02 1E          )                      @
  (  0B4B  12 09 78          )                      PAD
  (  0B4E  12 03 24          )                      OVER
  (  0B51  12 03 E2          )                      -
  (  0B54  22                )                      RET
  (  0B55  00                )
  \ -------------------------------------------------------------------------------
  (  0B56  3E 0B             )                                                                    \  lfa= 0B56
  (  0B58  03 73 74 72       )     :  str  ( w -- b u )                                                       \  cfa= 0B5C
  (  0B5C  12 02 E4          )                      DUP
  (  0B5F  12 02 54          )                      >R
  (  0B62  12 04 16          )                      ABS
  (  0B65  12 0A D0          )                      <#
  (  0B68  12 0B 10          )                      #S
  (  0B6B  12 02 84          )                      R>
  (  0B6E  12 0B 2A          )                      SIGN
  (  0B71  12 0B 42          )                      #>
  (  0B74  22                )                      RET
  (  0B75  00                )
  \ -------------------------------------------------------------------------------
  (  0B76  58 0B             )                                                                    \  lfa= 0B76
  (  0B78  03 48 45 58       )     :  HEX   ( -- )                                                      \  cfa= 0B7C
  (  0B7C  12 01 7C 10 00    )                      doLIT    0010
  (  0B81  12 06 24          )                      BASE
  (  0B84  12 02 06          )                      !
  (  0B87  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0B88  78 0B             )                                                                    \  lfa= 0B88
  (  0B8A  07 44 45 43 49 4D )     :  DECIMAL   ( -- )                                                \  cfa= 0B92
  (  0B92  12 01 7C 0A 00    )                      doLIT    000A
  (  0B97  12 06 24          )                      BASE
  (  0B9A  12 02 06          )                      !
  (  0B9D  22                )                      RET
  \ -------------------------------------------------------------------------------
:.  T:61     61  t:#  ;.
:.  T:7B     7B  t:#  ;. 

 t:  upc                                                                     \ cfa=     5B20
  (  00005B20  61 2E             )                  T:61
  (  00005B22  03 D4             )      if'n=0 \ n=1? mi?  +         \ 00005B22 --> 00005B2C --------------------
  (  00005B24  7B 2E             )                  T:7B
  (  00005B26  01 D5             )        if'- \ n=0? pl?            \ 00005B26 --> 00005B2C ------------------------
  (  00005B28  06 F0 DF 06       )                  Tn0DF
                                          then'                      \ 00005B26 --> 00005B2C ------------------------
                                        then'
  (  00005B2C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  >upc                                                   \ cfa=     5B20
  (  00005B20  60 2E             )                  T:61
  (  00005B22  03 D4             )      if'n=0 \ n=1? mi?              \ 00005B22 --> 00005B2C --------------------
  (  00005B24  7B 2E             )                  T:7B
  (  00005B26  01 D5             )        if'n=1  \ n=0? pl?            \ 00005B26 --> 00005B2C ------------------------
  (  00005B28  06 F0 DF 06       )                  Tn0DF
                                          then'                      \ 00005B26 --> 00005B2C ------------------------
                                        then'
  (  00005B2C  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  :  swap.upc.swap.-     swap upc swap -   ret

  (  0B9E  8A 0B             )                                                                    \  lfa= 0B9E
  (  0BA0  06 44 49 47 49 54 )     :  DIGIT?    ( c base -- u t )                                                   \  cfa= 0BA8
  (  0BA8  12 02 54          )                      >R
  (  0BAB  12 01 7C 30 00    )                      doLIT    0030
                               case.sensitive?  @.
                               #if
  (  0BB0  12 1E 2E          )                      -     \  swap.upc.swap.-
                               #else
                                                             swap.upc.swap.-
                               #then

  (  0BB3  12 01 7C 09 00    )                      doLIT    0009
  (  0BB8  12 03 24          )                      OVER
  (  0BBB  12 07 0E          )                      <
  (  0BBE  12 01 C4 D9 0B    )   IF               \ ?branch  0BD9   \ 0BBE --> 0BD9  !!!!!!!!!!!!!!!!!!
  (  0BC3  12 01 7C 07 00    )                      doLIT    0007
  (  0BC8  12 03 E2          )                      -
  (  0BCB  12 02 E4          )                      DUP
  (  0BCE  12 01 7C 0A 00    )                      doLIT    000A
  (  0BD3  12 07 0E          )                      <
  (  0BD6  12 03 5C          )                      OR
                                 THEN                               \ 0BBE --> 0BD9  !!!!!!!!!!!!!!!!!!
  (  0BD9  12 02 E4          )                      DUP
  (  0BDC  12 02 84          )                      R>
  (  0BDF  12 04 60          )                      U<
  (  0BE2  22                )                      RET
  (  0BE3  00                )  \  1>
  \ -------------------------------------------------------------------------------
  (  0BE4  A0 0B             )                                                                    \  lfa= 0BE4
  (  0BE6  07 4E 55 4D 42 45 )     :  NUMBER?  ( a -- n T, a F )                                                   \  cfa= 0BEE
  (  0BEE  12 06 24          )                      BASE
  (  0BF1  12 02 1E          )                      @
  (  0BF4  12 02 54          )                      >R
  (  0BF7  12 08 6C          )                      0
  (  0BFA  12 03 24          )                      OVER
  (  0BFD  12 09 54          )                      COUNT
  (  0C00  12 03 24          )                      OVER
  (  0C03  12 02 44          )                      C@
  (  0C06  12 01 7C 24 00    )                      doLIT    0024
  (  0C0B  12 04 46          )                      =
  (  0C0E  12 01 C4 22 0C    )   IF               \ ?branch  0C22   \ 0C0E --> 0C22  ===============
  (  0C13  12 0B 7C          )                      HEX
  (  0C16  12 03 12          )                      SWAP
  (  0C19  12 04 A8          )                      1+
  (  0C1C  12 03 12          )                      SWAP
  (  0C1F  12 04 B6          )                      1-
                                 THEN                               \ 0C0E --> 0C22  ===============
  (  0C22  12 03 24          )                      OVER
  (  0C25  12 02 44          )                      C@
  (  0C28  12 01 7C 2D 00    )                      doLIT    002D
  (  0C2D  12 04 46          )                      =
  (  0C30  12 02 54          )                      >R
  (  0C33  12 03 12          )                      SWAP
  (  0C36  12 02 6A          )                      R@
  (  0C39  12 03 E2          )                      -
  (  0C3C  12 03 12          )                      SWAP
  (  0C3F  12 02 6A          )                      R@
  (  0C42  12 03 D2          )                      +
  (  0C45  12 02 F4          )                      ?DUP
  (  0C48  12 01 C4 AF 0C    )   IF               \ ?branch  0CAF   \ 0C48 --> 0CAF  +++
  (  0C4D  12 04 B6          )                      1-
  (  0C50  12 02 54          )                      >R
                                   BEGIN,                           \ 0C7F --> 0C53  !!!!!!!!!!!!!!!!!!
  (  0C53  12 02 E4          )                      DUP
  (  0C56  12 02 54          )                      >R
  (  0C59  12 02 44          )                      C@
  (  0C5C  12 06 24          )                      BASE
  (  0C5F  12 02 1E          )                      @
  (  0C62  12 0B A8          )                      DIGIT?
  (  0C65  12 01 C4 9D 0C    )       IF           \ ?branch  0C9D   \ 0C65 --> 0C9D  ===============
  (  0C6A  12 03 12          )                      SWAP
  (  0C6D  12 06 24          )                      BASE
  (  0C70  12 02 1E          )                      @
  (  0C73  12 08 04          )                      *
  (  0C76  12 03 D2          )                      +
  (  0C79  12 02 84          )                      R>
  (  0C7C  12 04 A8          )                      1+
  (  0C7F  12 01 96 53 0C    )     NEXT,          \ nex.     0C53   \ 0C7F --> 0C53  !!!!!!!!!!!!!!!!!!
  (  0C84  12 02 6A          )                      R@
  (  0C87  12 03 12          )                      SWAP
  (  0C8A  12 03 02          )                      DROP
  (  0C8D  12 01 C4 95 0C    )         IF         \ ?branch  0C95   \ 0C8D --> 0C95  ------
  (  0C92  12 04 08          )                      NEGATE
                                       THEN                         \ 0C8D --> 0C95  ------
  (  0C95  12 03 12          )                      SWAP
  (  0C98  12 01 E0 AC 0C    )       ELSE         \ branch   0CAC   \ 0C65 --> 0C9D  ===============
  (  0C9D  12 02 84          )                      R>
  (  0CA0  12 02 84          )                      R>
  (  0CA3  12 03 AA          )                      2DROP
  (  0CA6  12 03 AA          )                      2DROP
  (  0CA9  12 08 6C          )                      0
                                     THEN                           \ 0C98 --> 0CAC  +++
  (  0CAC  12 02 E4          )                      DUP
                                 THEN                               \ 0C48 --> 0CAF  +++
  (  0CAF  12 02 84          )                      R>
  (  0CB2  12 03 AA          )                      2DROP
  (  0CB5  12 02 84          )                      R>
  (  0CB8  12 06 24          )                      BASE
  (  0CBB  12 02 06          )                      !
  (  0CBE  22                )                      RET
  (  0CBF  00                )   \  1>
  \ -------------------------------------------------------------------------------
comment:
  (  0CC0  E6 0B             )                                                                    \  lfa= 0CC0
  (  0CC2  04 3F 4B 45 59    )     :  ?KEY   ( -- f )                                                     \  cfa= 0CC8
  (  0CC8  12 05 CC          )                      '?KEY
  (  0CCB  12 09 A0          )                      @EXECUTE
  (  0CCE  22                )                      RET
  (  0CCF  00                )
  \ -------------------------------------------------------------------------------
  (  0CD0  C2 0C             )                                                                    \  lfa= 0CD0
  (  0CD2  03 4B 45 59       )     :  KEY   ( -- c )                                                       \  cfa= 0CD6
                                 BEGIN                              \ 0CD9 --> 0CD6  *********
  (  0CD6  12 0C C8          )                      ?KEY
  (  0CD9  12 01 C4 D6 0C    )   UNTIL            \ ?branch  0CD6 ) \ 0CD9 --> 0CD6  *********
  (  0CDE  22                )                      RET
  (  0CDF  00                )
  \ -------------------------------------------------------------------------------
  (  0CE0  D2 0C             )                                                                    \  lfa= 0CE0
  (  0CE2  04 45 4D 49 54    )     :  EMIT   ( c -- )                                                     \  cfa= 0CE8
  (  0CE8  12 05 DA          )                      'EMIT
  (  0CEB  12 09 A0          )                      @EXECUTE
  (  0CEE  22                )                      RET
  (  0CEF  00                )

  ''  emit     cfa'.of.emit*  !.
comment;
  \ -------------------------------------------------------------------------------
  (  0CF0  E2 0C             )                                                                    \  lfa= 0CF0
  (  0CF2  04 4E 55 46 3F    )     :  NUF?   ( -- f )                                                      \  cfa= 0CF8
  (  0CF8  12 0C C8          )                      ?KEY
  (  0CFB  12 02 E4          )                      DUP
  (  0CFE  12 01 C4 11 0D    )   IF               \ ?branch  0D11   \ 0CFE --> 0D11  +++
  (  0D03  12 03 AA          )                      2DROP
  (  0D06  12 0C D6          )                      KEY
  (  0D09  12 01 7C 0D 00    )                      doLIT    000D
  (  0D0E  12 04 46          )                      =
                                 THEN                               \ 0CFE --> 0D11  +++
  (  0D11  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0D12  F2 0C             )                                                                    \  lfa= 0D12
  (  0D14  04 50 41 43 45    )     :  PACE   ( -- )                                                     \  cfa= 0D1A
  (  0D1A  12 01 7C 0B 00    )                      doLIT    000B
  (  0D1F  12 0C E8          )                      EMIT
  (  0D22  22                )                      RET
  (  0D23  00                )

  ''  pace        cfa'.of.pace*  !.
  \ -------------------------------------------------------------------------------
  (  0D24  14 0D             )                                                                    \  lfa= 0D24
  (  0D26  05 53 50 41 43 45 )     :  SPACE  ( -- )                                                     \  cfa= 0D2C
  (  0D2C  12 08 62          )                      BL
  (  0D2F  12 0C E8          )                      EMIT
  (  0D32  22                )                      RET
  (  0D33  00                )
  \ -------------------------------------------------------------------------------
  (  0D34  26 0D             )                                                                    \  lfa= 0D34
  (  0D36  06 53 50 41 43 45 )     :  SPACES   ( +n -- )                                                   \  cfa= 0D3E
  (  0D3E  12 08 6C          )                      0000
  (  0D41  12 07 30          )                      MAX
  (  0D44  12 02 54          )  ( 1> )              >R
  (  0D47  12 01 E0 4F 0D    )   AHEAD,            \ branch   0D4F  \ 0D47 --> 0D4F  *********
                                   BEGIN                            \ 0D4F --> 0D4C  +++
  (  0D4C  12 0D 2C          )                      SPACE
                                 THEN,                              \ 0D47 --> 0D4F  *********
  (  0D4F  12 01 96 4C 0D    )   NEXT             \ nex.     0D4C   \ 0D4F --> 0D4C  +++
  (  0D54  22                )                      RET
  (  0D55  00                )
  \ -------------------------------------------------------------------------------
  (  0D56  36 0D             )                                                                    \  lfa= 0D56
  (  0D58  04 54 59 50 45    )     :  TYPE  ( b u -- )                                                      \  cfa= 0D5E
  (  0D5E  12 02 54          )                      >R
  (  0D61  12 01 E0 72 0D    )   AHEAD,           \ branch   0D72   \ 0D61 --> 0D72  +++
                                   BEGIN                            \ 0D72 --> 0D66  !!!!!!!!!!!!!!!!!!
  (  0D66  12 02 E4          )                      DUP
  (  0D69  12 02 44          )                      C@
  (  0D6C  12 0C E8          )                      EMIT
  (  0D6F  12 04 A8          )                      1+
                                 THEN,                              \ 0D61 --> 0D72  +++
  (  0D72  12 01 96 66 0D    )   NEXT             \ nex.     0D66   \ 0D72 --> 0D66  !!!!!!!!!!!!!!!!!!
  (  0D77  12 03 02          )                      DROP
  (  0D7A  22                )                      RET
  (  0D7B  00                )
  \ -------------------------------------------------------------------------------
  (  0D7C  58 0D             )                                                                    \  lfa= 0D7C
  (  0D7E  02 43 52          )     :  CR  ( -- )    doLIT    000a   emit                          \  cfa= 0D82
  (  0D82  12 01 7C 0D 00    )                      doLIT    000D
  (  0D87  12 0C E8          )                      EMIT
  (  0D8A  22                )                      RET
  (  0D8B  00                )
  \ -------------------------------------------------------------------------------
  (  0D8C  7E 0D             )                                                                    \  lfa= 0D8C
  (  0D8E  43 64 6F 24       )     :  do$  ( +n -- )                                        compile-only   \  cfa= 0D92
  (  0D92  12 02 84          )                      R>
  (  0D95  12 02 6A          )                      R@
  (  0D98  12 02 84          )                      R>
  (  0D9B  12 09 54          )                      COUNT
  (  0D9E  12 03 D2          )                      +
  (  0DA1  12 02 54          )                      >R
  (  0DA4  12 03 12          )                      SWAP
  (  0DA7  12 02 54          )                      >R
  (  0DAA  22                )                      RET
  (  0DAB  00                )

:.  R1=(T)b    1  t  r=(r)b  ;.
:.  R1=(T)b    7831  16,'    ;.    \ ??????????????????????????????????????
                                    t:  do$   ( -- a )                                                \ cfa=     57E0
  (  000057E0  04 3F 3E 60       )                  {dup}
  (  000057E4  00 98             )                  r0=R
  (  000057E6  46 1E             )                  T=R0-1
  (  000057E8  31 78             )                  R1=(T)b
  (  000057EA  09 18             )                  R1+R0
  (  000057EC  03 20             )                  R0=3
  (  000057EE  09 18             )                  R1+R0
  (  000057F0  21 EA 00 01       )                  R1nR0/
  (  000057F4  01 31             )                  R1+1
  (  000057F6  CD F8 00 10       )                  (rp)=R1
  (  000057FA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
  (  0DAC  8E 0D             )                                                                    \  lfa= 0DAC
  (  0DAE  43 24 22 7C       )     :  $"|                                          compile-only   \  cfa= 0DB2
  (  0DB2  12 0D 92          )                      do$
  (  0DB5  22                )                      RET

     ''  $"|  >mca
     ''  $"|  cfa'.of.$"|*   !.
     :.  $"|          $"|'*  ;.
  \ -------------------------------------------------------------------------------
  (  0DB6  AE 0D             )                                                                    \  lfa= 0DB6
  (  0DB8  43 2E 22 7C       )     :  ."|   ( -- )                                       compile-only   \  cfa= 0DBC
  (  0DBC  12 0D 92          )                      do$
  (  0DBF  12 09 54          )                      COUNT
  (  0DC2  12 0D 5E          )                      TYPE
  (  0DC5  22                )                      RET

     ''  ."|  >mca
     ''  ."|  cfa'.of.."|*    !.
     :.  ."|          ."|'*   ;.
  \ -------------------------------------------------------------------------------
  (  0DC6  B8 0D             )                                                                    \  lfa= 0DC6
  (  0DC8  02 2E 52          )     :  .R  ( n +n -- )                                                        \  cfa= 0DCC
  (  0DCC  12 02 54          )                      >R
  (  0DCF  12 0B 5C          )                      str
  (  0DD2  12 02 84          )                      R>
  (  0DD5  12 03 24          )                      OVER
  (  0DD8  12 03 E2          )                      -
  (  0DDB  12 0D 3E          )                      SPACES
  (  0DDE  12 0D 5E          )                      TYPE
  (  0DE1  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0DE2  C8 0D             )                                                                    \  lfa= 0DE2
  (  0DE4  03 55 2E 52       )     :  U.R   ( u +n -- )                                                      \  cfa= 0DE8
  (  0DE8  12 02 54          )                      >R
  (  0DEB  12 0A D0          )                      <#
  (  0DEE  12 0B 10          )                      #S
  (  0DF1  12 0B 42          )                      #>
  (  0DF4  12 02 84          )                      R>
  (  0DF7  12 03 24          )                      OVER
  (  0DFA  12 03 E2          )                      -
  (  0DFD  12 0D 3E          )                      SPACES
  (  0E00  12 0D 5E          )                      TYPE
  (  0E03  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0E04  E4 0D             )                                                                    \  lfa= 0E04
  (  0E06  02 55 2E          )     :  U.  ( u -- )                                                        \  cfa= 0E0A
  (  0E0A  12 0A D0          )                      <#
  (  0E0D  12 0B 10          )                      #S
  (  0E10  12 0B 42          )                      #>
  (  0E13  12 0D 2C          )                      SPACE
  (  0E16  12 0D 5E          )                      TYPE
  (  0E19  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0E1A  06 0E             )                                                                    \  lfa= 0E1A
  (  0E1C  01 2E             )     :  .  ( w -- )  \   .   $                                                \  cfa= 0E1E
  (  0E1E  12 06 24          )                      BASE
  (  0E21  12 02 1E          )                      @
  (  0E24  12 01 7C 0A 00    )                      doLIT    000A
  (  0E29  12 03 6C          )                      XOR
  (  0E2C  12 01 C4 35 0E    )   IF               \ ?branch  0E35   \ 0E2C --> 0E35  @@@@@@@@@@@@@@@@@@@@@
  (  0E31  12 0E 0A          )                      U.
  (  0E34  22                )                      RET
                                 THEN                               \ 0E2C --> 0E35  @@@@@@@@@@@@@@@@@@@@@
  (  0E35  12 0B 5C          )                      str
  (  0E38  12 0D 2C          )                      SPACE
  (  0E3B  12 0D 5E          )                      TYPE
  (  0E3E  22                )                      RET
  (  0E3F  00                )
  \ -------------------------------------------------------------------------------
  (  0E40  1C 0E             )                                                                    \  lfa= 0E40
  (  0E42  01 3F             )     :  ?   ( a -- )                                                        \  cfa= 0E44
  (  0E44  12 02 1E          )                      @
  (  0E47  12 0E 1E          )                      .
  (  0E4A  22                )                      RET
  (  0E4B  00                )
  \ -------------------------------------------------------------------------------
  (  0E4C  42 0E             )                                                                    \  lfa= 0E4C
  (  0E4E  05 70 61 72 73 65 )     :  pars.  ( b u c -- b u delta \ <string> )                                                     \  cfa= 0E54
  (  0E54  12 06 30          )                      tmp
  (  0E57  12 02 06          )                      !
  (  0E5A  12 03 24          )                      OVER
  (  0E5D  12 02 54          )                      >R
  (  0E60  12 02 E4          )                      DUP
  (  0E63  12 01 C4 11 0F    )   IF               \ ?branch  0F11 ) \ 0E63 --> 0F11  ------T+#
  (  0E68  12 04 B6          )                      1-
  (  0E6B  12 06 30          )                      tmp
  (  0E6E  12 02 1E          )                      @
  (  0E71  12 08 62          )                      BL
  (  0E74  12 04 46          )                      =
  (  0E77  12 01 C4 AE 0E    )     IF             \ ?branch  0EAE   \ 0E77 --> 0EAE  @@@@@@@@@@@@@@@@@@@@@
  (  0E7C  12 02 54          )                      >R
                                     BEGIN                          \ 0E99 --> 0E7F  +++
  (  0E7F  12 08 62          )                      BL
  (  0E82  12 03 24          )                      OVER
  (  0E85  12 02 44          )                      C@
  (  0E88  12 03 E2          )                      -
  (  0E8B  12 03 3A          )                      0<
  (  0E8E  12 03 F6          )                      NOT
  (  0E91  12 01 C4 AB 0E    )         IF,        \ ?branch  0EAB   \ 0E91 --> 0EAB  ------
  (  0E96  12 04 A8          )                      1+
  (  0E99  12 01 96 7F 0E    )       NEXT         \ nex.     0E7F   \ 0E99 --> 0E7F  +++
  (  0E9E  12 02 84          )                      R>
  (  0EA1  12 03 02          )                      DROP
  (  0EA4  12 08 6C          )                      0
  (  0EA7  12 02 E4          )                      DUP
  (  0EAA  22                )                      RET
                                       THEN,                        \ 0E91 --> 0EAB  ------
  (  0EAB  12 02 84          )                      R>
                                   THEN                             \ 0E77 --> 0EAE  @@@@@@@@@@@@@@@@@@@@@
  (  0EAE  12 03 24          )                      OVER
  (  0EB1  12 03 12          )                      SWAP
  (  0EB4  12 02 54          )                      >R
                                   BEGIN,                           \ 0EE2 --> 0EB7  ////////////
  (  0EB7  12 06 30          )                      tmp
  (  0EBA  12 02 1E          )                      @
  (  0EBD  12 03 24          )                      OVER
  (  0EC0  12 02 44          )                      C@
  (  0EC3  12 03 E2          )                      -
  (  0EC6  12 06 30          )                      tmp
  (  0EC9  12 02 1E          )                      @
  (  0ECC  12 08 62          )                      BL
  (  0ECF  12 04 46          )                      =
  (  0ED2  12 01 C4 DA 0E    )       IF           \ ?branch  0EDA   \ 0ED2 --> 0EDA  ------
  (  0ED7  12 03 3A          )                      0<
                                     THEN                           \ 0ED2 --> 0EDA  ------
  (  0EDA  12 01 C4 F2 0E    )         IF         \ ?branch  0EF2   \ 0EDA --> 0EF2  !!!!!!!!!!!!!!!!!!
  (  0EDF  12 04 A8          )                      1+
  (  0EE2  12 01 96 B7 0E    )     NEXT,           \ nex.    0EB7   \ 0EE2 --> 0EB7  ////////////
  (  0EE7  12 02 E4          )                      DUP
  (  0EEA  12 02 54          )                      >R
  (  0EED  12 01 E0 01 0F    )         ELSE       \ branch   0F01   \ 0EDA --> 0EF2  !!!!!!!!!!!!!!!!!!
  (  0EF2  12 02 84          )                      R>
  (  0EF5  12 03 02          )                      DROP
  (  0EF8  12 02 E4          )                      DUP
  (  0EFB  12 04 A8          )                      1+
  (  0EFE  12 02 54          )                      >R
                                       THEN                                                       \ 0EED --> 0F01  ===============
  (  0F01  12 03 24          )                      OVER
  (  0F04  12 03 E2          )                      -
  (  0F07  12 02 84          )                      R>
  (  0F0A  12 02 84          )                      R>
  (  0F0D  12 03 E2          )                      -
  (  0F10  22                )                      RET
                                 THEN                                                             \ 0E63 --> 0F11  ------
  (  0F11  12 03 24          )                      OVER
  (  0F14  12 02 84          )                      R>
  (  0F17  12 03 E2          )                      -
  (  0F1A  22                )                      RET
  (  0F1B  00                )
  \ -------------------------------------------------------------------------------
  (  0F1C  4E 0E             )                                                                    \  lfa= 0F1C
  (  0F1E  05 50 41 52 53 45 )     :  PARSE   ( c -- b u \ <string> )                                                    \  cfa= 0F24
  (  0F24  12 02 54          )                      >R
  (  0F27  12 09 8A          )                      TIB
  (  0F2A  12 06 4A          )                      >IN
  (  0F2D  12 02 1E          )                      @
  (  0F30  12 03 D2          )                      +
  (  0F33  12 06 58          )                      #TIB
  (  0F36  12 02 1E          )                      @
  (  0F39  12 06 4A          )                      >IN
  (  0F3C  12 02 1E          )                      @
  (  0F3F  12 03 E2          )                      -
  (  0F42  12 02 84          )                      R>
  (  0F45  12 0E 54          )                      pars.
  (  0F48  12 06 4A          )                      >IN
  (  0F4B  12 09 0C          )                      +!
  (  0F4E  22                )                      RET
  (  0F4F  00                )
  \ -------------------------------------------------------------------------------
  (  0F50  1E 0F             )                                                                    \  lfa= 0F50
  (  0F52  82 2E 28          )     :  .(                                 immediate                \  cfa= 0F56
  (  0F56  12 01 7C 29 00    )                      doLIT    0029
  (  0F5B  12 0F 24          )                      PARSE
  (  0F5E  12 0D 5E          )                      TYPE
  (  0F61  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0F62  52 0F             )                                                                    \  lfa= 0F62
  (  0F64  81 28             )     :  (        \    (     ~              immediate                \  cfa= 0F66
                                                    doLIT    0029
                                                    PARSE
                                                    2DROP
                                                    RET

:.  (     MULTI-LINE?
          IF.      ')'   _COMMENT
          ELSE.    ')'   PARSE.      2DROP.
          THEN.    ;.    IMMEDIATE.
  \ -------------------------------------------------------------------------------
  (  0F72  64 0F             )                                                                    \  lfa= 0F72
  (  0F74  81 5C             )     :   &   ( & \ )                       immediate                (  cfa= 0F76 )
  (  0F76  12 06 58          )                      #TIB
  (  0F79  12 02 1E          )                      @
  (  0F7C  12 06 4A          )                      >IN
  (  0F7F  12 02 06          )                      !
  (  0F82  22                )                      RET
  (  0F83  00                )

     '\'   ''  &   CFA'>NFA'(ADJACENT)   1+.  c!'     \  while decompling it is displayed as & ,  SUCH AS SEE &
  \ -------------------------------------------------------------------------------
  (  0F84  74 0F             )                                                                    \  lfa= 0F84
  (  0F86  04 43 48 41 52    )     :  CHAR  ( -- c )                                                      \  cfa= 0F8C
  (  0F8C  12 08 62          )                      BL
  (  0F8F  12 0F 24          )                      PARSE
  (  0F92  12 03 02          )                      DROP
  (  0F95  12 02 44          )                      C@
  (  0F98  22                )                      RET
  (  0F99  00                )
  \ -------------------------------------------------------------------------------
  (  0F9A  86 0F             )                                                                    \  lfa= 0F9A
  (  0F9C  05 54 4F 4B 45 4E )     :  TOKEN  ( -- a \ <string> )                                                     \  cfa= 0FA2
  (  0FA2  12 08 62          )                      BL
  (  0FA5  12 0F 24          )                      PARSE
  (  0FA8  12 01 7C 1F 00    )                      doLIT    001F
  (  0FAD  12 07 48          )                      MIN
  (  0FB0  12 06 CA          )                      CP
  (  0FB3  12 02 1E          )                      @
  (  0FB6  12 04 DC          )                      ALIGNED   \ [push.LR]   \ ?????????
  (  0FB9  12 04 78          )                      CELL+
  (  0FBC  12 0A 4E          )                      PACK$
  (  0FBF  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  0FC0  9C 0F             )                                                                    \  lfa= 0FC0
  (  0FC2  04 57 4F 52 44    )   t:  WORD  ( c -- a \ <string> )         push.LR                                       \  cfa= 0FC8
  (  0FC8  12 0F 24          )                      PARSE
  (  0FCB  12 09 6A          )                      HERE
  (  0FCE  12 0A 51          )                      pack$+8   \   '' PACK$  4 +.  ,doLIT*+#   CALL   \ ??????? --> push.LR
  (  0FD1  22                )                      RET
  \ -------------------------------------------------------------------------------
\ head.adjacent.to.cfa?  @.
\ #if
  (  0FD2  C2 0F             )                                                                    \  lfa= 0FD2
  (  0FD4  05 4E 41 4D 45 3E )     :  NAME>   ( na -- ca )                                                    \  cfa= 0FDA
  (  0FDA  12 09 54          )                      COUNT
  (  0FDD  12 01 7C 1F 00    )                      doLIT    001F
  (  0FE2  12 03 4C          )                      AND
  (  0FE5  12 03 D2          )                      +
  (  0FE8  12 04 DC          )                      ALIGNED
  (  0FEB  22                )                      RET
\  \ ------------------------------------------------------------------------
\ #else                                             \ head and cfa are seperated.
\                                    t:  NAME>   ( nfa -- cfa )                                          \ cfa=     5B04
\  (  00005B04  00 B5             )                  push.LR
\  (  00005B06  04 3F 3E 60       )                  {dup}
\  (  00005B0A  08 26             )                  T=8
\  (  00005B0C  FF F7 C0 FA       )                  -       \ pcfa                                      \      5090
\  (  00005B10  36 68             )                  {@}     \  cfa
\  (  00005B12  00 BD             )                  ret
\ #then
  \ -------------------------------------------------------------------------------

   t:  >UPC(2BYTE)       (.n.--.n.)  push.LR   3 ...*
       for  0 ...*  100 ...*  um/mod   next    3 ...*
       for  8 ...*         lshift  +   next       ret


    :  @.>UPC(2BYTE)     @ >UPC(2BYTE)   ret    \ actually 4 byte

  (  0FEC  D4 0F             )                                                                    \  lfa= 0FEC
  (  0FEE  05 53 41 4D 45 3F )     :  SAME?  ( a a u -- a a f \ -0+ )                                                     \  cfa= 0FF4
  (  0FF4  12 02 54          )                      >R
  (  0FF7  12 01 E0 2C 10    )   AHEAD,            \ branch   102C  \ 0FF7 --> 102C  *********
                                   BEGIN                            \ 102C --> 0FFC  +++
  (  0FFC  12 03 24          )                      OVER
  (  0FFF  12 02 6A          )                      R@
  (  1002  12 04 9A          )                      CELLS
  (  1005  12 03 D2          )                      +
                                case.sensitive?  @.
                                #if
  (  1008  12 1D A4          )                      @      \   @.>UPC(2BYTE)
                                #else
                                                               @.>UPC(2BYTE)
                                #then
  (  100B  12 03 24          )                      OVER
  (  100E  12 02 6A          )                      R@
  (  1011  12 04 9A          )                      CELLS
  (  1014  12 03 D2          )                      +
                                case.sensitive?  @.
                                #if
  (  1017  12 1D A4          )                      @      \  @.>UPC(2BYTE)
                                #else
                                                              @.>UPC(2BYTE)
                                #then
  (  101A  12 03 E2          )                      -
  (  101D  12 02 F4          )                      ?DUP
  (  1020  12 01 C4 2C 10    )       IF           \ ?branch  102C   \ 1020 --> 102C  ------
  (  1025  12 02 84          )                      R>
  (  1028  12 03 02          )                      DROP
  (  102B  22                )                      RET
                                     THEN                           \ 1020 --> 102C  ------
                                 THEN,                              \ 0FF7 --> 102C  *********
  (  102C  12 01 96 FC 0F    )   NEXT             \ nex.     0FFC   \ 102C --> 0FFC  +++
  (  1031  12 08 6C          )                      0  ...*
  (  1034  22                )                      RET
  (  1035  00                )
  \ -------------------------------------------------------------------------------
                                    t:  >upc                                                   \ cfa=     5B20
  (  00005B20  60 2E             )                  T:61
  (  00005B22  03 D4             )      if'n=0 \ n=1? mi?              \ 00005B22 --> 00005B2C --------------------
  (  00005B24  7B 2E             )                  T:7B
  (  00005B26  01 D5             )        if'n=1  \ n=0? pl?            \ 00005B26 --> 00005B2C ------------------------
  (  00005B28  06 F0 DF 06       )                  Tn0DF
                                          then'                      \ 00005B26 --> 00005B2C ------------------------
                                        then'
  (  00005B2C  70 47             )                  ret'


    :  SWAP.100./MOD.>UPC.100.*.+.AND     SWAP 100 /MOD >UPC 100 * + AND   RET
    :  100./MOD.>UPC.100.*.+.XOR          100 /MOD >UPC 100 * + XOR        RET



  (  1036  EE 0F             )                                                                    \  lfa= 1036
  (  1038  04 66 69 6E 64    )     :  find   ( a va -- ca na, a F )                                                     \  cfa= 103E
  (  103E  12 03 12          )                      SWAP
  (  1041  12 02 E4          )                      DUP
  (  1044  12 02 44          )                      C@
  (  1047  12 04 C6          )                      {cell/}  \  2/   ?????????
  (  104A  12 06 30          )                      tmp
  (  104D  12 02 06          )                      !
  (  1050  12 02 E4          )                      DUP
  (  1053  12 02 1E          )                      @
  (  1056  12 02 54          )                      >R
  (  1059  12 04 78          )                      CELL+
  (  105C  12 03 12          )                      SWAP
                                 BEGIN                              \ 10BA --> 105F  ////////////
  (  105F  12 02 1E          )                      @
  (  1062  12 02 E4          )                      DUP
  (  1065  12 01 C4 9F 10    )     IF             \ ?branch  109F   \ 1065 --> 109F  ////////////
  (  106A  12 02 E4          )                      DUP
  (  106D  12 02 1E          )                      @
  (  1070  12 01 7C 1F 7F    )                      doLIT    7f7f7f1f  \  7fffff1f \ ????  \  7F1F  ?????????
                               case.sensitive?  @.
                               #if
  (  1075  12 1D E8          )                      and \    SWAP.100./MOD.>UPC.100.*.+.AND
                               #else                         SWAP.100./MOD.>UPC.100.*.+.AND

                               #then

  (  1078  12 02 6A          )                      R@
                               case.sensitive?  @.
                               #if
  (  107B  12 1E 10          )                      xor \       100./MOD.>UPC.100.*.+.XOR
                               #else                            100./MOD.>UPC.100.*.+.XOR

                               #then

  (  107E  12 01 C4 8E 10    )       IF           \ ?branch  108E   \ 107E --> 108E  ===============
  (  1083  12 04 78          )                      CELL+
  (  1086  12 08 9E          )                      -1
  (  1089  12 01 E0 9A 10    )       ELSE         \ branch   109A   \ 107E --> 108E  ===============@@@@@@
  (  108E  12 04 78          )                      CELL+
  (  1091  12 06 30          )                      tmp
  (  1094  12 02 1E          )                      @
  (  1097  12 0F F4          )                      SAME?
                                     THEN                           \ 1089 --> 109A  @@@@@@@@@@@@@@@@@@@@@
  (  109A  12 01 E0 AF 10    )     ELSE           \ branch   10AF   \ 1065 --> 109F  ////////////
  (  109F  12 02 84          )                      R>
  (  10A2  12 03 02          )                      DROP
  (  10A5  12 03 12          )                      SWAP
  (  10A8  12 04 88          )                      CELL-
  (  10AB  12 03 12          )                      SWAP
  (  10AE  22                )                      RET
                                   THEN                         \ 109A --> 10AF  *********
  (  10AF  12 01 C4 BF 10    )   WHILE            \ ?branch  10BF   \ 10AF --> 10BF  ===============
  (  10B4  12 04 88          )                      CELL-
  (  10B7  12 04 88          )                      CELL-
  (  10BA  12 01 E0 5F 10    )   REPEAT           \ branch   105F   \ 10AF --> 10BF  ===============
  (  10BF  12 02 84          )                      R>
  (  10C2  12 03 02          )                      DROP
  (  10C5  12 03 12          )                      SWAP
  (  10C8  12 03 02          )                      DROP
  (  10CB  12 04 88          )                      CELL-
  (  10CE  12 02 E4          )                      DUP
  (  10D1  12 0F DA          )                      NAME>
  (  10D4  12 03 12          )                      SWAP
  (  10D7  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  10D8  38 10             )                                                                    \  lfa= 10D8
  (  10DA  05 4E 41 4D 45 3F )     :  NAME?  ( a -- ca na, a F )                                                     \  cfa= 10E0
  (  10E0  12 06 AE          )                      CONTEXT
  (  10E3  12 02 E4          )                      DUP
  (  10E6  12 09 3C          )                      2@
  (  10E9  12 03 6C          )                      XOR
  (  10EC  12 01 C4 F4 10    )   IF               \ ?branch  10F4   \ 10EC --> 10F4  @@@@@@@@@@@@@@@@@@@@@
  (  10F1  12 04 88          )                      CELL-
                                 THEN                               \ 10EC --> 10F4  @@@@@@@@@@@@@@@@@@@@@
  (  10F4  12 02 54          )                      >R
                                 BEGIN                              \ 1114 --> 10F7  +++
  (  10F7  12 02 84          )                      R>
  (  10FA  12 04 78          )                      CELL+
  (  10FD  12 02 E4          )                      DUP
  (  1100  12 02 54          )                      >R
  (  1103  12 02 1E          )                      @
  (  1106  12 02 F4          )                      ?DUP     
  (  1109  12 01 C4 20 11    )     IF,            \ ?branch  1120   \ 1109 --> 1120  *********
  (  110E  12 10 3E          )                      find
  (  1111  12 02 F4          )                      ?DUP
  (  1114  12 01 C4 F7 10    )   UNTIL            \ ?branch  10F7   \ 1114 --> 10F7  +++
  (  1119  12 02 84          )                      R>
  (  111C  12 03 02          )                      DROP
  (  111F  22                )                      RET
                                   THEN,                            \ 1109 --> 1120  *********
  (  1120  12 02 84          )                      R>
  (  1123  12 03 02          )                      DROP
  (  1126  12 08 6C          )                      0   ...*   
  (  1129  22                )                      RET



comment:
                                t:  NAME?   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )    push.LR   cfa= CEAE
  (  CEAE  B0 12 7C C2       )                  CONTEXT
  (  CEB2  B0 12 1A C1       )                  {@}
                                begin'.
  (  CEB6  04 93             )                  T  R:0
  (  CEB8  20 24             )        if'z=0  \ CEFA  z=1?''
  (  CEBA  B0 12 B2 C1       )                  {over}
  (  CEBE  B0 12 1A C1       )                  {c@}         DOLIT:     1F ( 7F1F )   {and}   \ the next byte can    be 00~FF
  (  CEC2  B0 12 B2 C1       )                  {over}        \ ^^^^^^^^^^^^^^^^^^^^^^^ without it, the next byte should be 00~FF
  (  CEC6  B0 12 1A C1       )                  {c@}
  (  CECA  B0 12 A6 C0 1F 7F )                  DOLIT:   1F \   7F1F    \ mainly to test length, the next byte can    be 00~FF
  (  CED0  B0 12 D4 C1       )                  {and}
  (  CED4  B0 12 AA C3       )                  =
  (  CED8  B0 12 F0 C0 E8 CE )        if#   \     CEE8
  (  CEDE  B0 12 82 CE       )                  SAME?
  (  CEE2  B0 12 F0 C0 EE CE )     if#    \     CEEE
  (  CEE8  24 83             )  swap. then#                 T  4 r-#    \ lfa
  (  CEEA  24 44             )                       T      T  R=(R)    \ next.nfa
  (  CEEC  E4 3F             )  again'.
  (  CEEE  85 44 00 00       )     then#        sp     T  (R)=R
  (  CEF2  B0 12 6A CE       )                  NAME>
  (  CEF6  30 40 A0 C1       )                  {swap}
  (  CEFA  30 41             )        then'     ret
comment;

                                t:  NAME?'''   ( nfa.to.test -- cfa nfa / nfa.to.test 0 )    push.LR   cfa= CEAE
  (  CEAE  B0 12 7C C2       )                  CONTEXT
  (  CEB2  B0 12 1A C1       )                  {@}
                                begin'.
  (  CEB6  04 93             )                  T  R:0
  (  CEB8  20 24             )        if'z=0  \ CEFA  z=1?''
  (  CEBA  B0 12 B2 C1       )                  {over}
  (  CEBE  B0 12 1A C1       )                  {c@}         DOLIT:     1F ( 7F1F )   {and}   \ the next byte can    be 00~FF
  (  CEC2  B0 12 B2 C1       )                  {over}        \ ^^^^^^^^^^^^^^^^^^^^^^^ without it, the next byte should be 00~FF
  (  CEC6  B0 12 1A C1       )                  {c@}
  (  CECA  B0 12 A6 C0 1F 7F )                  DOLIT:   1F \   7F1F    \ mainly to test length, the next byte can    be 00~FF
  (  CED0  B0 12 D4 C1       )                  {and}
  (  CED4  B0 12 AA C3       )                  =
  (  CED8  B0 12 F0 C0 E8 CE )        if#   \     CEE8
  (  CEDE  B0 12 82 CE       )                  SAME?
  (  CEE2  B0 12 F0 C0 EE CE )     if#    \     CEEE
  (  CEE8  24 83             )  swap. then#                 T  4 r-#    \ lfa
  (  CEEA  24 44             )                       T      T  R=(R)    \ next.nfa
  (  CEEC  E4 3F             )  again'.
  (  CEEE  85 44 00 00       )     then#        sp     T  (R)=R
  (  CEF2  B0 12 6A CE       )                  NAME>
  (  CEF6  30 40 A0 C1       )                  {swap}
  (  CEFA  30 41             )        then'     ret


















  \ -------------------------------------------------------------------------------
  (  1930  CE 18             )                                                                    \  lfa= 1930
  (  1932  02 2E 53          )     :  .S      \ .S                                                \  cfa= 1936
  (  1936  12 0D 82          )                      CR
  (  1939  12 08 DE          )                      DEPTH
  (  193C  12 02 54          ) (  1>  )             >R
  (  193F  12 01 E0 4D 19    )   AHEAD,           \ branch   194D   \ 193F --> 194D  ===============
                                   BEGIN                            \ 194D --> 1944  *********
  (  1944  12 02 6A          )                      R@
  (  1947  12 08 F6          )                      PICK
  (  194A  12 0E 1E          )                      .
                                 THEN,                              \ 193F --> 194D  ===============
  (  194D  12 01 96 44 19    )     NEXT           \ nex.     1944   \ 194D --> 1944  *********
  (  1952  12 0D BC          )                 \     ."|  <sp"
  (  195A  22                )                      RET
  (  195B  00                )
  \ -------------------------------------------------------------------------------

debug?  @.
#if
: TP1   cr   ." TP1"     .s  ;
: TP2   cr   ." TP2"     .s  ;
: TP3   cr   ." TP3"     .s  ;
: TP4   cr   ." TP4"     .s  ;
: TP5   cr   ." TP5"     .s  ;
: TP6   cr   ." TP6"     .s  ;
: TP7   cr   ." TP7"     .s  ;
: TP8   cr   ." TP8"     .s  ;
: TP9   cr   ." TP9"     .s  ;
: TP10  cr   ." TP10"    .s  ;
: TP11  cr   ." TP11"    .s  ;
: TP12  cr   ." TP12"    .s  ;
: TP13  cr   ." TP13"    .s  ;
: TP14  cr   ." TP14"    .s  ;
: TP15  cr   ." TP15"    .s  ;
: TP16  cr   ." TP16"    .s  ;
: TP17  cr   ." TP17"    .s  ;
: TP18  cr   ." TP18"    .s  ;
: TP19  cr   ." TP19"    .s  ;
: TP20  cr   ." TP20"    .s  ;
: TP21  cr   ." TP21"    .s  ;
: TP22  cr   ." TP22"    .s  ;
: TP23  cr   ." TP23"    .s  ;
: TP24  cr   ." TP24"    .s  ;
: TP25  cr   ." TP25"    .s  ;
: TP26  cr   ." TP26"    .s  ;
: TP27  cr   ." TP27"    .s  ;
: TP28  cr   ." TP28"    .s  ;
: TP29  cr   ." TP29"    .s  ;
: TP30  cr   ." TP30"    .s  ;
: TP31  cr   ." TP31"    .s  ;
: TP32  cr   ." TP32"    .s  ;
: TP33  cr   ." TP33"    .s  ;
: TP34  cr   ." TP34"    .s  ;
: TP35  cr   ." TP35"    .s  ;
: TP36  cr   ." TP36"    .s  ;
: TP37  cr   ." TP37"    .s  ;
: TP38  cr   ." TP38"    .s  ;
: TP39  cr   ." TP39"    .s  ;
: TP40  cr   ." TP40"    .s  ;
: TP41  cr   ." TP41"    .s  ;
: TP42  cr   ." TP42"    .s  ;
: TP43  cr   ." TP43"    .s  ;
: TP44  cr   ." TP44"    .s  ;
: TP45  cr   ." TP45"    .s  ;
: TP46  cr   ." TP46"    .s  ;
: TP47  cr   ." TP47"    .s  ;
: TP48  cr   ." TP48"    .s  ;
: TP49  cr   ." TP49"    .s  ;
: TP50  cr   ." TP50"    .s  ;
: TP51  cr   ." TP51"    .s  ;

#else
:. tp1    ;.
:. tp2    ;.
:. tp3    ;.
:. tp4    ;.
:. tp5    ;.
:. tp6    ;.
:. tp7    ;.
:. tp8    ;.
:. tp9    ;.
:. tp10   ;.
:. tp11   ;.
:. tp12   ;.
:. tp13   ;.
:. tp14   ;.
:. tp15   ;.
:. tp16   ;.
:. tp17   ;.
:. tp18   ;.
:. tp19   ;.
:. tp20   ;.
:. tp21   ;.
:. tp22   ;.
:. tp23   ;.
:. tp24   ;.
:. tp25   ;.
:. tp26   ;.
:. tp27   ;.
:. tp28   ;.
:. tp29   ;.
:. tp30   ;.
:. tp31   ;.
:. tp32   ;.
:. tp33   ;.
:. tp34   ;.
:. tp35   ;.
:. tp36   ;.
:. tp37   ;.
:. tp38   ;.
:. tp39   ;.
:. tp40   ;.
:. tp41   ;.
:. tp42   ;.
:. tp43   ;.
:. tp44   ;.
:. tp45   ;.
:. tp46   ;.
:. tp47   ;.
:. tp48   ;.
:. tp49   ;.
:. tp50   ;.
:. tp51   ;.
#then











  \ -------------------------------------------------------------------------------
  (  112A  DA 10             )                                                                    \  lfa= 112A
  (  112C  02 5E 48          )     :  ^H   ( b b b -- b b b )                                                       \  cfa= 1130
  (  1130  12 02 54          )                      >R        
  (  1133  12 03 24          )                      OVER
  (  1136  12 02 84          )                      R>
  (  1139  12 03 12          )                      SWAP
  (  113C  12 03 24          )                      OVER
  (  113F  12 03 6C          )                      XOR
  (  1142  12 01 C4 69 11    )   IF               \ ?branch  1169   \ 1142 --> 1169  @@@@@@@@@@@@@@@@@@@@@
  (  1147  12 01 7C 08 00    )                      doLIT    0008
  (  114C  12 06 06          )                      'ECHO
  (  114F  12 09 A0          )                      @EXECUTE
  (  1152  12 04 B6          )                      1-
  (  1155  12 08 62          )                      BL
  (  1158  12 06 06          )                      'ECHO
  (  115B  12 09 A0          )                      @EXECUTE
  (  115E  12 01 7C 08 00    )                      doLIT    0008
  (  1163  12 06 06          )                      'ECHO
  (  1166  12 09 A0          )                      @EXECUTE
                                 THEN                               \ 1142 --> 1169  @@@@@@@@@@@@@@@@@@@@@
  (  1169  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  116A  2C 11             )                                                                    \  lfa= 116A
  (  116C  03 54 41 50       )     :  TAP   ( bot eot cur key -- bot eot cur )                                                      \  cfa= 1170
  (  1170  12 02 E4          )                      DUP
  (  1173  12 06 06          )                      'ECHO       tp21   \ 20008080 200080D0 20008080 37 37 20002128 \ @ --> 9204
  (  1176  12 09 A0          )                      @EXECUTE    tp23   \ 20008080 200080D0 20008080 37
  (  1179  12 03 24          )                      OVER
  (  117C  12 02 2E          )                      C!
  (  117F  12 04 A8          )                      1+          tp24
  (  1182  22                )                      RET
  (  1183  00                )
  \ -------------------------------------------------------------------------------
  (  1184  6C 11             )                                                                    \  lfa= 1184
  (  1186  04 6B 54 41 50    )     :  kTAP   ( bot eot cur key -- bot eot cur )                                                     \  cfa= 118C
  (  118C  12 02 E4          )                      DUP
  (  118F  12 01 7C 0D 00    )                      doLIT    000D
  (  1194  12 03 6C          )                      XOR
  (  1197  12 01 C4 B4 11    )   IF               \ ?branch  11B4   \ 1197 --> 11B4  !!!!!!!!!!!!!!!!!!
  (  119C  12 01 7C 08 00    )                      doLIT    0008
  (  11A1  12 03 6C          )                      XOR
  (  11A4  12 01 C4 B0 11    )     IF             \ ?branch  11B0   \ 11A4 --> 11B0  +++
  (  11A9  12 08 62          )                      BL
  (  11AC  12 11 70          )                      TAP
  (  11AF  22                )                      RET
                                   THEN                               \ 11A4 --> 11B0  +++
  (  11B0  12 11 30          )                      ^H
  (  11B3  22                )                      RET
                                 THEN                               \ 1197 --> 11B4  !!!!!!!!!!!!!!!!!!
  (  11B4  12 03 02          )                      DROP
  (  11B7  12 03 12          )                      SWAP
  (  11BA  12 03 02          )                      DROP
  (  11BD  12 02 E4          )                      DUP
  (  11C0  12 0D 2C          )                      SPACE
  (  11C3  22                )                      RET

  ''  kTAP    cfa'.of.kTAP*  !.























  
  \ -------------------------------------------------------------------------------
  (  11C4  86 11             )                                                                    \  lfa= 11C4
  (  11C6  06 61 63 63 65 70 )     :  accept     ( b u -- b u )                                                  \  cfa= 11CE
  (  11CE  12 03 24          )                      OVER
  (  11D1  12 03 D2          )                      +
  (  11D4  12 03 24          )                      OVER
                                 BEGIN                              \ 1206 --> 11D7  ===============
  (  11D7  12 03 BC          )                      2DUP
  (  11DA  12 03 6C          )                      XOR
  (  11DD  12 01 C4 0B 12    )   WHILE            \ ?branch  120B   \ 11DD --> 120B  ------
  (  11E2  12 0C D6          )                      KEY      tp15
  (  11E5  12 02 E4          )                      DUP
  (  11E8  12 08 62          )                      BL              tp16
  (  11EB  12 01 7C 7F 00    )                      doLIT    007F
  (  11F0  12 07 68          )                      WITHIN          tp17
  (  11F3  12 01 C4 00 12    )     IF             \ ?branch  1200   \ 11F3 --> 1200  !!!!!!!!!!!!!!!!!!
  (  11F8  12 11 70          )                      TAP             tp18
  (  11FB  12 01 E0 06 12    )     ELSE           \ branch   1206   \ 11F3 --> 1200  !!!!!!!!!!!!!!!!!!
  (  1200  12 05 F8          )                      'TAP            tp19
  (  1203  12 09 A0          )                      @EXECUTE        tp20
                                   THEN                             \ 11FB --> 1206  !!!!!!!!!!!!!!!!!!
  (  1206  12 01 E0 D7 11    )   REPEAT           \ branch   11D7   \ 11DD --> 120B  ------=========
  (  120B  12 03 02          )                      DROP
  (  120E  12 03 24          )                      OVER
  (  1211  12 03 E2          )                      -
  (  1214  22                )                      RET
  (  1215  00                )

  ''  accept     cfa'.of.accept*  !.
  \ -------------------------------------------------------------------------------
  (  1216  C6 11             )                                                                    \  lfa= 1216
  (  1218  06 45 58 50 45 43 )     :  EXPECT    ( b u -- )                                                   \  cfa= 1220
  (  1220  12 05 EA          )                      'EXPECT
  (  1223  12 09 A0          )                      @EXECUTE
  (  1226  12 06 3E          )                      SPAN
  (  1229  12 02 06          )                      !
  (  122C  12 03 02          )                      DROP
  (  122F  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1230  18 12             )                                                                    \  lfa= 1230
  (  1232  05 51 55 45 52 59 )     :  QUERY    ( -- )   \  tib                                              \  cfa= 1238
  (  1238  12 09 8A          )                      TIB             tp10
  (  123B  12 01 7C 50 00    )                      doLIT    0050
  (  1240  12 05 EA          )                      'EXPECT         tp11      \  accept
  (  1243  12 09 A0          )                      @EXECUTE        tp12
  (  1246  12 06 58          )                      #TIB            tp13
  (  1249  12 02 06          )                      !
  (  124C  12 03 02          )                      DROP
  (  124F  12 08 6C          )                      0
  (  1252  12 06 4A          )                      >IN             tp14
  (  1255  12 02 06          )                      !
  (  1258  22                )                      RET
  (  1259  00                )
  \ -------------------------------------------------------------------------------
  (  125A  32 12             )                                                                    \  lfa= 125A
  (  125C  05 43 41 54 43 48 )     :  CATCH  ( ca -- err#/0 )                                                     \  cfa= 1262
  (  1262  12 02 C2          )                      SP@
  (  1265  12 02 54          )                      >R
  (  1268  12 06 9E          )                      HANDLER
  (  126B  12 02 1E          )                      @
  (  126E  12 02 54          )                      >R
  (  1271  12 02 9A          )                      RP@
  (  1274  12 06 9E          )                      HANDLER
  (  1277  12 02 06          )                      !
  (  127A  12 01 F6          )                      EXECUTE         \  .OK
  (  127D  12 02 84          )                      R>
  (  1280  12 06 9E          )                      HANDLER
  (  1283  12 02 06          )                      !
  (  1286  12 02 84          )                      R>
  (  1289  12 03 02          )                      DROP
  (  128C  12 08 6C          )                      0
  (  128F  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1290  5C 12             )                                                                    \  lfa= 1290
  (  1292  05 54 48 52 4F 57 )     :  THROW   ( err# -- err# )                                                    \  cfa= 1298
  (  1298  12 06 9E          )                      HANDLER
  (  129B  12 02 1E          )                      @
  (  129E  12 02 AE          )                      RP!
  (  12A1  12 02 84          )                      R>
  (  12A4  12 06 9E          )                      HANDLER
  (  12A7  12 02 06          )                      !
  (  12AA  12 02 84          )                      R>
  (  12AD  12 03 12          )                      SWAP
  (  12B0  12 02 54          )                      >R
  (  12B3  12 02 D4          )                      SP!
  (  12B6  12 03 02          )                      DROP
  (  12B9  12 02 84          )                      R>
  (  12BC  22                )                      RET
  (  12BD  00                )
  \ -------------------------------------------------------------------------------
  (  12BE  92 12             )                                                                    \  lfa= 12BE
  (  12C0  05 4E 55 4C 4C 24 )     :  NULL$                                                       \  cfa= 12C6
  (  12C6  12 05 7A 00 00    )                      doVAR    0000
  (  12CB  63 6F 79          ) \   00000000  32,'          \    `   R6Fx79  \ coyote ???  \ GRAPHIC.CHAR.SCALING
  (  12CE  6F                ) \   00000000  32,'          \    `   AxR7
  (  12CF  74 65             ) \   00000000  32,'          \    `   A=65
  (  12D1  00                )
  \ -------------------------------------------------------------------------------
  (  12D2  C0 12             )                                                                    \  lfa= 12D2
  (  12D4  05 41 42 4F 52 54 )     :  ABORT   ( -- )                                                    \  cfa= 12DA
  (  12DA  12 12 C6          )                      NULL$
  (  12DD  12 12 98          )                      THROW
  \ -------------------------------------------------------------------------------
  (  12E0  D4 12             )                                                                    \  lfa= 12E0
  (  12E2  46 61 62 6F 72 74 )     :  abor."   ( f -- )                                    compile-only   \  cfa= 12EA
  (  12EA  12 01 C4 FB 12    )   IF               \ ?branch  12FB   \ 12EA --> 12FB  @@@@@@@@@@@@@@@@@@@@@
  (  12EF  12 0D 92          )                      do$
  (  12F2  12 09 54          )                      COUNT
  (  12F5  12 0D 5E          )                      TYPE
  (  12F8  12 12 DA          )                      ABORT
                                 THEN                               \ 12EA --> 12FB  @@@@@@@@@@@@@@@@@@@@@
  (  12FB  12 0D 92          )                      do$
  (  12FE  12 03 02          )                      DROP
  (  1301  22                )                      RET

     ''  abor."  >mca
     ''  abor."  cfa'.of.abor."*   !.
     :.  abor."          abor."'*  ;.
  \ -------------------------------------------------------------------------------
  (  1302  E2 12             )                                                                    \  lfa= 1302
  (  1304  0A 24 49 4E 54 45 )     :  $INTERPRET   ( a -- )                                               \  cfa= 1310
  (  1310  12 10 E0          )                      NAME?
  (  1313  12 02 F4          )                      ?DUP
  (  1316  12 01 C4 3B 13    )   IF               \ ?branch  133B ) \ 1316 --> 133B  *********
  (  131B  12 02 1E          )                      @
  (  131E  12 01 7C 40 00    )                      doLIT    0040
  (  1323  12 03 4C          )                      AND
  (  1326  12 12 EA          )                      abor."  compile only"
  (  1337  12 01 F6          )                      EXECUTE
  (  133A  22                )                      RET
                                 THEN                               \ 1316 --> 133B  *********
  (  133B  12 06 82          )                      'NUMBER
  (  133E  12 09 A0          )                      @EXECUTE
  (  1341  12 01 C4 47 13    )   IF               \ ?branch  1347   \ 1341 --> 1347  ------
  (  1346  22                )                      RET
                                 THEN                               \ 1341 --> 1347  ------
  (  1347  12 12 98          )                      THROW

     ''  $INTERPRET  cfa'.of.$INTERPRET*   !.
  \ -------------------------------------------------------------------------------
  (  134A  04 13             )                                                                    \  lfa= 134A
  (  134C  81 5B             )     :  [    ( -- )                           immediate                   \  cfa= 134E
  (  134E  12 01 7C 10 13    )                    ( doLIT    1310 )   cfa'.of.$INTERPRET*  ,doLIT*+(#)
  (  1353  12 06 72          )                      'EVAL
  (  1356  12 02 06          )                      !          
  (  1359  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  135A  4C 13             )                                                                    \  lfa= 135A
  (  135C  03 2E 4F 4B       )     :  .OK   ( -- )                                                       \  cfa= 1360
  (  1360  12 01 7C 10 13    )                    ( doLIT    1310 )   cfa'.of.$INTERPRET*  ,doLIT*+(#)
  (  1365  12 06 72          )                      'EVAL
  (  1368  12 02 1E          )                      @
  (  136B  12 04 46          )                      =
  (  136E  12 01 C4 7A 13    )   IF               \ ?branch  137A   \ 136E --> 137A  @@@@@@@@@@@@@@@@@@@@@
  (  1373  12 0D BC          )                      ."|  OK "
                                 THEN                               \ 136E --> 137A  @@@@@@@@@@@@@@@@@@@@@
  (  137A  12 0D 82          )                      CR
  (  137D  22                )                      RET

  ''  .OK       cfa'.of..OK*  !.
  \ -------------------------------------------------------------------------------
  (  137E  5C 13             )                                                                    \  lfa= 137E
  (  1380  06 3F 53 54 41 43 )     :  ?STACK   ( -- )                                                    \  cfa= 1388
  (  1388  12 08 DE          )                      DEPTH
  (  138B  12 03 3A          )                      0<
  (  138E  12 12 EA          )                      abor."  underflow??"
  (  139C  22                )                      RET
  (  139D  00                )
  \ -------------------------------------------------------------------------------
  (  139E  80 13             )                                                                    \  lfa= 139E
  (  13A0  04 45 56 41 4C    )     :  EVAL    ( -- )                                                    \  cfa= 13A6
                                 BEGIN                              \ 13BD --> 13A6  ////////////
  (  13A6  12 0F A2          )                      TOKEN
  (  13A9  12 02 E4          )                      DUP
  (  13AC  12 02 44          )                      C@
  (  13AF  12 01 C4 C2 13    )   WHILE            \ ?branch  13C2 ) \ 13AF --> 13C2  ////////////
  (  13B4  12 06 72          )                      'EVAL
  (  13B7  12 09 A0          )                      @EXECUTE
  (  13BA  12 13 88          )                      ?STACK
  (  13BD  12 01 E0 A6 13    )   REPEAT           \ branch   13A6 ) \ 13AF --> 13C2  ////////////
  (  13C2  12 03 02          )                      DROP
  (  13C5  12 06 16          )                      'PROMPT
  (  13C8  12 09 A0          )                      @EXECUTE
  (  13CB  22                )                      RET

  ''  EVAL     cfa'.of.EVAL*  !.
  \ -------------------------------------------------------------------------------
  (  13CC  A0 13             )                                                                    \  lfa= 13CC
  (  13CE  06 50 52 45 53 45 )     :  PRESET  ( -- )                                                     \  cfa= 13D6
  (  13D6  12 05 B2          )                      SP0
  (  13D9  12 02 1E          )                      @
  (  13DC  12 02 D4          )                      SP!
\ (  13DF  12 01 7C 80 80    )                    ( doLIT    20018080 )  content.of.'tib* ( 20004E00 )  ,doLIT*+(#)
                                                                         content.of.'tib*  @. ...
  (  13E4  12 06 58          )                      #TIB
  (  13E7  12 04 78          )                      CELL+
  (  13EA  12 02 06          )                      !
  (  13ED  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  13EE  CE 13             )                                                                    \  lfa= 13EE
  (  13F0  43 78 69 6F       )     :  xio   ( a a a -- )                                        compile-only   \  cfa= 13F4
  (  13F4  12 01 7C CE 11    )                    ( doLIT    11CE )   cfa'.of.accept*  ,doLIT*+(#)
  (  13F9  12 05 EA          )                      'EXPECT
  (  13FC  12 09 26          )                      2!
  (  13FF  12 06 06          )                      'ECHO
  (  1402  12 09 26          )                      2!
  (  1405  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1406  F0 13             )                                                                    \  lfa= 1406
  (  1408  04 46 49 4C 45    )     :  FILE   ( -- )                                                     \  cfa= 140E
  (  140E  12 01 7C 1A 0D    )                    ( doLIT    0D1A )   cfa'.of.PACE*    ,doLIT*+(#)
  (  1413  12 01 7C 02 03    )                    ( doLIT    0302 )   cfa'.of.DROP*    ,doLIT*+(#)
  (  1418  12 01 7C 8C 11    )                    ( doLIT    118C )   cfa'.of.kTAP*    ,doLIT*+(#)
  (  141D  12 13 F4          )                      xio
  (  1420  22                )                      RET
  (  1421  00                )
  \ -------------------------------------------------------------------------------
  (  1422  08 14             )                                                                    \  lfa= 1422
  (  1424  04 48 41 4E 44    )     :  HAND    ( -- )                                                    \  cfa= 142A
  (  142A  12 01 7C 60 13    )                    ( doLIT    1360 )   cfa'.of..OK*     ,doLIT*+(#)
  (  142F  12 01 7C E8 0C    )                    ( doLIT    0CE8 )   cfa'.of.EMIT*    ,doLIT*+(#)
  (  1434  12 01 7C 8C 11    )                    ( doLIT    118C )   cfa'.of.kTAP*    ,doLIT*+(#)
  (  1439  12 13 F4          )                      xio
  (  143C  22                )                      RET
  (  143D  00                )
  \ -------------------------------------------------------------------------------
  (  143E  24 14             )                                                                    \  lfa= 143E
  (  1440  03 49 2F 4F       )     :  I/O    ( -- )                                                    \  cfa= 1444
  (  1444  12 05 7A 40 01    )                    ( doVAR    0140 )   cfa'.of.?RX*     ,doVAR*+(#)
  (  1449  60 01             )                                        cfa'.of.TX!*  @.  32,'
  (  144B  00                )                      
  \ -------------------------------------------------------------------------------
  (  144C  40 14             )                                                                    \  lfa= 144C
  (  144E  07 43 4F 4E 53 4F )     :  CONSOLE   ( -- )                                                  \  cfa= 1456
  (  1456  12 14 44          )                      I/O
  (  1459  12 09 3C          )                      2@
  (  145C  12 05 CC          )                      '?KEY
  (  145F  12 09 26          )                      2!
  (  1462  12 14 2A          )                      HAND
  (  1465  22                )                      RET








  (  1466  4E 14             )                                                                    \  lfa= 1466
  (  1468  04 51 55 49 54    )     :  QUIT    ( -- )                                                    \  cfa= 146E
  (  146E  12 05 BE          )                      RP0
  (  1471  12 02 1E          )                      @
  (  1474  12 02 AE          )                      RP!
                                 BEGIN                              \ 14D5 --> 1477  *********
  (  1477  12 13 4E          )                      [
                                   BEGIN  \ 37 emit                         \ 1488 --> 147A  !!!!!!!!!!!!!!!!!!
  (  147A  12 12 38          )                      QUERY    tp1
  (  147D  12 01 7C A6 13    )                    ( doLIT    13A6 )   cfa'.of.EVAL*  ,doLIT*+(#)
  (  1482  12 12 62          )                      CATCH    tp2
  (  1485  12 02 F4          )                      ?DUP
  (  1488  12 01 C4 7A 14    )     UNTIL          \ ?branch  147A   \ 1488 --> 147A  !!!!!!!!!!!!!!!!!!
  (  148D  12 06 16          )                      'PROMPT  tp3
  (  1490  12 02 1E          )                      @
  (  1493  12 02 54          )                      >R
  (  1496  12 14 56          )                      CONSOLE  tp4
  (  1499  12 12 C6          )                      NULL$    tp5
  (  149C  12 03 24          )                      OVER
  (  149F  12 03 6C          )                      XOR      tp6
  (  14A2  12 01 C4 BA 14    )     IF             \ ?branch  14BA   \ 14A2 --> 14BA  ===============
  (  14A7  12 0D 2C          )                      SPACE
  (  14AA  12 09 54          )                      COUNT    tp7
  (  14AD  12 0D 5E          )                      TYPE     tp8
  (  14B0  12 0D BC          )                      ."|  ???"
  (  14B7  12 0D 82          )                      CR
                                   THEN                             \ 14A2 --> 14BA  ===============
  (  14BA  12 02 84          )                      R>
  (  14BD  12 01 7C 60 13    )                    ( doLIT    1360 )   cfa'.of..OK*  ,doLIT*+(#)
  (  14C2  12 03 6C          )                      XOR      tp9
  (  14C5  12 01 C4 D2 14    )     IF             \ ?branch  14D2   \ 14C5 --> 14D2  +++
  (  14CA  12 01 7C 1B 00    )                      doLIT    001B
  (  14CF  12 0C E8          )                      EMIT
                                   THEN                      tp10       \ 14C5 --> 14D2  +++
  (  14D2  12 13 D6          )                      PRESET   tp11
  (  14D5  12 01 E0 77 14    )   AGAIN            \ branch   1477   \ 14D5 --> 1477  *********
  \ -------------------------------------------------------------------------------
  (  14DA  68 14             )                                                                    \  lfa= 14DA
  (  14DC  01 27             )     :  '      ( -- ca )                                                      \  cfa= 14DE
  (  14DE  12 0F A2          )                      TOKEN
  (  14E1  12 10 E0          )                      NAME?
  (  14E4  12 01 C4 EA 14    )   IF               \ ?branch  14EA   \ 14E4 --> 14EA  @@@@@@@@@@@@@@@@@@@@@
  (  14E9  22                )                      RET
                                 THEN                               \ 14E4 --> 14EA  @@@@@@@@@@@@@@@@@@@@@
  (  14EA  12 12 98          )                      THROW
  (  14ED  00                )                      
  \ -------------------------------------------------------------------------------
  (  14EE  DC 14             )                                                                    \  lfa= 14EE
  (  14F0  05 41 4C 4C 4F 54 )     :  ALLOT                                                       \  cfa= 14F6
  (  14F6  12 06 CA          )                      CP
  (  14F9  12 09 0C          )                      +!
  (  14FC  22                )                      RET
  (  14FD  00                )                      
  \ -------------------------------------------------------------------------------
  (  14FE  F0 14             )                                                                    \  lfa= 14FE
  (  1500  01 2C             )     :  ,                                                           \  cfa= 1502
  (  1502  12 09 6A          )                      HERE
  (  1505  12 02 E4          )                      DUP
  (  1508  12 04 78          )                      CELL+
  (  150B  12 06 CA          )                      CP
  (  150E  12 02 06          )                      !
  (  1511  12 02 06          )                      !
  (  1514  22                )                      RET
  (  1515  00                )
  \ -------------------------------------------------------------------------------
  (  1516  00 15             )                                                                    \  lfa= 1516
  (  1518  02 43 2C          )     :  C,                                                          \  cfa= 151C
  (  151C  12 09 6A          )                      HERE
  (  151F  12 02 E4          )                      DUP
  (  1522  12 04 A8          )                      1+
  (  1525  12 06 CA          )                      CP
  (  1528  12 02 06          )                      !
  (  152B  12 02 2E          )                      C!
  (  152E  22                )                      RET
  (  152F  00                )
  \ -------------------------------------------------------------------------------
  (  1530  18 15             )                                                                    \  lfa= 1530
  (  1532  89 5B 43 4F 4D 50 )     :  [COMPILE]                       immediate                   \  cfa= 153C
  (  153C  12 14 DE          )                      '
  (  153F  12 15 02          )                      ,
  (  1542  22                )                      RET
  (  1543  00                )                      
  \ -------------------------------------------------------------------------------
COMMENT:
  (  1544  32 15             )                                                                    \  lfa= 1544
  (  1546  47 43 4F 4D 50 49 )     :  COMPILE                                      compile-only   \  cfa= 154E
  (  154E  12 02 84          )                      R>
  (  1551  12 02 E4          )                      DUP
  (  1554  12 02 1E          )                      @
  (  1557  12 15 02          )                      ,
  (  155A  12 04 78          )                      CELL+
  (  155D  12 02 54          )                      >R
  (  1560  22                )                      RET
  (  1561  00                )
  \ -------------------------------------------------------------------------------
COMMENT;

  \ *******************************************************************************
                                    t:  COMPILE                                    compile-only  \ cfa=  18C4
  (  000018C4  42 F8 04 ED       )                  push.LR
  (  000018C8  FE F7 AC FC       )                  R>                                            \       224
  (  000018CC  26 F0 01 06       )                  Tn1/
  (  000018D0  FE F7 D6 FC       )                  DUP                                           \       280
  (  000018D4  FE F7 90 FC       )                  @                                             \       1F8
  (  000018D8  00 F0 DA F9       )                  CALL  \ rcall_1C90           \ ,call
  (  000018DC  FE F7 8A FD       )                  CELL+                                         \       3F4
  (  000018E0  46 F0 01 06       )                  To1
  (  000018E4  FE F7 B0 FC       )                  >R                                            \       248
  (  000018E8  52 F8 04 FB       )                  ret
 



  \ -------------------------------------------------------------------------------
  t:  [x=0?]    ( code -- )  push.LR   SWAP  here ( cHERE )  {cell+}  -  {2/}  c,   c,  ret  \ immediate'

  t:  [z=1?]                 push.LR   d0  ...  [x=0?]                ret    immediate'
  t:  [z=0?]                 push.LR   d1  ...  [x=0?]                ret    immediate'

  t:  [c=1?]                 push.LR   d2  ...  [x=0?]                ret    immediate'
  t:  [c=0?]                 push.LR   d3  ...  [x=0?]                ret    immediate'

  t:  [n=1?]                 push.LR   d4  ...  [x=0?]                ret    immediate'
  t:  [n=0?]                 push.LR   d5  ...  [x=0?]                ret    immediate'

  t:  [v=1?]                 push.LR   d6  ...  [x=0?]                ret    immediate'
  t:  [v=0?]                 push.LR   d7  ...  [x=0?]                ret    immediate'

  t:  [u>?]                  push.LR   d8  ...  [x=0?]                ret    immediate'
  t:  [u<=?]                 push.LR   d9  ...  [x=0?]                ret    immediate'

  t:  [>=?]                  push.LR   da  ...  [x=0?]                ret    immediate'
  t:  [<?]                   push.LR   db  ...  [x=0?]                ret    immediate'

  t:  [>?]                   push.LR   dc  ...  [x=0?]                ret    immediate'
  t:  [<=?]                  push.LR   dd  ...  [x=0?]                ret    immediate'

  t:  [jmp]                  push.LR   de  ...  [x=0?]                ret    immediate'
  t:  [???]                  push.LR   df  ...  [x=0?]                ret    immediate'

  t:   do       push.LR  '' (do)    ...  call   here ( chere )  ret    immediate'  \ ??????
  t:  ?do       push.LR  '' (?do)   ...  call   here ( chere )  ret    immediate'  \ ??????
  t:   loop     push.LR  '' (loop)  ...  call   [v=0?]          ret    immediate'
  t:  +loop     push.LR  '' (+loop) ...  call   [v=0?]          ret    immediate'



  ''     do    cfa'>nfa'   #if  80  swap.  or!'  #then
  ''    ?do    cfa'>nfa'   #if  80  swap.  or!'  #then
  ''   loop    cfa'>nfa'   #if  80  swap.  or!'  #then
  ''  +loop    cfa'>nfa'   #if  80  swap.  or!'  #then

  :.     do      (do)    here'  ;.   \ override the previous  do
  :.    ?do     (?do)    here'  ;.   \ override the previous ?do
  :.   loop    (loop)    v=0?   ;.   \ override the previous  loop
  :.  +loop   (+loop)    v=0?   ;.   \ override the previous +loop















  \ -------------------------------------------------------------------------------
  (  1698  8A 16             )                                                                    \  lfa= 1698
  (  169A  86 41 42 4F 52 54 )     :  ABORT"                          immediate                   \  cfa= 16A2
  (  16A2  12 01 7C EA 12    )                    ( doLIT    12EA )   cfa'.of.abor."*  ,doLIT*+(#)
  (  16A7  12 17 DA          )                      CALL
  (  16AA  12 15 7E          )                      $."
  (  16AD  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  16AE  9A 16             )                                                                    \  lfa= 16AE
  (  16B0  82 24 22          )     :  $"                              immediate                   \  cfa= 16B4
  (  16B4  12 01 7C B2 0D    )                    ( doLIT    0DB2 )   cfa'.of.$"|*     ,doLIT*+(#)
  (  16B9  12 17 DA          )                      CALL
  (  16BC  12 15 7E          )                      $."
  (  16BF  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  16C0  B0 16             )                                                                    \  lfa= 16C0
  (  16C2  82 2E 22          )     :  ."                              immediate                   \  cfa= 16C6
  (  16C6  12 01 7C BC 0D    )                    ( doLIT    0DBC )   cfa'.of.."|*     ,doLIT*+(#)
  (  16CB  12 17 DA          )                      CALL
  (  16CE  12 15 7E          )                      $."
  (  16D1  22                )                      RET

  :.  ."   ."|   ;.
  \ -------------------------------------------------------------------------------
  (  16D2  C2 16             )                                                                    \  lfa= 16D2
  (  16D4  07 3F 55 4E 49 51 )     :  ?UNIQUE                                                     \  cfa= 16DC
  (  16DC  12 02 E4          )                      DUP
  (  16DF  12 10 E0          )                      NAME?
  (  16E2  12 01 C4 FB 16    )   IF               \ ?branch  16FB   \ 16E2 --> 16FB  *********
  (  16E7  12 0D BC          )                      ."|  reDef  "
  (  16F2  12 03 24          )                      OVER
  (  16F5  12 09 54          )                      COUNT
  (  16F8  12 0D 5E          )                      TYPE
                                 THEN                               \ 16E2 --> 16FB  *********
  (  16FB  12 03 02          )                      DROP
  (  16FE  22                )                      RET
  (  16FF  00                )
  \ -------------------------------------------------------------------------------
  (  1700  D4 16             )                                                                    \  lfa= 1700
  (  1702  03 24 2E 6E       )     :  $.n                                                         \  cfa= 1706
  (  1706  12 02 E4          )                      DUP
  (  1709  12 02 44          )                      C@
  (  170C  12 01 C4 48 17    )   IF               \ ?branch  1748   \ 170C --> 1748  *********
  (  1711  12 16 DC          )                      ?UNIQUE
  (  1714  12 02 E4          )                      DUP
  (  1717  12 06 E4          )                      LAST
  (  171A  12 02 06          )                      !
  (  171D  12 02 E4          )                      DUP
  (  1720  12 02 E4          )                      DUP
  (  1723  12 02 44          )                      C@
  (  1726  12 03 D2          )                      +
  (  1729  12 04 A8          )                      1+
  (  172C  12 04 DC          )                      ALIGNED
  (  172F  12 06 CA          )                      CP
  (  1732  12 02 06          )                      !
  (  1735  12 04 88          )                      CELL-
  (  1738  12 06 BE          )                      CURRENT
  (  173B  12 02 1E          )                      @
  (  173E  12 02 1E          )                      @
  (  1741  12 03 12          )                      SWAP
  (  1744  12 02 06          )                      !
  (  1747  22                )                      RET
                                 THEN                               \ 170C --> 1748  *********
  (  1748  12 0D B2          )                      $"|  name  "
  (  1751  12 12 98          )                      THROW
  \ -------------------------------------------------------------------------------
  (  1754  02 17             )                                                                    \  lfa= 1754
  (  1756  08 24 43 4F 4D 50 )     :  $COMPILE                                                    \  cfa= 1760
  (  1760  12 10 E0          )                      NAME?
  (  1763  12 02 F4          )                      ?DUP
  (  1766  12 01 C4 83 17    )   IF               \ ?branch  1783   \ 1766 --> 1783  ===============
  (  176B  12 02 1E          )                      @
  (  176E  12 01 7C 80 00    )                      doLIT    0080
  (  1773  12 03 4C          )                      AND
  (  1776  12 01 C4 7F 17    )     IF             \ ?branch  177F   \ 1776 --> 177F  *********
  (  177B  12 01 F6          )                      EXECUTE
  (  177E  22                )                      RET
                                   THEN                             \ 1776 --> 177F  *********
  (  177F  12 17 DA          )                      CALL
  (  1782  22                )                      RET
                                 THEN                               \ 1766 --> 1783  ===============
  (  1783  12 06 82          )                      'NUMBER
  (  1786  12 09 A0          )                      @EXECUTE
  (  1789  12 01 C4 92 17    )   IF               \ ?branch  1792   \ 1789 --> 1792  !!!!!!!!!!!!!!!!!!
  (  178E  12 15 6C          )                      LITERAL
  (  1791  22                )                      RET
                                 THEN                               \ 1789 --> 1792  !!!!!!!!!!!!!!!!!!
  (  1792  12 12 98          )                      THROW
  (  1795  00                )

  ''  $COMPILE    cfa'.of.$COMPILE*  !.
  \ -------------------------------------------------------------------------------
  (  1796  56 17             )                                                                    \  lfa= 1796
  (  1798  05 4F 56 45 52 54 )     :  OVERT                                                       \  cfa= 179E
  (  179E  12 06 E4          )                      LAST
  (  17A1  12 02 1E          )                      @
  (  17A4  12 06 BE          )                      CURRENT
  (  17A7  12 02 1E          )                      @
  (  17AA  12 02 06          )                      !
  (  17AD  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  17AE  98 17             )                                                                    \  lfa= 17AE
  (  17B0  C1 3B             )     :  ; \ ;   ^                           immediate    compile-only   \  cfa= 17B2
  (  17B2  12 01 7C 22 00    )                      doLIT    0022    \  ,;
  (  17B7  12 15 1C          )                      C,               \
  (  17BA  12 13 4E          )                      [
  (  17BD  12 17 9E          )                      OVERT
  (  17C0  22                )                      RET
  (  17C1  00                )
comment;

                                    t:  ;                                 immediate    compile-only   \ cfa=     6664
  (  00006664  00 B5             )                  push.LR
  (  00006666  FE F7 51 FA 00 BD )                  doLIT   0000BD00    \  ,;                     \      4B0C
  (  0000666E  FF F7 65 FD       )                  16,                 \                         \      613C
  (  00006672  FF F7 BF FB       )                  [                                             \      5DF4
  (  00006676  FF F7 EB FF       )                  OVERT                                         \      6650
  (  0000667A  00 BD             )                  ret

  :.  ;   RET   ;.
  \ -------------------------------------------------------------------------------
  (  17C2  B0 17             )                                                                    \  lfa= 17C2
  (  17C4  01 5D             )     :  ]                                                           \  cfa= 17C6
  (  17C6  12 01 7C 60 17    )                    ( doLIT    1760 )   cfa'.of.$COMPILE*  ,doLIT*+(#)
  (  17CB  12 06 72          )                      'EVAL
  (  17CE  12 02 06          )                      !
  (  17D1  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  17D2  C4 17             )                                                                    \  lfa= 17D2
  (  17D4  04 43 41 4C 4C    )     :  CALL                                                        \  cfa= 17DA
  (  17DA  12 01 7C 12 00    )                      doLIT    0012
  (  17DF  12 15 1C          )                      C,
  (  17E2  12 04 24          )                      FLIP
  (  17E5  12 15 02          )                      ,
  (  17E8  22                )                      RET
  (  17E9  00                )                      
comment;
  \ -------------------------------------------------------------------------------
  (  17EA  D4 17             )                                                                    \  lfa= 17EA
  (  17EC  01 3A             )     :  :        \ :  `                                             \  cfa= 17EE
                                       ( CP @ ALIGNED CP ! )   \  [push.LR]
  (  17EE  12 0F A2          )                      TOKEN
  (  17F1  12 17 06          )                      $.n           [push.LR]
  (  17F4  12 17 C6          )                      ]
  (  17F7  22                )                      RET

  :.  :    t:new*4   push.LR   ;.
  \ -------------------------------------------------------------------------------
  (  17F8  EC 17             )                                                                    \  lfa= 17F8
  (  17FA  09 49 4D 4D 45 44 )     :  IMMEDIATE                                                   \  cfa= 1804
  (  1804  12 01 7C 80 00    )                      doLIT    0080
  (  1809  12 06 E4          )                      LAST
  (  180C  12 02 1E          )                      @
  (  180F  12 02 1E          )                      @
  (  1812  12 03 5C          )                      OR
  (  1815  12 06 E4          )                      LAST
  (  1818  12 02 1E          )                      @
  (  181B  12 02 06          )                      !
  (  181E  22                )                      RET
  (  181F  00                )

:.  immediate   immediate'  ;.
  \ -------------------------------------------------------------------------------
  (  1820  FA 17             )                                                                    \  lfa= 1820
  (  1822  04 55 53 45 52    )     :  USER                                                        \  cfa= 1828
  (  1828  12 0F A2          )                      TOKEN
  (  182B  12 17 06          )                      $.n       [push.LR]
  (  182E  12 17 9E          )                      OVERT
  (  1831  12 01 7C 9C 05    )                    ( doLIT    059C )   cfa'.of.doUSER*  ,doLIT*+(#)
  (  1836  12 17 DA          )                      CALL
  (  1839  12 15 02          )                      ,
  (  183C  22                )                      RET
  (  183D  00                )                      
  \ -------------------------------------------------------------------------------
  (  183E  22 18             )                                                                    \  lfa= 183E
  (  1840  06 43 52 45 41 54 )     :  CREATE                                                      \  cfa= 1848
  (  1848  12 0F A2          )                      TOKEN
  (  184B  12 17 06          )                      $.n        [push.LR]
  (  184E  12 17 9E          )                      OVERT
  (  1851  12 01 7C 7A 05    )                    ( doLIT    057A )   cfa'.of.doVAR*  ,doLIT*+(#)
  (  1856  12 17 DA          )                      CALL
  (  1859  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  185A  40 18             )                                                                    \  lfa= 185A
  (  185C  08 56 41 52 49 41 )     :  VARIABLE               ( used in all RAM system only )      \  cfa= 1866
  (  1866  12 18 48          )                      CREATE
  (  1869  12 08 6C          )                      0
  (  186C  12 15 02          )                      ,
  (  186F  22                )                      RET

  :.  CREATE'    t:  push.LR  ,doLIT*  here'  6  +.  32,'  ret             ;.   \ used in ram only    ???????
  :.  VARIABLE'  t:  push.LR  ,doLIT*  here'  6  +.  32,'  ret  0  32,'    ;.   \ used in ram only    ???????
  \   var                                                                       \ used in ram and flash
  \ -------------------------------------------------------------------------------
  (  1870  5C 18             )                                                                    \  lfa= 1870
  (  1872  05 5F 54 59 50 45 )     :  _TYPE                                                       \  cfa= 1878
  (  1878  12 02 54          )                      >R
  (  187B  12 01 E0 8F 18    )   AHEAD,           \ branch   188F   \ 187B --> 188F  ////////////
                                   BEGIN                            \ 188F --> 1880  ------
  (  1880  12 02 E4          )                      DUP
  (  1883  12 02 44          )                      C@
  (  1886  12 08 B2          )                      >CHAR
  (  1889  12 0C E8          )                      EMIT
  (  188C  12 04 A8          )                      1+
                                 THEN,                                \ 187B --> 188F  ////////////
  (  188F  12 01 96 80 18    )     NEXT           \ nex.     1880     \ 188F --> 1880  ------
  (  1894  12 03 02          )                      DROP
  (  1897  22                )                      RET       
  \ -------------------------------------------------------------------------------
  (  1898  72 18             )                                                                    \  lfa= 1898
  (  189A  03 64 6D 2B       )     :  dm+                                                         \  cfa= 189E
  (  189E  12 03 24          )                      OVER
  (  18A1  12 01 7C 04 00    )                      doLIT    0004
  (  18A6  12 0D E8          )                      U.R
  (  18A9  12 0D 2C          )                      SPACE
  (  18AC  12 02 54          )                      >R
  (  18AF  12 01 E0 C5 18    )   AHEAD,           \ branch   18C5   \ 18AF --> 18C5  ===============
                                   BEGIN                            \ 18C5 --> 18B4  *********
  (  18B4  12 02 E4          )                      DUP
  (  18B7  12 02 44          )                      C@
  (  18BA  12 01 7C 03 00    )                      doLIT    0003
  (  18BF  12 0D E8          )                      U.R
  (  18C2  12 04 A8          )                      1+
                                 THEN,
  (  18C5  12 01 96 B4 18    )     NEXT           \ nex.     18B4   \ 18C5 --> 18B4  *********
  (  18CA  22                )                      RET
  (  18CB  00                )
  \ -------------------------------------------------------------------------------
  (  18CC  9A 18             )                                                                    \  lfa= 18CC
  (  18CE  04 44 55 4D 50    )     :  DUMP                                                        \  cfa= 18D4
  (  18D4  12 06 24          )                      BASE
  (  18D7  12 02 1E          )                      @
  (  18DA  12 02 54          )                      >R
  (  18DD  12 0B 7C          )                      HEX
  (  18E0  12 01 7C 10 00    )                      doLIT    0010
  (  18E5  12 07 F6          )                      /
  (  18E8  12 02 54          )                      >R
                                 BEGIN                              \ 1913 --> 18EB  *********
  (  18EB  12 0D 82          )                      CR
  (  18EE  12 01 7C 10 00    )                      doLIT    0010
  (  18F3  12 03 BC          )                      2DUP
  (  18F6  12 18 9E          )                      dm+
  (  18F9  12 03 90          )                      ROT
  (  18FC  12 03 90          )                      ROT
  (  18FF  12 08 8C          )                      2
  (  1902  12 0D 3E          )                      SPACES
  (  1905  12 18 78          )                      _TYPE
  (  1908  12 0C F8          )                      NUF?
  (  190B  12 03 F6          )                      NOT
  (  190E  12 01 C4 1D 19    )     IF,            \ ?branch  191D   \ 190E --> 191D  !!!!!!!!!!!!!!!!!!
  (  1913  12 01 96 EB 18    )   NEXT             \ nex.     18EB   \ 1913 --> 18EB  *********
  (  1918  12 01 E0 23 19    )     ELSE,          \ branch   1923 ) \ 190E --> 191D  !!!!!!!!!!!!!!!!!!
  (  191D  12 02 84          )                      R>
  (  1920  12 03 02          )                      DROP
                                   THEN,                            \ 1918 --> 1923  +++
  (  1923  12 03 02          )                      DROP
  (  1926  12 02 84          )                      R>
  (  1929  12 06 24          )                      BASE
  (  192C  12 02 06          )                      !
  (  192F  22                )                      RET       
  \ -------------------------------------------------------------------------------
comment:
  (  1930  CE 18             )                                                                    \  lfa= 1930
  (  1932  02 2E 53          )     :  .S      \ .S                                                \  cfa= 1936
  (  1936  12 0D 82          )                      CR
  (  1939  12 08 DE          )                      DEPTH
  (  193C  12 02 54          ) (  1>  )             >R
  (  193F  12 01 E0 4D 19    )   AHEAD,           \ branch   194D   \ 193F --> 194D  ===============
                                   BEGIN                            \ 194D --> 1944  *********
  (  1944  12 02 6A          )                      R@
  (  1947  12 08 F6          )                      PICK
  (  194A  12 0E 1E          )                      .
                                 THEN,                              \ 193F --> 194D  ===============
  (  194D  12 01 96 44 19    )     NEXT           \ nex.     1944   \ 194D --> 1944  *********
  (  1952  12 0D BC          )                 \     ."|  <sp"
  (  195A  22                )                      RET
  (  195B  00                )
comment;
  \ -------------------------------------------------------------------------------
  (  195C  32 19             )                                                                    \  lfa= 195C
  (  195E  04 21 43 53 50    )     :  !CSP                                                        \  cfa= 1964
  (  1964  12 02 C2          )                      SP@
  (  1967  12 06 64          )                      CSP
  (  196A  12 02 06          )                      !
  (  196D  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  196E  5E 19             )                                                                    \  lfa= 196E
  (  1970  04 3F 43 53 50    )     :  ?CSP                                                        \  cfa= 1976
  (  1976  12 02 C2          )                      SP@
  (  1979  12 06 64          )                      CSP
  (  197C  12 02 1E          )                      @
  (  197F  12 03 6C          )                      XOR
  (  1982  12 12 EA          )                      abor." stacks"
  (  198C  22                )                      RET
  (  198D  00                )
  \ -------------------------------------------------------------------------------
head.adjacent.to.cfa?  @.
#if
  (  198E  70 19             )                                                                    \  lfa= 198E
  (  1990  05 3E 4E 41 4D 45 )     :  >NAME   ( ca -- na, F )                                                   \  cfa= 1996
  (  1996  12 06 BE          )                      CURRENT
                                 BEGIN                              \ 19D4 --> 1999  !!!!!!!!!!!!!!!!!!
  (  1999  12 04 78          )                      CELL+
  (  199C  12 02 1E          )                      @
  (  199F  12 02 F4          )                      ?DUP
  (  19A2  12 01 C4 E6 19    )     IF,,           \ ?branch  19E6   \ 19A2 --> 19E6  ===============
  (  19A7  12 03 BC          )                      2DUP
                                     BEGIN                          \ 19C6 --> 19AA  ------
  (  19AA  12 02 1E          )                      @
  (  19AD  12 02 E4          )                      DUP
  (  19B0  12 01 C4 CB 19    )       WHILE        \ ?branch  19CB   \ 19B0 --> 19CB  !!!!!!!!!!!!!!!!!!
  (  19B5  12 03 BC          )                      2DUP
  (  19B8  12 0F DA          )                      NAME>
  (  19BB  12 03 6C          )                      XOR
  (  19BE  12 01 C4 CB 19    )         if,        \ ?branch  19CB   \ 19BE --> 19CB  !!!!!!!!!!!!!!!!!!
  (  19C3  12 04 88          )                      CELL-
  (  19C6  12 01 E0 AA 19    )       REPEAT       \ branch   19AA   \ 19B0 --> 19CB  !!!!!!!!!!!!!!!!!!
                                       THEN,                        \ 19BE --> 19CB  !!!!!!!!!!!!!!!!!!
  (  19CB  12 03 12          )                      SWAP
  (  19CE  12 03 02          )                      DROP
  (  19D1  12 02 F4          )                      ?DUP
  (  19D4  12 01 C4 99 19    )   UNTIL            \ ?branch  1999   \ 19D4 --> 1999  !!!!!!!!!!!!!!!!!!
  (  19D9  12 03 12          )                      SWAP
  (  19DC  12 03 02          )                      DROP
  (  19DF  12 03 12          )                      SWAP
  (  19E2  12 03 02          )                      DROP
  (  19E5  22                )                      RET
                                   THEN,,                               \ 19A2 --> 19E6  ===============
  (  19E6  12 03 02          )                      DROP
  (  19E9  12 08 6C          )                      0     ...*
  (  19EC  22                )                      RET
  (  19ED  00                )
  \ ------------------------------------------------------------------------
#else                                             \ head and cfa are seperated.
                                    t:  >NAME   ( ca -- na, F )                                              \ cfa=     68A0
  (  000068A0  00 B5             )                  push.LR
  (  000068A2  40 B4 40 CF       )                  {>r}
  (  000068A6  FE F7 CF F9       )                  CONTEXT                                       \      4C48
  (  000068AA  36 68             )                  {@}
                                      begin'.
  (  000068AC  04 3F 3E 60       )                  {dup}
  (  000068B0  00 2E             )                  T:0
  (  000068B2  40 CF             )                  {drop}
  (  000068B4  0F D0             )      if'<> \ z=1? eq?             \ 000068B4 --> 000068D6 --------------------------------

  (  000068B6  04 3F 3E 60       )                  {dup}
  (  000068BA  FF F7 23 F9       )                  NAME>                                         \      5B04
  (  000068BE  04 3F 3E 60 00 9E )                  {r@}
  (  000068C4  01 CF 46 40       )                  {xor}
  (  000068C8  00 2E             )                  T:0
  (  000068CA  40 CF             )                  {drop}
  (  000068CC  03 D0             )        if'<> \ z=1? eq?           \ 000068CC --> 000068D6 +++++++++
  (  000068CE  FE F7 11 FD       )                  CELL-                                         \      52F4
  (  000068D2  36 68             )                  {@}
  (  000068D4  EA E7             )    again'.   \   jmp_68AC11
                                          then'                      \ 000068CC --> 000068D6 +++++++++
                                        then'
  (  000068D6  04 3F 3E 60 40 BC )                  {r>}
  (  000068DC  40 CF             )                  {drop}
  (  000068DE  00 BD             )                  ret
#then
  \ -------------------------------------------------------------------------------
  (  19EE  90 19             )                                                                    \  lfa= 19EE
  (  19F0  03 2E 49 44       )     :  .ID  ( na -- )                                                       \  cfa= 19F4
  (  19F4  12 02 F4          )                      ?DUP
  (  19F7  12 01 C4 0B 1A    )   IF               \ ?branch  1A0B   \ 19F7 --> 1A0B  +++
  (  19FC  12 09 54          )                      COUNT
  (  19FF  12 01 7C 1F 00    )                      doLIT    001F
  (  1A04  12 03 4C          )                      AND
  (  1A07  12 18 78          )                      _TYPE
  (  1A0A  22                )                      RET
                                 THEN                               \ 19F7 --> 1A0B  +++
  (  1A0B  12 0D BC          )                      ."|  {noName}  "
  (  1A18  22                )                      RET
  (  1A19  00                )
  \ -------------------------------------------------------------------------------
  (  1A1A  F0 19             )                                                                    \  lfa= 1A1A
  (  1A1C  03 53 45 45       )     :  SEE    \  SE.                                               \  cfa= 1A20
  (  1A20  12 14 DE          )                      '
  (  1A23  12 0D 82          )                      CR
                                 BEGIN                              \ 1A5C --> 1A26  *********
  (  1A26  12 09 54          )                      COUNT
  (  1A29  12 02 E4          )                      DUP
  (  1A2C  12 01 7C 12 00    )                      doLIT    0012     \ ???????????????
  (  1A31  12 03 6C          )                      XOR
  (  1A34  12 01 C4 41 1A    )     IF             \ ?branch  1A41   \ 1A34 --> 1A41  ////////////
  (  1A39  12 0E 1E          )                      .
  (  1A3C  12 01 E0 59 1A    )     ELSE           \ branch   1A59   \ 1A34 --> 1A41  ////////////
  (  1A41  12 03 02          )                      DROP
  (  1A44  12 02 E4          )                      DUP
  (  1A47  12 02 1E          )                      @
  (  1A4A  12 04 24          )                      FLIP    \ ????????????
  (  1A4D  12 19 96          )                      >NAME
  (  1A50  12 0D 2C          )                      SPACE
  (  1A53  12 19 F4          )                      .ID
  (  1A56  12 04 78          )                      CELL+
                                   THEN                             \ 1A3C --> 1A59  +++
  (  1A59  12 0C F8          )                      NUF?
  (  1A5C  12 01 C4 26 1A    )   UNTIL            \ ?branch  1A26   \ 1A5C --> 1A26  *********
  (  1A61  12 03 02          )                      DROP
  (  1A64  22                )                      RET
  (  1A65  00                )

  :.  see  see'  ;.
  \ -------------------------------------------------------------------------------
  (  1A66  1C 1A             )                                                                    \  lfa= 1A66
  (  1A68  05 57 4F 52 44 53 )     :  WORDS  ( -- )                                                     \  cfa= 1A6E
  (  1A6E  12 0D 82          )                      CR
  (  1A71  12 06 AE          )                      CONTEXT
  (  1A74  12 02 1E          )                      @
                                 BEGIN                              \ 1A91 --> 1A77  ////////////
  (  1A77  12 02 1E          )                      @
  (  1A7A  12 02 F4          )                      ?DUP
  (  1A7D  12 01 C4 99 1A    )     IF,            \ ?branch  1A99   \ 1A7D --> 1A99  ////////////
  (  1A82  12 02 E4          )                      DUP
  (  1A85  12 0D 2C          )                      SPACE
  (  1A88  12 19 F4          )                      .ID
  (  1A8B  12 04 88          )                      CELL-
  (  1A8E  12 0C F8          )                      NUF?
  (  1A91  12 01 C4 77 1A    )   UNTIL            \ ?branch  1A77   \ 1A91 --> 1A77  ////////////
  (  1A96  12 03 02          )                      DROP
                                   THEN,                            \ 1A7D --> 1A99  ////////////
  (  1A99  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1A9A  68 1A             )                                                                    \  lfa= 1A9A
  (  1A9C  04 52 45 41 44    )     :  READ  ( a len -- )                                                      \  cfa= 1AA2
  (  1AA2  12 03 24          )                      OVER
  (  1AA5  12 06 64          )                      CSP
  (  1AA8  12 02 06          )                      !
  (  1AAB  12 02 54          )                      >R
                                 BEGIN,                             \ 1ACA --> 1AAE  ////////////
  (  1AAE  12 0C D6          )                      KEY
  (  1AB1  12 02 E4          )                      DUP
  (  1AB4  12 01 7C 1B 00    )                      doLIT    001B
  (  1AB9  12 03 6C          )                      XOR
  (  1ABC  12 01 C4 D7 1A    )     IF             \ ?branch  1AD7   \ 1ABC --> 1AD7  *********
  (  1AC1  12 03 24          )                      OVER
  (  1AC4  12 02 2E          )                      C!
  (  1AC7  12 04 A8          )                      1+
  (  1ACA  12 01 96 AE 1A    )   NEXT,            \ nex.     1AAE   \ 1ACA --> 1AAE  ////////////
  (  1ACF  12 03 02          )                      DROP
  (  1AD2  12 01 E0 DD 1A    )     ELSE           \ branch   1ADD   \ 1ABC --> 1AD7  *********
  (  1AD7  12 02 84          )                      R>
  (  1ADA  12 03 AA          )                      2DROP
                                   THEN                             \ 1AD2 --> 1ADD  *********
  (  1ADD  12 06 64          )                      CSP
  (  1AE0  12 02 1E          )                      @
  (  1AE3  12 03 E2          )                      -
  (  1AE6  12 02 E4          )                      DUP
  (  1AE9  12 0E 1E          )                      .
  (  1AEC  12 06 64          )                      CSP
  (  1AEF  12 02 06          )                      !
  (  1AF2  22                )                      RET
  (  1AF3  00                )
  \ -------------------------------------------------------------------------------
  (  1AF4  9C 1A             )                                                                    \  lfa= 1AF4
  (  1AF6  04 4C 4F 41 44    )     :  LOAD                                                        \  cfa= 1AFC
  (  1AFC  12 06 4A          )                      >IN
  (  1AFF  12 02 1E          )                      @
  (  1B02  12 06 58          )                      #TIB
  (  1B05  12 09 3C          )                      2@
  (  1B08  12 02 54          )                      >R
  (  1B0B  12 02 54          )                      >R
  (  1B0E  12 02 54          )                      >R
  (  1B11  12 01 7C 00 00    )                      doLIT    0000
  (  1B16  12 06 4A          )                      >IN
  (  1B19  12 02 06          )                      !
  (  1B1C  12 06 58          )                      #TIB
  (  1B1F  12 02 06          )                      !
  (  1B22  12 06 58          )                      #TIB
  (  1B25  12 04 78          )                      CELL+
  (  1B28  12 02 06          )                      !
  (  1B2B  12 13 A6          )                      EVAL
  (  1B2E  12 02 84          )                      R>
  (  1B31  12 02 84          )                      R>
  (  1B34  12 02 84          )                      R>
  (  1B37  12 06 58          )                      #TIB
  (  1B3A  12 09 26          )                      2!
  (  1B3D  12 06 4A          )                      >IN
  (  1B40  12 02 06          )                      !
  (  1B43  22                )                      RET
  \ -------------------------------------------------------------------------------
comment:
  (  1B44  F6 1A             )                                                                    \  lfa= 1B44
  (  1B46  04 53 45 4E 44    )     :  SEND                                                        \  cfa= 1B4C
  (  1B4C  12 0B 7C          )                      HEX
  (  1B4F  12 02 54          )                      >R
  (  1B52  12 01 E0 09 1C    )   AHEAD,           \ branch   1C09   \ 1B52 --> 1C09  ////////////
                                   BEGIN                            \ 1C09 --> 1B57  ------
  (  1B57  12 02 E4          )                      DUP
  (  1B5A  12 01 7C 1F 00    )                      doLIT    001F
  (  1B5F  12 03 4C          )                      AND
  (  1B62  12 01 C4 6C 1B    )       IF           \ ?branch  1B6C   \ 1B62 --> 1B6C  *********
  (  1B67  12 01 E0 C1 1B    )       ELSE         \ branch   1BC1   \ 1B62 --> 1B6C  *********
  (  1B6C  12 0D 82          )                      CR
  (  1B6F  12 02 E4          )                      DUP
  (  1B72  12 01 7C FF 00    )                      doLIT    00FF
  (  1B77  12 03 4C          )                      AND
  (  1B7A  12 06 64          )                      CSP
  (  1B7D  12 02 06          )                      !
  (  1B80  12 02 E4          )                      DUP
  (  1B83  12 01 7C 00 01    )                      doLIT    0100
  (  1B88  12 07 F6          )                      /
  (  1B8B  12 06 64          )                      CSP
  (  1B8E  12 09 0C          )                      +!
  (  1B91  12 01 7C 20 00    )                      doLIT    0020
  (  1B96  12 06 64          )                      CSP
  (  1B99  12 09 0C          )                      +!
  (  1B9C  12 0D BC          )                      ."| :20"
  (  1BA3  12 02 E4          )                      DUP
  (  1BA6  12 0A D0          )                      <#
  (  1BA9  12 0A FC          )                      #
  (  1BAC  12 0A FC          )                      #
  (  1BAF  12 0A FC          )                      #
  (  1BB2  12 0A FC          )                      #
  (  1BB5  12 0B 42          )                      #>
  (  1BB8  12 0D 5E          )                      TYPE
  (  1BBB  12 0D BC          )                      ."| 00"
                                     THEN                           \ 1B67 --> 1BC1  ------
  (  1BC1  12 09 54          )                      COUNT
  (  1BC4  12 02 E4          )                      DUP
  (  1BC7  12 06 64          )                      CSP
  (  1BCA  12 09 0C          )                      +!
  (  1BCD  12 0A D0          )                      <#
  (  1BD0  12 0A FC          )                      #
  (  1BD3  12 0A FC          )                      #
  (  1BD6  12 0B 42          )                      #>
  (  1BD9  12 0D 5E          )                      TYPE
  (  1BDC  12 02 E4          )                      DUP
  (  1BDF  12 01 7C 1F 00    )                      doLIT    001F
  (  1BE4  12 03 4C          )                      AND
  (  1BE7  12 01 C4 F1 1B    )       IF           \ ?branch  1BF1   \ 1BE7 --> 1BF1  *********
  (  1BEC  12 01 E0 09 1C    )       ELSE         \ branch   1C09   \ 1BE7 --> 1BF1  *********///
  (  1BF1  12 06 64          )                      CSP
  (  1BF4  12 02 44          )                      C@
  (  1BF7  12 04 08          )                      NEGATE
  (  1BFA  12 0A D0          )                      <#
  (  1BFD  12 0A FC          )                      #
  (  1C00  12 0A FC          )                      #
  (  1C03  12 0B 42          )                      #>
  (  1C06  12 0D 5E          )                      TYPE
                                     THEN
                                 THEN,
  (  1C09  12 01 96 57 1B    )     NEXT           \ nex.     1B57   \ 1C09 --> 1B57  ------
  (  1C0E  12 0D 82          )                      CR
  (  1C11  12 03 02          )                      DROP
  (  1C14  12 0D BC          )                      ."| :00000001FF"
  (  1C23  12 0D 82          )                      CR
  (  1C26  22                )                      RET
  (  1C27  00                )


  (  1B44  F6 1A             )                                                                    \  lfa= 1B44
  (  1B46  04 53 45 4E 44    )     :  SEND                                                        \  cfa= 1B4C
  (  1B4C  12 0B 7C          )                      HEX
  (  1B4F  12 02 54          )                      >R
  (  1B52  12 01 E0 09 1C    )   AHEAD,           \ branch   1C09   \ 1B52 --> 1C09  ////////////
                                   BEGIN                            \ 1C09 --> 1B57  ------
  (  1B57  12 02 E4          )                    \ DUP
  (  1B5A  12 01 7C 1F 00    )                    \ doLIT    001F
  (  1B5F  12 03 4C          )            Tn1F    \ AND
  (  1B62  12 01 C4 6C 1B    )       IF           \ ?branch  1B6C   \ 1B62 --> 1B6C  *********
  (  1B67  12 01 E0 C1 1B    )       ELSE         \ branch   1BC1   \ 1B62 --> 1B6C  *********
  (  1B6C  12 0D 82          )                      CR
  (  1B6F  12 02 E4          )                    \ DUP
  (  1B72  12 01 7C FF 00    )                    \ doLIT    00FF
  (  1B77  12 03 4C          )            TnFF    \ AND
  (  1B7A  12 06 64          )                      CSP
  (  1B7D  12 02 06          )                      !
  (  1B80  12 02 E4          )                      DUP
  (  1B83  12 01 7C 00 01    )                    \ doLIT    0100
  (  1B88  12 07 F6          )            T<<8    \ /
  (  1B8B  12 06 64          )                      CSP
  (  1B8E  12 09 0C          )                      +!
  (  1B91  12 01 7C 20 00    )                      doLIT    0020
  (  1B96  12 06 64          )                      CSP
  (  1B99  12 09 0C          )                      +!
  (  1B9C  12 0D BC          )                      ."| :20"
  (  1BA3  12 02 E4          )                      DUP
  (  1BA6  12 0A D0          )                      <#
  (  1BA9  12 0A FC          )                      #
  (  1BAC  12 0A FC          )                      #
  (  1BAF  12 0A FC          )                      #
  (  1BB2  12 0A FC          )                      #
  (  1BB5  12 0B 42          )                      #>
  (  1BB8  12 0D 5E          )                      TYPE
  (  1BBB  12 0D BC          )                      ."| 00"
                                     THEN                           \ 1B67 --> 1BC1  ------
  (  1BC1  12 09 54          )                      COUNT
  (  1BC4  12 02 E4          )                      DUP
  (  1BC7  12 06 64          )                      CSP
  (  1BCA  12 09 0C          )                      +!
  (  1BCD  12 0A D0          )                      <#
  (  1BD0  12 0A FC          )                      #
  (  1BD3  12 0A FC          )                      #
  (  1BD6  12 0B 42          )                      #>
  (  1BD9  12 0D 5E          )                      TYPE
  (  1BDC  12 02 E4          )                      DUP
  (  1BDF  12 01 7C 1F 00    )                    \ doLIT    001F
  (  1BE4  12 03 4C          )             Tn1F   \ AND
  (  1BE7  12 01 C4 F1 1B    )       IF           \ ?branch  1BF1   \ 1BE7 --> 1BF1  *********
  (  1BEC  12 01 E0 09 1C    )       ELSE         \ branch   1C09   \ 1BE7 --> 1BF1  *********///
  (  1BF1  12 06 64          )                      CSP
  (  1BF4  12 02 44          )                      C@
  (  1BF7  12 04 08          )                      NEGATE
  (  1BFA  12 0A D0          )                      <#
  (  1BFD  12 0A FC          )                      #
  (  1C00  12 0A FC          )                      #
  (  1C03  12 0B 42          )                      #>
  (  1C06  12 0D 5E          )                      TYPE
                                     THEN
                                 THEN,
  (  1C09  12 01 96 57 1B    )     NEXT           \ nex.     1B57   \ 1C09 --> 1B57  ------
  (  1C0E  12 0D 82          )                      CR
  (  1C11  12 03 02          )                      DROP
  (  1C14  12 0D BC          )                      ."| :00000001FF"
  (  1C23  12 0D 82          )                      CR
  (  1C26  22                )                      RET
  (  1C27  00                )

comment;
  \ -------------------------------------------------------------------------------
  (  1C28  46 1B             )                                                                    \  lfa= 1C28
  (  1C2A  06 46 4F 52 47 45 )     :  FORGET                                                      \  cfa= 1C32
  (  1C32  12 14 DE          )                      '
  (  1C35  12 19 96          )                      >NAME
  (  1C38  12 04 88          )                      CELL-
  (  1C3B  12 02 E4          )                      DUP
  (  1C3E  12 06 CA          )                      CP
  (  1C41  12 02 06          )                      !
  (  1C44  12 02 1E          )                      @
  (  1C47  12 02 E4          )                      DUP
  (  1C4A  12 06 E4          )                      LAST
  (  1C4D  12 09 26          )                      2!
  (  1C50  22                )                      RET
  (  1C51  00                )                      
  \ -------------------------------------------------------------------------------
  (  1C52  2A 1C             )                                                                    \  lfa= 1C52
  (  1C54  03 56 45 52       )     :  VER                                                         \  cfa= 1C58
  (  1C58  12 01 7C 02 02    )                      doLIT    0202
  (  1C5D  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1C5E  54 1C             )                                                                    \  lfa= 1C5E
  (  1C60  02 68 69          )     :  hi                                                          \  cfa= 1C64
  (  1C64  12 01 34          )                      !IO
  (  1C67  12 0D 82          )                      CR
\ (  1C6A  12 0D BC          )                      ."| eForth v2.2xx"
  (  1C6A  12 0D BC          )                      ."| 429-82N11j7  "
\ (  1C6A  12 0D BC          )                      ."| eForth v2.2xx   429-82N11j5                                 "
\                                                       123456789012345678901234567890123456789012345678901234567890
  (  1C79  12 0D 82          )                      CR
  (  1C7C  22                )                      RET
  (  1C7D  00                )

  ''  hi      cfa'.of.hi*    !.
  \ -------------------------------------------------------------------------------
  (  1C7E  60 1C             )                                                                    \  lfa= 1C7E
  (  1C80  05 27 42 4F 4F 54 )     :  'BOOT                                                       \  cfa= 1C86
  (  1C86  12 05 7A 64 1C    )                   ( doVAR    1C64 )    cfa'.of.hi*   ,doVAR*+(#)
  (  1C8B  00                )                     ret
  \ -------------------------------------------------------------------------------








 \ -------------------------------------------------------------------------------
  (  1F56  3C 1F             )                                                                    \  lfa= 1F56
  (  1F58  02 57 53          )     :  WS                                                          \  cfa= 1F5C
  (  1F5C  12 1A 6E          )                      WORDS
  (  1F5F  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1F60  58 1F             )                                                                    \  lfa= 1F60
  (  1F62  03 54 3C 50       )     :  t<h'   (.from.length.--.)                                   \  cfa= 1F66
  (  1F66  12 02 54          )                      >R
  (  1F69  12 01 E0 7D 1F    )   AHEAD,           \ branch   1F7D   \ 1F69 --> 1F7D  *********
                                   BEGIN                            \ 1F7D --> 1F6E  +++
  (  1F6E  12 0C D6          )                      KEY
  (  1F71  12 03 24          )                      OVER
  (  1F74  12 02 6A          )                      R@
  (  1F77  12 03 D2          )                      +
  (  1F7A  12 02 2E          )                      C!
                                 THEN,                              \ 1F69 --> 1F7D  *********
  (  1F7D  12 01 96 6E 1F    )     NEXT           \ nex.     1F6E   \ 1F7D --> 1F6E  +++
  (  1F82  12 03 02          )                      DROP
  (  1F85  22                )                      RET
  \ -------------------------------------------------------------------------------
  (  1F60  58 1F             )                                                                    \  lfa= 1F60
  (  1F62  03 54 3C 50       )     :  t<h    (.from.length.--.)                                   \  cfa= 1F66
  (  1F66  12 02 54          )                   {1-}  {DUP>R}  \  >R
                                   BEGIN                            \ 1F7D --> 1F6E  +++
                                      2DUP R@ -  +  KEY  SWAP  C!
  (  1F6E  12 0C D6          )                    \ KEY
  (  1F71  12 03 24          )                    \ OVER
  (  1F74  12 02 6A          )                    \ R@
  (  1F77  12 03 D2          )                    \ +
  (  1F7A  12 02 2E          )                    \ C!
  (  1F7D  12 01 96 6E 1F    )     NEXT           \ nex.     1F6E   \ 1F7D --> 1F6E  +++
  (  1F82  12 03 02          )             2DROP  \ DROP
  (  1F85  22                )                      RET

'' t<h   cfa'.of.t<h  !.

:.  r=t     t  r=r  ;.

t:  t<h'   (.from.length.--.)  r3=t {drop}   r2=t {drop}
                     R4=40004400
    begin'
         begin'      R1=(R4)
                     R1n20,s
         until'nz    1 4 r=(r)b
                     0 4 R=(R)b   \ to reset (40004400).1=0
                     2 1 (r)=r,b
                     r2+1
                     r3-1
   until'z  ret'

t:  t<h'''    (.from.length.--.)  r3=t {drop}   r2=t {drop}
                     R4=40004400
    begin'
         begin'      R1=(R4)
                     R1n20,s
         until'nz    1 4 4 r=(r+#)b
                     0 4 0 R=(R+#)b   \ to reset (40004400).1=0
                     2 1 (r)=r,b
                     r2+1
                     r3-1
   until'z  ret'
  \ -------------------------------------------------------------------------------
  (  1F86  62 1F             )                                                                    \  lfa= 1F86
  (  1F88  03 54 3E 50       )     :  t>h'   (.from.length.--.)                                   \  cfa= 1F8C
  (  1F8C  12 02 54          )                      >R
  (  1F8F  12 01 E0 A0 1F    )   AHEAD,           \ branch   1FA0   \ 1F8F --> 1FA0  !!!!!!!!!!!!!!!!!!
                                   BEGIN                            \ 1FA0 --> 1F94  ////////////
  (  1F94  12 02 E4          )                      DUP
  (  1F97  12 02 6A          )                      R@
  (  1F9A  12 03 D2          )                      +    C@
  (  1F9D  12 0C E8          )                      EMIT
                                 THEN,                              \ 1F8F --> 1FA0  !!!!!!!!!!!!!!!!!!
  (  1FA0  12 01 96 94 1F    )     NEXT           \ nex.     1F94   \ 1FA0 --> 1F94  ////////////
  (  1FA5  12 03 02          )                      DROP
  (  1FA8  22                )                      RET
  (  1FA9  00                )

  \ -------------------------------------------------------------------------------
  (  1F86  62 1F             )                                                                    \  lfa= 1F86
  (  1F88  03 54 3E 50       )     :  t>h    (.from.length.--.)                                   \  cfa= 1F8C
  (  1F8C  12 02 54          )                {1-}  {DUP>R}  \ >R
                                   BEGIN                            \ 1FA0 --> 1F94  ////////////
  (  1F94  12 02 E4          )                      2DUP     \ DUP
  (  1F97  12 02 6A          )                      R@       \ R@
  (  1F9A  12 03 D2          )                      -  +  C@ \  +    C@
  (  1F9D  12 0C E8          )                      EMIT
  (  1FA0  12 01 96 94 1F    )     NEXT           \ nex.     1F94   \ 1FA0 --> 1F94  ////////////
  (  1FA5  12 03 02          )           2DROP    \ DROP
  (  1FA8  22                )                      RET
  (  1FA9  00                )

''   t>h   cfa'.of.t>h  !.
  \ -------------------------------------------------------------------------------
  (  1FAA  88 1F             )                                                                    \  lfa= 1FAA
  (  1FAC  05 44 4F 45 53 3E )     :  DOES>                                                       \  cfa= 1FB2
  (  1FB2  12 02 84          )                      R>
\ (  1FB5  12 04 24          )                      FLIP
  (  1FB8  12 06 CA          )                      CP
  (  1FBB  12 02 1E          )                      @
  (  1FBE  12 01 7C 03 00    )                      doLIT    8
  (  1FC7  12 03 E2          )                      -
  (  1FC6  12 02 06          )                      !
  (  1FC9  22                )                      RET
  \ -------------------------------------------------------------------------------




  (  1C8C  80 1C             )                                                                      \  lfa= 1C8C
  (  1C8E  04 43 4F 4C 44    )     :  COLD''                                                        \  cfa= 1C94
\                               ( t:  main )   sp 0378 r=#  sp 2001 Rt=#     ( sp=20010378    -2 allot' )
\                                              rp 0300 r=#  rp 2001 Rt=#     \  cold.stm32f4     ret
                                 BEGIN                                       \ 1CC7 --> 1C94  ===============
  (  1C94  12 01 7C 40 00    )                    ( doLIT    20012040 )  doUSER.base.in.rom    @.  ,doLIT*+#   \ 0040
  (  1C99  12 01 7C 00 80    )                    ( doLIT    20012100 )  doUSER.base.in.ram    @.  ,doLIT*+#   \ 8000
  (  1C9E  12 01 7C 50 00    )                    ( doLIT          54 )  USER.variable.length  @.  ,doLIT*+#   \ 0050
  (  1CA3  12 09 B8          )                      CMOVE
                                                    uart.init.stm32F429.eF
                                                    uart.switch.stm32F429.eF
  (  1CA6  12 13 D6          )                      PRESET
  (  1CA9  12 1C 86          )                   \  'BOOT
  (  1CAC  12 09 A0          )                   \  @EXECUTE
  (  1CAF  12 07 00          )                      FORTH
  (  1CB2  12 06 AE          )                      CONTEXT
  (  1CB5  12 02 1E          )                      @
  (  1CB8  12 02 E4          )                      DUP
  (  1CBB  12 06 BE          )                      CURRENT
  (  1CBE  12 09 26          )                      2!
  (  1CC1  12 17 9E          )                      OVERT      ret
  (  1CC4  12 14 6E          )                      QUIT
  (  1CC7  12 01 E0 94 1C    )   AGAIN             -ret   \ branch   1C94 ) \ 1CC7 --> 1C94  ===============
  \ -------------------------------------------------------------------------------
  :. CREATE'     :   ,doLIT*  here'  6  +.  32,'  ret           ;.   \ used in ram only
  :. VARIABLE'   :   ,doLIT*  here'  6  +.  32,'  ret  0  32,'  ;.   \ used in ram only
  :. exit    bd00 16,'  ( ret )  ;.


  :  >     SWAP  <      ;
  :  BETWEEN     >R    OVER   >    SWAP   R>   >   OR   NOT  ;

     CREATE'   command.table   here' 10  >DATA.RANGE.BUFFER     10  allot'           \  10  CP'  +!.  \  ALLOT   \ 8*3=24=18

  :  get.command  ( - n)   0
     BEGIN  DROP  KEY  0DF   AND  41  -  DUP 4  U<   \  A~D or a~d
     UNTIL  ;      \ 'A'=41 ;  'a'=61.

comment:
  t: get.command  ( - n)   {0}
     BEGIN'     {DROP}  KEY  Tn0DF   T-41     \  A~D or a~d
     UNTIL'c=1  ret      \ 'A'=41 ;  'a'=61.
comment;

   :  execute.command   ( n -)  4  *  command.table  +  @  EXECUTE  ;
\ t:  execute.command   ( n -)  push.LR  T<<2  command.table  {+}  {@}  {EXECUTE}  ret

  t:  init.tF0   '' '?KEY 6 +.  32@'  '' ?rx   (#)=#
                 '' 'emit 6 +.  32@'  '' tx!   (#)=#
                 (20012130)=10                               \  base
                  20012130  10                 (#)=#         \  base
              \  (20012110)=20010378                         \  sp0     ???????????
                  20012110  (sp0)  @.          (#)=#         \  sp0
              \  (20012114)=20010300                   ret'  \  rp0     ???????????
                  20012114  (rp0)  @.          (#)=#   ret'  \  rp0

  :  tF      hex     \  rp=20010300   sp=20010378   initialize
     BEGIN   ( CR )     get.command   execute.command   \ CR    .S
     AGAIN   ;

  :  tF0     init.tF0   tF  ; \ 36f0  execute


  :  '0'~'F'>0~F  ( n - n1 -1 | n 0 )   \ DIGIT
     >R  R@  30  39   BETWEEN  IF   R>  30  -  -1   exit    THEN
         R@  41  46   BETWEEN  IF   R>  37  -  -1   exit    THEN  R>  0   ;

  :  10*  4   LSHIFT  ;


   : enter.8n      ( - n)      0 
     BEGIN    KEY   DUP  0D  =   OVER  20  =  OR
       IF     DROP  EXIT
       THEN   upc   '0'~'F'>0~F
       IF     SWAP  10*   +
       ELSE   DROP
       THEN
     AGAIN    ;



  t:  10/    T>>4    ret'

  t:  10/mod   ( n ... r q )   push.LR  {dup}  Tn0F    swap   10/   ret
  t:  0~F>'0'~'F'    tn0F    t 0a r:#  ( t:0a ) ( not 9 )  if'u>=  t+7  then'   t+30   ret'   \ digit
  t:  .n   ( n -- )  push.LR   0~F>'0'~'F'  emit   ret
  t:  .2n  ( n -- )  push.LR   10/mod   .n  .n     ret

  t:  .8n? ( n -- )  push.LR   {dup}  t=6  for  10/mod  next
                               {dup}  t=7  for  .n      next     ret

  t:  .8n  ( n -- )  push.LR   10/mod   10/mod     10/mod   10/mod   10/mod  10/mod   10/mod  .n  .n  .n  .n     .n  .n  .n  .n   ret

  t:  ENTER.8.digit   ( -- n)     push.LR     {dup}     Y=0
      begin'      drop      key ( KEY.io )  t 0d r:#  ( T:0d )
      while'<>    t 20 r:#  ( T:20 )
                  if'<>. \  t=w   ret    then'
                  '0'~'F'>0~F   ( T:0/  )    Tn0FF      t 0ff r:#  ( T:FF )
         if'<>    Y*10   Y+t    \ merge
         then'
      repeat'     then'.    t=Y   RET

  :.   t-sp   t  sp  r-r  ;.
  :.   t:sp   t  sp  r:r  ;.

  t:  .stack     push.LR             cr  ( space ) {dup}    T=28   emit    \  (
      {dup}   T (sp0)  @. ( sp0 ) ldri      t-sp    {cell/}   .2n
                                                   {dup}    T=29   emit    \  )
      {dup}   T (sp0)  @. ( sp0 ) ldri              {cell-}
      begin'      t:sp
      while'u>=   {dup}   space   T=(T)   .8n      {cell-}
      repeat'     cr      drop    ret

  insert{  ''  command.table  0C  +.  ORG
                     ''  QUIT         32,'  \  A
                     ''  EXECUTE      32,'  \  B
                     ''  .stack       32,'  \  C   .s
                     ''  enter.8n     32,'  \  D
  }insert


  :  get.command.1    (.--.n.)         key   ;
  :  execute.command.1  (.n.--.)               df    and
     dup  'A' = if  drop    QUIT       exit  then
     dup  'B' = if  drop    execute    exit  then
     dup  'C' = if  drop    .stack     exit  then
          'D' = if          enter.8n   exit  then  ;

  :  tF1   begin   ( cr )   get.command.1   execute.command.1     again

  :  get+execute.command.2  (.--.)     key   df    and
     dup  'A' = if  drop    QUIT       exit  then
     dup  'B' = if  drop    execute    exit  then
     dup  'C' = if  drop    .stack     exit  then
          'D' = if          enter.8n   exit  then  ;

  :  tF2    begin  ( cr )   get+execute.command.2     again

variable'  Xa
variable'  Xn

variable'  Xa'
variable'  Xn'

: replace  ( a' -- )  dup  Xa  !   dup  @  Xn  !   bd00 ( ret  )  swap ! ;     : \\    replace   ;
: replace' ( a' -- )  dup  Xa' !   dup  @  Xn' !   4770 ( ret' )  swap ! ;     : \\'   replace'  ;
: restore  ( -- )     Xn   @   Xa   @   !   ;                                  : //    restore   ;
: restore' ( -- )     Xn'  @   Xa'  @   !   ;                                  : //'   restore'  ;

\ :  main.Forth    MAIN  ret           :  mF     main.Forth   ret
  :  mecrispForth  382c  execute  ;    :  mF   mecrispForth   ;


:.  SPT=#  SP  SWAP.  RT=#  ;.
:.  RPT=#  RP  SWAP.  RT=#  ;.

:.  SP=#   0  10000   UM/MOD.     SP  rot.  R=#16      SPT=#  ;.
:.  RP=#   0  10000   UM/MOD.     RP  rot.  R=#16      RPT=#  ;.


:.    sp=20010378     (sp0)  @.   SP=#   ;.
:.    rp=20010300     (rp0)  @.   RP=#   ;.


cortex.m0?  @.
#if
:.    sp=20010378    0 (sp0)  @. r=#   sp 0  r=r  ;.
:.    rp=20010300    0 (rp0)  @. r=#   rp 0  r=r  ;.
#then

  t:  ef51>ram     r0=20016000  r1=4000  begin'   r0-4  r1-4   r2=(r1)   (r0)=r2    until'z   ret'

  :. >tF0    exi  ini
     '' ef51>ram  20012000  -.  number>232  232." execute"
     '' tF0                     number>232  232." execute"   ;.


\ : EF430                   72EC    EXECUTE  ;
  : EF430     '' MAIN ... ( 72F4 )  EXECUTE  ;

-4 ALLOT'   \ ?????????????????   '' MAIN ???????


: YY  10     FOR  R@ .  NEXT  ;
: PP  10  0  DO    I .  LOOP  ;

comment:                                  L:  REMAP(rom)
  (  00000160  4F F0 00 60       )                  R0=8000000
  (  00000164  4F F0 00 51       )                  R1=20000000
  (  00000168  01 F5 A0 42       )                  R2=R1+5000
                                          begin'                     \ 00000178 --> 0000016C +++++
  (  0000016C  91 42             )                  R1:R2
  16E BF3C     <-- ???????????  
  (  00000170  50 F8 04 3B       )                  R3=(R0+4),p
  (  00000174  41 F8 04 3B       )                  (R1+4)=R3,w
  (  00000178  F8 D3             )        until'u>= \ c=0? lo?       \ 00000178 --> 0000016C +++++
  (  0000017A  70 47             )                  jmp_RE



                                     L:  Reset_Handler(rom)
  (  00000150  00 F0 14 F8       )                  InitDevices(rom)                                            \       17C
  (  00000154  01 F0 AE FB       )                  rcall_18B4           \ UNLOCK
  (  00000158  00 F0 02 F8       )                  REMAP(rom)                                                  \       160
  (  0000015C  11 48             )                  R0=200022B9                                 \ (000001A4)=200022B9
  (  0000015E  00 47             )                  jmp_R0
                                     L:  REMAP(rom)
  (  00000160  4F F0 00 60       )                  R0=8000000
  (  00000164  4F F0 00 51       )                  R1=20000000
  (  00000168  01 F5 A0 42       )                  R2=R1+5000
                                          begin'                     \ 00000178 --> 0000016C +++++
  (  0000016C  91 42             )                  R1:R2
  16E BF3C     <-- ???????????  
  (  00000170  50 F8 04 3B       )                  R3=(R0+4),p
  (  00000174  41 F8 04 3B       )                  (R1+4)=R3,w
  (  00000178  F8 D3             )        until'u>= \ c=0? lo?       \ 00000178 --> 0000016C +++++
  (  0000017A  70 47             )                  jmp_RE
                                     L:  InitDevices(rom)
                                      \  ; init Reset Clock Control RCC registers   (40021018)o401C
  (  0000017C  0A 48             )                  R0=40021000          \ RCC \ GPIOE_BASE           \ (000001A8)=40021000
  (  0000017E  81 69             )                  R1=(R0+18)           \ RCC_AHB2ENR
  (  00000180  44 F2 1C 07       )                  R7=401C
  (  00000184  41 EA 07 01       )                  R1=R1oR7<<0
  (  00000188  81 61             )                  (R0+18)=R1
                                      \  ; init GPIOA               (40010804)o4A0
  (  0000018A  08 48             )                  R0=40010800                                 \ (000001AC)=40010800
  (  0000018C  41 68             )                  R1=(R0+4)
  (  0000018E  41 F4 94 61       )                  R1=R1o4A0
  (  00000192  41 60             )                  (R0+4)=R1
                                      \  ; init USART1              (40013818)=340C,h    (40013810)=8F,h
  (  00000194  06 48             )                  R0=40013800          \ SYSCFG_BASE          \ (000001B0)=40013800
  (  00000196  43 F2 0C 41       )                  R1=340C
  (  0000019A  81 81             )                  (R0+18)=R1,h
  (  0000019C  40 F2 8F 01       )                  R1=45 \ 8F
  (  000001A0  01 81             )                  (R0+10)=R1,h
  (  000001A2  70 47             )                  ret'  \ jmp_RE




                                   t:  move  ( from' to' length -- )  nip>r0,r1  R2=R1+R6  {drop}
  (  00000160  4F F0 00 60       )               \  R0=8000000     \  from
  (  00000164  4F F0 00 51       )               \  R1=20000000    \  to
  (  00000168  01 F5 A0 42       )               \  R2=R1+5000     \  to+length
                                          begin'                     \ 00000178 --> 0000016C +++++
  (  0000016C  91 42             )                1 2 R:R  \  R1:R2
\  16E BF3C     <-- ???????????
  (  00000170  50 F8 04 3B       )                R3=(R0+10),p   \ R3=(R0+4),p
  (  00000174  41 F8 04 3B       )                (R1+10)=R3,w   \ (R1+4)=R3,w
  (  00000178  F8 D3             )        until'u>= \ c=0? lo?       \ 00000178 --> 0000016C +++++
  (  0000017A  70 47             )                ret'



                                   t:  eForth(prog4004)  ( -- )
  (  00000160  4F F0 00 60       )                R0=8000000
  (  00000164  4F F0 00 51       )                R1=20000000
  (  00000168  01 F5 A0 42       )                R2=R1+5000
                                          begin'                     \ 00000178 --> 0000016C +++++
  (  0000016C  91 42             )                1 2 R:R  \  R1:R2
\  16E BF3C     <-- ???????????
  (  00000170  50 F8 04 3B       )                R3=(R0+10),p       \ R3=(R0+4),p
  (  00000174  41 F8 04 3B       )                (R1+10)=R3,w       \ (R1+4)=R3,w
  (  00000178  F8 D3             )        until'u>= \ c=0? lo?       \ 00000178 --> 0000016C +++++
                                    R0=200022B9  JMP_R0              \ COLD ( cfa' ) of eForth(prog4004)
  (  0000017A  70 47             )                 -ret'  \  jmp_RE

: PF  eForth(prog4004)  ( -- )  ;
comment;

\ : PF   150  EXECUTE  ;   \ eForth(prog4004)  COLD START




comment:
 :.  (#)=#,h  ( # # - )  1  swap. R=#    0 swap. R=#   0 0 1 (R+#)=R,h  ;.

t:  InitDevices(rom)   \ : !IO ( -- )  401C 40021018  or!    4A0 40010804 or!   340C 40013818 h!   8F 40013818 h!   ;
( L;  init.RCC    )    (40021018)o401C     \  ; init Reset Clock Control RCC registers   (40021018)o401C
( L;  init GPIOA  )    (40010804)o4A0
( L;  init USART1 )    (40013818)=340C,h     (40013810)=8F,h     COLD
  -ret'

: !IO1  ( -- )  401C 40021018  or!    4A0 40010804 or!   340C 40013818 h!   8F 40013818 h!   ;

t:  UNLOCK   ( -- )    (40022004)=45670123   (40022004)=CDEF89AB   ret'  \
 :  unlock1  ( -- )               45670123 40022004 !   CDEF89AB 40022004 !  ;
comment;


t:  !IO1  ( -- )  push.LR  401C ... 40021018 ... or!        4A0 ... 40010804 ... or!
                           340C ... 40013818 ...  h!         8F ... 40013818 ...  h!
                       45670123 ... 40022004 ...   !   CDEF89AB ... 40022004 ...   !
    ret

























\ t: SCOPE     rp=20003ef8       5991  jmp_#24   -ret
  t: SCOPE     rp=20003ef8    R0=5991  jmp_R0    -ret

  (  1C8C  80 1C             )                                                                    \  lfa= 1C8C
  (  1C8E  04 43 4F 4C 44    )   t:  COLD                                                         \  cfa= 1C94
                                                     R0  (rp0)  @.   r=#    RP  0  r=r
                                                     R0  (sp0)  @.   r=#    SP  0  r=r
                                                 \   !IO1
                                                \   begin'   55 ... tx!    100000  FOR'R0  NEXT'R0   again'

                                           cortex.m0?  @.
                                           #if      uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF     \ ??????????
                                           #else
                                                    uart.init.stm32F429.eF
                                               \  uart.switch.stm32F429.eF
                                           #then

                                                 \   R0  (rp0)  @.   r=#    RP  0  r=r
                                                 \   R0  (sp0)  @.   r=#    SP  0  r=r

                                 BEGIN                                       \ 1CC7 --> 1C94  ===============
  (  1C94  12 01 7C 40 00    )                    ( doLIT    20012040 )  doUSER.base.in.rom      @.  8051eForth.based.addr @. +.  ,doLIT*+#   \ 0040
  (  1C99  12 01 7C 00 80    )                    ( doLIT    20012100 )  doUSER.base.in.ram      @.  ram.offset  @.  +.           ,doLIT*+#   \ 8000
  (  1C9E  12 01 7C 50 00    )                    ( doLIT          54 )    USER.variable.length  @.  ,doLIT*+#   \ 0050
  (  1CA3  12 09 B8          )                      CMOVE
  (  1CA6  12 13 D6          )                      PRESET  \ doLIT 0000  \ ??????????  sp0=20010374
  (  1CA9  12 1C 86          )             ( cr  \ )    'BOOT
  (  1CAC  12 09 A0          )             ( cr  \ )    @EXECUTE
  (  1CAF  12 07 00          )                      FORTH
  (  1CB2  12 06 AE          )                      CONTEXT
  (  1CB5  12 02 1E          )                      @
  (  1CB8  12 02 E4          )                      DUP
  (  1CBB  12 06 BE          )                      CURRENT
  (  1CBE  12 09 26          )                      2!
  (  1CC1  12 17 9E          )                      OVERT
                                 \    begin 55 ...  emit  10000 ... for  next  again         \ 38 emit 39 emit
                                 \                  BEGIN  CR  10000 ...  0 ... DO  LOOP   KEY  .  AGAIN
  (  1CC4  12 14 6E          )                      QUIT
  (  1CC7  12 01 E0 94 1C    )   AGAIN              -ret   \ branch   1C94 ) \ 1CC7 --> 1C94  ===============
















                                     t:  Init.RCC  ( -- )
                                      \  ; init Reset Clock Control RCC registers   (40021018)o401C
  (  0000017C  0A 48             )                  R0=40021000          \ RCC_CR               \ (000001A8)=40021000
  (  0000017E  81 69             )                  R1=(R0+18)           \ RCC_AHB2ENR
  (  00000180  44 F2 1C 07       )                  R7=401C
  (  00000184  41 EA 07 01       )                  R1=R1oR7<<0
  (  00000188  81 61             )                  (R0+18)=R1
                                                    ret'

                                     t:  init.GPIOA  ( -- )   \ (40010804)o4A0
  (  0000018A  08 48             )                  R0=40010800                                 \ (000001AC)=40010800
  (  0000018C  41 68             )                  R1=(R0+4)
  (  0000018E  41 F4 94 61       )                  R1=R1o4A0
  (  00000192  41 60             )                  (R0+4)=R1
                                                    ret'

                                     t:  init.USART1 ( -- )   \ (40013818)=340C,h    (40013810)=8F,h
  (  00000194  06 48             )                  R0=40013800          \ SYSCFG_BASE          \ (000001B0)=40013800
  (  00000196  43 F2 0C 41       )                  R1=340C
  (  0000019A  81 81             )                  (R0+18)=R1,h
  (  0000019C  40 F2 8F 01       )                  R1=45 \ 341 1a0 d0 8b 45 \ 8F : 57600   \ 8B : 115200 ?????
  (  000001A0  01 81             )                  (R0+10)=R1,h
  (  000001A2  70 47             )                  ret'    \ jmp_RE



                                     t:  UNLOCK   \ (40022004)=45670123   (40022004)=CDEF89AB   ret'
  (  200018B4  21 48             )                  R0=40022000          \ GPIOI_BASE           \ (2000193C)=40022000
  (  200018B6  22 4C             )                  R4=45670123                                 \ (20001940)=45670123
  (  200018B8  44 60             )                  (R0+4)=R4
  (  200018BA  22 4C             )                  R4=CDEF89AB                                 \ (20001944)=CDEF89AB
  (  200018BC  44 60             )                  (R0+4)=R4
  (  200018BE  70 47             )                  ret'  \ jmp_RE

                                     t:  Reset_Handler(rom)
  (  00000150  00 F0 14 F8       )                  Init.RCC                                    \       17C
                                                    init.GPIOA
                                                    init.USART1
  (  00000154  01 F0 AE FB       )                  UNLOCK
  (  0000015C  11 48             )             0 '' COLD 1+. R=#    jmp_R0   -ret'                                  \ (000001A4)=200022B9


\ :. JMP_cfa'  ( cfa' -- )  1+. 0 r=#  0 jmp_R   -ret'  ;.

















  ''  cold       cfa'.of.cold*    !.

  :. >IC      >tF0   IC    ;.   \ under 430stm32F407.eF ( by reset )

  :. 51M0     >tF0   'D' COMNEMIT  '' COLD   NUMBER>232  200  MS  'B' COMNEMIT  OO  ;.

:.  CALL_R0     0 CALL_R  ;.

:.  CALL.COLD   0 '' COLD 1+.  R=#      0 CALL_R  ;.
\ ***********************************************************************************************













cortex.m0?  @.
#if
                                  :{  {ON}   ( a -- )   t 0 (r)=#/   {drop}  };
                                  :{  {OFF}  ( a -- )   t 0 (r)=#    {drop}  };
                                  t:   ON    ( a -- )   (t)=0/   {drop}   ret'
                                  t:   OFF   ( a -- )   (t)=0    {drop}   ret'


  it?  @.
  #if
                                   t:  >                                                       cfa= 364
  (  00000364  01 CF             )                  nip>r0
  (  00000366  B0 42             )                  0 t r:r  \  R0:T
  (  00000368  CC BF             )                  it'=.>.....itegt
  (  0000036A  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000036E  00 26             )                  T=0
  (  00000370  70 47             )                  ret'
  #else
                                   t:  >                                                       cfa= BBC
  (  00000BBC  01 CF             )              nip>r0   \  ldm     { R0, } sp
  (  00000BBE  B0 42             )      t 0 r:r \        R0:T
  (  00000BC0  02 D5             )      if'n=1  \       BC8....n=0?(+?)
  (  00000BC2  01 26             )              T=0/
  (  00000BC6  70 47             )              ret'
  (  00000BC8  00 26             )      then'   t=0
  (  00000BC4  76 42             )      \  t t 0  rsb_r,r,#  \   rsb_T,T,0
  (  00000BCA  70 47             )              ret'
  #then

                                     t:  nex.   \ swiftx_Forth_styled nex.
  (  00000BA0  04 BC             )              pop.r2
  (  00000BA2  01 3A             )              R2-1
  (  00000BA4  04 B4             )              push.r2
  (  00000BA6  00 2A             )              2  0  r:#  \  R2:0                                                            \
  (  00000BA8  01 D5             )       if'n=1  \      BAE....n=0?(+?)
  (  00000BAA  0D F2 04 0D       )              {r>drop}   \  RD=RD+4
  (  00000BAE  70 47             )       then'  ret'       \  jmp_RE
  \ ------------------------------------------------------------------------
                                    t:  >=                                                      cfa= 320
  (  00000320  01 CF             )                  nip>r0
  (  00000322  B0 42             )                  R0:T
  (  00000324  B4 BF             )      bfb4 16,' \ it'=.<.....itelt
  (  00000326  00 26             )                  T=0
  (  00000328  4F F0 FF 36       )                  T=FFFFFFFF
  (  0000032C  70 47             )                  ret'
  \ ------------------------------------------------------------------------
                                    t:  <=                                                      cfa= 338
  (  00000338  01 CF             )                  nip>r0
  (  0000033A  B0 42             )                  R0:T
  (  0000033C  CC BF             )      bfcc 16,' \ it'=.>.....itegt
  (  0000033E  00 26             )                  T=0
  (  00000340  4F F0 FF 36       )                  T=FFFFFFFF
  (  00000344  70 47             )                  ret'
  \ ------------------------------------------------------------------------
  cortex.m0?   @.
  #if      t:  u>=  nip>r0   0 T R:R  ( T=T-R0 )  IF'C=1  t=-1   ret'  THEN'  t=0  RET'    \ OK
  #else
                                    t:  u>=                                                     cfa= 37C
  (  0000037C  01 CF             )                  nip>r0
  (  0000037E  D6 EB 00 06       )      t t 0 r=r-r \  sub_T,T,R0<<0
  (  00000382  B6 41             )                  t-t-c
  (  00000384  F6 43             )                  {invert}
  (  00000386  70 47             )                  ret'
  #then

t: u<=  nip>r0   0 T R:R (  T=T-R0 )  IF'C=0    0 T R:R  IF'Z=1  t=-1   ret'  THEN'  THEN'  t=0  RET'  \ ???????
  \ ------------------------------------------------------------------------
                                    t:  u<'                                                      cfa= 3A8
  (  000003A6  01 CF             )                  nip>r0
  (  000003A8  D6 EB 00 06       )      t 0 r-r \            sub_T,T,R0<<0
  (  000003AC  B6 41             )                  t-t-c
  (  000003AE  70 47             )                  ret'
  (  000003BA  01 CF             )                  nip>r0

t: u<  nip>r0   0 T R:R ( T=T-R0 )  IF'C=0   t=-1   ret'  THEN'  t=0  RET'   \ OK
  \ ------------------------------------------------------------------------
                                    t:  u>'         nip>r0                                            cfa= 3BC
  (  000003BC  36 1A             )      t t 0 r=r-r \     T=T-R0
  (  000003BE  B6 41             )                  t-t-c
  (  000003C0  70 47             )                  ret'

t: u>  nip>r0   0 T R:R (  T=T-R0 )  IF'C=1   IF'Z=0  t=-1    ret'  THEN'  THEN'  t=0  RET'  \ OK
  \ ------------------------------------------------------------------------
                                    t:  <>'                                                      cfa= 3CC
  (  000003CC  01 CF             )                  nip>r0
  (  000003CE  36 1A             )                  T-R0
  (  000003D0  18 BF             )     if'nz \  bf18 16,' \ it'<>......itne
  (  000003D2  4F F0 FF 36       )                  T=FFFFFFFF
  (  000003D6  70 47             )     then'        ret'

t: <>   nip>r0   T=T-R0  IF'Z=1   t=0   ret'  THEN'  t=-1  RET'     \ OK
  \ ------------------------------------------------------------------------
                                    t:  invert      {invert}   ret'
#then
\ *******************************************************************************************************
:.  erase.flash'  0 10000 ff fill'  ;.

nuc453eF?  @.
#if
#else
\ :  ++++    (.n.n.n.n.--.n.)   >r0~3  '' add4  call.c  {dup}  t=r0  ;

:  LCD           ( 200116B8 )   CH8_ILI9341    CALL.C   ;  \ ?????
\  LCD''           200116B8   ( CH8_ILI9341 )  EXECUTE  ;  \ OK
\  LCD'''              '' LCD'  ...     EXECUTE  ;         \ OK
\  LCD                    LCD'                   ;         \ OK

:  LINE' (.x1.y1.x2.y2.--.)   >r0~3    ( 2001168C )   DRAWLINE     CALL.C   ;  \ OK  ( x1 y1 x2 y2 -- )  \  0 0 100 100  LINE
\  LL    ( 20000444 )   '' LINE  ...     EXECUTE  ;         \ OK  ( x1 y1 x2 y2 -- )     0 0 100 100  LL
:  LINE  (.x1.y1.x2.y2.--.)   {>r}  {>r}  {>r}  0ef  {r>}  -  {r>}  0ef  {r>}  -
                              >r0~3    ( 2001168C )   DRAWLINE     CALL.C   ;  \ OK  ( x1 y1 x2 y2 -- )  \  0 0 100 100  LINE
:  ----'   LINE'  ;
:  ----    LINE   ;

:  DOT'  (.x.y.--.)              over  {1+}  over  {1+}   line  ;
:  DOT'' (.x.y.--.)  2dup  {1+}  over  {1+}  over         line
                                 over  {1+}  over  {1+}   line  ;

:  DOT   (.x.y.--.)  2dup  {1+}  over  {1+}  over  {1-}   line
                                 over  {1+}  over  {1+}   line  ;

:       circle     ( x y radius color -- )  >r0~3  TM_ILI9341_DrawCircle     call.c  ;
:  o    circle     ( x y radius color -- )  ;

:       Rectangle  ( x y x2 y2  -- )        >r0~3  TM_ILI9341_DrawRectangle  call.c  ;
:  []   Rectangle  ( x y x2 y2  -- )        ;

\  20000400 ( from )  DUP. ( to ) 20020000  OVER.  -. ( length )  p>t
:  dram   '' ch14_sdram ... ( 20011724 ) EXECUTE  '' write_sdram ... ( 200117C4 ) EXECUTE  '' read_sdram ...  ( 2001180C ) EXECUTE ;
#then

nuc442eF?  @.  DROP.  0
#if   \  include   nuc472_target_pin_address1.f
  t:  PG.2=0   (.--.)   40004988 0  (#)=#   ret'
  t:  PG.3=0   (.--.)   4000498C 0  (#)=#   ret'
  t:  PG.4=0   (.--.)   40004990 0  (#)=#   ret'

  t:  PG.2=1   (.--.)   40004988 1  (#)=#   ret'
  t:  PG.3=1   (.--.)   4000498C 1  (#)=#   ret'
  t:  PG.4=1   (.--.)   40004990 1  (#)=#   ret'
\ include  NUC472_TARGET_PIN_ADDRESS1a.F
#then















\ :  end  ;  \ always at the end to ensure the linking to the previous eForth linkage.

8051eForth.based.addr @.   20000000  2001FFFF  between.
#if  \  t:  main*  push.LR  sp=20010378    ( rp=20010300 ) 0 '' ef51>ram 8051eForth.based.addr @. -. 1+.  r=#   call_r0   0 '' COLD  1+. R=#  0 CALL_R  ret
        t:  main*  push.LR (sp0)  @.  sp=# ( rp=20010300 ) 0 '' ef51>ram 8051eForth.based.addr @. -. 1+.  r=#   call_r0   0 '' COLD  1+. R=#  0 CALL_R  ret
:.      51stm32f4xx.eForth.ONLY     erase.flash'  8051eForth.based.addr @. dup>r. ( 20012000 ) 0 4000 cmove'  (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.51          8051eForth.based.addr @. dup>r. ( 20012000 ) 0 4000 cmove'  (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.430         8051eForth.based.addr @.        ( 20012000 ) 0 4000 cmove'  (rp0)  @. 0 32!'  '' main  1+.           4 32!'  1.hex  ;.

#else   t:  main*  push.LR (sp0)  @.  sp=# ( rp=20010300 ) 0 '' ef51>ram 8051eForth.based.addr @. -. 1+.  r=#   call_r0   0 '' COLD  1+. R=#  0 CALL_R  ret

:.      51stm32f4xx.eForth.ONLY               erase.flash'     (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.51                       (rp0)  @. 0 32!'  '' main* 1+.  r>.  -.  4 32!'  1.hex  ;.
:.  430+51stm32f4xx.eForth.start.from.430                      (rp0)  @. 0 32!'  '' main  1+.           4 32!'  1.hex  ;.
#then

 '' main*    cfa'.of.MAIN*  !.





  \ -------------------------------------------------------------------------------
variable.  here'(cold)
here'      here'(cold)  !.

insert{     0  8051eForth.based.addr  @.  +.   org       (rp0)  @.    32,'   \ native return stack pointer content
            4  8051eForth.based.addr  @.  +.   org    '' cold 1+.    jmp    \ 20012004   jmp cold

               8051eForth.based.addr  @.  doUSER.base.in.rom  @.  +.  org   \ 20012040
  (  0040  )     '' ef51>ram  8051eForth.based.addr @. -.  ( 20012000 -. )  ( 0000 )  32,'  \ in rom area
  (  0042  )     '' main*                                  ( 0000 )  32,'                   \ in ram area
  (  0044  )                                                 0000    32,'
  (  0046  )                                                 0000    32,'
  (  0048  )        (sp0)  @.                              ( 0050 )  32,'   \ 20010378 --> 20012050
  (  004A  )        (rp0)  @.                              ( 0010 )  32,'   \ 20010300 --> 20012010
  (  004C  )     ''  ?RX                                   ( 0140 )  32,'
  (  004E  )     ''  TX!                                   ( 0160 )  32,'
  (  0050  )     ''  accept                                ( 11CE )  32,'
  (  0052  )     ''  kTAP                                  ( 118C )  32,'
  (  0054  )     ''  emit   ( TX! )                        ( 0160 )  32,'
  (  0056  )     ''  .OK                                   ( 1360 )  32,'
  (  0058  )                                                 0010    32,'   \ base   16
  (  005A  )                                                 0000    32,'
  (  005C  )                                                 0000    32,'
  (  005E  )                                                 0000    32,'
  (  0060  )    ( #TIB )                                     0000    32,'
  (  0062  )    ( 'tib ) content.of.'tib*  @. ( 20018080 ) ( 8080 )  32,'   \
  (  0064  )                                                 0000    32,'
  (  0066  )     ''  $INTERPRET                            ( 1310 )  32,'
  (  0068  )     ''  NUMBER?                               ( 0BEE )  32,'
  (  006A  )                                                 0000    32,'
  (  006C  )                                                 0000    32,'
  (  006E  )    ( CONTEXT )                                             0000    32,'
  (  0070  )                                                 0000    32,'
  (  0072  )                                                 0000    32,'
  (  0074  )                                                 0000    32,'
  (  0076  )                                                 0000    32,'
  (  0078  )                                                 0000    32,'
  (  007A  )                                                 0000    32,'
  (  007C  )                                                 0000    32,'
  (  007E  )                                                 0000    32,'
  (  0080  )    ( CURRENT )                                             0000    32,'
  (  0082  )                                                 0000    32,'

  (  0084  )  here'(cold) @.   8051eForth.based.addr  @.  20000000 2001FFFF  between.  not. #if  drop.  DOWNLOAD.TO.RAM.START  @.  #then  32,'  \ cp
  (  0086  )  here'(cold) @.   8051eForth.based.addr  @.  20000000 2001FFFF  between.  not. #if  drop.  DOWNLOAD.TO.RAM.START  @.  #then  32,'  \ cp

\ (  0084  )  here'(cold) @. ( 8051eForth.based.addr  @. ) ( 8100 )  32,'  \ cp
\ (  0086  )  here'(cold) @. ( 8051eForth.based.addr  @. ) ( 8100 )  32,'  \ np

     here'    addr.of.LAST'(stored.at.rom)  !.

  (  0088  )     ''  main* ( COLD )  CFA'>NFA'(ADJACENT)   ( 1C8E )  32,'  \ last*  @.   LAST'(ADJACENT)  @.
  (  008A  )     ''  main* ( COLD )  CFA'>NFA'(ADJACENT)   ( 1C8E )  32,'  \ last*  @.
  (  008C  )                                                 0000    32,'
  (  008E  )                                                 0000    32,'

}insert

:.  code      t:      ;.
:.  end-code  ret'    ;.
:.  c;        ret'    ;.

          T:QUEUE.COUNTER.old   @.  0=.
#if       T:QUEUE.COUNTER   @.          T:QUEUE.COUNTER.old  !.
   from->to.QUEUE.COUNTER   @.   from->to.QUEUE.COUNTER.old  !.
      T:NFA.QUEUE.COUNTER   @.      T:NFA.QUEUE.COUNTER.old  !.
      T:NFA.QUEUE.COUNTER*  @.      T:NFA.QUEUE.COUNTER.old* !.
#then

\ :.  mu    20011000  200u   30u  ;.
\     mu



STM32F103?  @.
#IF
   : nfa>cfa ( nfa -- cfa )  count  1f  and  +  aligned  ;  \ 51m0stm32F407eF  51m3stm32F407eF
#ELSE
   cortex.m0?  @.
   #if
   : nfa>cfa ( nfa -- cfa )  count  1f  and  +  aligned  ;  \ 51m0stm32F407eF  51m3stm32F407eF
   #else
   : nfa>cfa ( nfa -- cfa )  8 - @  ;   \ 430stm32F407eF
   #then
#THEN

: cfa>nfa ( cfa -- nfa )  >r  last @
  begin   dup  nfa>cfa  r@  <>
  while   cell-    @
  repeat  r>drop   ;

\ : mF   382c  execute  ;

\ : test.pattern ( cfa -- )  >r
\   0  0  over  .8n   dup  .8n   r@  cfa>nfa  .id  r>  execute  .  ;


 














comment:
   :  get.command      (.--.n.)         key   ;
   :  execute.command  (.n.--.)               df    and
      dup  'A' = if  drop    tF         exit  then
      dup  'B' = if  drop    execute    exit  then
      dup  'C' = if  drop    .stack     exit  then
           'D' = if          enter.8n   exit  then  ;

   :  tF1   begin   get.command    execute.command     again

   :  get+execute.command.2  (.--.)     key   df    and
      dup  'A' = if  drop    tF         exit  then
      dup  'B' = if  drop    execute    exit  then
      dup  'C' = if  drop    .stack     exit  then
           'D' = if          enter.8n   exit  then  ;

  :  tF2    begin   get+execute.command.2     again

  :.  T:41   T 41  R:#  ;.
  :.  T:42   T 42  R:#  ;.
  :.  T:43   T 43  R:#  ;.
  :.  T:44   T 44  R:#  ;.

  :. R0:41   0 41  R:#  ;.
  :. R0:42   0 42  R:#  ;.
  :. R0:43   0 43  R:#  ;.
  :. R0:44   0 44  R:#  ;.

  t:  get+execute.command.3 (.--.)  push.LR  key   TnDF
       T:41  if'=  drop  tF         ret  then'
       T:42  if'=  drop  execute    ret  then'
       T:43  if'=  drop  .stack     ret  then'
       T:44  if'=  drop  enter.8n        then'     ret

   :  tF3    begin   get+execute.command.3     again

  t:  get+execute.command.4 (.--.)  push.LR  key   TnDF   R0=T
      R0:41  if'=        tF         ret  then'
      R0:42  if'=        execute    ret  then'
      R0:43  if'=        .stack     ret  then'
      R0:44  if'=        enter.8n        then'     ret

   :  tF4    begin   get+execute.command.4     again

----------------------------------------------------------------------------------------
00000000  20000300  \ rp=20000300
00000004  00007285  \ jmp main in 430stm32F4xx.eForth or 3769 in 51stm32F4xx.eForth

0000003F
----------------------------------------------------------------------------------------
00000040                                                        image of eForth*  <--  51stm32F4xx.eForth start
                                                                            |
00000600   image of start of eForth* program                                |
                                                                            |
00003759                                                        image of eForth*  <--  51stm32F4xx.eForth start

00003FFF
----------------------------------------------------------------------------------------
00004000                                                                 eForth   <-- 430stm32F4xx.eForth start

00008C2B                                                                 eForth   <-- 430stm32F4xx.eForth end

0000BFFF
----------------------------------------------------------------------------------------
0000C000    PCFA+NFA+NFA   seperated head portion of 430+51.eForth start

0000EF23    PCFA+NFA+NFA   seperated head portion of 430+51.eForth .....

0000FFFF    PCFA+NFA+NFA   seperated head portion of 430+51.eForth .....
00010000
                     |
                     |
                1M byte space
                     |
                     |
000FFFFF    end of flash memory      \ 100000 = 16*64k=1M
****************************************************************************************
20000000                start of ram

20001FFF
----------------------------------------------------------------------------------------
20002000                                                                 eForth*  <--  51stm32F4xx.eForth start
20002040    doUSER.variable*  to be placed in flash memory if possible      |
     +A7           |                                                        |
200020E7    doUSER.variable*  to be placed in flash memory if possible      |
                                                                            |
20002100    doUSER.variable*  in ram                                        | 4000
                   |                                                        |
200021A7    doUSER.variable*  in ram                                        |
                                                                            |
20002600    program starting area                                           |
                                                                            |
2000544D                                                                 eForth*  <--  51stm32F4xx.eForth end
----------------------------------------------------------------------------------------
20008080    address of Terminal Input Buffer    \ 'TIB



2000C000    PCFA+NFA+NFA   seperated head portion of 430+51.eForth for program developped in ram


2000FFFF    PCFA+NFA+NFA   seperated head portion of 430+51.eForth for program developped in ram
*****************************************************************************************

comment;

























\  0  ( former.last'  @. )  ''  bit@  0c -.  ( cfa'>lfa' ) 32!'   \  '' end  4  -.  ( cfa'>nfa' )    former.last'  !.
   ''   bit@   set.(LFA)=0                                        \  '' end  nfa.link.to.former.last'
#then


 



\ insert{  '' sp0  org  L: ('BOOT)  }insert  \ 2015.9.4

\ t:   ('BOOT)


:.  @.target   ( a' -- n )  exi    ini
   'D'  COMnEMIT            number>232                     \   a'
   'D'  COMnEMIT   ''  @    number>232   'B'  COMnEMIT     \   @
   'D'  COMnEMIT   '' .8n   number>232   'B'  COMnEMIT     \  .8n
    0   8   0   do.   10  *.  COMnkey    [ASC>0~F]  +.  loop.  ;.

:.  @.user.variables(target>hc)  ( -- )    54   0
    do.      i.  SYSTEM.VARIABLE.BASE.IN.RAM    @.  +.   @.target
             i.  SYSTEM.VARIABLE.BASE.IN.RAM    @.  +.   32!'      4
    +loop.   ;.

create.  previous.system.variables   100 allot.        previous.system.variables  100  erase.
\ ````````````````                   SYSTEM.VARIABLE.BASE.IN.RoM  @.  previous.system.variables  100  cmove('>.)  \ initialize
:.  save.previous.system.variables   SYSTEM.VARIABLE.BASE.IN.RAM  @.  previous.system.variables  100  cmove('>.)  ;.

:.  .system.variable      ( cfa' -- )   >r.
    cr.      space.    r@.  cfa'>.id  drop.   0c ?y  '\' emit.
                       r@.  ''  ('boot)   -.  0c  /.  3 u.r(decimal).
           2 spaces.   r@.  8   +.     dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.                   dup.  .". ("  .xxxxXXXX  .". )=" \ 32@'    dup.  .xxxxXXXX
             drop.     r@.  ''  ('boot)   -.  0c  /.  4  *.  previous.system.variables  +.
                                                                            @.    dup.  .xxxxXXXX
                       r@.  ''  ('boot)   -.  0c  /.  4  *.  SYSTEM.VARIABLE.BASE.IN.RAM    @.  +.
           3 spaces.                   dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.   r>.  cfa'>.id   drop.  <>.   if.  3b ( 38 )  ?y   'x'  emit.  then.  ;.

nuc442eF?  @.
#if                          \  ('boot) is actually sp0
:.  .system.variable     ( cfa' -- )   >r.
    cr.      space.    r@.  cfa'>.id  drop.   0c ?y  '\' emit.
                       r@.  ''  ('boot)   -.  0c  /.  3 u.r(decimal).
           2 spaces.   r@.  6   +.     dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.                   dup.  .". ("  .xxxxXXXX  .". )=" \ 32@'    dup.  .xxxxXXXX
             drop.     r@.  ''  ('boot)   -.  0c  /.  4  *.  previous.system.variables  +.
                                                                            @.    dup.  .xxxxXXXX
                       r@.  ''  ('boot)   -.  0c  /.  4  *.  SYSTEM.VARIABLE.BASE.IN.RAM    @.  +.
           3 spaces.                   dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.   r>.  cfa'>.id   drop.  <>.   if.  3b ( 38 )  ?y   'x'  emit.  then.  ;.

\ SP0        \  0  (00004E06)=20002110  (20002110)=20000378 x (20002110)=20000378  SP0
\ RP0        \  1  (00004E1A)=20002114  (20002114)=20000300 x (20002114)=20000300  RP0
\ '?KEY      \  3  (00004E32)=20002118  (20002118)=00004848 x (2000211C)=00004848  '?KEY
\ 'EMIT      \  5  (00004E4A)=2000211C  (2000211C)=000069CC x (20002124)=000069CC  'EMIT

\ 'EXPECT    \  7  (00004E62)=20002120  (20002120)=00006C6C x (2000212C)=00006C6C  'EXPECT

\ SP0        \  0  (00004E06)=20002110  (20002110)=F7FED002 x (20002110)=20000378  SP0
\ RP0        \  1  (00004E1A)=20002114  (20002114)=BD00FA49 x (20002114)=20000300  RP0
\ '?KEY      \  3  (00004E32)=20002118  (20002118)=F7FEBD00 x (2000211C)=00004848  '?KEY

:.  .system.variable     ( cfa' -- )   >r.
    cr.      space.    r@.  cfa'>.id  drop.   0c ?y  '\' emit.
                       r@.  6   +.  32@'   ''  ('boot)  6 +. 32@'  -.  4  /.  3 u.r(decimal).
           2 spaces.   r@.  6   +.     dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.                   dup.  .". ("  .xxxxXXXX  .". )="
             drop.     r@.  6   +.  32@'  ''  ('boot)   6  +.  32@'  -.  previous.system.variables          +.
                                                                            @.    dup.  .xxxxXXXX
                       r@.  6  +.   32@'  ''  ('boot)   6  +.  32@'  -.  SYSTEM.VARIABLE.BASE.IN.RAM    @.  +.
           3 spaces.                   dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.   r>.  cfa'>.id   drop.  <>.   if.  3b ( 38 )  ?y   'x'  emit.  then.  ;.

:.  .system.variable     ( cfa' -- )   >r.
    cr.      space.    r@.  cfa'>.id  drop.   0c ?y  '\' emit.
                       r@.  6   +.  32@'   ''  ('boot)  6  +.  32@'  -.  4  /.  3 u.r(decimal).
           2 spaces.   r@.  6   +.     dup.  .". ("  .xxxxXXXX  .". )="   32@'    dup.  .xxxxXXXX
           2 spaces.                   dup.  .". ("  .xxxxXXXX  .". )="
             drop.     r@.  6   +.  32@'   ''  ('boot)  6  +.  32@'  -.  previous.system.variables          +.
                                                                            @.    DUP.  .xxxxXXXX
                       r@.  6  +.   32@'   ''  ('boot)  6  +.  32@'  -.  SYSTEM.VARIABLE.BASE.IN.RAM    @.  +.
           3 spaces.                   dup.  .". ("  .xxxxXXXX  .". )="   32@'    DUP.  .xxxxXXXX
           2 spaces.   r>.  cfa'>.id   drop.  <>.   if.  3b ( 38 )  ?y   'x'  emit.  then.  ;.

#then



comment:
  \ -------------------------------------------------------------------------------   76   4C
         4DF8         4DE0 *                                                                     DF4800 *  lfa
         4DFC *                     SP0                                   DF4808 *               DF4810    nfa
         4E00 **                                                                                 DF48F0 ** cfa
  \ -------------------------------------------------------------------------------   77   4D
         4E0C         4DFC *                                                                     DF4900 *  lfa
         4E10 *                     RP0                                   DF4908 *               DF4910    nfa
         4E14 **                                                                                 DF49F0 ** cfa
  \ -------------------------------------------------------------------------------   78   4E
         4E20         4E10 *                                                                     DF4A00 *  lfa
         4E24 *                     '?KEY                                 DF4A08 *               DF4A10    nfa
         4E2C **                                                                                 DF4AF0 ** cfa
  \ -------------------------------------------------------------------------------   79   4F
         4E38         4E24 *                                                                     DF4B00 *  lfa
         4E3C *                     'EMIT                                 DF4B08 *               DF4B10    nfa
         4E44 **                                                                                 DF4BF0 ** cfa
  \ -------------------------------------------------------------------------------   80   50
         4E50         4E3C *                                                                     DF4C00 *  lfa
         4E54 *                     'EXPECT                               DF4C08 *               DF4C10    nfa
         4E5C **                                                                                 DF4CF0 ** cfa
  \ -------------------------------------------------------------------------------   81   51
         4E68         4E54 *                                                                     DF4D00 *  lfa
         4E6C *                     'TAP                                  DF4D08 *               DF4D10    nfa
         4E74 **                                                                                 DF4DF0 ** cfa
  \ -------------------------------------------------------------------------------   82   52
         4E80         4E6C *                                                                     DF4E00 *  lfa
         4E84 *                     'ECHO                                 DF4E08 *               DF4E10    nfa
         4E8C **                                                                                 DF4EF0 ** cfa
  \ -------------------------------------------------------------------------------   83   53
         4E98         4E84 *                                                                     DF4F00 *  lfa
         4E9C *                     'PROMPT                               DF4F08 *               DF4F10    nfa
         4EA4 **                                                                                 DF4FF0 ** cfa
  \ -------------------------------------------------------------------------------   84   54
         4EB0         4E9C *                                                                     DF5000 *  lfa
         4EB4 *                     BASE                                  DF5008 *               DF5010    nfa
         4EBC **                                                                                 DF50F0 ** cfa
  \ -------------------------------------------------------------------------------   85   55
         4EC8         4EB4 *                                                                     DF5100 *  lfa
         4ECC *                     tmp                                   DF5108 *               DF5110    nfa
         4ED0 **                                                                                 DF51F0 ** cfa
  \ -------------------------------------------------------------------------------   86   56
         4EDC         4ECC *                                                                     DF5200 *  lfa
         4EE0 *                     SPAN                                  DF5208 *               DF5210    nfa
         4EE8 **                                                                                 DF52F0 ** cfa
  \ -------------------------------------------------------------------------------   87   57
         4EF4         4EE0 *                                                                     DF5300 *  lfa
         4EF8 *                     >IN                                   DF5308 *               DF5310    nfa
         4EFC **                                                                                 DF53F0 ** cfa
  \ -------------------------------------------------------------------------------   88   58
         4F08         4EF8 *                                                                     DF5400 *  lfa
         4F0C *                     #TIB                                  DF5408 *               DF5410    nfa
         4F14 **                                                                                 DF54F0 ** cfa
  \ -------------------------------------------------------------------------------   89   59
         4F20         4F0C *                                                                     DF5500 *  lfa
         4F24 *                     'TIB                                  DF5508 *               DF5510    nfa
         4F2C **                                                                                 DF55F0 ** cfa
  \ -------------------------------------------------------------------------------   90   5A
         4F38         4F24 *                                                                     DF5600 *  lfa
         4F3C *                     CSP                                   DF5608 *               DF5610    nfa
         4F40 **                                                                                 DF56F0 ** cfa
  \ -------------------------------------------------------------------------------   91   5B
         4F4C         4F3C *                                                                     DF5700 *  lfa
         4F50 *                     'EVAL                                 DF5708 *               DF5710    nfa
         4F58 **                                                                                 DF57F0 ** cfa
  \ -------------------------------------------------------------------------------   92   5C
         4F64         4F50 *                                                                     DF5800 *  lfa
         4F68 *                     'NUMBER                               DF5808 *               DF5810    nfa
         4F70 **                                                                                 DF58F0 ** cfa
  \ -------------------------------------------------------------------------------   93   5D
         4F7C         4F68 *                                                                     DF5900 *  lfa
         4F80 *                     HLD                                   DF5908 *               DF5910    nfa
         4F84 **                                                                                 DF59F0 ** cfa
  \ -------------------------------------------------------------------------------   94   5E
         4F90         4F80 *                                                                     DF5A00 *  lfa
         4F94 *                     HANDLER                               DF5A08 *               DF5A10    nfa
         4F9C **                                                                                 DF5AF0 ** cfa
  \ -------------------------------------------------------------------------------   95   5F
         4FA8         4F94 *                                                                     DF5B00 *  lfa
         4FAC *                     CONTEXT                               DF5B08 *               DF5B10    nfa
         4FB4 **                                                                                 DF5BF0 ** cfa
  \ -------------------------------------------------------------------------------   96   60
         4FC0         4FAC *                                                                     DF5C00 *  lfa
         4FC4 *                     CURRENT                               DF5C08 *               DF5C10    nfa
         4FCC **                                                                                 DF5CF0 ** cfa
  \ -------------------------------------------------------------------------------   97   61
         4FD8         4FC4 *                                                                     DF5D00 *  lfa
         4FDC *                     CP                                    DF5D08 *               DF5D10    nfa
         4FE0 **                                                                                 DF5DF0 ** cfa
  \ -------------------------------------------------------------------------------   98   62
         4FEC         4FDC *                                                                     DF5E00 *  lfa
         4FF0 *                     NP                                    DF5E08 *               DF5E10    nfa
         4FF4 **                                                                                 DF5EF0 ** cfa
  \ -------------------------------------------------------------------------------   99   63
         5000         4FF0 *                                                                     DF5F00 *  lfa
         5004 *                     LAST                                  DF5F08 *               DF5F10    nfa
         500C **                                                                                 DF5FF0 ** cfa
  \ -------------------------------------------------------------------------------  100   64
         5018         5004 *                                                                     DF6000 *  lfa
         501C *                     fort.                                 DF6008 *               DF6010    nfa
         5024 **                                                                                 DF60F0 ** cfa
  \ -------------------------------------------------------------------------------  101   65

COMMENT;










:.  display.system.variables'  ( -- )   cr.  0f ?y  .". (.cfa+8..)=XXXXxxxx  -- previous ualue -   -- current value --"
    ''  ('boot)           .system.variable
    ''  BASE              .system.variable
    ''  tmp               .system.variable
    ''  #TIB              .system.variable   cr.
    ''  >IN               .system.variable
    ''  HLD               .system.variable
    ''  'EVAL             .system.variable
    ''  CONTEXT           .system.variable   cr.
    ''  CP                .system.variable
    ''  DP                .system.variable
    ''  LAST              .system.variable
    ''  head?             .system.variable   cr.   \ var0 is replaced by it.
    ''  hp                .system.variable        \ var1 is replaced by it.
    ''  #emit             .system.variable
    ''  'emit             .system.variable
    ''  'key              .system.variable   cr.
    ''  'key.uart         .system.variable
    ''  'emit.uart        .system.variable
    ''  addr(uart.emit)   .system.variable
    ''  addr(uart.key)    .system.variable   cr.
    ''  user.var9         .system.variable   cr.   ;.


nuc442eF?  @.
#if
:.  display.system.variables'  ( -- )        cr.  12 ( 0f ) ?y  .". (.cfa+6..)=XXXXxxxx  -- previous ualue -   -- current value --"
    ''  SP0               .system.variable
    ''  RP0               .system.variable
    ''  '?KEY             .system.variable
    ''  'EMIT             .system.variable   cr.
    ''  'EXPECT           .system.variable
    ''  'TAP              .system.variable
    ''  'ECHO             .system.variable
    ''  'PROMPT           .system.variable   cr.
    ''  BASE              .system.variable
    ''  tmp               .system.variable
    ''  SPAN              .system.variable
    ''  >IN               .system.variable   cr.
    ''  #TIB              .system.variable
    ''  'TIB              .system.variable
    ''  CSP               .system.variable
    ''  'EVAL             .system.variable   cr.
    ''  'NUMBER           .system.variable
    ''  HLD               .system.variable
    ''  HANDLER           .system.variable
    ''  CONTEXT           .system.variable   cr.
    ''  CURRENT           .system.variable   cr.
    ''  CP                .system.variable
    ''  NP                .system.variable   cr.
    ''  LAST              .system.variable
    ''  fort.             .system.variable   cr.   ;.

4040  10  +.  value  default.system.variables'.addr

:.    .default.system.variables'  ( offset*4 -- )    4  *.  dup>r.  default.system.variables'.addr  +.  dup.  60  ?Y  .". (" .xxxxXXXX  .". )="  32@'  dup.  .xxxxXXXX
   r>.  SYSTEM.VARIABLE.BASE.IN.RAM  @.  +.  32@'  <>.   if.   74 ?y  .". *"  then.   ;.

\  set.default.system.variables'  ( offset*4 -- )    4  *.  default.system.variables'.addr  +.  dup.  32@'   swap.  32!'  ;.
:. set.default.system.variables'  ( cfa' offset*4 -- )  >r.  6  +.  32@'  32@'  r>.  4  *.  default.system.variables'.addr  +.  32!'  ;.

\     .default.system.variables'x ( offset*4 -- )    4  *.  default.system.variables'.addr  +.  dup.  60  ?Y  .". (" .xxxxXXXX  .". )="  32@' .xxxxXXXX  ;.

:.  display.system.variables'  ( -- )        cr.  12 ( 0f ) ?y  .". (.cfa+6..)=XXXXxxxx  -- previous ualue -   -- current value --"  60 ?Y .". -- default vale --"
    ''  SP0               .system.variable    0   .default.system.variables'
    ''  RP0               .system.variable    1   .default.system.variables'
    ''  '?KEY             .system.variable    2   .default.system.variables'
    ''  'EMIT             .system.variable    3   .default.system.variables'   cr.
    ''  'EXPECT           .system.variable    4   .default.system.variables'
    ''  'TAP              .system.variable    5   .default.system.variables'
    ''  'ECHO             .system.variable    6   .default.system.variables'
    ''  'PROMPT           .system.variable    7   .default.system.variables'   cr.
    ''  BASE              .system.variable    8   .default.system.variables'
    ''  tmp               .system.variable    9   .default.system.variables'
    ''  SPAN              .system.variable   0a   .default.system.variables'
    ''  >IN               .system.variable   0b   .default.system.variables'   cr.
    ''  #TIB              .system.variable   0c   .default.system.variables'
    ''  'TIB              .system.variable   0d   .default.system.variables'
    ''  CSP               .system.variable   0e   .default.system.variables'
    ''  'EVAL             .system.variable   0f   .default.system.variables'   cr.
    ''  'NUMBER           .system.variable   10   .default.system.variables'
    ''  HLD               .system.variable   11   .default.system.variables'
    ''  HANDLER           .system.variable   12   .default.system.variables'
    ''  CONTEXT           .system.variable   13   .default.system.variables'   cr.
    ''  CURRENT           .system.variable   1c   .default.system.variables'   cr.
    ''  CP                .system.variable   1e   .default.system.variables'
    ''  NP                .system.variable   1f   .default.system.variables'   cr.
    ''  LAST              .system.variable   20   .default.system.variables'
    ''  fort.             .system.variable   21   .default.system.variables'   cr.   ;.

#then


:.  display.system.variables'''''  ( -- )   cr.  15 ( 0f ) ?y  .". (.cfa+6..)=XXXXxxxx  -- previous ualue -   -- current value --"
    ''  ('boot)           .system.variable
    ''  BASE              .system.variable
    ''  tmp               .system.variable
    ''  #TIB              .system.variable   cr.
    ''  >IN               .system.variable
    ''  HLD               .system.variable
    ''  'EVAL             .system.variable
    ''  CONTEXT           .system.variable   cr.
    ''  CP                .system.variable
\   ''  DP                .system.variable
    ''  LAST              .system.variable
    ''  head?             .system.variable   cr.   \ var0 is replaced by it.
\   ''  hp                .system.variable        \ var1 is replaced by it.
\   ''  #emit             .system.variable
    ''  'emit             .system.variable
    ''  'key              .system.variable   cr.
\   ''  'key.uart         .system.variable
\   ''  'emit.uart        .system.variable
\   ''  addr(uart.emit)   .system.variable
\   ''  addr(uart.key)    .system.variable   cr.
\   ''  user.var9         .system.variable   cr.
    ;.

:.  dsv'   display.system.variables'          ;.
'.  dsv'   is.    _dsv'

'.  DISPLAY.SYSTEM.VARIABLES'  is.  _DISPLAY.SYSTEM.VARIABLES'

:.  uv       @.user.variables(target>hc)    display.system.variables'   ;.

:.  initialize.system.variable  ( n cfa'.of.user.variable -- )
    dup.   '' ('boot)    '' user.var9    between.  not.
    if.    drop.   cr. .".  *** invalid system.variable ***"   exit.
    then.  '' ('boot)  -.  0c /.  4 *.  SYSTEM.VARIABLE.BASE.IN.ROM  @.  +.  32!'  ;.

:.  isv    initialize.system.variable  ( cfa' -- )  ;.





  t:  q      push.lr  4 download.to.ram.end+1  @.  r=#
                      2 download.to.ram.start  @.  r=#
             begin'   key    2 0 t (r+#)=r,b   2 1 r+#    2 4 r:r   {drop}
             until'=  ret

  t:  qq     push.lr  ( from to+1 )
             r4=t  {drop}    \  4 download.to.ram.end+1  @.  r=#
             r2=t  {drop}    \  2 download.to.ram.start  @.  r=#
             begin'   key    2 0 t (r+#)=r,b   2 1 r+#    2 4 r:r   {drop}
             until'=  ret
( 68 ALLOT' )

                                    t:  bounds                                                \ cfa=     8500
  (  00008500  00 B5             )                  push.LR
  (  00008502  FC F7 3D FB       )                  OVER                                          \      4B80
  (  00008506  FC F7 99 FB       )                  +                                             \      4C3C
  (  0000850A  FC F7 2F FB       )                  SWAP                                          \      4B6C
  (  0000850E  00 BD             )                  ret

                                    t:  t>p                                                   \ cfa=     8518
  (  00008518  00 B5             )                  push.LR
  (  0000851A  FF F7 F1 FF       )                  BOUNDS                                        \      8500
  (  0000851E  FC F7 F7 F8       )                  (DO)                                          \      4710
                                        begin'                       \ 00008530 --> 00008522 ===
  (  00008522  FC F7 D5 F8       )                  I                                             \      46D0
  (  00008526  36 78             )                  {c@}
  (  00008528  FC F7 FA FD       )                  EMIT                                          \      5120
  (  0000852C  FC F7 0E F9       )                  (LOOP)                                        \      474C
  (  00008530  F7 D7             )      until'v \ v=0? vc?           \ 00008530 --> 00008522 ===
  (  00008532  00 BD             )                  ret

                                    t:  t<p
  (  0000853C  00 B5             )                  push.LR
  (  0000853E  FF F7 DF FF       )                  BOUNDS                                        \      8500
  (  00008542  FC F7 E5 F8       )                  (DO)                                          \      4710
                                         begin'                      \ 00008558 --> 00008546 ===================
  (  00008546  FC F7 DD FD       )                  KEY                                           \      5104
  (  0000854A  FC F7 C1 F8       )                  I                                             \      46D0
  (  0000854E  30 46 42 CF 01 70 )                  {C!}
  (  00008554  FC F7 FA F8       )                  (LOOP)                                        \      474C
  (  00008558  F5 D7             )       until'v \ v=0? vc?          \ 00008558 --> 00008546 ===================
  (  0000855A  00 BD             )                  ret



   '' qq  addr.of.qq  !.

:.  L   exi  ini   'D' COMnEMIT     '' q  ( cfa' ) number>232   'B'  COMnEMIT
        download.to.ram.end+1 @.    download.to.ram.start @.    DO.  I. C@'  COMnEMIT  LOOP.  ;.

:.  update.last                                            \ last'    @.  last     !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                   'D' COMnEMIT  '' last      number>232   \ cfa.of.last      in target
                   'B' COMnEMIT                            \ address of variable last
                   'D' COMnEMIT  '' !         number>232   \ cfa.of.!         in target
                   'B' COMnEMIT  ;.

:.  update.context                                         \ last'    @.  context  !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                   'D' COMnEMIT  '' context   number>232   \ cfa.of.context   in target
                   'B' COMnEMIT                            \ address of variable context
                   'D' COMnEMIT  '' !         number>232   \ cfa.of.!         in target
                   'B' COMnEMIT  ;.

:.  update.last                                            \ last'    @.         last     !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                    ''  last        (B')                   \ address of variable last
                    ''  !           (B')      ;.

:.  update.context                                         \ last'    @.         context  !
        exi  ini   'D' COMnEMIT     last' @.  number>232   \ last'    @.
                    ''  context     (B')                   \ address of variable context
                    ''  !           (B')      ;.

:.  update.last+context     update.last    update.context  ;.


 variable.  addr.of.t>h
 variable.  addr.of.t<h
 
:.  LL       ( from to+1 -- )       swap.    2dup.    \ to+1 from from to+1
        exi  ini   'D' COMnEMIT     number>232   \ from
                   'D' COMnEMIT     number>232   \ to+1
                   'D' COMnEMIT     '' qq     ( cfa' ) number>232   'B'  COMnEMIT
                    DO.  I.  C@'    COMnEMIT  LOOP.  ;.

:.  LL.new   ( from to+1 -- )       swap.    2dup.  tuck.  -.  swap.  \ to+1 from  len from
        exi  ini   'D' COMnEMIT     number>232   \ from
                   'D' COMnEMIT     number>232   \ len
                   'D' COMnEMIT     addr.of.t<h  @.  ( '' t<h )  ( cfa' ) number>232   'B'  COMnEMIT
                    DO.  I.  C@'    COMnEMIT  LOOP.  ;.

:.  LLL      ( -- )  HEAD>TARGET  20000600 ( variable  20001000 )  20006000   LL       update.last+context  ;.
:.  LLL.new  ( -- )  HEAD>TARGET  20000600 ( variable  20001000 )  20006000   LL.new   update.last+context  ;.

:.  LLL.new  ( -- )  HEAD>TARGET  20000600 ( variable  20001000 )  cp' @. ( 20006000 )  LL.new
                                  20004000                         hp' @.               LL.new  update.last+context  ;.

:.  Lt    ( -- )  base.  @.  >r.        hex.
                  exi  ini  s". tFw"    string>232   LLL      \  ti LF120
                 'D' COMnEMIT   hp' @.  number>232
                 'D' COMnEMIT   cp' @.  number>232
                 'A' COMnEMIT   s". cp ! hp !"  string>232    r>. base. !.   ;.

:.  LLLL  Lt  ;.


:.  Lm    ( -- )  base.  @.  >r.        hex.
                  exi  ini  s". tFm"    string>232   LLL.new   \ stm32f4
                 'D' COMnEMIT   hp' @.  number>232
                 'D' COMnEMIT   cp' @.  number>232
                 'A' COMnEMIT   s". cp ! hp !"  string>232     r>. base. !.  ;.

:.  Lmm   Lm  oo  ;.
:.  >t    Lm  oo  ;.

:. dump.target   ( a' -- )  >r.  exi  ini   s". tFw"    string>232   \  232." ss tFw"
                                 exi  ini  ( to restart receiving prevent from "tFw" to leave in the 232 buffer)
   'D'   COMnEMIT  r@.              number>232  \ frpm
   'D'   COMnEMIT  80               number>232  \ length
   'D'   COMnEMIT  addr.of.t>h  @.  number>232   'B'  COMnEMIT   \ t>h ( from length -- )
   80  0    do.  COMnKEY  temp.dump   i. +.  c!.  loop.
   r>.      temp.dump     80   0
   do.      i.  10 mod.   0=.  if.   cr.  over.  i.  +.  space.  7  u.r.   then.
                                          dup.   i.  +.  c@.     3   .r.
   loop.   'A'  COMnEMIT  2drop.  ;.

:. DT'      CR.  .".  cp  :  code program"   DOWNLOAD.TO.RAM.START  @.  ( 20001000 )  DUMP.target
            CR.  .".  hp  :  head"           hp0'                   @.  ( 20004000 )  DUMP.target
            CR.  .".  dp  :  dp @ <- here"   head.start.in.ram      @.  ( 20006000 )  DUMP.target  ;.











nuc453eF?  @.
#if
:. eF>tF   ( exi  ini )  232." TF"   ;.
:. tF>eF   ( exi  ini )  232." A"    ;.
#else
:. eF>tF   ( exi  ini )  232." tFw"  ;.
:. tF>eF   ( exi  ini )  232." A"    ;.
#then









:. update          head>target    ( exi  ini  232." tFw" )  eF>tF  L       \ 20001000~20002000
 ( exi ini ) hp0'  @. ( 20004000 )  hp'   @.  over.  -.    p>t(tF)         \ 20004000~
   cp'    @.   (d')  '' cp       (B')  '' !  (B')                          \ code pointer
   hp'    @.   (d')  '' hp       (B')  '' !  (B')                          \ head pointer
   last'  @.   (d')  '' last     (b')  '' !  (b')                          \ last
   last'  @.   (d')  '' context  (b')  '' !  (b')  tF>eF  ( 232." A" ) ;.  \ context = last = current ;.  \ head in ram

:. sv'<sv(tF)  ( -- )   save.previous.system.variables   exi  ini   SYSTEM.VARIABLE.BASE.IN.RAM  @.  100   p<t(tF)  ;.
:. sv'>sv(tF)  ( -- )                                    exi  ini   SYSTEM.VARIABLE.BASE.IN.RAM  @.  100   p>t(tF)  ;.
:. sv'<sv(eF)  ( -- )   eF>tF    sv'<sv(tF)   tF>eF  ;.
:. sv'>sv(eF)  ( -- )   eF>tF    sv'>sv(tF)   tF>eF  ;.

:. sv'<sv      sv'<sv(eF)    ;.
:. sv'>sv      sv'>sv(eF)    ;.
:. dsv         sv'<sv    display.system.variables'   ;.

:. 012->102   ( r0 r1 r2 ----- r1 r0 r2    )  >R.         SWAP.  R>.    ;.
:. 0123->2103 ( r0 r1 r2 r3 -- r2 r1 r0 r3 )  >R.  -rot.  SWAP.  R>.    ;.

:. -{drop}    -2  allot'  ;.
:.  -drop     -2  allot'  ;.
\ ----------------------------------------------------------------------------------------------
\ ----------------------------------------------------------------------------------------------
:{  {>r0}      ( at rum.time: r0 ----------- )          r0=t                              {drop}  };
:{  {>r0~r1}   ( at rum.time: r0 r1 -------- )          r1=t   nip>r0                     {drop}  };
:{  {>r0~r2}   ( at rum.time: r0 r1 r2 ----- )          r2=t   nip>r1   nip>r0            {drop}  };
:{  {>r0~r3}   ( at rum.time: r0 r1 r2 r3 -- )          r3=t   nip>r2   nip>r1   nip>r0   {drop}  };
\ ----------------------------------------------------------------------------------------------
\ ----------------------------------------------------------------------------------------------
:{  {r0>}      ( at rum.time: r0 ----------- )  {dup}   t=r0                              };
:{  {r0~r1>}   ( at rum.time: r0 r1 -------- )  {dup}   t=r1  -nip<r0                     };
:{  {r0~r2>}   ( at rum.time: r0 r1 r2 ----- )  {dup}   t=r2  -nip<r0  -nip<r1            };
:{  {r0~r3>}   ( at rum.time: r0 r1 r2 r3 -- )  {dup}   t=r3  -nip<r0  -nip<r1  -nip<r2   };
\ ----------------------------------------------------------------------------------------------
\ :{ {>R0}             R0=T  {DROP} };  :{ {>R0~R1}         R1=T NIP>R0 {DROP} };  :{ {>R0~R2}          R2=T NIP>R1 NIP>R0 {DROP} };
  :. >R0,no.drop       R0=T                              ;.
  :. >R0~R1,no.drop    R1=T                     NIP>R0   ;.
  :. >R0~R2,no.drop    R2=T   NIP>R1            NIP>R0   ;.
  :. >R0~R3,no.drop    R3=T   NIP>R2   NIP>R1   NIP>R0   ;.

\ :.        {R0>} {DUP} T=R0   ;.  :{        {R0~R1>}  {DUP} T=R1 -NIP<R0 ;.  :{        {R0~R2>}  {DUP} T=R2 -NIP<R0 -NIP<R1 ;.
  :. no.dup,R0>        T=R0   ;.
  :. no.dup,R0~R1>     T=R1  -NIP<R0                     ;.
  :. no.dup,R0~R2>     T=R2  -NIP<R0  -NIP<R1            ;.
  :. no.dup,R0~R3>     T=R3  -NIP<R0  -NIP<R1  -NIP<R2   ;.
\ ----------------------------------------------------------------------------------------------
:.  0|0'      (             a' -- )  push.LR                 1+.   rcall_#24/call_r4            (.--.)         ;.
:.  0|1'      ( r0          a' -- )  push.LR                 1+.   rcall_#24/call_r4  {r0>}     (.--.n.)       ;.
:.  0|2'      ( r0 r1       a' -- )  push.LR                 1+.   rcall_#24/call_r4  {r0~r1>}  (.--.n.n.)     ;.
:.  0|3'      ( r0 r1 r2    a' -- )  push.LR                 1+.   rcall_#24/call_r4  {r0~r2>}  (.--.n.n.n.)   ;.
:.  0|4'      ( r0 r1 r2 r4 a' -- )  push.LR                 1+.   rcall_#24/call_r4  {r0~r3>}  (.--.n.n.n.n.) ;.

:.  1|0'      (             a' -- )  push.LR      {>r0}      1+.   rcall_#24/call_r4            (.n.--.) ;.
:.  1|1'      ( r0          a' -- )  push.LR      {>r0}      1+.   rcall_#24/call_r4  {r0>}     (.n.--.n.) ;.
:.  1|2'      ( r0 r1       a' -- )  push.LR      {>r0}      1+.   rcall_#24/call_r4  {r0~r1>}  (.n.--.n.n.) ;.
:.  1|3'      ( r0 r1 r2    a' -- )  push.LR      {>r0}      1+.   rcall_#24/call_r4  {r0~r2>}  (.n.--.n.n.n.) ;.
:.  1|4'      ( r0 r1 r2 r3 a' -- )  push.LR      {>r0}      1+.   rcall_#24/call_r4  {r0~r3>}  (.n.--.n.n.n.n.) ;.

:.  2|0'      (             a' -- )  push.LR      {>r0~r1}   1+.   rcall_#24/call_r4            (.n.n.--.) ;.
:.  2|1'      ( r0          a' -- )  push.LR      {>r0~r1}   1+.   rcall_#24/call_r4  {r0>}     (.n.n.--.n.) ;.
:.  2|2'      ( r0 r1       a' -- )  push.LR      {>r0~r1}   1+.   rcall_#24/call_r4  {r0~r1>}  (.n.n.--.n.n.) ;.
:.  2|3'      ( r0 r1 r2    a' -- )  push.LR      {>r0~r1}   1+.   rcall_#24/call_r4  {r0~r2>}  (.n.n.--.n.n.n.) ;.
:.  2|4'      ( r0 r1 r2 r3 a' -- )  push.LR      {>r0~r1}   1+.   rcall_#24/call_r4  {r0~r3>}  (.n.n.--.n.n.n.n.) ;.

:.  3|0'      (             a' -- )  push.LR      {>r0~r2}   1+.   rcall_#24/call_r4            (.n.n.n.--.) ;.
:.  3|1'      ( r0          a' -- )  push.LR      {>r0~r2}   1+.   rcall_#24/call_r4  {r0>}     (.n.n.n.--.n.) ;.
:.  3|2'      ( r0 r1       a' -- )  push.LR      {>r0~r2}   1+.   rcall_#24/call_r4  {r0~r1>}  (.n.n.n.--.n.n.) ;.
:.  3|3'      ( r0 r1 r2    a' -- )  push.LR      {>r0~r2}   1+.   rcall_#24/call_r4  {r0~r2>}  (.n.n.n.--.n.n.n.) ;.
:.  3|4'      ( r0 r1 r2 r3 a' -- )  push.LR      {>r0~r2}   1+.   rcall_#24/call_r4  {r0~r3>}  (.n.n.n.--.n.n.n.n.) ;.
\ ----------------------------------------------------------------------------------------------                                             \ r2=t,nip>r1,nip>r0,drop
\ ----------------------------------------------------------------------------------------------
:. s=r'   sp  swap.    (r)=r   ;.   \ s=r was wrong   : s=r   sp  (r)=r  ;

:. {-nip}r0      {-nip}   0  s=r'  ;.
:. {-nip}r1      {-nip}   1  s=r'  ;.
:. {-nip}r2      {-nip}   2  s=r'  ;.
:. {-nip}r3      {-nip}   3  s=r'  ;.

:. {-nip},s=r0   {-nip}   0  s=r'  ;.
:. {-nip},s=r1   {-nip}   1  s=r'  ;.
:. {-nip},s=r2   {-nip}   2  s=r'  ;.
:. {-nip},s=r3   {-nip}   3  s=r'  ;.
 

:.  >cold  ( a' -- )  insert{  org  0  CFA'.OF.COLD*  @.  1+.  r=#   0 jmp_r   -ret  }insert  64k  ;.

nuc442eF?  @.
#if                       \  68 ALLOT'
                                   t:  mode  (.PA.BIT15.OUTPUT.--.)   {>r0~r2}
  (  000005EC  F0 B5             )                ( push{} ) { R4, R5, R6, R7, }   push
  (  000005EE  00 23             )                  R3=0                                                        \
  (  000005F0  01 27             )                  R7=1
  (  000005F2  03 25             )                  R5=3
                                        begin'                       \ 00000614 --> 000005F4 +++++
  (  000005F4  07 FA 03 F4       )                  R4=R7<<R3
  (  000005F8  0C 42             )                  R4nR1,tst
  (  000005FA  09 D0             )        if'<> \ z=1? eq?           \ 000005FA --> 00000610 =======
  (  000005FC  06 68             )                  R6=(R0)                                                   \
  (  000005FE  5C 00             )                  R4=R3<<1,s
  (  00000600  05 FA 04 FC       )                  RC=R5<<R4
  (  00000604  26 EA 0C 06       )                  R6=R6nRC/<<0                                                \
  (  00000608  02 FA 04 F4       )                  R4=R2<<R4
  (  0000060C  26 43             )                  R6oR4
  (  0000060E  06 60             )                  (R0)=R6                                                   \
                                          then'                      \ 000005FA --> 00000610 =======
  (  00000610  5B 1C             )                     R3+1,s
  (  00000612  10 2B             )                  R3:10
  (  00000614  EE D3             )      until'u>= \ c=0? lo?         \ 00000614 --> 000005F4 +++++
  (  00000616  F0 BD             )                  pop     { R4, R5, R6, R7, }  ret'

insert{{{{  nuc453eF?  @.
  #if  \  include  NUC453eForthORG1a.F \ df4   org   0  '' cold 1+.  r=#   jmp_r0  -ret \ 992 to be changed according to template.txt
       \  include  nuc453StartKit1.F
       \  include  NUC453STARTKITOFFICE3A.F  \ OFFICE
  #else   include  nt2.f               \ 992   org   0  '' cold 1+.  r=#   jmp_r0  -ret \ 992 to be changed according to template.txt
  #then   20000990  0  32!'
''  cold   8  +. org   uart.switch.stm32F429.eF
''  cold   C350  C344  -.  +.   org    doUSER.base.in.rom      @.  8051eForth.based.addr @. +.  ,doLIT*+#   \ 0040
}}}}insert  10000  PROGRAM.LENGTH  !.   

var'  length(hex>)
var'  address(hex>)
var'  record(hex>)      variable'  dummy.instruction
var'  remap>0?(hex>)
var'  high.64k(hex>)    variable'  dummy.instruction'



:.  ggg  dup.  drop.  ;.



t: HX>      (.--.)  push.LR   CR   ."' *** please enter ???.HEX file *** "     \  high.64k  off
   BEGIN
     begin
       BEGIN  KEY  3A ( : ) ... =
       UNTIL  \  cr
       KEY  10 ... DIGIT  DROP    10 ... *  KEY  10 ... DIGIT  DROP  +  >R        ( LENGTH )   r@   length(hex>)  !
       KEY  10 ... DIGIT  DROP    10 ... *  KEY  10 ... DIGIT  DROP  +  10 ... *  ( ADDR H )
       KEY  10 ... DIGIT  DROP  + 10 ... *  KEY  10 ... DIGIT  DROP  +            ( ADDR L )   dup  address(hex>) !
       KEY  10 ... DIGIT  DROP    10 ... *  KEY  10 ... DIGIT  DROP  +            ( RECORD )   dup  record(hex>)  !
       dup  05 ... =  if  r>drop  drop  6 ... 0 ...  do  key  drop  loop  0 ...  else  -1 ...  then
     until  04 ... =
     if        drop  r>    2 ... <>  abor."  ????? hex file "
               KEY  10 ... DIGIT  DROP    10 ... *  KEY  10 ...  DIGIT  DROP  +  10 ... *  ( ADDR H )
               KEY  10 ... DIGIT  DROP  + 10 ... *  KEY  10 ...  DIGIT  DROP  +  ( ADDR L )   dup  address(hex>) !
               key  drop  key  drop  ( checksum )
               remap>0?(hex>)  @     drop  0 ...
               if     00ff ... and
               then   10 ...   lshift  high.64k(hex>)  !   0 ...
     else      R@
         IF    R>     0  ...
               DO     DUP    I +  KEY  10 ... DIGIT  DROP 10 ... *
                                  KEY  10 ... DIGIT  DROP  +  SWAP  high.64k(hex>)  @  +   c!  \ a'>a C!
               LOOP   DROP          0 ...
         ELSE  R>     2DROP  DROP  -1 ...
         THEN
     then
   UNTIL       high.64k(hex>)   off    QUIT   ret


:  HX>'      (.--.)       CR   ."' *** please enter ???.HEX file *** "     \  high.64k  off
   BEGIN
     begin
       BEGIN  KEY  3A ( : )     =
       UNTIL  \  cr
       KEY  10     DIGIT  DROP    10     *  KEY  10     DIGIT  DROP  +  >R        ( LENGTH )   r@   length(hex>)  !
       KEY  10     DIGIT  DROP    10     *  KEY  10     DIGIT  DROP  +  10     *  ( ADDR H )
       KEY  10     DIGIT  DROP  + 10     *  KEY  10     DIGIT  DROP  +            ( ADDR L )   dup  address(hex>) !
       KEY  10     DIGIT  DROP    10     *  KEY  10     DIGIT  DROP  +            ( RECORD )   dup  record(hex>)  !
       dup  05     =  if  r>drop  drop  6     0      do  key  drop  loop  0      else  -1      then
     until  04     =
     if        drop  r>    2     <>  abor."  ????? hex file "
               KEY  10     DIGIT  DROP    10     *  KEY  10      DIGIT  DROP  +  10     *  ( ADDR H )
               KEY  10     DIGIT  DROP  + 10     *  KEY  10      DIGIT  DROP  +  ( ADDR L )   dup  address(hex>) !
               key  drop  key  drop  ( checksum )
               remap>0?(hex>)  @     drop  0
               if     00ff     and
               then   10       lshift  high.64k(hex>)  !   0
     else      R@
         IF    R>     0
               DO     DUP    I +  KEY  10     DIGIT  DROP 10     *
                                  KEY  10     DIGIT  DROP  +  SWAP  high.64k(hex>)  @  +   c!  \ a'>a C!
               LOOP   DROP          0
         ELSE  R>     2DROP  DROP  -1
         THEN
     then
   UNTIL       high.64k(hex>)   off    QUIT   ;










\ --------------------------------------------------------------------------------------------
t: >r0       ( at rum time: r0 ----------- )          r0=t                              {drop}       ret'
t: >r0~r1    ( at rum time: r0 r1 -------- )          r1=t   nip>r0                     {drop}       ret'
t: >r0~r2    ( at rum time: r0 r1 r2 ----- )          r2=t   nip>r1   nip>r0            {drop}       ret'
t: >r0~r3    ( at rum time: r0 r1 r2 r3 -- )          r3=t   nip>r2   nip>r1   nip>r0   {drop}       ret'

t:  r0>      ( at rum time: ----------- r0 )  {dup}   t=r0                                           ret'
t:  r0~r1>   ( at rum time: -------- r0 r1 )  {dup}   t=r1  -nip<r0                                  ret'
t:  r0~r2>   ( at rum time: ----- r0 r1 r2 )  {dup}   t=r2  -nip<r0  -nip<r1                         ret'
t:  r0~r3>   ( at rum time: -- r0 r1 r2 r3 )  {dup}   t=r3  -nip<r0  -nip<r1  -nip<r2                ret'
\ ----------------------------------------------------------------------------------------------
\ : R4=T+1               4 T 1 R=R+#  ;
\ :         {EXECUTE}    4 T 1 R=R+#  {DROP}  4 JMP_R ;
\ : {no.drop.EXECUTE}    4 T 1 R=R+#          4 JMP_R ;
\ ----------------------------------------------------------------------------------------------
:.  t:+   t:  push.LR  ;.                       \  : {no.drop.call}    R4=T+1        CALL_R4 ;  === call_T
                                                \  : {CALL}            R4=T+1 {DROP} CALL_R4 ;  === call_T+drop
\ ----------------------------------------------------------------------------------------------
t:+  0`0  (.a'.--.)                                                                  {call}                 ret  \ IMMEDIATE'
t:+  0`1  (.a'.--.r0.)                                                       {no.drop.call}       T=R0      ret  \ IMMEDIATE'
t:+  0`2  (.a'.--.r0.r1.)                                                    {no.drop.call}  no.dup,R0~R1>  ret  \ IMMEDIATE'
t:+  0`3  (.a'.--.r0.r1.r2.)                                                 {no.drop.call}  no.dup,R0~R2>  ret  \ IMMEDIATE'
t:+  0`4  (.a'.--.r0.r1.r2.r3.)                                              {no.drop.call}  no.dup,R0~R3>  ret  \ IMMEDIATE'

t:+  1`0  (.r0.a'.--.)                                               nip>R0          {call}                 ret  \ IMMEDIATE'
t:+  1`1  (.r0.a'.--.r0.)                                            nip>R0  {no.drop.call}       T=R0      ret  \ IMMEDIATE'
t:+  1`2  (.r0.a'.--.r0.r1.)                                         nip>R0  {no.drop.call}  no.dup,R0~R1>  ret  \ IMMEDIATE'
t:+  1`3  (.r0.a'.--.r0.r1.r2.)                                      nip>R0  {no.drop.call}  no.dup,R0~R2>  ret  \ IMMEDIATE'
t:+  1`4  (.r0.a'.--.r0.r1.r2.r3.)                                   nip>R0  {no.drop.call}  no.dup,R0~R3>  ret  \ IMMEDIATE'

t:+  2`0  (.r0.r1.a'.--.)                                    nip>R1  nip>R0          {call}                 ret  \ IMMEDIATE'
t:+  2`1  (.r0.r1.a'.--.r0.)                                 nip>R1  nip>R0  {no.drop.call}       T=R0      ret  \ IMMEDIATE'
t:+  2`2  (.r0.r1.a'.--.r0.r1.)                              nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R1>  ret  \ IMMEDIATE'
t:+  2`3  (.r0.r1.a'.--.r0.r1.r2.)                           nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R2>  ret  \ IMMEDIATE'
t:+  2`4  (.r0.r1.a'.--.r0.r1.r2.r3.)                        nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R3>  ret  \ IMMEDIATE'

t:+  3`0  (.r0.r1.r2.a'.--.)                         nip>R2  nip>R1  nip>R0          {call}                 ret  \ IMMEDIATE'
t:+  3`1  (.r0.r1.r2.a'.--.r0.)                      nip>R2  nip>R1  nip>R0  {no.drop.call}       T=R0      ret  \ IMMEDIATE'
t:+  3`2  (.r0.r1.r2.a'.--.r0.r1.)                   nip>R2  nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R1>  ret  \ IMMEDIATE'
t:+  3`3  (.r0.r1.r2.a'.--.r0.r1.r2.)                nip>R2  nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R2>  ret  \ IMMEDIATE'
t:+  3`4  (.r0.r1.r2.a'.--.r0.r1.r2.r3.)             nip>R2  nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R3>  ret  \ IMMEDIATE'

t:+  4`0  (.r0.r1.r2.r3.a'.--.)              nip>R3  nip>R2  nip>R1  nip>R0          {call}                 ret  \ IMMEDIATE'
t:+  4`1  (.r0.r1.r2.r3.a'.--.r0.)           nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}       T=R0      ret  \ IMMEDIATE'
t:+  4`2  (.r0.r1.r2.r3.a'.--.r0.r1.)        nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R1>  ret  \ IMMEDIATE'
t:+  4`3  (.r0.r1.r2.r3.a'.--.r0.r1.r2.)     nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R2>  ret  \ IMMEDIATE'
t:+  4`4  (.r0.r1.r2.r3.a'.--.r0.r1.r2.r3.)  nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}  no.dup,R0~R3>  ret  \ IMMEDIATE'

\  : t1  '' putc  ...   1`0  ;     : t2  '' getc  ...  0`1  ;


\ :.  {call}+  push.R4  {call}  pop.R4  ;.
\ ----------------------------------------------------------------------------------------------
:.  0'0  (.a'.--.)                         '.  cfa>cfa'   ...  0`0  ;.  \                                         {call}+                 ret  \ IMMEDIATE'
:.  0'1  (.a'.--.r0.)                      '.  cfa>cfa'   ...  0`1  ;.  \                                 {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  0'2  (.a'.--.r0.r1.)                   '.  cfa>cfa'   ...  0`2  ;.  \                                 {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  0'3  (.a'.--.r0.r1.r2.)                '.  cfa>cfa'   ...  0`3  ;.  \                                {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  0'4  (.a'.--.r0.r1.r2.r3.)             '.  cfa>cfa'   ...  0`4  ;.  \                                 {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  1'0  (.r0.a'.--.)                      '.  cfa>cfa'   ...  1`0  ;.  \                         nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  1'1  (.r0.a'.--.r0.)                   '.  cfa>cfa'   ...  1`1  ;.  \                         nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  1'2  (.r0.a'.--.r0.r1.)                '.  cfa>cfa'   ...  1`2  ;.  \                         nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  1'3  (.r0.a'.--.r0.r1.r2.)             '.  cfa>cfa'   ...  1`3  ;.  \                         nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  1'4  (.r0.a'.--.r0.r1.r2.r3.)          '.  cfa>cfa'   ...  1`4  ;.  \                         nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  2'0  (.r0.r1.a'.--.)                   '.  cfa>cfa'   ...  1`0  ;.  \                 nip>R1  nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  2'1  (.r0.r1.a'.--.r0.)                '.  cfa>cfa'   ...  1`1  ;.  \                 nip>R1  nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  2'2  (.r0.r1.a'.--.r0.r1.)             '.  cfa>cfa'   ...  1`2  ;.  \                 nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  2'3  (.r0.r1.a'.--.r0.r1.r2.)          '.  cfa>cfa'   ...  1`3  ;.  \                 nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  2'4  (.r0.r1.a'.--.r0.r1.r2.r3.)       '.  cfa>cfa'   ...  1`4  ;.  \                 nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  3'0  (.r0.r1.r2.a'.--.)                '.  cfa>cfa'   ...  3`0  ;.  \         nip>R2  nip>R1  nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  3'1  (.r0.r1.r2.a'.--.r0.)             '.  cfa>cfa'   ...  3`1  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  3'2  (.r0.r1.r2.a'.--.r0.r1.)          '.  cfa>cfa'   ...  3`2  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  3'3  (.r0.r1.r2.a'.--.r0.r1.r2.)       '.  cfa>cfa'   ...  3`3  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  3'4  (.r0.r1.r2.a'.--.r0.r1.r2.r3.)    '.  cfa>cfa'   ...  3`4  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  4'0  (.r0.r1.r2.r3.a'.--.)             '.  cfa>cfa'   ...  4`0  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  4'1  (.r0.r1.r2.r3.a'.--.r0.)          '.  cfa>cfa'   ...  4`1  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  4'2  (.r0.r1.r2.r3.a'.--.r0.r1.)       '.  cfa>cfa'   ...  4`2  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  4'3  (.r0.r1.r2.r3.a'.--.r0.r1.r2.)    '.  cfa>cfa'   ...  4`3  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  4'4  (.r0.r1.r2.r3.a'.--.r0.r1.r2.r3.) '.  cfa>cfa'   ...  4`4  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

\  :  t1   0'1  getc             ;             : t2  1'0  putc            ;   
\  :  t3    ''  putc  ...   1`0  ;             : t2    '' getc  ...  0`1  ;


\ ----------------------------------------------------------------------------------------------
:.  0|0  (.a'.--.)                         '.  cfa>cfa'   ...  0`0  ;.  \                                         {call}+                 ret  \ IMMEDIATE'
:.  0|1  (.a'.--.r0.)                      '.  cfa>cfa'   ...  0`1  ;.  \                                 {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  0|2  (.a'.--.r0.r1.)                   '.  cfa>cfa'   ...  0`2  ;.  \                                 {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  0|3  (.a'.--.r0.r1.r2.)                '.  cfa>cfa'   ...  0`3  ;.  \                                {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  0|4  (.a'.--.r0.r1.r2.r3.)             '.  cfa>cfa'   ...  0`4  ;.  \                                 {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  1|0  (.r0.a'.--.)                      '.  cfa>cfa'   ...  1`0  ;.  \                         nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  1|1  (.r0.a'.--.r0.)                   '.  cfa>cfa'   ...  1`1  ;.  \                         nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  1|2  (.r0.a'.--.r0.r1.)                '.  cfa>cfa'   ...  1`2  ;.  \                         nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  1|3  (.r0.a'.--.r0.r1.r2.)             '.  cfa>cfa'   ...  1`3  ;.  \                         nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  1|4  (.r0.a'.--.r0.r1.r2.r3.)          '.  cfa>cfa'   ...  1`4  ;.  \                         nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  2|0  (.r0.r1.a'.--.)                   '.  cfa>cfa'   ...  2`0  ;.  \                 nip>R1  nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  2|1  (.r0.r1.a'.--.r0.)                '.  cfa>cfa'   ...  2`1  ;.  \                 nip>R1  nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  2|2  (.r0.r1.a'.--.r0.r1.)             '.  cfa>cfa'   ...  2`2  ;.  \                 nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  2|3  (.r0.r1.a'.--.r0.r1.r2.)          '.  cfa>cfa'   ...  2`3  ;.  \                 nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  2|4  (.r0.r1.a'.--.r0.r1.r2.r3.)       '.  cfa>cfa'   ...  2`4  ;.  \                 nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  3|0  (.r0.r1.r2.a'.--.)                '.  cfa>cfa'   ...  3`0  ;.  \         nip>R2  nip>R1  nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  3|1  (.r0.r1.r2.a'.--.r0.)             '.  cfa>cfa'   ...  3`1  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  3|2  (.r0.r1.r2.a'.--.r0.r1.)          '.  cfa>cfa'   ...  3`2  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  3|3  (.r0.r1.r2.a'.--.r0.r1.r2.)       '.  cfa>cfa'   ...  3`3  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  3|4  (.r0.r1.r2.a'.--.r0.r1.r2.r3.)    '.  cfa>cfa'   ...  3`4  ;.  \         nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

:.  4|0  (.r0.r1.r2.r3.a'.--.)             '.  cfa>cfa'   ...  4`0  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0          {call}+                 ret  \ IMMEDIATE'
:.  4|1  (.r0.r1.r2.r3.a'.--.r0.)          '.  cfa>cfa'   ...  4`1  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+       T=R0      ret  \ IMMEDIATE'
:.  4|2  (.r0.r1.r2.r3.a'.--.r0.r1.)       '.  cfa>cfa'   ...  4`2  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R1>  ret  \ IMMEDIATE'
:.  4|3  (.r0.r1.r2.r3.a'.--.r0.r1.r2.)    '.  cfa>cfa'   ...  4`3  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R2>  ret  \ IMMEDIATE'
:.  4|4  (.r0.r1.r2.r3.a'.--.r0.r1.r2.r3.) '.  cfa>cfa'   ...  4`4  ;.  \ nip>R3  nip>R2  nip>R1  nip>R0  {no.drop.call}+  no.dup,R0~R3>  ret  \ IMMEDIATE'

\  :  t1   0|1  getc             ;             : t2  1|0  putc            ;   \ clear and simpler
\  :  t4   0'1  getc             ;             : t5  1'0  putc            ;    
\  :  t3    ''  putc  ...   1`0  ;             : t2    '' getc  ...  0`1  ;

:.  words'   cls  stack.notation(stm32f103mecrispForth)  .lnc  lnc  ;.

















\ insert{
\ '' end 2 +. org
 
:.  w=#  ( # -- ) w swap. r=#  ;.
:.  r=(r),h    0  r=(r+#),h    ;.
  \ *******************************************************************************
  (  000001F4  00000000          )
  (  000001F8  04 3F 4B 45 59    )   t:   ?rx(stm32f103)  \  ?KEY    \ ?rx
  \ -------------------------------------------------------------------------------
  (  00000200  41 F8 04 5D       )                  {dup}
  (  00000204  0F 4C             )                  W=40013800           \ SYSCFG_BASE          \ (00000244)=40013800
  (  00000206  26 88             )        882C 16,' \          R4=(R5+0),h   \ ??????????    y  w  r=(r),h       \ XP=(W),h
  (  00000208  16 F0 20 06       )            y 20  Rn#,s         \ XP=XPn20,s
  (  0000020C  06 D0             )     if'<> \ z=1? eq?           \ 0000020C --> 0000021C ===============================
  (  0000020E  25 79             )        792E 16,'  \          R6=(R5+10),sb  \ ????? t  w 10  r=(r+#)b
  (  00000210  41 F8 04 5D       )                  {dup}
  (  00000214  18 BF             )               \  it'<>......itne   \ 2019.12.25
  (  00000216  6F F0 00 05       )                  T=-1
  (  0000021A  70 47             )                  ret'
                                       then'                      \ 0000020C --> 0000021C ===============================
  (  0000021C  4F F0 00 05       )                  T=0
  (  00000220  70 47             )                  ret'
  \ *******************************************************************************
COMMENT:

  \ *******************************************************************************
  (  000001F4  00000000          )
  (  000001F8  04 3F 4B 45 59    )   t:  ?KEY       \ ==== ?rx
  \ -------------------------------------------------------------------------------
  (  00000200  41 F8 04 5D       )                  {dup}   \ (R1-4)=R5,p
  (  00000204  0F 4C             )                  R4=40013800          \ SYSCFG_BASE          \ (00000244)=40013800
  (  00000206  26 88             )                  R6=(R4),h
  (  00000208  16 F0 20 06       )                  R6=R6n20,s
  (  0000020C  06 D0             )        if'<> \ z=1? eq?           \ 0000020C --> 0000021C ===============================
  (  0000020E  25 79             )                  T W 10 ( 5 4 10 )  R=(R+#)b  \ R5=(R4+10)b
  (  00000210  41 F8 04 5D       )                  {dup}   \ (R1-4)=R5,p
\  214 BF18  ??????????
  (  00000216  6F F0 00 05       )                  R5=0/
  (  0000021A  70 47             )                  jmp_RE
                                          then'                      \ 0000020C --> 0000021C ===============================
  (  0000021C  4F F0 00 05       )                  R5=0
  (  00000220  70 47             )                  jmp_RE
  (  00000222  00 00             )                  R0=R0<<0,s
  \ *******************************************************************************
  (  00000224  200001F8          )
  (  00000228  04 45 4D 49 54    )   t:  EMIT       \ ==== tx!
  \ -------------------------------------------------------------------------------
  (  00000230  04 4C             )                  R4=40013800          \ SYSCFG_BASE          \ (00000244)=40013800
                                          begin'                     \ 00000238 --> 00000232 **********************
  (  00000232  26 88             )                  R6=(R4),h
  (  00000234  16 F0 80 06       )                  R6=R6n80,s
  (  00000238  FB D0             )        until'<> \ z=1? eq?        \ 00000238 --> 00000232 **********************
  (  0000023A  A5 80             )                  (R4+8)=R5,h
  (  0000023C  51 F8 04 5B       )                  R5=(R1+4),p
  (  00000240  70 47             )                  jmp_RE
  (  00000242  00 00             )                  R0=R0<<0,s
  (  00000244  00 38 01 40       )           data:  40013800             \ from      204
  \ *******************************************************************************
COMMENT;

  (  00000224  200001F8          )
  (  00000228  04 45 4D 49 54    )   t:    tx!(stm32f103)  \  EMIT   \  tx!
  \ -------------------------------------------------------------------------------
  (  00000230  04 4C             )                  W=40013800           \ SYSCFG_BASE          \ (00000244)=40013800
                                          begin'                     \ 00000238 --> 00000232 **********************
  (  00000232  26 88             )        882C 16,'  \      R4=(R5+0),h   \ ??????????      y w r=(r),h        \ XP=(W),h
  (  00000234  16 F0 80 06       )              y 80  Rn#,s        \ XP=XPn80,s
  (  00000238  FB D0             )        until'<> \ z=1? eq?        \ 00000238 --> 00000232 **********************
  (  0000023A  A5 80             )  80AE 16,'   \ ????          w 8 t (r+#)=r,h    \ (W+8)=T,h
  (  0000023C  51 F8 04 5B       )                  {drop}
  (  00000240  70 47             )                  ret'
  (  00000242  00 00             )         \        nop
  (  00000244  00 38 01 40       )         \  data:  40013800             \ from      204
  \ *******************************************************************************
 

   ''   tx!(stm32f103)      ''  uart.switch.stm32F429.eF    516C  514C   -.    +.   32!'
   ''   ?rx(stm32f103)      ''  uart.switch.stm32F429.eF    5170  514C   -.    +.   32!'

   ''   tx!(stm32f103)    ( ''  intial.system.variable )    4040    405c  4040   -.    +.   32!'
   ''   ?rx(stm32f103)    ( ''  intial.system.variable )    4040    4058  4040   -.    +.   32!'




:   DUMP4  ( from length -- )  bounds
    do   cr  i    8 u.r   4 spaces   i  10  bounds
       do    i @  8 u.r   2 spaces   4
       +loop                        10
    +loop  ;

COMMENT:

20002100 A8 DUMP4  \  20002100  A8  9190 ( DUMP4 )  EXECUTE
20002100    00004294  000083B4  00000000  00000000
20002110    20000378  20000300  00009090  000090C8
20002120    00006A2C  000069CC  00005120  00006C6C
20002130    00000010  00000001  00000000
20002140    00000011  20004E80  00000000  00006BF8
20002150    00005FC0  200010F8* 200002F4* 20002194*
20002160    00000000  00000000  00000000  00000000
20002170    00000000  00000000  00000000  00000000
20002180    20002194* 20002194* 20001000  20001000
20002190    000091FC* 000091FC* 00000000  00000000
200021A0    FFFFFFFF  FFFFFFFF


00004040 A8 DUMP4  \      4040  A8  9190 ( DUMP4 )  EXECUTE    CR  20002100  A8  9190 ( DUMP4 )  EXECUTE
    4040    00004294  000083B4  00000000  00000000
    4050    20000378  20000300  00009090  000090C8
    4060    00006A2C  000069CC  00005120  00006C6C
    4070    00000010  00000000  00000000  0000
    4080    00000000  20004E80  00000000  00006BF8
    4090    00005FC0  00000000* 00000000* 00000000*
    40A0    00000000  00000000  00000000  00000000
    40B0    00000000  00000000  00000000  00000000
    40C0    00000000* 00000000* 20001000  20001000
    40D0    000083AC* 000083AC* 00000000  00000000
    40E0    FFFFFFFF  FFFFFFFF

'' TF.COLD  CFA'>NFA'(ADJACENT)    DUP.  LAST'(ADJACENT)      !.
                                      '' CONTEXT 6 +. 32@'  32!'
COMMENT;
















: PF  ( -- )   150  EXECUTE  ;  \ prog4004eForth
: MF  ( -- )  3B96  EXECUTE  ;  \ mecrispF_2_3_6

include  STM32F103-APP69.F


t:  TF.COLD                                            \  cfa= 1C94
                                                     R0  (rp0)  @.   r=#    RP  0  r=r
                                                     R0  (sp0)  @.   r=#    SP  0  r=r

                                                     55 ...  tx!(stm32f103)      56 ...  tx!(stm32f103)
                                                     UART.SWITCH.STM32F429.EF   
  (  00007C4A  FE F7 39 F9       )                  HEX                                           \      5EC0
                                           BEGIN                     \ 00007C56 --> 00007C4E +++++
  (  00007C4E  FF F7 8F FF       )                  GET.COMMAND                                   \      7B70
  (  00007C52  FF F7 B5 FF       )                  EXECUTE.COMMAND                               \      7BC0
  (  00007C56  FC F7 EB FE 4E 7C )         AGAIN  \ branch  00007C4E \ 00007C56 --> 00007C4E +++++
  (  00007C5E  00 BD             )                  ret



          \ prog4004eForth   2021.10.29
:.  prog4004.rom.start  B000  ;.

stm32f401mecrispForth?  @.
#if   t:  mf ( -- )  3953 ( 3952 )  jmp_#24      \ stm32f401eForth
#then
stm32f103eForth?  @.
#if   t:  mf ( -- )  3B97 ( 3B96 )  jmp_#24      \ stm32f103eForth
      t:  pf ( -- )  prog4004.rom.start  150  +. ( B150 )  jmp_#24
#then
\   prog4004.rom.start  160 +.  org   prog4004.rom.start 2300 +.  rcall_#24
\   prog4004.rom.start 2300 +.  org                               R0=0800B000  ret'

INSERT{

\ stm32f103eForth-prog4004
         B000  org

  (         0 )   00000000 || 08000151 || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        20 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        40 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        60 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        80 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        A0 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        C0 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (        E0 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (       100 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (       120 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF ||
  (       140 )   FFFFFFFF || FFFFFFFF || FFFFFFFF || FFFFFFFF || F814F000 || FBAEF001 || F802F000 || 47004811 ||
  (       160 )   0300200B || 5100F04F || 42A0F501 || BF3C4291 || 3B04F850 || 3B04F841 || 4770D3F8 || 6981480A ||
  (       180 )   071CF244 || 0107EA41 || 48086181 || F4416841 || 60416194 || F2434806 || 8181410C || 0145F240 ||
  (       1A0 )   47708101 || 200022B9 || 40021000 || 40010800 || 40013800 || 00000000 || 2000224D || 00000010 ||
  (       1C0 )   00000000 || 00000000 || 00000000 || 00000000 || 20004E00 || 20001751 || 00000000 || 200022B0 ||
  (       1E0 )   20002300 || 20002300 || 200022B0 || 00000000 || 00000000 || 00000000 || 454B3F04 || 00000059 ||
  (       200 )   5D04F841 || 88264C0F || 0620F016 || 7925D006 || 5D04F841 || F06FBF18 || 47700500 || 0500F04F ||
  (       220 )   00004770 || 200001F8 || 494D4504 || 00000054 || 88264C04 || 0680F016 || 80A5D0FB || 5B04F851 ||
  (       240 )   00004770 || 40013800 || 20000228 || 504F4E03 || 00004770 || 5D04F841 || 0E01F02E || 5B04F85E ||
  (       260 )   0E01F04E || 00004770 || 2000024C || 45584507 || 45545543 || 0401F045 || 5B04F851 || 00004720 ||
  (       280 )   00246814 || F102D104 || F10E0204 || 47700E04 || 0401F1A4 || F85E6014 || F04EEC01 || 47700E01 ||
  (       2A0 )   F851002C || D1045B04 || EC01F85E || 0E01F04E || F10E4770 || 47700E04 || EC01F85E || 0E01F04E ||
  (       2C0 )   00004770 || 2000026C || 49584504 || 00000054 || FB04F852 || 200002C8 || 00002101 || 4B04F851 ||
  (       2E0 )   F851602C || 47705B04 || 200002D8 || 00004001 || 4770682D || 200002EC || 00214302 || 4B04F851 ||
  (       300 )   F851702C || 47705B04 || 200002F8 || 00214802 || 4B04F851 || F851802C || 47705B04 || 2000030C ||
  (       320 )   00404802 || 4770882D || 20000320 || 524C4304 || 00000021 || 0514F105 || BFD0F7FF || 2000032C ||
  (       340 )   54455304 || 00000021 || 0510F105 || BFC6F7FF || 20000340 || 2B415003 || 44254C15 || 00004770 ||
  (       360 )   20000354 || 2B425003 || 44254C12 || 00004770 || 20000364 || 2B435003 || 44254C0F || 00004770 ||
  (       380 )   20000374 || 4B534D04 || 00000021 || 6B04F851 || 7B04F851 || 0707EA06 || EA6F682C || EA060606 ||
  (       3A0 )   EA440404 || 602C0407 || 5B04F851 || 00004770 || 40010800 || 40010C00 || 40011000 || 20000384 ||
  (       3C0 )   00404302 || 4770782D || 200003C0 || 003E5202 || 5D04F841 || 5B04F852 || 00004770 || 200003CC ||
  (       3E0 )   00405202 || 5D04F841 || 47706815 || 200003E0 || 00523E42 || 5D04F842 || 5B04F851 || 00004770 ||
  (       400 )   200003F0 || 40505303 || 5D04F841 || 4770460D || 20000404 || 4F524404 || 00000050 || 5B04F851 ||
  (       420 )   00004770 || 20000414 || 50554403 || 5D04F841 || 00004770 || 20000428 || 41575304 || 00000050 ||
  (       440 )   600D680C || 47704625 || 20000438 || 45564F04 || 00000052 || 5D04F841 || 4770684D || 2000044C ||
  (       460 )   003C3002 || 0400F04F || 0525EB04 || 00004770 || 20000460 || 444E4103 || 4B04F851 || 0504EA05 ||
  (       480 )   00004770 || 20000474 || 00524F02 || 4B04F851 || 0504EA45 || 00004770 || 20000488 || 524F5803 ||
  (       4A0 )   4B04F851 || 0504EA85 || 00004770 || 2000049C || 2B4D5503 || 1964680C || 0500F04F || 0500F145 ||
  (       4C0 )   4770600C || 200004B0 || 48535206 || 00544649 || 4B04F851 || F505FA44 || 00004770 || 200004C8 ||
  (       4E0 )   48534C06 || 00544649 || 4B04F851 || F505FA04 || 00004770 || 200004E0 || 00002B01 || 4B04F851 ||
  (       500 )   47704425 || 200004F8 || 00002D01 || 4B04F851 || 0504EBC5 || 00004770 || 20000508 || 00002A01 ||
  (       520 )   4B04F851 || F505FB04 || 00004770 || 2000051C || 2A4D5503 || FBA5680C || 600E6704 || 4770463D ||
  (       540 )   20000530 || 002A4D02 || FB85680C || 600E6704 || 4770463D || 20000544 || 002B3102 || 0501F105 ||
  (       560 )   00004770 || 20000558 || 002D3102 || 0501F1A5 || 00004770 || 20000568 || 002B3202 || 0502F105 ||
  (       580 )   00004770 || 20000578 || 002D3202 || 0502F1A5 || 00004770 || 20000588 || 4C454305 || 00002B4C ||
  (       5A0 )   0504F105 || 00004770 || 20000598 || 4C454305 || 00002D4C || 0504F1A5 || 00004770 || 200005AC ||
  (       5C0 )   004C4202 || 5D04F841 || 0520F04F || 00004770 || 200005C0 || 4C454305 || 0000534C || 0585EA4F ||
  (       5E0 )   00004770 || 200005D4 || 4C454305 || 00002F4C || 05A5EA4F || 00004770 || 200005E8 || 002A3202 ||
  (       600 )   0545EA4F || 00004770 || 200005FC || 002F3202 || 0565EA4F || 00004770 || 2000060C || 55443F04 ||
  (       620 )   00000050 || BF18002C || 5D04F841 || 00004770 || 2000061C || 544F5203 || 600D680C || 604C684D ||
  (       640 )   00004770 || 20000634 || 52443205 || 0000504F || 5B04F851 || 5B04F851 || 00004770 || 20000648 ||
  (       660 )   55443204 || 00000050 || F841680C || F8415D04 || 47704D04 || 20000660 || 002B4402 || 4B04F851 ||
  (       680 )   6B04F851 || 19E4680F || EB45600C || 47700506 || 20000678 || 544F4E03 || 0505EA6F || 00004770 ||
  (       6A0 )   20000694 || 47454E06 || 00455441 || 0500F1C5 || 00004770 || 200006A4 || 53424103 || 4F00F015 ||
  (       6C0 )   426DBF18 || 00004770 || 200006B8 || 00003D01 || 4B04F851 || BF0C42A5 || 0500F06F || 47702500 ||
  (       6E0 )   200006CC || 003C5502 || 4B04F851 || BF3442AC || 0500F06F || 47702500 || 200006E4 || 00003C01 ||
  (       700 )   4B04F851 || BFB442AC || 0500F06F || 47702500 || 200006FC || 00003E01 || 4B04F851 || BFCC42AC ||
  (       720 )   0500F06F || 47702500 || 20000714 || 58414D03 || 4B04F851 || BFC842AC || 47704625 || 2000072C ||
  (       740 )   4E494D03 || 4B04F851 || BFB842AC || 47704625 || 20000740 || 00212B02 || 4B04F851 || 4426682E ||
  (       760 )   F851602E || 47705B04 || 20000754 || 00213202 || 4B04F851 || 6B04F851 || 4B04F845 || F851602E ||
  (       780 )   47705B04 || 2000076C || 00403202 || F841686C || 682D4D04 || 00004770 || 20000788 || 554F4305 ||
  (       7A0 )   0000544E || 4B01F815 || 5D04F841 || 47704625 || 2000079C || 454E4407 || 45544147 || EBA8680C ||
  (       7C0 )   1B340808 || 0505EB66 || 4770600C || 5D04F841 || 0501F1AE || FB04F852 || 5D04F841 || 5C01F85E ||
  (       7E0 )   FB04F852 || 200007B4 || 4F422705 || 0000544F || 5D04F841 || 0504F103 || 00004770 || 200007E8 ||
  (       800 )   53414204 || 00000045 || 5D04F841 || 0508F103 || 00004770 || 5D04F841 || 050CF103 || 00004770 ||
  (       820 )   20000800 || 41505304 || 0000004E || 5D04F841 || 0510F103 || 00004770 || 20000824 || 4E493E03 ||
  (       840 )   5D04F841 || 0514F103 || 00004770 || 2000083C || 49542304 || 00000042 || 5D04F841 || 0518F103 ||
  (       860 )   00004770 || 20000850 || 56452705 || 00004C41 || 5D04F841 || 0520F103 || 00004770 || 20000868 ||
  (       880 )   444C4803 || 5D04F841 || 0524F103 || 00004770 || 20000880 || 4E4F4307 || 54584554 || 5D04F841 ||
  (       8A0 )   0528F103 || 00004770 || 20000894 || 00504302 || 5D04F841 || 052CF103 || 00004770 || 200008AC ||
  (       8C0 )   53414C04 || 00000054 || 5D04F841 || 0534F103 || 00004770 || 200008C0 || 54495706 || 004E4948 ||
  (       8E0 )   ED04F842 || FDB6F7FF || FE10F7FF || FD82F7FF || FE0CF7FF || FD6CF7FF || FEF6F7FF || FB04F852 ||
  (       900 )   200008D8 || 2F4D5506 || 00444F4D || 0701F04F || 4B04F851 || 19B6680E || D3044164 || 0405EBA4 ||
  (       920 )   0601F106 || 1B64E004 || 1C76BF28 || 442CD200 || D3F019FF || 600C4635 || 00004770 || 20000904 ||
  (       940 )   4D2F4D05 || 0000444F || ED04F842 || FD6EF7FF || FD88F7FF || FD6AF7FF || FD4CF7FF || FCA0F7FF ||
  (       960 )   20000975 || FEA2F7FF || FD44F7FF || FF26F7FF || FD2EF7FF || FD3EF7FF || FD58F7FF || FD72F7FF ||
  (       980 )   FC8EF7FF || 20000991 || FD2CF7FF || FDB6F7FF || FD1EF7FF || FFBAF7FF || FD1AF7FF || FC80F7FF ||
  (       9A0 )   200009B1 || FD4CF7FF || FE80F7FF || FD48F7FF || FB04F852 || 20000940 || 4F4D2F04 || 00000044 ||
  (       9C0 )   ED04F842 || FD46F7FF || FD4CF7FF || FD38F7FF || FFBAF7FF || FB04F852 || 200009B8 || 444F4D03 ||
  (       9E0 )   ED04F842 || FFECF7FF || FD18F7FF || FB04F852 || 200009DC || 00002F01 || ED04F842 || FFE0F7FF ||
  (       A00 )   FD1EF7FF || FD0AF7FF || FB04F852 || 200009F4 || 4D2F2A05 || 0000444F || ED04F842 || FCEAF7FF ||
  (       A20 )   FD92F7FF || FCD4F7FF || FF8EF7FF || FB04F852 || 20000A10 || 002F2A02 || ED04F842 || FFECF7FF ||
  (       A40 )   FCFEF7FF || FCEAF7FF || FB04F852 || 20000A34 || 494C4107 || 44454E47 || 00240024 || 0503F105 ||
  (       A60 )   0403F06F || 0504EA05 || 00004770 || 20000A50 || 48433E05 || 00005241 || ED04F842 || FBEAF7FF ||
  (       A80 )   0000007F || FCF8F7FF || FCD0F7FF || FD9AF7FF || FBE0F7FF || 0000007F || FF22F7FF || FDFCF7FF ||
  (       AA0 )   FBFEF7FF || 20000AB5 || FCB8F7FF || FBD2F7FF || 0000005F || FB04F852 || 20000A70 || 50454405 ||
  (       AC0 )   00004854 || 5D04F841 || 6500F644 || 0500F2C2 || 0501EBA5 || 05A5EA4F || 0501F1A5 || 00004770 ||
  (       AE0 )   20000ABC || 43495004 || 0000004B || ED04F842 || FD34F7FF || FD72F7FF || FC86F7FF || FCFEF7FF ||
  (       B00 )   FBF6F7FF || FB04F852 || 20000AE4 || 52454804 || 00000045 || ED04F842 || FECAF7FF || FBE8F7FF ||
  (       B20 )   FB04F852 || 20000B0C || 44415003 || ED04F842 || FFF0F7FF || 0550F105 || FB04F852 || 20000B28 ||
  (       B40 )   42495403 || 5D04F841 || 477069DD || 20000B40 || 58454008 || 54554345 || 00000045 || F851002C ||
  (       B60 )   68245B04 || 0401F044 || 4720BF18 || 00004770 || 20000B50 || 4F4D4305 || 00004556 || 6B04F851 ||
  (       B80 )   7B04F851 || F817E003 || F8064B01 || 002D4B01 || F1A5D002 || E7F60501 || 5B04F851 || 00004770 ||
  (       BA0 )   20000B74 || 564F4D04 || 00000045 || 0503F025 || 6B04F851 || 7B04F851 || F857E003 || F8464B04 ||
  (       BC0 )   002D4B04 || F1A5D002 || E7F60504 || 5B04F851 || 00004770 || 20000BA4 || 4C494604 || 0000004C ||
  (       BE0 )   6B04F851 || 7B04F851 || 462DE000 || 5B01F807 || D0020036 || 0601F1A6 || F851E7F6 || 47705B04 ||
  (       C00 )   20000BD8 || 43415005 || 0000244B || ED04F842 || FF24F7FF || FC0AF7FF || FBECF7FF || FC1AF7FF ||
  (       C20 )   FC6CF7FF || FC9AF7FF || FB14F7FF || FFFFFFFC || FC22F7FF || FB0EF7FF || 00000000 || FC00F7FF ||
  (       C40 )   FB4CF7FF || FBCEF7FF || FD0EF7FF || FB56F7FF || FC84F7FF || FBF4F7FF || FF90F7FF || FBB8F7FF ||
  (       C60 )   FB04F852 || 20000C04 || 47494405 || 00005449 || ED04F842 || FAEEF7FF || 00000009 || FBEAF7FF ||
  (       C80 )   FD3EF7FF || 0507F005 || FC38F7FF || 0530F105 || FB04F852 || 20000C68 || 54584507 || 54434152 ||
  (       CA0 )   ED04F842 || FAD6F7FF || 00000000 || FBC8F7FF || FE2CF7FF || FBC4F7FF || FFDAF7FF || FB04F852 ||
  (       CC0 )   20000C98 || 00233C02 || ED04F842 || FF2EF7FF || FDD8F7FF || FB02F7FF || FB04F852 || 20000CC4 ||
  (       CE0 )   4C4F4804 || 00000044 || ED04F842 || FDCAF7FF || FAFEF7FF || FC3AF7FF || FB98F7FF || FDC2F7FF ||
  (       D00 )   FAECF7FF || FAFAF7FF || FB04F852 || 20000CE0 || 00002301 || ED04F842 || FD76F7FF || FAE8F7FF ||
  (       D20 )   FFBEF7FF || FFE0F7FF || FB04F852 || 20000D10 || 00532302 || ED04F842 || FFECF7FF || FB76F7FF ||
  (       D40 )   FAAEF7FF || 20000D4B || F852E7F6 || 0000FB04 || 20000D30 || 47495304 || 0000004E || ED04F842 ||
  (       D60 )   FB80F7FF || FA9CF7FF || 20000D79 || FA72F7FF || 0000002D || FFB8F7FF || FB04F852 || 20000D54 ||
  (       D80 )   003E2302 || ED04F842 || FB48F7FF || FD7AF7FF || FAAEF7FF || FECAF7FF || FB5CF7FF || FBB6F7FF ||
  (       DA0 )   FB04F852 || ED04F842 || FB40F7FF || FB22F7FF || FC84F7FF || FF88F7FF || FFBCF7FF || FB08F7FF ||
  (       DC0 )   FFCCF7FF || FFDEF7FF || FB04F852 || 20000D80 || 58454803 || ED04F842 || FA3CF7FF || 00000010 ||
  (       DE0 )   FD12F7FF || FA7AF7FF || FB04F852 || 20000DD0 || 43454407 || 4C414D49 || ED04F842 || FA2AF7FF ||
  (       E00 )   0000000A || FD00F7FF || FA68F7FF || FB04F852 || 20000DF0 || 47494406 || 003F5449 || ED04F842 ||
  (       E20 )   FAE8F7FF || FA16F7FF || 00000030 || FB6EF7FF || FA10F7FF || 00000009 || FB0CF7FF || FC60F7FF ||
  (       E40 )   FA2EF7FF || 20000E69 || FA04F7FF || 00000007 || FB5CF7FF || FAEAF7FF || F9FCF7FF || 0000000A ||
  (       E60 )   FC4EF7FF || FB12F7FF || FAE0F7FF || FAB0F7FF || FC3AF7FF || FB04F852 || 20000E14 || 4D554E07 ||
  (       E80 )   3F524542 || ED04F842 || FCBEF7FF || FA30F7FF || FAB0F7FF || F9DEF7FF || 00000000 || FADAF7FF ||
  (       EA0 )   FC80F7FF || FAD6F7FF || FA8CF7FF || F9D2F7FF || 0000005F || FC0CF7FF || F9F2F7FF || 20000ED5 ||
  (       EC0 )   FF88F7FF || FABCF7FF || FB48F7FF || FAB8F7FF || FB4CF7FF || FABEF7FF || FA74F7FF || F9BAF7FF ||
  (       EE0 )   0000002D || FBF4F7FF || FA84F7FF || FAA8F7FF || FA78F7FF || FB0AF7FF || FAA2F7FF || FA72F7FF ||
  (       F00 )   FAFCF7FF || FB8EF7FF || F9CAF7FF || 20000F99 || FB2CF7FF || FA6EF7FF || FA88F7FF || FA6AF7FF ||
  (       F20 )   FA50F7FF || FC70F7FF || F9E2F7FF || FF76F7FF || F9B6F7FF || 20000F7D || FA82F7FF || FC64F7FF ||
  (       F40 )   F9D6F7FF || FAECF7FF || FAD8F7FF || FA40F7FF || FB04F7FF || F994F7FF || 20000F19 || FA42F7FF ||
  (       F60 )   FA6EF7FF || FA5AF7FF || F99AF7FF || 20000F75 || FB9CF7FF || FA64F7FF || B80CF000 || FA28F7FF ||
  (       F80 )   FA26F7FF || FB64F7FF || FB62F7FF || F962F7FF || 00000000 || FA4AF7FF || FA1AF7FF || FB58F7FF ||
  (       FA0 )   FA16F7FF || FC30F7FF || F998F7FF || FB04F852 || 20000E7C || 59454B03 || ED04F842 || F920F7FF ||
  (       FC0 )   F96EF7FF || 20000FBD || FB04F852 || 20000FB4 || 41505305 || 00004543 || ED04F842 || FAF2F7FF ||
  (       FE0 )   F926F7FF || FB04F852 || 20000FD0 || 41505306 || 00534543 || ED04F842 || F92CF7FF || 00000000 ||
  (      1000 )   FB96F7FF || F9F6F7FF || B802F000 || FFE4F7FF || F936F7FF || 2000100D || FB04F852 || 20000FEC ||
  (      1020 )   50595404 || 00000045 || ED04F842 || F9E2F7FF || B806F000 || FBB6F7FF || FD1EF7FF || F8F8F7FF ||
  (      1040 )   F91EF7FF || 20001035 || F9E8F7FF || FB04F852 || 20001020 || 00524302 || ED04F842 || F8FAF7FF ||
  (      1060 )   0000000D || F8E4F7FF || F8F4F7FF || 0000000A || F8DEF7FF || FB04F852 || ED04F842 || F9A8F7FF ||
  (      1080 )   F9A6F7FF || FA72F7FF || F9D0F7FF || FB8AF7FF || FA34F7FF || FCE2F7FF || FA60F7FF || F9AAF7FF ||
  (      10A0 )   F9CEF7FF || F9A6F7FF || FB04F852 || ED04F842 || FFE2F7FF || FB04F852 || ED04F842 || FB72F7FF ||
  (      10C0 )   FFB2F7FF || FB04F852 || ED04F842 || FFD4F7FF || FFF2F7FF || FB04F852 || 20001054 || 00522E02 ||
  (      10E0 )   ED04F842 || F986F7FF || FE5CF7FF || F970F7FF || F9B0F7FF || FA0AF7FF || FF7CF7FF || FF94F7FF ||
  (      1100 )   FB04F852 || 200010DC || 522E5503 || ED04F842 || F970F7FF || FDD8F7FF || FE0CF7FF || FE32F7FF ||
  (      1120 )   F956F7FF || F996F7FF || F9F0F7FF || FF62F7FF || FF7AF7FF || FB04F852 || 20001108 || 002E5502 ||
  (      1140 )   ED04F842 || FDC0F7FF || FDF4F7FF || FE1AF7FF || FF42F7FF || FF68F7FF || FB04F852 || 2000113C ||
  (      1160 )   00002E01 || ED04F842 || FB4EF7FF || F8C0F7FF || F870F7FF || 0000000A || F992F7FF || F890F7FF ||
  (      1180 )   2000118D || FFDCF7FF || FB04F852 || FE0AF7FF || FF22F7FF || FF48F7FF || FB04F852 || 20001160 ||
  (      11A0 )   00003F01 || ED04F842 || F8A2F7FF || FFDAF7FF || FB04F852 || ED04F842 || FB2CF7FF || F88EF7FF ||
  (      11C0 )   F948F7FF || F916F7FF || F930F7FF || F868F7FF || 200012C3 || F9CAF7FF || FB1CF7FF || F888F7FF ||
  (      11E0 )   F9F0F7FF || FA74F7FF || F85AF7FF || 2000123D || F900F7FF || F9E6F7FF || F92CF7FF || F8E2F7FF ||
  (      1200 )   F984F7FF || F92EF7FF || FA46F7FF || F848F7FF || 20001239 || F9A2F7FF || F832F7FF || 200011F5 ||
  (      1220 )   F8D6F7FF || F8FAF7FF || F814F7FF || 00000000 || F8FCF7FF || FB04F852 || F8CAF7FF || F90AF7FF ||
  (      1240 )   F8FEF7FF || F8D6F7FF || FAE4F7FF || F850F7FF || F900F7FF || F8B6F7FF || F958F7FF || FADAF7FF ||
  (      1260 )   F846F7FF || F9AEF7FF || FA32F7FF || F818F7FF || 20001279 || F8F6F7FF || F812F7FF || 20001297 ||
  (      1280 )   F96CF7FF || FFFCF7FE || 20001249 || F8CEF7FF || F8B0F7FF || F7FFE009 || F7FFF89B || F7FFF8BF ||
  (      12A0 )   F7FFF8C5 || F7FFF95B || F7FFF8A5 || F7FFF8D3 || F7FFF92D || F7FFF88D || F7FFF88B || F852F927 ||
  (      12C0 )   F7FFFB04 || F7FFF8C7 || F7FFF883 || F852F91F || 0000FB04 || 200011A0 || 52415005 || 00004553 ||
  (      12E0 )   ED04F842 || F886F7FF || FC2CF7FF || FAA8F7FF || FFFEF7FE || F902F7FF || FAAEF7FF || FFF8F7FE ||
  (      1300 )   FA9EF7FF || FFF4F7FE || F900F7FF || F860F7FF || FF50F7FF || FA94F7FF || FA1EF7FF || FB04F852 ||
  (      1320 )   200012D8 || 00282E82 || ED04F842 || FF92F7FE || 00000029 || FFD4F7FF || FE76F7FF || FB04F852 ||
  (      1340 )   20001324 || 00002881 || ED04F842 || FF82F7FE || 00000029 || FFC4F7FF || F97AF7FF || FB04F852 ||
  (      1360 )   20001344 || 00005C81 || ED04F842 || FA74F7FF || FFBEF7FE || FA64F7FF || FFB0F7FE || FB04F852 ||
  (      1380 )   20001364 || 41484304 || 00000052 || ED04F842 || F918F7FF || FFA4F7FF || F840F7FF || F812F7FF ||
  (      13A0 )   FB04F852 || 20001384 || 524F5704 || 00000044 || ED04F842 || FF94F7FF || FBACF7FF || F8F0F7FF ||
  (      13C0 )   FC24F7FF || FB04F852 || 200013A8 || 4B4F5405 || 00004E45 || ED04F842 || F8F4F7FF || FFE8F7FF ||
  (      13E0 )   FB04F852 || 200013CC || 4D414E05 || 00003E45 || ED04F842 || F9D6F7FF || FF2CF7FE || 0000001F ||
  (      1400 )   F83AF7FF || F87AF7FF || FB28F7FF || FB04F852 || 200013E8 || 4D415305 || 00003F45 || ED04F842 ||
  (      1420 )   FFE8F7FE || B822F000 || F814F7FF || FFDAF7FE || F8D4F7FF || F862F7FF || FF5AF7FE || F80AF7FF ||
  (      1440 )   FFD0F7FE || F8CAF7FF || F858F7FF || FF50F7FE || F85CF7FF || F8E6F7FF || FF22F7FE || 2000146D ||
  (      1460 )   FFB6F7FE || FFDAF7FE || FB04F852 || FF08F7FE || 20001429 || FEEEF7FE || 00000000 || FB04F852 ||
  (      1480 )   ED04F842 || FFDCF7FE || FFD0F7FE || FF9AF7FE || F8AEF7FF || F9BEF7FF || FF20F7FE || FFC6F7FE ||
  (      14A0 )   FF26F7FE || FFA6F7FE || F87AF7FF || FFC8F7FE || FFBCF7FE || FEF4F7FE || 20001501 || FFB6F7FE ||
  (      14C0 )   FF16F7FE || FEC6F7FE || FFFFFF1F || FFD4F7FE || FF88F7FE || FFE4F7FE || FEE2F7FE || 200014ED ||
  (      14E0 )   F868F7FF || FF04F7FE || BFE2F7FF || F858F7FF || F990F7FF || FEFCF7FE || FF90F7FF || B80CF000 ||
  (      1500 )   FF66F7FE || FF8AF7FE || FF9AF7FE || F852F7FF || FF96F7FE || FB04F852 || FEC2F7FE || 20001531 ||
  (      1520 )   F848F7FF || F846F7FF || FEE2F7FE || BFC0F7FF || FF4EF7FE || FF72F7FE || FF82F7FE || FF6EF7FE ||
  (      1540 )   F838F7FF || FF72F7FE || FF52F7FF || FF78F7FE || FB04F852 || 20001414 || 4D414E05 || 00003F45 ||
  (      1560 )   ED04F842 || F99AF7FF || FEC2F7FE || FF88F7FF || FB04F852 || ED04F842 || FF3CF7FE || FF6AF7FE ||
  (      1580 )   FF26F7FE || FF5CF7FE || FF64F7FE || FF88F7FE || FE86F7FE || 200015BD || FE5CF7FE || 00000008 ||
  (      15A0 )   FE46F7FE || FFE2F7FE || F80CF7FF || FE40F7FE || FE50F7FE || 00000008 || FE3AF7FE || FB04F852 ||
  (      15C0 )   ED04F842 || FF32F7FE || FE32F7FE || FF42F7FE || FE94F7FE || FFC2F7FE || FB04F852 || ED04F842 ||
  (      15E0 )   FF24F7FE || FE36F7FE || 0000000D || FF58F7FE || FE56F7FE || 20001625 || FE2CF7FE || 00000008 ||
  (      1600 )   FF4EF7FE || FE4CF7FE || 2000161D || FFDAF7FE || FFD6F7FF || FB04F852 || 00000000 || FFAAF7FF ||
  (      1620 )   FB04F852 || FEFAF7FE || FF0AF7FE || FEF6F7FE || FEFCF7FE || FB04F852 || 20001558 || 43434106 ||
  (      1640 )   00545045 || ED04F842 || FF04F7FE || FF56F7FE || FF00F7FE || F808F7FF || FF22F7FE || FE20F7FE ||
  (      1660 )   20001691 || FCA8F7FF || FEE0F7FE || FFAAF7FE || FDF0F7FE || 0000007F || F932F7FF || FE10F7FE ||
  (      1680 )   2000168B || FF9CF7FF || F7FFE001 || E7E1FFA7 || FEC4F7FE || FEDEF7FE || FF38F7FE || FB04F852 ||
  (      16A0 )   2000163C || 45555105 || 00005952 || ED04F842 || FA48F7FF || FDCEF7FE || 00000050 || FFC2F7FF ||
  (      16C0 )   F8CAF7FF || FE0AF7FE || FEA8F7FE || FDC2F7FE || 00000000 || F8B4F7FF || FE00F7FE || FB04F852 ||
  (      16E0 )   200016A4 || 4F424105 || 00005452 || ED04F842 || FC72F7FF || F856F7FF || FC96F7FF || FDAAF7FE ||
  (      1700 )   0000003F || FD94F7FE || FCA6F7FF || F8B2F000 || B8C0F000 || ED04F842 || FDC2F7FE || 20001735 ||
  (      1720 )   FCAAF7FF || F83EF7FF || FC7EF7FF || FC94F7FF || B8B0F000 || FCA0F7FF || FE70F7FE || FB04F852 ||
  (      1740 )   200016E4 || 4E49240A || 50524554 || 00544552 || ED04F842 || FF04F7FF || FF64F7FE || FDA0F7FE ||
  (      1760 )   20001791 || FDC4F7FE || FD74F7FE || 00000040 || FE82F7FE || FFCEF7FF || 6F63200D || 6C69706D ||
  (      1780 )   6E6F2065 || 0000796C || FD74F7FE || FB04F852 || FB78F7FF || FD84F7FE || 200017A1 || FB04F852 ||
  (      17A0 )   BFA4F7FF || 20001744 || 00005B81 || ED04F842 || FD50F7FE || 20001751 || F85AF7FF || FD8EF7FE ||
  (      17C0 )   FB04F852 || 200017A8 || 4B4F2E03 || ED04F842 || FD40F7FE || 20001751 || F84AF7FF || FD88F7FE ||
  (      17E0 )   FF76F7FE || FD5CF7FE || 200017F5 || FC6CF7FF || 6B6F2003 || FC30F7FF || FB04F852 || 200017C8 ||
  (      1800 )   54533F06 || 004B4341 || ED04F842 || F95AF7FF || FE28F7FE || FF7EF7FF || 6E75200A || 66726564 ||
  (      1820 )   00776F6C || FB04F852 || 20001800 || 41564504 || 0000004C || ED04F842 || FDCCF7FF || FDF6F7FE ||
  (      1840 )   FDC0F7FE || FD2CF7FE || 2000185D || F810F7FF || F984F7FF || FFD8F7FF || BFEEF7FF || FDDEF7FE ||
  (      1860 )   FFB4F7FF || FB04F852 || 2000182C || 45525006 || 00544553 || ED04F842 || 6100F644 || 0100F2C2 ||
  (      1880 )   0000F240 || FB04F852 || 2000186C || 49555104 || 00000054 || ED04F842 || 7200F644 || 0200F2C2 ||
  (      18A0 )   FF84F7FF || FF02F7FF || FFC4F7FF || FD04F7FE || 200018A5 || 4C224821 || 4C226044 || 47706044 ||
  (      18C0 )   68C4481E || 0401F014 || 4770D1FB || 2000188C || 4152450C || 535F4553 || 4F544345 || 00000052 ||
  (      18E0 )   ED04F842 || F04F4815 || 61040402 || 3500F445 || 2585EA4F || F0446145 || 61040442 || FFE0F7FF ||
  (      1900 )   5B04F851 || FB04F852 || F8525B04 || 0000FB04 || 200018D0 || 21494803 || ED04F842 || FFD0F7FF ||
  (      1920 )   0401F04F || F7FE6104 || F7FFFCF3 || F04FFFC9 || 61040400 || FB04F852 || FB04F852 || 40022000 ||
  (      1940 )   45670123 || CDEF89AB || 20001914 || 52555407 || 59454B4E || ED04F842 || FC7CF7FE || 20004F00 ||
  (      1960 )   FC78F7FE || 200001D4 || FC74F7FE || 00000040 || F91CF7FF || FC6EF7FE || 20000000 || FC6AF7FE ||
  (      1980 )   08000000 || FF94F7FE || FCB2F7FE || FC62F7FE || 00004FFF || FD70F7FE || FE3AF7FE || FD2AF7FE ||
  (      19A0 )   FD58F7FE || FCBEF7FE || FD54F7FE || FFB4F7FF || FD46F7FE || FDE2F7FE || FD42F7FE || FDDEF7FE ||
  (      19C0 )   FC5EF7FE || 200019A0 || FE42F7FE || FB04F852 || 200019A1 || FE3CF7FE || FB04F852 || FE38F7FE ||
  (      19E0 )   FB04F852 || 2000194C || 00002701 || ED04F842 || FCF0F7FF || FDB4F7FF || FC52F7FE || 20001A05 ||
  (      1A00 )   FB04F852 || BE72F7FF || 200019E8 || 4C4C4105 || 0000544F || ED04F842 || FF4AF7FE || FE9CF7FE ||
  (      1A20 )   FB04F852 || 20001A0C || 00002C01 || ED04F842 || F870F7FF || FCFAF7FE || FDB2F7FE || FF38F7FE ||
  (      1A40 )   FC4CF7FE || FC4AF7FE || FB04F852 || 20001A28 || 4F435B89 || 4C49504D || 00005D45 || ED04F842 ||
  (      1A60 )   FFC4F7FF || FFE2F7FF || FB04F852 || 20001A50 || 4D4F4347 || 454C4950 || ED04F842 || FCA8F7FE ||
  (      1A80 )   0501F025 || FCD2F7FE || FC32F7FE || F9DAF000 || FD86F7FE || 0501F045 || FCACF7FE || FB04F852 ||
  (      1AA0 )   20001A70 || 54494C87 || 4C415245 || ED04F842 || FFE2F7FF || 20000255 || FFB8F7FF || FB04F852 ||
  (      1AC0 )   ED04F842 || FBC6F7FE || FFFFFFFC || FEF0F7FE || FE42F7FE || FBBEF7FE || 00000022 || FC68F7FF ||
  (      1AE0 )   FE60F7FE || FD0AF7FE || FFB8F7FE || FEE0F7FE || FBF4F7FE || FB04F852 || 20001AA4 || 524F4683 ||
  (      1B00 )   ED04F842 || FFB8F7FF || 200003F5 || F802F7FF || FB04F852 || 20001AFC || 47454285 || 00004E49 ||
  (      1B20 )   ED04F842 || FFF6F7FE || FB04F852 || 20001B18 || 58454E84 || 00000054 || ED04F842 || FF9CF7FF ||
  (      1B40 )   20000281 || FF72F7FF || FB04F852 || 20001B30 || 544E5585 || 00004C49 || ED04F842 || FF8CF7FF ||
  (      1B60 )   200002A1 || FF62F7FF || FB04F852 || 20001B50 || 41474185 || 00004E49 || ED04F842 || FF7CF7FF ||
  (      1B80 )   200002B9 || FF52F7FF || FB04F852 || 20001B70 || 00464982 || ED04F842 || FF6EF7FF || 200002A1 ||
  (      1BA0 )   FFB8F7FE || FB56F7FE || 00000004 || FE80F7FE || FDD2F7FE || FB04F852 || 20001B90 || 45484185 ||
  (      1BC0 )   00004441 || ED04F842 || FF56F7FF || 200002B9 || FFA0F7FE || FB3EF7FE || 00000004 || FE68F7FE ||
  (      1BE0 )   FDBAF7FE || FB04F852 || 20001BBC || 50455286 || 00544145 || ED04F842 || FFBEF7FF || FF8AF7FE ||
  (      1C00 )   FC1EF7FE || FB6AF7FE || FB04F852 || 20001BEC || 45485484 || 0000004E || ED04F842 || FF7AF7FE ||
  (      1C20 )   FC0EF7FE || FB5AF7FE || FB04F852 || 20001C10 || 54464183 || ED04F842 || FBF0F7FE || FFC2F7FF ||
  (      1C40 )   FF6EF7FF || FBFCF7FE || FB04F852 || 20001C30 || 534C4584 || 00000045 || ED04F842 || FFB2F7FF ||
  (      1C60 )   FBEEF7FE || FFD8F7FF || FB04F852 || 20001C50 || 49485785 || 0000454C || ED04F842 || FF8AF7FF ||
  (      1C80 )   FBDEF7FE || FB04F852 || 20001C70 || 4F424186 || 00225452 || ED04F842 || FEEEF7FF || 20001715 ||
  (      1CA0 )   FF0EF7FF || FB04F852 || 20001C8C || 00222482 || ED04F842 || FEE0F7FF || 200010AD || FF00F7FF ||
  (      1CC0 )   FB04F852 || 20001CAC || 00222E82 || ED04F842 || FED2F7FF || 200010C9 || FEF2F7FF || FB04F852 ||
  (      1CE0 )   20001CC8 || 4E553F07 || 45555149 || ED04F842 || FB9CF7FE || FC34F7FF || FAD2F7FE || 20001D19 ||
  (      1D00 )   F9E2F7FF || 65722007 || 20666544 || FBA2F7FE || FD48F7FE || F988F7FF || FB80F7FE || FB04F852 ||
  (      1D20 )   ED04F842 || FB82F7FE || FB4CF7FE || FAB8F7FE || 20001D69 || FFDAF7FF || FDC6F7FE || FAD8F7FE ||
  (      1D40 )   FE74F7FF || FB72F7FE || FDBEF7FE || FAC6F7FE || FD28F7FE || FBD2F7FE || FE80F7FE || FDA8F7FE ||
  (      1D60 )   FABCF7FE || FB04F852 || F9A0F7FF || 616E2007 || 203F656D || BCBAF7FF || 20001CE4 || 4F432408 ||
  (      1D80 )   4C49504D || 00000045 || ED04F842 || FBE8F7FF || FC48F7FE || FA84F7FE || 20001DC5 || FAA8F7FE ||
  (      1DA0 )   FA58F7FE || 00000080 || FB66F7FE || FA78F7FE || 20001DBD || FA5EF7FE || FB04F852 || F842F000 ||
  (      1DC0 )   FB04F852 || F85EF7FF || FA6AF7FE || 20001DD9 || FE6CF7FF || FB04F852 || BC88F7FF || 20001D7C ||
  (      1DE0 )   45564F05 || 00005452 || ED04F842 || FD6CF7FE || FA7EF7FE || FD52F7FE || FA70F7FE || FB04F852 ||
  (      1E00 )   20001DE0 || 00003BC1 || ED04F842 || FA22F7FE || FB04F852 || FE0AF7FF || FCC8F7FF || FFE4F7FF ||
  (      1E20 )   FB04F852 || 20001E04 || 00005D01 || ED04F842 || FA10F7FE || 20001D89 || FD1AF7FE || FA4EF7FE ||
  (      1E40 )   FB04F852 || ED04F842 || 0501F025 || FE62F7FE || FB5CF7FE || 0504F1A5 || 70FFF240 || EA4F462C ||
  (      1E60 )   EA053515 || EA4F0500 || EA4534C4 || F0450504 || F4454578 || F7FF4570 || F852FDD9 || 0000FB04 ||
  (      1E80 )   20001E28 || 00003A01 || ED04F842 || FAA2F7FF || FF46F7FF || F9DEF7FE || ED04F842 || FDC6F7FF ||
  (      1EA0 )   FFC4F7FF || FB04F852 || 20001E84 || 4D4D4909 || 41494445 || 00004554 || ED04F842 || F9CAF7FE ||
  (      1EC0 )   00000080 || FD00F7FE || FA12F7FE || FA10F7FE || FADCF7FE || FCF8F7FE || FA0AF7FE || F9FEF7FE ||
  (      1EE0 )   FB04F852 || 20001EAC || 4E4F4308 || 4E415453 || 00000054 || ED04F842 || FA6CF7FF || FF10F7FF ||
  (      1F00 )   FF72F7FF || F9A6F7FE || ED04F842 || FD8EF7FF || F9A0F7FE || 200007D9 || FF94F7FF || FD86F7FF ||
  (      1F20 )   FB04F852 || 20001EE8 || 45524306 || 00455441 || ED04F842 || FA4EF7FF || FEF2F7FF || FF54F7FF ||
  (      1F40 )   F988F7FE || ED04F842 || FD70F7FF || F982F7FE || 200007CD || FF76F7FF || FB04F852 || 20001F28 ||
  (      1F60 )   52415608 || 4C424149 || 00000045 || ED04F842 || FFDEF7FF || F96EF7FE || 00000000 || FD56F7FF ||
  (      1F80 )   FB04F852 || ED04F842 || FA64F7FE || F962F7FE || 00000004 || F8BAF7FF || F81EF7FF || FA2AF7FE ||
  (      1FA0 )   B80CF000 || FA42F7FE || FA0CF7FE || F952F7FE || 00000003 || F8AAF7FF || FAD0F7FE || F960F7FE ||
  (      1FC0 )   20001FA5 || FB04F852 || 20001F60 || 4D554404 || 00000050 || ED04F842 || FC16F7FE || F988F7FE ||
  (      1FE0 )   FA08F7FE || FEF6F7FE || F934F7FE || 00000010 || FD02F7FE || F9FEF7FE || B814F000 || F82CF7FF ||
  (      2000 )   F928F7FE || 00000010 || FB2EF7FE || FFBAF7FF || FB12F7FE || FB10F7FE || FFDEF7FE || FFDCF7FE ||
  (      2020 )   F802F7FF || F92CF7FE || 20001FFD || F9F6F7FE || F9CEF7FE || FBE8F7FE || F950F7FE || FB04F852 ||
  (      2040 )   20001FCC || 00532E02 || ED04F842 || FFC4F7FE || FD38F7FE || F9CEF7FE || B806F000 || F9C2F7FE ||
  (      2060 )   FD44F7FE || F87EF7FF || F90AF7FE || 2000205D || FFB2F7FE || FB04F852 || 20002044 || 414E3E05 ||
  (      2080 )   0000454D || ED04F842 || F9B4F7FE || FC06F7FE || F92EF7FE || F9CAF7FE || F902F7FE || 200020C5 ||
  (      20A0 )   F9C4F7FE || F9A4F7FF || F99CF7FE || F9F8F7FE || F8F6F7FE || 200020C5 || FA7CF7FE || F918F7FE ||
  (      20C0 )   BFE8F7FF || F984F7FE || F9A8F7FE || FB04F852 || 2000207C || 44492E03 || ED04F842 || FAA2F7FE ||
  (      20E0 )   F8DEF7FE || 20002101 || FB5CF7FE || F8B2F7FE || 0000001F || F9C0F7FE || FF96F7FE || FB04F852 ||
  (      2100 )   FFE2F7FE || 6E7B2009 || 6D614E6F || 00007D65 || FB04F852 || 200020D4 || 45455303 || ED04F842 ||
  (      2120 )   FC64F7FF || FF98F7FE || F894F7FE || 00000014 || F960F7FE || FA34F7FE || F978F7FE || F810F000 ||
  (      2140 )   F89EF7FE || 20002135 || F968F7FE || FB04F852 || 20002118 || 43454409 || 49504D4F || 0000454C ||
  (      2160 )   ED04F842 || F962F7FE || F8C2F7FE || F95EF7FE || F870F7FE || F800F800 || F97EF7FE || F86AF7FE ||
  (      2180 )   F800F000 || FAA4F7FE || F88AF7FE || 200021E5 || 70FEF640 || EA4F462C || EA4F5545 || EA4F2565 ||
  (      21A0 )   EA0434D4 || EA450400 || BF000504 || F952F7FE || F9A4F7FE || F9F4F7FE || FF64F7FF || FA32F7FE ||
  (      21C0 )   F86EF7FE || 200021D9 || FF06F7FE || FF84F7FF || F924F7FE || FB04F852 || F88AF7FE || FFB0F7FE ||
  (      21E0 )   FB04F852 || FFACF7FE || F918F7FE || FB04F852 || 20002154 || 524F5705 || 00005344 || ED04F842 ||
  (      2200 )   FF2AF7FE || FB4AF7FE || F872F7FE || FA0AF7FE || F846F7FE || 20002231 || F908F7FE || FEDCF7FE ||
  (      2220 )   FF5AF7FF || F9C6F7FE || F862F7FE || BFEEF7FF || FB04F852 || ED04F842 || F80CF7FE || 00000721 ||
  (      2240 )   FB04F852 || 200021F4 || 00494802 || ED04F842 || FF02F7FE || FF38F7FE || 6D74730D || 46653233 ||
  (      2260 )   6874726F || 00007620 || FACEF7FE || F840F7FE || FDB0F7FE || FFDEF7FF || FD26F7FE || FD4AF7FE ||
  (      2280 )   FD48F7FE || FFE6F7FD || 0000002E || FD2CF7FE || FD50F7FE || FD76F7FE || FEC6F7FE || FAB4F7FE ||
  (      22A0 )   F81CF7FE || FED8F7FE || FB04F852 || 20002248 || 4C4F4304 || 00000044 || 7300F644 || 0300F2C2 ||
  (      22C0 )   F5A2461A || F04F7180 || BF000500 || ED04F842 || FFC0F7FD || 200001B4 || FFBCF7FD || 20004F00 ||
  (      22E0 )   FFB8F7FD || 00000040 || FC60F7FE || FAC2F7FF || FA7EF7FE || FC32F7FE || FD76F7FF || BACAF7FF ||
  (      2300 )   000003D4 || 00000658 || 000004B0 || 000003A4 || 00000AC0 || 000004E8 || 00000478 || 0000037C ||
  (      2320 )   000011A4 || 000003C8 || 000003F0 || 0000034C || 0000036C || 00001158 || 0000032C || 00000000 ||
  (      2340 )   0000034C || 00001130 || 6E696604 || 00000064 || 00000006 || 0000040C || 000003FC || 000003A4 ||
  (      2360 )   000002D8 || 00000398 || 000003FC || 000003A4 || 000003E0 || 00000630 || 0000040C || 000003A4 ||
  (      2380 )   000003FC || 0000037C || 00001258 || 000003FC || 000003A4 || 0000032C || FFFFFF3F || 00000434 ||
  (      23A0 )   00000AC0 || 000003D4 || 00000AC0 || 0000044C || 0000037C || 00001240 || 00000630 || 0000032C ||
  (      23C0 )   FFFFFFFF || 0000038C || 00001250 || 00000630 || 000002D8 || 000003A4 || 00001138 || 0000038C ||
  (      23E0 )   00001270 || 000003C8 || 000003F0 || 0000040C || 00000644 || 0000040C || 0000034C || 0000037C ||
  (      2400 )   00001288 || 00000644 || 00000644 || 0000038C || 000011F0 || 000003C8 || 000003F0 || 0000040C ||
  (      2420 )   000003F0 || 00000644 || 000003FC || 0000110C || 0000040C || 0000034C || 000011BC || 4D414E05 ||
  (      2440 )   00003F45 || 00000006 || 0000027C || 000011C4 || 0000034C || 000012B0 || 00485E02 || 00000006 ||
  (      2460 )   000003E0 || 0000041C || 000003C8 || 0000040C || 0000041C || 0000044C || 0000037C || 00001318 ||
  (      2480 )   0000032C || 00000008 || 000006E4 || 0000068C || 00000608 || 000006E4 || 0000032C || 00000008 ||
  (      24A0 )   000006E4 || 0000034C || 000012CC || 50415403 || 00000006 || 000003FC || 000006E4 || 0000041C ||
  (      24C0 )   000003B0 || 0000067C || 0000034C || 00001320 || 41546B04 || 00000050 || 00000006 || 000003FC ||
  (      24E0 )   0000032C || 0000000D || 0000044C || 0000041C || 0000032C || 0000000A || 0000044C || 00000434 ||
  (      2500 )   0000037C || 000013A8 || 0000032C || 00000008 || 0000044C || 0000037C || 000013A0 || 00000608 ||
  (      2520 )   00001324 || 0000038C || 000013A4 || 000012D0 || 0000034C || 000003F0 || 0000040C || 000003F0 ||
  (      2540 )   000003FC || 0000034C || 00001344 || 43434106 || 00545045 || 00000006 || 0000041C || 000004B0 ||
  (      2560 )   0000041C || 000004A4 || 0000044C || 0000037C || 00001424 || 000006C4 || 000003FC || 00000608 ||
  (      2580 )   000004E8 || 0000032C || 0000005F || 0000050C || 0000037C || 00001418 || 00001324 || 0000038C ||
  (      25A0 )   0000141C || 0000134C || 0000038C || 000013D8 || 000003F0 || 0000041C || 000004E8 || 0000034C ||
  (      25C0 )   000013C0 || 50584506 || 00544345 || 00000006 || 000013C8 || 0000021C || 00000398 || 000003F0 ||
  (      25E0 )   0000034C || 00001438 || 45555105 || 00005952 || 00000006 || 000007D4 || 0000032C || 00000050 ||
  (      2600 )   000013C8 || 00000240 || 00000398 || 000003F0 || 0000032C || 00000000 || 0000022C || 00000398 ||
  (      2620 )   0000034C || 0000145C || 4F424105 || 00005452 || 00000006 || 000002C8 || 000007F4 || 0000149C ||
  (      2640 )   6F626107 || 7C227472 || 00000006 || 0000037C || 000014D8 || 00000D9C || 000005E4 || 00000D40 ||
  (      2660 )   000014A4 || 00000D9C || 000003F0 || 0000034C || 000014B4 || 52524505 || 0000524F || 00000006 ||
  (      2680 )   00000CC4 || 000005E4 || 00000D40 || 0000032C || 0000003F || 000006E4 || 0000032C || 0000001B ||
  (      26A0 )   000006E4 || 00000D74 || 000014A4 || 000014E8 || 4E49240A || 50524554 || 00544552 || 00000006 ||
  (      26C0 )   000012B8 || 00000478 || 0000037C || 00001570 || 000003BC || 0000032C || 00000040 || 00000434 ||
  (      26E0 )   000014BC || 6F63200D || 6C69706D || 6E6F2065 || 0000796C || 0000035C || 0000034C || 00000B8C ||
  (      2700 )   0000037C || 00001588 || 0000034C || 0000038C || 0000158C || 000014F0 || 00001524 || 00005B81 ||
  (      2720 )   00000006 || 0000032C || 00001530 || 000002B4 || 00000398 || 0000034C || 00001590 || 4B4F2E03 ||
  (      2740 )   00000006 || 00000D74 || 0000032C || 00001530 || 000002B4 || 000003A4 || 00000500 || 0000037C ||
  (      2760 )   0000161C || 000003E0 || 000003E0 || 000003E0 || 000003FC || 00000E84 || 000003C8 || 000003FC ||
  (      2780 )   00000E84 || 000003C8 || 000003FC || 00000E84 || 000003C8 || 000003FC || 00000E84 || 00000DE4 ||
  (      27A0 )   6B6F2004 || 0000003E || 0000034C || 000015B0 || 41564504 || 0000004C || 00000006 || 000010B4 ||
  (      27C0 )   000003FC || 000003A4 || 0000037C || 00001654 || 000002B4 || 000007F4 || 0000038C || 00001630 ||
  (      27E0 )   000003F0 || 000015B4 || 0000034C || 00001624 || 49555104 || 00000054 || 00000006 || 0000032C ||
  (      2800 )   00000100 || 00000254 || 00000398 || 00001594 || 00001464 || 0000162C || 0000038C || 00001684 ||
  (      2820 )   00001664 || 00002C01 || 00000006 || 0000079C || 000003FC || 00000630 || 0000028C || 00000398 ||
  (      2840 )   00000398 || 0000034C || 00001698 || 54494C87 || 4C415245 || 00000006 || 0000032C || 0000032C ||
  (      2860 )   0000169C || 0000169C || 0000034C || 000016C0 || 4C4C4105 || 0000544F || 00000006 || 00000770 ||
  (      2880 )   0000028C || 000005BC || 0000034C || 000016E4 || 222C2403 || 00000006 || 0000032C || 00000022 ||
  (      28A0 )   000010E8 || 000005E4 || 000004B0 || 00000770 || 0000028C || 00000398 || 0000034C || 00001704 ||
  (      28C0 )   4E553F07 || 45555149 || 00000006 || 000003FC || 000012B8 || 00000478 || 0000037C || 00001778 ||
  (      28E0 )   000005E4 || 0000032C || 0000001F || 00000434 || 00000CC4 || 00000D40 || 00000DE4 || 65722007 ||
  (      2900 )   20666544 || 000003F0 || 0000034C || 00001734 || 6E2C2403 || 00000006 || 000003FC || 000003A4 ||
  (      2920 )   0000037C || 000017D4 || 0000173C || 000003FC || 0000110C || 0000028C || 00000398 || 000003FC ||
  (      2940 )   000002A0 || 00000398 || 00000644 || 0000027C || 000003A4 || 0000040C || 00000398 || 0000034C ||
  (      2960 )   000014F0 || 00001784 || 00002701 || 00000006 || 000010B4 || 000012B8 || 0000037C || 000017F8 ||
  (      2980 )   0000034C || 000014F0 || 000017DC || 4F435B89 || 4C49504D || 00005D45 || 00000006 || 000017E0 ||
  (      29A0 )   0000169C || 0000034C || 00001800 || 4D4F4307 || 454C4950 || 00000006 || 000003C8 || 000003FC ||
  (      29C0 )   000003A4 || 0000169C || 00000630 || 000003E0 || 0000034C || 00001820 || 4F432408 || 4C49504D ||
  (      29E0 )   00000045 || 00000006 || 000012B8 || 00000478 || 0000037C || 00001898 || 000003A4 || 0000032C ||
  (      2A00 )   00000080 || 00000434 || 0000037C || 00001890 || 0000035C || 0000038C || 00001894 || 0000169C ||
  (      2A20 )   0000034C || 00000B8C || 0000037C || 000018AC || 000016C8 || 0000034C || 000014F0 || 0000184C ||
  (      2A40 )   45564F05 || 00005452 || 00000006 || 000002A0 || 000003A4 || 0000027C || 00000398 || 0000034C ||
  (      2A60 )   000018B4 || 00005D01 || 00000006 || 0000032C || 00001858 || 000002B4 || 00000398 || 0000034C ||
  (      2A80 )   000018D8 || 00003A01 || 00000006 || 000010B4 || 00001788 || 000018DC || 0000032C || 00000006 ||
  (      2AA0 )   0000169C || 0000034C || 000018F8 || 00003B81 || 00000006 || 0000032C || 0000034C || 0000169C ||
  (      2AC0 )   00001594 || 000018BC || 0000034C || 00001920 || 2B6D6403 || 00000006 || 0000041C || 0000032C ||
  (      2AE0 )   00000006 || 00000E2C || 000003E0 || 0000038C || 00001980 || 000003FC || 000003A4 || 0000032C ||
  (      2B00 )   00000009 || 00000E2C || 00000630 || 0000036C || 00001968 || 0000034C || 00001944 || 4D554404 ||
  (      2B20 )   00000050 || 00000006 || 00000268 || 000003A4 || 000003E0 || 00000A78 || 0000032C || 0000001F ||
  (      2B40 )   000004B0 || 0000032C || 00000020 || 00000560 || 000003E0 || 0000038C || 000019F8 || 00000D74 ||
  (      2B60 )   0000032C || 00000008 || 000004A4 || 00001948 || 000003E0 || 00000CC4 || 00000658 || 00000D40 ||
  (      2B80 )   000003C8 || 0000036C || 000019D0 || 000003F0 || 000003C8 || 00000268 || 00000398 || 0000034C ||
  (      2BA0 )   00001990 || 414E3E05 || 0000454D || 00000006 || 0000027C || 000003A4 || 000003FC || 0000037C ||
  (      2BC0 )   00001A6C || 000004A4 || 0000110C || 0000044C || 0000037C || 00001A58 || 0000068C || 0000038C ||
  (      2BE0 )   00001A64 || 0000040C || 000003F0 || 0000034C || 0000038C || 00001A28 || 0000040C || 000003F0 ||
  (      2C00 )   0000034C || 00001A18 || 44492E03 || 00000006 || 000005E4 || 0000032C || 0000001F || 00000434 ||
  (      2C20 )   00000D40 || 00000CC4 || 0000034C || 00001A7C || 524F5705 || 00005344 || 00000006 || 00000D74 ||
  (      2C40 )   0000027C || 0000032C || 00000000 || 000002D8 || 00000398 || 000003A4 || 00000478 || 0000037C ||
  (      2C60 )   00001B38 || 000003FC || 00000CC4 || 00001A80 || 00000644 || 000002D8 || 000003A4 || 0000032C ||
  (      2C80 )   0000000A || 00000518 || 0000037C || 00001B1C || 0000032C || 00000001 || 000002D8 || 000005BC ||
  (      2CA0 )   0000038C || 00001B30 || 00000D74 || 0000032C || 00000000 || 000002D8 || 00000398 || 0000038C ||
  (      2CC0 )   00001AC8 || 0000034C || 00001AA4 || 524F4606 || 00544547 || 00000006 || 000010B4 || 000012B8 ||
  (      2CE0 )   00000478 || 0000037C || 00001B90 || 00000644 || 000003FC || 0000028C || 00000398 || 000003A4 ||
  (      2D00 )   000003FC || 0000027C || 00000398 || 000002A0 || 00000398 || 000003F0 || 0000034C || 000014F0 ||
  (      2D20 )   00001B40 || 4C4F4304 || 00000044 || 00000006 || 00000D74 || 00000DE4 || 6F46651B || 20687472 ||
  (      2D40 )   43206E69 || 6556202C || 2E322072 || 32202C33 || 20373130 || 00000D74 || 0000166C || 00001B98 ||
  (      2D60 )   45485484 || 0000004E || 00000006 || 0000079C || 0000040C || 00000398 || 0000034C || 00001BD4 ||
  (      2D80 )   524F4683 || 00000006 || 00001828 || 000003E0 || 0000079C || 0000034C || 00001BF4 || 47454285 ||
  (      2DA0 )   00004E49 || 00000006 || 0000079C || 0000034C || 00001C10 || 58454E84 || 00000054 || 00000006 ||
  (      2DC0 )   00001828 || 0000036C || 0000169C || 0000034C || 00001C28 || 544E5585 || 00004C49 || 00000006 ||
  (      2DE0 )   00001828 || 0000037C || 0000169C || 0000034C || 00001C48 || 41474185 || 00004E49 || 00000006 ||
  (      2E00 )   00001828 || 0000038C || 0000169C || 0000034C || 00001C68 || 00464982 || 00000006 || 00001828 ||
  (      2E20 )   0000037C || 0000079C || 0000032C || 00000000 || 0000169C || 0000034C || 00001C88 || 45484185 ||
  (      2E40 )   00004441 || 00000006 || 00001828 || 0000038C || 0000079C || 0000032C || 00000000 || 0000169C ||
  (      2E60 )   0000034C || 00001CB0 || 50455286 || 00544145 || 00000006 || 00001C70 || 00001BDC || 0000034C ||
  (      2E80 )   00001CDC || 54464183 || 00000006 || 000003F0 || 00001CB8 || 0000079C || 0000040C || 0000034C ||
  (      2EA0 )   00001CF8 || 534C4584 || 00000045 || 00000006 || 00001CB8 || 0000040C || 00001BDC || 0000034C ||
  (      2EC0 )   00001D18 || 45485784 || 0000004E || 00000006 || 00001C8C || 0000041C || 0000034C || 00001D38 ||
  (      2EE0 )   49485785 || 0000454C || 00000006 || 00001C8C || 0000040C || 0000034C || 00001D54 || 4F424186 ||
  (      2F00 )   00225452 || 00000006 || 0000032C || 000014BC || 0000079C || 00000398 || 00001708 || 0000034C ||
  (      2F20 )   00001D70 || 00222482 || 00000006 || 0000032C || 00000DD0 || 0000079C || 00000398 || 00001708 ||
  (      2F40 )   0000034C || 00001D98 || 00222E82 || 00000006 || 0000032C || 00000DE4 || 0000079C || 00000398 ||
  (      2F60 )   00001708 || 0000034C || 00001DBC || 444F4304 || 00000045 || 00000006 || 000010B4 || 00001788 ||
  (      2F80 )   000018BC || 0000034C || 00001DE0 || 45524306 || 00455441 || 00000006 || 00001DE8 || 0000032C ||
  (      2FA0 )   0000203D || 0000169C || 0000034C || 00001E00 || 52415608 || 4C424149 || 00000045 || 00000006 ||
  (      2FC0 )   00001E08 || 0000032C || 00000000 || 0000169C || 0000034C || 00001E24 || 4E4F4308 || 4E415453 ||
  (      2FE0 )   00000054 || 00000006 || 00001DE8 || 0000032C || 00002004 || 0000169C || 0000169C || 0000034C ||
  (      3000 )   00001E4C || 00282E82 || 00000006 || 0000032C || 00000029 || 00001068 || 00000D40 || 0000034C ||
  (      3020 )   00001E78 || 00005C81 || 00000006 || 0000032C || 0000000A || 000010E8 || 000003F0 || 0000034C ||
  (      3040 )   00001E98 || 00002881 || 00000006 || 0000032C || 00000029 || 00001068 || 00000494 || 0000034C ||
  (      3060 )   00001EB8 || 4D4F430C || 454C4950 || 4C4E4F2D || 00000059 || 00000006 || 0000032C || 00000040 ||
  (      3080 )   000002A0 || 000003A4 || 000005BC || 0000034C || 00001ED8 || 4D4D4909 || 41494445 || 00004554 ||
  (      30A0 )   00000006 || 0000032C || 00000080 || 000002A0 || 000003A4 || 000005BC || 0000034C || 10EDF641 ||
  (      30C0 )   0000F2C2 || F2424780 || F2C220B9 || 47800000 || 1065F241 || 0000F2C2 || FFFF4780 ||

}INSERT


\  (  00006230  C1 F8 00 D0       )                  (R1+0)=RP   \ ?????????????????   CD F8 00 10   1000F8CD  6230 32!'
\  (  00006230  CD F8 00 10       )                  (RD+0)=R1   \ ok

\ 1000F8CD  6230 32!'

  ''  tx!(stm32f103)   '' I/O  6 +.   4 +.    32!'
  ''  ?rx(stm32f103)   '' I/O  6 +. ( 4 +. )  32!'

     LAST'(ADJACENT)  @.   40D0  4040  -.  4040  +.  32!'   \
     LAST'(ADJACENT)  @.   40D4  4040  -.  4040  +.  32!'   \
\ '' COLD 1+.  1A4  32!'   \ starting from holi eForth
\    200022B9  1A4  32!'   \ cfa'+1 of COLD of prog4004 eForth

stm32f103mecrispForth?  @. \ STM32F103MECRISPFORTHORG3.F
#if      \ include  stm32f103mecrispForth1.f     \ mecrispForth_2_3_6
insert{
\   0 3c00 hex>image32
         0  org

  (         0 )   20000330 || 00003B97 || 000035AB || 000035AB || 000035AB || 000035AB || 000035AB || 00000000 ||
  (        20 )   00000000 || 00000000 || 00000000 || 000035DB || 000035DB || 00000000 || 000035DB || 00003581 ||
  (        40 )   000035DB || 000035DB || 000035DB || 00003603 || 000035DB || 000035DB || 0000362D || 00003657 ||
  (        60 )   00003681 || 000036AB || 000036D5 || 000035DB || 000035DB || 000035DB || 000035DB || 000035DB ||
  (        80 )   000035DB || 000035DB || 000036FD || 000035DB || 000035DB || 000035DB || 000035DB || 00003727 ||
  (        A0 )   00003753 || 0000377F || 000037AB || 000037D7 || 00003801 || 0000382B || 00003855 || 00003881 ||
  (        C0 )   000038AD || 000038D9 || 00003905 || 0000392D || 00003955 || 0000397F || 000039A9 || 000039D3 ||
  (        E0 )   000039FD || 00003A29 || 00003A53 || 00000000 || 00000000 || 00000000 || 00000000 || 00000000 ||
  (       100 )   00000000 || 00000000 || 00003A7B || 00003AA3 || 00003ACB || 00003AF3 || 00003B1B || 00003B43 ||
  (       120 )   000035DB || 000035DB || 000035DB || 000035DB || 000035DB || 000035DB || 000035DB || 000035DB ||
  (       140 )   000035DB || 000035DB || 000035DB || 00003B6B || 00000176 || 2D1EFFFF || 4D202D2D || 69726365 ||
  (       160 )   532D7073 || 6C6C6574 || 73697261 || 726F4320 || 2D2D2065 || 018E002D || 00420000 || 75643204 ||
  (       180 )   68380070 || 6D04F847 || 60383F04 || 01A04770 || 00620000 || 72643205 || 3704706F || 4770CF40 ||
  (       1A0 )   000001BE || 32050044 || 70617773 || 3F04CF07 || F8476038 || 3F046D04 || 000E603A || 01D24770 ||
  (       1C0 )   00620000 || 696E3204 || CF070070 || 60383F04 || 01EC4770 || 00440000 || 766F3205 || 68B87265 ||
  (       1E0 )   6D04F847 || 60383F04 || 477068FE || 00000210 || 32050044 || 6B637574 || 3F04CF07 || F8476038 ||
  (       200 )   3F046D04 || 3F04603A || 3F046039 || 47706038 || 00000232 || 32040046 || 00746F72 || 68B96838 ||
  (       220 )   60B8693A || 603A6139 || 607E6879 || 60F968FE || 02544770 || 00460000 || 722D3205 || 6838746F ||
  (       240 )   693A68B9 || 60396138 || 68F960BA || 687E60FE || 47706079 || 00000268 || 32030020 || CF01723E ||
  (       260 )   B440B401 || 4770CF40 || 00000280 || 32030020 || F8473E72 || BC406D04 || 3F04BC01 || 47706038 ||
  (       280 )   00000298 || 32030020 || F8474072 || 9E016D04 || 6D04F847 || 47709E00 || 000002AA || 32060020 ||
  (       2A0 )   6F726472 || B0020070 || 02C24770 || 00420000 || 2F326403 || 07F16838 || 08401076 || 60384308 ||
  (       2C0 )   02D64770 || 00620000 || 2A326403 || 18006838 || 60384176 || 02F04770 || 00420000 || 68736404 ||
  (       2E0 )   68380072 || 087607F1 || 43080840 || 47706038 || 00000306 || 64040062 || 006C6873 || 18006838 ||
  (       300 )   60384176 || 03184770 || 00420000 || 62616404 || 2E000073 || 4770D407 || 00000336 || 64070042 ||
  (       320 )   6167656E || 68386574 || 43C02100 || 300143F6 || 6038414E || 034E4770 || 00640000 || 002D6402 ||
  (       340 )   1A12CF07 || 000E41B1 || 603A3F04 || 03644770 || 00640000 || 002B6402 || 1812CF07 || 3F04414E ||
  (       360 )   4770603A || 00000376 || 73030061 || F847643E || 17F66D04 || 038A4770 || 00620000 || 2A6D7503 ||
  (       380 )   FBA06838 || 60380606 || 039E4770 || 00620000 || 002A6D02 || FB806838 || 60380606 || 03DC4770 ||
  (       3A0 )   00440000 || 2A647503 || 4356CF07 || 18764341 || 0C130C01 || 18764359 || B2800C01 || 4351B292 ||
  (       3C0 )   43504343 || 18C92200 || 04124152 || 040A18B6 || 18800C09 || 3F04414E || 47706038 || 0000046E ||
  (       3E0 )   75040044 || 002A6D64 || 2400B510 || 6D04F847 || F847687E || 693E6D04 || FFC2F7FF || CF400031 ||
  (       400 )   CF400030 || 6D04F847 || F847683E || 68FE6D04 || F7FFB403 || BC03FFB5 || CF400033 || CF400032 ||
  (       420 )   6D04F847 || F847683E || 693E6D04 || F7FFB40F || BC0FFFA7 || 41631992 || 1989CF40 || 41634162 ||
  (       440 )   F847CF40 || 687E6D04 || 6D04F847 || B40F68FE || FF96F7FF || 1992BC0F || CF404163 || 41621989 ||
  (       460 )   CF404163 || 603A001E || 60B86079 || 0490BD10 || 00430000 || 002F2A02 || B440B500 || F7FFCF40 ||
  (       480 )   F847FF89 || BC406D04 || F84CF000 || BD003704 || 000004B2 || 2A050043 || 646F6D2F || B440B500 ||
  (       4A0 )   F7FFCF40 || F847FF77 || BC406D04 || F83AF000 || 04D4BD00 || 00430000 || 2F2A7503 || B440B500 ||
  (       4C0 )   F7FFCF40 || F847FF5D || BC406D04 || F81BF000 || BD003704 || 000004F8 || 75060043 || 6F6D2F2A ||
  (       4E0 )   B5000064 || CF40B440 || FF4AF7FF || 6D04F847 || F000BC40 || BD00F808 || 00000518 || 75060043 ||
  (       500 )   6F6D2F6D || B5000064 || 6D04F847 || F0002600 || CF40F819 || BD003704 || 00000536 || 6D050043 ||
  (       520 )   646F6D2F || F847B500 || 17F66D04 || F832F000 || 3704CF40 || 0588BD00 || 00440000 || 2F647506 ||
  (       540 )   00646F6D || 2300B430 || 68792200 || 003568B8 || 2640683C || 41490040 || 415B4152 || D80242AB ||
  (       560 )   42A2D304 || 1B12D302 || 300141AB || D1F13E01 || 6038000E || 60BA607B || 4770BC30 || 2300B430 ||
  (       580 )   68B9687A || E7E22000 || 000005FE || 64050044 || 646F6D2F || 17F0B500 || F7FFD019 || F7FFFEC4 ||
  (       5A0 )   17F0FE05 || F7FFD00C || F7FFFEBE || F7FFFDFF || F7FFFFC9 || F7FFFDFB || F7FFFEB6 || BD00FDF7 ||
  (       5C0 )   FDF4F7FF || FFBEF7FF || FEADF7FF || F7FFBD00 || 17F0FDED || F7FFD00E || F7FFFEA6 || F7FFFDE7 ||
  (       5E0 )   F7FFFFB1 || F7FFFEA0 || F7FFFDE1 || F7FFFE9C || BD00FDDD || FDDAF7FF || FFA4F7FF || 0614BD00 ||
  (       600 )   00440000 || 002F6402 || F7FFB500 || F7FFFFC3 || BD00FDDC || 0000065C || 66020044 || B500002A ||
  (       620 )   D00D17F0 || FE7FF7FF || FDC0F7FF || D00D17F0 || FE79F7FF || FED8F7FF || CF01CF40 || BD006038 ||
  (       640 )   FDB4F7FF || D0F517F0 || FE6DF7FF || FECCF7FF || CF01CF40 || F7FF6038 || BD00FE66 || 000006A8 ||
  (       660 )   66020044 || B500002F || D00E17F0 || FE5BF7FF || FD9CF7FF || D00E17F0 || FE55F7FF || FD96F7FF ||
  (       680 )   FF7CF7FF || FDA1F7FF || F7FFBD00 || 17F0FD8F || F7FFD0F4 || F7FFFE48 || F7FFFD89 || F7FFFF6F ||
  (       6A0 )   F7FFFE42 || BD00FD92 || 000006BC || 32020020 || CF060021 || 60726031 || 4770CF40 || 000006D0 ||
  (       6C0 )   32020020 || 3F040040 || 60386870 || 47706836 || 000006F0 || 64030044 || CF073C75 || D804428E ||
  (       6E0 )   4290D101 || 2600D801 || 26004770 || 477043F6 || 00000710 || 64030044 || CF073E75 || D80442B1 ||
  (       700 )   4282D101 || 2600D801 || 26004770 || 477043F6 || 00000730 || 64020044 || CF07003C || DC04428E ||
  (       720 )   4290D101 || 2600DC01 || 26004770 || 477043F6 || 00000750 || 64020044 || CF07003E || DC0442B1 ||
  (       740 )   4282D101 || 2600DC01 || 26004770 || 477043F6 || 00000760 || 64030062 || 37043C30 || 477017F6 ||
  (       760 )   00000774 || 64030062 || CF013D30 || 3E014306 || 477041B6 || 0000078E || 64030044 || CF073E3C ||
  (       780 )   404E4050 || 3E014306 || 43F641B6 || 07A64770 || 00440000 || 003D6402 || 4050CF07 || 4306404E ||
  (       7A0 )   41B63E01 || 07B84770 || 00200000 || 40707303 || 6D04F847 || 4770003E || 000007C8 || 73030020 ||
  (       7C0 )   00372170 || 4770CF40 || 000007DA || 72030020 || F8474070 || 466E6D04 || 07EA4770 || 00200000 ||
  (       7E0 )   21707203 || CF4046B5 || 07FA4770 || 00610000 || 70756403 || 6D04F847 || 080A4770 || 00610000 ||
  (       800 )   6F726404 || CF400070 || 08204770 || 00610000 || 75643F04 || 2E000070 || F847D001 || 47706D04 ||
  (       820 )   00000834 || 73040062 || 00706177 || 603E6839 || 4770000E || 00000842 || 6E030062 || 37047069 ||
  (       840 )   08564770 || 00620000 || 65766F04 || F8470072 || 687E6D04 || 086C4770 || 00620000 || 63757404 ||
  (       860 )   CF01006B || 607E3F08 || 47706038 || 00000882 || 72030063 || CF03746F || 60783F08 || 000E603E ||
  (       880 )   089A4770 || 00630000 || 6F722D04 || CF030074 || 607E3F08 || 00066039 || 08AC4770 || 00200000 ||
  (       8A0 )   63697004 || F857006B || 47706026 || 000008C4 || 64050000 || 68747065 || 1BC949BC || 6D04F847 ||
  (       8C0 )   4770088E || 000008E0 || 72060000 || 74706564 || F8470068 || 466E6D04 || 1B8949B5 || 4770088E ||
  (       8E0 )   000008F0 || 3E020020 || B4400072 || 4770CF40 || 00000902 || 72020020 || F847003E || BC406D04 ||
  (       900 )   09144770 || 00200000 || 00407202 || 6D04F847 || 47709E00 || 00000924 || 72050020 || 706F7264 ||
  (       920 )   4770B001 || 00000938 || 72050020 || 6B636970 || 446E00B6 || 47706836 || 0000094E || 6103006E ||
  (       940 )   CF01646E || 47704006 || 06004006 || 0966F016 || 006E0000 || 63696203 || 43B0CF01 || 47700006 ||
  (       960 )   06004386 || 097CF036 || 006E0000 || 00726F02 || 4306CF01 || 43064770 || F0560600 || 00000992 ||
  (       980 )   7803006E || CF01726F || 47704046 || 06004046 || 09A0F096 || 00610000 || 746F6E03 || 477043F6 ||
  (       9A0 )   000009B0 || 63030061 || FAB67A6C || 4770F686 || 000009BE || 73030061 || 08767268 || 09CC4770 ||
  (       9C0 )   00610000 || 6C687303 || 47700076 || 000009DC || 72030061 || EA5F726F || 47700676 || 000009EE ||
  (       9E0 )   72030061 || 19B66C6F || 0600F156 || 0A084770 || 006C0000 || 68737206 || 00746669 || 40F0CF01 ||
  (       A00 )   47700006 || 26000836 || 00000A22 || 6107006C || 69687372 || CF017466 || 00064130 || 10364770 ||
  (       A20 )   0A3C17F6 || 006C0000 || 68736C06 || 00746669 || 40B0CF01 || 47700006 || 26000036 || 00000A4C ||
  (       A40 )   30020061 || 3E01003D || 477041B6 || 00000A5E || 30030061 || 3E013E3C || 43F641B6 || 0A6C4770 ||
  (       A60 )   00610000 || 003C3002 || 477017F6 || 00000A82 || 74040060 || 00657572 || 6D04F847 || 43F62600 ||
  (       A80 )   0A964770 || 00600000 || 6C616605 || F8476573 || 26006D04 || 0AAA4770 || 00420000 || 003D3E02 ||
  (       AA0 )   42B0CF01 || 2600DAEA || 0ABE4770 || 00420000 || 003D3C02 || 42B0CF01 || 2600DDE0 || 0AD04770 ||
  (       AC0 )   00420000 || CF013C01 || DBD742B0 || 47702600 || 00000AE2 || 3E010042 || 42B0CF01 || 2600DCCE ||
  (       AE0 )   0AF64770 || 00620000 || 3D3E7503 || 1B86CF01 || 43F641B6 || 0B0A4770 || 00620000 || 3D3C7503 ||
  (       B00 )   1A36CF01 || 43F641B6 || 0B1C4770 || 00620000 || 003C7502 || 1B86CF01 || 477041B6 || 00000B2E ||
  (       B20 )   75020062 || CF01003E || 41B61A36 || 0B444770 || 006B0000 || 003E3C02 || 1A36CF01 || 41B63E01 ||
  (       B40 )   477043F6 || 00000B56 || 3D01006B || 1A36CF01 || 41B63E01 || 0B6A4770 || 00620000 || 6E696D03 ||
  (       B60 )   42B0CF01 || 0006DC00 || 0B7E4770 || 00620000 || 78616D03 || 42B0CF01 || 0006DB00 || 0B944770 ||
  (       B80 )   00620000 || 616D7504 || CF010078 || D30042B0 || 47700006 || 00000BB4 || 75040062 || 006E696D ||
  (       BA0 )   42B0CF01 || 0006D800 || 00004770 || 20000230 || 20000330 || 00000BF2 || 6D040000 || 0065766F ||
  (       BC0 )   0031B507 || 0032CF40 || 2900CF40 || 42B2D00F || D306D00D || 3A013E01 || 54505C70 || D1FB3901 ||
  (       BE0 )   7830E005 || 36017010 || 39013201 || CF40D1F9 || 0C14BD07 || 00000000 || 6C696604 || 0030006C ||
  (       C00 )   0031CF40 || 2900CF40 || 3901D002 || D1FC5470 || 4770CF40 || 00000C20 || 40010020 || 47706836 ||
  (       C20 )   00000C38 || 2101006D || 6030CF03 || 4770000E || 47706006 || 47706001 || 00000C5E || 2B02006D ||
  (       C40 )   CF030021 || 18126832 || 000E6032 || 68024770 || 60021992 || 68024770 || 60021852 || 0C6C4770 ||
  (       C60 )   00200000 || 00406802 || 47708836 || 00000C86 || 6802006D || CF030021 || 000E8030 || 80064770 ||
  (       C80 )   80014770 || 0CAC4770 || 006D0000 || 212B6803 || 8832CF03 || 80321812 || 4770000E || 19928802 ||
  (       CA0 )   47708002 || 18528802 || 47708002 || 00000CBA || 63020020 || 78360040 || 0CD44770 || 006D0000 ||
  (       CC0 )   00216302 || 7030CF03 || 4770000E || 47707006 || 47707001 || 00000CFA || 6303006D || CF03212B ||
  (       CE0 )   18127832 || 000E7032 || 78024770 || 70021992 || 78024770 || 70021852 || 0D224770 || 006D0000 ||
  (       D00 )   73696204 || CF030021 || 43026832 || 000E6032 || 68024770 || 60024332 || 68024770 || 6002430A ||
  (       D20 )   0D4A4770 || 006D0000 || 63696204 || CF030021 || 43826832 || 000E6032 || 68024770 || 600243B2 ||
  (       D40 )   68024770 || 6002438A || 0D724770 || 006D0000 || 726F7804 || CF030021 || 40426832 || 000E6032 ||
  (       D60 )   68024770 || 60024072 || 68024770 || 6002404A || 0DDC4770 || 00680000 || 74696204 || CF010040 ||
  (       D80 )   40066836 || F04FBF18 || 477036FF || 42D0F44F || 2B01B500 || F847D10A || 26006D04 || FE86F000 ||
  (       DA0 )   6D04F847 || F0010016 || E011F9A5 || 3B01CF02 || FB20F002 || 6D04F847 || 43162636 || F99AF001 ||
  (       DC0 )   6D04F847 || F847000E || 26006D04 || FE6EF000 || 6D04F847 || F0004EB7 || BD00FF9D || 00000E04 ||
  (       DE0 )   6805006D || 21736962 || 8832CF03 || 80324302 || 4770000E || 43328802 || 47708002 || 430A8802 ||
  (       E00 )   47708002 || 00000E2C || 6805006D || 21636962 || 8832CF03 || 80324382 || 4770000E || 43B28802 ||
  (       E20 )   47708002 || 438A8802 || 47708002 || 00000E54 || 6805006D || 21726F78 || 8832CF03 || 80324042 ||
  (       E40 )   4770000E || 40728802 || 47708002 || 404A8802 || 47708002 || 00000E74 || 68050068 || 40746962 ||
  (       E60 )   8836CF01 || BF184006 || 36FFF04F || F44F4770 || E78D4208 || 00000E9C || 6305006D || 21736962 ||
  (       E80 )   7832CF03 || 70324302 || 4770000E || 43327802 || 47707002 || 430A7802 || 47707002 || 00000EC4 ||
  (       EA0 )   6305006D || 21636962 || 7832CF03 || 70324382 || 4770000E || 43B27802 || 47707002 || 438A7802 ||
  (       EC0 )   47707002 || 00000EEC || 6305006D || 21726F78 || 7832CF03 || 70324042 || 4770000E || 40727802 ||
  (       EE0 )   47707002 || 404A7802 || 47707002 || 00000F0C || 63050068 || 40746962 || 7836CF01 || BF184006 ||
  (       F00 )   36FFF04F || F44F4770 || E74142F0 || 00000F1C || 63050061 || 2B6C6C65 || 47703604 || 00000F2C ||
  (       F20 )   63050061 || 736C6C65 || 477000B6 || 00000FC6 || 68070000 || 73616C66 || 00302168 || 0031CF40 ||
  (       F40 )   F44FCF40 || 42984380 || F44FD323 || 42983380 || F64FD21F || 401973FF || D0194299 || 0201F010 ||
  (       F60 )   D1162A00 || 429A8802 || F110D113 || 4A526000 || 60134B52 || 60134B52 || 23014A52 || 80016013 ||
  (       F80 )   68134A51 || 0301F013 || 4A4ED1FB || 60132380 || F0004770 || 572AFB92 || 676E6F72 || 64646120 ||
  (       FA0 )   73736572 || 20726F20 || 61746164 || 726F6620 || 69727720 || 676E6974 || 616C6620 || 21206873 ||
  (       FC0 )   F002000A || 1016BA3E || 00000000 || 616C660E || 61706873 || 72656567 || 00657361 || 0030B50F ||
  (       FE0 )   F44FCF40 || 42984380 || 4A33D314 || 60134B33 || 60134B33 || 23024A33 || 4A346013 || 4A316010 ||
  (      1000 )   60132342 || 68134A30 || 0301F013 || 4A2DD1FB || 60132380 || 1098BD0F || 00000000 || 6172650A ||
  (      1020 )   6C666573 || 00687361 || 4080F44F || F44FB672 || F64F3180 || 880372FF || D01C4293 || 6D04F847 ||
  (      1040 )   F8470006 || F0006D04 || 4510FB38 || 65736172 || 6F6C6220 || 61206B63 || 00202074 || FBA0F000 ||
  (      1060 )   FB2BF000 || 7266200C || 46206D6F || 6873616C || F7FF000A || 3002FFB3 || D1DC4288 || FB1DF000 ||
  (      1080 )   6E694612 || 65687369 || 52202E64 || 74657365 || 000A2120 || BA5FF002 || 000010D0 || 650E0000 ||
  (      10A0 )   65736172 || 73616C66 || 6F726668 || 0030006D || E7BBCF40 || 00000D82 || 40022004 || 45670123 ||
  (      10C0 )   CDEF89AB || 40022010 || 4002200C || 40022014 || 000010E6 || 2B010069 || 1836CF01 || 18364770 ||
  (      10E0 )   06003600 || 10FCF116 || 00690000 || CF012D01 || 47701B86 || 3E001A36 || F1B60600 || 0000110A ||
  (      1100 )   31020061 || 3E01002D || 11184770 || 00610000 || 002B3102 || 47703601 || 00001126 || 32020061 ||
  (      1120 )   3E02002D || 11344770 || 00610000 || 002B3202 || 47703602 || 00001146 || 6E060061 || 74616765 ||
  (      1140 )   42760065 || 11584770 || 00610000 || 73626103 || 183617F0 || 47704046 || 00001176 || 75050042 ||
  (      1160 )   646F6D2F || 0031CF01 || F6F6FBB0 || 1A404371 || 60383F04 || 11944770 || 00420000 || 6F6D2F04 ||
  (      1180 )   CF010064 || FB900031 || 4371F6F6 || 3F041A40 || 47706038 || 000011A8 || 6D030042 || B500646F ||
  (      11A0 )   FFEFF7FF || BD00CF40 || 000011B8 || 2F010062 || FB90CF01 || 4770F6F6 || 000011C8 || 2A01006A ||
  (      11C0 )   4346CF01 || 43464770 || 000011D6 || 32020061 || 0076002A || 11E44770 || 00610000 || 002F3202 ||
  (      11E0 )   47701076 || 000011F8 || 65040061 || 006E6576 || 40302001 || 47701836 || 00001210 || 62040081 ||
  (      1200 )   00657361 || 6D04F847 || 47704E80 || 0000000A || 00001226 || 62060000 || 72616E69 || 487B0079 ||
  (      1220 )   60012102 || 123C4770 || 00000000 || 63656407 || 6C616D69 || 210A4875 || 47706001 || 0000124E ||
  (      1240 )   68030000 || 48717865 || 60012110 || 126A4770 || 00810000 || 6F6F6809 || 6D652D6B || F8477469 ||
  (      1260 )   4E6B6D04 || 13544770 || 12860000 || 00810000 || 6F6F6808 || 656B2D6B || F8470079 || 4E656D04 ||
  (      1280 )   137A4770 || 12A40000 || 00810000 || 6F6F680A || 6D652D6B || 003F7469 || 6D04F847 || 47704E5E ||
  (      12A0 )   000013A4 || 000012C0 || 68090081 || 2D6B6F6F || 3F79656B || 6D04F847 || 47704E58 || 000013D0 ||
  (      12C0 )   000012DE || 680A0081 || 2D6B6F6F || 73756170 || F8470065 || 4E526D04 || 35064770 || 12F40000 ||
  (      12E0 )   00000000 || 696D6504 || B50F0074 || F0004848 || BD0FF826 || 00001308 || 6B030000 || B50F7965 ||
  (      1300 )   F0004844 || BD0FF81C || 0000131A || 65050000 || 3F74696D || 68004840 || 132C4687 || 00000000 ||
  (      1320 )   79656B04 || 483D003F || 46876800 || 00001342 || 70050000 || 65737561 || 68004839 || 68004687 ||
  (      1340 )   13684687 || 00000000 || 7265730B || 2D6C6169 || 74696D65 || F000B500 || 2E00F825 || D0FACF40 ||
  (      1360 )   70164A30 || BD00CF40 || 00001390 || 730A0000 || 61697265 || 656B2D6C || B5000079 || F828F000 ||
  (      1380 )   CF402E00 || F847D0FA || 4A266D04 || BD007816 || 000013BE || 730C0000 || 61697265 || 6D652D6C ||
  (      13A0 )   003F7469 || F7FFB500 || F847FFC7 || 26006D04 || 6801481D || 40012080 || 43F6D000 || 143CBD00 ||
  (      13C0 )   00000000 || 7265730B || 2D6C6169 || 3F79656B || F7FFB500 || F847FFB1 || 26006D04 || 68014812 ||
  (      13E0 )   40012020 || 43F6D000 || 4910BD00 || 003DF244 || 490F6008 || 6096F44F || 490E6008 || 60082046 ||
  (      1400 )   F242490D || 6008000C || 00004770 || 20004FFC || 20004FF8 || 20004FF4 || 20004FF0 || 20004FEC ||
  (      1420 )   20004FE8 || 40013804 || 40013800 || 40021018 || 40010804 || 40013808 || 4001380C || 00001460 ||
  (      1440 )   63070000 || 65707865 || B5007463 || B4016838 || 60383001 || F80BF000 || 7006BC01 || BD00CF40 ||
  (      1460 )   000014D6 || 61060000 || 70656363 || B5000074 || 3901CF02 || F7FF2200 || 0030FF42 || 287FCF40 ||
  (      1480 )   2820D009 || 2809D219 || 280AD016 || 280DD01F || 2808D01D || 2A00D1EF || F000D0ED || 0803F90E ||
  (      14A0 )   2A000820 || 5C88D0E7 || 23803A01 || D0E24003 || 40032340 || E7DED0F5 || 42B22020 || F847D2DB ||
  (      14C0 )   00066D04 || FF11F7FF || 54883201 || 0016E7D3 || F8A2F000 || 14E8BD00 || 00400000 || 62697403 ||
  (      14E0 )   6D04F847 || 47704E29 || 000014FE || 3E030081 || F8476E69 || 4E266D04 || 00004770 || 15240000 ||
  (      1500 )   00820000 || 7275630E || 746E6572 || 756F732D || 00656372 || 6D04F847 || 47704E1E || 00000000 ||
  (      1520 )   20000068 || 00001540 || 73090000 || 6F737465 || 65637275 || CF024817 || 60416006 || 4770CF40 ||
  (      1540 )   0000155E || 73060000 || 6372756F || F8470065 || 4E106D04 || 68703F04 || 68366038 || 15984770 ||
  (      1560 )   00000000 || 65757105 || B50F7972 || 21004808 || F7FF6001 || F847FFB5 || F8476D04 || 26C86D04 ||
  (      1580 )   FF75F7FF || FFD6F7FF || 0000BD0F || 20000068 || 20004FE4 || 20004FDC || 000015E6 || 63070000 ||
  (      15A0 )   61706D6F || B50F6572 || CF400031 || 4288CF01 || CF40D002 || BD0F2600 || 2800CF02 || 3801D010 ||
  (      15C0 )   5C335C0A || D3022A41 || BF382A5B || 2B413220 || 2B5BD302 || 3320BF38 || D0EE429A || BD0F2600 ||
  (      15E0 )   43F62600 || 15FABD0F || 00000000 || 00726302 || F000B500 || 0A01F862 || 160CBD00 || 00000000 ||
  (      1600 )   006C6202 || 6D04F847 || 47702620 || 00001620 || 73050000 || 65636170 || 6D04F847 || E6642620 ||
  (      1620 )   00001640 || 73060000 || 65636170 || B5000073 || DD032E00 || FFF0F7FF || D1FB3E01 || BD00CF40 ||
  (      1640 )   00001650 || 5B060050 || 72616863 || E005005D || 00001668 || 63040000 || 00726168 || F001B500 ||
  (      1660 )   CF40FB6A || BD007836 || 00001678 || 28010050 || 6D04F847 || E0062629 || 00001692 || 5C010050 ||
  (      1680 )   6D04F847 || B5002600 || FB5FF001 || CF403704 || 16D6BD00 || 00100000 || 00222E02 || B500489B ||
  (      16A0 )   6D04F847 || F0000006 || F847FA5E || 26226D04 || FB4BF001 || FD58F000 || B40ABD00 || 6D04F847 ||
  (      16C0 )   3E014676 || 21017833 || 40193301 || EB1E185B || BC0A0E03 || 16FCE039 || 00100000 || 00226302 ||
  (      16E0 )   E7DC488B || 6D04F847 || 3E014676 || 21017833 || 40193301 || EB1E185B || 47700E03 || 00001726 ||
  (      1700 )   73020010 || 48830022 || F847E7C9 || 46766D04 || 6D04F847 || 78363E01 || 1C732101 || 185B4019 ||
  (      1720 )   0E03EB1E || 173E4770 || 00000000 || 756F6305 || 3601746E || 6D04F847 || 78363E01 || 17664770 ||
  (      1740 )   00000000 || 79746305 || B5016570 || 28007830 || 3601D007 || 6D04F847 || F7FF7836 || 3801FDC6 ||
  (      1760 )   CF40D1F7 || 1794BD01 || 00000000 || 70797404 || 00310065 || 0030CF40 || B500CF40 || D0082900 ||
  (      1780 )   F8472200 || 5C866D04 || FDAFF7FF || 42913201 || BD00D1F7 || 000017CE || 68040000 || 002E7865 ||
  (      17A0 )   0031B507 || 2020CF40 || 3804220F || 6D04F847 || 40C6000E || 2E094016 || 3637D901 || 3630E000 ||
  (      17C0 )   FD93F7FF || D1F02800 || FF26F7FF || 17DEBD07 || 00000000 || 732E6803 || 4C4FB51F || 17EEE00E ||
  (      17E0 )   00000000 || 732E7503 || 4C4CB51F || 186CE006 || 00000000 || 00732E02 || 4C49B51F || 1BC94949 ||
  (      1800 )   4A490889 || B4036810 || 6010200A || FF55F7FF || 61745308 || 203A6B63 || F847005B || 000E6D04 ||
  (      1820 )   FC6BF001 || FF49F7FF || 00205D02 || 4A3EBC03 || 29006010 || 4A3DD00A || B4066810 || 6D04F847 ||
  (      1840 )   47A00006 || 3A04BC06 || D1F53901 || FF35F7FF || 4F542006 || 00203A53 || 6D04F847 || 47A00036 ||
  (      1860 )   FF2BF7FF || 3E2A2004 || BD1F000A || 00001930 || 77050000 || 7364726F || F7FFB500 || 0A01FF1E ||
  (      1880 )   FECFF000 || FF19F7FF || 64644109 || 73736572 || F847203A || F7FF6D04 || F7FFFF83 || 4C06FF0E ||
  (      18A0 )   3A6B6E69 || F8470020 || 68366D04 || FF78F7FF || FF03F7FF || 616C4607 || 203A7367 || 6D04F847 ||
  (      18C0 )   F7FF88B6 || F7FFFF6D || 4306FEF8 || 3A65646F || 1DB00020 || FEE1F000 || 6D04F847 || F7FF0006 ||
  (      18E0 )   F7FFFF5F || 4E06FEEA || 3A656D61 || F8470020 || 36066D04 || FF29F7FF || FEDFF7FF || F0000A01 ||
  (      1900 )   0030FEA9 || D0BDCF40 || BD00CF40 || 000016BA || 000016E4 || 0000170A || 000017A1 || 000030EB ||
  (      1920 )   000030FB || 20000230 || 20004FFC || 2000022C || 00001A94 || 310D0000 || 74696232 || 6F636E65 ||
  (      1940 )   676E6964 || 2EFFB50F || F847D804 || F05F6D04 || BD0F36FF || 10FFF016 || D10E42B0 || 71FFF64F ||
  (      1960 )   0C314008 || D1084281 || 06FFF016 || 5680F456 || 6D04F847 || 36FFF05F || F016BD0F || 42B020FF ||
  (      1980 )   F64FD10F || 400871FF || 42810C31 || 0A36D109 || 06FFF016 || 5600F456 || 6D04F847 || 36FFF05F ||
  (      19A0 )   22FFBD0F || 40110031 || 40100A30 || D1104288 || 40100C30 || D10C4288 || 40100E30 || D1084288 ||
  (      19C0 )   06FFF016 || 5640F456 || 6D04F847 || 36FFF05F || 0030BD0F || 31012100 || F1501800 || F07F0000 ||
  (      19E0 )   4002027F || D0052A80 || D3F4291F || 6D04F847 || BD0F2600 || D3F92908 || F0360006 || F0110680 ||
  (      1A00 )   01C00001 || F0114306 || 02C0000E || F0114306 || 05800010 || F8474306 || F05F6D04 || BD0F36FF ||
  (      1A20 )   6D04F847 || 6648F8DF || 4170F45F || 0201EA10 || 43160112 || 6100F45F || 0201EA10 || 431603D2 ||
  (      1A40 )   61E0F45F || 0201EA10 || 43160112 || EA1021FF || 43160201 || E377431E || 6D04F847 || 6614F8DF ||
  (      1A60 )   4170F05F || 0201EA10 || 43160B12 || 6100F05F || 0201EA10 || 43160852 || 61E0F05F || 0201EA10 ||
  (      1A80 )   43160B12 || 017FF45F || 0201EA10 || 43160C12 || E359431E || 00001AFA || 72100000 || 73696765 ||
  (      1AA0 )   6C726574 || 72657469 || 002C6C61 || 0033B50F || 021BCF40 || D8052EFF || 5600F456 || F000431E ||
  (      1AC0 )   BD0FFB19 || FF3EF7FF || CF402E00 || F8DFD006 || 430605A8 || F000431E || BD0FFB37 || F7FF43F6 ||
  (      1AE0 )   2E00FF31 || D006CF40 || 0590F8DF || 431E4306 || FB2AF000 || 43F6BD0F || 1B5AE00B || 00000000 ||
  (      1B00 )   766F6D09 || 766F6D77 || B50F2C74 || CF400033 || 0030021B || F7FFCF40 || F64FFF83 || EA1071FF ||
  (      1B20 )   D0014001 || FF98F7FF || B50FBD0F || 00303601 || 2300CF40 || FF74F7FF || FF8EF7FF || B50FE006 ||
  (      1B40 )   F8473601 || 26006D04 || FFB0F7FF || 6D04F847 || 7680F244 || FACEF000 || 1BC0BD0F || 00000000 ||
  (      1B60 )   6C616305 || B50F2C6C || F0000033 || 0030FE34 || 1A1BCF40 || F8DF3B04 || 40191508 || D0062900 ||
  (      1B80 )   2500F8DF || D0024291 || 400FE8BD || CF40E7D7 || F8DF085B || F24004F4 || 401971FF || 0ADB4308 ||
  (      1BA0 )   31FFF240 || 04094019 || 0A9B4308 || 0101F013 || 43080689 || 6D04F847 || F0000006 || BD0FFAC5 ||
  (      1BC0 )   00001BF6 || 6C080000 || 72657469 || 002C6C61 || F847B508 || F64F6D04 || F0000647 || F847FA8B ||
  (      1BE0 )   F6466D04 || F0005604 || F847FA85 || 26066D04 || FF5CF7FF || 1C1ABD08 || 00000000 || 65726306 ||
  (      1C00 )   00657461 || F000B500 || F641F833 || 47804037 || 6D04F847 || 0601F1BE || 1C62BD00 || 00200000 ||
  (      1C20 )   656F6405 || F6413E73 || 47804037 || 6D04F847 || 0601F1BE || F8474770 || F1BE6D04 || F04F0601 ||
  (      1C40 )   68135200 || 1444F8DF || 20026809 || D0004008 || 31023102 || F7FF6011 || 6013FF68 || F9B7F000 ||
  (      1C60 )   1CA4BD00 || 00000000 || 75623C07 || 73646C69 || F000B500 || F000FB61 || 2002FDAE || CF404006 ||
  (      1C80 )   F847D004 || 26366D04 || FA34F000 || 6D04F847 || 5600F24B || FA2EF000 || 6D04F847 || F000260A ||
  (      1CA0 )   BD00FA96 || 00001CB0 || 5B030050 || E0035D27 || 00001CC8 || 27010000 || F001B500 || F000F83C ||
  (      1CC0 )   0030FD2C || BD00CF40 || 00001D06 || 70080030 || 7074736F || 00656E6F || F7FFB500 || 2110FFED ||
  (      1CE0 )   D10D4001 || 40012120 || F7FFD005 || F847FF71 || 4EE76D04 || F7FFE004 || F847FF6B || 4EE56D04 ||
  (      1D00 )   FF31F7FF || 1D5CBD00 || 00000000 || 6C6E6907 || 2C656E69 || F24BB500 || F64B5100 || F2445200 ||
  (      1D20 )   88307370 || D0084288 || D0084290 || D0064298 || 6D04F847 || F0000006 || 3602F9DD || CF40E7F1 ||
  (      1D40 )   B40EBD00 || 5200F64B || 7370F244 || 30028801 || D0014291 || D1F94299 || 4770BC0E || 00001D72 ||
  (      1D60 )   72040000 || 002C7465 || 6D04F847 || 5600F64B || 1D80E1C0 || 00300000 || 69786504 || E7F30074 ||
  (      1D80 )   00001D98 || 72070030 || 72756365 || F8476573 || 4EBE6D04 || E6E66836 || 00001DB0 || 73050081 ||
  (      1DA0 )   65746174 || 6D04F847 || 47704EBB || 00000000 || 00001DC2 || 5D010000 || 210048B7 || 600143C9 ||
  (      1DC0 )   1DD24770 || 00100000 || 48B35B01 || 60012100 || 1DFA4770 || 00000000 || B5003A01 || 600748AF ||
  (      1DE0 )   FAAAF000 || 6D04F847 || 5600F24B || F982F000 || 210048A9 || 600143C9 || 1E42BD00 || 00300000 ||
  (      1E00 )   B5003B01 || 680148A5 || D00E42B9 || FC55F7FF || 74532015 || 206B6361 || 20746F6E || 616C6162 ||
  (      1E20 )   6465636E || F0010A2E || F847BB0C || F64B6D04 || F0005600 || F000F95F || 4897F8CA || 60012100 ||
  (      1E40 )   1E56BD00 || 00000000 || 65786507 || 65747563 || CF400030 || 1E6E4687 || 00100000 || 6D6D6909 ||
  (      1E60 )   61696465 || F8476574 || 26106D04 || 1E84E0E2 || 00500000 || 6C6E6906 || 00656E69 || 6D04F847 ||
  (      1E80 )   E0D72620 || 00001E9E || 630B0010 || 69706D6F || 6E6F656C || F847796C || 26306D04 || 1EB8E0CA ||
  (      1EA0 )   00500000 || 662D300A || 61646C6F || 00656C62 || 6D04F847 || E0BD2640 || 00001ED2 || 310A0050 ||
  (      1EC0 )   6C6F662D || 6C626164 || F8470065 || 26416D04 || 1EECE0B0 || 00500000 || 662D320A || 61646C6F ||
  (      1EE0 )   00656C62 || 6D04F847 || E0A32642 || 00001F06 || 330A0050 || 6C6F662D || 6C626164 || F8470065 ||
  (      1F00 )   26436D04 || 1F20E096 || 00500000 || 662D340A || 61646C6F || 00656C62 || 6D04F847 || E0892644 ||
  (      1F20 )   00001F3A || 350A0050 || 6C6F662D || 6C626164 || F8470065 || 26456D04 || 1F54E07C || 00500000 ||
  (      1F40 )   662D360A || 61646C6F || 00656C62 || 6D04F847 || E06F2646 || 00001F6E || 370A0050 || 6C6F662D ||
  (      1F60 )   6C626164 || F8470065 || 26476D04 || 1F9EE062 || 00000000 || 6E6F6308 || 6E617473 || B5000074 ||
  (      1F80 )   F9DAF000 || FE24F7FF || 6D04F847 || 7670F244 || F8B0F000 || FF8CF7FF || F819F000 || 1FC0BD00 ||
  (      1FA0 )   00000000 || 6F633209 || 6174736E || B500746E || F9C2F000 || 603E6839 || F7FF460E || E7E1FE09 ||
  (      1FC0 )   00002024 || 73060000 || 6764756D || B5000065 || 5000F04F || F04F6801 || 42915200 || 3902D21C ||
  (      1FE0 )   F64F880A || 429A73FF || F847D104 || 26006D04 || F880F000 || F86CF000 || 68004829 || 6D04F847 ||
  (      2000 )   49280006 || 31046809 || 5200F04F || 60116813 || F870F000 || BD006013 || F85AF000 || 6D04F847 ||
  (      2020 )   E0082600 || 000020A8 || 73080000 || 6C667465 || 00736761 || F04FB500 || 68015000 || 5200F04F ||
  (      2040 )   D2054291 || 68014816 || 60014331 || BD00CF40 || CF400032 || 68004813 || 88013004 || 73FFF64F ||
  (      2060 )   D1014299 || E0000011 || 80014311 || 0000BD00 || F2400000 || F2C00000 || F05F0000 || F07F0000 ||
  (      2080 )   FFC00001 || FFC00000 || F000F800 || 20000014 || 00001D14 || 00001B66 || 20004FD8 || 20000010 ||
  (      20A0 )   20000020 || 20000004 || 000020C4 || 61070041 || 6E67696C || 20016465 || 18364030 || 40302002 ||
  (      20C0 )   47701836 || 000020EA || 61050000 || 6E67696C || F04FB500 || 68015000 || 40012002 || F847D004 ||
  (      20E0 )   26006D04 || F806F000 || 2124BD00 || 00000000 || 002C6802 || B2B6B50F || 5000F04F || F04F6801 ||
  (      2100 )   42915200 || F847D205 || 000E6D04 || FF15F7FE || 0032E002 || 800ACF40 || 6D04F847 || F0002602 ||
  (      2120 )   BD0FF856 || 0000213E || 2C010000 || F847B500 || F7FF6D04 || 0C36FFDF || FFDCF7FF || 215ABD00 ||
  (      2140 )   00000000 || 2C3C3E03 || F847B500 || 0C366D04 || FFD0F7FF || FFCEF7FF || 21C2BD00 || 00000000 ||
  (      2160 )   72747307 || 2C676E69 || 21FFB507 || CF404031 || CF400030 || D1052900 || 6D04F847 || F7FF2600 ||
  (      2180 )   BD07FFB9 || 6D04F847 || 02367806 || F7FF430E || 3001FFB1 || 29023901 || F847D30A || 78466D04 ||
  (      21A0 )   78020236 || F7FF4316 || 3002FFA5 || E7F23902 || D1002900 || F847BD07 || 78066D04 || FF9AF7FF ||
  (      21C0 )   2222BD07 || 00000000 || 6C6C6105 || F04F746F || 68015000 || 5200F04F || D2104291 || CF400032 ||
  (      21E0 )   F44F1889 || 42913280 || F7FFD319 || 460BFA66 || 6873616C || 6C756620 || F0010A6C || 0032B922 ||
  (      2200 )   1889CF40 || 68124A42 || D3084291 || FA55F7FF || 6D615209 || 6C756620 || F0010A6C || 6001B912 ||
  (      2220 )   22484770 || 00000000 || 726F6609 || 72746567 || B5006D61 || F828F000 || 5000F04F || 60014935 ||
  (      2240 )   49364835 || BD006001 || 00002274 || 630D0000 || 69706D6F || 6F74656C || 3F6D6172 || 6D04F847 ||
  (      2260 )   F04F2600 || 68005000 || 5100F04F || D34D4288 || 477043F6 || 00002298 || 630C0000 || 69706D6F ||
  (      2280 )   6F74656C || 006D6172 || 5000F04F || F04F6800 || 42885100 || 4770D313 || 00002328 || 630E0000 ||
  (      22A0 )   69706D6F || 6F74656C || 73616C66 || F04F0068 || 68005000 || 5100F04F || D2004288 || 48164770 ||
  (      22C0 )   68024917 || 600A680B || F04F6003 || 49155000 || 680B6802 || 6003600A || 6800480D || D3154283 ||
  (      22E0 )   F7FFB500 || 2023F9EA || 69726156 || 656C6261 || 6F632073 || 64696C6C || 69772065 || 64206874 ||
  (      2300 )   69746369 || 72616E6F || BD000A79 || 00004770 || 20000024 || 20000330 || 20000004 || 00000150 ||
  (      2320 )   2000001C || 20000018 || 0000241E || 28080000 || 61657263 || 00296574 || F000B500 || 2E00FCFC ||
  (      2340 )   F7FFD10E || 2015F9BA || 61657243 || 6E206574 || 73646565 || 6D616E20 || 0A212065 || B871F001 ||
  (      2360 )   F8476838 || 3F046D04 || F0006038 || CF40F9A5 || CF402E00 || 6838D011 || 6D04F847 || 60383F04 ||
  (      2380 )   F99BF7FF || 64655209 || 6E696665 || F7FF2065 || F7FFF9F0 || 2E02F992 || F7FF0020 || F000FE99 ||
  (      23A0 )   F04FFA1A || 68005000 || 5100F04F || D21E4288 || 2100488F || F8476001 || 26066D04 || FF07F7FF ||
  (      23C0 )   FA65F7FE || FED0F7FF || 6801488A || F04F680A || 429A33FF || F04FD108 || 68135200 || F8476011 ||
  (      23E0 )   F7FF6D04 || 6013FEA3 || CF406006 || 4881E011 || 6D04F847 || F7FF6806 || F847FE99 || F64F6D04 ||
  (      2400 )   F7FF76FF || 487BFE77 || CF400031 || F7FF6001 || F04FFEAB || 68015000 || 60014877 || 2436BD00 ||
  (      2420 )   00000000 || 72617608 || 6C626169 || F8470065 || 26016D04 || 244EE013 || 00000000 || 61763209 ||
  (      2440 )   62616972 || F847656C || 26026D04 || 252CE007 || 00000000 || 61766E09 || 62616972 || B500656C ||
  (      2460 )   FF6AF7FF || 5000F04F || F04F6801 || 42915200 || 200FD234 || 00B24006 || 68014860 || 4A601A89 ||
  (      2480 )   D20B4291 || F919F7FF || 746F4E0F || 6F6E6520 || 20686775 || 0A4D4152 || BFD3F000 || F8476001 ||
  (      24A0 )   000E6D04 || FB94F7FF || 6D04F847 || 7670F244 || FE20F7FF || CF400030 || 28000002 || 600ED005 ||
  (      24C0 )   F7FF3104 || 3801FE33 || F847D1F9 || 26806D04 || F7FF4316 || F7FFFDAF || BD00FD7A || F97BF000 ||
  (      24E0 )   40062002 || D104CF40 || 6D04F847 || F7FF2636 || F847FE01 || 4E436D04 || FE26F7FF || 6D04F847 ||
  (      2500 )   F7FF4E41 || F847FE21 || F2446D04 || F7FF7670 || 0030FDF1 || 2800CF40 || F7FFD003 || 3801FE07 ||
  (      2520 )   F7FFD1FB || F7FFFCC5 || BD00FD52 || 0000260C || 62070000 || 65666675 || B5003A72 || FEFCF7FF ||
  (      2540 )   40302001 || 20021836 || 18364030 || 5000F04F || F04F6801 || 42915200 || 4828D228 || 1B896801 ||
  (      2560 )   42914A27 || F7FFD20B || 4E0FF8A8 || 6520746F || 67756F6E || 41522068 || F0000A4D || 6001BF62 ||
  (      2580 )   6D04F847 || F7FF000E || F847FB23 || F2446D04 || F7FF7670 || F7FFFDAF || F847FDC9 || F2406D04 ||
  (      25A0 )   F7FF1640 || F7FFFD47 || BD00FD12 || F913F000 || 40062002 || D104CF40 || 6D04F847 || F7FF2636 ||
  (      25C0 )   F847FD99 || 4E0F6D04 || FDBEF7FF || 6D04F847 || F7FF4E0D || F847FDB9 || F2446D04 || F7FF7670 ||
  (      25E0 )   F7FFFD89 || F7FFFDF4 || F7FFFC63 || BD00FCF0 || 20000020 || 20000004 || 20000014 || 20000024 ||
  (      2600 )   20000330 || 3F04603E || 467E3602 || 0000263E || 640F0000 || 69746369 || 72616E6F || 61747379 ||
  (      2620 )   F04F7472 || 68005000 || 5100F04F || 6D04F847 || D2014288 || 47704EE9 || 68364EE9 || 267A4770 ||
  (      2640 )   00000000 || 6369640E || 6E6F6974 || 6E797261 || 00747865 || 6831B503 || 30FFF04F || D0074281 ||
  (      2660 )   28FF7988 || 000ED004 || 6D04F847 || BD032600 || 6D04F847 || 43F62600 || 26ACBD03 || 00000000 ||
  (      2680 )   696B730A || 72747370 || 00676E69 || 31017831 || 400A2201 || 18761889 || B4064770 || 31017801 ||
  (      26A0 )   400A2201 || 18401889 || 4770BC06 || 00002730 || 66040000 || 00646E69 || 2200B53F || 00352300 ||
  (      26C0 )   0034CF40 || F7FFCF40 || F64FFFAC || 88B170FF || D0184288 || 6D04F847 || F7FF3606 || F847F82A ||
  (      26E0 )   00266D04 || 6D04F847 || F7FE002E || 2E00FF5C || D008CF40 || F7FF1DB0 || 0002FFD0 || F04F000B ||
  (      2700 )   42825000 || F7FFD204 || 0030FFA5 || D0DCCF40 || F8470016 || 001E6D04 || B500BD3F || 68380031 ||
  (      2720 )   FFCAF7FF || 2A00683A || F000D101 || BD00FD5B || 00002790 || 63060000 || 706D756A || 0032002C ||
  (      2740 )   0031CF40 || 1B8BCF40 || F06F3B04 || 401901FE || D00E2900 || 00FFF06F || D00A4281 || FFADF7FE ||
  (      2760 )   6D754A0D || 6F742070 || 6166206F || F0000A72 || 105BBE68 || 400B21FF || 00304313 || B500001E ||
  (      2780 )   5200F04F || 60106813 || FCB4F7FF || BD006013 || 000027CA || 6A050000 || 2C706D75 || CF400031 ||
  (      27A0 )   CF400030 || 3B041A0B || 4019498E || D0022900 || 42914A8D || 105BD1D2 || 72FFF240 || F4534013 ||
  (      27C0 )   F8474360 || 001E6D04 || 27E2E7D9 || 00000000 || 72656804 || F8470065 || F04F6D04 || 68365600 ||
  (      27E0 )   28DE4770 || 00000000 || 616C660D || 61766873 || 65682D72 || F8476572 || 4E7C6D04 || 47706836 ||
  (      2800 )   F847B500 || F6426D04 || F7FF6600 || F847FC73 || F64C6D04 || F7FF7640 || BD00FC6D || B500E7DB ||
  (      2820 )   F83AF000 || 603E6839 || F847460E || F24D6D04 || F7FF1600 || BD00FF84 || F000B500 || 6839F82D ||
  (      2840 )   460E603E || 6D04F847 || 7600F24D || FF77F7FF || B500BD00 || FFD4F7FF || F81EF000 || 603E6839 ||
  (      2860 )   F847460E || F24D6D04 || F7FF0600 || BD00FF68 || F000B500 || 6839F811 || 460E603E || FF8EF7FF ||
  (      2880 )   B500BD00 || FFBCF7FF || FFA5F7FF || 6D04F847 || F7FF2602 || BD00FC9C || F7FFB500 || F847FF9C ||
  (      28A0 )   26026D04 || FC93F7FF || B500BD00 || FF93F7FF || FF74F7FF || B500BD00 || FF8DF7FF || 6D04F847 ||
  (      28C0 )   0600F24D || FF3BF7FF || B500BD00 || FF83F7FF || 6D04F847 || 1600F24D || FF31F7FF || 291ABD00 ||
  (      28E0 )   00300000 || 65687404 || 2E05006E || CF40D101 || 2E02E7DB || CF40D101 || F7FEE7DD || 5317FEDE ||
  (      2900 )   63757274 || 65727574 || 6F642073 || 2074276E || 6374616D || F0000A68 || 2936BD94 || 00300000 ||
  (      2920 )   736C6504 || B5000065 || F817F000 || FC3EF7FD || FFDBF7FF || 294EBD00 || 00300000 || 00666902 ||
  (      2940 )   F7FFB500 || F847FF9E || 26026D04 || 2968BD00 || 00300000 || 65686105 || B5006461 || FF9CF7FF ||
  (      2960 )   6D04F847 || BD002605 || 00002982 || 72060030 || 61657065 || B5000074 || F81FF000 || FFB5F7FF ||
  (      2980 )   299ABD00 || 00300000 || 69687705 || B500656C || FFD6F7FF || FC0AF7FD || 29AEBD00 || 00300000 ||
  (      29A0 )   746E7505 || 2E016C69 || CF40D1A7 || 29C2E751 || 00300000 || 61676105 || 2E016E69 || CF40D19D ||
  (      29C0 )   29F0E756 || 00300000 || 67656205 || B5006E69 || FF24F7FF || 6D04F847 || BD002601 || 00000150 ||
  (      29E0 )   20000004 || FFFFF801 || FFFFF800 || 20000024 || 00002A00 || 6B010020 || 6D04F847 || 47709E02 ||
  (      2A00 )   00002A10 || 6A010020 || 6D04F847 || 47709E00 || 00002A20 || 69010020 || 6D04F847 || 47700026 ||
  (      2A20 )   00002A5E || 6C050030 || 65766165 || 48D9B500 || 003B6801 || 681A3F04 || 601A3B04 || 428B3308 ||
  (      2A40 )   B403D1F9 || FF28F7FF || 0033BC03 || 3904CF40 || 6001600B || 680A3904 || 600A3201 || 2A70BD00 ||
  (      2A60 )   00200000 || 6C6E7506 || 00706F6F || 4770BC30 || 00002AA8 || 2B050030 || 706F6F6C || D0002E03 ||
  (      2A80 )   CF40E73B || F847B500 || 4EC36D04 || F942F7FF || FED2F7FF || F114E01A || 1B644400 || CF4019A4 ||
  (      2AA0 )   F1A4442C || 47704400 || 00002AEA || 6C040030 || 00706F6F || D0002E03 || CF40E71F || F847B500 ||
  (      2AC0 )   4EB66D04 || F926F7FF || FEA9F7FF || F919F000 || 003148B0 || 6001CF40 || 6D04F847 || F7FF4EB0 ||
  (      2AE0 )   BD00F919 || 42AC3401 || 2B324770 || 00780000 || 006F6402 || F847B500 || 4EAA6D04 || F90AF7FF ||
  (      2B00 )   680148A4 || 6D04F847 || F847000E || 26006D04 || F7FF6007 || F847FE83 || 26036D04 || B500BD00 ||
  (      2B20 )   F82FF000 || B430E7EC || CF400034 || CF400035 || 2BCC4770 || 00780000 || 6F643F03 || F847B500 ||
  (      2B40 )   4E986D04 || F8E6F7FF || 6D04F847 || 26ACF244 || FAD0F7FF || 6801488F || 6D04F847 || F7FF000E ||
  (      2B60 )   3601FE9B || 6D04F847 || 488A2601 || F7FF6007 || F847FE55 || 26036D04 || B500BD00 || F801F000 ||
  (      2B80 )   B500E7E2 || 6D04F847 || 4630F24B || FAB2F7FF || 6D04F847 || F7FE2604 || 3B01FF89 || F847D008 ||
  (      2BA0 )   26056D04 || FF82F7FE || F0003B01 || BD00FC23 || 6D04F847 || F7FF2635 || F847FA9D || F64C6D04 ||
  (      2BC0 )   F7FF7640 || F000FA97 || BD00FC15 || 00002BE6 || 63040030 || 00657361 || 6D04F847 || F8472600 ||
  (      2BE0 )   26086D04 || 2BFC4770 || 00300000 || 666F3F03 || E009486D || 41B63E01 || 4770CF40 || 00002CA2 ||
  (      2C00 )   6F020078 || 48690066 || D0002E08 || CF40E675 || F847B500 || 00066D04 || F87CF7FF || FE3CF7FF ||
  (      2C20 )   603E6839 || 3601460E || 6D04F847 || F8472609 || F64C6D04 || F7FF7640 || BD00FA5D || 0030B500 ||
  (      2C40 )   3B01CF40 || F000B401 || BC01FBD5 || D0002E08 || CF40E653 || 6D04F847 || 21FF0006 || 42B14031 ||
  (      2C60 )   F44FD105 || 430E5138 || FA44F7FF || F7FEE7D6 || 2E00FE69 || D004CF40 || 4306484D || FA64F7FF ||
  (      2C80 )   F847E7CC || 26006D04 || FF10F7FE || 6D04F847 || 26B0F244 || FA2EF7FF || 0030E7C0 || 42B0CF40 ||
  (      2CA0 )   2CD84770 || 00300000 || 646E6505 || 2E09666F || E622D000 || B500CF40 || CF40B440 || FDECF7FF ||
  (      2CC0 )   603E6839 || F7FF460E || F847FE00 || BC406D04 || 6D04F847 || BD002608 || 00002D2A || 65070030 ||
  (      2CE0 )   6163646E || 2E086573 || E606D000 || B500CF40 || 6D04F847 || 7640F64C || F9FCF7FF || F801F000 ||
  (      2D00 )   B500BD00 || CF400030 || D00D2800 || 2101B403 || 29004031 || 3E01D003 || FDCDF7FF || F7FFE001 ||
  (      2D20 )   BC03FDC4 || E7EF3801 || 2D3EBD00 || 00000000 || 6B6F7405 || F8476E65 || 26206D04 || 2DB8E005 ||
  (      2D40 )   00000000 || 72617005 || B5106573 || FBFFF7FE || CF400031 || CF400030 || 68124A16 || 2E201884 ||
  (      2D60 )   4291D107 || 5C83D00F || D10242B3 || 18843201 || 4291E7F7 || 5C83D007 || 42B33201 || 1886D1F9 ||
  (      2D80 )   3E011B36 || 1886E001 || 3F041B36 || 4809603C || BD106002 || 2000000C || 00002A96 || 00002AE4 ||
  (      2DA0 )   00002A6C || 00002B26 || 00002BF4 || 00002C9A || F1B60F00 || 20004FE4 || 00002DF6 || 64050000 ||
  (      2DC0 )   74696769 || 681B4BCF || D30B3E30 || D30B2E0A || 2E0A3E07 || 2E24D306 || 3E20D306 || D3012E0A ||
  (      2DE0 )   D3012E24 || 47702600 || D2FB429E || 6D04F847 || 43F62600 || 2F004770 || 00000000 || 6D756E06 ||
  (      2E00 )   00726562 || 0031B53F || 1E70CF40 || 22012601 || 4BBCB404 || 2400681B || 29002500 || 3001D03C ||
  (      2E20 )   78023901 || D1042A2D || 2200B001 || B40443D2 || 2A23E7F3 || 230AD101 || 2A24E7EF || 2310D101 ||
  (      2E40 )   2A25E7EB || 2302D101 || 2A2EE7E7 || 2602D101 || 2A2CE7E3 || F847D036 || 00166D04 || FFB4F7FF ||
  (      2E60 )   CF402E00 || F847D02B || 00266D04 || 6D04F847 || F847002E || 001E6D04 || 6D04F847 || B40F2600 ||
  (      2E80 )   FA92F7FD || 0035BC0F || 0034CF40 || 2200CF40 || 415519A4 || E7C0CF40 || 2A00BC04 || 2200D504 ||
  (      2EA0 )   43ED43E4 || 41553401 || 00260033 || D0022B01 || 6D04F847 || F847002E || 001E6D04 || B001BD3F ||
  (      2EC0 )   BD3F2600 || 24000025 || 29002602 || 5C42D0E4 || 2A2E3901 || F847D0F9 || 00166D04 || FF74F7FF ||
  (      2EE0 )   CF402E00 || 3F04D0EB || F847603C || 001E6D04 || F7FDB40F || BC0FFB08 || CF400034 || E7E4CF40 ||
  (      2F00 )   00002F22 || 2E060000 || 69676964 || 2E0A0074 || 3630D201 || 2E244770 || 3637D201 || 26234770 ||
  (      2F20 )   2F584770 || 00000000 || 6C6F6804 || 00330064 || 4875CF40 || 293F7801 || 3101D20D || 18407001 ||
  (      2F40 )   D0072901 || 78023801 || 70023001 || 39013801 || D1F72901 || 47707003 || 00002F78 || 68050000 ||
  (      2F60 )   3C646C6F || CF400033 || 78014867 || D202293F || 70013101 || 47705443 || 00002F90 || 73040000 ||
  (      2F80 )   006E6769 || D4012E00 || 4770CF40 || E7CE262D || 00002FA4 || 23020000 || 485B003E || 30017806 ||
  (      2FA0 )   47706038 || 00002FBC || 66030000 || B5105323 || F0002420 || 3C01F808 || BD10D1FB || 00002FDE ||
  (      2FC0 )   66020000 || B5000023 || 6D04F847 || 68364E4D || F9D6F7FD || FF9BF7FF || FFC4F7FF || 2FFABD00 ||
  (      2FE0 )   00000000 || 00532302 || F000B500 || 2E00F80A || 6838D1FB || D1F82800 || 3026BD00 || 00000000 ||
  (      3000 )   B5002301 || 6D04F847 || 68364E3E || 6D04F847 || F7FD2600 || F7FDFA97 || CF40F8C9 || FF77F7FF ||
  (      3020 )   FF85F7FF || 3038BD00 || 00000000 || 00233C02 || 21004835 || 47707001 || 0000304A || 66020000 ||
  (      3040 )   F847002E || 26206D04 || 3098E004 || 00000000 || 6E2E6603 || B410B500 || CF400034 || FC01F7FD ||
  (      3060 )   F957F7FD || 6D04F847 || F7FF2600 || F7FFFFE1 || CF40FFBB || F7FF262C || 2C00FF75 || F7FFD003 ||
  (      3080 )   3C01FFA2 || BC10D1FB || F7FFCF40 || F847FF7B || F8476D04 || E01C6D04 || 000030AE || 75030000 ||
  (      30A0 )   B5002E64 || FFC4F7FF || FF9EF7FF || 30E0E011 || 00000000 || 002E6402 || F7FDB500 || F7FDFBD2 ||
  (      30C0 )   F7FFF928 || F7FFFFB5 || F7FDFF8F || F7FFFBD4 || F7FFFF59 || F7FEFF62 || F7FEFB4C || BD00FA9D ||
  (      30E0 )   000030F2 || 75020000 || F847002E || 26006D04 || 310CE7D7 || 00000000 || F8472E01 || 17F66D04 ||
  (      3100 )   0000E7DA || 20004FFC || 20000028 || 00003154 || 65080000 || 756C6176 || 00657461 || F7FEB500 ||
  (      3120 )   CF01FA16 || B440B401 || 48D5CF40 || B4026801 || 60012100 || F9FEF7FE || F814F000 || BC0248D0 ||
  (      3140 )   F8476001 || BC406D04 || 3F04BC01 || F7FE6038 || BD00F9F1 || 0000341A || 69090000 || 7265746E ||
  (      3160 )   74657270 || 48C7B530 || D90B4287 || FAA5F7FE || 61745310 || 75206B63 || 7265646E || 776F6C66 ||
  (      3180 )   E15E000A || 428748C0 || F7FED20A || 530FFA96 || 6B636174 || 65766F20 || 6F6C6672 || E1500A77 ||
  (      31A0 )   68254CBA || D1012D00 || 6025003D || FDC3F7FF || D1022E00 || CF403704 || 6838BD30 || 6D04F847 ||
  (      31C0 )   60383F04 || FA78F7FF || CF400031 || CF400032 || D1132A00 || 00316838 || FE14F7FF || CF400032 ||
  (      31E0 )   D1C02A00 || FAC9F7FE || FA67F7FE || 6F6E200C || 6F662074 || 2E646E75 || E122000A || 681B4BA4 ||
  (      3200 )   D11D2B00 || 60252500 || 400B2330 || D10E2B30 || FAAFF7FE || FA51F7FE || 73692012 || 6D6F6320 ||
  (      3220 )   656C6970 || 6C6E6F2D || 000A2E79 || 3704E109 || F847CF40 || 00166D04 || FE0AF7FE || FF93F7FF ||
  (      3240 )   CF403704 || 40082080 || 1BEBD10E || 2040089B || D00F4008 || 40082008 || 2B00D002 || E01DD000 ||
  (      3260 )   4008200F || D3054283 || 6D04F847 || F7FE0016 || E778FDEF || F8BEF000 || 6D04F847 || 22100016 ||
  (      3280 )   D002400A || FDE4F7FE || 2220E76D || D002400A || FD40F7FE || F7FEE767 || E764FC66 || 40012007 ||
  (      32A0 )   F7FE0010 || 2901FD4E || 2B01D11F || 21FFD1DC || 42B14031 || 8840D104 || F7FE4306 || E752FF1B ||
  (      32C0 )   FB40F7FE || CF402E00 || 6840D004 || F7FE4306 || E748FF3B || 6D04F847 || F7FE2600 || F847FBE7 ||
  (      32E0 )   88066D04 || FF06F7FE || 2902E73D || 2B01D102 || E7EFD1BA || D1272903 || D1B52B01 || 403121FF ||
  (      3300 )   D10B42B1 || 5178F44F || F7FE430E || 3204FEF3 || 6D04F847 || F7FE0016 || E724FCFD || FB12F7FE ||
  (      3320 )   CF402E00 || 495BD004 || F7FE430E || E7EEFF0D || 6D04F847 || F7FE2600 || 3202FBB9 || 6D04F847 ||
  (      3340 )   F7FE0016 || E70EFCE7 || D1182904 || D18B2B01 || CF400033 || D1002B00 || 221FE705 || 429A401A ||
  (      3360 )   F847D005 || 88466D04 || FEC4F7FE || F847E6FB || 88066D04 || 431E019B || FEBCF7FE || 2905E6F3 ||
  (      3380 )   2B01D124 || F847D110 || 26006D04 || FB8EF7FE || 6D04F847 || F7FE0006 || F847FCBD || F64C6D04 ||
  (      33A0 )   F7FE7640 || E6DEFEA7 || 6D04F847 || F7FE2600 || F847FB7D || 26016D04 || FB78F7FE || FCC1F7FE ||
  (      33C0 )   6D04F847 || F7FE0006 || E6CCFCA5 || D10E2906 || F47F2B01 || F7FEAF49 || 2E00FAB5 || F43FCF40 ||
  (      33E0 )   F8D0AF79 || 43060002 || FEAEF7FE || 3001E6BB || E6B84780 || 2B00B500 || 3B01D00C || 6D04F847 ||
  (      3400 )   F857001E || F7FE6026 || 2B00FBE3 || 3D04D1F5 || CF40002F || 60252500 || 3436BD00 || 00810000 ||
  (      3420 )   6F6F6809 || 75712D6B || F8477469 || 4E1A6D04 || 346A4770 || 34AC0000 || 00000000 || 69757104 ||
  (      3440 )   F8DF0074 || 4F0FD058 || 210A4815 || 48106001 || 60012100 || 6001480D || 60014809 || 60014811 ||
  (      3460 )   60414911 || 6800480C || F7FE4687 || F7FFF87E || F7FEFE79 || 2005F922 || 0A2E6B6F || 0000E7F5 ||
  (      3480 )   20004FE4 || 20000230 || 20000130 || 20000008 || 20004FD8 || F1B60600 || 20004FD4 || 20000330 ||
  (      34A0 )   20004FFC || 20004FDC || 20000068 || 000034C6 || 65050000 || 3F746E69 || 6D04F847 || 8610F3EF ||
  (      34C0 )   41B63E01 || 34D64770 || 00200000 || 6E696504 || B6620074 || 34E64770 || 00200000 || 6E696404 ||
  (      34E0 )   B6720074 || 34FC4770 || 00200000 || 73706904 || F8470072 || F3EF6D04 || 47708605 || 00003508 ||
  (      3500 )   6E030000 || 4770706F || 0000354A || 75090000 || 6E61686E || 64656C64 || F7FEB500 || 5514F8CE ||
  (      3520 )   6E61686E || 64656C64 || 746E4920 || 75727265 || 00207470 || 6D04F847 || 8605F3EF || F930F7FE ||
  (      3540 )   F8BBF7FE || 000A2102 || 3560BD00 || 00000000 || 73657205 || F8DF7465 || F8DF0754 || 60011754 ||
  (      3560 )   0000358C || 690B0081 || 732D7172 || 69747379 || F8476B63 || F8DF6D04 || 4770673C || 00003518 ||
  (      3580 )   70D0F644 || 0000F2C2 || 46876800 || 000035B6 || 69090081 || 662D7172 || 746C7561 || 6D04F847 ||
  (      35A0 )   6714F8DF || 35184770 || F6440000 || F2C270CC || 68000000 || 35E64687 || 00810000 || 7172690E ||
  (      35C0 )   6C6F632D || 7463656C || 006E6F69 || 6D04F847 || 66E8F8DF || 35184770 || F6440000 || F2C270C8 ||
  (      35E0 )   68000000 || 360E4687 || 00810000 || 71726907 || 6374722D || 6D04F847 || 66C4F8DF || 35184770 ||
  (      3600 )   F6440000 || F2C270C4 || 68000000 || 36384687 || 00810000 || 71726909 || 7478652D || F8473069 ||
  (      3620 )   F8DF6D04 || 477066A0 || 00003518 || 70C0F644 || 0000F2C2 || 46876800 || 00003662 || 69090081 ||
  (      3640 )   652D7172 || 31697478 || 6D04F847 || 6678F8DF || 35184770 || F6440000 || F2C270BC || 68000000 ||
  (      3660 )   368C4687 || 00810000 || 71726909 || 7478652D || F8473269 || F8DF6D04 || 47706654 || 00003518 ||
  (      3680 )   70B8F644 || 0000F2C2 || 46876800 || 000036B6 || 69090081 || 652D7172 || 33697478 || 6D04F847 ||
  (      36A0 )   662CF8DF || 35184770 || F6440000 || F2C270B4 || 68000000 || 36E04687 || 00810000 || 71726909 ||
  (      36C0 )   7478652D || F8473469 || F8DF6D04 || 47706608 || 00003518 || 70B0F644 || 0000F2C2 || 46876800 ||
  (      36E0 )   00003708 || 69070081 || 612D7172 || F8476364 || F8DF6D04 || 477065E4 || 00003518 || 70ACF644 ||
  (      3700 )   0000F2C2 || 46876800 || 00003732 || 69090081 || 652D7172 || 35697478 || 6D04F847 || 65BCF8DF ||
  (      3720 )   35184770 || F6440000 || F2C270A8 || 68000000 || 375E4687 || 00810000 || 7172690B || 6D69742D ||
  (      3740 )   6B726231 || 6D04F847 || 6594F8DF || 35184770 || F6440000 || F2C270A4 || 68000000 || 378A4687 ||
  (      3760 )   00810000 || 7172690A || 6D69742D || 00707531 || 6D04F847 || 656CF8DF || 35184770 || F6440000 ||
  (      3780 )   F2C270A0 || 68000000 || 37B64687 || 00810000 || 7172690B || 6D69742D || 67727431 || 6D04F847 ||
  (      37A0 )   6544F8DF || 35184770 || F6440000 || F2C2709C || 68000000 || 37E24687 || 00810000 || 7172690A ||
  (      37C0 )   6D69742D || 00636331 || 6D04F847 || 651CF8DF || 35184770 || F6440000 || F2C27098 || 68000000 ||
  (      37E0 )   380C4687 || 00810000 || 71726908 || 6D69742D || F8470032 || F8DF6D04 || 477064F8 || 00003518 ||
  (      3800 )   7094F644 || 0000F2C2 || 46876800 || 00003836 || 69080081 || 742D7172 || 00336D69 || 6D04F847 ||
  (      3820 )   64D0F8DF || 35184770 || F6440000 || F2C27090 || 68000000 || 38604687 || 00810000 || 71726908 ||
  (      3840 )   6D69742D || F8470034 || F8DF6D04 || 477064AC || 00003518 || 708CF644 || 0000F2C2 || 46876800 ||
  (      3860 )   0000388C || 690A0081 || 692D7172 || 65316332 || F8470076 || F8DF6D04 || 47706484 || 00003518 ||
  (      3880 )   7088F644 || 0000F2C2 || 46876800 || 000038B8 || 690A0081 || 692D7172 || 65316332 || F8470072 ||
  (      38A0 )   F8DF6D04 || 4770645C || 00003518 || 7084F644 || 0000F2C2 || 46876800 || 000038E4 || 690A0081 ||
  (      38C0 )   692D7172 || 65326332 || F8470076 || F8DF6D04 || 47706434 || 00003518 || 7080F644 || 0000F2C2 ||
  (      38E0 )   46876800 || 00003910 || 690A0081 || 692D7172 || 65326332 || F8470072 || F8DF6D04 || 4770640C ||
  (      3900 )   00003518 || 707CF644 || 0000F2C2 || 46876800 || 00003938 || 69080081 || 732D7172 || 00316970 ||
  (      3920 )   6D04F847 || 47704EF9 || 00003518 || 7078F644 || 0000F2C2 || 46876800 || 00003960 || 69080081 ||
  (      3940 )   732D7172 || 00326970 || 6D04F847 || 47704EF0 || 00003518 || 7074F644 || 0000F2C2 || 46876800 ||
  (      3960 )   0000398A || 690A0081 || 752D7172 || 74726173 || F8470031 || 4EE76D04 || 35184770 || F6440000 ||
  (      3980 )   F2C27070 || 68000000 || 39B44687 || 00810000 || 7172690A || 6173752D || 00327472 || 6D04F847 ||
  (      39A0 )   47704EDD || 00003518 || 706CF644 || 0000F2C2 || 46876800 || 000039DE || 690A0081 || 752D7172 ||
  (      39C0 )   74726173 || F8470033 || 4ED46D04 || 35184770 || F6440000 || F2C27068 || 68000000 || 3A084687 ||
  (      39E0 )   00810000 || 7172690A || 7478652D || 00303169 || 6D04F847 || 47704ECA || 00003518 || 7064F644 ||
  (      3A00 )   0000F2C2 || 46876800 || 00003A34 || 690C0081 || 722D7172 || 6C616374 || 006D7261 || 6D04F847 ||
  (      3A20 )   47704EC0 || 00003518 || 7060F644 || 0000F2C2 || 46876800 || 00003A5E || 690B0081 || 752D7172 ||
  (      3A40 )   6B776273 || F8477075 || 4EB76D04 || 35184770 || F6440000 || F2C2705C || 68000000 || 3A864687 ||
  (      3A60 )   00810000 || 71726908 || 6D69742D || F8470035 || 4EAE6D04 || 35184770 || F6440000 || F2C27058 ||
  (      3A80 )   68000000 || 3AAE4687 || 00810000 || 71726908 || 6970732D || F8470033 || 4EA56D04 || 35184770 ||
  (      3AA0 )   F6440000 || F2C27054 || 68000000 || 3AD64687 || 00810000 || 71726909 || 7261752D || F8473474 ||
  (      3AC0 )   4E9C6D04 || 35184770 || F6440000 || F2C27050 || 68000000 || 3AFE4687 || 00810000 || 71726909 ||
  (      3AE0 )   7261752D || F8473574 || 4E936D04 || 35184770 || F6440000 || F2C2704C || 68000000 || 3B264687 ||
  (      3B00 )   00810000 || 71726908 || 6D69742D || F8470036 || 4E8A6D04 || 35184770 || F6440000 || F2C27048 ||
  (      3B20 )   68000000 || 3B4E4687 || 00810000 || 71726908 || 6D69742D || F8470037 || 4E816D04 || 35184770 ||
  (      3B40 )   F6440000 || F2C27044 || 68000000 || 3B764687 || 00810000 || 71726909 || 6273752D || F8477366 ||
  (      3B60 )   4E786D04 || 35184770 || F6440000 || F2C27040 || 68000000 || 40004687 || FFFF0000 || 2D2D2D18 ||
  (      3B80 )   616C4620 || 44206873 || 69746369 || 72616E6F || 2D2D2079 || F7FD002D || 486BFC28 || 4F6B4685 ||
  (      3BA0 )   F04F262A || 49685000 || 48696001 || 60014969 || 6D04F847 || 4D684E67 || F64F88B1 || 429973FF ||
  (      3BC0 )   F44FD025 || 400B7380 || 1DB0D00A || FD65F7FE || F8B7F7FE || 88408803 || 43030400 || E0161AED ||
  (      3BE0 )   400B2380 || 230FD013 || 00894019 || 1DB01A6D || FD53F7FE || F8A5F7FE || 6D04F847 || F8470006 ||
  (      3C00 )   002E6D04 || 6D04F847 || F7FC000E || F7FEFFD9 || 0030FD21 || D0CFCF40 || 60064850 || 4850CF40 ||
  (      3C20 )   F44F6005 || F44F3080 || F64F4180 || 428872FF || 3802D004 || 42938803 || 3002D0F9 || 60084949 ||
  (      3C40 )   FD3BF7FD || 63654D37 || 70736972 || 6574532D || 72616C6C || 32207369 || 362E332E || 726F6620 ||
  (      3C60 )   4D545320 || 31463233 || 62203330 || 614D2079 || 69687474 || 4B207361 || 0A68636F || 2100483A ||
  (      3C80 )   F8476001 || 4E396D04 || 6D04F847 || F7FE2604 || CF40FD13 || D0032E00 || F8DAF7FE || BBE2F7FF ||
  (      3CA0 )   F7FFCF40 || 6E69BBCE || 00007469 || E000ED0C || 05FA0004 || 20004FD0 || 20004FCC || 20004FC8 ||
  (      3CC0 )   20004FC4 || 20004FC0 || 20004FBC || 20004FB8 || 20004FB4 || 20004FB0 || 20004FAC || 20004FA8 ||
  (      3CE0 )   20004FA4 || 20004FA0 || 20004F9C || 20004F98 || 20004F94 || 20004F90 || 20004F8C || 20004F88 ||
  (      3D00 )   20004F84 || 20004F80 || 20004F7C || 20004F78 || 20004F74 || 20004F70 || 20004F6C || 20004F68 ||
  (      3D20 )   20004F64 || 20004F60 || 20004F5C || 20004F58 || 20004F54 || 20004F50 || 20004F4C || 20004F48 ||
  (      3D40 )   20004F44 || 20004F40 || 20000330 || 20000230 || 20000004 || 00000150 || 20005000 || 2000001C ||
  (      3D60 )   20000024 || 20000018 || 20000008 || 00003CA6 ||
}insert
#then

\  (  000083F8  FC F7 C2 F9 40 40 )                  DOLIT   00004040
\ 4000 4500  100 CMOVE'  4540  '' COLD ( 83FC )  10 +. 32!'   \ 4540 20002100 A8 CMOVE
  4040 4540   A8 CMOVE'  4540  '' COLD ( 83FC )  10 +. 32!'   \ 4540 20002100 A8 CMOVE
  4000  500   FF  FILL'
  '' Reset_Handler(rom) 1+.    4  32!'   \ starting from holi eForth with initDevices included.

stm32f401mecrispForth?  @.     stm32f401eForth?  @.  or.
#if
  \ *******************************************************************************
                                   t:  pause        ret'                                       \ A0 / 1A1      160 / 417
  (  000024B2  3D 48             )                \ R0=20017FE8                                 \ (000025A8)=20017FE8
  (  000024B4  00 68             )                \ R0=(R0+0)
  (  000024B6  87 46             )                \ RF=R0
                                                  \ -ret'
  \ *******************************************************************************
                                   t:  serial-emit?                                    \ A3 / 1A1      163 / 417
  (  0000251E  00 B5             )                  push.LR
  (  00002520  FF F7 C7 FF       )                  pause                                         \      24B2
  (  00002524  47 F8 04 6D       )                  {dup}...........sp-4,s=t
  (  00002528  00 26             )                  R6=0
  (  0000252A  21 48             )                  R0=40004400                                 \ (000025B0)=40004400
  (  0000252C  01 68             )                  R1=(R0+0)
  (  0000252E  80 20             )                  R0=80
  (  00002530  01 40             )                  R1nR0
  (  00002532  00 D0             )       if'<> \ z=1? eq?            \ 00002532 --> 00002536 ******************************
  (  00002534  F6 43             )                  {invert}
                                         then'                       \ 00002532 --> 00002536 ******************************
  (  00002536  00 BD             )                  ret
  \ *******************************************************************************
                                   t:  serial-emit                                     \ A1 / 1A1      161 / 417
  (  000024CE  00 B5             )                  push.LR
                                         begin'                      \ 000024D8 --> 000024D0 ----------------
  (  000024D0  00 F0 25 F8       )                  serial-emit?                                  \      251E
  (  000024D4  00 2E             )                  T:0
  (  000024D6  40 CF             )                  {drop}
  (  000024D8  FA D0             )       until'<> \ z=1? eq?         \ 000024D8 --> 000024D0 ----------------
  (  000024DA  34 4A             )                  R2=40004404                                 \ (000025AC)=40004404
  (  000024DC  16 70             )            2 0 6 (R+#)=R,b   \ (R2+0)=R6,b
  (  000024DE  40 CF             )                  {drop}
  (  000024E0  00 BD             )                  ret

  \ *******************************************************************************
comment:
                                   eF:  TF.COLD                                         \ 22E / 235     558 / 565
  (  0000E2C4  0D 48             )                  R0=20000300                                 \ (0000E2FC)=20000300
  (  0000E2C6  85 46             )                  RD=R0
  (  0000E2C8  0D 48             )                  R0=20000378                                 \ (0000E300)=20000378
  (  0000E2CA  07 46             )                  R7=R0
  (  0000E2CC  04 3F             )                  R7-4
  (  0000E2CE  3E 60             )                  (R7)=R6                                                   \
  (  0000E2D0  55 26             )                  R6=55
  (  0000E2D2  FE F7 AD FF       )                  TX!(STM32F103)                                \      D230
  (  0000E2D6  04 3F             )                  R7-4
  (  0000E2D8  3E 60             )                  (R7)=R6                                                   \
  (  0000E2DA  56 26             )                  R6=56
  (  0000E2DC  FE F7 A8 FF       )                  TX!(STM32F103)                                \      D230
  (  0000E2E0  FA F7 34 FF       )                  UART.SWITCH.STM32F429.EF                      \      914C
  (  0000E2E4  FB F7 EC FD       )                  HEX                                           \      9EC0
                                         BEGIN                       \ 0000E2F0 --> 0000E2E8 =======
  (  0000E2E8  FD F7 44 FC       )                  GET.COMMAND                                   \      BB74
  (  0000E2EC  FD F7 6A FC       )                  EXECUTE.COMMAND                               \      BBC4
  (  0000E2F0  FA F7 9E FB E8 E2 )       AGAIN    \ branch  0000E2E8 \ 0000E2F0 --> 0000E2E8 =======
  (  0000E2F8  00 BD             )                  pop     { pc, }
comment;
  \ *******************************************************************************
                                   t:  serial-key?  ( -- f )           \ key?(401)                        \ A4 / 1A1      164 / 417
  (  0000254A  00 B5             )                  push.LR
  (  0000254C  FF F7 B1 FF       )                  pause                                         \      24B2
  (  00002550  47 F8 04 6D       )                  {dup}...........sp-4,s=t
  (  00002554  00 26             )                  R6=0
  (  00002556  16 48             )                  R0=40004400                                 \ (000025B0)=40004400
  (  00002558  01 68             )                  R1=(R0+0)
  (  0000255A  20 20             )                  R0=20
  (  0000255C  01 40             )                  R1nR0
  (  0000255E  00 D0             )       if'<> \ z=1? eq?            \ 0000255E --> 00002562 ===========
  (  00002560  F6 43             )                  {invert}
                                         then'                       \ 0000255E --> 00002562 ===========
  (  00002562  00 BD             )                  ret
  \ *******************************************************************************
                                   t:  serial-key                                      \ A2 / 1A1      162 / 417
  (  000024F4  00 B5             )                  push.LR
                                         begin'                      \ 000024FE --> 000024F6 -------------------------------
  (  000024F6  00 F0 28 F8       )                  serial-key?                                   \      254A
  (  000024FA  00 2E             )                  T:0
  (  000024FC  40 CF             )                  {drop}
  (  000024FE  FA D0             )       until'<> \ z=1? eq?         \ 000024FE --> 000024F6 -------------------------------
  (  00002500  47 F8 04 6D       )                  {dup}...........sp-4,s=t
  (  00002504  29 4A             )                  R2=40004404                                 \ (000025AC)=40004404
  (  00002506  16 78             )                  7816 16,'  \ 6 2 0 R=(R+#)b   \ R6=(R2+0)b
  (  00002508  00 BD             )                  ret
  \ *******************************************************************************

insert{  '' TF.COLD    d2  c4  -.  +.  org    serial-emit
         '' TF.COLD    dc  c4  -.  +.  org    serial-emit
}insert

                                   t:  UNLOCK   \ (40022004)=45670123   (40022004)=CDEF89AB   ret'
  (  200018B4  21 48             )                  R0=400223C0          \ GPIOI_BASE           \ (2000193C)=40022000
  (  200018B6  22 4C             )                  R4=45670123                                 \ (20001940)=45670123
  (  200018B8  44 60             )                  (R0+4)=R4
  (  200018BA  22 4C             )                  R4=CDEF89AB                                 \ (20001944)=CDEF89AB
  (  200018BC  44 60             )                  (R0+4)=R4
  (  200018BE  70 47             )                  ret'  \ jmp_RE

                                   t:  reset_handler(401)  ( -- )
  (  00002564  13 49             )                  R1=40023830                                 \ (000025B4)=40023830
  (  00002566  4F F0 9F 00       )                  R0=9F
  (  0000256A  08 60             )                  (R1+0)=R0
  (  0000256C  12 49             )                  R1=40020000                                 \ (000025B8)=40020000
  (  0000256E  08 68 50 F0 A0 00 )                  (R1+0)o0A0
  (  00002576  11 49             )                  R1=40020020                                 \ (000025BC)=40020020
  (  00002578  4F F4 EE 40       )                  R0=7700
  (  0000257C  08 60             )                  (R1+0)=R0
  (  0000257E  10 49             )                  R1=40023840                                 \ (000025C0)=40023840
  (  00002580  4F F4 00 30       )                  R0=20000
  (  00002584  08 60             )                  (R1+0)=R0
  (  00002586  0F 49             )                  R1=40004408                                 \ (000025C4)=40004408
  (  00002588  8B 20             )                  R0=8B
  (  0000258A  08 60             )                  (R1+0)=R0
  (  0000258C  0E 49             )                  R1=4000440C                                 \ (000025C8)=4000440C
  (  0000258E  42 F2 0C 00       )                  R0=200C
  (  00002592  08 60             )                  (R1+0)=R0
  (  00002594  70 47             )                \ ret'
                                                  \  UNLOCK
                                                  ( TF.COLD )   cold  -ret'

  \ *******************************************************************************
                                   t:  serial-?key  ( -- char -1 / 0 )   \ ?rx(401)                               \ A4 / 1A1      164 / 417
  (  0000254A  00 B5             )                  push.LR
  (  0000254C  FF F7 B1 FF       )                  pause                                         \      24B2
  (  00002550  47 F8 04 6D       )                  {dup}...........sp-4,s=t
  (  00002554  00 26             )                  R6=0
  (  00002556  16 48             )                  R0=40004400                                 \ (000025B0)=40004400
  (  00002558  01 68             )                  R1=(R0+0)
  (  0000255A  20 20             )                  R0=20
  (  0000255C  01 40             )                  R1nR0
  (  0000255E  00 D0             )       if'<> \ z=1? eq?            \ 0000255E --> 00002562 ===========
  (  00002560  F6 43             )                  {invert}

  (  00002500  47 F8 04 6D       )                  {dup}...........sp-4,s=t
  (  00002504  29 4A             )                  R2=40004404                                 \ (000025AC)=40004404
  (  00002506  16 78             )                  7816 16,'  \ 6 2 0 R=(R+#)b   \ R6=(R2+0)b
                                                    {swap}

                                         then'                       \ 0000255E --> 00002562 ===========
  (  00002562  00 BD             )                  ret

  insert{   \  include  stm32f401org1.f
  }insert

COMMENT:
  insert{     include  STM32F401MECRISPFORTH-IMAGE.F          10 361e c!'  ( 401-     )  \ decimal --> hex
           \  include  STM32F401MECRISPFORTH-ra-IMAGE.F       0a 4820 c!'  ( 401-ra   )  \ decimal --> hex
           \  include  STM32F401MECRISPFORTH-racd-IMAGE.F     0a ???? c!'  ( 401-racd )  \ decimal --> hex
           \  4  org        '' reset_handler(401)  1+.  32,'  ( starting from eForth )
  }insert

  include  default-user.variable4.f
        \  20000378  ( 2000028c )  default.USER.variable(4040)  @.   10 +. 32!'   \ sp0    \ 103 eForth
        \  20000300  ( 2000038c )  default.USER.variable(4040)  @.   14 +. 32!'   \ rp0    \ 103 eForth
COMMENT;

\ ''  tx!(stm32f103)   '' I/O  6 +.   4 +.    32!'    \  ?????  2022.5.1
\ ''  ?rx(stm32f103)   '' I/O  6 +. ( 4 +. )  32!'    \  ?????  2022.5.1

  ''  serial-emit      '' I/O  6 +.   4 +.    32!'    \  ?????  2022.5.1
\ ''  serial-key       '' I/O  6 +. ( 4 +. )  32!'    \  ?????  2022.5.1
\ ''  serial-key?      '' I/O  6 +. ( 4 +. )  32!'    \  ?????  2022.5.1    \ ( -- f )
  ''  serial-?key      '' I/O  6 +. ( 4 +. )  32!'    \  ?????  2022.5.1    \ ( -- char -1 / 0 )

  ''  serial-emit   '' UART.SWITCH.STM32F429.EF  20 +. ( 916C )  32!'
\ ''  serial-key    '' UART.SWITCH.STM32F429.EF  24 +. ( 9170 )  32!'
  ''  serial-?key   '' UART.SWITCH.STM32F429.EF  24 +. ( 9170 )  32!'

\ ''  reset_handler(rom)  1+.  4  32!'   \ 103eForth
\ ''  reset_handler(401)  1+.  4  32!'   \ 401eForth     \ ??????

\  10  ''  quit  8 +.  c!'  ( default base )

       insert{    include  stm32f401org1.f
       }insert
#then

zeptoForth407?  @.
#if      :.   t:      t:(zeptoForth)      ;.
         new  include  ZEPTOFORTH_KERNEL-0.35.1.I.org.f    7048  last' !.
      \  :.   words'  words'(zeptoForth)  ;.
         :.   see     see(zeptoForth)     ;.
         :.   t:      t:(zeptoForth)      ;.
  zeptoForth746?  @
  #if    00200000 ram.start  !.   00200ffff  ram.end  !. 00207304  last'  !.
         include  ZEPTOFORTH_KERNEL-0.36.0.Iorg.f  \  0  00200000  10000  cmove'
         :.   words'  words'(zeptoForth)746  ;.
  #else  :.   words'  words'(zeptoForth)     ;.
  #then
#then

stm32f401eForth?  @.
#if        '' serial-?key 0c -.  40D0  4040  -.  4540  +.  32!'   \ ????
           '' serial-?key 0c -.  40D4  4040  -.  4540  +.  32!'   \ ????
#then

:.  :  t:  push.LR  ;.
:.  ;  ret   ;.

:.  ahead   ahead'  ;.
:.  if      t:0  {drop}  if'z=0  ;.
:.  then    then'   ;.
:.  else    else'   ;.
:.  begin   begin'  ;.
:.  until   t:0  {drop}  until'z=0  ;.
:.  again   again'  ;.
:.  while   if      ;.
:.  repeat  swap.  again'  then'  ;.


\   LAST'(ADJACENT)  @.   40D0  4040  -.  4040  +.  32!'   \ ????
\   LAST'(ADJACENT)  @.   40D4  4040  -.  4040  +.  32!'   \ ????

\   '' serial-?key 0c -.  40D0  4040  -.  4540  +.  32!'   \ ????
\   '' serial-?key 0c -.  40D4  4040  -.  4540  +.  32!'   \ ????


-cr   1.HEX    help'''      :. OO OO5  ;.
inf      cr.  .(. type  pctf to execute tinyForth+fake-ASYST )  CR.   -cr

\s

insert{  A448  TF.COLD  }insert     1.hex
20002100 20003100 A8 CMOVE
: VV 20002100 A8 0 DO DUP I + C@ OVER I + 1000 + C@ = NOT IF I . THEN LOOP ;


: VV 20002100 A8 0 DO DUP I + C@  I   C@ = NOT IF I . THEN LOOP ;

20002100 20004100 A8 CMOVE
: VV 20002100 A8 0 DO DUP I + C@ OVER I + 2000 + C@ = NOT IF I . THEN LOOP ;

: CMOVE'   0 DO OVER I + C@ OVER I + C! LOOP ;     ( from to len -- )



A2C4 EXECUTE  ( tf.cold )           d3746  b

d' 4 b' @  b' 1-  b' execute     oo
\ 83EC EXECUTE  ( cold )
  00004540  20002100  000000A8  move \ 5C08 EXECUTE ( cmove )
  00004540  20002100  000000A8         5C08 EXECUTE ( cmove )

  00004540  20003100  000000A8         5C08 EXECUTE ( cmove )

78EC  EXECUTE ( 'boot )  50CC EXECUTE ( @EXECUTE )
\ 78BC  EXECUTE ( hi )
  6D18  EXECUTE ( PRESET )   \ ????
\ PRESET    \ sp0.@.sp!.'interpret..#tib.cell+.!

503C  EXECUTE ( FORTH )   4FB4 EXECUTE ( CONTEXT )  DUP  4FCC EXECUTE ( CURRENT ) 2!

\ 7354  EXECUTE ( OVERT )   \ last.@.current.@.!                   \      7354

500C  EXECUTE ( last ) @  4FCC EXECUTE ( current ) @  !    6E04  EXECUTE ( QUIT )






4540 20002100 A8 move
78EC EXECUTE 50cc EXECUTE
\ 78BC  EXECUTE ( hi )
  6D18  EXECUTE ( PRESET )   \ ????
\ PRESET    \ sp0.@.sp!.'interpret..#tib.cell+.!

503C EXECUTE 4FB4 EXECUTE DUP 4FCC EXECUTE 2! 500C EXECUTE @ 4FCC EXECUTE @ ! 6E04 EXECUTE



A2C4 EXECUTE  ( tf.cold )           d3746  b

d' 4 b' @  b' 1-  b' execute     oo
\ 83EC EXECUTE  ( cold )
00004540  20002100  000000A8  move \ 5C08 EXECUTE ( cmove )


78EC EXECUTE 50cc EXECUTE 503C EXECUTE 4FB4 EXECUTE DUP 4FCC EXECUTE 2! 500C EXECUTE @ 4FCC EXECUTE @ ! 6E04 EXECUTE






20002100  94 42  0  0 1C 85  0  0  0  0  0  0  0  0  0  0  _B______________


20002110  30  2  0 20 30  3  0 20 80 A4  0  0 70 A3  0  0  0__ 0__ _$__p#__
                                  *********** ***********
                                  serial-?key serial-emit
20002120  2C 6A  0  0 CC 69  0  0 20 51  0  0 6C 6C  0  0  ,j__Li__ Q__ll__


20002130  10  0  0  0  1  0  0  0  0  0  0  0 11  0  0  0  ________________


20002140  11  0  0  0 80 4E  0 20  0  0  0  0 F8 6B  0  0  _____N_ ____xk__


20002150  C0 5F  0  0 FF 10  0 20 24  3  0 20 94 21  0 20  @___~__ $__ _!_
                      *********** *********** ***********

20002160   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  ________________


20002170   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  ________________


20002180  94 21  0 20 94 21  0 20  0 10  0 20  0 10  0 20  _!_ _!_ ___ ___
          *********** ***********

20002190  74 A4  0  0 74 A4  0  0  0  0  0  0  0  0  0  0  t$__t$__________




    4540  94 42  0  0 1C 85  0  0  0  0  0  0  0  0  0  0  _B______________


    4550  30  2  0 20 30  3  0 20 F8 91  0  0 30 92  0  0  0__ 0__ x___0___
                                  *********** ***********
                               ?rx(stm32f103) tx!(stm32f103)
    4560  2C 6A  0  0 CC 69  0  0 20 51  0  0 6C 6C  0  0  ,j__Li__ Q__ll__


    4570  10  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  ________________


    4580   0  0  0  0 80 4E  0 20  0  0  0  0 F8 6B  0  0  _____N_ ____xk__


    4590  C0 5F  0  0  0  0  0  0  0  0  0  0  0  0  0  0  @_______________


    45A0   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  ________________


    45B0   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  ________________


    45C0   0  0  0  0  0  0  0  0  0 10  0 20  0 10  0 20  ___________ ___


    45D0  74 A4  0  0 74 A4  0  0  0  0  0  0  0  0  0  0  t$__t$__________








t: PX=0  ( port bit -- )  nip>R1  R1<<0F  R0=42210240  R0+R1  T<<2  R0+T  R1=1  (R0)=R1  {drop}  ret'
t: PX=1  ( port bit -- )  nip>R1  R1<<0F  R0=42210200  R0+R1  T<<2  R0+T  R1=1  (R0)=R1  {drop}  ret'

t: PC13=0   ( -- )  2 ...  0D ... PX=0  ret'
t: PC13=1   ( -- )  2 ...  0D ... PX=1  ret'

 : PC.13=0  ( -- )  2 ...  0D ... PX=0  ;
 : PC.13=1  ( -- )  2 ...  0D ... PX=1  ;
  \ *************************************************************************************************************
  \ *************************************************************************************************************
                                   t:  PA0=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA1=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+4)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA2=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+8)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA3=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA4=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+10)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA5=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+14)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA6=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+18)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA7=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+1C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA8=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+20)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA9=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+24)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA10=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+28)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA11=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+2C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  PA12=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+30)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA13=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+34)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA14=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+38)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA15=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240  \ PA0=0.atomic.bit.address                               \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+3C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ *************************************************************************************************************
                                   t:  PA0=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA1=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+4)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA2=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+8)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA3=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA4=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+10)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA5=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+14)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA6=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+18)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA7=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+1C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA8=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+20)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA9=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+24)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA10=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+28)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA11=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+2C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  PA12=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+30)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA13=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+34)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA14=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+38)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA15=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210200  \ PA0=1.atomic.bit.address                               \ (00005CAC)=42210200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+3C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ *************************************************************************************************************
  \ *************************************************************************************************************
                                   t:  PB0=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB1=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+4)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB2=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+8)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB3=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB4=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+10)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB5=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+14)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB6=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+18)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB7=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+1C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB8=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+20)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB9=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+24)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB10=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+28)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB11=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+2C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  PB12=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+30)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB13=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+34)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB14=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+38)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB15=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218240   \ PB0=0.atomic.bit.address                               \ (00005CAC)=42218240 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+3C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ *************************************************************************************************************
                                   t:  PB0=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB1=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+4)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB2=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+8)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB3=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB4=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+10)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB5=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+14)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB6=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+18)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB7=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+1C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB8=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+20)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB9=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+24)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB10=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+28)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB11=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+2C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  PB12=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+30)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB13=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+34)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB14=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+38)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB15=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42218200   \ PB0=1.atomic.bit.address                               \ (00005CAC)=42218200 
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+3C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ *************************************************************************************************************
  \ *************************************************************************************************************
                                   t:  PC0=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC1=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+4)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC2=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+8)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC3=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC4=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+10)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC5=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+14)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC6=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+18)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC7=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+1C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC8=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+20)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC9=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+24)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC10=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+28)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC11=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+2C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  PC12=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+30)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC13=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+34)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC14=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+38)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC15=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220240  \ PC0=0.atomic.bit.address                               \ (00005CAC)=42220240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+3C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ *************************************************************************************************************
                                   t:  PC0=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC1=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+4)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC2=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+8)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC3=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC4=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+10)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC5=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+14)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC6=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+18)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC7=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+1C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC8=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+20)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC9=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+24)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC10=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+28)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC11=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+2C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                    t:  PC12=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+30)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC13=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+34)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC14=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+38)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC15=1                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42220200  \ PC0=1.atomic.bit.address                               \ (00005CAC)=42220200
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+3C)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ *************************************************************************************************************
  \ *************************************************************************************************************
variable 

                                     t:  Init.RCC  ( -- )
                                      \  ; init Reset Clock Control RCC registers   (40021018)o401C
  (  0000017C  0A 48             )                  R0=40021000          \ RCC_CR               \ (000001A8)=40021000
  (  0000017E  81 69             )                  R1=(R0+18)           \ RCC_AHB2ENR
  (  00000180  44 F2 1C 07       )                  R7=401C
  (  00000184  41 EA 07 01       )                  R1=R1oR7<<0
  (  00000188  81 61             )                  (R0+18)=R1
                                                    ret'
                                     t; init.GPIOA  ( -- )   \ (40010804)o4A0
  (  0000018A  08 48             )                  R0=40010800                                 \ (000001AC)=40010800
  (  0000018C  41 68             )                  R1=(R0+4)
  (  0000018E  41 F4 94 61       )                  R1=R1o4A0
  (  00000192  41 60             )                  (R0+4)=R1
                                                    ret'
                                     t: init.USART1 ( -- )   \ (40013818)=340C,h    (40013810)=8F,h
  (  00000194  06 48             )                  R0=40013800          \ SYSCFG_BASE          \ (000001B0)=40013800
  (  00000196  43 F2 0C 41       )                  R1=340C
  (  0000019A  81 81             )                  (R0+18)=R1,h
  (  0000019C  40 F2 8F 01       )                  R1=45 \ 8B            \ 8F : 57600   \ 8B : 115200
  (  000001A0  01 81             )                  (R0+10)=R1,h
  (  000001A2  70 47             )                  ret'    \ jmp_RE



                                     t:  UNLOCK   \ (40022004)=45670123   (40022004)=CDEF89AB   ret'
  (  200018B4  21 48             )                  R0=40022000          \ GPIOI_BASE           \ (2000193C)=40022000
  (  200018B6  22 4C             )                  R4=45670123                                 \ (20001940)=45670123
  (  200018B8  44 60             )                  (R0+4)=R4
  (  200018BA  22 4C             )                  R4=CDEF89AB                                 \ (20001944)=CDEF89AB
  (  200018BC  44 60             )                  (R0+4)=R4
  (  200018BE  70 47             )                  ret'  \ jmp_RE

                                     L:  Reset_Handler(rom)
  (  00000150  00 F0 14 F8       )                  Init.RCC                                    \       17C
                                                    init.GPIOA
                                                    init.USART1
  (  00000154  01 F0 AE FB       )                  UNLOCK
  (  0000015C  11 48             )          0 '' COLD R=#  jmp_R0                                     \ (000001A4)=200022B9










  \ -------------------------------------------------------------------------------
                                   t:  PA0=0                                           \ 219 / 290     537 / 656
  (  00005CA4  01 48             )                  R0=42210240                                 \ (00005CAC)=42210240
  (  00005CA6  01 21             )                  R1=1
  (  00005CA8  01 60             )                  (R0+0)=R1                                                   \
  (  00005CAA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PA0=1                                           \ 249 / 290     585 / 656
  (  0000616C  01 48             )                  R0=42210200                                 \ (00006174)=42210200
  (  0000616E  01 21             )                  R1=1
  (  00006170  01 60             )                  (R0+0)=R1                                                   \
  (  00006172  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB0=0                                           \ 229 / 290     553 / 656
  (  00005E3C  01 48             )                  R0=42218240                                 \ (00005E44)=42218240
  (  00005E3E  01 21             )                  R1=1
  (  00005E40  01 60             )                  (R0+0)=R1                                                   \
  (  00005E42  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PB0=1                                           \ 259 / 290     601 / 656
  (  00006304  01 48             )                  R0=42218200                                 \ (0000630C)=42218200
  (  00006306  01 21             )                  R1=1
  (  00006308  01 60             )                  (R0+0)=R1                                                   \
  (  0000630A  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC0=0                                           \ 239 / 290     569 / 656
  (  00005FD4  01 48             )                  R0=42220240                                 \ (00005FDC)=42220240
  (  00005FD6  01 21             )                  R1=1
  (  00005FD8  01 60             )                  (R0+0)=R1                                                   \
  (  00005FDA  70 47             )                  ret'
  \ -------------------------------------------------------------------------------
                                   t:  PC0=1                                           \ 269 / 290     617 / 656
  (  0000649C  01 48             )                  R0=42220200                                 \ (000064A4)=42220200
  (  0000649E  01 21             )                  R1=1
  (  000064A0  01 60             )                  (R0+0)=R1                                                   \
  (  000064A2  70 47             )                  ret'





























\ ----------------------------------------------------------------------------------------------
  nuc453eF?  @.
  #if   special(472tx=pb10)?  @.   DROP.  -1  \  ????????????
    #if   \  include  NUC453StartKitHome3a.F
           472?  @.
           #if \ include  nuc472LEDoffice5.f  \  STM32F103-APP69.F  472app3.f  \   nuc472LED3.f
               \ include  nuc472LEDoffice6.f  \  ADC_SingleCycleScan3.f     \ TEMPLATE_HOME1.f  \  ADC_ContinuousScan1.f










               \ include  nuc472ADCcontinuous1.f


\         now.is.mF?  off.        ( new )  LFA+NFA+CFA.COUNTER  off.  \ 20000000  20000  erase'  \ 103mF?  on.

insert{

         0  org   \ 0 1000 >H32
  (         0 )   20000990 || 00000345 || 0000037F || 00000329 || 00000383 || 00000385 || 00000387 || 00000000 ||
  (        20 )   00000000 || 00000000 || 00000000 || 00000389 || 0000038B || 00000000 || 0000038D || 0000038F ||
  (        40 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (        60 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (        80 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (        A0 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (        C0 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (        E0 )   00000391 || 00000391 || 00000769 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       100 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       120 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       140 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       160 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       180 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       1A0 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       1C0 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       1E0 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       200 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       220 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       240 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 ||
  (       260 )   00000391 || 00000391 || 00000391 || 00000391 || 00000391 || 00000391 || F802F000 || F844F000 ||
  (       280 )   E890A00A || 44820C00 || F1AA4483 || 45DA0701 || F000D101 || F2AFF839 || E8BA0E09 || F013000F ||
  (       2A0 )   BF180F01 || F0431AFB || 47180301 || 00000BE0 || 00000C00 || BF243A10 || C178C878 || 0752D8FA ||
  (       2C0 )   C830BF24 || BF44C130 || 600C6804 || 00004770 || 24002300 || 26002500 || BF283A10 || D8FBC178 ||
  (       2E0 )   BF280752 || BF48C130 || 4770600B || F0002964 || 29788077 || 80B0F000 || 47702000 || F000B51F ||
  (       300 )   BD1FFD79 || BD10B510 || F9E0F000 || F7FF4611 || F000FFF5 || F000FCA5 || B403F9FE || FFF2F7FF ||
  (       320 )   F000BC03 || 0000FA03 || 46712004 || D0024208 || 8009F3EF || F3EFE001 || 46718008 || 47104A00 ||
  (       340 )   00000989 || F04F4816 || 60010159 || 0116F04F || F04F6001 || 60010188 || 68114A12 || D1042900 ||
  (       360 )   68114A11 || 0180F041 || 4A106011 || 21A5F645 || 21006011 || 480E6001 || 480E4780 || E7FE4700 ||
  (       380 )   E7FEE7FE || E7FEE7FE || E7FEE7FE || E7FEE7FE || 0000E7FE || 49094808 || 4B0A4A09 || 00004770 ||
  (       3A0 )   40000100 || 40000020 || 4000C018 || 40000024 || 00000B1D || 00000279 || 20000090 || 20000990 ||
  (       3C0 )   20000190 || 20000190 || 4904B40F || AA03B510 || F0009802 || BC10F951 || FB14F85D || 20000028 ||
  (       3E0 )   41F0E92D || 24004606 || 29756810 || A5164631 || F3AFD010 || 28008000 || 4240DA02 || E007A513 ||
  (       400 )   078A6831 || A512D501 || 0749E002 || A511D504 || E0012401 || 8000F3AF || 220A2100 || 0724F106 ||
  (       420 )   FBB0E009 || FBB0FCF2 || FB02F3F2 || 3030001C || 46185478 || 28001C49 || 4623D1F3 || 4630462A ||
  (       440 )   41F0E8BD || B8BEF000 || 00000000 || 0000002D || 0000002B || 00000020 || 4604B570 || 4621460D ||
  (       460 )   F3AF6810 || 88218000 || D5020509 || 447A4A0F || 4A0EE002 || 320E447A || F1042100 || E0050324 ||
  (       480 )   060FF000 || 5D960900 || 1C49545E || D1F72800 || 23007820 || D5040700 || D0022D70 || 2302B109 ||
  (       4A0 )   46203211 || 4070E8BD || B88CF000 || 000009AE || 47F0E92D || 0A00F04F || 46044689 || A020F8C0 ||
  (       4C0 )   68E14620 || 28004788 || 2825D076 || E9D4D006 || 47902101 || 1C406A20 || E7F16220 || 462068E1 ||
  (       4E0 )   47882500 || A01CF8C4 || 27004606 || A018F8C4 || D0092E2A || F0004630 || B338FBA3 || 0887EB04 ||
  (       500 )   F8C83E30 || E0196018 || 1B04F859 || EB044620 || 61910287 || 478868E1 || 46062F01 || 69E0D118 ||
  (       520 )   DA202800 || 0520F025 || F8D8E01D || EB000018 || EB060080 || 38300040 || 0018F8C8 || 68E14620 ||
  (       540 )   46064788 || FB7CF000 || D1EE2800 || D00A2F01 || D1082E2E || 68E14620 || 1C7F4788 || 2F024606 ||
  (       560 )   0520F045 || 69A0DBC4 || DA032800 || F0454240 || 61A00501 || D00107E8 || 0510F025 || F1A6B1B6 ||
  (       580 )   28190041 || 3620D802 || 6500F445 || 4631464A || 60254620 || F7FF464D || B158FEA9 || D0062801 ||
  (       5A0 )   F0251DED || F1000007 || E7890908 || F105E004 || E7850904 || E78A4630 || E8BD6A20 || 477087F0 ||
  (       5C0 )   47704770 || 47F0E92D || 4699460D || 46044692 || 0824F100 || 06886801 || 69E0D504 || 0110F021 ||
  (       5E0 )   E0006021 || 42A82001 || 1B47DD01 || 2700E000 || 197A69A1 || 0009EB02 || 61A01A08 || 06C07820 ||
  (       600 )   4620D402 || 8000F3AF || E0082600 || 2101E9D4 || 0006F81A || 6A204790 || 1C761C40 || 454E6220 ||
  (       620 )   7820DBF4 || D50A06C0 || F3AF4620 || E0068000 || 2101E9D4 || 47902030 || 1C406A20 || 1E386220 ||
  (       640 )   0701F1A7 || E007DCF4 || 2101E9D4 || 0005F818 || 6A204790 || 62201C40 || F1A51E28 || DCF30501 ||
  (       660 )   F3AF4620 || 78208000 || D5020600 || E8BD2002 || 200187F0 || 0000E7FB || B5704B07 || 447B460D ||
  (       680 )   F811F000 || 46284604 || FAE1F000 || F04FB110 || BD7030FF || BD704620 || 000005D3 || 1C4A6901 ||
  (       6A0 )   78086102 || B5004770 || E9CDB08F || 21003101 || 49059105 || E9CD4479 || 46111003 || F7FF4668 ||
  (       6C0 )   B00FFEF7 || 0000BD00 || FFFFFFE5 || F0004675 || 46AEF829 || 46690005 || F0204653 || 46850007 ||
  (       6E0 )   B520B018 || FE56F7FF || 4020E8BD || 0600F04F || 0700F04F || 0800F04F || 0B00F04F || 0107F021 ||
  (       700 )   E8AC46AC || E8AC09C0 || E8AC09C0 || E8AC09C0 || 468D09C0 || 46044770 || 8000F3AF || F7FF4620 ||
  (       720 )   0000FDFC || 47704800 || 2000002C || 20184901 || E7FEBEAB || 00020026 || 00004770 || 07CA4809 ||
  (       740 )   6C02D003 || 0202F042 || 078A6402 || 6C82D503 || 0202F042 || 07496482 || 6CC1D503 || 0102F041 ||
  (       760 )   477064C1 || 40043000 || 4C0DB570 || F0006D20 || 07E80501 || 6820D00E || A00AB281 || FE24F7FF ||
  (       780 )   B2816860 || F7FFA011 || 68A0FE1F || A019B281 || FE1AF7FF || F0206D20 || 43280007 || BD706520 ||
  (       7A0 )   40043000 || 6E616843 || 206C656E || 6F632030 || 7265766E || 6E6F6973 || 73657220 || 20746C75 ||
  (       7C0 )   30207369 || 0A782578 || 00000000 || 6E616843 || 206C656E || 6F632031 || 7265766E || 6E6F6973 ||
  (       7E0 )   73657220 || 20746C75 || 30207369 || 0A782578 || 00000000 || 6E616843 || 206C656E || 6F632032 ||
  (       800 )   7265766E || 6E6F6973 || 73657220 || 20746C75 || 30207369 || 0A782578 || 00000000 || B5104806 ||
  (       820 )   430C6C04 || 6C016404 || 64014311 || 4A036C41 || 43194011 || BD106441 || 40043000 || FFFCF000 ||
  (       840 )   00890F81 || 4180F101 || 2204F8D1 || 031FF000 || 40982001 || F8C14302 || 47702204 || 4180F04F ||
  (       860 )   2200F8D1 || F8C14302 || 47702200 || 4080F04F || 1240F8D0 || D50102C8 || 47702000 || D5010308 ||
  (       880 )   E0004A0E || F3C14A0E || B1303081 || D0062801 || D0042802 || D1052803 || 2001E003 || 2002E002 ||
  (       8A0 )   2004E000 || 0308F3C1 || F3C11C9B || 435A2144 || FBB21C89 || FBB1F1F1 || 4770F0F0 || 01518000 ||
  (       8C0 )   00B71B00 || 4280F04F || 3220F8D2 || 030FF023 || F8C2430B || F8D23220 || F0211210 || 43010107 ||
  (       8E0 )   1210F8C2 || B8F6F000 || F410B570 || D00D3F7F || F3C04C10 || EB044381 || 68230483 || 2587F3C0 ||
  (       900 )   1644F3C0 || 43AB40B5 || 60234313 || 07520E42 || 4B08D00E || 7201F3C0 || EB033B10 || 681A0382 ||
  (       920 )   6442F3C0 || 5004F3C0 || 43A24084 || 601A430A || 0000BD70 || 40000220 || 31D8F44F || 4280F04F ||
  (       940 )   1E0BE005 || 0101F1A1 || 2000DC01 || F8D24770 || EA303250 || D1F40303 || 47702001 || 2300B5F0 ||
  (       960 )   26032401 || F503FA04 || D009420D || 005D6807 || FC05FA06 || 070CEA27 || F505FA02 || 6007432F ||
  (       980 )   2B101C5B || BDF0D3EE || A0034604 || FD1CF7FF || F0004620 || E7FEF9DB || 48206E49 || 20647261 ||
  (       9A0 )   6C756146 || 61482074 || 656C646E || 00000A72 || F000B570 || 2004F86B || FF50F7FF || F7FF2010 ||
  (       9C0 )   2100FFBB || F7FF2007 || F04FFF7D || F8D44480 || F4400240 || F8C43080 || 481F0240 || 0240F8C4 ||
  (       9E0 )   F7FF2004 || 2100FFA9 || F7FF2002 || 4D1BFF6B || F7FF4628 || 4E1AFF25 || F7FF4630 || 2200FF21 ||
  (       A00 )   7140F04F || F7FF4628 || 1322FF6F || 46302108 || FF6AF7FF || F85EF000 || 7088F44F || 6C206620 ||
  (       A20 )   0070F420 || 1080F440 || F2406420 || 65201011 || 2040F04F || 1104F8D0 || 21E0F441 || 1104F8C0 ||
  (       A40 )   F0004808 || 6AA0F817 || 0010F040 || E8BD62A0 || F0004070 || 0000B809 || 00085639 || 57803D10 ||
  (       A60 )   5623FE1C || 0400001C || 4180F04F || F8C12000 || 47700100 || F1010E01 || 688B4180 || 40822201 ||
  (       A80 )   608B4313 || 43906888 || 47706088 || 2359B510 || F04F2216 || 21884080 || BF00E006 || 3100F8C0 ||
  (       AA0 )   2100F8C0 || 1100F8C0 || 4100F8D0 || D1F52C01 || 0000BD10 || 698A4906 || D4FC0212 || 280A6008 ||
  (       AC0 )   6988D104 || D4FC0200 || 6008200D || 00004770 || 40070000 || F04FB510 || F8D44480 || F0000210 ||
  (       AE0 )   28020007 || 490BD003 || 0020F851 || F7FFE001 || F8D4FEBD || 4A081220 || 010FF001 || FBB01C49 ||
  (       B00 )   4804F1F1 || 60013808 || 00524411 || F1F2FBB1 || BD106041 || 20000008 || 0007A120 || B5104828 ||
  (       B20 )   F4416801 || 60010170 || F7FF2008 || F04FFF05 || F8D14180 || F3C00208 || B92B0340 || 0208F8D1 ||
  (       B40 )   0002F040 || 0208F8C1 || 4A1E481F || 68026002 || D1FC2A01 || 2110F8D0 || D12807D2 || 1265F64A ||
  (       B60 )   68446042 || D5FC03E4 || F0446BC4 || 63C40404 || 06246BC4 || 6042D5FC || 03E46844 || F8D0D5FC ||
  (       B80 )   F8C0409C || 6BC4409C || D5FC0624 || 68446042 || D5FC03E4 || F0246BC4 || 63C40404 || 06246BC4 ||
  (       BA0 )   6042D5FC || 03D26842 || 2202D5FC || 2B0062C2 || F8D1D105 || F0200208 || F8C10002 || BD100208 ||
  (       BC0 )   E000ED88 || A5EB1357 || 40041000 || 4A1BB57F || 4605460C || E9D26811 || E9CD0202 || 91000202 ||
  (       BE0 )   FE44F7FF || 4180F04F || F8D19001 || 22000214 || 6001F3C0 || 2303632A || 60AA60EB || 2020F85D ||
  (       C00 )   0220F8D1 || 2003F3C0 || FBB21C40 || 2C00F0F0 || EB00D012 || FBB10154 || 1E89F1F4 || 3F80F5B1 ||
  (       C20 )   EB00D307 || FBB000C4 || 1F59F0F4 || 1010EB01 || F041E001 || 62685040 || 0000BD7F || 00000E00 ||
  (       C40 )   280A3830 || 2001D201 || 20004770 || F04F4770 || 477030FF || 4603B500 || FF2CF7FF || BD004618 ||
  (       C60 )   FEA6F7FF || 03D12201 || F7FF481D || 481CFE77 || 21012200 || F7FF3080 || F44FFE71 || 481931E1 ||
  (       C80 )   FFA4F7FF || 68014818 || F7FFA018 || A01BFB9D || FB9AF7FF || F7FF4829 || 4C29FB97 || 22082307 ||
  (       CA0 )   46202100 || FDBAF7FF || F0406C20 || 64200001 || 46202101 || FD42F7FF || 22014922 || F8C10290 ||
  (       CC0 )   6C200100 || 6000F440 || 481F6420 || 60012100 || 60016002 || 60016002 || 60016002 || E7F66002 ||
  (       CE0 )   400040C0 || 40070000 || 20000000 || 50430A0A || 20402055 || 7A486425 || 0000000A || 6968540A ||
  (       D00 )   61732073 || 656C706D || 646F6320 || 65642065 || 736E6F6D || 74617274 || 44412065 || 6F632043 ||
  (       D20 )   6E69746E || 73756F75 || 61637320 || 6F63206E || 7265766E || 6E6F6973 || 0000000A || 00000E48 ||
  (       D40 )   40043000 || E000E004 || 400048FC || 4604B510 || A0106801 || FB38F7FF || 6861A011 || FB34F7FF ||
  (       D60 )   68A1A012 || FB30F7FF || 68E1A013 || FB2CF7FF || 6921A014 || FB28F7FF || 6961A015 || FB24F7FF ||
  (       D80 )   69A1A016 || FB20F7FF || E8BD69E1 || A0164010 || BB1AF7FF || 20203072 || 7830203D || 000A7825 ||
  (       DA0 )   20203172 || 7830203D || 000A7825 || 20203272 || 7830203D || 000A7825 || 20203372 || 7830203D ||
  (       DC0 )   000A7825 || 20323172 || 7830203D || 000A7825 || 2020726C || 7830203D || 000A7825 || 20206370 ||
  (       DE0 )   7830203D || 000A7825 || 20727370 || 7830203D || 000A7825 || 7040F04F || 0A10EEE1 || 00004770 ||
  (       E00 )   00B71B00 || 00000000 || 01518000 || 01518000 || 00B71B00 || 00000000 || 01518000 || 01518000 ||
  (       E20 )   33323130 || 37363534 || 42413938 || 46454443 || 00583040 || 33323130 || 37363534 || 62613938 ||
  (       E40 )   66656463 || 00783040 || 63207449 || 65766E6F || 63207472 || 6E6E6168 || 30206C65 || 322C312C ||
  (       E60 )   6E6F6320 || 756E6974 || 6C73756F || 6E612079 || 72702064 || 20746E69 || 766E6F63 || 69737265 ||
  (       E80 )   72206E6F || 6C757365 || 00000A74 || 00000EAC || 20000000 || 0000002C || 000002B4 || 00000ED8 ||
  (       EA0 )   2000002C || 00000964 || 000002D0 || 01518000 || 00000016 || 00B71B00 || 00008000 || 00000000 ||
  (       EC0 )   00002710 || 00000000 || 00000000 || 00000000 || 01518000 || 00000000 || FFFFFFFF || FFFFFFFF ||

 }insert

\             nuc472         ht32f1656
\ -----------------------------------
\  PA  GPIOA  40004000       400B0000
\  PB  GPIOB  40004040       400B2000
\  PC  GPIOC  40004080       400B4000
\  PD  GPIOD  400040C0       400B6000
\  PE  GPIOE  40004100       400B8000
\  PF  GPIOF  40004140
\  PG  GPIOG  40004180
\  PH  GPIOH  400041C0
\  PI  GPIOI  40004200

0  value       PA.0.addr       40004800   to.  PA.0.addr
0  value       PE.0.addr       40004800   to.  PA.0.addr
0  value       PI.0.addr       40004800   to.  PA.0.addr
   variable.   PE.0'           40004900   PE.0'         !.
   variable.   PI.0'           40004a00   PI.0'         !.

   variable.   spacing/bit            1   spacing/bit   !.
   variable.   spacing/bit*           1   spacing/bit*  !.
   variable.   port.spacing          40   port.spacing  !.

:.  PX'  ( n -- a' )  port.spacing  @.  ( 40 )  *.  GPIO_BA'   +.  ;.

nuc442eF?  @.
#if
:.  PA'  ( -- a' )    0  PX'   ;.
:.  PB'  ( -- a' )    1  PX'   ;.
:.  PC'  ( -- a' )    2  PX'   ;.
:.  PD'  ( -- a' )    3  PX'   ;.
:.  PE'  ( -- a' )    4  PX'   ;.
:.  PF'  ( -- a' )    5  PX'   ;.
:.  PG'  ( -- a' )    6  PX'   ;.
:.  PH'  ( -- a' )    7  PX'   ;.
:.  PI'  ( -- a' )    8  PX'   ;.
:.  PJ'  ( -- a' )    9  PX'   ;.
:.  PK'  ( -- a' )   0A  PX'   ;.
:.  PL'  ( -- a' )   0B  PX'   ;.
:.  PM'  ( -- a' )   0C  PX'   ;.
:.  PN'  ( -- a' )   0D  PX'   ;.

:.  Px.b  ( Px b -- )  spacing/bit  @.  spacing/bit*   @.  *.  *.  +.   ;.

  t:  PA.0   (.--.n.)   ( 400048xx )  PA.0.addr   00  Px.b  ...  ret'
  t:  PA.1   (.--.n.)   ( 400048xx )  PA.0.addr   04  Px.b  ...  ret'
  t:  PA.2   (.--.n.)   ( 400048xx )  PA.0.addr   08  Px.b  ...  ret'
  t:  PA.3   (.--.n.)   ( 400048xx )  PA.0.addr   0C  Px.b  ...  ret'
  t:  PA.4   (.--.n.)   ( 400048xx )  PA.0.addr   10  Px.b  ...  ret'
  t:  PA.5   (.--.n.)   ( 400048xx )  PA.0.addr   14  Px.b  ...  ret'
  t:  PA.6   (.--.n.)   ( 400048xx )  PA.0.addr   18  Px.b  ...  ret'
  t:  PA.7   (.--.n.)   ( 400048xx )  PA.0.addr   1C  Px.b  ...  ret'
  t:  PA.8   (.--.n.)   ( 400048xx )  PA.0.addr   20  Px.b  ...  ret'
  t:  PA.9   (.--.n.)   ( 400048xx )  PA.0.addr   24  Px.b  ...  ret'
  t:  PA.10  (.--.n.)   ( 400048xx )  PA.0.addr   28  Px.b  ...  ret'
  t:  PA.11  (.--.n.)   ( 400048xx )  PA.0.addr   2C  Px.b  ...  ret'
  t:  PA.12  (.--.n.)   ( 400048xx )  PA.0.addr   30  Px.b  ...  ret'
  t:  PA.13  (.--.n.)   ( 400048xx )  PA.0.addr   34  Px.b  ...  ret'
  t:  PA.14  (.--.n.)   ( 400048xx )  PA.0.addr   38  Px.b  ...  ret'
  t:  PA.15  (.--.n.)   ( 400048xx )  PA.0.addr   3C  Px.b  ...  ret'

  t:  PB.0   (.--.n.)   ( 400048xx )  PA.0.addr   40  Px.b  ...  ret'
  t:  PB.1   (.--.n.)   ( 400048xx )  PA.0.addr   44  Px.b  ...  ret'
  t:  PB.2   (.--.n.)   ( 400048xx )  PA.0.addr   48  Px.b  ...  ret'
  t:  PB.3   (.--.n.)   ( 400048xx )  PA.0.addr   4C  Px.b  ...  ret'
  t:  PB.4   (.--.n.)   ( 400048xx )  PA.0.addr   50  Px.b  ...  ret'
  t:  PB.5   (.--.n.)   ( 400048xx )  PA.0.addr   54  Px.b  ...  ret'
  t:  PB.6   (.--.n.)   ( 400048xx )  PA.0.addr   58  Px.b  ...  ret'
  t:  PB.7   (.--.n.)   ( 400048xx )  PA.0.addr   5C  Px.b  ...  ret'
  t:  PB.8   (.--.n.)   ( 400048xx )  PA.0.addr   60  Px.b  ...  ret'
  t:  PB.9   (.--.n.)   ( 400048xx )  PA.0.addr   64  Px.b  ...  ret'
  t:  PB.10  (.--.n.)   ( 400048xx )  PA.0.addr   68  Px.b  ...  ret'
  t:  PB.11  (.--.n.)   ( 400048xx )  PA.0.addr   6C  Px.b  ...  ret'
  t:  PB.12  (.--.n.)   ( 400048xx )  PA.0.addr   70  Px.b  ...  ret'
  t:  PB.13  (.--.n.)   ( 400048xx )  PA.0.addr   74  Px.b  ...  ret'
  t:  PB.14  (.--.n.)   ( 400048xx )  PA.0.addr   78  Px.b  ...  ret'
  t:  PB.15  (.--.n.)   ( 400048xx )  PA.0.addr   7C  Px.b  ...  ret'

  t:  PC.0   (.--.n.)   ( 400048xx )  PA.0.addr   80  Px.b  ...  ret'
  t:  PC.1   (.--.n.)   ( 400048xx )  PA.0.addr   84  Px.b  ...  ret'
  t:  PC.2   (.--.n.)   ( 400048xx )  PA.0.addr   88  Px.b  ...  ret'
  t:  PC.3   (.--.n.)   ( 400048xx )  PA.0.addr   8C  Px.b  ...  ret'
  t:  PC.4   (.--.n.)   ( 400048xx )  PA.0.addr   90  Px.b  ...  ret'
  t:  PC.5   (.--.n.)   ( 400048xx )  PA.0.addr   94  Px.b  ...  ret'
  t:  PC.6   (.--.n.)   ( 400048xx )  PA.0.addr   98  Px.b  ...  ret'
  t:  PC.7   (.--.n.)   ( 400048xx )  PA.0.addr   9C  Px.b  ...  ret'
  t:  PC.8   (.--.n.)   ( 400048xx )  PA.0.addr   A0  Px.b  ...  ret'
  t:  PC.9   (.--.n.)   ( 400048xx )  PA.0.addr   A4  Px.b  ...  ret'
  t:  PC.10  (.--.n.)   ( 400048xx )  PA.0.addr   A8  Px.b  ...  ret'
  t:  PC.11  (.--.n.)   ( 400048xx )  PA.0.addr   AC  Px.b  ...  ret'
  t:  PC.12  (.--.n.)   ( 400048xx )  PA.0.addr   B0  Px.b  ...  ret'
  t:  PC.13  (.--.n.)   ( 400048xx )  PA.0.addr   B4  Px.b  ...  ret'
  t:  PC.14  (.--.n.)   ( 400048xx )  PA.0.addr   B8  Px.b  ...  ret'
  t:  PC.15  (.--.n.)   ( 400048xx )  PA.0.addr   BC  Px.b  ...  ret'

  t:  PD.0   (.--.n.)   ( 400048xx )  PA.0.addr   C0  Px.b  ...  ret'
  t:  PD.1   (.--.n.)   ( 400048xx )  PA.0.addr   C4  Px.b  ...  ret'
  t:  PD.2   (.--.n.)   ( 400048xx )  PA.0.addr   C8  Px.b  ...  ret'
  t:  PD.3   (.--.n.)   ( 400048xx )  PA.0.addr   CC  Px.b  ...  ret'
  t:  PD.4   (.--.n.)   ( 400048xx )  PA.0.addr   D0  Px.b  ...  ret'
  t:  PD.5   (.--.n.)   ( 400048xx )  PA.0.addr   D4  Px.b  ...  ret'
  t:  PD.6   (.--.n.)   ( 400048xx )  PA.0.addr   D8  Px.b  ...  ret'
  t:  PD.7   (.--.n.)   ( 400048xx )  PA.0.addr   DC  Px.b  ...  ret'
  t:  PD.8   (.--.n.)   ( 400048xx )  PA.0.addr   E0  Px.b  ...  ret'
  t:  PD.9   (.--.n.)   ( 400048xx )  PA.0.addr   E4  Px.b  ...  ret'
  t:  PD.10  (.--.n.)   ( 400048xx )  PA.0.addr   E8  Px.b  ...  ret'
  t:  PD.11  (.--.n.)   ( 400048xx )  PA.0.addr   EC  Px.b  ...  ret'
  t:  PD.12  (.--.n.)   ( 400048xx )  PA.0.addr   F0  Px.b  ...  ret'
  t:  PD.13  (.--.n.)   ( 400048xx )  PA.0.addr   F4  Px.b  ...  ret'
  t:  PD.14  (.--.n.)   ( 400048xx )  PA.0.addr   F8  Px.b  ...  ret'
  t:  PD.15  (.--.n.)   ( 400048xx )  PA.0.addr   FC  Px.b  ...  ret'

  t:  PE.0   (.--.n.)   ( 400049xx )  PE.0.addr   00  Px.b  ...  ret'
  t:  PE.1   (.--.n.)   ( 400049xx )  PE.0.addr   04  Px.b  ...  ret'
  t:  PE.2   (.--.n.)   ( 400049xx )  PE.0.addr   08  Px.b  ...  ret'
  t:  PE.3   (.--.n.)   ( 400049xx )  PE.0.addr   0C  Px.b  ...  ret'
  t:  PE.4   (.--.n.)   ( 400049xx )  PE.0.addr   10  Px.b  ...  ret'
  t:  PE.5   (.--.n.)   ( 400049xx )  PE.0.addr   14  Px.b  ...  ret'
  t:  PE.6   (.--.n.)   ( 400049xx )  PE.0.addr   18  Px.b  ...  ret'
  t:  PE.7   (.--.n.)   ( 400049xx )  PE.0.addr   1C  Px.b  ...  ret'
  t:  PE.8   (.--.n.)   ( 400049xx )  PE.0.addr   20  Px.b  ...  ret'
  t:  PE.9   (.--.n.)   ( 400049xx )  PE.0.addr   24  Px.b  ...  ret'
  t:  PE.10  (.--.n.)   ( 400049xx )  PE.0.addr   28  Px.b  ...  ret'
  t:  PE.11  (.--.n.)   ( 400049xx )  PE.0.addr   2C  Px.b  ...  ret'
  t:  PE.12  (.--.n.)   ( 400049xx )  PE.0.addr   30  Px.b  ...  ret'
  t:  PE.13  (.--.n.)   ( 400049xx )  PE.0.addr   34  Px.b  ...  ret'
  t:  PE.14  (.--.n.)   ( 400049xx )  PE.0.addr   38  Px.b  ...  ret'
  t:  PE.15  (.--.n.)   ( 400049xx )  PE.0.addr   3C  Px.b  ...  ret'

  t:  PF.0   (.--.n.)   ( 400049xx )  PE.0.addr   40  Px.b  ...  ret'
  t:  PF.1   (.--.n.)   ( 400049xx )  PE.0.addr   44  Px.b  ...  ret'
  t:  PF.2   (.--.n.)   ( 400049xx )  PE.0.addr   48  Px.b  ...  ret'
  t:  PF.3   (.--.n.)   ( 400049xx )  PE.0.addr   4C  Px.b  ...  ret'
  t:  PF.4   (.--.n.)   ( 400049xx )  PE.0.addr   50  Px.b  ...  ret'
  t:  PF.5   (.--.n.)   ( 400049xx )  PE.0.addr   54  Px.b  ...  ret'
  t:  PF.6   (.--.n.)   ( 400049xx )  PE.0.addr   58  Px.b  ...  ret'
  t:  PF.7   (.--.n.)   ( 400049xx )  PE.0.addr   5C  Px.b  ...  ret'
  t:  PF.8   (.--.n.)   ( 400049xx )  PE.0.addr   60  Px.b  ...  ret'
  t:  PF.9   (.--.n.)   ( 400049xx )  PE.0.addr   64  Px.b  ...  ret'
  t:  PF.10  (.--.n.)   ( 400049xx )  PE.0.addr   68  Px.b  ...  ret'
  t:  PF.11  (.--.n.)   ( 400049xx )  PE.0.addr   6C  Px.b  ...  ret'
  t:  PF.12  (.--.n.)   ( 400049xx )  PE.0.addr   70  Px.b  ...  ret'
  t:  PF.13  (.--.n.)   ( 400049xx )  PE.0.addr   74  Px.b  ...  ret'
  t:  PF.14  (.--.n.)   ( 400049xx )  PE.0.addr   78  Px.b  ...  ret'
  t:  PF.15  (.--.n.)   ( 400049xx )  PE.0.addr   7C  Px.b  ...  ret'

  t:  PG.0   (.--.n.)   ( 400049xx )  PE.0.addr   80  Px.b  ...  ret'
  t:  PG.1   (.--.n.)   ( 400049xx )  PE.0.addr   84  Px.b  ...  ret'
  t:  PG.2   (.--.n.)   ( 400049xx )  PE.0.addr   88  Px.b  ...  ret'
  t:  PG.3   (.--.n.)   ( 400049xx )  PE.0.addr   8C  Px.b  ...  ret'
  t:  PG.4   (.--.n.)   ( 400049xx )  PE.0.addr   90  Px.b  ...  ret'
  t:  PG.5   (.--.n.)   ( 400049xx )  PE.0.addr   94  Px.b  ...  ret'
  t:  PG.6   (.--.n.)   ( 400049xx )  PE.0.addr   98  Px.b  ...  ret'
  t:  PG.7   (.--.n.)   ( 400049xx )  PE.0.addr   9C  Px.b  ...  ret'
  t:  PG.8   (.--.n.)   ( 400049xx )  PE.0.addr   A0  Px.b  ...  ret'
  t:  PG.9   (.--.n.)   ( 400049xx )  PE.0.addr   A4  Px.b  ...  ret'
  t:  PG.10  (.--.n.)   ( 400049xx )  PE.0.addr   A8  Px.b  ...  ret'
  t:  PG.11  (.--.n.)   ( 400049xx )  PE.0.addr   AC  Px.b  ...  ret'
  t:  PG.12  (.--.n.)   ( 400049xx )  PE.0.addr   B0  Px.b  ...  ret'
  t:  PG.13  (.--.n.)   ( 400049xx )  PE.0.addr   B4  Px.b  ...  ret'
  t:  PG.14  (.--.n.)   ( 400049xx )  PE.0.addr   B8  Px.b  ...  ret'
  t:  PG.15  (.--.n.)   ( 400049xx )  PE.0.addr   BC  Px.b  ...  ret'

  t:  PH.0   (.--.n.)   ( 400049xx )  PE.0.addr   C0  Px.b  ...  ret'
  t:  PH.1   (.--.n.)   ( 400049xx )  PE.0.addr   C4  Px.b  ...  ret'
  t:  PH.2   (.--.n.)   ( 400049xx )  PE.0.addr   C8  Px.b  ...  ret'
  t:  PH.3   (.--.n.)   ( 400049xx )  PE.0.addr   CC  Px.b  ...  ret'
  t:  PH.4   (.--.n.)   ( 400049xx )  PE.0.addr   D0  Px.b  ...  ret'
  t:  PH.5   (.--.n.)   ( 400049xx )  PE.0.addr   D4  Px.b  ...  ret'
  t:  PH.6   (.--.n.)   ( 400049xx )  PE.0.addr   D8  Px.b  ...  ret'
  t:  PH.7   (.--.n.)   ( 400049xx )  PE.0.addr   DC  Px.b  ...  ret'
  t:  PH.8   (.--.n.)   ( 400049xx )  PE.0.addr   E0  Px.b  ...  ret'
  t:  PH.9   (.--.n.)   ( 400049xx )  PE.0.addr   E4  Px.b  ...  ret'
  t:  PH.10  (.--.n.)   ( 400049xx )  PE.0.addr   E8  Px.b  ...  ret'
  t:  PH.11  (.--.n.)   ( 400049xx )  PE.0.addr   EC  Px.b  ...  ret'
  t:  PH.12  (.--.n.)   ( 400049xx )  PE.0.addr   F0  Px.b  ...  ret'
  t:  PH.13  (.--.n.)   ( 400049xx )  PE.0.addr   F4  Px.b  ...  ret'
  t:  PH.14  (.--.n.)   ( 400049xx )  PE.0.addr   F8  Px.b  ...  ret'
  t:  PH.15  (.--.n.)   ( 400049xx )  PE.0.addr   FC  Px.b  ...  ret'

  t:  PI.0   (.--.n.)   ( 40004Axx )  PI.0.addr   00  Px.b  ...  ret'
  t:  PI.1   (.--.n.)   ( 40004Axx )  PI.0.addr   04  Px.b  ...  ret'
  t:  PI.2   (.--.n.)   ( 40004Axx )  PI.0.addr   08  Px.b  ...  ret'
  t:  PI.3   (.--.n.)   ( 40004Axx )  PI.0.addr   0C  Px.b  ...  ret'
  t:  PI.4   (.--.n.)   ( 40004Axx )  PI.0.addr   10  Px.b  ...  ret'
  t:  PI.5   (.--.n.)   ( 40004Axx )  PI.0.addr   14  Px.b  ...  ret'
  t:  PI.6   (.--.n.)   ( 40004Axx )  PI.0.addr   18  Px.b  ...  ret'
  t:  PI.7   (.--.n.)   ( 40004Axx )  PI.0.addr   1C  Px.b  ...  ret'
  t:  PI.8   (.--.n.)   ( 40004Axx )  PI.0.addr   20  Px.b  ...  ret'
  t:  PI.9   (.--.n.)   ( 40004Axx )  PI.0.addr   24  Px.b  ...  ret'
  t:  PI.10  (.--.n.)   ( 40004Axx )  PI.0.addr   28  Px.b  ...  ret'
  t:  PI.11  (.--.n.)   ( 40004Axx )  PI.0.addr   2C  Px.b  ...  ret'
  t:  PI.12  (.--.n.)   ( 40004Axx )  PI.0.addr   30  Px.b  ...  ret'
  t:  PI.13  (.--.n.)   ( 40004Axx )  PI.0.addr   34  Px.b  ...  ret'
  t:  PI.14  (.--.n.)   ( 40004Axx )  PI.0.addr   38  Px.b  ...  ret'
  t:  PI.15  (.--.n.)   ( 40004Axx )  PI.0.addr   3C  Px.b  ...  ret'

\ t:  PA.0=0   R2=0     L: PA.N=0  R0=40004800  R1=0  R2+R0  (R2)=R1  RET'
\ t:  PA.1=0   R2=4     '' PA.N=0  JMP_#
\ t:  PA.2=0   R2=8     '' PA.N=0  JMP_#
\ t:  PA.3=0   R2=0C    '' PA.N=0  JMP_#

  t:  PA.0=0   (.--.)   40004800 0  (#)=#   ret'
  t:  PA.1=0   (.--.)   40004804 0  (#)=#   ret'
  t:  PA.2=0   (.--.)   40004808 0  (#)=#   ret'
  t:  PA.3=0   (.--.)   4000480C 0  (#)=#   ret'
  t:  PA.4=0   (.--.)   40004810 0  (#)=#   ret'
  t:  PA.5=0   (.--.)   40004814 0  (#)=#   ret'
  t:  PA.6=0   (.--.)   40004818 0  (#)=#   ret'
  t:  PA.7=0   (.--.)   4000481C 0  (#)=#   ret'
  t:  PA.8=0   (.--.)   40004820 0  (#)=#   ret'
  t:  PA.9=0   (.--.)   40004824 0  (#)=#   ret'
  t:  PA.10=0  (.--.)   40004828 0  (#)=#   ret'
  t:  PA.11=0  (.--.)   4000482C 0  (#)=#   ret'
  t:  PA.12=0  (.--.)   40004830 0  (#)=#   ret'
  t:  PA.13=0  (.--.)   40004834 0  (#)=#   ret'
  t:  PA.14=0  (.--.)   40004838 0  (#)=#   ret'
  t:  PA.15=0  (.--.)   4000483C 0  (#)=#   ret'

  t:  PB.0=0   (.--.)   40004840 0  (#)=#   ret'
  t:  PB.1=0   (.--.)   40004844 0  (#)=#   ret'
  t:  PB.2=0   (.--.)   40004848 0  (#)=#   ret'
  t:  PB.3=0   (.--.)   4000484C 0  (#)=#   ret'
  t:  PB.4=0   (.--.)   40004850 0  (#)=#   ret'
  t:  PB.5=0   (.--.)   40004854 0  (#)=#   ret'
  t:  PB.6=0   (.--.)   40004858 0  (#)=#   ret'
  t:  PB.7=0   (.--.)   4000485C 0  (#)=#   ret'
  t:  PB.8=0   (.--.)   40004860 0  (#)=#   ret'
  t:  PB.9=0   (.--.)   40004864 0  (#)=#   ret'
  t:  PB.10=0  (.--.)   40004868 0  (#)=#   ret'
  t:  PB.11=0  (.--.)   4000486C 0  (#)=#   ret'
  t:  PB.12=0  (.--.)   40004870 0  (#)=#   ret'
  t:  PB.13=0  (.--.)   40004874 0  (#)=#   ret'
  t:  PB.14=0  (.--.)   40004878 0  (#)=#   ret'
  t:  PB.15=0  (.--.)   4000487C 0  (#)=#   ret'

  t:  PC.0=0   (.--.)   40004880 0  (#)=#   ret'
  t:  PC.1=0   (.--.)   40004884 0  (#)=#   ret'
  t:  PC.2=0   (.--.)   40004888 0  (#)=#   ret'
  t:  PC.3=0   (.--.)   4000488C 0  (#)=#   ret'
  t:  PC.4=0   (.--.)   40004890 0  (#)=#   ret'
  t:  PC.5=0   (.--.)   40004894 0  (#)=#   ret'
  t:  PC.6=0   (.--.)   40004898 0  (#)=#   ret'
  t:  PC.7=0   (.--.)   4000489C 0  (#)=#   ret'
  t:  PC.8=0   (.--.)   400048A0 0  (#)=#   ret'
  t:  PC.9=0   (.--.)   400048A4 0  (#)=#   ret'
  t:  PC.10=0  (.--.)   400048A8 0  (#)=#   ret'
  t:  PC.11=0  (.--.)   400048AC 0  (#)=#   ret'
  t:  PC.12=0  (.--.)   400048B0 0  (#)=#   ret'
  t:  PC.13=0  (.--.)   400048B4 0  (#)=#   ret'
  t:  PC.14=0  (.--.)   400048B8 0  (#)=#   ret'
  t:  PC.15=0  (.--.)   400048BC 0  (#)=#   ret'

  t:  PD.0=0   (.--.)   400048C0 0  (#)=#   ret'
  t:  PD.1=0   (.--.)   400048C4 0  (#)=#   ret'
  t:  PD.2=0   (.--.)   400048C8 0  (#)=#   ret'
  t:  PD.3=0   (.--.)   400048CC 0  (#)=#   ret'
  t:  PD.4=0   (.--.)   400048D0 0  (#)=#   ret'
  t:  PD.5=0   (.--.)   400048D4 0  (#)=#   ret'
  t:  PD.6=0   (.--.)   400048D8 0  (#)=#   ret'
  t:  PD.7=0   (.--.)   400048DC 0  (#)=#   ret'
  t:  PD.8=0   (.--.)   400048E0 0  (#)=#   ret'
  t:  PD.9=0   (.--.)   400048E4 0  (#)=#   ret'
  t:  PD.10=0  (.--.)   400048E8 0  (#)=#   ret'
  t:  PD.11=0  (.--.)   400048EC 0  (#)=#   ret'
  t:  PD.12=0  (.--.)   400048F0 0  (#)=#   ret'
  t:  PD.13=0  (.--.)   400048F4 0  (#)=#   ret'
  t:  PD.14=0  (.--.)   400048F8 0  (#)=#   ret'
  t:  PD.15=0  (.--.)   400048FC 0  (#)=#   ret'

  t:  PE.0=0   (.--.)   40004900 0  (#)=#   ret'
  t:  PE.1=0   (.--.)   40004904 0  (#)=#   ret'
  t:  PE.2=0   (.--.)   40004908 0  (#)=#   ret'
  t:  PE.3=0   (.--.)   4000490C 0  (#)=#   ret'
  t:  PE.4=0   (.--.)   40004910 0  (#)=#   ret'
  t:  PE.5=0   (.--.)   40004914 0  (#)=#   ret'
  t:  PE.6=0   (.--.)   40004918 0  (#)=#   ret'
  t:  PE.7=0   (.--.)   4000491C 0  (#)=#   ret'
  t:  PE.8=0   (.--.)   40004920 0  (#)=#   ret'
  t:  PE.9=0   (.--.)   40004924 0  (#)=#   ret'
  t:  PE.10=0  (.--.)   40004928 0  (#)=#   ret'
  t:  PE.11=0  (.--.)   4000492C 0  (#)=#   ret'
  t:  PE.12=0  (.--.)   40004930 0  (#)=#   ret'
  t:  PE.13=0  (.--.)   40004934 0  (#)=#   ret'
  t:  PE.14=0  (.--.)   40004938 0  (#)=#   ret'
  t:  PE.15=0  (.--.)   4000493C 0  (#)=#   ret'

  t:  PF.0=0   (.--.)   40004940 0  (#)=#   ret'
  t:  PF.1=0   (.--.)   40004944 0  (#)=#   ret'
  t:  PF.2=0   (.--.)   40004948 0  (#)=#   ret'
  t:  PF.3=0   (.--.)   4000494C 0  (#)=#   ret'
  t:  PF.4=0   (.--.)   40004950 0  (#)=#   ret'
  t:  PF.5=0   (.--.)   40004954 0  (#)=#   ret'
  t:  PF.6=0   (.--.)   40004958 0  (#)=#   ret'
  t:  PF.7=0   (.--.)   4000495C 0  (#)=#   ret'
  t:  PF.8=0   (.--.)   40004960 0  (#)=#   ret'
  t:  PF.9=0   (.--.)   40004964 0  (#)=#   ret'
  t:  PF.10=0  (.--.)   40004968 0  (#)=#   ret'
  t:  PF.11=0  (.--.)   4000496C 0  (#)=#   ret'
  t:  PF.12=0  (.--.)   40004970 0  (#)=#   ret'
  t:  PF.13=0  (.--.)   40004974 0  (#)=#   ret'
  t:  PF.14=0  (.--.)   40004978 0  (#)=#   ret'
  t:  PF.15=0  (.--.)   4000497C 0  (#)=#   ret'

  t:  PG.0=0   (.--.)   40004980 0  (#)=#   ret'
  t:  PG.1=0   (.--.)   40004984 0  (#)=#   ret'
  t:  PG.2=0   (.--.)   40004988 0  (#)=#   ret'
  t:  PG.3=0   (.--.)   4000498C 0  (#)=#   ret'
  t:  PG.4=0   (.--.)   40004990 0  (#)=#   ret'
  t:  PG.5=0   (.--.)   40004994 0  (#)=#   ret'
  t:  PG.6=0   (.--.)   40004998 0  (#)=#   ret'
  t:  PG.7=0   (.--.)   4000499C 0  (#)=#   ret'
  t:  PG.8=0   (.--.)   400049A0 0  (#)=#   ret'
  t:  PG.9=0   (.--.)   400049A4 0  (#)=#   ret'
  t:  PG.10=0  (.--.)   400049A8 0  (#)=#   ret'
  t:  PG.11=0  (.--.)   400049AC 0  (#)=#   ret'
  t:  PG.12=0  (.--.)   400049B0 0  (#)=#   ret'
  t:  PG.13=0  (.--.)   400049B4 0  (#)=#   ret'
  t:  PG.14=0  (.--.)   400049B8 0  (#)=#   ret'
  t:  PG.15=0  (.--.)   400049BC 0  (#)=#   ret'

  t:  PH.0=0   (.--.)   400049C0 0  (#)=#   ret'
  t:  PH.1=0   (.--.)   400049C4 0  (#)=#   ret'
  t:  PH.2=0   (.--.)   400049C8 0  (#)=#   ret'
  t:  PH.3=0   (.--.)   400049CC 0  (#)=#   ret'
  t:  PH.4=0   (.--.)   400049D0 0  (#)=#   ret'
  t:  PH.5=0   (.--.)   400049D4 0  (#)=#   ret'
  t:  PH.6=0   (.--.)   400049D8 0  (#)=#   ret'
  t:  PH.7=0   (.--.)   400049DC 0  (#)=#   ret'
  t:  PH.8=0   (.--.)   400049E0 0  (#)=#   ret'
  t:  PH.9=0   (.--.)   400049E4 0  (#)=#   ret'
  t:  PH.10=0  (.--.)   400049E8 0  (#)=#   ret'
  t:  PH.11=0  (.--.)   400049EC 0  (#)=#   ret'
  t:  PH.12=0  (.--.)   400049F0 0  (#)=#   ret'
  t:  PH.13=0  (.--.)   400049F4 0  (#)=#   ret'
  t:  PH.14=0  (.--.)   400049F8 0  (#)=#   ret'
  t:  PH.15=0  (.--.)   400049FC 0  (#)=#   ret'

  t:  PI.0=0   (.--.)   40004A00 0  (#)=#   ret'
  t:  PI.1=0   (.--.)   40004A04 0  (#)=#   ret'
  t:  PI.2=0   (.--.)   40004A08 0  (#)=#   ret'
  t:  PI.3=0   (.--.)   40004A0C 0  (#)=#   ret'
  t:  PI.4=0   (.--.)   40004A10 0  (#)=#   ret'
  t:  PI.5=0   (.--.)   40004A14 0  (#)=#   ret'
  t:  PI.6=0   (.--.)   40004A18 0  (#)=#   ret'
  t:  PI.7=0   (.--.)   40004A1C 0  (#)=#   ret'
  t:  PI.8=0   (.--.)   40004A20 0  (#)=#   ret'
  t:  PI.9=0   (.--.)   40004A24 0  (#)=#   ret'
  t:  PI.10=0  (.--.)   40004A28 0  (#)=#   ret'
  t:  PI.11=0  (.--.)   40004A2C 0  (#)=#   ret'
  t:  PI.12=0  (.--.)   40004A30 0  (#)=#   ret'
  t:  PI.13=0  (.--.)   40004A34 0  (#)=#   ret'
  t:  PI.14=0  (.--.)   40004A38 0  (#)=#   ret'
  t:  PI.15=0  (.--.)   40004A3C 0  (#)=#   ret'


  t:  PA.0=1   (.--.)   40004800 1  (#)=#   ret'
  t:  PA.1=1   (.--.)   40004804 1  (#)=#   ret'
  t:  PA.2=1   (.--.)   40004808 1  (#)=#   ret'
  t:  PA.3=1   (.--.)   4000480C 1  (#)=#   ret'
  t:  PA.4=1   (.--.)   40004810 1  (#)=#   ret'
  t:  PA.5=1   (.--.)   40004814 1  (#)=#   ret'
  t:  PA.6=1   (.--.)   40004818 1  (#)=#   ret'
  t:  PA.7=1   (.--.)   4000481C 1  (#)=#   ret'
  t:  PA.8=1   (.--.)   40004820 1  (#)=#   ret'
  t:  PA.9=1   (.--.)   40004824 1  (#)=#   ret'
  t:  PA.10=1  (.--.)   40004828 1  (#)=#   ret'
  t:  PA.11=1  (.--.)   4000482C 1  (#)=#   ret'
  t:  PA.12=1  (.--.)   40004830 1  (#)=#   ret'
  t:  PA.13=1  (.--.)   40004834 1  (#)=#   ret'
  t:  PA.14=1  (.--.)   40004838 1  (#)=#   ret'
  t:  PA.15=1  (.--.)   4000483C 1  (#)=#   ret'

  t:  PB.0=1   (.--.)   40004840 1  (#)=#   ret'
  t:  PB.1=1   (.--.)   40004844 1  (#)=#   ret'
  t:  PB.2=1   (.--.)   40004848 1  (#)=#   ret'
  t:  PB.3=1   (.--.)   4000484C 1  (#)=#   ret'
  t:  PB.4=1   (.--.)   40004850 1  (#)=#   ret'
  t:  PB.5=1   (.--.)   40004854 1  (#)=#   ret'
  t:  PB.6=1   (.--.)   40004858 1  (#)=#   ret'
  t:  PB.7=1   (.--.)   4000485C 1  (#)=#   ret'
  t:  PB.8=1   (.--.)   40004860 1  (#)=#   ret'
  t:  PB.9=1   (.--.)   40004864 1  (#)=#   ret'
  t:  PB.10=1  (.--.)   40004868 1  (#)=#   ret'
  t:  PB.11=1  (.--.)   4000486C 1  (#)=#   ret'
  t:  PB.12=1  (.--.)   40004870 1  (#)=#   ret'
  t:  PB.13=1  (.--.)   40004874 1  (#)=#   ret'
  t:  PB.14=1  (.--.)   40004878 1  (#)=#   ret'
  t:  PB.15=1  (.--.)   4000487C 1  (#)=#   ret'

  t:  PC.0=1   (.--.)   40004880 1  (#)=#   ret'
  t:  PC.1=1   (.--.)   40004884 1  (#)=#   ret'
  t:  PC.2=1   (.--.)   40004888 1  (#)=#   ret'
  t:  PC.3=1   (.--.)   4000488C 1  (#)=#   ret'
  t:  PC.4=1   (.--.)   40004890 1  (#)=#   ret'
  t:  PC.5=1   (.--.)   40004894 1  (#)=#   ret'
  t:  PC.6=1   (.--.)   40004898 1  (#)=#   ret'
  t:  PC.7=1   (.--.)   4000489C 1  (#)=#   ret'
  t:  PC.8=1   (.--.)   400048A0 1  (#)=#   ret'
  t:  PC.9=1   (.--.)   400048A4 1  (#)=#   ret'
  t:  PC.10=1  (.--.)   400048A8 1  (#)=#   ret'
  t:  PC.11=1  (.--.)   400048AC 1  (#)=#   ret'
  t:  PC.12=1  (.--.)   400048B0 1  (#)=#   ret'
  t:  PC.13=1  (.--.)   400048B4 1  (#)=#   ret'
  t:  PC.14=1  (.--.)   400048B8 1  (#)=#   ret'
  t:  PC.15=1  (.--.)   400048BC 1  (#)=#   ret'

  t:  PD.0=1   (.--.)   400048C0 1  (#)=#   ret'
  t:  PD.1=1   (.--.)   400048C4 1  (#)=#   ret'
  t:  PD.2=1   (.--.)   400048C8 1  (#)=#   ret'
  t:  PD.3=1   (.--.)   400048CC 1  (#)=#   ret'
  t:  PD.4=1   (.--.)   400048D0 1  (#)=#   ret'
  t:  PD.5=1   (.--.)   400048D4 1  (#)=#   ret'
  t:  PD.6=1   (.--.)   400048D8 1  (#)=#   ret'
  t:  PD.7=1   (.--.)   400048DC 1  (#)=#   ret'
  t:  PD.8=1   (.--.)   400048E0 1  (#)=#   ret'
  t:  PD.9=1   (.--.)   400048E4 1  (#)=#   ret'
  t:  PD.10=1  (.--.)   400048E8 1  (#)=#   ret'
  t:  PD.11=1  (.--.)   400048EC 1  (#)=#   ret'
  t:  PD.12=1  (.--.)   400048F0 1  (#)=#   ret'
  t:  PD.13=1  (.--.)   400048F4 1  (#)=#   ret'
  t:  PD.14=1  (.--.)   400048F8 1  (#)=#   ret'
  t:  PD.15=1  (.--.)   400048FC 1  (#)=#   ret'

  t:  PE.0=1   (.--.)   40004900 1  (#)=#   ret'
  t:  PE.1=1   (.--.)   40004904 1  (#)=#   ret'
  t:  PE.2=1   (.--.)   40004908 1  (#)=#   ret'
  t:  PE.3=1   (.--.)   4000490C 1  (#)=#   ret'
  t:  PE.4=1   (.--.)   40004910 1  (#)=#   ret'
  t:  PE.5=1   (.--.)   40004914 1  (#)=#   ret'
  t:  PE.6=1   (.--.)   40004918 1  (#)=#   ret'
  t:  PE.7=1   (.--.)   4000491C 1  (#)=#   ret'
  t:  PE.8=1   (.--.)   40004920 1  (#)=#   ret'
  t:  PE.9=1   (.--.)   40004924 1  (#)=#   ret'
  t:  PE.10=1  (.--.)   40004928 1  (#)=#   ret'
  t:  PE.11=1  (.--.)   4000492C 1  (#)=#   ret'
  t:  PE.12=1  (.--.)   40004930 1  (#)=#   ret'
  t:  PE.13=1  (.--.)   40004934 1  (#)=#   ret'
  t:  PE.14=1  (.--.)   40004938 1  (#)=#   ret'
  t:  PE.15=1  (.--.)   4000493C 1  (#)=#   ret'

  t:  PF.0=1   (.--.)   40004940 1  (#)=#   ret'
  t:  PF.1=1   (.--.)   40004944 1  (#)=#   ret'
  t:  PF.2=1   (.--.)   40004948 1  (#)=#   ret'
  t:  PF.3=1   (.--.)   4000494C 1  (#)=#   ret'
  t:  PF.4=1   (.--.)   40004950 1  (#)=#   ret'
  t:  PF.5=1   (.--.)   40004954 1  (#)=#   ret'
  t:  PF.6=1   (.--.)   40004958 1  (#)=#   ret'
  t:  PF.7=1   (.--.)   4000495C 1  (#)=#   ret'
  t:  PF.8=1   (.--.)   40004960 1  (#)=#   ret'
  t:  PF.9=1   (.--.)   40004964 1  (#)=#   ret'
  t:  PF.10=1  (.--.)   40004968 1  (#)=#   ret'
  t:  PF.11=1  (.--.)   4000496C 1  (#)=#   ret'
  t:  PF.12=1  (.--.)   40004970 1  (#)=#   ret'
  t:  PF.13=1  (.--.)   40004974 1  (#)=#   ret'
  t:  PF.14=1  (.--.)   40004978 1  (#)=#   ret'
  t:  PF.15=1  (.--.)   4000497C 1  (#)=#   ret'

  t:  PG.0=1   (.--.)   40004980 1  (#)=#   ret'
  t:  PG.1=1   (.--.)   40004984 1  (#)=#   ret'
  t:  PG.2=1   (.--.)   40004988 1  (#)=#   ret'
  t:  PG.3=1   (.--.)   4000498C 1  (#)=#   ret'
  t:  PG.4=1   (.--.)   40004990 1  (#)=#   ret'
  t:  PG.5=1   (.--.)   40004994 1  (#)=#   ret'
  t:  PG.6=1   (.--.)   40004998 1  (#)=#   ret'
  t:  PG.7=1   (.--.)   4000499C 1  (#)=#   ret'
  t:  PG.8=1   (.--.)   400049A0 1  (#)=#   ret'
  t:  PG.9=1   (.--.)   400049A4 1  (#)=#   ret'
  t:  PG.10=1  (.--.)   400049A8 1  (#)=#   ret'
  t:  PG.11=1  (.--.)   400049AC 1  (#)=#   ret'
  t:  PG.12=1  (.--.)   400049B0 1  (#)=#   ret'
  t:  PG.13=1  (.--.)   400049B4 1  (#)=#   ret'
  t:  PG.14=1  (.--.)   400049B8 1  (#)=#   ret'
  t:  PG.15=1  (.--.)   400049BC 1  (#)=#   ret'

  t:  PH.0=1   (.--.)   400049C0 1  (#)=#   ret'
  t:  PH.1=1   (.--.)   400049C4 1  (#)=#   ret'
  t:  PH.2=1   (.--.)   400049C8 1  (#)=#   ret'
  t:  PH.3=1   (.--.)   400049CC 1  (#)=#   ret'
  t:  PH.4=1   (.--.)   400049D0 1  (#)=#   ret'
  t:  PH.5=1   (.--.)   400049D4 1  (#)=#   ret'
  t:  PH.6=1   (.--.)   400049D8 1  (#)=#   ret'
  t:  PH.7=1   (.--.)   400049DC 1  (#)=#   ret'
  t:  PH.8=1   (.--.)   400049E0 1  (#)=#   ret'
  t:  PH.9=1   (.--.)   400049E4 1  (#)=#   ret'
  t:  PH.10=1  (.--.)   400049E8 1  (#)=#   ret'
  t:  PH.11=1  (.--.)   400049EC 1  (#)=#   ret'
  t:  PH.12=1  (.--.)   400049F0 1  (#)=#   ret'
  t:  PH.13=1  (.--.)   400049F4 1  (#)=#   ret'
  t:  PH.14=1  (.--.)   400049F8 1  (#)=#   ret'
  t:  PH.15=1  (.--.)   400049FC 1  (#)=#   ret'

  t:  PI.0=1   (.--.)   40004A00 1  (#)=#   ret'
  t:  PI.1=1   (.--.)   40004A04 1  (#)=#   ret'
  t:  PI.2=1   (.--.)   40004A08 1  (#)=#   ret'
  t:  PI.3=1   (.--.)   40004A0C 1  (#)=#   ret'
  t:  PI.4=1   (.--.)   40004A10 1  (#)=#   ret'
  t:  PI.5=1   (.--.)   40004A14 1  (#)=#   ret'
  t:  PI.6=1   (.--.)   40004A18 1  (#)=#   ret'
  t:  PI.7=1   (.--.)   40004A1C 1  (#)=#   ret'
  t:  PI.8=1   (.--.)   40004A20 1  (#)=#   ret'
  t:  PI.9=1   (.--.)   40004A24 1  (#)=#   ret'
  t:  PI.10=1  (.--.)   40004A28 1  (#)=#   ret'
  t:  PI.11=1  (.--.)   40004A2C 1  (#)=#   ret'
  t:  PI.12=1  (.--.)   40004A30 1  (#)=#   ret'
  t:  PI.13=1  (.--.)   40004A34 1  (#)=#   ret'
  t:  PI.14=1  (.--.)   40004A38 1  (#)=#   ret'
  t:  PI.15=1  (.--.)   40004A3C 1  (#)=#   ret'  

  t:  GPIO_BA     GPIO_BA'           ...  ret'
  
  t:  PA_MODE     GPIO_BA'    0  +.  ...  ret'
  t:  PB_MODE     GPIO_BA'   40  +.  ...  ret'
  t:  PC_MODE     GPIO_BA'   80  +.  ...  ret'
  t:  PD_MODE     GPIO_BA'   C0  +.  ...  ret'
  t:  PE_MODE     GPIO_BA'  100  +.  ...  ret'
  t:  PF_MODE     GPIO_BA'  140  +.  ...  ret'
  t:  PG_MODE     GPIO_BA'  180  +.  ...  ret'
  t:  PH_MODE     GPIO_BA'  1C0  +.  ...  ret'
  t:  PI_MODE     GPIO_BA'  200  +.  ...  ret'

  t:  PA_DINOFF   GPIO_BA'  004  +.  ...  ret'   \  R/W PA Digital Input Path Disable Control  0x0000_0000
  t:  PB_DINOFF   GPIO_BA'  044  +.  ...  ret'   \  R/W PB Digital Input Path Disable Control 0x0000_0000
  t:  PC_DINOFF   GPIO_BA'  084  +.  ...  ret'   \  R/W PC Digital Input Path Disable Control 0x0000_0000
  t:  PD_DINOFF   GPIO_BA'  0C4  +.  ...  ret'   \  R/W PD Digital Input Path Disable Control 0x0000_0000
  t:  PE_DINOFF   GPIO_BA'  104  +.  ...  ret'   \  R/W PE Digital Input Path Disable Control 0x0000_0000
  t:  PF_DINOFF   GPIO_BA'  144  +.  ...  ret'   \  R/W PF Digital Input Path Disable Control 0x0000_0000
  t:  PG_DINOFF   GPIO_BA'  184  +.  ...  ret'   \  R/W PG Digital Input Path Disable Control 0x0000_0000
  t:  PH_DINOFF   GPIO_BA'  1C4  +.  ...  ret'   \  R/W PH Digital Input Path Disable Control 0x0000_0000
  t:  PI_DINOFF   GPIO_BA'  204  +.  ...  ret'   \  R/W PI Digital Input Path Disable Control 0x0000_0000

  t:  PA_DOUT     GPIO_BA'  008  +.  ...  ret'   \  R/W PA Data Output Value 0x0000_FFFF
  t:  PB_DOUT     GPIO_BA'  048  +.  ...  ret'   \  R/W PB Data Output Value 0x0000_FFFF
  t:  PC_DOUT     GPIO_BA'  088  +.  ...  ret'   \  R/W PC Data Output Value 0x0000_FFFF
  t:  PD_DOUT     GPIO_BA'  0C8  +.  ...  ret'   \  R/W PD Data Output Value 0x0000_FFFF
  t:  PE_DOUT     GPIO_BA'  108  +.  ...  ret'   \  R/W PE Data Output Value 0x0000_FFFF
  t:  PF_DOUT     GPIO_BA'  148  +.  ...  ret'   \  R/W PF Data Output Value 0x0000_FFFF
  t:  PG_DOUT     GPIO_BA'  188  +.  ...  ret'   \  R/W PG Data Output Value 0x0000_FFFF
  t:  PH_DOUT     GPIO_BA'  1C8  +.  ...  ret'   \  R/W PH Data Output Value 0x0000_FFFF
  t:  PI_DOUT     GPIO_BA'  208  +.  ...  ret'   \  R/W PI Data Output Value 0x0000_FFFF

#then

comment:
:.  R2=mode.addr    ( port -- )   2  swap  ( PA )  0  >mode.addr  r=#   ;.

t:  PA0.input       ( -- )  PA  R2=mode.addr  r0=0        (r2)=r0  r2+4  (r2)=r0  ret'
t:  PA0.output      ( -- )  PA  R2=mode.addr  r0=0  r1=1  (r2)=r1  r2+4  (r2)=r0  ret'
t:  PA0.open.drain  ( -- )  PA  R2=mode.addr  r0=0  r1=1  (r2)=r0  r2+4  (r2)=r1  ret'
t:  PA0.quasi       ( -- )  PA  R2=mode.addr        r1=1  (r2)=r1  r2+4  (r2)=r1  ret'
comment;

:.  TnFFFF    0  FFFF  r=#   TnR0  ;.

t:  PA@  ( -- n )   2  PA'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PA!  ( n -- )   2  PA'  r=#  (r2)=t  {drop}   ret'
t:  PB@  ( -- n )   2  PB'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PB!  ( n -- )   2  PB'  r=#  (r2)=t  {drop}   ret'
t:  PC@  ( -- n )   2  PC'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PC!  ( n -- )   2  PC'  r=#  (r2)=t  {drop}   ret'
t:  PD@  ( -- n )   2  PD'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PD!  ( n -- )   2  PD'  r=#  (r2)=t  {drop}   ret'
t:  PE@  ( -- n )   2  PE'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PE!  ( n -- )   2  PE'  r=#  (r2)=t  {drop}   ret'
t:  PF@  ( -- n )   2  PF'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PF!  ( n -- )   2  PF'  r=#  (r2)=t  {drop}   ret'
t:  PG@  ( -- n )   2  PG'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PG!  ( n -- )   2  PG'  r=#  (r2)=t  {drop}   ret'
t:  PH@  ( -- n )   2  PH'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PH!  ( n -- )   2  PH'  r=#  (r2)=t  {drop}   ret'
t:  PI@  ( -- n )   2  PI'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PI!  ( n -- )   2  PI'  r=#  (r2)=t  {drop}   ret'
t:  PJ@  ( -- n )   2  PJ'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PJ!  ( n -- )   2  PJ'  r=#  (r2)=t  {drop}   ret'
t:  PK@  ( -- n )   2  PK'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PK!  ( n -- )   2  PK'  r=#  (r2)=t  {drop}   ret'
t:  PL@  ( -- n )   2  PL'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PL!  ( n -- )   2  PL'  r=#  (r2)=t  {drop}   ret'
t:  PM@  ( -- n )   2  PM'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PM!  ( n -- )   2  PM'  r=#  (r2)=t  {drop}   ret'
t:  PN@  ( -- n )   2  PN'  r=#   {dup}  t=(r2)  TnFFFF   ret'    t:  PN!  ( n -- )   2  PN'  r=#  (r2)=t  {drop}   ret'

COMMENT:
t: input           {0}  ret'
t: output          {1}  ret'
t: open.drain      {2}  ret'
t: quasi           {3}  ret'
COMMENT;

t:  PA   40004000  ...  ret'
t:  PB   40004040  ...  ret'
t:  PC   40004080  ...  ret'
t:  PD   400040C0  ...  ret'
t:  PE   40004100  ...  ret'
t:  PF   40004140  ...  ret'
t:  PG   40004180  ...  ret'
t:  PH   400041C0  ...  ret'
t:  PI   40004200  ...  ret'

t:  bit0        1  ...  ret'
t:  bit1        2  ...  ret'
t:  bit2        4  ...  ret'
t:  bit3        8  ...  ret'
t:  bit4       10  ...  ret'
t:  bit5       20  ...  ret'
t:  bit6       40  ...  ret'
t:  bit7       80  ...  ret'
t:  bit8      100  ...  ret'
t:  bit9      200  ...  ret'
t:  bit10     400  ...  ret'
t:  bit11     800  ...  ret'
t:  bit12    1000  ...  ret'
t:  bit13    2000  ...  ret'
t:  bit14    4000  ...  ret'
t:  bit15    8000  ...  ret'

t:  input          {0}  ret'
t:  output         {1}  ret'
t:  open.drain     {2}  ret'
t:  quasi          {3}  ret'

\ t:  mode  ( port bit in/out.. -- )



:. PA.0'    0   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.1'    0   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.2'    0   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.3'    0   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.4'    0   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.5'    0   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.6'    0   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.7'    0   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.8'    0   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.9'    0   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.10'   0  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.11'   0  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.12'   0  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.13'   0  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.14'   0  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PA.15'   0  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PB.0'    1   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.1'    1   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.2'    1   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.3'    1   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.4'    1   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.5'    1   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.6'    1   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.7'    1   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.8'    1   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.9'    1   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.10'   1  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE    \ 40004868
:. PB.11'   1  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE    \ 4000486C
:. PB.12'   1  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.13'   1  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.14'   1  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PB.15'   1  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PC.0'    2   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.1'    2   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.2'    2   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.3'    2   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.4'    2   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.5'    2   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.6'    2   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.7'    2   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.8'    2   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.9'    2   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.10'   2  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.11'   2  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.12'   2  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.13'   2  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.14'   2  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PC.15'   2  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PD.0'    3   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.1'    3   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.2'    3   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.3'    3   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.4'    3   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.5'    3   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.6'    3   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.7'    3   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.8'    3   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.9'    3   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.10'   3  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.11'   3  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.12'   3  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.13'   3  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.14'   3  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PD.15'   3  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PE.0'    4   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.1'    4   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.2'    4   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.3'    4   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.4'    4   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.5'    4   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.6'    4   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.7'    4   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.8'    4   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.9'    4   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.10'   4  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.11'   4  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.12'   4  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.13'   4  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.14'   4  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PE.15'   4  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PF.0'    5   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.1'    5   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.2'    5   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.3'    5   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.4'    5   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.5'    5   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.6'    5   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.7'    5   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.8'    5   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.9'    5   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.10'   5  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.11'   5  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.12'   5  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.13'   5  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.14'   5  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PF.15'   5  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PG.0'    6   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.1'    6   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.2'    6   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.3'    6   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.4'    6   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.5'    6   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.6'    6   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.7'    6   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.8'    6   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.9'    6   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.10'   6  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.11'   6  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.12'   6  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.13'   6  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.14'   6  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PG.15'   6  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PH.0'    7   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.1'    7   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.2'    7   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.3'    7   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.4'    7   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.5'    7   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.6'    7   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.7'    7   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.8'    7   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.9'    7   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.10'   7  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.11'   7  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.12'   7  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.13'   7  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.14'   7  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PH.15'   7  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

:. PI.0'    8   0  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.1'    8   1  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.2'    8   2  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.3'    8   3  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.4'    8   4  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.5'    8   5  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.6'    8   6  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.7'    8   7  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.8'    8   8  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.9'    8   9  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.10'   8  0a  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.11'   8  0b  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.12'   8  0c  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.13'   8  0d  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.14'   8  0e  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
:. PI.15'   8  0f  GPIO_PIN_ADDR'  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE


:. PA.0=0'    PA.0'   0   (#)=#  ;.     :. PA.0=1'    PA.0'   1   (#)=#  ;.
:. PA.1=0'    PA.1'   0   (#)=#  ;.     :. PA.1=1'    PA.1'   1   (#)=#  ;.
:. PA.2=0'    PA.2'   0   (#)=#  ;.     :. PA.2=1'    PA.2'   1   (#)=#  ;.
:. PA.3=0'    PA.3'   0   (#)=#  ;.     :. PA.3=1'    PA.3'   1   (#)=#  ;.
:. PA.4=0'    PA.4'   0   (#)=#  ;.     :. PA.4=1'    PA.4'   1   (#)=#  ;.
:. PA.5=0'    PA.5'   0   (#)=#  ;.     :. PA.5=1'    PA.5'   1   (#)=#  ;.
:. PA.6=0'    PA.6'   0   (#)=#  ;.     :. PA.6=1'    PA.6'   1   (#)=#  ;.
:. PA.7=0'    PA.7'   0   (#)=#  ;.     :. PA.7=1'    PA.7'   1   (#)=#  ;.
:. PA.8=0'    PA.8'   0   (#)=#  ;.     :. PA.8=1'    PA.8'   1   (#)=#  ;.
:. PA.9=0'    PA.9'   0   (#)=#  ;.     :. PA.9=1'    PA.9'   1   (#)=#  ;.
:. PA.10=0'   PA.10'  0   (#)=#  ;.     :. PA.10=1'   PA.10'  1   (#)=#  ;.
:. PA.11=0'   PA.11'  0   (#)=#  ;.     :. PA.11=1'   PA.11'  1   (#)=#  ;.
:. PA.12=0'   PA.12'  0   (#)=#  ;.     :. PA.12=1'   PA.12'  1   (#)=#  ;.
:. PA.13=0'   PA.13'  0   (#)=#  ;.     :. PA.13=1'   PA.13'  1   (#)=#  ;.
:. PA.14=0'   PA.14'  0   (#)=#  ;.     :. PA.14=1'   PA.14'  1   (#)=#  ;.
:. PA.15=0'   PA.15'  0   (#)=#  ;.     :. PA.15=1'   PA.15'  1   (#)=#  ;.


:. PB.0=0'    PB.0'   0   (#)=#  ;.     :. PB.0=1'    PB.0'   1   (#)=#  ;.
:. PB.1=0'    PB.1'   0   (#)=#  ;.     :. PB.1=1'    PB.1'   1   (#)=#  ;.
:. PB.2=0     PB.2'   0   (#)=#  ;.     :. PB.2=1'    PB.2'   1   (#)=#  ;.
:. PB.3=0'    PB.3'   0   (#)=#  ;.     :. PB.3=1'    PB.3'   1   (#)=#  ;.
:. PB.4=0'    PB.4'   0   (#)=#  ;.     :. PB.4=1'    PB.4'   1   (#)=#  ;.
:. PB.5=0'    PB.5'   0   (#)=#  ;.     :. PB.5=1'    PB.5'   1   (#)=#  ;.
:. PB.6=0'    PB.6'   0   (#)=#  ;.     :. PB.6=1'    PB.6'   1   (#)=#  ;.
:. PB.7=0'    PB.7'   0   (#)=#  ;.     :. PB.7=1'    PB.7'   1   (#)=#  ;.
:. PB.8=0'    PB.8'   0   (#)=#  ;.     :. PB.8=1'    PB.8'   1   (#)=#  ;.
:. PB.9=0'    PB.9'   0   (#)=#  ;.     :. PB.9=1'    PB.9'   1   (#)=#  ;.
:. PB.10=0'   PB.10'  0   (#)=#  ;.     :. PB.10=1'   PB.10'  1   (#)=#  ;.
:. PB.11=0'   PB.11'  0   (#)=#  ;.     :. PB.11=1'   PB.11'  1   (#)=#  ;.
:. PB.12=0'   PB.12'  0   (#)=#  ;.     :. PB.12=1'   PB.12'  1   (#)=#  ;.
:. PB.13=0'   PB.13'  0   (#)=#  ;.     :. PB.13=1'   PB.13'  1   (#)=#  ;.
:. PB.14=0'   PB.14'  0   (#)=#  ;.     :. PB.14=1'   PB.14'  1   (#)=#  ;.
:. PB.15=0'   PB.15'  0   (#)=#  ;.     :. PB.15=1'   PB.15'  1   (#)=#  ;.


:. PC.0=0'    PC.0'   0   (#)=#  ;.     :. PC.0=1'    PC.0'   1   (#)=#  ;.
:. PC.1=0'    PC.1'   0   (#)=#  ;.     :. PC.1=1'    PC.1'   1   (#)=#  ;.
:. PC.2=0'    PC.2'   0   (#)=#  ;.     :. PC.2=1'    PC.2'   1   (#)=#  ;.
:. PC.3=0'    PC.3'   0   (#)=#  ;.     :. PC.3=1'    PC.3'   1   (#)=#  ;.
:. PC.4=0'    PC.4'   0   (#)=#  ;.     :. PC.4=1'    PC.4'   1   (#)=#  ;.
:. PC.5=0'    PC.5'   0   (#)=#  ;.     :. PC.5=1'    PC.5'   1   (#)=#  ;.
:. PC.6=0'    PC.6'   0   (#)=#  ;.     :. PC.6=1'    PC.6'   1   (#)=#  ;.
:. PC.7=0'    PC.7'   0   (#)=#  ;.     :. PC.7=1'    PC.7'   1   (#)=#  ;.
:. PC.8=0'    PC.8'   0   (#)=#  ;.     :. PC.8=1'    PC.8'   1   (#)=#  ;.
:. PC.9=0'    PC.9'   0   (#)=#  ;.     :. PC.9=1'    PC.9'   1   (#)=#  ;.
:. PC.10=0'   PC.10'  0   (#)=#  ;.     :. PC.10=1'   PC.10'  1   (#)=#  ;.
:. PC.11=0'   PC.11'  0   (#)=#  ;.     :. PC.11=1'   PC.11'  1   (#)=#  ;.
:. PC.12=0'   PC.12'  0   (#)=#  ;.     :. PC.12=1'   PC.12'  1   (#)=#  ;.
:. PC.13=0'   PC.13'  0   (#)=#  ;.     :. PC.13=1'   PC.13'  1   (#)=#  ;.
:. PC.14=0'   PC.14'  0   (#)=#  ;.     :. PC.14=1'   PC.14'  1   (#)=#  ;.
:. PC.15=0'   PC.15'  0   (#)=#  ;.     :. PC.15=1'   PC.15'  1   (#)=#  ;.

:. PD.0=0'    PD.0'   0   (#)=#  ;.     :. PD.0=1'    PD.0'   1   (#)=#  ;.
:. PD.1=0'    PD.1'   0   (#)=#  ;.     :. PD.1=1'    PD.1'   1   (#)=#  ;.
:. PD.2=0'    PD.2'   0   (#)=#  ;.     :. PD.2=1'    PD.2'   1   (#)=#  ;.
:. PD.3=0'    PD.3'   0   (#)=#  ;.     :. PD.3=1'    PD.3'   1   (#)=#  ;.
:. PD.4=0'    PD.4'   0   (#)=#  ;.     :. PD.4=1'    PD.4'   1   (#)=#  ;.
:. PD.5=0'    PD.5'   0   (#)=#  ;.     :. PD.5=1'    PD.5'   1   (#)=#  ;.
:. PD.6=0'    PD.6'   0   (#)=#  ;.     :. PD.6=1'    PD.6'   1   (#)=#  ;.
:. PD.7=0'    PD.7'   0   (#)=#  ;.     :. PD.7=1'    PD.7'   1   (#)=#  ;.
:. PD.8=0'    PD.8'   0   (#)=#  ;.     :. PD.8=1'    PD.8'   1   (#)=#  ;.
:. PD.9=0'    PD.9'   0   (#)=#  ;.     :. PD.9=1'    PD.9'   1   (#)=#  ;.
:. PD.10=0'   PD.10'  0   (#)=#  ;.     :. PD.10=1'   PD.10'  1   (#)=#  ;.
:. PD.11=0'   PD.11'  0   (#)=#  ;.     :. PD.11=1'   PD.11'  1   (#)=#  ;.
:. PD.12=0'   PD.12'  0   (#)=#  ;.     :. PD.12=1'   PD.12'  1   (#)=#  ;.
:. PD.13=0'   PD.13'  0   (#)=#  ;.     :. PD.13=1'   PD.13'  1   (#)=#  ;.
:. PD.14=0'   PD.14'  0   (#)=#  ;.     :. PD.14=1'   PD.14'  1   (#)=#  ;.
:. PD.15=0'   PD.15'  0   (#)=#  ;.     :. PD.15=1'   PD.15'  1   (#)=#  ;.


:. PE.0=0'    PE.0'   0   (#)=#  ;.     :. PE.0=1'    PE.0'   1   (#)=#  ;.
:. PE.1=0'    PE.1'   0   (#)=#  ;.     :. PE.1=1'    PE.1'   1   (#)=#  ;.
:. PE.2=0'    PE.2'   0   (#)=#  ;.     :. PE.2=1'    PE.2'   1   (#)=#  ;.
:. PE.3=0'    PE.3'   0   (#)=#  ;.     :. PE.3=1'    PE.3'   1   (#)=#  ;.
:. PE.4=0'    PE.4'   0   (#)=#  ;.     :. PE.4=1'    PE.4'   1   (#)=#  ;.
:. PE.5=0'    PE.5'   0   (#)=#  ;.     :. PE.5=1'    PE.5'   1   (#)=#  ;.
:. PE.6=0'    PE.6'   0   (#)=#  ;.     :. PE.6=1'    PE.6'   1   (#)=#  ;.
:. PE.7=0'    PE.7'   0   (#)=#  ;.     :. PE.7=1'    PE.7'   1   (#)=#  ;.
:. PE.8=0'    PE.8'   0   (#)=#  ;.     :. PE.8=1'    PE.8'   1   (#)=#  ;.
:. PE.9=0'    PE.9'   0   (#)=#  ;.     :. PE.9=1'    PE.9'   1   (#)=#  ;.
:. PE.10=0'   PE.10'  0   (#)=#  ;.     :. PE.10=1'   PE.10'  1   (#)=#  ;.
:. PE.11=0'   PE.11'  0   (#)=#  ;.     :. PE.11=1'   PE.11'  1   (#)=#  ;.
:. PE.12=0'   PE.12'  0   (#)=#  ;.     :. PE.12=1'   PE.12'  1   (#)=#  ;.
:. PE.13=0'   PE.13'  0   (#)=#  ;.     :. PE.13=1'   PE.13'  1   (#)=#  ;.
:. PE.14=0'   PE.14'  0   (#)=#  ;.     :. PE.14=1'   PE.14'  1   (#)=#  ;.
:. PE.15=0'   PE.15'  0   (#)=#  ;.     :. PE.15=1'   PE.15'  1   (#)=#  ;.


:. PF.0=0'    PF.0'   0   (#)=#  ;.     :. PF.0=1'    PF.0'   1   (#)=#  ;.
:. PF.1=0'    PF.1'   0   (#)=#  ;.     :. PF.1=1'    PF.1'   1   (#)=#  ;.
:. PF.2=0'    PF.2'   0   (#)=#  ;.     :. PF.2=1'    PF.2'   1   (#)=#  ;.
:. PF.3=0'    PF.3'   0   (#)=#  ;.     :. PF.3=1'    PF.3'   1   (#)=#  ;.
:. PF.4=0'    PF.4'   0   (#)=#  ;.     :. PF.4=1'    PF.4'   1   (#)=#  ;.
:. PF.5=0'    PF.5'   0   (#)=#  ;.     :. PF.5=1'    PF.5'   1   (#)=#  ;.
:. PF.6=0'    PF.6'   0   (#)=#  ;.     :. PF.6=1'    PF.6'   1   (#)=#  ;.
:. PF.7=0'    PF.7'   0   (#)=#  ;.     :. PF.7=1'    PF.7'   1   (#)=#  ;.
:. PF.8=0'    PF.8'   0   (#)=#  ;.     :. PF.8=1'    PF.8'   1   (#)=#  ;.
:. PF.9=0'    PF.9'   0   (#)=#  ;.     :. PF.9=1'    PF.9'   1   (#)=#  ;.
:. PF.10=0'   PF.10'  0   (#)=#  ;.     :. PF.10=1'   PF.10'  1   (#)=#  ;.
:. PF.11=0'   PF.11'  0   (#)=#  ;.     :. PF.11=1'   PF.11'  1   (#)=#  ;.
:. PF.12=0'   PF.12'  0   (#)=#  ;.     :. PF.12=1'   PF.12'  1   (#)=#  ;.
:. PF.13=0'   PF.13'  0   (#)=#  ;.     :. PF.13=1'   PF.13'  1   (#)=#  ;.
:. PF.14=0'   PF.14'  0   (#)=#  ;.     :. PF.14=1'   PF.14'  1   (#)=#  ;.
:. PF.15=0'   PF.15'  0   (#)=#  ;.     :. PF.15=1'   PF.15'  1   (#)=#  ;.


:. PG.0=0'    PG.0'   0   (#)=#  ;.     :. PG.0=1'    PG.0'   1   (#)=#  ;.
:. PG.1=0'    PG.1'   0   (#)=#  ;.     :. PG.1=1'    PG.1'   1   (#)=#  ;.
:. PG.2=0'    PG.2'   0   (#)=#  ;.     :. PG.2=1'    PG.2'   1   (#)=#  ;.
:. PG.3=0'    PG.3'   0   (#)=#  ;.     :. PG.3=1'    PG.3'   1   (#)=#  ;.
:. PG.4=0'    PG.4'   0   (#)=#  ;.     :. PG.4=1'    PG.4'   1   (#)=#  ;.
:. PG.5=0'    PG.5'   0   (#)=#  ;.     :. PG.5=1'    PG.5'   1   (#)=#  ;.
:. PG.6=0'    PG.6'   0   (#)=#  ;.     :. PG.6=1'    PG.6'   1   (#)=#  ;.
:. PG.7=0'    PG.7'   0   (#)=#  ;.     :. PG.7=1'    PG.7'   1   (#)=#  ;.
:. PG.8=0'    PG.8'   0   (#)=#  ;.     :. PG.8=1'    PG.8'   1   (#)=#  ;.
:. PG.9=0'    PG.9'   0   (#)=#  ;.     :. PG.9=1'    PG.9'   1   (#)=#  ;.
:. PG.10=0'   PG.10'  0   (#)=#  ;.     :. PG.10=1'   PG.10'  1   (#)=#  ;.
:. PG.11=0'   PG.11'  0   (#)=#  ;.     :. PG.11=1'   PG.11'  1   (#)=#  ;.
:. PG.12=0'   PG.12'  0   (#)=#  ;.     :. PG.12=1'   PG.12'  1   (#)=#  ;.
:. PG.13=0'   PG.13'  0   (#)=#  ;.     :. PG.13=1'   PG.13'  1   (#)=#  ;.
:. PG.14=0'   PG.14'  0   (#)=#  ;.     :. PG.14=1'   PG.14'  1   (#)=#  ;.
:. PG.15=0'   PG.15'  0   (#)=#  ;.     :. PG.15=1'   PG.15'  1   (#)=#  ;.


:. PH.0=0'    PH.0'   0   (#)=#  ;.     :. PH.0=1'    PH.0'   1   (#)=#  ;.
:. PH.1=0'    PH.1'   0   (#)=#  ;.     :. PH.1=1'    PH.1'   1   (#)=#  ;.
:. PH.2=0'    PH.2'   0   (#)=#  ;.     :. PH.2=1'    PH.2'   1   (#)=#  ;.
:. PH.3=0'    PH.3'   0   (#)=#  ;.     :. PH.3=1'    PH.3'   1   (#)=#  ;.
:. PH.4=0'    PH.4'   0   (#)=#  ;.     :. PH.4=1'    PH.4'   1   (#)=#  ;.
:. PH.5=0'    PH.5'   0   (#)=#  ;.     :. PH.5=1'    PH.5'   1   (#)=#  ;.
:. PH.6=0'    PH.6'   0   (#)=#  ;.     :. PH.6=1'    PH.6'   1   (#)=#  ;.
:. PH.7=0'    PH.7'   0   (#)=#  ;.     :. PH.7=1'    PH.7'   1   (#)=#  ;.
:. PH.8=0'    PH.8'   0   (#)=#  ;.     :. PH.8=1'    PH.8'   1   (#)=#  ;.
:. PH.9=0'    PH.9'   0   (#)=#  ;.     :. PH.9=1'    PH.9'   1   (#)=#  ;.
:. PH.10=0'   PH.10'  0   (#)=#  ;.     :. PH.10=1'   PH.10'  1   (#)=#  ;.
:. PH.11=0'   PH.11'  0   (#)=#  ;.     :. PH.11=1'   PH.11'  1   (#)=#  ;.
:. PH.12=0'   PH.12'  0   (#)=#  ;.     :. PH.12=1'   PH.12'  1   (#)=#  ;.
:. PH.13=0'   PH.13'  0   (#)=#  ;.     :. PH.13=1'   PH.13'  1   (#)=#  ;.
:. PH.14=0'   PH.14'  0   (#)=#  ;.     :. PH.14=1'   PH.14'  1   (#)=#  ;.
:. PH.15=0'   PH.15'  0   (#)=#  ;.     :. PH.15=1'   PH.15'  1   (#)=#  ;.


:. PI.0=0'    PI.0'   0   (#)=#  ;.     :. PI.0=1'    PI.0'   1   (#)=#  ;.
:. PI.1=0'    PI.1'   0   (#)=#  ;.     :. PI.1=1'    PI.1'   1   (#)=#  ;.
:. PI.2=0'    PI.2'   0   (#)=#  ;.     :. PI.2=1'    PI.2'   1   (#)=#  ;.
:. PI.3=0'    PI.3'   0   (#)=#  ;.     :. PI.3=1'    PI.3'   1   (#)=#  ;.
:. PI.4=0'    PI.4'   0   (#)=#  ;.     :. PI.4=1'    PI.4'   1   (#)=#  ;.
:. PI.5=0'    PI.5'   0   (#)=#  ;.     :. PI.5=1'    PI.5'   1   (#)=#  ;.
:. PI.6=0'    PI.6'   0   (#)=#  ;.     :. PI.6=1'    PI.6'   1   (#)=#  ;.
:. PI.7=0'    PI.7'   0   (#)=#  ;.     :. PI.7=1'    PI.7'   1   (#)=#  ;.
:. PI.8=0'    PI.8'   0   (#)=#  ;.     :. PI.8=1'    PI.8'   1   (#)=#  ;.
:. PI.9=0'    PI.9'   0   (#)=#  ;.     :. PI.9=1'    PI.9'   1   (#)=#  ;.
:. PI.10=0'   PI.10'  0   (#)=#  ;.     :. PI.10=1'   PI.10'  1   (#)=#  ;.
:. PI.11=0'   PI.11'  0   (#)=#  ;.     :. PI.11=1'   PI.11'  1   (#)=#  ;.
:. PI.12=0'   PI.12'  0   (#)=#  ;.     :. PI.12=1'   PI.12'  1   (#)=#  ;.
:. PI.13=0'   PI.13'  0   (#)=#  ;.     :. PI.13=1'   PI.13'  1   (#)=#  ;.
:. PI.14=0'   PI.14'  0   (#)=#  ;.     :. PI.14=1'   PI.14'  1   (#)=#  ;.
:. PI.15=0'   PI.15'  0   (#)=#  ;.     :. PI.15=1'   PI.15'  1   (#)=#  ;.

\ Flash and SRAM Memory Space  0x0000_0000 V 0x0007_FFFF
:. FLASH_BA'          0  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ FLASH Memory Space (512KB)  0x2000_0000 V 0x2000_FFFF
:. SRAM_BA'    20000000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ SRAM Memory Space (64KB)  0x6000_0000 V 0x6FFF_FFFF
:. EXTMEM_BA'  60000000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ External Memory Space (256MB) Peripheral Controllers Space (0x4000_0000 V 0x400F_FFFF) 0x4000_0000 V 0x4000_01FF
:. SYS_BA'     40000000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ System Control Registers  0x4000_0200 V 0x4000_02FF
:. CLK_BA'     40000200  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Clock Control Registers  0x4000_0300 V 0x4000_03FF
:. NMI_BA'     40000300  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Interrupt Multiplexer Control Registers   0x4000_4000 V 0x4000_4FFF
:. GPIO_BA'    40004000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ GPIO Control Registers   0x4000_8000 V 0x4000_8FFF
:. PDMA_BA'    40008000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Peripheral DMA Control Registers  0x4000_9000 V 0x4000_9FFF
:. USBH_BA'    40009000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ USB Host Control Registers 0x4000_B000 V 0x4000_BFFF
:. EMAC_BA'    4000B000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Ethernet MAC Control Registers (NUC472 only) 0x4000_C000 V 0x4000_CFFF
:. FMC_BA'     4000C000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Flash Memory Control Registers  0x4000_D000 V 0x4000_DFFF
:. SDH_BA'     4000D000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ SD HOST Control Registers  0x4001_0000 V 0x4001_0FFF
:. EBI_BA'     40010000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ External Bus Interface Control Registers  0x4001_9000 V 0x4001_9FFF
:. USBD_BA'    40019000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ USB device Control Registers  0x4003_0000 V 0x4003_0FFF
:. CAP_BA'     40030000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Image Capture interface Registers  0x4003_1000 V 0x4003_1FFF
:. CRC_BA'     40031000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ CRC Generator Registers  0x5000_8000 V 0x5000_FFFF
:. CRYP_BA'    50008000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Cryptographic Accelerator Registers  APB Controllers Space (0x4000_0000 ~ 0x400F_FFFF) 0x4004_0000 V 0x4004_0FFF
:. WDT_BA'     40040000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Watchdog Timer Control Registers  0x4004_1000 V 0x4004_1FFF
:. RTC_BA'     40041000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Real Time Clock (RTC) Control Register   0x4004_3000 V 0x4004_3FFF
:. ADC_BA'     40043000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Analog-Digital-Converter (ADC) Control Registers   0x4004_4000 V 0x4004_4FFF
:. EADC_BA'    40044000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Enhance Analog-Digital-Converter (ADC) Control Registers   0x4004_5000 V 0x4004_5FFF
:. ACMP_BA'    40045000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ Analog Comparator Control Registers   0x4004_6000 V 0x4004_6FFF
:. OPA_BA'     40046000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ OP Amplifier Control Registers    0x4004_8000 V 0x4004_8FFF
:. I2S0_BA'    40048000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ I2S0 Interface Control Registers  0x4004_9000 V 0x4004_9FFF
:. I2S1_BA'    40049000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE

\ I2S1 Interface Control Registers  0x4004_D000 V 0x4004_DFFF
:. OTG_BA'     4004D000  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE
\ ===================================================================================================
:. PA_MODE'     GPIO_BA'  0x000  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA I/O Mode Control                      0xFFFF_FFFF
:. PA_DINOFF'   GPIO_BA'  0x004  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Digital Input Path Disable Control    0x0000_0000
:. PA_DOUT'     GPIO_BA'  0x008  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Data Output Value                     0x0000_FFFF
:. PA_DATMSK'   GPIO_BA'  0x00C  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Data Output Write Mask                0x0000_0000
:. PA_PIN'      GPIO_BA'  0x010  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PA Pin Value                             0x0000_XXXX
:. PA_DBEN'     GPIO_BA'  0x014  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA De-Bounce Enable Control              0x0000_0000
:. PA_INTTYPE'  GPIO_BA'  0x018  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Interrupt Trigger Type Register       0x0000_0000
:. PA_INTEN'    GPIO_BA'  0x01C  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Interrupt Enable                      0x0000_0000
:. PA_INTSRC'   GPIO_BA'  0x020  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Interrupt Source Flag                 0x0000_XXXX
:. PA_SMTEN'    GPIO_BA'  0x024  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA Input Schmitt Trigger Enable          0x0000_0000
:. PA_SLEWCTL'  GPIO_BA'  0x028  +.          dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PA High Slew Rate Control                0x0000_0000

:. PB_MODE'     GPIO_BA'  0x000  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB I/O Mode Control                      0xFFFF_FFFF
:. PB_DINOFF'   GPIO_BA'  0x004  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Digital Input PBth Disable Control    0x0000_0000
:. PB_DOUT'     GPIO_BA'  0x008  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Data Output Value                     0x0000_FFFF
:. PB_DATMSK'   GPIO_BA'  0x00C  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Data Output Write Mask                0x0000_0000
:. PB_PIN'      GPIO_BA'  0x010  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PB Pin Value                             0x0000_XXXX
:. PB_DBEN'     GPIO_BA'  0x014  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB De-Bounce Enable Control              0x0000_0000
:. PB_INTTYPE'  GPIO_BA'  0x018  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Interrupt Trigger Type Register       0x0000_0000
:. PB_INTEN'    GPIO_BA'  0x01C  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Interrupt Enable                      0x0000_0000
:. PB_INTSRC'   GPIO_BA'  0x020  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Interrupt Source Flag                 0x0000_XXXX
:. PB_SMTEN'    GPIO_BA'  0x024  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB Input Schmitt Trigger Enable          0x0000_0000
:. PB_SLEWCTL'  GPIO_BA'  0x028  +.   40  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PB High Slew Rate Control                0x0000_0000

:. PC_MODE'     GPIO_BA'  0x000  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC I/O Mode Control                      0xFFFF_FFFF
:. PC_DINOFF'   GPIO_BA'  0x004  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Digital Input PCth Disable Control    0x0000_0000
:. PC_DOUT'     GPIO_BA'  0x008  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Data Output Value                     0x0000_FFFF
:. PC_DATMSK'   GPIO_BA'  0x00C  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Data Output Write Mask                0x0000_0000
:. PC_PIN'      GPIO_BA'  0x010  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PC Pin Value                             0x0000_XXXX
:. PC_DBEN'     GPIO_BA'  0x014  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC De-Bounce Enable Control              0x0000_0000
:. PC_INTTYPE'  GPIO_BA'  0x018  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Interrupt Trigger Type Register       0x0000_0000
:. PC_INTEN'    GPIO_BA'  0x01C  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Interrupt Enable                      0x0000_0000
:. PC_INTSRC'   GPIO_BA'  0x020  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Interrupt Source Flag                 0x0000_XXXX
:. PC_SMTEN'    GPIO_BA'  0x024  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC Input Schmitt Trigger Enable          0x0000_0000
:. PC_SLEWCTL'  GPIO_BA'  0x028  +.   80  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PC High Slew Rate Control                0x0000_0000

:. PD_MODE'     GPIO_BA'  0x000  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD I/O Mode Control                      0xFFFF_FFFF
:. PD_DINOFF'   GPIO_BA'  0x004  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Digital Input PDth Disable Control    0x0000_0000
:. PD_DOUT'     GPIO_BA'  0x008  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Data Output Value                     0x0000_FFFF
:. PD_DATMSK'   GPIO_BA'  0x00C  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Data Output Write Mask                0x0000_0000
:. PD_PIN'      GPIO_BA'  0x010  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PD Pin Value                             0x0000_XXXX
:. PD_DBEN'     GPIO_BA'  0x014  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD De-Bounce Enable Control              0x0000_0000
:. PD_INTTYPE'  GPIO_BA'  0x018  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Interrupt Trigger Type Register       0x0000_0000
:. PD_INTEN'    GPIO_BA'  0x01C  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Interrupt Enable                      0x0000_0000
:. PD_INTSRC'   GPIO_BA'  0x020  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Interrupt Source Flag                 0x0000_XXXX
:. PD_SMTEN'    GPIO_BA'  0x024  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD Input Schmitt Trigger Enable          0x0000_0000
:. PD_SLEWCTL'  GPIO_BA'  0x028  +.  0C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PD High Slew Rate Control                0x0000_0000

:. PE_MODE'     GPIO_BA'  0x000  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE I/O Mode Control                      0xFFFF_FFFF
:. PE_DINOFF'   GPIO_BA'  0x004  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Digital Input PEth Disable Control    0x0000_0000
:. PE_DOUT'     GPIO_BA'  0x008  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Data Output Value                     0x0000_FFFF
:. PE_DATMSK'   GPIO_BA'  0x00C  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Data Output Write Mask                0x0000_0000
:. PE_PIN'      GPIO_BA'  0x010  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PE Pin Value                             0x0000_XXXX
:. PE_DBEN'     GPIO_BA'  0x014  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE De-Bounce Enable Control              0x0000_0000
:. PE_INTTYPE'  GPIO_BA'  0x018  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Interrupt Trigger Type Register       0x0000_0000
:. PE_INTEN'    GPIO_BA'  0x01C  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Interrupt Enable                      0x0000_0000
:. PE_INTSRC'   GPIO_BA'  0x020  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Interrupt Source Flag                 0x0000_XXXX
:. PE_SMTEN'    GPIO_BA'  0x024  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE Input Schmitt Trigger Enable          0x0000_0000
:. PE_SLEWCTL'  GPIO_BA'  0x028  +.  100  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PE High Slew Rate Control                0x0000_0000

:. PF_MODE'     GPIO_BA'  0x000  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF I/O Mode Control                      0xFFFF_FFFF
:. PF_DINOFF'   GPIO_BA'  0x004  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Digital Input PFth Disable Control    0x0000_0000
:. PF_DOUT'     GPIO_BA'  0x008  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Data Output Value                     0x0000_FFFF
:. PF_DATMSK'   GPIO_BA'  0x00C  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Data Output Write Mask                0x0000_0000
:. PF_PIN'      GPIO_BA'  0x010  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PF Pin Value                             0x0000_XXXX
:. PF_DBEN'     GPIO_BA'  0x014  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF De-Bounce Enable Control              0x0000_0000
:. PF_INTTYPE'  GPIO_BA'  0x018  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Interrupt Trigger Type Register       0x0000_0000
:. PF_INTEN'    GPIO_BA'  0x01C  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Interrupt Enable                      0x0000_0000
:. PF_INTSRC'   GPIO_BA'  0x020  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Interrupt Source Flag                 0x0000_XXXX
:. PF_SMTEN'    GPIO_BA'  0x024  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF Input Schmitt Trigger Enable          0x0000_0000
:. PF_SLEWCTL'  GPIO_BA'  0x028  +.  140  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PF High Slew Rate Control                0x0000_0000

:. PG_MODE'     GPIO_BA'  0x000  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG I/O Mode Control                      0xFFFF_FFFF
:. PG_DINOFF'   GPIO_BA'  0x004  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Digital Input PGth Disable Control    0x0000_0000
:. PG_DOUT'     GPIO_BA'  0x008  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Data Output Value                     0x0000_FFFF
:. PG_DATMSK'   GPIO_BA'  0x00C  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Data Output Write Mask                0x0000_0000
:. PG_PIN'      GPIO_BA'  0x010  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PG Pin Value                             0x0000_XXXX
:. PG_DBEN'     GPIO_BA'  0x014  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG De-Bounce Enable Control              0x0000_0000
:. PG_INTTYPE'  GPIO_BA'  0x018  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Interrupt Trigger Type Register       0x0000_0000
:. PG_INTEN'    GPIO_BA'  0x01C  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Interrupt Enable                      0x0000_0000
:. PG_INTSRC'   GPIO_BA'  0x020  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Interrupt Source Flag                 0x0000_XXXX
:. PG_SMTEN'    GPIO_BA'  0x024  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG Input Schmitt Trigger Enable          0x0000_0000
:. PG_SLEWCTL'  GPIO_BA'  0x028  +.  180  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PG High Slew Rate Control                0x0000_0000

:. PH_MODE'     GPIO_BA'  0x000  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH I/O Mode Control                      0xFFFF_FFFF
:. PH_DINOFF'   GPIO_BA'  0x004  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Digital Input PHth Disable Control    0x0000_0000
:. PH_DOUT'     GPIO_BA'  0x008  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Data Output Value                     0x0000_FFFF
:. PH_DATMSK'   GPIO_BA'  0x00C  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Data Output Write Mask                0x0000_0000
:. PH_PIN'      GPIO_BA'  0x010  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PH Pin Value                             0x0000_XXXX
:. PH_DBEN'     GPIO_BA'  0x014  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH De-Bounce Enable Control              0x0000_0000
:. PH_INTTYPE'  GPIO_BA'  0x018  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Interrupt Trigger Type Register       0x0000_0000
:. PH_INTEN'    GPIO_BA'  0x01C  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Interrupt Enable                      0x0000_0000
:. PH_INTSRC'   GPIO_BA'  0x020  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Interrupt Source Flag                 0x0000_XXXX
:. PH_SMTEN'    GPIO_BA'  0x024  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH Input Schmitt Trigger Enable          0x0000_0000
:. PH_SLEWCTL'  GPIO_BA'  0x028  +.  1C0  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PH High Slew Rate Control                0x0000_0000

:. PI_MODE'     GPIO_BA'  0x000  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI I/O Mode Control                      0xFFFF_FFFF
:. PI_DINOFF'   GPIO_BA'  0x004  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Digital Input PHth Disable Control    0x0000_0000
:. PI_DOUT'     GPIO_BA'  0x008  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Data Output Value                     0x0000_FFFF
:. PI_DATMSK'   GPIO_BA'  0x00C  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Data Output Write Mask                0x0000_0000
:. PI_PIN'      GPIO_BA'  0x010  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R    PI Pin Value                             0x0000_XXXX
:. PI_DBEN'     GPIO_BA'  0x014  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI De-Bounce Enable Control              0x0000_0000
:. PI_INTTYPE'  GPIO_BA'  0x018  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Interrupt Trigger Type Register       0x0000_0000
:. PI_INTEN'    GPIO_BA'  0x01C  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Interrupt Enable                      0x0000_0000
:. PI_INTSRC'   GPIO_BA'  0x020  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Interrupt Source Flag                 0x0000_XXXX
:. PI_SMTEN'    GPIO_BA'  0x024  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI Input Schmitt Trigger Enable          0x0000_0000
:. PI_SLEWCTL'  GPIO_BA'  0x028  +.  200  +.  dup.  temp.pin.addr  !.  ;.   temp.pin.addr  @.   LAST. @. N>CFAPTR @. >CFA>CONSTANT.QUEUE   \  R/W  PI High Slew Rate Control                0x0000_0000

















decimal

COMMENT:
/**************************************************************************//**
 * @.file     gpio.h
 * @.version  V1.00
 * $Revision:. 12 $
 * $Date:. 14/10/06 11:.46a $
 * @.brief    NUC472/NUC442 GPIO driver header file
 *
 * @.note
 * Copyright (C) 2014 Nuvoton Technology Corp. All rights reserved.
 *****************************************************************************/
#ifndef __GPIO_H__
#define __GPIO_H__

#ifdef __cplusplus
extern "C"
{
#endif


/** @.addtogroup NUC472_442_Device_Driver NUC472/NUC442 Device Driver
  @.{
*/

/** @.addtogroup NUC472_442_GPIO_Driver GPIO Driver
  @.{
*/

/** @.addtogroup NUC472_442_GPIO_EXPORTED_CONSTANTS GPIO Exported Constants
  @.{
*/
COMMENT;



#define GPIO_PIN_MAX    16   \ /*!.< Specify Maximum Pins of Each GPIO Port */

\ /*---------------------------------------------------------------------------------------------------------*/
\ /*  MODE Constant Definitions                                                                               */
\ /*---------------------------------------------------------------------------------------------------------*/
#define GPIO_MODE_INPUT              0x0 \ UL           \ /*!.< Input Mode */
#define GPIO_MODE_OUTPUT             0x1 \ UL           \ /*!.< Output Mode */
#define GPIO_MODE_OPEN_DRAIN         0x2 ( UL )           \ /*!.< Open-Drain Mode */
#define GPIO_MODE_QUASI              0x3 ( UL )           \ /*!.< Quasi-bidirectional Mode */

\ /*---------------------------------------------------------------------------------------------------------*/
\ /*  GPIO Interrupt Type Constant Definitions                                                               */
\ /*---------------------------------------------------------------------------------------------------------*/
#define GPIO_INT_RISING             0x00010000 ( UL )    \ /*!.< Interrupt enable by Input Rising Edge */
#define GPIO_INT_FALLING            0x00000001 ( UL )    \ /*!.< Interrupt enable by Input Falling Edge */
#define GPIO_INT_BOTH_EDGE          0x00010001 ( UL )    \ /*!.< Interrupt enable by both Rising Edge and Falling Edge */
#define GPIO_INT_HIGH               0x01010000 ( UL )    \ /*!.< Interrupt enable by Level-High */
#define GPIO_INT_LOW                0x01000001 ( UL )    \ /*!.< Interrupt enable by Level-Level */

\ /*---------------------------------------------------------------------------------------------------------*/
\ /*  IMD Constant Definitions                                                                               */
\ /*---------------------------------------------------------------------------------------------------------*/
#define GPIO_IMD_EDGE               0 ( UL )             \ /*!.< IMD Setting for Edge Trigger Mode */
#define GPIO_IMD_LEVEL              1 ( UL )             \ /*!.< IMD Setting for Edge Level Mode */

\ /*---------------------------------------------------------------------------------------------------------*/
\ /*  DBCTL Constant Definitions                                                                          */
\ /*---------------------------------------------------------------------------------------------------------*/
#define GPIO_DBCTL_ICLK_ON           0x00000020 ( UL ) \ /*!.< DBCTL setting for all IO pins edge detection circuit is always active after reset */
#define GPIO_DBCTL_ICLK_OFF          0x00000000 ( UL ) \ /*!.< DBCTL setting for edge detection circuit is active only if IO pin corresponding GPIOx_IEN bit is set to 1 */

#define GPIO_DBCTL_DBCLKSRC_IRC10K   0x00000010 ( UL ) \ /*!.< DBCTL setting for de-bounce counter clock source is the internal 10 kHz */
#define GPIO_DBCTL_DBCLKSRC_HCLK     0x00000000 ( UL ) \ /*!.< DBCTL setting for de-bounce counter clock source is the internal HCLK */

#define GPIO_DBCTL_DBCLKSEL_1        0x00000000 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 1 clocks */
#define GPIO_DBCTL_DBCLKSEL_2        0x00000001 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 2 clocks */
#define GPIO_DBCTL_DBCLKSEL_4        0x00000002 ( UL ) \ /*!.< v setting for sampling cycle = 4 clocks */
#define GPIO_DBCTL_DBCLKSEL_8        0x00000003 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 8 clocks */
#define GPIO_DBCTL_DBCLKSEL_16       0x00000004 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 16 clocks */
#define GPIO_DBCTL_DBCLKSEL_32       0x00000005 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 32 clocks */
#define GPIO_DBCTL_DBCLKSEL_64       0x00000006 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 64 clocks */
#define GPIO_DBCTL_DBCLKSEL_128      0x00000007 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 128 clocks */
#define GPIO_DBCTL_DBCLKSEL_256      0x00000008 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 256 clocks */
#define GPIO_DBCTL_DBCLKSEL_512      0x00000009 ( UL ) \ /*!.< DBCTL setting for sampling cycle = 512 clocks */
#define GPIO_DBCTL_DBCLKSEL_1024     0x0000000A ( UL ) \ /*!.< DBCTL setting for sampling cycle = 1024 clocks */
#define GPIO_DBCTL_DBCLKSEL_2048     0x0000000B ( UL ) \ /*!.< DBCTL setting for sampling cycle = 2048 clocks */
#define GPIO_DBCTL_DBCLKSEL_4096     0x0000000C ( UL ) \ /*!.< DBCTL setting for sampling cycle = 4096 clocks */
#define GPIO_DBCTL_DBCLKSEL_8192     0x0000000D ( UL ) \ /*!.< DBCTL setting for sampling cycle = 8192 clocks */
#define GPIO_DBCTL_DBCLKSEL_16384    0x0000000E ( UL ) \ /*!.< DBCTL setting for sampling cycle = 16384 clocks */
#define GPIO_DBCTL_DBCLKSEL_32768    0x0000000F ( UL ) \ /*!.< DBCTL setting for sampling cycle = 32768 clocks */

COMMENT:
\ /** Define GPIO Pin Data Input/Output. It co ( UL )d be used to control each I/O pin by pin address mapping.
 *  Example 1:.
 *
 *      PA0 = 1;.
 *
 *  It is used to set PA0 to high;.
 *
 *  Example 2:.
 *
 *      if (PA0)
 *          PA0 = 0;.
 *
 *  If PA0 pin status is high, then set PA0 data output to low.
 */
COMMENT;

\ #define GPIO_PIN_ADDR(port, pin)    (*((volatile uint32_t *)((GPIO_PIN_DATA_BASE+.(0x40*(port))) +. ((pin)<<2))))

:.  GPIO_PIN_DATA_BASE  0x40004800  ;.   \ 0x42000000  ;.
:.  GPIO_PIN_ADDR  ( port pin -- a' )  4  *.  swap.  0x40  *.  +.  GPIO_PIN_DATA_BASE  +.  ;.

:.  PA0'               0  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA0  Pin Data Input/Output */
:.  PA1'               0  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA1  Pin Data Input/Output */
:.  PA2'               0  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA2  Pin Data Input/Output */
:.  PA3'               0  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA3  Pin Data Input/Output */
:.  PA4'               0  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA4  Pin Data Input/Output */
:.  PA5'               0  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA5  Pin Data Input/Output */
:.  PA6'               0  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA6  Pin Data Input/Output */
:.  PA7'               0  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA7  Pin Data Input/Output */
:.  PA8'               0  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA8  Pin Data Input/Output */
:.  PA9'               0  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA9  Pin Data Input/Output */
:.  PA10'              0  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA10 Pin Data Input/Output */
:.  PA11'              0  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA11 Pin Data Input/Output */
:.  PA12'              0  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA12 Pin Data Input/Output */
:.  PA13'              0  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA13 Pin Data Input/Output */
:.  PA14'              0  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA14 Pin Data Input/Output */
:.  PA15'              0  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PA15 Pin Data Input/Output */

:.  PB0'               1  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB0  Pin Data Input/Output */
:.  PB1'               1  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB1  Pin Data Input/Output */
:.  PB2'               1  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB2  Pin Data Input/Output */
:.  PB3'               1  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB3  Pin Data Input/Output */
:.  PB4'               1  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB4  Pin Data Input/Output */
:.  PB5'               1  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB5  Pin Data Input/Output */
:.  PB6'               1  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB6  Pin Data Input/Output */
:.  PB7'               1  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB7  Pin Data Input/Output */
:.  PB8'               1  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB8  Pin Data Input/Output */
:.  PB9'               1  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB9  Pin Data Input/Output */
:.  PB10'              1  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB10 Pin Data Input/Output */
:.  PB11'              1  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB11 Pin Data Input/Output */
:.  PB12'              1  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB12 Pin Data Input/Output */
:.  PB13'              1  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB13 Pin Data Input/Output */
:.  PB14'              1  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB14 Pin Data Input/Output */
:.  PB15'              1  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PB15 Pin Data Input/Output */

:.  PC0'               2  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC0  Pin Data Input/Output */
:.  PC1'               2  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC1  Pin Data Input/Output */
:.  PC2'               2  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC2  Pin Data Input/Output */
:.  PC3'               2  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC3  Pin Data Input/Output */
:.  PC4'               2  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC4  Pin Data Input/Output */
:.  PC5'               2  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC5  Pin Data Input/Output */
:.  PC6'               2  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC6  Pin Data Input/Output */
:.  PC7'               2  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC7  Pin Data Input/Output */
:.  PC8'               2  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC8  Pin Data Input/Output */
:.  PC9'               2  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC9  Pin Data Input/Output */
:.  PC10'              2  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC10 Pin Data Input/Output */
:.  PC11'              2  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC11 Pin Data Input/Output */
:.  PC12'              2  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC12 Pin Data Input/Output */
:.  PC13'              2  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC13 Pin Data Input/Output */
:.  PC14'              2  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC14 Pin Data Input/Output */
:.  PC15'              2  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PC15 Pin Data Input/Output */

:.  PD0'               3  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD0  Pin Data Input/Output */
:.  PD1'               3  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD1  Pin Data Input/Output */
:.  PD2'               3  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD2  Pin Data Input/Output */
:.  PD3'               3  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD3  Pin Data Input/Output */
:.  PD4'               3  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD4  Pin Data Input/Output */
:.  PD5'               3  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD5  Pin Data Input/Output */
:.  PD6'               3  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD6  Pin Data Input/Output */
:.  PD7'               3  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD7  Pin Data Input/Output */
:.  PD8'               3  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD8  Pin Data Input/Output */
:.  PD9'               3  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD9  Pin Data Input/Output */
:.  PD10'              3  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD10 Pin Data Input/Output */
:.  PD11'              3  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD11 Pin Data Input/Output */
:.  PD12'              3  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD12 Pin Data Input/Output */
:.  PD13'              3  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD13 Pin Data Input/Output */
:.  PD14'              3  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD14 Pin Data Input/Output */
:.  PD15'              3  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PD15 Pin Data Input/Output */

:.  PE0'               4  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE0  Pin Data Input/Output */
:.  PE1'               4  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE1  Pin Data Input/Output */
:.  PE2'               4  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE2  Pin Data Input/Output */
:.  PE3'               4  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE3  Pin Data Input/Output */
:.  PE4'               4  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE4  Pin Data Input/Output */
:.  PE5'               4  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE5  Pin Data Input/Output */
:.  PE6'               4  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE6  Pin Data Input/Output */
:.  PE7'               4  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE7  Pin Data Input/Output */
:.  PE8'               4  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE8  Pin Data Input/Output */
:.  PE9'               4  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE9  Pin Data Input/Output */
:.  PE10'              4  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE10 Pin Data Input/Output */
:.  PE11'              4  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE11 Pin Data Input/Output */
:.  PE12'              4  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE12 Pin Data Input/Output */
:.  PE13'              4  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE13 Pin Data Input/Output */
:.  PE14'              4  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE14 Pin Data Input/Output */
:.  PE15'              4  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PE15 Pin Data Input/Output */

:.  PF0'               5  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF0  Pin Data Input/Output */
:.  PF1'               5  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF1  Pin Data Input/Output */
:.  PF2'               5  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF2  Pin Data Input/Output */
:.  PF3'               5  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF3  Pin Data Input/Output */
:.  PF4'               5  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF4  Pin Data Input/Output */
:.  PF5'               5  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF5  Pin Data Input/Output */
:.  PF6'               5  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF6  Pin Data Input/Output */
:.  PF7'               5  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF7  Pin Data Input/Output */
:.  PF8'               5  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF8  Pin Data Input/Output */
:.  PF9'               5  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF9  Pin Data Input/Output */
:.  PF10'              5  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF10 Pin Data Input/Output */
:.  PF11'              5  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF11 Pin Data Input/Output */
:.  PF12'              5  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF12 Pin Data Input/Output */
:.  PF13'              5  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF13 Pin Data Input/Output */
:.  PF14'              5  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF14 Pin Data Input/Output */
:.  PF15'              5  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PF15 Pin Data Input/Output */

:.  PG0'               6  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG0  Pin Data Input/Output */
:.  PG1'               6  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG1  Pin Data Input/Output */
:.  PG2'               6  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG2  Pin Data Input/Output */
:.  PG3'               6  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG3  Pin Data Input/Output */
:.  PG4'               6  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG4  Pin Data Input/Output */
:.  PG5'               6  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG5  Pin Data Input/Output */
:.  PG6'               6  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG6  Pin Data Input/Output */
:.  PG7'               6  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG7  Pin Data Input/Output */
:.  PG8'               6  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG8  Pin Data Input/Output */
:.  PG9'               6  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG9  Pin Data Input/Output */
:.  PG10'              6  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG10 Pin Data Input/Output */
:.  PG11'              6  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG11 Pin Data Input/Output */
:.  PG12'              6  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG12 Pin Data Input/Output */
:.  PG13'              6  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG13 Pin Data Input/Output */
:.  PG14'              6  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG14 Pin Data Input/Output */
:.  PG15'              6  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PG15 Pin Data Input/Output */

:.  PH0'               7  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH0  Pin Data Input/Output */
:.  PH1'               7  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH1  Pin Data Input/Output */
:.  PH2'               7  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH2  Pin Data Input/Output */
:.  PH3'               7  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH3  Pin Data Input/Output */
:.  PH4'               7  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH4  Pin Data Input/Output */
:.  PH5'               7  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH5  Pin Data Input/Output */
:.  PH6'               7  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH6  Pin Data Input/Output */
:.  PH7'               7  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH7  Pin Data Input/Output */
:.  PH8'               7  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH8  Pin Data Input/Output */
:.  PH9'               7  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH9  Pin Data Input/Output */
:.  PH10'              7  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH10 Pin Data Input/Output */
:.  PH11'              7  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH11 Pin Data Input/Output */
:.  PH12'              7  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH12 Pin Data Input/Output */
:.  PH13'              7  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH13 Pin Data Input/Output */
:.  PH14'              7  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH14 Pin Data Input/Output */
:.  PH15'              7  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PH15 Pin Data Input/Output */

:.  PI0'               8  0   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI0  Pin Data Input/Output */
:.  PI1'               8  1   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI1  Pin Data Input/Output */
:.  PI2'               8  2   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI2  Pin Data Input/Output */
:.  PI3'               8  3   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI3  Pin Data Input/Output */
:.  PI4'               8  4   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI4  Pin Data Input/Output */
:.  PI5'               8  5   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI5  Pin Data Input/Output */
:.  PI6'               8  6   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI6  Pin Data Input/Output */
:.  PI7'               8  7   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI7  Pin Data Input/Output */
:.  PI8'               8  8   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI8  Pin Data Input/Output */
:.  PI9'               8  9   GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI9  Pin Data Input/Output */
:.  PI10'              8  10  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI10 Pin Data Input/Output */
:.  PI11'              8  11  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI11 Pin Data Input/Output */
:.  PI12'              8  12  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI12 Pin Data Input/Output */
:.  PI13'              8  13  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI13 Pin Data Input/Output */
:.  PI14'              8  14  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI14 Pin Data Input/Output */
:.  PI15'              8  15  GPIO_PIN_ADDR  ;.  \ /*!.< Specify PI15 Pin Data Input/Output */

hex





  































comment:
Component: ARM Compiler 5.05 update 1 (build 106) Tool: armlink [4d0efa]

==============================================================================

Small function inlining results

Inlined function _platform_pre_stackheap_init from boardinit1.o at offset 0x0 in __rtentry2.o(.ARM.Collect$$rtentry$$00000001).
Inlined Instruction: BX       lr
Inlined function _platform_pre_lib_shutdown from boardshut.o at offset 0x0 in rtexit2.o(.ARM.Collect$$rtexit$$00000001).
Inlined Instruction: BX       lr
Inlined total of 2 calls.

==============================================================================

Image Symbol Table

    Local Symbols

    Symbol Name                              Value     Ov Type        Size  Object(Section)

    RESET                                    0x00000000   Section      632  startup_nuc472_442.o(RESET)
    ../clib/angel/boardlib.s                 0x00000000   Number         0  boardinit1.o ABSOLUTE
    ../clib/angel/boardlib.s                 0x00000000   Number         0  boardshut.o ABSOLUTE
    ../clib/angel/boardlib.s                 0x00000000   Number         0  boardinit2.o ABSOLUTE
    ../clib/angel/boardlib.s                 0x00000000   Number         0  boardinit3.o ABSOLUTE
    ../clib/angel/handlers.s                 0x00000000   Number         0  __scatter_zi.o ABSOLUTE
    ../clib/angel/handlers.s                 0x00000000   Number         0  __scatter_copy.o ABSOLUTE
    ../clib/angel/kernel.s                   0x00000000   Number         0  __rtentry4.o ABSOLUTE
    ../clib/angel/kernel.s                   0x00000000   Number         0  rtexit2.o ABSOLUTE
    ../clib/angel/kernel.s                   0x00000000   Number         0  __rtentry2.o ABSOLUTE
    ../clib/angel/kernel.s                   0x00000000   Number         0  rtexit.o ABSOLUTE
    ../clib/angel/kernel.s                   0x00000000   Number         0  __rtentry.o ABSOLUTE
    ../clib/angel/rt.s                       0x00000000   Number         0  rt_raise.o ABSOLUTE
    ../clib/angel/scatter.s                  0x00000000   Number         0  __scatter.o ABSOLUTE
    ../clib/angel/startup.s                  0x00000000   Number         0  __main.o ABSOLUTE
    ../clib/angel/sys.s                      0x00000000   Number         0  libspace.o ABSOLUTE
    ../clib/angel/sys.s                      0x00000000   Number         0  indicate_semi.o ABSOLUTE
    ../clib/angel/sys.s                      0x00000000   Number         0  use_no_semi.o ABSOLUTE
    ../clib/angel/sys.s                      0x00000000   Number         0  sys_stackheap_outer.o ABSOLUTE
    ../clib/angel/sysapp.c                   0x00000000   Number         0  sys_command.o ABSOLUTE
    ../clib/angel/sysapp.c                   0x00000000   Number         0  sys_exit.o ABSOLUTE
    ../clib/armsys.c                         0x00000000   Number         0  argv_veneer.o ABSOLUTE
    ../clib/armsys.c                         0x00000000   Number         0  no_argv.o ABSOLUTE
    ../clib/armsys.c                         0x00000000   Number         0  _get_argv_nomalloc.o ABSOLUTE
    ../clib/armsys.c                         0x00000000   Number         0  argv_veneer.o ABSOLUTE
    ../clib/heapalloc.c                      0x00000000   Number         0  hrguard.o ABSOLUTE
    ../clib/heapaux.c                        0x00000000   Number         0  heapauxi.o ABSOLUTE
    ../clib/libinit.s                        0x00000000   Number         0  libinit.o ABSOLUTE
    ../clib/libinit.s                        0x00000000   Number         0  libinit2.o ABSOLUTE
    ../clib/libinit.s                        0x00000000   Number         0  libshutdown2.o ABSOLUTE
    ../clib/libinit.s                        0x00000000   Number         0  libshutdown.o ABSOLUTE
    ../clib/misc.s                           0x00000000   Number         0  printf_stubs.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_int.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  noretval__2printf.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __2printf.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_int_ll.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_ptr.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_int_ptr.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_int_ll_ptr.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_flags.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_ss.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_flags_ss.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_wp.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_dec.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_flags_wp.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_ss_wp.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_flags_ss_wp.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_char_common.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  __printf_nopercent.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_intcommon.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_ll.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_char_file.o ABSOLUTE
    ../clib/printf.c                         0x00000000   Number         0  _printf_hex_ll_ptr.o ABSOLUTE
    ../clib/printf_percent.s                 0x00000000   Number         0  _printf_percent.o ABSOLUTE
    ../clib/printf_percent.s                 0x00000000   Number         0  _printf_percent_end.o ABSOLUTE
    ../clib/printf_percent.s                 0x00000000   Number         0  _printf_d.o ABSOLUTE
    ../clib/printf_percent.s                 0x00000000   Number         0  _printf_x.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_exit.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_rtmem_outer.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_fpe_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_other.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_rtmem_formal.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_segv_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_cppl_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_pvfn_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_stak_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_rtred_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_abrt_inner.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_general.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  __raise.o ABSOLUTE
    ../clib/signal.c                         0x00000000   Number         0  defsig_rtmem_inner.o ABSOLUTE
    ../clib/signal.s                         0x00000000   Number         0  defsig.o ABSOLUTE
    ../clib/stdlib.c                         0x00000000   Number         0  exit.o ABSOLUTE
    ../fplib/fpinit.s                        0x00000000   Number         0  fpinit.o ABSOLUTE
    ..\..\..\..\Library\Device\Nuvoton\NUC472_442\Source\ARM\startup_NUC472_442.s 0x00000000   Number         0  startup_nuc472_442.o ABSOLUTE
    ..\..\..\..\Library\Device\Nuvoton\NUC472_442\Source\system_NUC472_442.c 0x00000000   Number         0  system_nuc472_442.o ABSOLUTE
    ..\..\..\..\Library\StdDriver\src\adc.c  0x00000000   Number         0  adc.o ABSOLUTE
    ..\..\..\..\Library\StdDriver\src\clk.c  0x00000000   Number         0  clk.o ABSOLUTE
    ..\..\..\..\Library\StdDriver\src\retarget.c 0x00000000   Number         0  retarget.o ABSOLUTE
    ..\..\..\..\Library\StdDriver\src\sys.c  0x00000000   Number         0  sys.o ABSOLUTE
    ..\\..\\..\\..\\Library\\Device\\Nuvoton\\NUC472_442\\Source\\system_NUC472_442.c 0x00000000   Number         0  system_nuc472_442.o ABSOLUTE
    ..\\..\\..\\..\\Library\\StdDriver\\src\\adc.c 0x00000000   Number         0  adc.o ABSOLUTE
    ..\\..\\..\\..\\Library\\StdDriver\\src\\clk.c 0x00000000   Number         0  clk.o ABSOLUTE
    ..\\..\\..\\..\\Library\\StdDriver\\src\\retarget.c 0x00000000   Number         0  retarget.o ABSOLUTE
    ..\\..\\..\\..\\Library\\StdDriver\\src\\sys.c 0x00000000   Number         0  sys.o ABSOLUTE
    ..\\main.c                               0x00000000   Number         0  main.o ABSOLUTE
    ..\main.c                                0x00000000   Number         0  main.o ABSOLUTE
    gpio.c                                   0x00000000   Number         0  gpio.o ABSOLUTE
    gpio.c                                   0x00000000   Number         0  gpio.o ABSOLUTE
    uart.c                                   0x00000000   Number         0  uart.o ABSOLUTE
    uart.c                                   0x00000000   Number         0  uart.o ABSOLUTE
    !!!main                                  0x00000278   Section        8  __main.o(!!!main)
    !!!scatter                               0x00000280   Section       52  __scatter.o(!!!scatter)
    !!handler_copy                           0x000002b4   Section       26  __scatter_copy.o(!!handler_copy)
    !!handler_zi                             0x000002d0   Section       28  __scatter_zi.o(!!handler_zi)
    .ARM.Collect$$_printf_percent$$00000000  0x000002ec   Section        0  _printf_percent.o(.ARM.Collect$$_printf_percent$$00000000)
    .ARM.Collect$$_printf_percent$$00000009  0x000002ec   Section        6  _printf_d.o(.ARM.Collect$$_printf_percent$$00000009)
    .ARM.Collect$$_printf_percent$$0000000C  0x000002f2   Section        6  _printf_x.o(.ARM.Collect$$_printf_percent$$0000000C)
    .ARM.Collect$$_printf_percent$$00000017  0x000002f8   Section        4  _printf_percent_end.o(.ARM.Collect$$_printf_percent$$00000017)
    .ARM.Collect$$libinit$$00000000          0x000002fc   Section        2  libinit.o(.ARM.Collect$$libinit$$00000000)
    .ARM.Collect$$libinit$$00000001          0x000002fe   Section        4  libinit2.o(.ARM.Collect$$libinit$$00000001)
    .ARM.Collect$$libinit$$00000004          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000004)
    .ARM.Collect$$libinit$$0000000A          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000000A)
    .ARM.Collect$$libinit$$0000000C          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000000C)
    .ARM.Collect$$libinit$$0000000E          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000000E)
    .ARM.Collect$$libinit$$00000011          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000011)
    .ARM.Collect$$libinit$$00000013          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000013)
    .ARM.Collect$$libinit$$00000015          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000015)
    .ARM.Collect$$libinit$$00000017          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000017)
    .ARM.Collect$$libinit$$00000019          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000019)
    .ARM.Collect$$libinit$$0000001B          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000001B)
    .ARM.Collect$$libinit$$0000001D          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000001D)
    .ARM.Collect$$libinit$$0000001F          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000001F)
    .ARM.Collect$$libinit$$00000021          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000021)
    .ARM.Collect$$libinit$$00000023          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000023)
    .ARM.Collect$$libinit$$00000025          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000025)
    .ARM.Collect$$libinit$$0000002C          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000002C)
    .ARM.Collect$$libinit$$0000002E          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$0000002E)
    .ARM.Collect$$libinit$$00000030          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000030)
    .ARM.Collect$$libinit$$00000032          0x00000302   Section        0  libinit2.o(.ARM.Collect$$libinit$$00000032)
    .ARM.Collect$$libinit$$00000033          0x00000302   Section        2  libinit2.o(.ARM.Collect$$libinit$$00000033)
    .ARM.Collect$$libshutdown$$00000000      0x00000304   Section        2  libshutdown.o(.ARM.Collect$$libshutdown$$00000000)
    .ARM.Collect$$libshutdown$$00000003      0x00000306   Section        0  libshutdown2.o(.ARM.Collect$$libshutdown$$00000003)
    .ARM.Collect$$libshutdown$$00000006      0x00000306   Section        0  libshutdown2.o(.ARM.Collect$$libshutdown$$00000006)
    .ARM.Collect$$libshutdown$$00000009      0x00000306   Section        0  libshutdown2.o(.ARM.Collect$$libshutdown$$00000009)
    .ARM.Collect$$libshutdown$$0000000B      0x00000306   Section        0  libshutdown2.o(.ARM.Collect$$libshutdown$$0000000B)
    .ARM.Collect$$libshutdown$$0000000E      0x00000306   Section        0  libshutdown2.o(.ARM.Collect$$libshutdown$$0000000E)
    .ARM.Collect$$libshutdown$$0000000F      0x00000306   Section        2  libshutdown2.o(.ARM.Collect$$libshutdown$$0000000F)
    .ARM.Collect$$rtentry$$00000000          0x00000308   Section        0  __rtentry.o(.ARM.Collect$$rtentry$$00000000)
    .ARM.Collect$$rtentry$$00000002          0x00000308   Section        0  __rtentry2.o(.ARM.Collect$$rtentry$$00000002)
    .ARM.Collect$$rtentry$$00000004          0x00000308   Section        6  __rtentry4.o(.ARM.Collect$$rtentry$$00000004)
    .ARM.Collect$$rtentry$$00000009          0x0000030e   Section        0  __rtentry2.o(.ARM.Collect$$rtentry$$00000009)
    .ARM.Collect$$rtentry$$0000000A          0x0000030e   Section        4  __rtentry2.o(.ARM.Collect$$rtentry$$0000000A)
    .ARM.Collect$$rtentry$$0000000C          0x00000312   Section        0  __rtentry2.o(.ARM.Collect$$rtentry$$0000000C)
    .ARM.Collect$$rtentry$$0000000D          0x00000312   Section        8  __rtentry2.o(.ARM.Collect$$rtentry$$0000000D)
    .ARM.Collect$$rtexit$$00000000           0x0000031a   Section        2  rtexit.o(.ARM.Collect$$rtexit$$00000000)
    .ARM.Collect$$rtexit$$00000002           0x0000031c   Section        0  rtexit2.o(.ARM.Collect$$rtexit$$00000002)
    .ARM.Collect$$rtexit$$00000003           0x0000031c   Section        4  rtexit2.o(.ARM.Collect$$rtexit$$00000003)
    .ARM.Collect$$rtexit$$00000004           0x00000320   Section        6  rtexit2.o(.ARM.Collect$$rtexit$$00000004)
    .emb_text                                0x00000328   Section       28  retarget.o(.emb_text)
    $v0                                      0x00000328   Number         0  retarget.o(.emb_text)
    .text                                    0x00000344   Section      132  startup_nuc472_442.o(.text)
    $v0                                      0x00000344   Number         0  startup_nuc472_442.o(.text)
    Default_Handler                          0x00000391   Thumb Code     2  startup_nuc472_442.o(.text)
    .text                                    0x000003c8   Section        0  noretval__2printf.o(.text)
    .text                                    0x000003e0   Section        0  _printf_dec.o(.text)
    .text                                    0x00000458   Section        0  _printf_hex_int.o(.text)
    .text                                    0x000004b0   Section        0  __printf_wp.o(.text)
    .text                                    0x000005be   Section        0  heapauxi.o(.text)
    .text                                    0x000005c4   Section        0  _printf_intcommon.o(.text)
    .text                                    0x00000678   Section        0  _printf_char_file.o(.text)
    .text                                    0x0000069c   Section        0  _printf_char_common.o(.text)
    _printf_input_char                       0x0000069d   Thumb Code    10  _printf_char_common.o(.text)
    .text                                    0x000006cc   Section       74  sys_stackheap_outer.o(.text)
    .text                                    0x00000716   Section        0  exit.o(.text)
    .text                                    0x00000724   Section        8  libspace.o(.text)
    .text                                    0x0000072c   Section        0  sys_exit.o(.text)
    .text                                    0x00000738   Section        2  use_no_semi.o(.text)
    .text                                    0x0000073a   Section        0  indicate_semi.o(.text)
    i.ADC_EnableInt                          0x0000073c   Section        0  adc.o(i.ADC_EnableInt)
    i.ADC_IRQHandler                         0x00000768   Section        0  main.o(i.ADC_IRQHandler)
    i.ADC_Open                               0x0000081c   Section        0  adc.o(i.ADC_Open)
    i.CLK_EnableModuleClock                  0x00000840   Section        0  clk.o(i.CLK_EnableModuleClock)
    i.CLK_EnableXtalRC                       0x0000085c   Section        0  clk.o(i.CLK_EnableXtalRC)
    i.CLK_GetPLLClockFreq                    0x0000086c   Section        0  clk.o(i.CLK_GetPLLClockFreq)
    i.CLK_SetHCLK                            0x000008c4   Section        0  clk.o(i.CLK_SetHCLK)
    i.CLK_SetModuleClock                     0x000008e8   Section        0  clk.o(i.CLK_SetModuleClock)
    i.CLK_WaitClockReady                     0x00000938   Section        0  clk.o(i.CLK_WaitClockReady)
    i.GPIO_SetMode                           0x0000095c   Section        0  gpio.o(i.GPIO_SetMode)
    i.Hard_Fault_Handler                     0x00000988   Section        0  retarget.o(i.Hard_Fault_Handler)
    __tagsym$$used                           0x00000989   Number         0  retarget.o(i.Hard_Fault_Handler)
    i.SYS_Init                               0x000009b0   Section        0  main.o(i.SYS_Init)
    i.SYS_LockReg                            0x00000a68   Section        0  sys.o(i.SYS_LockReg)
    i.SYS_ResetModule                        0x00000a74   Section        0  sys.o(i.SYS_ResetModule)
    i.SYS_UnlockReg                          0x00000a8c   Section        0  sys.o(i.SYS_UnlockReg)
    i.SendChar_ToUART                        0x00000ab4   Section        0  retarget.o(i.SendChar_ToUART)
    i.SystemCoreClockUpdate                  0x00000ad4   Section        0  system_nuc472_442.o(i.SystemCoreClockUpdate)
    i.SystemInit                             0x00000b1c   Section        0  system_nuc472_442.o(i.SystemInit)
    i.UART_Open                              0x00000bcc   Section        0  uart.o(i.UART_Open)
    i._is_digit                              0x00000c40   Section        0  __printf_wp.o(i._is_digit)
    i.ferror                                 0x00000c4e   Section        0  retarget.o(i.ferror)
    i.fputc                                  0x00000c54   Section        0  retarget.o(i.fputc)
    i.main                                   0x00000c60   Section        0  main.o(i.main)
    i.stackDump                              0x00000d4c   Section        0  retarget.o(i.stackDump)
    stackDump                                0x00000d4d   Thumb Code    72  retarget.o(i.stackDump)
    x$fpl$fpinit                             0x00000df4   Section       10  fpinit.o(x$fpl$fpinit)
    $v0                                      0x00000df4   Number         0  fpinit.o(x$fpl$fpinit)
    .constdata                               0x00000e00   Section       32  uart.o(.constdata)
    .constdata                               0x00000e20   Section       40  _printf_hex_int.o(.constdata)
    uc_hextab                                0x00000e20   Data          20  _printf_hex_int.o(.constdata)
    lc_hextab                                0x00000e34   Data          20  _printf_hex_int.o(.constdata)
    .conststring                             0x00000e48   Section       67  main.o(.conststring)
    .data                                    0x20000000   Section       40  system_nuc472_442.o(.data)
    .data                                    0x20000028   Section        4  retarget.o(.data)
    .bss                                     0x2000002c   Section       96  libspace.o(.bss)
    HEAP                                     0x20000090   Section      256  startup_nuc472_442.o(HEAP)
    Heap_Mem                                 0x20000090   Data         256  startup_nuc472_442.o(HEAP)
    STACK                                    0x20000190   Section     2048  startup_nuc472_442.o(STACK)
    Stack_Mem                                0x20000190   Data        2048  startup_nuc472_442.o(STACK)
    __initial_sp                             0x20000990   Data           0  startup_nuc472_442.o(STACK)

    Global Symbols

    Symbol Name                              Value     Ov Type        Size  Object(Section)

    BuildAttributes$$THM_ISAv4$E$P$D$K$B$S$7EM$VFPi3$EXTD16$VFPS$VFMA$PE$A:L22UL41UL21$X:L11$S22US41US21$IEEE1$IW$USESV6$~STKCKD$USESV7$~SHL$OSPACE$ROPI$EBA8$UX$STANDARDLIB$REQ8$PRES8$EABIv2 0x00000000   Number         0  anon$$obj.o ABSOLUTE
    __ARM_use_no_argv                        0x00000000   Number         0  main.o ABSOLUTE
    __Vectors                                0x00000000   Data           4  startup_nuc472_442.o(RESET)
    _printf_flags                            0x00000000   Number         0  printf_stubs.o ABSOLUTE
    _printf_return_value                     0x00000000   Number         0  printf_stubs.o ABSOLUTE
    _printf_sizespec                         0x00000000   Number         0  printf_stubs.o ABSOLUTE
    _printf_widthprec                        0x00000000   Number         0  printf_stubs.o ABSOLUTE
    __ARM_exceptions_init                     - Undefined Weak Reference
    __alloca_initialize                       - Undefined Weak Reference
    __arm_preinit_                            - Undefined Weak Reference
    __cpp_initialize__aeabi_                  - Undefined Weak Reference
    __cxa_finalize                            - Undefined Weak Reference
    __rt_locale                               - Undefined Weak Reference
    __sigvec_lookup                           - Undefined Weak Reference
    _atexit_init                              - Undefined Weak Reference
    _call_atexit_fns                          - Undefined Weak Reference
    _clock_init                               - Undefined Weak Reference
    _fp_trap_init                             - Undefined Weak Reference
    _fp_trap_shutdown                         - Undefined Weak Reference
    _get_lc_collate                           - Undefined Weak Reference
    _get_lc_ctype                             - Undefined Weak Reference
    _get_lc_monetary                          - Undefined Weak Reference
    _get_lc_numeric                           - Undefined Weak Reference
    _get_lc_time                              - Undefined Weak Reference
    _getenv_init                              - Undefined Weak Reference
    _handle_redirection                       - Undefined Weak Reference
    _init_alloc                               - Undefined Weak Reference
    _init_user_alloc                          - Undefined Weak Reference
    _initio                                   - Undefined Weak Reference
    _printf_post_padding                      - Undefined Weak Reference
    _printf_pre_padding                       - Undefined Weak Reference
    _printf_truncate_signed                   - Undefined Weak Reference
    _printf_truncate_unsigned                 - Undefined Weak Reference
    _rand_init                                - Undefined Weak Reference
    _signal_finish                            - Undefined Weak Reference
    _signal_init                              - Undefined Weak Reference
    _terminate_alloc                          - Undefined Weak Reference
    _terminate_user_alloc                     - Undefined Weak Reference
    _terminateio                              - Undefined Weak Reference
    __Vectors_End                            0x00000278   Data           0  startup_nuc472_442.o(RESET)
    __Vectors_Size                           0x00000278   Number         0  startup_nuc472_442.o ABSOLUTE
comment;


keil: __main                                   00000279   \ Thumb Code    8  __main.o(!!!main)
keil: __scatterload                            00000281   \ Thumb Code    0  __scatter.o(!!!scatter)
keil: __scatterload_rt2                        00000281   \ Thumb Code   44  __scatter.o(!!!scatter)
keil: __scatterload_rt2_thumb_only             00000281   \ Thumb Code    0  __scatter.o(!!!scatter)
keil: __scatterload_null                       0000028f   \ Thumb Code    0  __scatter.o(!!!scatter)
keil: __scatterload_copy                       000002b5   \ Thumb Code   26  __scatter_copy.o(!!handler_copy)
keil: __scatterload_zeroinit                   000002d1   \ Thumb Code   28  __scatter_zi.o(!!handler_zi)
keil: _printf_d                                000002ed   \ Thumb Code    0  _printf_d.o(.ARM.Collect$$_printf_percent$$00000009)
keil: _printf_percent                          000002ed   \ Thumb Code    0  _printf_percent.o(.ARM.Collect$$_printf_percent$$00000000)
keil: _printf_x                                000002f3   \ Thumb Code    0  _printf_x.o(.ARM.Collect$$_printf_percent$$0000000C)
keil: _printf_percent_end                      000002f9   \ Thumb Code    0  _printf_percent_end.o(.ARM.Collect$$_printf_percent$$00000017)
keil: __rt_lib_init                            000002fd   \ Thumb Code    0  libinit.o(.ARM.Collect$$libinit$$00000000)
keil: __rt_lib_init_fp_1                       000002ff   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000001)
keil: __rt_lib_init_alloca_1                   00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000002E)
keil: __rt_lib_init_argv_1                     00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000002C)
keil: __rt_lib_init_atexit_1                   00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000001B)
keil: __rt_lib_init_clock_1                    00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000021)
keil: __rt_lib_init_cpp_1                      00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000032)
keil: __rt_lib_init_exceptions_1               00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000030)
keil: __rt_lib_init_fp_trap_1                  00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000001F)
keil: __rt_lib_init_getenv_1                   00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000023)
keil: __rt_lib_init_heap_1                     00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000000A)
keil: __rt_lib_init_lc_collate_1               00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000011)
keil: __rt_lib_init_lc_ctype_1                 00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000013)
keil: __rt_lib_init_lc_monetary_1              00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000015)
keil: __rt_lib_init_lc_numeric_1               00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000017)
keil: __rt_lib_init_lc_time_1                  00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000019)
keil: __rt_lib_init_preinit_1                  00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000004)
keil: __rt_lib_init_rand_1                     00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000000E)
keil: __rt_lib_init_return                     00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000033)
keil: __rt_lib_init_signal_1                   00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000001D)
keil: __rt_lib_init_stdio_1                    00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$00000025)
keil: __rt_lib_init_user_alloc_1               00000303   \ Thumb Code    0  libinit2.o(.ARM.Collect$$libinit$$0000000C)
keil: __rt_lib_shutdown                        00000305   \ Thumb Code    0  libshutdown.o(.ARM.Collect$$libshutdown$$00000000)
keil: __rt_lib_shutdown_fp_trap_1              00000307   \ Thumb Code    0  libshutdown2.o(.ARM.Collect$$libshutdown$$00000006)
keil: __rt_lib_shutdown_heap_1                 00000307   \ Thumb Code    0  libshutdown2.o(.ARM.Collect$$libshutdown$$0000000E)
keil: __rt_lib_shutdown_return                 00000307   \ Thumb Code    0  libshutdown2.o(.ARM.Collect$$libshutdown$$0000000F)
keil: __rt_lib_shutdown_signal_1               00000307   \ Thumb Code    0  libshutdown2.o(.ARM.Collect$$libshutdown$$00000009)
keil: __rt_lib_shutdown_stdio_1                00000307   \ Thumb Code    0  libshutdown2.o(.ARM.Collect$$libshutdown$$00000003)
keil: __rt_lib_shutdown_user_alloc_1           00000307   \ Thumb Code    0  libshutdown2.o(.ARM.Collect$$libshutdown$$0000000B)
keil: __rt_entry                               00000309   \ Thumb Code    0  __rtentry.o(.ARM.Collect$$rtentry$$00000000)
keil: __rt_entry_presh_1                       00000309   \ Thumb Code    0  __rtentry2.o(.ARM.Collect$$rtentry$$00000002)
keil: __rt_entry_sh                            00000309   \ Thumb Code    0  __rtentry4.o(.ARM.Collect$$rtentry$$00000004)
keil: __rt_entry_li                            0000030f   \ Thumb Code    0  __rtentry2.o(.ARM.Collect$$rtentry$$0000000A)
keil: __rt_entry_postsh_1                      0000030f   \ Thumb Code    0  __rtentry2.o(.ARM.Collect$$rtentry$$00000009)
keil: __rt_entry_main                          00000313   \ Thumb Code    0  __rtentry2.o(.ARM.Collect$$rtentry$$0000000D)
keil: __rt_entry_postli_1                      00000313   \ Thumb Code    0  __rtentry2.o(.ARM.Collect$$rtentry$$0000000C)
keil: __rt_exit                                0000031b   \ Thumb Code    0  rtexit.o(.ARM.Collect$$rtexit$$00000000)
keil: __rt_exit_ls                             0000031d   \ Thumb Code    0  rtexit2.o(.ARM.Collect$$rtexit$$00000003)
keil: __rt_exit_prels_1                        0000031d   \ Thumb Code    0  rtexit2.o(.ARM.Collect$$rtexit$$00000002)
keil: __rt_exit_exit                           00000321   \ Thumb Code    0  rtexit2.o(.ARM.Collect$$rtexit$$00000004)
keil: HardFault_Handler                        00000329   \ Thumb Code   24  retarget.o(.emb_text)
keil: Reset_Handler                            00000345   \ Thumb Code   58  startup_nuc472_442.o(.text)
keil: NMI_Handler                              0000037f   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: MemManage_Handler                        00000383   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: BusFault_Handler                         00000385   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: UsageFault_Handler                       00000387   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: SVC_Handler                              00000389   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: DebugMon_Handler                         0000038b   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: PendSV_Handler                           0000038d   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: SysTick_Handler                          0000038f   \ Thumb Code    2  startup_nuc472_442.o(.text)
keil: ACMP_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: BOD_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: CAN0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: CAN1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: CAP_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: CLKF_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: CRC_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: CRYPTO_IRQHandler                        00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EADC0_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EADC1_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EADC2_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EADC3_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT0_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT1_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT2_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT3_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT4_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT5_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT6_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EINT7_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EMAC_RX_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EMAC_TX_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EPWM0BRK_IRQHandler                      00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EPWM0_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EPWM1BRK_IRQHandler                      00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: EPWM1_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPA_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPB_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPC_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPD_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPE_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPF_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPG_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPH_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: GPI_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2C0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2C1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2C2_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2C3_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2C4_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2S0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: I2S1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: ICAP0_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: ICAP1_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: IRC_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: OPA0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: OPA1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PDMA_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PS2D_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0CH0_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0CH1_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0CH2_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0CH3_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0CH4_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0CH5_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM0_BRK_IRQHandler                      00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1CH0_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1CH1_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1CH2_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1CH3_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1CH4_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1CH5_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWM1_BRK_IRQHandler                      00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: PWRWU_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: QEI0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: QEI1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: RTC_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SC0_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SC1_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SC2_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SC3_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SC4_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SC5_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SD_IRQHandler                            00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SPI0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SPI1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SPI2_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SPI3_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: SRAMF_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: TAMPER_IRQHandler                        00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: TMR0_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: TMR1_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: TMR2_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: TMR3_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: UART0_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: UART1_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: UART2_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: UART3_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: UART4_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: UART5_IRQHandler                         00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: USBD_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: USBH_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: USB_OTG_IRQHandler                       00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: WDT_IRQHandler                           00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: WWDT_IRQHandler                          00000391   \ Thumb Code    0  startup_nuc472_442.o(.text)
keil: __user_initial_stackheap                 00000395   \ Thumb Code   10  startup_nuc472_442.o(.text)
keil: __2printf                                000003c9   \ Thumb Code   20  noretval__2printf.o(.text)
keil: _printf_int_dec                          000003e1   \ Thumb Code  104  _printf_dec.o(.text)
keil: _printf_int_hex                          00000459   \ Thumb Code   84  _printf_hex_int.o(.text)
keil: _printf_longlong_hex                     00000459   \ Thumb Code    0  _printf_hex_int.o(.text)
keil: __printf                                 000004b1   \ Thumb Code  270  __printf_wp.o(.text)
keil: __use_two_region_memory                  000005bf   \ Thumb Code    2  heapauxi.o(.text)
keil: __rt_heap_escrow$2region                 000005c1   \ Thumb Code    2  heapauxi.o(.text)
keil: __rt_heap_expand$2region                 000005c3   \ Thumb Code    2  heapauxi.o(.text)
keil: _printf_int_common                       000005c5   \ Thumb Code  178  _printf_intcommon.o(.text)
keil: _printf_char_file                        00000679   \ Thumb Code   32  _printf_char_file.o(.text)


keil: _printf_input_char                       0000069d   \ Thumb Code   10  _printf_char_common.o(.text)


keil: _printf_char_common                      000006a7   \ Thumb Code   32  _printf_char_common.o(.text)
keil: __user_setup_stackheap                   000006cd   \ Thumb Code   74  sys_stackheap_outer.o(.text)
keil: exit                                     00000717   \ Thumb Code   12  exit.o(.text)
keil: __user_libspace                          00000725   \ Thumb Code    8  libspace.o(.text)
keil: __user_perproc_libspace                  00000725   \ Thumb Code    0  libspace.o(.text)
keil: __user_perthread_libspace                00000725   \ Thumb Code    0  libspace.o(.text)
keil: _sys_exit                                0000072d   \ Thumb Code    8  sys_exit.o(.text)
keil: __I$use$semihosting                      00000739   \ Thumb Code    0  use_no_semi.o(.text)
keil: __use_no_semihosting_swi                 00000739   \ Thumb Code    2  use_no_semi.o(.text)
keil: __semihosting_library_function           0000073b   \ Thumb Code    0  indicate_semi.o(.text)
keil: ADC_EnableInt                            0000073d   \ Thumb Code   40  adc.o(i.ADC_EnableInt)
keil: ADC_IRQHandler                           00000769   \ Thumb Code   56  main.o(i.ADC_IRQHandler)
keil: ADC_Open                                 0000081d   \ Thumb Code   28  adc.o(i.ADC_Open)
keil: CLK_EnableModuleClock                    00000841   \ Thumb Code   28  clk.o(i.CLK_EnableModuleClock)
keil: CLK_EnableXtalRC                         0000085d   \ Thumb Code   16  clk.o(i.CLK_EnableXtalRC)
keil: CLK_GetPLLClockFreq                      0000086d   \ Thumb Code   80  clk.o(i.CLK_GetPLLClockFreq)
keil: CLK_SetHCLK                              000008c5   \ Thumb Code   36  clk.o(i.CLK_SetHCLK)
keil: CLK_SetModuleClock                       000008e9   \ Thumb Code   74  clk.o(i.CLK_SetModuleClock)
keil: CLK_WaitClockReady                       00000939   \ Thumb Code   36  clk.o(i.CLK_WaitClockReady)
keil: GPIO_SetMode                             0000095d   \ Thumb Code   44  gpio.o(i.GPIO_SetMode)
keil: Hard_Fault_Handler                       00000989   \ Thumb Code   16  retarget.o(i.Hard_Fault_Handler)
keil: SYS_Init                                 000009b1   \ Thumb Code  166  main.o(i.SYS_Init)
keil: SYS_LockReg                              00000a69   \ Thumb Code   12  sys.o(i.SYS_LockReg)
keil: SYS_ResetModule                          00000a75   \ Thumb Code   24  sys.o(i.SYS_ResetModule)
keil: SYS_UnlockReg                            00000a8d   \ Thumb Code   38  sys.o(i.SYS_UnlockReg)
keil: SendChar_ToUART                          00000ab5   \ Thumb Code   26  retarget.o(i.SendChar_ToUART)
keil: SystemCoreClockUpdate                    00000ad5   \ Thumb Code   64  system_nuc472_442.o(i.SystemCoreClockUpdate)
keil: SystemInit                               00000b1d   \ Thumb Code  164  system_nuc472_442.o(i.SystemInit)
keil: UART_Open                                00000bcd   \ Thumb Code  110  uart.o(i.UART_Open)
keil: _is_digit                                00000c41   \ Thumb Code   14  __printf_wp.o(i._is_digit)
keil: ferror                                   00000c4f   \ Thumb Code    6  retarget.o(i.ferror)
keil: fputc                                    00000c55   \ Thumb Code   12  retarget.o(i.fputc)
keil: main                                     00000c61   \ Thumb Code  128  main.o(i.main)

keil: stackDump                                00000d4d   \ Thumb Code   72  retarget.o(i.stackDump)

keil: _fp_init                                 00000df5   \ Thumb Code   10  fpinit.o(x$fpl$fpinit)
keil: __fplib_config_fpu_vfp                   00000dfd   \ Thumb Code    0  fpinit.o(x$fpl$fpinit)
keil: __fplib_config_pureend_doubles           00000dfd   \ Thumb Code    0  fpinit.o(x$fpl$fpinit)
keil: Region$$Table$$Base                      00000e8c   \ Number         0  anon$$obj.o(Region$$Table)
keil: Region$$Table$$Limit                     00000eac   \ Number         0  anon$$obj.o(Region$$Table)
keil: SystemCoreClock                          20000000   \ Data           4  system_nuc472_442.o(.data)
keil: CyclesPerUs                              20000004   \ Data           4  system_nuc472_442.o(.data)
keil: gau32ClkSrcTbl                           20000008   \ Data          32  system_nuc472_442.o(.data)
keil: __stdout                                 20000028   \ Data           4  retarget.o(.data)
keil: __libspace_start                         2000002c   \ Data          96  libspace.o(.bss)
keil: __temporary_stack_top$libspace           2000008c   \ Data           0  libspace.o(.bss)


comment:
==============================================================================

Memory Map of the image

  Image Entry point : 0x00000345

  Load Region LR_1 (Base: 0x00000000, Size: 0x00000ed8, Max: 0xffffffff, ABSOLUTE)

    Execution Region ER_RO (Base: 0x00000000, Size: 0x00000eac, Max: 0xffffffff, ABSOLUTE)

    Base Addr    Size         Type   Attr      Idx    E Section Name        Object

    0x00000000   0x00000278   Data   RO          145    RESET               startup_nuc472_442.o
    0x00000278   0x00000008   Code   RO          768  * !!!main             c_w.l(__main.o)
    0x00000280   0x00000034   Code   RO          931    !!!scatter          c_w.l(__scatter.o)
    0x000002b4   0x0000001a   Code   RO          933    !!handler_copy      c_w.l(__scatter_copy.o)
    0x000002ce   0x00000002   PAD
    0x000002d0   0x0000001c   Code   RO          935    !!handler_zi        c_w.l(__scatter_zi.o)
    0x000002ec   0x00000000   Code   RO          765    .ARM.Collect$$_printf_percent$$00000000  c_w.l(_printf_percent.o)
    0x000002ec   0x00000006   Code   RO          764    .ARM.Collect$$_printf_percent$$00000009  c_w.l(_printf_d.o)
    0x000002f2   0x00000006   Code   RO          763    .ARM.Collect$$_printf_percent$$0000000C  c_w.l(_printf_x.o)
    0x000002f8   0x00000004   Code   RO          775    .ARM.Collect$$_printf_percent$$00000017  c_w.l(_printf_percent_end.o)
    0x000002fc   0x00000002   Code   RO          804    .ARM.Collect$$libinit$$00000000  c_w.l(libinit.o)
    0x000002fe   0x00000004   Code   RO          810    .ARM.Collect$$libinit$$00000001  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          813    .ARM.Collect$$libinit$$00000004  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          816    .ARM.Collect$$libinit$$0000000A  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          818    .ARM.Collect$$libinit$$0000000C  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          820    .ARM.Collect$$libinit$$0000000E  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          823    .ARM.Collect$$libinit$$00000011  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          825    .ARM.Collect$$libinit$$00000013  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          827    .ARM.Collect$$libinit$$00000015  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          829    .ARM.Collect$$libinit$$00000017  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          831    .ARM.Collect$$libinit$$00000019  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          833    .ARM.Collect$$libinit$$0000001B  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          835    .ARM.Collect$$libinit$$0000001D  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          837    .ARM.Collect$$libinit$$0000001F  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          839    .ARM.Collect$$libinit$$00000021  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          841    .ARM.Collect$$libinit$$00000023  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          843    .ARM.Collect$$libinit$$00000025  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          847    .ARM.Collect$$libinit$$0000002C  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          849    .ARM.Collect$$libinit$$0000002E  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          851    .ARM.Collect$$libinit$$00000030  c_w.l(libinit2.o)
    0x00000302   0x00000000   Code   RO          853    .ARM.Collect$$libinit$$00000032  c_w.l(libinit2.o)
    0x00000302   0x00000002   Code   RO          854    .ARM.Collect$$libinit$$00000033  c_w.l(libinit2.o)
    0x00000304   0x00000002   Code   RO          874    .ARM.Collect$$libshutdown$$00000000  c_w.l(libshutdown.o)
    0x00000306   0x00000000   Code   RO          888    .ARM.Collect$$libshutdown$$00000003  c_w.l(libshutdown2.o)
    0x00000306   0x00000000   Code   RO          891    .ARM.Collect$$libshutdown$$00000006  c_w.l(libshutdown2.o)
    0x00000306   0x00000000   Code   RO          894    .ARM.Collect$$libshutdown$$00000009  c_w.l(libshutdown2.o)
    0x00000306   0x00000000   Code   RO          896    .ARM.Collect$$libshutdown$$0000000B  c_w.l(libshutdown2.o)
    0x00000306   0x00000000   Code   RO          899    .ARM.Collect$$libshutdown$$0000000E  c_w.l(libshutdown2.o)
    0x00000306   0x00000002   Code   RO          900    .ARM.Collect$$libshutdown$$0000000F  c_w.l(libshutdown2.o)
    0x00000308   0x00000000   Code   RO          770    .ARM.Collect$$rtentry$$00000000  c_w.l(__rtentry.o)
    0x00000308   0x00000000   Code   RO          777    .ARM.Collect$$rtentry$$00000002  c_w.l(__rtentry2.o)
    0x00000308   0x00000006   Code   RO          789    .ARM.Collect$$rtentry$$00000004  c_w.l(__rtentry4.o)
    0x0000030e   0x00000000   Code   RO          779    .ARM.Collect$$rtentry$$00000009  c_w.l(__rtentry2.o)
    0x0000030e   0x00000004   Code   RO          780    .ARM.Collect$$rtentry$$0000000A  c_w.l(__rtentry2.o)
    0x00000312   0x00000000   Code   RO          782    .ARM.Collect$$rtentry$$0000000C  c_w.l(__rtentry2.o)
    0x00000312   0x00000008   Code   RO          783    .ARM.Collect$$rtentry$$0000000D  c_w.l(__rtentry2.o)
    0x0000031a   0x00000002   Code   RO          808    .ARM.Collect$$rtexit$$00000000  c_w.l(rtexit.o)
    0x0000031c   0x00000000   Code   RO          856    .ARM.Collect$$rtexit$$00000002  c_w.l(rtexit2.o)
    0x0000031c   0x00000004   Code   RO          857    .ARM.Collect$$rtexit$$00000003  c_w.l(rtexit2.o)
    0x00000320   0x00000006   Code   RO          858    .ARM.Collect$$rtexit$$00000004  c_w.l(rtexit2.o)
    0x00000326   0x00000002   PAD
    0x00000328   0x0000001c   Code   RO          152    .emb_text           retarget.o
    0x00000344   0x00000084   Code   RO          146  * .text               startup_nuc472_442.o
    0x000003c8   0x00000018   Code   RO          716    .text               c_w.l(noretval__2printf.o)
    0x000003e0   0x00000078   Code   RO          720    .text               c_w.l(_printf_dec.o)
    0x00000458   0x00000058   Code   RO          725    .text               c_w.l(_printf_hex_int.o)
    0x000004b0   0x0000010e   Code   RO          751    .text               c_w.l(__printf_wp.o)
    0x000005be   0x00000006   Code   RO          766    .text               c_w.l(heapauxi.o)
    0x000005c4   0x000000b2   Code   RO          771    .text               c_w.l(_printf_intcommon.o)
    0x00000676   0x00000002   PAD
    0x00000678   0x00000024   Code   RO          773    .text               c_w.l(_printf_char_file.o)
    0x0000069c   0x00000030   Code   RO          791    .text               c_w.l(_printf_char_common.o)
    0x000006cc   0x0000004a   Code   RO          793    .text               c_w.l(sys_stackheap_outer.o)
    0x00000716   0x0000000c   Code   RO          797    .text               c_w.l(exit.o)
    0x00000722   0x00000002   PAD
    0x00000724   0x00000008   Code   RO          805    .text               c_w.l(libspace.o)
    0x0000072c   0x0000000c   Code   RO          866    .text               c_w.l(sys_exit.o)
    0x00000738   0x00000002   Code   RO          877    .text               c_w.l(use_no_semi.o)
    0x0000073a   0x00000000   Code   RO          879    .text               c_w.l(indicate_semi.o)
    0x0000073a   0x00000002   PAD
    0x0000073c   0x0000002c   Code   RO          271    i.ADC_EnableInt     adc.o
    0x00000768   0x000000b4   Code   RO          673    i.ADC_IRQHandler    main.o
    0x0000081c   0x00000024   Code   RO          272    i.ADC_Open          adc.o
    0x00000840   0x0000001c   Code   RO          322    i.CLK_EnableModuleClock  clk.o
    0x0000085c   0x00000010   Code   RO          324    i.CLK_EnableXtalRC  clk.o
    0x0000086c   0x00000058   Code   RO          330    i.CLK_GetPLLClockFreq  clk.o
    0x000008c4   0x00000024   Code   RO          334    i.CLK_SetHCLK       clk.o
    0x000008e8   0x00000050   Code   RO          335    i.CLK_SetModuleClock  clk.o
    0x00000938   0x00000024   Code   RO          338    i.CLK_WaitClockReady  clk.o
    0x0000095c   0x0000002c   Code   RO          550    i.GPIO_SetMode      gpio.o
    0x00000988   0x00000028   Code   RO          154    i.Hard_Fault_Handler  retarget.o
    0x000009b0   0x000000b8   Code   RO          674    i.SYS_Init          main.o
    0x00000a68   0x0000000c   Code   RO          468    i.SYS_LockReg       sys.o
    0x00000a74   0x00000018   Code   RO          472    i.SYS_ResetModule   sys.o
    0x00000a8c   0x00000026   Code   RO          473    i.SYS_UnlockReg     sys.o
    0x00000ab2   0x00000002   PAD
    0x00000ab4   0x00000020   Code   RO          157    i.SendChar_ToUART   retarget.o
    0x00000ad4   0x00000048   Code   RO            3    i.SystemCoreClockUpdate  system_nuc472_442.o
    0x00000b1c   0x000000b0   Code   RO            4    i.SystemInit        system_nuc472_442.o
    0x00000bcc   0x00000074   Code   RO          586    i.UART_Open         uart.o
    0x00000c40   0x0000000e   Code   RO          753    i._is_digit         c_w.l(__printf_wp.o)
    0x00000c4e   0x00000006   Code   RO          159    i.ferror            retarget.o
    0x00000c54   0x0000000c   Code   RO          161    i.fputc             retarget.o
    0x00000c60   0x000000ec   Code   RO          676    i.main              main.o
    0x00000d4c   0x000000a8   Code   RO          163    i.stackDump         retarget.o
    0x00000df4   0x0000000a   Code   RO          864    x$fpl$fpinit        fz_wm.l(fpinit.o)
    0x00000dfe   0x00000002   PAD
    0x00000e00   0x00000020   Data   RO          593    .constdata          uart.o
    0x00000e20   0x00000028   Data   RO          726    .constdata          c_w.l(_printf_hex_int.o)
    0x00000e48   0x00000043   Data   RO          677    .conststring        main.o
    0x00000e8b   0x00000001   PAD
    0x00000e8c   0x00000020   Data   RO          929    Region$$Table       anon$$obj.o


    Execution Region ER_RW (Base: 0x20000000, Size: 0x0000002c, Max: 0xffffffff, ABSOLUTE)

    Base Addr    Size         Type   Attr      Idx    E Section Name        Object

    0x20000000   0x00000028   Data   RW            5    .data               system_nuc472_442.o
    0x20000028   0x00000004   Data   RW          164    .data               retarget.o


    Execution Region ER_ZI (Base: 0x2000002c, Size: 0x00000964, Max: 0xffffffff, ABSOLUTE)

    Base Addr    Size         Type   Attr      Idx    E Section Name        Object

    0x2000002c   0x00000060   Zero   RW          806    .bss                c_w.l(libspace.o)
    0x2000008c   0x00000004   PAD
    0x20000090   0x00000100   Zero   RW          144    HEAP                startup_nuc472_442.o
    0x20000190   0x00000800   Zero   RW          143    STACK               startup_nuc472_442.o


==============================================================================

Image component sizes


      Code (inc. data)   RO Data    RW Data    ZI Data      Debug   Object Name

        80         12          0          0          0       1615   adc.o
       284         14          0          0          0       4271   clk.o
        44          0          0          0          0        907   gpio.o
       600        250         67          0          0      28346   main.o
       286        130          0          4          0     307731   retarget.o
       132         44        632          0       2304       1056   startup_nuc472_442.o
        74          0          0          0          0       1688   sys.o
       248         20          0         40          0     309106   system_nuc472_442.o
       116          6         32          0          0       1048   uart.o

    ----------------------------------------------------------------------
      1866        476        764         44       2304     655768   Object Totals
         0          0         32          0          0          0   (incl. Generated)
         2          0          1          0          0          0   (incl. Padding)

    ----------------------------------------------------------------------

      Code (inc. data)   RO Data    RW Data    ZI Data      Debug   Library Member Name

         8          0          0          0          0         68   __main.o
       284          0          0          0          0        156   __printf_wp.o
         0          0          0          0          0          0   __rtentry.o
        12          0          0          0          0          0   __rtentry2.o
         6          0          0          0          0          0   __rtentry4.o
        52          8          0          0          0          0   __scatter.o
        26          0          0          0          0          0   __scatter_copy.o
        28          0          0          0          0          0   __scatter_zi.o
        48          6          0          0          0         96   _printf_char_common.o
        36          4          0          0          0         80   _printf_char_file.o
         6          0          0          0          0          0   _printf_d.o
       120         16          0          0          0         92   _printf_dec.o
        88          4         40          0          0         88   _printf_hex_int.o
       178          0          0          0          0         88   _printf_intcommon.o
         0          0          0          0          0          0   _printf_percent.o
         4          0          0          0          0          0   _printf_percent_end.o
         6          0          0          0          0          0   _printf_x.o
        12          0          0          0          0         72   exit.o
         6          0          0          0          0        152   heapauxi.o
         0          0          0          0          0          0   indicate_semi.o
         2          0          0          0          0          0   libinit.o
         6          0          0          0          0          0   libinit2.o
         2          0          0          0          0          0   libshutdown.o
         2          0          0          0          0          0   libshutdown2.o
         8          4          0          0         96         68   libspace.o
        24          4          0          0          0         84   noretval__2printf.o
         2          0          0          0          0          0   rtexit.o
        10          0          0          0          0          0   rtexit2.o
        12          4          0          0          0         68   sys_exit.o
        74          0          0          0          0         80   sys_stackheap_outer.o
         2          0          0          0          0         68   use_no_semi.o
        10          0          0          0          0        116   fpinit.o

    ----------------------------------------------------------------------
      1086         50         40          0        100       1376   Library Totals
        12          0          0          0          4          0   (incl. Padding)

    ----------------------------------------------------------------------

      Code (inc. data)   RO Data    RW Data    ZI Data      Debug   Library Name

      1064         50         40          0         96       1260   c_w.l
        10          0          0          0          0        116   fz_wm.l

    ----------------------------------------------------------------------
      1086         50         40          0        100       1376   Library Totals

    ----------------------------------------------------------------------

==============================================================================


      Code (inc. data)   RO Data    RW Data    ZI Data      Debug   

      2952        526        804         44       2404     654772   Grand Totals
      2952        526        804         44       2404     654772   ELF Image Totals
      2952        526        804         44          0          0   ROM Totals

==============================================================================

    Total RO  Size (Code + RO Data)                 3756 (   3.67kB)
    Total RW  Size (RW Data + ZI Data)              2448 (   2.39kB)
    Total ROM Size (Code + RO Data + RW Data)       3800 (   3.71kB)

==============================================================================

comment;






























comment:

/**************************************************************************//**
 * @file     main.c
 * @version  V1.00
 * $Revision: 12 $
 * $Date: 14/07/07 9:22a $
 * @brief    Convert ADC channel 0, 1, 2 in continuous scan mode and prints
 *           conversion result.
 *
 * @note
 * Copyright (C) 2013 Nuvoton Technology Corp. All rights reserved.
*****************************************************************************/
#include <stdio.h>
#include "NUC472_442.h"

//      Fout=Fin(NF/NR)(1 NO)   NR=INDIV+2   NF=FBDIV+2   NO=1,2,4
#define PLLCON_SETTING    CLK_PLLCTL_50MHz_HIRC  // 401A --> (40000240)=401A  84MHz HXT
#define PLL_CLOCK         50000000    //  FREQ_84MHZ

void ADC_IRQHandler(void)
{   uint32_t   u32Flag;   
    // Get ADC conversion finish interrupt flag     //  ADIF ==== bit 0 of ADC_STATUS0  
    u32Flag = ADC_GET_INT_FLAG(ADC, ADC_ADF_INT);   //  R4=(40043050).0
//  #define   ADC_GET_INT_FLAG(adc, u32Mask)   (ADC->STATUS0 & (u32Mask))
//  (  0000077A  12 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  0000077C  00 6D             )                  R0=(R0+50)       \ ADC_STATUS0              \  40043050
  	if(u32Flag & ADC_ADF_INT)                       //  if'(40043050).0=1
//  (  0000077E  00 F0 01 04       )                  R4=R0n1          \ 1 == 2^0   bit0
//  (  00000782  00 2C             )                  R4:0             \ if'(40043050).0=1
//  (  00000784  15 D0             )        if'<>   \ z=1? eq?         \ 00000784 --> 000007B2 +++++++++
		{  uint32_t    u32Result;   // Static ??????   Here it is a internal register. 
       u32Result = ADC_GET_CONVERSION_DATA(ADC, 0);  printf("Channel 0 conversion result is 0x%x\n",u32Result);
       u32Result = ADC_GET_CONVERSION_DATA(ADC, 1);  printf("Channel 1 conversion result is 0x%x\n",u32Result);
       u32Result = ADC_GET_CONVERSION_DATA(ADC, 2);  printf("Channel 2 conversion result is 0x%x\n",u32Result);
    }  ADC_CLR_INT_FLAG(ADC, u32Flag);   //  (40043050)n7/oR4
}
// #define ADC_GET_CONVERSION_DATA(adc, u32ChNum) ( ADC->DAT[u32ChNum] & ADC_DAT0_RESULT_Msk)

// #define ADC_CLR_INT_FLAG(adc, u32Mask) (ADC->STATUS0 = (ADC->STATUS0 & ~(ADC_STATUS0_ADIF_Msk | \
//                                                                       ADC_STATUS0_ADCMPF0_Msk | \
//                                                                       ADC_STATUS0_ADCMPF1_Msk)) | (u32Mask))


//                                   L:  ADC_IRQHandler  (.--.)
//  (  00000778  70 B5             )                  push    { R4, R5, R6, lr, }
//  (  0000077A  12 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  0000077C  00 6D             )                  R0=(R0+50)       \ ADC_STATUS0              \  40043050
//  (  0000077E  00 F0 01 04       )                  R4=R0n1          \ 1 == 2^0   bit0
//  (  00000782  00 2C             )                  R4:0             \ if'(40043050).0=1
//  (  00000784  15 D0             )        if'<>   \ z=1? eq?         \ 00000784 --> 000007B2 +++++++++
//  (  00000786  0F 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  00000788  00 68             )                  R0=(R0)          \ ADC_DAT0                 \  40043000
//  (  0000078A  85 B2             )                  uxth_R5,R0
//  (  0000078C  29 46             )                  R1=R5
//  (  0000078E  0E A0             )                  R0=pc+3A         \  000007C8
//  (  00000790  FF F7 1A FE       )                  __2printf        \ rcall_3C8
//  (  00000794  0B 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  00000796  40 68             )                  R0=(R0+4)        \ ADC_DAT1                 \  40043004
//  (  00000798  85 B2             )                  uxth_R5,R0
//  (  0000079A  29 46             )                  R1=R5
//  (  0000079C  14 A0             )                  R0=pc+54         \  000007F0
//  (  0000079E  FF F7 13 FE       )                  __2printf        \ rcall_3C8
//  (  000007A2  08 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  000007A4  80 68             )                  R0=(R0+8)        \ ADC_DAT2                 \  40043008
//  (  000007A6  85 B2             )                  uxth_R5,R0
//  (  000007A8  29 46             )                  R1=R5
//  (  000007AA  1B A0             )                  R0=pc+6E         \  00000818
//  (  000007AC  FF F7 0C FE       )                  __2printf        \ rcall_3C8
//  (  000007B0  00 BF             )                  nop
//                                          then'                      \ 00000784 --> 000007B2 +++++++++
//  (  000007B2  04 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  000007B4  00 6D             )                  R0=(R0+50)       \ ADC_STATUS0              \  40043050
//  (  000007B6  20 F0 07 00       )                  R0=R0n7/
//  (  000007BA  20 43             )                  R0oR4
//  (  000007BC  01 49             )                  R1=40043000      \ ADC_DAT0                 \ (000007C4)=40043000
//  (  000007BE  08 65             )                  (R1+50)=R0       \ ADC_STATUS0              \  40043050
//  (  000007C0  70 BD             )                  pop     { R4, R5, R6, pc, }
//                                                                     \ (40043050)n7/oR4
	
	void SYS_Init(void)
{   // uint32_t   u32_UART0_MODULE;   uint32_t   u32_ADC_MODULE;  // for testing purpose
    /*---------------------------------------------------------------------------------------------------------*/
    /* Init System Clock                                                                                       */
    /*---------------------------------------------------------------------------------------------------------*/
    /* Unlock protected registers */
    SYS_UnlockReg();
//                                   L:  SYS_UnlockReg    (.--.)
//  (  00000B30  09 E0             )     ahead'.    \ jmp_B46         \
//                                          begin'                     \ 00000B4C --> 00000B32 +++++++++++++
//  (  00000B32  59 20             )                  R0=59
//  (  00000B34  06 49             )                  R1=40000100                                 \ (00000B50)=40000100
//  (  00000B36  08 60             )                  (R1)=R0                                   \  40000100
//  (  00000B38  16 20             )                  R0=16
//  (  00000B3A  89 05             )                  R1<<16,s  \ R1=40000000
//  (  00000B3C  C1 F8 00 01       )                  (R1+100)=R0          \  40000100
//  (  00000B40  88 20             )                  R0=88
//  (  00000B42  03 49             )                  R1=40000100                                 \ (00000B50)=40000100
//  (  00000B44  08 60             )                  (R1)=R0                                   \  40000100
//  (  00000B46  02 48             )     then'.       R0=40000100                                 \ (00000B50)=40000100
//  (  00000B48  00 68             )                  R0=(R0)                                   \  40000100
//  (  00000B4A  01 28             )                  R0:1
//  (  00000B4C  F1 D1             )        until'= \ z=0? ne?         \ 00000B4C --> 00000B32 +++++++++++++
//  (  00000B4E  70 47             )                  ret'

    /* Enable External XTAL (4~24 MHz) */
    CLK_EnableXtalRC(CLK_PWRCTL_HIRCEN_Msk);  // (40040200)oR1      (40040200)o1 
//                                   L:  EnableXtalRC   (.n.--.)   ( 1 -- )
//  (  0000089C  03 49             )                  R1=40000200          \ CLK_BA               \ (000008AC)=40000200
//  (  0000089E  09 68             )                  R1=(R1)
//  (  000008A0  01 43             )                  R1oR0
//  (  000008A2  4F F0 80 42       )                  R2=40000000
//  (  000008A6  C2 F8 00 12       )                  (R2+200)=R1
//  (  000008AA  70 47             )                  ret'

 /* Waiting for 12MHz clock ready */
    CLK_WaitClockReady(CLK_STATUS_HIRCSTB_Msk);     //  CLK_WaitClockReady(1);

//                                   L:  WaitClockReady   (.n.--.)   \ ( 1 -- )
//  (  000009B0  01 46             )                  R1=R0
//  (  000009B2  4F F4 D8 32       )                  R2=1B000         \ 110592
//  (  000009B6  05 E0             )      ahead'.   \ jmp_9C4         
//                                          begin'                     \ 000009CC --> 000009B8 ===============================
//  (  000009B8  10 1E             )                  R0=R2-0,s
//  (  000009BA  A2 F1 01 02       )                  R2=R2-1
//  (  000009BE  01 DC             )          if'<= \ z=0;n=v? gt?     \ 000009BE --> 000009C4 +++++++++++++++++++++++++++++
//  (  000009C0  00 20             )                  R0=0  \ fail to ready. 
//  (  000009C2  70 47             )                  ret'
//                                            then'                    \ 000009BE --> 000009C4 +++++++++++++++++++++++++++++
//                                        then'.
//  (  000009C4  03 48             )                  R0=40000250                                 \ (000009D4)=40000250
//  (  000009C6  00 68             )                  R0=(R0)
//  (  000009C8  08 40             )                  R0nR1
//  (  000009CA  88 42             )                  R0:R1
//  (  000009CC  F4 D1             )        until'= \ z=0? ne?         \ 000009CC --> 000009B8 ===============================
//  (  000009CE  01 20             )                  R0=1   \ succes to ready
//  (  000009D0  F7 E7             )                  ret'   \ jmp_9C2
 
    /*  Switch HCLK clock source to HIRC */  //  (40000220)nF/oR1   (40000210)n7/oR0
    CLK_SetHCLK(CLK_CLKSEL0_HCLKSEL_HIRC,CLK_CLKDIV0_HCLK(1));   // R0=7   R1=0 
    /*  Switch HCLK clock source to PLL  */  //  (40000220)nF/oR1   (40000210)n7/oR0
//  CLK_SetHCLK(CLK_CLKSEL0_HCLKSEL_PLL, CLK_CLKDIV0_HCLK(1));   // R0=2   R1=0

//                                   L:  SetHCLK      (.r0.r1.--.)   ( 0 0 -- )
//  (  0000091C  70 B5             )                  push    { R4, R5, R6, lr, }
//  (  0000091E  04 46             )                  R4=R0
//  (  00000920  0D 46             )                  R5=R1
//  (  00000922  0A 48             )                  R0=40000220                                 \ (0000094C)=40000220
//  (  00000924  00 68             )                  R0=(R0)
//  (  00000926  20 F0 0F 00       )                  R0=R0n0F/
//  (  0000092A  28 43             )                  R0oR5
//  (  0000092C  4F F0 80 41       )                  R1=40000000
//  (  00000930  C1 F8 20 02       )                  (R1+220)=R0  \ (40000220)n0F/oR5
//  (  00000934  05 48             )                  R0=40000220                                 \ (0000094C)=40000220
//  (  00000936  10 38             )                  R0-10
//  (  00000938  00 68             )                  R0=(R0)
//  (  0000093A  20 F0 07 00       )                  R0=R0n7/
//  (  0000093E  20 43             )                  R0oR4
//  (  00000940  C1 F8 10 02       )                  (R1+210)=R0  \ (40000210)n7/oR4
//  (  00000944  00 F0 24 F9       )                  SystemCoreClockUpdate  \ rcall_B90
//  (  00000948  70 BD             )                  pop     { R4, R5, R6, pc, }

//                                   L:  SystemCoreClockUpdate      (.--.)
//  (  00000B90  70 B5             )                  push    { R4, R5, R6, lr, }
//  (  00000B92  10 49             )                  R1=40000210                                 \ (00000BD4)=40000210
//  (  00000B94  09 68             )                  R1=(R1+0)
//  (  00000B96  01 F0 07 04       )                  R4=R1n7
//  (  00000B9A  02 2C             )                  R4:2
//  (  00000B9C  03 D0             )        if'<>   \ z=1? eq?         \ 00000B9C --> 00000BA6 +++++++++++++++++++++++++++++
//  (  00000B9E  0E 49             )                  R1=2000000C                                 \ (00000BD8)=2000000C
//  (  00000BA0  51 F8 24 00       )                  R0=(R1<<R4)
//  (  00000BA4  01 E0             )        else'   \ jmp_BAA         
//  (  00000BA6  FF F7 83 FE       )                  CLK_GetPLLClockFreq  \ rcall_8B0
//  (  00000BAA  0A 49             )        then'   \ R1=40000210                                 \ (00000BD4)=40000210
//  (  00000BAC  10 31             )                  R1+10,s
//  (  00000BAE  09 68             )                  R1=(R1)
//  (  00000BB0  01 F0 0F 01       )                  R1n0F
//  (  00000BB4  4D 1C             )                  R5=R1+1,s
//  (  00000BB6  B0 FB F5 F1       )                  udiv_R1,R0,R5
//  (  00000BBA  08 4A             )                  R2=20000004                                 \ (00000BDC)=20000004
//  (  00000BBC  11 60             )                  (R2)=R1
//  (  00000BBE  11 46             )                  R1=R2
//  (  00000BC0  09 68             )                  R1=(R1)
//  (  00000BC2  07 4A             )                  R2=0007A120                                 \ (00000BE0)=0007A120
//  (  00000BC4  11 44             )                  R1+R2
//  (  00000BC6  52 00             )                  R2=R2<<1,s
//  (  00000BC8  B1 FB F2 F1       )                  udiv_R1,R1,R2
//  (  00000BCC  05 4A             )                  R2=20000008                                 \ (00000BE4)=20000008
//  (  00000BCE  11 60             )                  (R2)=R1
//  (  00000BD0  70 BD             )                  pop     { R4, R5, R6, pc, }


    /* Set PLL to power down mode and PLL_STB bit in CLKSTATUS register will be cleared by hardware.*/
    CLK->PLLCTL|= CLK_PLLCTL_PD_Msk;  //  (40040240)o10000
//  (  000009CA  4F F0 80 44       )                  R4=40000000
//  (  000009CE  D4 F8 40 02       )                  R0=(R4+240)
//  (  000009D2  40 F4 80 30       )                  R0=R0o10000
//  (  000009D6  C4 F8 40 02       )                  (R4+240)=R0
//  (  000009DA  1F 48             )                  R0=00085639    //  HIRC  50MHz                            \ (00000A58)=00085639
//  (  000009DC  C4 F8 40 02       )                  (R4+240)=R0
    /* Set PLL frequency */
//     #define    PLLCON_SETTING      CLK_PLLCTL_84MHz_HIRC   //  401A  --> (40000240)=401A
	  CLK->PLLCTL = PLLCON_SETTING;  // (40000240)=401A   for HXT  84MHz
//  CLK->PLLCTL = PLLCON_SETTING;  // (40000240)=85639  for HIRC 50MHz  40000240 @ . --> 85639

//  (  00000A5A  44 F2 1A 00       )                  R0=401A
//  (  00000A5E  20 49             )                  R1=40000240                                 \ (00000AE0)=40000240
//  (  00000A60  08 60             )                  (R1)=R0


    /*  Waiting for clock ready */
    CLK_WaitClockReady(CLK_STATUS_PLLSTB_Msk);        //    CLK_WaitClockReady(4);
//                                   L:  WaitClockReady   (.n.--.)   \ ( 4 -- )
//  (  000009B0  01 46             )                  R1=R0
//  (  000009B2  4F F4 D8 32       )                  R2=1B000  \ --> 110592
//  (  000009B6  05 E0             )      ahead'.   \ jmp_9C4         
//                                          begin'                     \ 000009CC --> 000009B8 ===============================
//  (  000009B8  10 1E             )                  R0=R2-0,s
//  (  000009BA  A2 F1 01 02       )                  R2=R2-1
//  (  000009BE  01 DC             )          if'<= \ z=0;n=v? gt?     \ 000009BE --> 000009C4 +++++++++++++++++++++++++++++
//  (  000009C0  00 20             )                  R0=0  \ fail to ready. 
//  (  000009C2  70 47             )                  ret'
//                                            then'                    \ 000009BE --> 000009C4 +++++++++++++++++++++++++++++
//                                        then'.
//  (  000009C4  03 48             )                  R0=40000250                                 \ (000009D4)=40000250
//  (  000009C6  00 68             )                  R0=(R0)
//  (  000009C8  08 40             )                  R0nR1
//  (  000009CA  88 42             )                  R0:R1
//  (  000009CC  F4 D1             )        until'= \ z=0? ne?         \ 000009CC --> 000009B8 ===============================
//  (  000009CE  01 20             )                  R0=1   \ success to ready
//  (  000009D0  F7 E7             )                  ret'   \ jmp_9C2
 

//  /*  Switch HCLK clock source to HIRC */  //  (40000220)nF/oR1   (40000210)n7/oR0
//  CLK_SetHCLK(CLK_CLKSEL0_HCLKSEL_HIRC,CLK_CLKDIV0_HCLK(1));   // R0=7   R1=0 
    /*  Switch HCLK clock source to PLL  */  //  (40000220)nF/oR1   (40000210)n7/oR0
    CLK_SetHCLK(CLK_CLKSEL0_HCLKSEL_PLL, CLK_CLKDIV0_HCLK(1));   // R0=2   R1=0
//                                   L:  SetHCLK      (.r0.r1.--.)   ( 0 0 -- )
//  (  0000091C  70 B5             )                  push    { R4, R5, R6, lr, }
//  (  0000091E  04 46             )                  R4=R0
//  (  00000920  0D 46             )                  R5=R1
//  (  00000922  0A 48             )                  R0=40000220                                 \ (0000094C)=40000220
//  (  00000924  00 68             )                  R0=(R0)
//  (  00000926  20 F0 0F 00       )                  R0=R0n0F/
//  (  0000092A  28 43             )                  R0oR5
//  (  0000092C  4F F0 80 41       )                  R1=40000000
//  (  00000930  C1 F8 20 02       )                  (R1+220)=R0  \ (40000220)n0F/oR5
//  (  00000934  05 48             )                  R0=40000220                                 \ (0000094C)=40000220
//  (  00000936  10 38             )                  R0-10
//  (  00000938  00 68             )                  R0=(R0)
//  (  0000093A  20 F0 07 00       )                  R0=R0n7/
//  (  0000093E  20 43             )                  R0oR4
//  (  00000940  C1 F8 10 02       )                  (R1+210)=R0  \ (40000210)n7/oR4
//  (  00000944  00 F0 24 F9       )                  SystemCoreClockUpdate  \ rcall_B90
//  (  00000948  70 BD             )                  pop     { R4, R5, R6, pc, }



    /* Enable IP clock */
    CLK_EnableModuleClock(UART0_MODULE);  // r0=57803d10     40000204 @ .  --> 4
//  #define UART0_MODULE     ((1UL<<30)|(1<<28)|(3<<25)           |(24<<20)|(0<<18)|(0xF<<10)         |( 8<<5)|CLK_APBCLK0_UART0CKEN_Pos)  /*!< UART0 Module  \hideinitializer */
//  u32_UART0_MODULE=UART0_MODULE;   u32_UART0_MODULE+=1;  / for testing purpose

//	                                 L:  CLK_EnableModuleClock   (.n.--n.)
//  (  00000840  81 0F             )                  R1=R0>>1E
//  (  00000842  89 00             )                  R1=R1<<2,s
//  (  00000844  01 F1 80 41       )                  R1=R1+40000000
//  (  00000848  D1 F8 04 22       )                  R2=(R1+204)
//  (  0000084C  00 F0 1F 03       )                  R3=R0n1F
//  (  00000850  01 20             )                  R0=1
//  (  00000852  98 40             )                  R0<<R3,s
//  (  00000854  02 43             )                  R2oR0
//  (  00000856  C1 F8 04 22       )                  (R1+204)=R2
//  (  0000085A  70 47             )                  ret'	
		
    CLK_EnableModuleClock(  ADC_MODULE);  //  r0=5623fe1c

//  #define ADC_MODULE       ((1UL<<30)|(1<<28)|(3<<25)           |( 2<<20)|(0<<18)|(0xFF<<10)        |(16<<5)|CLK_APBCLK0_ADCCKEN_Pos)    /*!< ADC Module  \hideinitializer */
//	                                 L:  CLK_EnableModuleClock   (.n.--n.)
//  (  00000840  81 0F             )                  R1=R0>>1E
//  (  00000842  89 00             )                  R1=R1<<2,s
//  (  00000844  01 F1 80 41       )                  R1=R1+40000000
//  (  00000848  D1 F8 04 22       )                  R2=(R1+204)
//  (  0000084C  00 F0 1F 03       )                  R3=R0n1F
//  (  00000850  01 20             )                  R0=1
//  (  00000852  98 40             )                  R0<<R3,s
//  (  00000854  02 43             )                  R2oR0
//  (  00000856  C1 F8 04 22       )                  (R1+204)=R2
//  (  0000085A  70 47             )                  ret'	
		
//  u32_ADC_MODULE=ADC_MODULE;            u32_ADC_MODULE+=1;  //  for testing purpose
//  CLK_EnableModuleClock( u32_ADC_MODULE );  //  for testing purpose
//        0x000009f6:    4e1b        .N      LDR      r6,[pc,#108] ; [0xa64] = 0x5623fe1c
//        0x000009f8:    4630        0F      MOV      r0,r6
//        0x000009fa:    f7ffff21    ..!.    BL       CLK_EnableModuleClock ; 0x840
//        0x000009fe:    1c70        p.      ADDS     r0,r6,#1   <--- r0  is  u32_ADC_MODULE
//        0x00000a00:    f7ffff1e    ....    BL       CLK_EnableModuleClock ; 0x840	
		
    /* Select IP clock source */
    CLK_SetModuleClock(UART0_MODULE,CLK_CLKSEL1_UARTSEL_HIRC,CLK_CLKDIV0_UART(1));
    CLK_SetModuleClock(  ADC_MODULE,CLK_CLKSEL1_ADCSEL_PCLK, CLK_CLKDIV0_ADC(5));

//  (  000009EE  1B 4D             )                  R5=57803D10                                 \ (00000A5C)=57803D10
//  (  000009F0  28 46             )                  R0=R5
//  (  000009F2  FF F7 25 FF       )                  CLK_EnableModuleClock                       \ (c) Label:      840
//  (  000009F6  1A 4E             )                  R6=5623FE1C                                 \ (00000A60)=5623FE1C
//  (  000009F8  30 46             )                  R0=R6
//  (  000009FA  FF F7 21 FF       )                  CLK_EnableModuleClock                       \ (c) Label:      840
//  (  000009FE  00 22             )                  R2=0                                                        \
//  (  00000A00  4F F0 40 71       )                  R1=3000000
//  (  00000A04  28 46             )                  R0=R5        \ R5=57803D10  UART0_MODULE
//  (  00000A06  FF F7 6F FF       )                  CLK_SetModuleClock                          \ (c) Label:      8E8
//  (  00000A0A  22 13             )                  R2=R4,a>>0C  \ R4=40000000    ADC_MODULE
//  (  00000A0C  08 21             )                  R1=8
//  (  00000A0E  30 46             )                  R0=R6        \ R6=5623FE1C
//  (  00000A10  FF F7 6A FF       )                  CLK_SetModuleClock                          \ (c) Label:      8E8
//  (  00000A14  00 F0 5E F8       )                  SystemCoreClockUpdate                       \ (c) Label:      AD4


//                                    L:  CLK_SetModuleClock
//  (  000008E8  70 B5             )                  push    { R4, R5, R6, lr, }
//  (  000008EA  10 F4 7F 3F       )                  R0n3FC00,tst
//  (  000008EE  0D D0             )        if'<> \ z=1? eq?           \ 000008EE --> 0000090C ===========================
//  (  000008F0  10 4C             )                  R4=40000220                                 \ (00000934)=40000220
//  (  000008F2  C0 F3 81 43       )                  ubfx_R3=R0<<1,481
//  (  000008F6  04 EB 83 04       )                  R4=R4+R3<<2
//  (  000008FA  23 68             )                  R3=(R4+0)
//  (  000008FC  C0 F3 87 25       )                  ubfx_R5=R0<<7,287
//  (  00000900  C0 F3 44 16       )                  ubfx_R6=R0<<4,144
//  (  00000904  B5 40             )                  R5<<R6,s
//  (  00000906  AB 43             )                  R3nR5/
//  (  00000908  13 43             )                  R3oR2
//  (  0000090A  23 60             )                  (R4+0)=R3
//                                          then'                      \ 000008EE --> 0000090C ===========================
//  (  0000090C  42 0E             )                  R2=R0>>19
//  (  0000090E  52 07             )                  R2=R2<<1D,s
//  (  00000910  0E D0             )        if'<> \ z=1? eq?           \ 00000910 --> 00000930 ------------------------
//  (  00000912  08 4B             )                  R3=40000220                                 \ (00000934)=40000220
//  (  00000914  C0 F3 01 72       )                  ubfx_R2=R0<<1,701
//  (  00000918  10 3B             )                  R3-10
//  (  0000091A  03 EB 82 03       )                  R3=R3+R2<<2
//  (  0000091E  1A 68             )                  R2=(R3+0)
//  (  00000920  C0 F3 42 64       )                  ubfx_R4=R0<<2,642
//  (  00000924  C0 F3 04 50       )                  ubfx_R0=R0<<4,504
//  (  00000928  84 40             )                  R4<<R0,s
//  (  0000092A  A2 43             )                  R2nR4/
//  (  0000092C  0A 43             )                  R2oR1
//  (  0000092E  1A 60             )                  (R3+0)=R2
//                                          then'                      \ 00000910 --> 00000930 ------------------------
//  (  00000930  70 BD             )                  pop     { R4, R5, R6, pc, }
//  (  00000932  00 00             )                  nop
//  (  00000934  20 02 00 40       )           data:  40000220             \ from      8F0


//   CLK_SetModuleClock
//        0x000008e8:    b570        p.      PUSH     {r4-r6,lr}
//        0x000008ea:    f4103f7f    ...?    TST      r0,#0x3fc00
//        0x000008ee:    d00d        ..      BEQ      0x90c ; CLK_SetModuleClock + 36
//        0x000008f0:    4c10        .L      LDR      r4,[pc,#64] ; [0x934] = 0x40000220
//        0x000008f2:    f3c04381    ...C    UBFX     r3,r0,#18,#2
//        0x000008f6:    eb040483    ....    ADD      r4,r4,r3,LSL #2
//        0x000008fa:    6823        #h      LDR      r3,[r4,#0]
//        0x000008fc:    f3c02587    ...%    UBFX     r5,r0,#10,#8
//        0x00000900:    f3c01644    ..D.    UBFX     r6,r0,#5,#5
//        0x00000904:    40b5        .@      LSLS     r5,r5,r6
//        0x00000906:    43ab        .C      BICS     r3,r3,r5
//        0x00000908:    4313        .C      ORRS     r3,r3,r2
//        0x0000090a:    6023        #//      STR      r3,[r4,#0]
//        0x0000090c:    0e42        B.      LSRS     r2,r0,#25
//        0x0000090e:    0752        R.      LSLS     r2,r2,#29
//        0x00000910:    d00e        ..      BEQ      0x930 ; CLK_SetModuleClock + 72
//        0x00000912:    4b08        .K      LDR      r3,[pc,#32] ; [0x934] = 0x40000220
//        0x00000914:    f3c07201    ...r    UBFX     r2,r0,#28,#2
//        0x00000918:    3b10        .;      SUBS     r3,r3,#0x10
//        0x0000091a:    eb030382    ....    ADD      r3,r3,r2,LSL #2
//        0x0000091e:    681a        .h      LDR      r2,[r3,#0]
//        0x00000920:    f3c06442    ..Bd    UBFX     r4,r0,#25,#3
//        0x00000924:    f3c05004    ...P    UBFX     r0,r0,#20,#5
//        0x00000928:    4084        .@      LSLS     r4,r4,r0
//        0x0000092a:    43a2        .C      BICS     r2,r2,r4
//        0x0000092c:    430a        .C      ORRS     r2,r2,r1
//        0x0000092e:    601a        .//      STR      r2,[r3,#0]
//        0x00000930:    bd70        p.      POP      {r4-r6,pc}


    /* Update System Core Clock */
    /* User can use SystemCoreClockUpdate() to calculate SystemCoreClock. */
    SystemCoreClockUpdate();
//                                    L:  SystemCoreClockUpdate
//  (  00000AD4  10 B5             )                  push    { R4, lr, }
//  (  00000AD6  4F F0 80 44       )                  R4=40000000
//  (  00000ADA  D4 F8 10 02       )                  R0=(R4+210)
//  (  00000ADE  00 F0 07 00       )                     R0n7
//  (  00000AE2  02 28             )                  R0:2
//  (  00000AE4  03 D0             )        if'<> \ z=1? eq?           \ 00000AE4 --> 00000AEE ----
//  (  00000AE6  0B 49             )                  R1=20000008                                 \ (00000B14)=20000008
//  (  00000AE8  51 F8 20 00       )                  R0=(R1<<R0)
//  (  00000AEC  01 E0             )                  jmp_AF2         \
//                                          then'                      \ 00000AE4 --> 00000AEE ----
//  (  00000AEE  FF F7 BD FE       )                  CLK_GetPLLClockFreq                         \ (c) Label:      86C
//  (  00000AF2  D4 F8 20 12       )                  R1=(R4+220)
//  (  00000AF6  08 4A             )                  R2=0007A120                                 \ (00000B18)=0007A120
//  (  00000AF8  01 F0 0F 01       )                     R1n0F
//  (  00000AFC  49 1C             )                     R1+1,s
//  (  00000AFE  B0 FB F1 F1       )                  udiv_R1,R0,R1
//  (  00000B02  04 48             )                  R0=20000008                                 \ (00000B14)=20000008
//  (  00000B04  08 38             )                  R0-8
//  (  00000B06  01 60             )                  (R0+0)=R1                                                   \
//  (  00000B08  11 44             )                  R1+R2
//  (  00000B0A  52 00             )                     R2<<1,s
//  (  00000B0C  B1 FB F2 F1       )                  udiv_R1,R1,R2
//  (  00000B10  41 60             )                  (R0+4)=R1
//  (  00000B12  10 BD             )                  pop     { R4, pc, }
//  (  00000B14  08 00 00 20       )           data:  20000008             \ from      AE6
//  (  00000B18  20 A1 07 00       )           data:  0007A120             \ from      AF6

    /*---------------------------------------------------------------------------------------------------------*/
    /* Init I/O Multi-function                                                                                 */
    /*---------------------------------------------------------------------------------------------------------*/
    /* Set GPG multi-function pins for UART0 RXD and TXD */
    SYS->GPG_MFPL = SYS_GPG_MFPL_PG1MFP_UART0_RXD | SYS_GPG_MFPL_PG2MFP_UART0_TXD ;

    /* Set GPG multi-function pins for CKO */
    SYS->GPC_MFPL = (SYS->GPC_MFPL & ~SYS_GPC_MFPL_PC5MFP_Msk) | SYS_GPC_MFPL_PC5MFP_CLK_O ;

    /* Configure analog input pins ADC0~ADC2 (GPE0~GPE2) */
    SYS->GPE_MFPL = SYS_GPE_MFPL_PE0MFP_ADC0_0 | SYS_GPE_MFPL_PE1MFP_ADC0_1 | SYS_GPE_MFPL_PE2MFP_ADC0_2;

    /* Disable the digital input path */
    PE->DINOFF = PE->DINOFF | (GPIO_DINOFF_DINOFF0_Msk|GPIO_DINOFF_DINOFF1_Msk|GPIO_DINOFF_DINOFF2_Msk);

    /* Reset ADC */
    SYS_ResetModule(ADC_RST);

    /* Vref connect to AVDD */
    SYS->VREFCTL |= SYS_VREFCTL_VREF_AVDD;

    /* Lock protected registers */
    SYS_LockReg();
}
 
void UART0_Init(void)
{   // uint32_t  u32Flag;  // for testing purpose
    /*---------------------------------------------------------------------------------------------------------*/
    /* Init UART                                                                                               */
    /*---------------------------------------------------------------------------------------------------------*/
    /* Reset IP */
    SYS_ResetModule(UART0_RST);

    /* Configure UART0 and set UART0 Baudrate */
    UART0->LINE |=0x07;
    UART0->BAUD = 0x30000066;   /* 12MHz reference clock input, for 115200 */  // for HXT only
}
 
int32_t main (void)
{  //  uint32_t   u32Flag;  //  for testing purpose
    /* Init System, IP clock and multi-function I/O
       In the end of SYS_Init() will issue SYS_LockReg()
       to lock protected register. If user want to write
       protected register, please issue SYS_UnlockReg()
       to unlock protected register if necessary */
    SYS_Init();
	
//                                    L:  SYS_Init
//  (  000009B0  70 B5             )                  push    { R4, R5, R6, lr, }
//  (  000009B2  00 F0 6B F8       )                  SYS_UnlockReg                               \ (c) Label:      A8C
//  (  000009B6  04 20             )                  R0=4
//  (  000009B8  FF F7 50 FF       )                  CLK_EnableXtalRC                            \ (c) Label:      85C
//  (  000009BC  10 20             )                  R0=10
//  (  000009BE  FF F7 BB FF       )                  CLK_WaitClockReady                          \ (c) Label:      938
//  (  000009C2  00 21             )                  R1=0                                                        \
//  (  000009C4  07 20             )                  R0=7
//  (  000009C6  FF F7 7D FF       )                  CLK_SetHCLK                                 \ (c) Label:      8C4
//  (  000009CA  4F F0 80 44       )                  R4=40000000
//  (  000009CE  D4 F8 40 02       )                  R0=(R4+240)
//  (  000009D2  40 F4 80 30       )                     R0o10000
//  (  000009D6  C4 F8 40 02       )                  (R4+240)=R0
//  (  000009DA  1F 48             )                  R0=00085639                                 \ (00000A58)=00085639
//  (  000009DC  C4 F8 40 02       )                  (R4+240)=R0
//  (  000009E0  04 20             )                  R0=4
//  (  000009E2  FF F7 A9 FF       )                  CLK_WaitClockReady                          \ (c) Label:      938
//  (  000009E6  00 21             )                  R1=0                                                        \
//  (  000009E8  02 20             )                  R0=2
//  (  000009EA  FF F7 6B FF       )                  CLK_SetHCLK                                 \ (c) Label:      8C4
//  (  000009EE  1B 4D             )                  R5=57803D10                                 \ (00000A5C)=57803D10
//  (  000009F0  28 46             )                  R0=R5
//  (  000009F2  FF F7 25 FF       )                  CLK_EnableModuleClock                       \ (c) Label:      840
//  (  000009F6  1A 4E             )                  R6=5623FE1C                                 \ (00000A60)=5623FE1C
//  (  000009F8  30 46             )                  R0=R6
//  (  000009FA  FF F7 21 FF       )                  CLK_EnableModuleClock                       \ (c) Label:      840
//  (  000009FE  00 22             )                  R2=0                                                        \
//  (  00000A00  4F F0 40 71       )                  R1=3000000
//  (  00000A04  28 46             )                  R0=R5
//  (  00000A06  FF F7 6F FF       )                  CLK_SetModuleClock                          \ (c) Label:      8E8
//  (  00000A0A  22 13             )                  R2=R4,a>>0C
//  (  00000A0C  08 21             )                  R1=8
//  (  00000A0E  30 46             )                  R0=R6
//  (  00000A10  FF F7 6A FF       )                  CLK_SetModuleClock                          \ (c) Label:      8E8
//  (  00000A14  00 F0 5E F8       )                  SystemCoreClockUpdate                       \ (c) Label:      AD4
//  (  00000A18  4F F4 88 70       )                  R0=110
//  (  00000A1C  20 66             )                  (R4+60)=R0
//  (  00000A1E  20 6C             )                  R0=(R4+40)
//  (  00000A20  20 F4 70 00       )                     R0nF00000/
//  (  00000A24  40 F4 80 10       )                     R0o100000
//  (  00000A28  20 64             )                  (R4+40)=R0
//  (  00000A2A  40 F2 11 10       )                  R0=111
//  (  00000A2E  20 65             )                  (R4+50)=R0
//  (  00000A30  4F F0 40 20       )                  R0=40004000
//  (  00000A34  D0 F8 04 11       )                  R1=(R0+104)
//  (  00000A38  41 F4 E0 21       )                     R1o70000
//  (  00000A3C  C0 F8 04 11       )                  (R0+104)=R1
//  (  00000A40  08 48             )                  R0=0400001C                                 \ (00000A64)=0400001C
//  (  00000A42  00 F0 17 F8       )                  SYS_ResetModule                             \ (c) Label:      A74
//  (  00000A46  A0 6A 40 F0 10 00 )                  (R4+28)o10
//  (  00000A4E  BD E8 70 40       )                  pop{}'  { R4, R5, R6, RE, }
//  (  00000A52  00 F0 09 B8       )                  jmp_A68
//  (  00000A56  00 00             )                     R0<<0,s                                                  \
//  (  00000A58  39 56 08 00       )           data:  00085639             \ from      9DA
//  (  00000A5C  10 3D 80 57       )           data:  57803D10             \ from      9EE
//  (  00000A60  1C FE 23 56       )           data:  5623FE1C             \ from      9F6
//  (  00000A64  1C 00 00 04       )           data:  0400001C             \ from      A40

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	  //  CLK_SetSysTickClockSrc(CLK_CLKSEL0_STCLKSEL_HIRC);   //  ?????????????
    //     PD15 = 0;   PD15 = 0; 
    /* Configure PB.10 as Output mode */
    GPIO_SetMode(PD, BIT15, GPIO_MODE_OUTPUT);  // TX.io --> NUC442_pin75  NUC472_pin91
    GPIO_SetMode(PF, BIT0,  GPIO_MODE_INPUT);   // RX.io --> NUC442_pin76  NUC472_pin92

	
	
    /* Init UART0 for printf */
//  UART0_Init();   //  for HXT only
    UART_Open(UART0, 115200);  //  uart0TX:nuc442_pin16(PG2) uartRX:nuc442_pin15(PG1)   ???62:PA14   uart5 tx:PB.10   rx:PB.11

    printf("\n\nCPU @ %dHz\n", SystemCoreClock);

    printf("\nThis sample code demonstrate ADC continuous scan conversion\n");
    printf("It convert channel 0,1,2 continuously and print conversion result\n");

    // Enable channel 0,1,2  //  (40043040)oR1    (40043040)oR2    (40043044)nFFFCF000oR3
//  ADC_Open(ADC, ADC_INPUT_MODE_SINGLE_END, ADC_OPERATION_MODE_CONTINUOUS,   (ADC_CH_0_MASK | ADC_CH_1_MASK | ADC_CH_2_MASK));
    ADC_Open(ADC, ADC_INPUT_MODE_SINGLE_END, ADC_OPERATION_MODE_SINGLE_CYCLE, (ADC_CH_0_MASK | ADC_CH_1_MASK | ADC_CH_2_MASK));
    
//  (  00000840  30 B5             )                  push    { R4, R5, lr, }
//  (  00000842  04 46             )                  R4=R0
//  (  00000844  08 48             )                  R0=40043000      \ ADC_DAT0                 \ (00000868)=40043000
//  (  00000846  00 6C             )                  R0=(R0+40)       \ ADC_CTL                  \  40043040
//  (  00000848  08 43             )                  R0oR1
//  (  0000084A  07 4D             )                  R5=40043000      \ ADC_DAT0                 \ (00000868)=40043000
//  (  0000084C  28 64             )                  (R5+40)=R0       \ ADC_CTL                  \  40043040
//  (  0000084E  28 46             )                  R0=R5
//  (  00000850  00 6C 10 43 28 64 )                  (R0+40)oR2       \ ADC_CTL                  \  40043040
//  (  00000856  28 46             )                  R0=R5
//  (  00000858  40 6C             )                  R0=(R0+44)       \ ADC_CHEN                 \  40043044
//  (  0000085A  04 4D             )                  R5=FFFCF000                                 \ (0000086C)=FFFCF000
//  (  0000085C  28 40 18 43       )                  R0nR5oR3
//  (  00000860  01 4D             )                  R5=40043000      \ ADC_DAT0                 \ (00000868)=40043000
//  (  00000862  68 64             )                  (R5+44)=R0       \ ADC_CHEN                 \  40043044
//  (  00000864  30 BD             )                  pop     { R4, R5, pc, }
 
//  Power on ADC
    ADC_POWER_ON(ADC);   //  (40043040)o1
//  (  00000D94  2A 48             )                  R0=40043000      \ ADC_DAT0                 \ (00000E40)=40043000
//  (  00000D96  00 6C             )                  R0=(R0+40)       \ ADC_CTL                  \  40043040
//  (  00000D98  40 F0 01 00       )                  R0=R0o1
//  (  00000D9C  28 49             )                  R1=40043000      \ ADC_DAT0                 \ (00000E40)=40043000
//  (  00000D9E  08 64             )                  (R1+40)=R0       \ ADC_CTL                  \  40043040

    // Enable ADC ADC_IF interrupt
    ADC_EnableInt(ADC, ADC_ADF_INT);   //  1
//  (  0000073C  01 F0 01 02       )                  R2=R1n1
//  (  00000740  2A B1             )         if_R2<>0.pc=74E
//  (  00000742  0C 4A             )                  R2=40043000      \ ADC_DAT0                 \ (00000774)=40043000
//  (  00000744  12 6C             )                  R2=(R2+40)       \ ADC_CTL                  \  40043040
//  (  00000746  42 F0 02 02       )                  R2=R2o2
//  (  0000074A  0A 4B             )                  R3=40043000      \ ADC_DAT0                 \ (00000774)=40043000
//  (  0000074C  1A 64             )                  (R3+40)=R2       \ ADC_CTL                  \  40043040
//  (  0000074E  01 F0 02 02       )         then'    R2=R1n2
//  (  00000752  2A B1             )         if_R2<>0.pc=760
//  (  00000754  07 4A             )                  R2=40043000      \ ADC_DAT0                 \ (00000774)=40043000
//  (  00000756  92 6C             )                  R2=(R2+48)       \ ADC_CMP0                 \  40043048
//  (  00000758  42 F0 02 02       )                  R2=R2o2
//  (  0000075C  05 4B             )                  R3=40043000      \ ADC_DAT0                 \ (00000774)=40043000
//  (  0000075E  9A 64             )                  (R3+48)=R2       \ ADC_CMP0                 \  40043048
//  (  00000760  01 F0 04 02       )         then'    R2=R1n4
//  (  00000764  2A B1             )         if_R2<>0.pc=772
//  (  00000766  03 4A             )                  R2=40043000      \ ADC_DAT0                 \ (00000774)=40043000
//  (  00000768  D2 6C             )                  R2=(R2+4C)       \ ADC_CMP1                 \  4004304C
//  (  0000076A  42 F0 02 03       )                  R3=R2o2
//  (  0000076E  01 4A             )                  R2=40043000      \ ADC_DAT0                 \ (00000774)=40043000
//  (  00000770  D3 64             )                  (R2+4C)=R3       \ ADC_CMP1                 \  4004304C
//  (  00000772  70 47             )         thrn'    ret'

    NVIC_EnableIRQ(ADC_IRQn);      //  (E000E004)=400
//  (  00000C5E  20 4A             )                  R2=E000E004                                 \ (00000CE0)=E000E004
//  (  00000C60  01 21             )                  R1=1
//  (  00000C62  88 02             )                  R0=R1<<0A,s
//  (  00000C64  C2 F8 00 01       )                  (R2+100)=R0
    ADC_START_CONV(ADC);           //  (40043040)o800
//  #define ADC_START_CONV(adc) (ADC->CTL |= ADC_CTL_SWTRG_Msk)
//     15        14        13        12       11        10        9         8
//  Reserved  Reserved  Reserved  Reserved   SWTRG    DIFFEN    PDMAEN   HWTRGEN
//                                             1         0        0         0
//  (  00000DC0  1F 48             )                  R0=40043000          \ ADC_DAT0             \ (00000E40)=40043000
//  (  00000DC2  00 6C             )                  R0=(R0+40)
//  (  00000DC4  40 F4 00 60       )                  R0=R0o800
//  (  00000DC8  1D 49             )                  R1=40043000          \ ADC_DAT0             \ (00000E40)=40043000
//  (  00000DCA  08 64             )                  (R1+40)=R0 

//  (  00000C68  20 6C 40 F4 00 60 )                  (R4+40)o800   \ leveel 3

 //  u32Flag = ADC_GET_INT_FLAG(ADC, ADC_ADF_INT);	  // for testing purpose
 	 
    while(1)  {  PD15=0; PD15=1; PD15=0; PD15=1; PD15=0; PD15=1; PD15=0; PD15=1; }
    
		while(1);
}

/*** (C) COPYRIGHT 2013 Nuvoton Technology Corp. ***/



comment;































\ 472app6.f

t:   OPA_BA         40046000  ...  ret'
t:   OPA_CTL        40046000  ...  ret'
t:   OPA_STATUS     40046004  ...  ret'

COMMENT:
:{  {OPA_BA}        40046000  ...  };
:{  {OPA_CTL}       40046000  ...  };
:{  {OPA_STATUS}    40046004  ...  };
COMMENT;

t:  OPEN0         (.--.a.bit.)       40046000 ...  0 ...  ret'
t:  OPEN1         (.--.a.bit.)       40046000 ...  1 ...  ret'
t:  OPSMTEN0      (.--.a.bit.)       40046000 ...  4 ...  ret'
t:  OPSMTEN1      (.--.a.bit.)       40046000 ...  5 ...  ret'

t:  OPDO0         (.--.a.bit.)       40046004 ...  0 ...  ret'
t:  OPDO1         (.--.a.bit.)       40046004 ...  1 ...  ret'
t:  OPDF0         (.--.a.bit.)       40046004 ...  4 ...  ret'
t:  OPDF1         (.--.a.bit.)       40046004 ...  5 ...  ret'

:.  all.port=0'    0 0  R=#                  240  0  DO.  PA_DOUT'  I.  +.   0   (#)=R  40  +LOOP.   RET'   ;.
:.  all.port=0     0 0  R=#  1 PA_DOUT' R=#  240  0  DO.            1   I.   0 (R+#)=R  40  +LOOP.   RET'   ;.


:.  all.port=X'                              240  0  DO.  PA_DOUT'  I.  +.   0   (#)=R  40  +LOOP.   RET'   ;.
:.  all.port=X               1 PA_DOUT' R=#  240  0  DO.            1   I.   0 (R+#)=R  40  +LOOP.   RET'   ;.


:.  all.port=1'    0 1  R=#                  240  0  DO.  PA_DOUT'  I.  +.   0   (#)=R  40  +LOOP.   RET'   ;.
:.  all.port=1     0 1  R=#  1 PA_DOUT' R=#  240  0  DO.            1   I.   0 (R+#)=R  40  +LOOP.   RET'   ;.

:.  all.port=0'    0 0  R=#   all.port=X'  ;.
:.  all.port=0     0 0  R=#   all.port=X   ;.
:.  all.port=1'    0 1  R=#   all.port=X'  ;.
:.  all.port=1     0 1  R=#   all.port=X   ;.

\  20003000  ORG   : QQ  10  0  DO  I  .  LOOP  ;   20003000  20003000  2000  P>T
\ -----------------------------------------------------------------------------------------------------------------------------------------------------------------------
: PM  PA FFFF OUTPUT MODE  PB FFFF OUTPUT MODE  PC FFFF OUTPUT MODE  PD FFFF OUTPUT MODE  PE FFFF OUTPUT MODE
      PF FFFE OUTPUT MODE  PG FFFF OUTPUT MODE  PH FFFF OUTPUT MODE  PI FFFF OUTPUT MODE  ;
\ -----------------------------------------------------------------------------------------------------------------------------------------------------------------------
\   AAAAAAAAAAAAAAAA            BBBBBBBBBBBBBBBBBB            CCCCCCCCCCCCCCCCC           DDDDDDDDDDDDDDDDD           EEEEEEEEEEEEEEEEE           FFFFFFFFFFFFFFFFF
\      N MOS FET                   N MOS FET                       NPN                       N MOS FET                   N MOS FET                     NPN
\ ---------------------------------------------------------------------------------------------------------------------------------------------------------
CODE  a1=0 PE.2=0' C; ( 164) CODE  b1=0  PE.12=0' C; (   1) CODE  c1=0 PF.15=0' C; ( 13) CODE  d1=0 PD.4=0'  C; ( 29) CODE  e1=0 PG.12=0' C; ( 38) CODE  f1=0 PA.8=0'  C; ( 70)
CODE  a2=0 PC.1=0' C; ( 133) CODE  b2=0  PH.2=0'  C; ( 150) CODE  c2=0 PG.0=0'  C; ( 14) CODE  d2=0 PD.5=0'  C; ( 30) CODE  e2=0 PI.5=0'  C; ( 52) CODE  f2=0 PA.9=0'  C; ( 71)
CODE  a3=0 PC.2=0' C; ( 134) CODE  b3=0  PH.3=0'  C; ( 151) CODE  c3=0 PG.1=0'  C; ( 15) CODE  d3=0 PD.6=0'  C; ( 31) CODE  e3=0 PI.6=0'  C; ( 53) CODE  f3=0 PA.10=0' C; ( 72)
CODE  a4=0 PC.3=0' C; ( 135) CODE  b4=0  PH.4=0'  C; ( 152) CODE  c4=0 PG.2=0'  C; ( 16) CODE  d4=0 PD.7=0'  C; ( 32) CODE  e4=0 PD.8=0'  C; ( 54) CODE  f4=0 PA.11=0' C; ( 73)
CODE  a5=0 PC.4=0' C; ( 136) CODE  b5=0  PH.5=0'  C; ( 153) CODE  c5=0 PC.12=0' C; ( 17) CODE  d5=0 PH.15=0' C; ( 33) CODE  e5=0 PD.9=0'  C; ( 55) CODE  f5=0 PA.12=0' C; ( 74)
CODE  a6=0 PC.5=0' C; ( 137) CODE  b6=0  PH.6=0'  C; ( 154) CODE  c6=0 PC.13=0' C; ( 18) CODE  d6=0 PI.0=0'  C; ( 34) CODE  e6=0 PA.2=0'  C; ( 56) CODE  f6=0 PA.13=0' C; ( 75)
CODE  a7=0 PC.6=0' C; ( 138) CODE  b7=0  PH.7=0'  C; ( 155) CODE  c7=0 PC.14=0' C; ( 19) CODE  d7=0 PI.1=0'  C; ( 35) CODE  e7=0 PA.3=0'  C; ( 57) CODE  f7=0 PA.14=0' C; ( 76)
CODE  a8=0 PC.7=0' C; ( 139) CODE  b8=0  PH.8=0'  C; ( 156) CODE  c8=0 PC.15=0' C; ( 20) CODE  d8=0 PI.2=0'  C; ( 36) CODE  e8=0 PA.4=0'  C; ( 58) CODE  f8=0 PI.9=0'  C; ( 77)
CODE  a9=0 PC.8=0' C; ( 140) CODE  b9=0  PH.9=0'  C; ( 157) CODE  c9=0 PD.0=0'  C; ( 21) CODE  d9=0 PG.13=0' C; ( 37) CODE  e9=0 PA.5=0'  C; ( 59) CODE  f9=0 PI.10=0' C; ( 78)
CODE a10=0 PF.2=0' C; ( 141) CODE b10=0  PH.10=0' C; ( 158) CODE c10=0 PD.1=0'  C; ( 22) CODE d10=0 PG.12=0' C; ( 38) CODE e10=0 PA.6=0'  C; ( 60) CODE f10=0 PD.10=0' C; ( 79)
CODE a11=0 PF.3=0' C; ( 142) CODE b11=0  PE.8=0'  C; ( 173) CODE c11=0 PD.2=0'  C; ( 23) CODE d11=0 PG.15=0' C; ( 45) CODE e11=0 PI.7=0'  C; ( 61) CODE f11=0 PD.11=0' C; ( 80)
CODE a12=0 PF.4=0' C; ( 143) CODE b12=0  PE.9=0'  C; ( 174) CODE c12=0 PH.11=0' C; ( 24) CODE d12=0 PG.14=0' C; ( 46) CODE e12=0 PI.8=0'  C; ( 62) CODE f12=0 PD.12=0' C; ( 81)
CODE a13=0 PF.5=0' C; ( 144) CODE b13=0  PE.10=0' C; ( 175) CODE c13=0 PH.12=0' C; ( 25) CODE d13=0 PA.0=0'  C; ( 48) CODE e13=0 PG.3=0'  C; ( 63) CODE f13=0 PA.15=0' C; ( 82)
CODE a14=0 PF.6=0' C; ( 147) CODE b14=0  PE.11=0' C; ( 176) CODE c14=0 PH.13=0' C; ( 26) CODE d14=0 PA.1=0'  C; ( 49) CODE e14=0 PG.4=0'  C; ( 64) CODE f14=0 PC.9=0'  C; ( 83)
CODE a15=0 PF.7=0' C; ( 148) CODE b15=0  PE.4=0'  C; ( 166) CODE c15=0 PH.14=0' C; ( 27) CODE d15=0 PI.3=0'  C; ( 50) CODE e15=0 PG.5=0'  C; ( 65) CODE f15=0 PC.10=0' C; ( 84)
CODE a16=0 PF.8=0' C; ( 149) CODE b16=0  PE.5=0'  C; ( 167) CODE c16=0 PD.3=0'  C; ( 28) CODE d16=0 PI.4=0'  C; ( 51) CODE e16=0 PG.6=0'  C; ( 66) CODE f16=0 PC.11=0' C; ( 85)

CODE  a1=1 PE.2=1' C; ( 164) CODE  b1=1  PE.12=1' C; (   1) CODE  c1=1 PF.15=1' C; ( 13) CODE  d1=1 PD.4=1'  C; ( 29) CODE  e1=1 PG.12=1' C; ( 38) CODE  f1=1 PA.8=1'  C; ( 70)
CODE  a2=1 PC.1=1' C; ( 133) CODE  b2=1  PH.2=1'  C; ( 150) CODE  c2=1 PG.0=1'  C; ( 14) CODE  d2=1 PD.5=1'  C; ( 30) CODE  e2=1 PI.5=1'  C; ( 52) CODE  f2=1 PA.9=1'  C; ( 71)
CODE  a3=1 PC.2=1' C; ( 134) CODE  b3=1  PH.3=1'  C; ( 151) CODE  c3=1 PG.1=1'  C; ( 15) CODE  d3=1 PD.6=1'  C; ( 31) CODE  e3=1 PI.6=1'  C; ( 53) CODE  f3=1 PA.10=1' C; ( 72)
CODE  a4=1 PC.3=1' C; ( 135) CODE  b4=1  PH.4=1'  C; ( 152) CODE  c4=1 PG.2=1'  C; ( 16) CODE  d4=1 PD.7=1'  C; ( 32) CODE  e4=1 PD.8=1'  C; ( 54) CODE  f4=1 PA.11=1' C; ( 73)
CODE  a5=1 PC.4=1' C; ( 136) CODE  b5=1  PH.5=1'  C; ( 153) CODE  c5=1 PC.12=1' C; ( 17) CODE  d5=1 PH.15=1' C; ( 33) CODE  e5=1 PD.9=1'  C; ( 55) CODE  f5=1 PA.12=1' C; ( 74)
CODE  a6=1 PC.5=1' C; ( 137) CODE  b6=1  PH.6=1'  C; ( 154) CODE  c6=1 PC.13=1' C; ( 18) CODE  d6=1 PI.0=1'  C; ( 34) CODE  e6=1 PA.2=1'  C; ( 56) CODE  f6=1 PA.13=1' C; ( 75)
CODE  a7=1 PC.6=1' C; ( 138) CODE  b7=1  PH.7=1'  C; ( 155) CODE  c7=1 PC.14=1' C; ( 19) CODE  d7=1 PI.1=1'  C; ( 35) CODE  e7=1 PA.3=1'  C; ( 57) CODE  f7=1 PA.14=1' C; ( 76)
CODE  a8=1 PC.7=1' C; ( 139) CODE  b8=1  PH.8=1'  C; ( 156) CODE  c8=1 PC.15=1' C; ( 20) CODE  d8=1 PI.2=1'  C; ( 36) CODE  e8=1 PA.4=1'  C; ( 58) CODE  f8=1 PI.9=1'  C; ( 77)
CODE  a9=1 PC.8=1' C; ( 140) CODE  b9=1  PH.9=1'  C; ( 157) CODE  c9=1 PD.0=1'  C; ( 21) CODE  d9=1 PG.13=1' C; ( 37) CODE  e9=1 PA.5=1'  C; ( 59) CODE  f9=1 PI.10=1' C; ( 78)
CODE a10=1 PF.2=1' C; ( 141) CODE b10=1  PH.10=1' C; ( 158) CODE c10=1 PD.1=1'  C; ( 22) CODE d10=1 PG.12=1' C; ( 38) CODE e10=1 PA.6=1'  C; ( 60) CODE f10=1 PD.10=1' C; ( 79)
CODE a11=1 PF.3=1' C; ( 142) CODE b11=1  PE.8=1'  C; ( 173) CODE c11=1 PD.2=1'  C; ( 23) CODE d11=1 PG.15=1' C; ( 45) CODE e11=1 PI.7=1'  C; ( 61) CODE f11=1 PD.11=1' C; ( 80)
CODE a12=1 PF.4=1' C; ( 143) CODE b12=1  PE.9=1'  C; ( 174) CODE c12=1 PH.11=1' C; ( 24) CODE d12=1 PG.14=1' C; ( 46) CODE e12=1 PI.8=1'  C; ( 62) CODE f12=1 PD.12=1' C; ( 81)
CODE a13=1 PF.5=1' C; ( 144) CODE b13=1  PE.10=1' C; ( 175) CODE c13=1 PH.12=1' C; ( 25) CODE d13=1 PA.0=1'  C; ( 48) CODE e13=1 PG.3=1'  C; ( 63) CODE f13=1 PA.15=1' C; ( 82)
CODE a14=1 PF.6=1' C; ( 147) CODE b14=1  PE.11=1' C; ( 176) CODE c14=1 PH.13=1' C; ( 26) CODE d14=1 PA.1=1'  C; ( 49) CODE e14=1 PG.4=1'  C; ( 64) CODE f14=1 PC.9=1'  C; ( 83)
CODE a15=1 PF.7=1' C; ( 148) CODE b15=1  PE.4=1'  C; ( 166) CODE c15=1 PH.14=1' C; ( 27) CODE d15=1 PI.3=1'  C; ( 50) CODE e15=1 PG.5=1'  C; ( 65) CODE f15=1 PC.10=1' C; ( 84)
CODE a16=1 PF.8=1' C; ( 149) CODE b16=1  PE.5=1'  C; ( 167) CODE c16=1 PD.3=1'  C; ( 28) CODE d16=1 PI.4=1'  C; ( 51) CODE e16=1 PG.6=1'  C; ( 66) CODE f16=1 PC.11=1' C; ( 85)
\ -----------------------------------------------------------------------------------------------------------------------------------------------------------------------
: WA     A1=0 A1=1 A2=0  A2=1  A3=0  A3=1  A4=0  A4=1  A5=0  A5=1  A6=0  A6=1  A7=0  A7=1  A8=0  A8=1
         A9=0 A9=1 A10=0 A10=1 A11=0 A11=1 A12=0 A12=1 A13=0 A13=1 A14=0 A14=1 A15=0 A15=1 A16=0 A16=1  ;

: WB     B1=0 B1=1 B2=0  B2=1  B3=0  B3=1  B4=0  B4=1  B5=0  B5=1  B6=0  B6=1  B7=0  B7=1  B8=0  B8=1
         B9=0 B9=1 B10=0 B10=1 B11=0 B11=1 B12=0 B12=1 B13=0 B13=1 B14=0 B14=1 B15=0 B15=1 B16=0 B16=1  ;

: WC     C1=0 C1=1 C2=0  C2=1  C3=0  C3=1  C4=0  C4=1  C5=0  C5=1  C6=0  C6=1  C7=0  C7=1  C8=0  C8=1
         C9=0 C9=1 C10=0 C10=1 C11=0 C11=1 C12=0 C12=1 C13=0 C13=1 C14=0 C14=1 C15=0 C15=1 C16=0 C16=1  ;

: WD     D1=0 D1=1 D2=0  D2=1  D3=0  D3=1  D4=0  D4=1  D5=0  D5=1  D6=0  D6=1  D7=0  D7=1  D8=0  D8=1
         D9=0 D9=1 D10=0 D10=1 D11=0 D11=1 D12=0 D12=1 D13=0 D13=1 D14=0 D14=1 D15=0 D15=1 D16=0 D16=1  ;

: WE     E1=0 E1=1 E2=0  E2=1  E3=0  E3=1  E4=0  E4=1  E5=0  E5=1  E6=0  E6=1  E7=0  E7=1  E8=0  E8=1
         E9=0 E9=1 E10=0 E10=1 E11=0 E11=1 E12=0 E12=1 E13=0 E13=1 E14=0 E14=1 E15=0 E15=1 E16=0 E16=1  ;

: WF     F1=0 F1=1 F2=0  F2=1  F3=0  F3=1  F4=0  F4=1  F5=0  F5=1  F6=0  F6=1  F7=0  F7=1  F8=0  F8=1
         F9=0 F9=1 F10=0 F10=1 F11=0 F11=1 F12=0 F12=1 F13=0 F13=1 F14=0 F14=1 F15=0 F15=1 F16=0 F16=1  ;

: WA~F   PM  BEGIN  WA  WB  WC  WD  WE  WF  ?KEY  UNTIL  ;
\ -----------------------------------------------------------------------------------------------------------------------------------------------------------------------
:.  QA1' PE.2' ;. ( 164) :.  QB1' PE.12' ;. (   1) :.  QC1' PF.15' ;. ( 13) :.  QD1' PD.4'  ;. ( 29) :.  QE1' PG.12' ;. ( 38) :.  QF1' PA.8'  ;. ( 70)
:.  QA2' PC.1' ;. ( 133) :.  QB2' PH.2'  ;. ( 150) :.  QC2' PG.0'  ;. ( 14) :.  QD2' PD.5'  ;. ( 30) :.  QE2' PI.5'  ;. ( 52) :.  QF2' PA.9'  ;. ( 71)
:.  QA3' PC.2' ;. ( 134) :.  QB3' PH.3'  ;. ( 151) :.  QC3' PG.1'  ;. ( 15) :.  QD3' PD.6'  ;. ( 31) :.  QE3' PI.6'  ;. ( 53) :.  QF3' PA.10' ;. ( 72)
:.  QA4' PC.3' ;. ( 135) :.  QB4' PH.4'  ;. ( 152) :.  QC4' PG.2'  ;. ( 16) :.  QD4' PD.7'  ;. ( 32) :.  QE4' PD.8'  ;. ( 54) :.  QF4' PA.11' ;. ( 73)
:.  QA5' PC.4' ;. ( 136) :.  QB5' PH.5'  ;. ( 153) :.  QC5' PC.12' ;. ( 17) :.  QD5' PH.15' ;. ( 33) :.  QE5' PD.9'  ;. ( 55) :.  QF5' PA.12' ;. ( 74)
:.  QA6' PC.5' ;. ( 137) :.  QB6' PH.6'  ;. ( 154) :.  QC6' PC.13' ;. ( 18) :.  QD6' PI.0'  ;. ( 34) :.  QE6' PA.2'  ;. ( 56) :.  QF6' PA.13' ;. ( 75)
:.  QA7' PC.6' ;. ( 138) :.  QB7' PH.7'  ;. ( 155) :.  QC7' PC.14' ;. ( 19) :.  QD7' PI.1'  ;. ( 35) :.  QE7' PA.3'  ;. ( 57) :.  QF7' PA.14' ;. ( 76)
:.  QA8' PC.7' ;. ( 139) :.  QB8' PH.8'  ;. ( 156) :.  QC8' PC.15' ;. ( 20) :.  QD8' PI.2'  ;. ( 36) :.  QE8' PA.4'  ;. ( 58) :.  QF8' PI.9'  ;. ( 77)
:.  QA9' PC.8' ;. ( 140) :.  QB9' PH.9'  ;. ( 157) :.  QC9' PD.0'  ;. ( 21) :.  QD9' PG.13' ;. ( 37) :.  QE9' PA.5'  ;. ( 59) :.  QF9' PI.10' ;. ( 78)
:. QA10' PF.2' ;. ( 141) :. QB10' PH.10' ;. ( 158) :. QC10' PD.1'  ;. ( 22) :. QD10' PG.12' ;. ( 38) :. QE10' PA.6'  ;. ( 60) :. QF10' PD.10' ;. ( 79)
:. QA11' PF.3' ;. ( 142) :. QB11' PE.8'  ;. ( 173) :. QC11' PD.2'  ;. ( 23) :. QD11' PG.15' ;. ( 45) :. QE11' PI.7'  ;. ( 61) :. QF11' PD.11' ;. ( 80)
:. QA12' PF.4' ;. ( 143) :. QB12' PE.9'  ;. ( 174) :. QC12' PH.11' ;. ( 24) :. QD12' PG.14' ;. ( 46) :. QE12' PI.8'  ;. ( 62) :. QF12' PD.12' ;. ( 81)
:. QA13' PF.5' ;. ( 144) :. QB13' PE.10' ;. ( 175) :. QC13' PH.12' ;. ( 25) :. QD13' PA.0'  ;. ( 48) :. QE13' PG.3'  ;. ( 63) :. QF13' PA.15' ;. ( 82)
:. QA14' PF.6' ;. ( 147) :. QB14' PE.11' ;. ( 176) :. QC14' PH.13' ;. ( 26) :. QD14' PA.1'  ;. ( 49) :. QE14' PG.4'  ;. ( 64) :. QF14' PC.9'  ;. ( 83)
:. QA15' PF.7' ;. ( 148) :. QB15' PE.4'  ;. ( 166) :. QC15' PH.14' ;. ( 27) :. QD15' PI.3'  ;. ( 50) :. QE15' PG.5'  ;. ( 65) :. QF15' PC.10' ;. ( 84)
:. QA16' PF.8' ;. ( 149) :. QB16' PE.5'  ;. ( 167) :. QC16' PD.3'  ;. ( 28) :. QD16' PI.4'  ;. ( 51) :. QE16' PG.6'  ;. ( 66) :. QF16' PC.11' ;. ( 85)
\ -----------------------------------------------------------------------------------------------------------------------------------------------------------------------
:.  A1' PE.2' ;. ( 164) :.  B1' PE.12' ;. (   1) :.  C1' PF.15' ;. ( 13) :.  D1' PD.4'  ;. ( 29) :.  E1' PG.12' ;. ( 38) :.  F1' PA.8'  ;. ( 70)
:.  A2' PC.1' ;. ( 133) :.  B2' PH.2'  ;. ( 150) :.  C2' PG.0'  ;. ( 14) :.  D2' PD.5'  ;. ( 30) :.  E2' PI.5'  ;. ( 52) :.  F2' PA.9'  ;. ( 71)
:.  A3' PC.2' ;. ( 134) :.  B3' PH.3'  ;. ( 151) :.  C3' PG.1'  ;. ( 15) :.  D3' PD.6'  ;. ( 31) :.  E3' PI.6'  ;. ( 53) :.  F3' PA.10' ;. ( 72)
:.  A4' PC.3' ;. ( 135) :.  B4' PH.4'  ;. ( 152) :.  C4' PG.2'  ;. ( 16) :.  D4' PD.7'  ;. ( 32) :.  E4' PD.8'  ;. ( 54) :.  F4' PA.11' ;. ( 73)
:.  A5' PC.4' ;. ( 136) :.  B5' PH.5'  ;. ( 153) :.  C5' PC.12' ;. ( 17) :.  D5' PH.15' ;. ( 33) :.  E5' PD.9'  ;. ( 55) :.  F5' PA.12' ;. ( 74)
:.  A6' PC.5' ;. ( 137) :.  B6' PH.6'  ;. ( 154) :.  C6' PC.13' ;. ( 18) :.  D6' PI.0'  ;. ( 34) :.  E6' PA.2'  ;. ( 56) :.  F6' PA.13' ;. ( 75)
:.  A7' PC.6' ;. ( 138) :.  B7' PH.7'  ;. ( 155) :.  C7' PC.14' ;. ( 19) :.  D7' PI.1'  ;. ( 35) :.  E7' PA.3'  ;. ( 57) :.  F7' PA.14' ;. ( 76)
:.  A8' PC.7' ;. ( 139) :.  B8' PH.8'  ;. ( 156) :.  C8' PC.15' ;. ( 20) :.  D8' PI.2'  ;. ( 36) :.  E8' PA.4'  ;. ( 58) :.  F8' PI.9'  ;. ( 77)
:.  A9' PC.8' ;. ( 140) :.  B9' PH.9'  ;. ( 157) :.  C9' PD.0'  ;. ( 21) :.  D9' PG.13' ;. ( 37) :.  E9' PA.5'  ;. ( 59) :.  F9' PI.10' ;. ( 78)
:. A10' PF.2' ;. ( 141) :. B10' PH.10' ;. ( 158) :. C10' PD.1'  ;. ( 22) :. D10' PG.12' ;. ( 38) :. E10' PA.6'  ;. ( 60) :. F10' PD.10' ;. ( 79)
:. A11' PF.3' ;. ( 142) :. B11' PE.8'  ;. ( 173) :. C11' PD.2'  ;. ( 23) :. D11' PG.15' ;. ( 45) :. E11' PI.7'  ;. ( 61) :. F11' PD.11' ;. ( 80)
:. A12' PF.4' ;. ( 143) :. B12' PE.9'  ;. ( 174) :. C12' PH.11' ;. ( 24) :. D12' PG.14' ;. ( 46) :. E12' PI.8'  ;. ( 62) :. F12' PD.12' ;. ( 81)
:. A13' PF.5' ;. ( 144) :. B13' PE.10' ;. ( 175) :. C13' PH.12' ;. ( 25) :. D13' PA.0'  ;. ( 48) :. E13' PG.3'  ;. ( 63) :. F13' PA.15' ;. ( 82)
:. A14' PF.6' ;. ( 147) :. B14' PE.11' ;. ( 176) :. C14' PH.13' ;. ( 26) :. D14' PA.1'  ;. ( 49) :. E14' PG.4'  ;. ( 64) :. F14' PC.9'  ;. ( 83)
:. A15' PF.7' ;. ( 148) :. B15' PE.4'  ;. ( 166) :. C15' PH.14' ;. ( 27) :. D15' PI.3'  ;. ( 50) :. E15' PG.5'  ;. ( 65) :. F15' PC.10' ;. ( 84)
:. A16' PF.8' ;. ( 149) :. B16' PE.5'  ;. ( 167) :. C16' PD.3'  ;. ( 28) :. D16' PI.4'  ;. ( 51) :. E16' PG.6'  ;. ( 66) :. F16' PC.11' ;. ( 85)








\ ---------------------------------------------------------------------------------------------------------------------------------------------------------
:.  a1=0' PE.2=0' ;. ( 164   1 ) :.  b1=0'  PE.12=0' ;. :.  c1=0' PF.15=0' ;. ( 13 ) :.  d1=0' PD.4=0'  ;. ( 29 ) :.  e1=0' PG.12=0' ;. ( 38 ) :.  f1=0' PA.8=0'  ;. ( 70 )
:.  a2=0' PC.1=0' ;. ( 133 150 ) :.  b2=0'  PH.2=0'  ;. :.  c2=0' PG.0=0'  ;. ( 14 ) :.  d2=0' PD.5=0'  ;. ( 30 ) :.  e2=0' PI.5=0'  ;. ( 52 ) :.  f2=0' PA.9=0'  ;. ( 71 )
:.  a3=0' PC.2=0' ;. ( 134 151 ) :.  b3=0'  PH.3=0'  ;. :.  c3=0' PG.1=0'  ;. ( 15 ) :.  d3=0' PD.6=0'  ;. ( 31 ) :.  e3=0' PI.6=0'  ;. ( 53 ) :.  f3=0' PA.10=0' ;. ( 72 )
:.  a4=0' PC.3=0' ;. ( 135 152 ) :.  b4=0'  PH.4=0'  ;. :.  c4=0' PG.2=0'  ;. ( 16 ) :.  d4=0' PD.7=0'  ;. ( 32 ) :.  e4=0' PD.8=0'  ;. ( 54 ) :.  f4=0' PA.11=0' ;. ( 73 )
:.  a5=0' PC.4=0' ;. ( 136 153 ) :.  b5=0'  PH.5=0'  ;. :.  c5=0' PC.12=0' ;. ( 17 ) :.  d5=0' PH.15=0' ;. ( 33 ) :.  e5=0' PD.9=0'  ;. ( 55 ) :.  f5=0' PA.12=0' ;. ( 74 )
:.  a6=0' PC.5=0' ;. ( 137 154 ) :.  b6=0'  PH.6=0'  ;. :.  c6=0' PC.13=0' ;. ( 18 ) :.  d6=0' PI.0=0'  ;. ( 34 ) :.  e6=0' PA.2=0'  ;. ( 56 ) :.  f6=0' PA.13=0' ;. ( 75 )
:.  a7=0' PC.6=0' ;. ( 138 155 ) :.  b7=0'  PH.7=0'  ;. :.  c7=0' PC.14=0' ;. ( 19 ) :.  d7=0' PI.1=0'  ;. ( 35 ) :.  e7=0' PA.3=0'  ;. ( 57 ) :.  f7=0' PA.14=0' ;. ( 76 )
:.  a8=0' PC.7=0' ;. ( 139 156 ) :.  b8=0'  PH.8=0'  ;. :.  c8=0' PC.15=0' ;. ( 20 ) :.  d8=0' PI.2=0'  ;. ( 36 ) :.  e8=0' PA.4=0'  ;. ( 58 ) :.  f8=0' PI.9=0'  ;. ( 77 )
:.  a9=0' PC.8=0' ;. ( 140 157 ) :.  b9=0'  PH.9=0'  ;. :.  c9=0' PD.0=0'  ;. ( 21 ) :.  d9=0' PG.13=0' ;. ( 37 ) :.  e9=0' PA.5=0'  ;. ( 59 ) :.  f9=0' PI.10=0' ;. ( 78 )
:. a10=0' PF.2=0' ;. ( 141 158 ) :. b10=0'  PH.10=0' ;. :. c10=0' PD.1=0'  ;. ( 22 ) :. d10=0' PG.12=0' ;. ( 38 ) :. e10=0' PA.6=0'  ;. ( 60 ) :. f10=0' PD.10=0' ;. ( 79 )
:. a11=0' PF.3=0' ;. ( 142 173 ) :. b11=0'  PE.8=0'  ;. :. c11=0' PD.2=0'  ;. ( 23 ) :. d11=0' PG.15=0' ;. ( 45 ) :. e11=0' PI.7=0'  ;. ( 61 ) :. f11=0' PD.11=0' ;. ( 80 )
:. a12=0' PF.4=0' ;. ( 143 174 ) :. b12=0'  PE.9=0'  ;. :. c12=0' PH.11=0' ;. ( 24 ) :. d12=0' PG.14=0' ;. ( 46 ) :. e12=0' PI.8=0'  ;. ( 62 ) :. f12=0' PD.12=0' ;. ( 81 )
:. a13=0' PF.5=0' ;. ( 144 175 ) :. b13=0'  PE.10=0' ;. :. c13=0' PH.12=0' ;. ( 25 ) :. d13=0' PA.0=0'  ;. ( 48 ) :. e13=0' PG.3=0'  ;. ( 63 ) :. f13=0' PA.15=0' ;. ( 82 )
:. a14=0' PF.6=0' ;. ( 147 176 ) :. b14=0'  PE.11=0' ;. :. c14=0' PH.13=0' ;. ( 26 ) :. d14=0' PA.1=0'  ;. ( 49 ) :. e14=0' PG.4=0'  ;. ( 64 ) :. f14=0' PC.9=0'  ;. ( 83 )
:. a15=0' PF.7=0' ;. ( 148 166 ) :. b15=0'  PE.4=0'  ;. :. c15=0' PH.14=0' ;. ( 27 ) :. d15=0' PI.3=0'  ;. ( 50 ) :. e15=0' PG.5=0'  ;. ( 65 ) :. f15=0' PC.10=0' ;. ( 84 )
:. a16=0' PF.8=0' ;. ( 149 167 ) :. b16=0'  PE.5=0'  ;. :. c16=0' PD.3=0'  ;. ( 28 ) :. d16=0' PI.4=0'  ;. ( 51 ) :. e16=0' PG.6=0'  ;. ( 66 ) :. f16=0' PC.11=0' ;. ( 85 )

:.  a1=1' PE.2=1' ;. ( 164   1 ) :.  b1=1'  PE.12=1' ;. :.  c1=1' PF.15=1' ;. ( 13 ) :.  d1=1' PD.4=1'  ;. ( 29 ) :.  e1=1' PG.12=1' ;. ( 38 ) :.  f1=1' PA.8=1'  ;. ( 70 )
:.  a2=1' PC.1=1' ;. ( 133 150 ) :.  b2=1'  PH.2=1'  ;. :.  c2=1' PG.0=1'  ;. ( 14 ) :.  d2=1' PD.5=1'  ;. ( 30 ) :.  e2=1' PI.5=1'  ;. ( 52 ) :.  f2=1' PA.9=1'  ;. ( 71 )
:.  a3=1' PC.2=1' ;. ( 134 151 ) :.  b3=1'  PH.3=1'  ;. :.  c3=1' PG.1=1'  ;. ( 15 ) :.  d3=1' PD.6=1'  ;. ( 31 ) :.  e3=1' PI.6=1'  ;. ( 53 ) :.  f3=1' PA.10=1' ;. ( 72 )
:.  a4=1' PC.3=1' ;. ( 135 152 ) :.  b4=1'  PH.4=1'  ;. :.  c4=1' PG.2=1'  ;. ( 16 ) :.  d4=1' PD.7=1'  ;. ( 32 ) :.  e4=1' PD.8=1'  ;. ( 54 ) :.  f4=1' PA.11=1' ;. ( 73 )
:.  a5=1' PC.4=1' ;. ( 136 153 ) :.  b5=1'  PH.5=1'  ;. :.  c5=1' PC.12=1' ;. ( 17 ) :.  d5=1' PH.15=1' ;. ( 33 ) :.  e5=1' PD.9=1'  ;. ( 55 ) :.  f5=1' PA.12=1' ;. ( 74 )
:.  a6=1' PC.5=1' ;. ( 137 154 ) :.  b6=1'  PH.6=1'  ;. :.  c6=1' PC.13=1' ;. ( 18 ) :.  d6=1' PI.0=1'  ;. ( 34 ) :.  e6=1' PA.2=1'  ;. ( 56 ) :.  f6=1' PA.13=1' ;. ( 75 )
:.  a7=1' PC.6=1' ;. ( 138 155 ) :.  b7=1'  PH.7=1'  ;. :.  c7=1' PC.14=1' ;. ( 19 ) :.  d7=1' PI.1=1'  ;. ( 35 ) :.  e7=1' PA.3=1'  ;. ( 57 ) :.  f7=1' PA.14=1' ;. ( 76 )
:.  a8=1' PC.7=1' ;. ( 139 156 ) :.  b8=1'  PH.8=1'  ;. :.  c8=1' PC.15=1' ;. ( 20 ) :.  d8=1' PI.2=1'  ;. ( 36 ) :.  e8=1' PA.4=1'  ;. ( 58 ) :.  f8=1' PI.9=1'  ;. ( 77 )
:.  a9=1' PC.8=1' ;. ( 140 157 ) :.  b9=1'  PH.9=1'  ;. :.  c9=1' PD.0=1'  ;. ( 21 ) :.  d9=1' PG.13=1' ;. ( 37 ) :.  e9=1' PA.5=1'  ;. ( 59 ) :.  f9=1' PI.10=1' ;. ( 78 )
:. a10=1' PF.2=1' ;. ( 141 158 ) :. b10=1'  PH.10=1' ;. :. c10=1' PD.1=1'  ;. ( 22 ) :. d10=1' PG.12=1' ;. ( 38 ) :. e10=1' PA.6=1'  ;. ( 60 ) :. f10=1' PD.10=1' ;. ( 79 )
:. a11=1' PF.3=1' ;. ( 142 173 ) :. b11=1'  PE.8=1'  ;. :. c11=1' PD.2=1'  ;. ( 23 ) :. d11=1' PG.15=1' ;. ( 45 ) :. e11=1' PI.7=1'  ;. ( 61 ) :. f11=1' PD.11=1' ;. ( 80 )
:. a12=1' PF.4=1' ;. ( 143 174 ) :. b12=1'  PE.9=1'  ;. :. c12=1' PH.11=1' ;. ( 24 ) :. d12=1' PG.14=1' ;. ( 46 ) :. e12=1' PI.8=1'  ;. ( 62 ) :. f12=1' PD.12=1' ;. ( 81 )
:. a13=1' PF.5=1' ;. ( 144 175 ) :. b13=1'  PE.10=1' ;. :. c13=1' PH.12=1' ;. ( 25 ) :. d13=1' PA.0=1'  ;. ( 48 ) :. e13=1' PG.3=1'  ;. ( 63 ) :. f13=1' PA.15=1' ;. ( 82 )
:. a14=1' PF.6=1' ;. ( 147 176 ) :. b14=1'  PE.11=1' ;. :. c14=1' PH.13=1' ;. ( 26 ) :. d14=1' PA.1=1'  ;. ( 49 ) :. e14=1' PG.4=1'  ;. ( 64 ) :. f14=1' PC.9=1'  ;. ( 83 )
:. a15=1' PF.7=1' ;. ( 148 166 ) :. b15=1'  PE.4=1'  ;. :. c15=1' PH.14=1' ;. ( 27 ) :. d15=1' PI.3=1'  ;. ( 50 ) :. e15=1' PG.5=1'  ;. ( 65 ) :. f15=1' PC.10=1' ;. ( 84 )
:. a16=1' PF.8=1' ;. ( 149 167 ) :. b16=1'  PE.5=1'  ;. :. c16=1' PD.3=1'  ;. ( 28 ) :. d16=1' PI.4=1'  ;. ( 51 ) :. e16=1' PG.6=1'  ;. ( 66 ) :. f16=1' PC.11=1' ;. ( 85 )
\ ---------------------------------------------------------------------------------------------------------------------------------------------------------
\ : P  ( BITn -- )  PD  SWAP  OUTPUT  MODE  ;
\ : Q  ( BITn -- )  PD  SWAP   INPUT  MODE  ;

:. AX=0'  A1=0' A2=0' A3=0' A4=0' A5=0' A6=0' A7=0' A8=0' A9=0' A10=0' A11=0' A12=0' A13=0' A14=0' A15=0' A16=0' ;.
:. BX=0'  B1=0' B2=0' B3=0' B4=0' B5=0' B6=0' B7=0' B8=0' B9=0' B10=0' B11=0' B12=0' B13=0' B14=0' B15=0' B16=0' ;.
:. CX=0'  C1=0' C2=0' C3=0' C4=0' C5=0' C6=0' C7=0' C8=0' C9=0' C10=0' C11=0' C12=0' C13=0' C14=0' C15=0' C16=0' ;.
:. DX=0'  D1=0' D2=0' D3=0' D4=0' D5=0' D6=0' D7=0' D8=0' D9=0' D10=0' D11=0' D12=0' D13=0' D14=0' D15=0' D16=0' ;.
:. EX=0'  E1=0' E2=0' E3=0' E4=0' E5=0' E6=0' E7=0' E8=0' E9=0' E10=0' E11=0' E12=0' E13=0' E14=0' E15=0' E16=0' ;.
:. FX=0'  F1=0' F2=0' F3=0' F4=0' F5=0' F6=0' F7=0' F8=0' F9=0' F10=0' F11=0' F12=0' F13=0' F14=0' F15=0' F16=0' ;.

:. AX=1'  A1=1' A2=1' A3=1' A4=1' A5=1' A6=1' A7=1' A8=1' A9=1' A10=1' A11=1' A12=1' A13=1' A14=1' A15=1' A16=1' ;.
:. BX=1'  B1=1' B2=1' B3=1' B4=1' B5=1' B6=1' B7=1' B8=1' B9=1' B10=1' B11=1' B12=1' B13=1' B14=1' B15=1' B16=1' ;.
:. CX=1'  C1=1' C2=1' C3=1' C4=1' C5=1' C6=1' C7=1' C8=1' C9=1' C10=1' C11=1' C12=1' C13=1' C14=1' C15=1' C16=1' ;.
:. DX=1'  D1=1' D2=1' D3=1' D4=1' D5=1' D6=1' D7=1' D8=1' D9=1' D10=1' D11=1' D12=1' D13=1' D14=1' D15=1' D16=1' ;.
:. EX=1'  E1=1' E2=1' E3=1' E4=1' E5=1' E6=1' E7=1' E8=1' E9=1' E10=1' E11=1' E12=1' E13=1' E14=1' E15=1' E16=1' ;.
:. FX=1'  F1=1' F2=1' F3=1' F4=1' F5=1' F6=1' F7=1' F8=1' F9=1' F10=1' F11=1' F12=1' F13=1' F14=1' F15=1' F16=1' ;.
\ ---------------------------------------------------------------------------------------------------------------------------------------------------------
CODE AX=0  A1=0' A2=0' A3=0' A4=0' A5=0' A6=0' A7=0' A8=0' A9=0' A10=0' A11=0' A12=0' A13=0' A14=0' A15=0' A16=0' C;
CODE BX=0  B1=0' B2=0' B3=0' B4=0' B5=0' B6=0' B7=0' B8=0' B9=0' B10=0' B11=0' B12=0' B13=0' B14=0' B15=0' B16=0' C;
CODE CX=0  C1=0' C2=0' C3=0' C4=0' C5=0' C6=0' C7=0' C8=0' C9=0' C10=0' C11=0' C12=0' C13=0' C14=0' C15=0' C16=0' C;
CODE DX=0  D1=0' D2=0' D3=0' D4=0' D5=0' D6=0' D7=0' D8=0' D9=0' D10=0' D11=0' D12=0' D13=0' D14=0' D15=0' D16=0' C;
CODE EX=0  E1=0' E2=0' E3=0' E4=0' E5=0' E6=0' E7=0' E8=0' E9=0' E10=0' E11=0' E12=0' E13=0' E14=0' E15=0' E16=0' C;
CODE FX=0  F1=0' F2=0' F3=0' F4=0' F5=0' F6=0' F7=0' F8=0' F9=0' F10=0' F11=0' F12=0' F13=0' F14=0' F15=0' F16=0' C;

CODE AX=1  A1=1' A2=1' A3=1' A4=1' A5=1' A6=1' A7=1' A8=1' A9=1' A10=1' A11=1' A12=1' A13=1' A14=1' A15=1' A16=1' C;
CODE BX=1  B1=1' B2=1' B3=1' B4=1' B5=1' B6=1' B7=1' B8=1' B9=1' B10=1' B11=1' B12=1' B13=1' B14=1' B15=1' B16=1' C;
CODE CX=1  C1=1' C2=1' C3=1' C4=1' C5=1' C6=1' C7=1' C8=1' C9=1' C10=1' C11=1' C12=1' C13=1' C14=1' C15=1' C16=1' C;
CODE DX=1  D1=1' D2=1' D3=1' D4=1' D5=1' D6=1' D7=1' D8=1' D9=1' D10=1' D11=1' D12=1' D13=1' D14=1' D15=1' D16=1' C;
CODE EX=1  E1=1' E2=1' E3=1' E4=1' E5=1' E6=1' E7=1' E8=1' E9=1' E10=1' E11=1' E12=1' E13=1' E14=1' E15=1' E16=1' C;
CODE FX=1  F1=1' F2=1' F3=1' F4=1' F5=1' F6=1' F7=1' F8=1' F9=1' F10=1' F11=1' F12=1' F13=1' F14=1' F15=1' F16=1' C;
\ ---------------------------------------------------------------------------------------------------------------------------------------------------------







  \ -------------------------------------------------------------------------------
                                    CODE  AX=0/1**   R0=40004880    R2=R0+C0                      \ cfa= 20004ED8
  (  20004ED8  C0 F8 88 10       )                  (R0+88)=R1
  (  20004EDC  41 60             )                  (R0+4)=R1
  (  20004EDE  81 60             )                  (R0+8)=R1
  (  20004EE0  C1 60             )                  (R0+0C)=R1
  (  20004EE2  01 61             )                  (R0+10)=R1
  (  20004EE4  41 61             )                  (R0+14)=R1
  (  20004EE6  81 61             )                  (R0+18)=R1
  (  20004EE8  C1 61             )                  (R0+1C)=R1
  (  20004EEA  01 62             )                  (R0+20)=R1
  (  20004EEC  C0 F8 C8 10       )                  (R2+08)=R1
  (  20004EF0  C0 F8 CC 10       )                  (R2+0C)=R1
  (  20004EF4  C0 F8 D0 10       )                  (R2+10)=R1
  (  20004EF8  C0 F8 D4 10       )                  (R2+14)=R1
  (  20004EFC  C0 F8 D8 10       )                  (R2+18)=R1
  (  20004F00  C0 F8 DC 10       )                  (R2+1C)=R1
  (  20004F04  C0 F8 E0 10       )                  (R0+20)=R1
  (  20004F08  70 47             )                  C;

                                    CODE  AX=0**      R1=0  '' AX=0/1**  jmp_#
                                    CODE  AX=1**      R1=1  '' AX=0/1**  jmp_#

:  TAX**    BEGIN    AX=0**    AX=1**   ?KEY   UNTIL  ;
















  \ -------------------------------------------------------------------------------
                                    CODE  BX=0/1*             R0=40004900                             \ cfa= 2000675C
  (  2000675C  18 48             )                  0  40004930  40004900 -. 1 \ PE.12                \ (200067C0)=40004930
  (  2000675E  00 21             )                 
  (  20006760  01 60             )                  (r+#)=r
  (  20006762  18 48             )                  0  400049C8  40004900 -. 1 \ PH.2                 \ (200067C4)=400049C8
  (  20006764  00 21             )
  (  20006766  01 60             )                  (r+#)=r
  (  20006768  17 48             )                  0  400049CC  40004900 -. 1 \ PH.3                 \ (200067C8)=400049CC
  (  2000676A  00 21             )
  (  2000676C  01 60             )                  (r+#)=r
  (  2000676E  17 48             )                  0  400049D0  40004900 -. 1 \ PH.4                 \ (200067CC)=400049D0
  (  20006770  00 21             )
  (  20006772  01 60             )                  (r+#)=r
  (  20006774  16 48             )                  0  400049D4  40004900 -. 1 \ PH.5                 \ (200067D0)=400049D4
  (  20006776  00 21             )
  (  20006778  01 60             )                  (r+#)=r
  (  2000677A  16 48             )                  0  400049D8  40004900 -. 1 \ PH.6                 \ (200067D4)=400049D8
  (  2000677C  00 21             )
  (  2000677E  01 60             )                  (r+#)=r
  (  20006780  15 48             )                  0  400049DC  40004900 -. 1 \ PH.7                 \ (200067D8)=400049DC
  (  20006782  00 21             )
  (  20006784  01 60             )                  (r+#)=r
  (  20006786  15 48             )                  0  400049E0  40004900 -. 1 \ PH.8                 \ (200067DC)=400049E0
  (  20006788  00 21             )
  (  2000678A  01 60             )                  (r+#)=r
  (  2000678C  14 48             )                  0  400049E4  40004900 -. 1 \ PH.9                 \ (200067E0)=400049E4
  (  2000678E  00 21             )
  (  20006790  01 60             )                  (r+#)=r
  (  20006792  14 48             )                  0  400049E8  40004900 -. 1 \ PH.10                \ (200067E4)=400049E8
  (  20006794  00 21             )
  (  20006796  01 60             )                  (r+#)=r
  (  20006798  13 48             )                  0  40004930  40004900 -. 1 \ PE.8                 \ (200067E8)=40004930
  (  2000679A  00 21             )
  (  2000679C  01 60             )                  (r+#)=r
  (  2000679E  13 48             )                  0  40004924  40004900 -. 1 \ PE.9                 \ (200067EC)=40004924
  (  200067A0  00 21             )
  (  200067A2  01 60             )                  (r+#)=r
  (  200067A4  12 48             )                  0  40004928  40004900 -. 1 \ PE.10                \ (200067F0)=40004928
  (  200067A6  00 21             )
  (  200067A8  01 60             )                  (r+#)=r
  (  200067AA  12 48             )                  0  4000492C  40004900 -. 1 \ PE.11                \ (200067F4)=4000492C
  (  200067AC  00 21             )
  (  200067AE  01 60             )                  (r+#)=r
  (  200067B0  11 48             )                  0  40004930  40004900 -. 1 \ PE.4                 \ (200067F8)=40004930
  (  200067B2  00 21             )
  (  200067B4  01 60             )                  (r+#)=r
  (  200067B6  11 48             )                  0  40004914  40004900 -. 1 \ PE.5                 \ (200067FC)=40004914
  (  200067B8  00 21             )                 
  (  200067BA  01 60             )                  (r+#)=r
  (  200067BC  70 47             )                  C;

                                    CODE  BX=0*       R1=0  '' BX=0/1*  jmp_#
                                    CODE  BX=1*       R1=1  '' BX=0/1*  jmp_#

:  TBX    BEGIN    BX=0*     BX=1*   ?KEY  UNTIL  ;









  \ -------------------------------------------------------------------------------
                                    CODE  BX=0/1**            R0=40004900   R2=R0+C0              \ cfa= 2000675C
  (  2000675C  18 48             )                  0  40004930  40004900 -. 1 \ PE.12                \ (200067C0)=40004930
  (  2000675E  00 21             )                 
  (  20006760  01 60             )                  (r+#)=r
  (  20006762  18 48             )                  2  400049C8  400049C0 -. 1 \ PH.2                 \ (200067C4)=400049C8
  (  20006764  00 21             )
  (  20006766  01 60             )                  (r+#)=r
  (  20006768  17 48             )                  2  400049CC  400049C0 -. 1 \ PH.3                 \ (200067C8)=400049CC
  (  2000676A  00 21             )
  (  2000676C  01 60             )                  (r+#)=r
  (  2000676E  17 48             )                  2  400049D0  400049C0 -. 1 \ PH.4                 \ (200067CC)=400049D0
  (  20006770  00 21             )
  (  20006772  01 60             )                  (r+#)=r
  (  20006774  16 48             )                  2  400049D4  400049C0 -. 1 \ PH.5                 \ (200067D0)=400049D4
  (  20006776  00 21             )
  (  20006778  01 60             )                  (r+#)=r
  (  2000677A  16 48             )                  2  400049D8  400049C0 -. 1 \ PH.6                 \ (200067D4)=400049D8
  (  2000677C  00 21             )
  (  2000677E  01 60             )                  (r+#)=r
  (  20006780  15 48             )                  2  400049DC  400049C0 -. 1 \ PH.7                 \ (200067D8)=400049DC
  (  20006782  00 21             )
  (  20006784  01 60             )                  (r+#)=r
  (  20006786  15 48             )                  2  400049E0  400049C0 -. 1 \ PH.8                 \ (200067DC)=400049E0
  (  20006788  00 21             )
  (  2000678A  01 60             )                  (r+#)=r
  (  2000678C  14 48             )                  2  400049E4  400049C0 -. 1 \ PH.9                 \ (200067E0)=400049E4
  (  2000678E  00 21             )
  (  20006790  01 60             )                  (r+#)=r
  (  20006792  14 48             )                  2  400049E8  400049C0 -. 1 \ PH.10                \ (200067E4)=400049E8
  (  20006794  00 21             )
  (  20006796  01 60             )                  (r+#)=r
  (  20006798  13 48             )                  0  40004930  40004900 -. 1 \ PE.8                 \ (200067E8)=40004930
  (  2000679A  00 21             )
  (  2000679C  01 60             )                  (r+#)=r
  (  2000679E  13 48             )                  0  40004924  40004900 -. 1 \ PE.9                 \ (200067EC)=40004924
  (  200067A0  00 21             )
  (  200067A2  01 60             )                  (r+#)=r
  (  200067A4  12 48             )                  0  40004928  40004900 -. 1 \ PE.10                \ (200067F0)=40004928
  (  200067A6  00 21             )
  (  200067A8  01 60             )                  (r+#)=r
  (  200067AA  12 48             )                  0  4000492C  40004900 -. 1 \ PE.11                \ (200067F4)=4000492C
  (  200067AC  00 21             )
  (  200067AE  01 60             )                  (r+#)=r
  (  200067B0  11 48             )                  0  40004930  40004900 -. 1 \ PE.4                 \ (200067F8)=40004930
  (  200067B2  00 21             )
  (  200067B4  01 60             )                  (r+#)=r
  (  200067B6  11 48             )                  0  40004914  40004900 -. 1 \ PE.5                 \ (200067FC)=40004914
  (  200067B8  00 21             )                 
  (  200067BA  01 60             )                  (r+#)=r
  (  200067BC  70 47             )                  C;

                                    CODE  BX=0**      R1=0  '' BX=0/1**  jmp_#
                                    CODE  BX=1**      R1=1  '' BX=0/1**  jmp_#

:  TBX**    BEGIN    BX=0**     BX=1**   ?KEY  UNTIL  ;

  (  20003090  20003084          )
  \  20003094  04 43 58 3D 30
  \ -------------------------------------------------------------------------------
                                    CODE  CX=0                                                  \ cfa= 2000309C
  (  2000309C  09 48             )                  R0=400048B0          \ PC.12                \ (200030C4)=400048B0
  (  2000309E  00 F2 CC 02       )                  R2=R0+0CC
  (  200030A2  01 60             )                  (R0)=r1
  (  200030A4  51 60             )                  (R2+4)=R1
  (  200030A6  91 60             )                  (R2+8)=R1
  (  200030A8  D1 60             )                  (R2+0C)=R1
  (  200030AA  01 60             )                  (R0)=r1
  (  200030AC  41 60             )                  (R0+4)=R1
  (  200030AE  81 60             )                  (R0+8)=R1
  (  200030B0  C1 60             )                  (R0+0C)=R1
  (  200030B2  01 61             )                  (R0+10)=R1
  (  200030B4  41 61             )                  (R0+14)=R1
  (  200030B6  81 61             )                  (R0+18)=R1
  (  200030B8  11 67             )                  (R2+70)=R1
  (  200030BA  51 67             )                  (R2+74)=R1
  (  200030BC  91 67             )                  (R2+78)=R1
  (  200030BE  D1 67             )                  (R2+7C)=R1
  (  200030C0  C1 61             )                  (R0+1C)=R1
  (  200030C2  70 47             )                  C;



  (  20003090  20003084          )
  \  20003094  04 43 58 3D 30
  \ -------------------------------------------------------------------------------
                                    CODE  CX=0/1                                                  \ cfa= 2000309C
  (  2000309C  09 48             )                  R0=400048B0          \ PC.12                \ (200030C4)=400048B0
  (  2000309E  00 F2 CC 02       )                  R2=R0+0CC
  (  200030A2  01 60             )                  (R0)=r1
  (  200030A4  51 60             )                  (R2+4)=R1
  (  200030A6  91 60             )                  (R2+8)=R1
  (  200030A8  D1 60             )                  (R2+0C)=R1
  (  200030AA  01 60             )                  (R0)=r1
  (  200030AC  41 60             )                  (R0+4)=R1
  (  200030AE  81 60             )                  (R0+8)=R1
  (  200030B0  C1 60             )                  (R0+0C)=R1
  (  200030B2  01 61             )                  (R0+10)=R1
  (  200030B4  41 61             )                  (R0+14)=R1
  (  200030B6  81 61             )                  (R0+18)=R1
  (  200030B8  11 67             )                  (R2+70)=R1
  (  200030BA  51 67             )                  (R2+74)=R1
  (  200030BC  91 67             )                  (R2+78)=R1
  (  200030BE  D1 67             )                  (R2+7C)=R1
  (  200030C0  C1 61             )                  (R0+1C)=R1
  (  200030C2  70 47             )                  C;

                                    CODE  CX=0   R1=0   '' CX=0/1  JMP_#
                                    CODE  CX=1   R1=1   '' CX=0/1  JMP_#


\                                   : kjjkjkkjkjkj  ;




\ TOKEN : Access token, a system object representing the subject of access control operations




  40043000  EQU   ADC_DAT0         \ ADC Data Register 0
  40043004  EQU   ADC_DAT1         \ ADC Data Register 1  
  40043008  EQU   ADC_DAT2         \ ADC Data Register 2  
  4004300C  EQU   ADC_DAT3         \ ADC Data Register 3  
  40043010  EQU   ADC_DAT4         \ ADC Data Register 4  
  40043014  EQU   ADC_DAT5         \ ADC Data Register 5  
  40043018  EQU   ADC_DAT6         \ ADC Data Register 6  
  4004301C  EQU   ADC_DAT7         \ ADC Data Register 7  
  40043020  EQU   ADC_DAT8         \ ADC Data Register 8  
  40043024  EQU   ADC_DAT9         \ ADC Data Register 9  
  40043028  EQU   ADC_DAT10        \ ADC Data Register 10  
  4004302C  EQU   ADC_DAT11        \ ADC Data Register 11  
  40043030  EQU   ADC_DAT12        \ ADC Data Register 12  (for Band-gap Voltage)  
  40043034  EQU   ADC_DAT13        \ ADC Data Register 13  (for Temperature Sensor)  
  
  40043040  EQU   ADC_CTL          \ ADC Control Register  
  40043044  EQU   ADC_CHEN         \ ADC Channel Enable Control Register  
  40043048  EQU   ADC_CMP0         \ ADC Compare Register 0  
  4004304C  EQU   ADC_CMP1         \ ADC Compare Register 1  
  40043050  EQU   ADC_STATUS0      \ ADC Status  Register 0
  40043054  EQU   ADC_STATUS1      \ ADC Status  Register 1  
  
  40043060  EQU   ADC_CURDAT       \ ADC PDMA Current Transfer Data Register  
  
  40044000  EQU   EADC_AD0DAT0     \ A/D Data Register  0 for SAMPLE00
  40044004  EQU   EADC_AD0DAT1     \ A/D Data Register  1 for SAMPLE01  
  40044008  EQU   EADC_AD0DAT2     \ A/D Data Register  2 for SAMPLE02  
  4004400C  EQU   EADC_AD0DAT3     \ A/D Data Register  3 for SAMPLE03  
  40044010  EQU   EADC_AD0DAT4     \ A/D Data Register  4 for SAMPLE04  
  40044014  EQU   EADC_AD0DAT5     \ A/D Data Register  5 for SAMPLE05  
  40044018  EQU   EADC_AD0DAT6     \ A/D Data Register  6 for SAMPLE06  
  4004401C  EQU   EADC_AD0DAT7     \ A/D Data Register  7 for SAMPLE07  
  
  40044020  EQU   EADC_AD1DAT0     \ A/D Data Register  8 for SAMPLE10
  40044024  EQU   EADC_AD1DAT1     \ A/D Data Register  9 for SAMPLE11  
  40044028  EQU   EADC_AD1DAT2     \ A/D Data Register 10 for SAMPLE12  
  4004402C  EQU   EADC_AD1DAT3     \ A/D Data Register 11 for SAMPLE13  
  40044030  EQU   EADC_AD1DAT4     \ A/D Data Register 12 for SAMPLE14  
  40044034  EQU   EADC_AD1DAT5     \ A/D Data Register 13 for SAMPLE15  

  40044040  EQU   EADC_CTL         \ A/D Control Register  
  
  40044048  EQU   EADC_SWTRG       \ A/D SAMPLE module Software Start Register  
  4004404C  EQU   EADC_PENDSTS  
  40044050  EQU   EADC_ADIFOV  
  40044054  EQU   EADC_OVSTS  
  
  40044058  EQU   EADC_AD0SPCTL0   \ A/D SAMPLE00 Control Register  
  4004405C  EQU   EADC_AD0SPCTL1   \ A/D SAMPLE01 Control Register  
  40044060  EQU   EADC_AD0SPCTL2   \ A/D SAMPLE02 Control Register  
  40044064  EQU   EADC_AD0SPCTL3   \ A/D SAMPLE03 Control Register  
  40044068  EQU   EADC_AD0SPCTL4   \ A/D SAMPLE04 Control Register  
  4004406C  EQU   EADC_AD0SPCTL5   \ A/D SAMPLE05 Control Register  
  40044070  EQU   EADC_AD0SPCTL6   \ A/D SAMPLE06 Control Register  
  40044074  EQU   EADC_AD0SPCTL7   \ A/D SAMPLE07 Control Register  
  
  40044078  EQU   EADC_AD1SPCTL0   \ A/D SAMPLE10 Control Register  
  4004407C  EQU   EADC_AD1SPCTL1   \ A/D SAMPLE11 Control Register  
  40044080  EQU   EADC_AD1SPCTL2   \ A/D SAMPLE12 Control Register  
  40044084  EQU   EADC_AD1SPCTL3   \ A/D SAMPLE13 Control Register  
  40044088  EQU   EADC_AD1SPCTL4   \ A/D SAMPLE14 Control Register  
  4004408C  EQU   EADC_AD1SPCTL5   \ A/D SAMPLE15 Control Register  
  40044090  EQU   EADC_AD1SPCTL6   \ A/D SAMPLE16 Control Register
  40044094  EQU   EADC_AD1SPCTL7   \ A/D SAMPLE17 Control Register  
  
  400440A4  EQU   EADC_SIMUSEL     \ A/D SAMPLE module Simultaneous Sampling Mode Select Register  
  400440A8  EQU   EADC_CMP0        \ A/D Result Compare Register 0  
  400440AC  EQU   EADC_CMP1        \ A/D Result Compare Register 1  
  400440B0  EQU   EADC_STATUS0     \ A/D Status Register 0  
  400440B4  EQU   EADC_STATUS0     \ A/D Status Register 1  
  400440B8  EQU   EADC_EXTSMPT     \ A/D Timing Control Register  
  
  40044100  EQU   EADC_AD0DDAT0    \ A/D double Data Register 0 for SAMPLE00  
  40044104  EQU   EADC_AD0DDAT1    \ A/D double Data Register 1 for SAMPLE01  
  40044108  EQU   EADC_AD0DDAT2    \ A/D double Data Register 2 for SAMPLE02  
  4004410C  EQU   EADC_AD0DDAT3    \ A/D double Data Register 3 for SAMPLE03  
  
  40044120  EQU   EADC_AD1DDAT0    \ A/D double Data Register 0 for SAMPLE10  
  40044124  EQU   EADC_AD1DDAT1    \ A/D double Data Register 1 for SAMPLE11  
  40044128  EQU   EADC_AD1DDAT2    \ A/D double Data Register 2 for SAMPLE12  
  4004412C  EQU   EADC_AD1DDAT3    \ A/D double Data Register 3 for SAMPLE13  
  
  40044130  EQU   EADC_DBMEN       \ A/D Double Buffer Mode select
  40044134  EQU   EADC_INTSRC0     \ A/D Interrupt00 Source Enable Control Register  
  40044138  EQU   EADC_INTSRC1     \ A/D Interrupt10 Source Enable Control Register  
  4004413C  EQU   EADC_INTSRC2     \ A/D Interrupt20 Source Enable Control Register  
  40044140  EQU   EADC_INTSRC3     \ A/D Interrupt30 Source Enable Control Register  
  
  40044144  EQU   EADC_AD0TRGEN0   \ A/D trigger condition for SAMPLE00  
  40044148  EQU   EADC_AD0TRGEN1   \                                 01
  4004414C  EQU   EADC_AD0TRGEN2   \                                 02  
  40044150  EQU   EADC_AD0TRGEN3   \                                 03  
  40044154  EQU   EADC_AD1TRGEN0   \                                 10  
  40044158  EQU   EADC_AD1TRGEN1   \                                 11  
  4004415C  EQU   EADC_AD1TRGEN2   \                                 12  
  40044160  EQU   EADC_AD1TRGEN3   \                                 13  



  40045000  EQU   ACMP_BA
  40045000  EQU   ACMP_CTL0
  40045004  EQU   ACMP_CTL1
  40045008  EQU   ACMP_CTL2
  4004500C  EQU   ACMP_STATUS
  40045010  EQU   ACMP_VREF









0x2000FFF  ( 0x2000_FFFF )  EQU   SRAM_BA   \ SRAM Memory Space (64KB)
0x6000FFF  ( 0x6FFF_fFFF )  EQU EXTMEM_BA   \ External Memory Space (256MB)
\ Peripheral Controllers Space
0x40000000 ( 0x4000_01FF )  EQU    SYS_BA   \ System Control Registers
0x40000200 ( 0x4000_02FF )  EQU    CLK_BA   \ Clock Control Registers
0x40000300 ( 0x4000_03FF )  EQU    NMI_BA   \ Interrupt Multiplexer Control Registers
0x40004000 ( 0x4000_4FFF )  EQU   GPIO_BA   \ GPIO Control Registers
0x40008000 ( 0x4000_8FFF )  EQU   PDMA_BA   \ Peripheral DMA Control Registers
0x40009000 ( 0x4000_9FFF )  EQU   USBH_BA   \ USB Host Control Registers
0x4000B000 ( 0x4000_BFFF )  EQU   EMAC_BA   \ Ethernet MAC Control Registers (NUC472 only)
0x4000C000 ( 0x4000_CFFF )  EQU    FMC_BA   \ Flash Memory Control Registers
0x4000D000 ( 0x4000_DFFF )  EQU    SDH_BA   \ SD HOST Control Registers
0x40010000 ( 0x4001_0FFF )  EQU    EBI_BA   \ External Bus Interface Control Registers
0x40019000 ( 0x4001_9FFF )  EQU   USBD_BA   \ USB device Control Registers
0x40030000 ( 0x4003_0FFF )  EQU    CAP_BA   \ Image Capture interface Registers
0x40031000 ( 0x4003_1FFF )  EQU    CRC_BA   \ CRC Generator Registers
0x50008000 ( 0x5000_FFFF )  EQU   CRYP_BA   \ Cryptographic Accelerator Registers
\ APB Controllers Space (0x4000_0000 ~ 0x400F_FFFF ))
0x40040000 ( 0x4004_0FFF )  EQU    WDT_BA   \ Watchdog Timer Control Registers
0x40041000 ( 0x4004_1FFF )  EQU    RTC_BA   \ Real Time Clock (RTC) Control Register
0x40043000 ( 0x4004_3FFF )  EQU    ADC_BA   \ Analog-Digital-Converter (ADC) Control Registers
0x40044000 ( 0x4004_4FFF )  EQU   EADC_BA   \ Enhance Analog-Digital-Converter (ADC) Control Registers
0x40045000 ( 0x4004_5FFF )  EQU   ACMP_BA   \ Analog Comparator Control Registers
0x40046000 ( 0x4004_6FFF )  EQU    OPA_BA   \ OP Amplifier Control Registers
0x40048000 ( 0x4004_8FFF )  EQU   I2S0_BA   \ I2S0 Interface Control Registers
0x40049000 ( 0x4004_9FFF )  EQU   I2S1_BA   \ I2S1 Interface Control Registers
0x4004D000 ( 0x4004_DFFF )  EQU     OG_BA   \ USB OTG
0x40050000 ( 0x4005_0FFF )  EQU  TMR01_BA   \ Timer0/Timer1 Control Registers
0x40051000 ( 0x4005_1FFF )  EQU  TMR23_BA   \ Timer2/Timer3 Control Registers
0x40058000 ( 0x4005_8FFF )  EQU   PWM0_BA   \ PWM0_0/1 2/3/4/5 Control Registers
0x40059000 ( 0x4005_9FFF )  EQU   PWM1_BA   \ PWM1_0/1/2/3/4/5 Control Registers
0x4005C000 ( 0x4005_CFFF )  EQU  EPWM0_BA   \ Enhanced PWM0_0/1/2/3/4/5 Control Registers
0x4005D000 ( 0x4005_DFFF )  EQU  EPWM1_BA   \ Enhanced PWM1_0/1/2/3/4/5 Control Registers
0x40060000 ( 0x4006_0FFF )  EQU   SPI0_BA   \ SPI0 with Master/Slave function Control Registers
0x40061000 ( 0x4006_1FFF )  EQU   SPI1_BA   \ SPI1 with Master/Slave function Control Registers
0x40062000 ( 0x4006_2FFF )  EQU   SPI2_BA   \ SPI2 with Master/Slave function Control Registers
0x40063000 ( 0x4006_3FFF )  EQU   SPI3_BA   \ SPI3 with Master/Slave function Control Registers
0x40070000 ( 0x4007_0FFF )  EQU  UART0_BA   \ UART0 Control Registers
0x40071000 ( 0x4007_1FFF )  EQU  UART1_BA   \ UART1 Control Registers
0x40072000 ( 0x4007_2FFF )  EQU  UART2_BA   \ UART2 Control Registers
0x40073000 ( 0x4007_3FFF )  EQU  UART3_BA   \ UART3 Control Registers
0x40074000 ( 0x4007_4FFF )  EQU  UART4_BA   \ UART4 Control Registers
0x40075000 ( 0x4007_5FFF )  EQU  UART5_BA   \ UART5 Control Registers
0x40080000 ( 0x4008_0FFF )  EQU   I2C0_BA   \ I2C0 Interface Control Registers
0x40081000 ( 0x4008_1FFF )  EQU   I2C1_BA   \ I2C1 Interface Control Registers
0x40082000 ( 0x4008_2FFF )  EQU   I2C2_BA   \ I2C2 Interface Control Registers
0x40083000 ( 0x4008_3FFF )  EQU   I2C3_BA   \ I2C3 Interface Control Registers
0x40084000 ( 0x4008_4FFF )  EQU   I2C4_BA   \ I2C4 Interface Control Registers
0x40090000 ( 0x4009_0FFF )  EQU    SC0_BA   \ Smartcard0 Control Registers
0x40091000 ( 0x4009_1FFF )  EQU    SC1_BA   \ Smartcard1 Control Registers
0x40092000 ( 0x4009_2FFF )  EQU    SC2_BA   \ Smartcard2 Control Registers
0x40093000 ( 0x4009_3FFF )  EQU    SC3_BA   \ Smartcard3 Control Registers
0x40094000 ( 0x4009_4FFF )  EQU    SC4_BA   \ Smartcard4 Control Registers
0x40095000 ( 0x4009_5FFF )  EQU    SC5_BA   \ Smartcard5 Control Registers
0x400A0000 ( 0x400A_0FFF )  EQU   CAN0_BA   \ CAN0 Bus Control Registers
0x400A1000 ( 0x400A_1FFF )  EQU   CAN1_BA   \ CAN1 Bus Control Registers
0x400B0000 ( 0x400B_0FFF )  EQU   QEI0_BA   \ Quadrature Encoder Interface 0 Control Registers
0x400B1000 ( 0x400B_1FFF )  EQU   QEI1_BA   \ Quadrature Encoder Interface 1 Control Registers
0x400B0000 ( 0x400B_0FFF )  EQU  ECAP0_BA   \ Capture Engine 0 Control Registers
0x400B1000 ( 0x400B_1FFF )  EQU  ECAP1_BA   \ Capture Engine 1 Control Registers
0x400E0000 ( 0x400E_0FFF )  EQU    PS2_BA   \ PS/2 interface Control Registers
0xE000E010 ( 0xE000_E0FF )  EQU    SCS_BA   \ System Timer Control Registers
0xE000E100 ( 0xE000_ECFF )  EQU    SCS_BA   \ External Interrupt Controller Control Registers
0xE000ED00 ( 0xE000_ED8F )  EQU    SCS_BA   \ System Control Registers
























                                    \  ADC_DisableInt(ADC, ADC_ADF_INT);
                                    t: ADC_DisableInt  (.n.n.--.)    \  1  6  ' ADC_DisableInt  2`0
  (  0000073C  09 48             )                  R0=40043000      \ ADC_DAT0                 \ (00000764)=40043000
  (  0000073E  CA 07             )                  R2=R1<<1F,s
  (  00000740  03 D0             )        if'<> \ z=1? eq?           \ 00000740 --> 0000074A **
  (  00000742  02 6C             )                  R2=(R0+40)       \ ADC_CTL                  \  40043040
  (  00000744  22 F0 02 02       )                  R2=R2n2/
  (  00000748  02 64             )                  (R0+40)=R2       \ ADC_CTL                  \  40043040
                                          then'                      \ 00000740 --> 0000074A **
  (  0000074A  8A 07             )                  R2=R1<<1E,s
  (  0000074C  03 D5             )        if'- \ n=0? pl?            \ 0000074C --> 00000756 ===========
  (  0000074E  82 6C             )                  R2=(R0+48)       \ ADC_CMP0                 \  40043048
  (  00000750  22 F0 02 02       )                  R2=R2n2/
  (  00000754  82 64             )                  (R0+48)=R2       \ ADC_CMP0                 \  40043048
                                          then'                      \ 0000074C --> 00000756 ===========
  (  00000756  49 07             )                  R1=R1<<1D,s
  (  00000758  03 D5             )        if'- \ n=0? pl?            \ 00000758 --> 00000762 +++++
  (  0000075A  C1 6C             )                  R1=(R0+4C)       \ ADC_CMP1                 \  4004304C
  (  0000075C  21 F0 02 01       )                  R1=R1n2/
  (  00000760  C1 64             )                  (R0+4C)=R1       \ ADC_CMP1                 \  4004304C
                                          then'                      \ 00000758 --> 00000762 +++++
  (  00000762  70 47             )                  ret'



                                   \  ADC_EnableInt(ADC, ADC_ADF_INT);
                                   \  nuc472
                                   t: ADC_EnableInt  (.n.n.--.)    \  1  6  ' ADC_EnableInt  2`0
  (  00000768  09 48             )                  R0=40043000      \ ADC_DAT0                 \ (00000790)=40043000
  (  0000076A  CA 07             )                  R2=R1<<1F,s
  (  0000076C  03 D0             )        if'<> \ z=1? eq?           \ 0000076C --> 00000776 ===============
  (  0000076E  02 6C             )                  R2=(R0+40)       \ ADC_CTL                  \  40043040
  (  00000770  42 F0 02 02       )                  R2o2
  (  00000774  02 64             )                  (R0+40)=R2       \ ADC_CTL                  \  40043040
                                          then'                      \ 0000076C --> 00000776 ===============
  (  00000776  8A 07             )                  R2=R1<<1E,s
  (  00000778  03 D5             )        if'- \ n=0? pl?            \ 00000778 --> 00000782 +++++++++
  (  0000077A  82 6C             )                  R2=(R0+48)       \ ADC_CMP0                 \  40043048
  (  0000077C  42 F0 02 02       )                  R2o2
  (  00000780  82 64             )                  (R0+48)=R2       \ ADC_CMP0                 \  40043048
                                          then'                      \ 00000778 --> 00000782 +++++++++
  (  00000782  49 07             )                  R1=R1<<1D,s
  (  00000784  03 D5             )        if'- \ n=0? pl?            \ 00000784 --> 0000078E ******************
  (  00000786  C1 6C             )                  R1=(R0+4C)       \ ADC_CMP1                 \  4004304C
  (  00000788  41 F0 02 01       )                  R1o2
  (  0000078C  C1 64             )                  (R0+4C)=R1       \ ADC_CMP1                 \  4004304C
                                          then'                      \ 00000784 --> 0000078E ******************
  (  0000078E  70 47             )                  ret'




                                   \  nuc472
                                   t: ADC_IRQHandler   (.--.)
  (  00000794  07 49             )                  R1=40043000      \ ADC_DAT0                 \ (000007B4)=40043000
  (  00000796  08 6D             )                  R0=(R1+50)       \ ADC_STATUS0              \  40043050
  (  00000798  00 F0 01 00       )                  R0n1
  (  0000079C  C2 07             )                  R2=R0<<1F,s
  (  0000079E  02 D0             )        if'<> \ z=1? eq?           \ 0000079E --> 000007A6 =======================
  (  000007A0  05 4B             )                  R3=2000002C                                 \ (000007B8)=2000002C
  (  000007A2  01 22             )                  R2=1
  (  000007A4  1A 70             )                  3 2 (R)=R,b      \ (R3)=R2,b
                                          then'                      \ 0000079E --> 000007A6 =======================
  (  000007A6  0A 6D             )                  R2=(R1+50)       \ ADC_STATUS0              \  40043050
  (  000007A8  22 F0 07 02       )                  R2n7/
  (  000007AC  02 43             )                  R2oR0
  (  000007AE  0A 65             )                  (R1+50)=R2       \ ADC_STATUS0              \  40043050
  (  000007B0  70 47             )                  ret'


\  Enable channel 0,1,2                r1                               r2    r3 ------------------------------------------
\  ADC_Open(ADC, ADC_INPUT_MODE_SINGLE_END, ADC_OPERATION_MODE_SINGLE_CYCLE, (ADC_CH_0_MASK | ADC_CH_1_MASK | ADC_CH_2_MASK));
\        0x00002584:    4e48        HN      LDR      r6,[pc,#288] ; [0x26a8] = 0x40043000
\        0x00002586:    2307        .#      MOVS     r3,#7
\        0x00002588:    2208        ."      MOVS     r2,#8
\        0x0000258a:    2100        .!      MOVS     r1,#0
\        0x0000258c:    4630        0F      MOV      r0,r6
\        0x0000258e:    f7fef915    ....    BL       ADC_Open ; 0x7bc





\  nuc472      40043000  0  8  7      ADC_Open
                                   t: ADC_Open1  (.n.n.n.n.--.)  \  4`0     \  (.r0.r1.r2.r3.--.)   \ (.a.n.n.n.--.)   472
  (  000007BC  06 48             )             \    R0=40043000      \ ADC_DAT0                 \ (000007D8)=40043000
  (  000007BE  10 B5             )                  { R4, lr, }  push
  (  000007C0  04 6C             )                  R4=(R0+40)       \ ADC_CTL                  \  40043040
  (  000007C2  0C 43             )                  R4oR1
  (  000007C4  04 64             )                  (R0+40)=R4       \ ADC_CTL                  \  40043040
  (  000007C6  01 6C             )                  R1=(R0+40)       \ ADC_CTL                  \  40043040
  (  000007C8  11 43             )                  R1oR2
  (  000007CA  01 64             )                  (R0+40)=R1       \ ADC_CTL                  \  40043040
  (  000007CC  41 6C             )                  R1=(R0+44)       \ ADC_CHEN                 \  40043044
  (  000007CE  03 4A             )                  R2=FFFCF000                                 \ (000007DC)=FFFCF000
  (  000007D0  11 40             )                  R1nR2
  (  000007D2  19 43             )                  R1oR3
  (  000007D4  41 64             )                  (R0+44)=R1       \ ADC_CHEN                 \  40043044
  (  000007D6  10 BD             )                  { R4, pc, }  pop
                                                    -ret







\  nuc472      40043000  0  8  7      ADC_Open
                                   t: ADC_Open  (.n.n.n.n.--.)  \ 4`0     \  (.r0.r1.r2.r3.--.)   \ (.a.n.n.n.--.)   472
  (  000007BC  06 48             )                  R0=40043000      \ ADC_DAT0                 \ (000007D8)=40043000
  (  000007BE  10 B5             )                  { R4, lr, }  push
  (  000007C0  04 6C             )                  R4=(R0+40)       \ ADC_CTL                  \  40043040
  (  000007C2  0C 43             )                  R4oR1
  (  000007C4  04 64             )                  (R0+40)=R4       \ ADC_CTL                  \  40043040
  (  000007C6  01 6C             )                  R1=(R0+40)       \ ADC_CTL                  \  40043040
  (  000007C8  11 43             )                  R1oR2
  (  000007CA  01 64             )                  (R0+40)=R1       \ ADC_CTL                  \  40043040
  (  000007CC  41 6C             )                  R1=(R0+44)       \ ADC_CHEN                 \  40043044
  (  000007CE  03 4A             )                  R2=FFFCF000                                 \ (000007DC)=FFFCF000
  (  000007D0  11 40             )                  R1nR2
  (  000007D2  19 43             )                  R1oR3
  (  000007D4  41 64             )                  (R0+44)=R1       \ ADC_CHEN                 \  40043044
  (  000007D6  10 BD             )                  { R4, pc, }  pop
                                                    -ret

                                   \  (40043040)oR1oR2   (40043044)nFFFCF000oR3
                                   \   40043044 @  FFFCF000  AND  OR  40043044  !
                                   \   40043040 @            OR   OR  40043040  !

                                   t:  ADC_POWER_ON      (.--.)      \  (E000E104)=400
\ (  000025A2  42 49             )                  R1=E000E004                                 \ (000026AC)=E000E004
\ (  000025A4  01 24             )                  R4=1
\ (  000025A6  A0 02             )                  R0=R4<<0A,s      \ R0=400
\ (  000025A8  C1 F8 00 01       )                  (R1+100)=R0
\                                                   ret'

                                                    R4=40043000
  (  000025AE  20 6C             )                  R0=(R4+40)       \ BIT6                     \  00000040
  (  000025B0  40 F0 01 00       )                  R0=R0o1
  (  000025B4  20 64             )                  (R4+40)=R0       \ BIT6                     \  00000040
                                                    ret'


                                   t:  ADC_START_CONV       (.--.)   \  (40043000)o800
  (  00000460  03 48             )                  R0=40043000      \ ADC_DAT0                 \ (00000470)=40043000
  (  00000462  01 6C             )                  R1=(R0+40)
  (  00000464  41 F4 00 61       )                     R1o800
  (  00000468  01 64             )                  (R0+40)=R1
  (  0000046A  00 20             )                  R0=0
                                                    ret'

   t:  ADC.ready  (.--.)  push.LR  40043000 ... 0 ... 8 ... 7 ...    '' ADC_Open ...  4`0  ADC_POWER_ON  ADC_START_CONV   ret
    :  ADC.ready? (.--.)           40043000     0     8     7     [. '' ADC_Open ...  4`0  ADC_POWER_ON  ADC_START_CONV   ;

0  \  esp32+nuc472?  @.  esp32?  @.  or.
#if
#else
   t:  Vin0     {dup}  r6=(40043000)   ret'
   t:  Vin1     {dup}  r6=(40043004)   ret'
   t:  Vin2     {dup}  r6=(40043008)   ret'
   t:  Vin3     {dup}  r6=(4004300c)   ret'
   t:  Vin4     {dup}  r6=(40043010)   ret'
   t:  Vin5     {dup}  r6=(40043014)   ret'
   t:  Vin6     {dup}  r6=(40043018)   ret'
   t:  Vin7     {dup}  r6=(4004301c)   ret'
#then

                             \   10  ' CLK_WaitClockReady   1`0

                                   t:  CLK_WaitClockReady    (.n.--.f.)   \ (.n.--.0/1.)
  (  000004E4  4F F4 D8 31       )                  R1=1B000
  (  000004E8  4F F0 80 42       )                  R2=40000000
  (  000004EC  05 E0             )  ahead'.       \ jmp_4FA         \
                                          begin'                     \ 00000502 --> 000004EE +++++++++
  (  000004EE  0B 1E             )                  R3=R1-0
  (  000004F0  A1 F1 01 01       )                  R1=R1-1
  (  000004F4  01 DC             )          if'z  \  if'<= \ z=0;n=v? gt?     \ 000004F4 --> 000004FA **********************
  (  000004F6  00 20             )                  R0=0
  (  000004F8  70 47             )                  ret'
                                            then'                    \ 000004F4 --> 000004FA **********************
  (  000004FA  D2 F8 50 32       )  then'.          R3=(R2+250)
  (  000004FE  30 EA 03 03       )                  R3=R0nR3/<<0,s
  (  00000502  F4 D1             )        until'= \ z=0? ne?         \ 00000502 --> 000004EE +++++++++
  (  00000504  01 20             )                  R0=1
  (  00000506  70 47             )                  ret'


                                   t:  CLK_EnableXtalRC   (.n.--.)
  (  00000508  02 49             )                  R1=40000200                                 \ (00000514)=40000200
  (  0000050A  0A 68             )                  R2=(R1+0)
  (  0000050C  42 EA 00 02       )                  R2=R2oR0<<0
  (  00000510  0A 60             )                  (R1)=R2
  (  00000512  70 47             )                  ret'


                                    t:  SYS_LockReg    (.--.)
  (  00000518  01 49             )                  R1=40000100                                 \ (00000520)=40000100
  (  0000051A  00 20             )                  R0=0
  (  0000051C  08 60             )                  (R1)=R0
  (  0000051E  70 47             )                  ret'

                                   t:  CLK->PLLCTL|=CLK_PLLCTL_PD_Msk
  (  00000460  03 48             )                  R0=40000240                                 \ (00000470)=40000240
  (  00000462  01 68             )                  R1=(R0+0)
  (  00000464  41 F4 80 31       )                  R1=R1o10000
  (  00000468  01 60             )                  (R0+0)=R1
  (  0000046A  4F F0 00 00       )                  R0=0       ret'

 
                                    t:  SendChar_ToUART(n)  ( char UART.n -- )   {>r0~r1}
  (  0000080C  21 49             )                  R2=40070000   r1<<0C  R1+r2   \ UART0_BA+n             \ (00000894)=40070000
                                        begin'                       \ 00000812 --> 0000080E ===
  (  0000080E  8A 69             )                  R2=(R1+18)
  (  00000810  12 02             )                  R2=R2<<8,s
  (  00000812  FC D4             )      until'+ \ n=1? mi?           \ 00000812 --> 0000080E ===
  (  00000814  08 60             )                  (R1+0)=R0
  (  00000816  0A 28             )                  0 0a r:#  \     R0:0A
  (  00000818  04 D1             )      if'= \ z=0? ne?              \ 00000818 --> 00000824 +++++++++++++++++++++++++++++++
  (  0000081A  88 69             )        begin'    R0=(R1+18)
  (  0000081C  00 02             )                  R0=R0<<8,s
  (  0000081E  FC D4             )        until'+ \ n=1? mi?         \ 0000081E --> 0000081A ------------
  (  00000820  0D 20             )                  R0=0D
  (  00000822  08 60             )                  (R1+0)=R0
                                        then'                        \ 00000818 --> 00000824 +++++++++++++++++++++++++++++++
  (  00000824  70 47             )                  ret'

                                     :  TX!0  ( char -- )   0  SendChar_ToUART(n)  ;
                                     :  TX!1  ( char -- )   1  SendChar_ToUART(n)  ;
                                     :  TX!2  ( char -- )   2  SendChar_ToUART(n)  ;
                                     :  TX!3  ( char -- )   3  SendChar_ToUART(n)  ;
                                     :  TX!4  ( char -- )   4  SendChar_ToUART(n)  ;
                                     :  TX!5  ( char -- )   5  SendChar_ToUART(n)  ;

                                     : jj   begin  cr  10000 0 do loop 37   TX!5  again  ;


t:  UART_Open(UARTn,115200)  ( UART.BAn -- )   push.LR    1C200 ( 115200 ) ...   '' UART_Open ...  2`0   ret

 :  UART_Open(UART0,115200)  (.--.)     UART0_BA  UART_Open(UARTn,115200)  ;
 :  UART_Open(UART1,115200)  (.--.)     UART1_BA  UART_Open(UARTn,115200)  ;
 :  UART_Open(UART2,115200)  (.--.)     UART2_BA  UART_Open(UARTn,115200)  ;
 :  UART_Open(UART3,115200)  (.--.)     UART3_BA  UART_Open(UARTn,115200)  ;
 :  UART_Open(UART4,115200)  (.--.)     UART4_BA  UART_Open(UARTn,115200)  ;
 :  UART_Open(UART5,115200)  (.--.)     UART5_BA  UART_Open(UARTn,115200)  ;

 
comment:


                                    t:  SendChar_ToUART(5)  ( char -- )
  (  0000080C  21 49             )                  R1=40075000          \ UART5_BA             \ (00000894)=40070000
                                          begin'                     \ 00000812 --> 0000080E ===
  (  0000080E  8A 69             )                  R2=(R1+18)
  (  00000810  12 02             )                  R2=R2<<8,s
  (  00000812  FC D4             )        until'+ \ n=1? mi?         \ 00000812 --> 0000080E ===
  (  00000814  08 60             )                  (R1+0)=R0
  (  00000816  0A 28             )                  R0:0A
  (  00000818  04 D1             )        if'= \ z=0? ne?            \ 00000818 --> 00000824 +++++++++++++++++++++++++++++++
  (  0000081A  88 69             )                  R0=(R1+18)
  (  0000081C  00 02             )                  R0=R0<<8,s
  (  0000081E  FC D4             )        until'+ \ n=1? mi?         \ 0000081E --> 0000081A ------------
  (  00000820  0D 20             )                  R0=0D
  (  00000822  08 60             )                  (R1+0)=R0
                                        then'                        \ 00000818 --> 00000824 +++++++++++++++++++++++++++++++
  (  00000824  70 47             )                  ret'


                                    L:  SendChar_ToUART(0)  ( char -- )
  (  0000080C  21 49             )                  R1=40070000          \ UART0_BA             \ (00000894)=40070000
                                          begin'                     \ 00000812 --> 0000080E ===
  (  0000080E  8A 69             )                  R2=(R1+18)
  (  00000810  12 02             )                  R2=R2<<8,s
  (  00000812  FC D4             )        until'+ \ n=1? mi?         \ 00000812 --> 0000080E ===
  (  00000814  08 60             )                  (R1+0)=R0
  (  00000816  0A 28             )                  R0:0A
  (  00000818  04 D1             )        if'= \ z=0? ne?            \ 00000818 --> 00000824 +++++++++++++++++++++++++++++++
  (  0000081A  88 69             )                  R0=(R1+18)
  (  0000081C  00 02             )                  R0=R0<<8,s
  (  0000081E  FC D4             )        until'+ \ n=1? mi?         \ 0000081E --> 0000081A ------------
  (  00000820  0D 20             )                  R0=0D
  (  00000822  08 60             )                  (R1+0)=R0
                                        then'                        \ 00000818 --> 00000824 +++++++++++++++++++++++++++++++
  (  00000824  70 47             )                  ret'



                                   t:  84MHz    \   401A  40000240  !   \  (40000240)=401A
  (  00000460  03 49             )                  R1=40000240                                 \ (00000470)=40000240
  (  00000462  44 F2 1A 00       )                  R0=401A
  (  00000466  08 60             )                  (R1)=R0                                   \  40000240
  (  00000468  4F F0 00 00       )                  R0=0	
                                                    ret'
                                    \ :{  84MHz   40000240  401A  (#)=#  };


 :{  PG1=RX,PG2=TX    	    40000060  110  (#)=#   };




                                   :{  CLK->PLLCTL|=CLK_PLLCTL_PD_Msk;
  (  00000460  03 48             )                              0  40000240    R=#        \ (00000470)=40000240
  (  00000462  01 68             )                    1         0         0    R=(R+#5)
  (  00000464  41 F4 80 31       )                    1         1     10000    R=Ro#
  (  00000468  01 60             )                    0         0         1    (R+#5)=R
  (  0000046A  4F F0 00 00       )                              0         0    R=#12
                                    };

                                   \  :{  CLK->PLLCTL|=CLK_PLLCTL_PD_Msk;   40000240  10000  (#)o#  };


                                   :{  CLK->PLLCTL=CLK_PLLCTL_84MHz_HXT;
\ (  00000460  03 49             )                  R1=40000240                                 \ (00000470)=40000240
\ (  00000462  44 F2 1A 00       )                  R0=401A
\ (  00000466  08 60             )                  (R1+0)=R0
\ (  00000468  4F F0 00 00       )                  R0=0

  (  00000460  03 49             )                              1  40000240    R=#        \ (00000470)=40000240
  (  00000462  44 F2 1A 00       )                              0      401A    R=#16
  (  00000466  08 60             )                    1         0         0    (R+#5)=R
  (  00000468  4F F0 00 00       )                              0         0    R=#12
                                    };

                                   \  :{  CLK->PLLCTL=CLK_PLLCTL_84MHz_HXT;    40000240  401A  ($)=#  };










:{   CLK_WaitClockReady(CLK_STATUS_PLLSTB_Msk);    0 4 r=#   CLK_WaitClockReady  };




























========================================================================

** ELF Header Information

    File Name: .\obj\ADC_ContinuousScan.axf

    Machine class: ELFCLASS32 (32-bit)
    Data encoding: ELFDATA2LSB (Little endian)
    Header version: EV_CURRENT (Current version)
    Operating System ABI: none
    ABI Version: 0
    File Type: ET_EXEC (Executable) (2)
    Machine: EM_ARM (ARM)

    Image Entry point: 0x00000345
    Flags: EF_ARM_HASENTRY (0x05000002)

    ARM ELF revision: 5 (ABI version 2)

    Built with
    Component: ARM Compiler 5.05 update 1 (build 106) Tool: armasm [4d0efa]
    Component: ARM Compiler 5.05 update 1 (build 106) Tool: armlink [4d0efa]

    Header size: 52 bytes (0x34)
    Program header entry size: 32 bytes (0x20)
    Section header entry size: 40 bytes (0x28)

    Program header entries: 1
    Section header entries: 16

    Program header offset: 683008 (0x000a6c00)
    Section header offset: 683040 (0x000a6c20)

    Section header string table index: 15

========================================================================

** Program header #0 (PT_LOAD) [PF_X + PF_W + PF_R + PF_ARM_ENTRY]
    Size : 6204 bytes (3800 bytes in file)
    Virtual address: 0x00000000 (Alignment 8)


========================================================================

** Section #1 'ER_RO' (SHT_PROGBITS) [SHF_ALLOC + SHF_EXECINSTR]
    Size   : 3756 bytes (alignment 4)
    Address: 0x00000000

    $d.realdata
    RESET
    __Vectors
        0x00000000:    20000990    ...     DCD    536873360
        0x00000004:    00000345    E...    DCD    837
        0x00000008:    0000037f    ....    DCD    895
        0x0000000c:    00000329    )...    DCD    809
        0x00000010:    00000383    ....    DCD    899
        0x00000014:    00000385    ....    DCD    901
        0x00000018:    00000387    ....    DCD    903
        0x0000001c:    00000000    ....    DCD    0
        0x00000020:    00000000    ....    DCD    0
        0x00000024:    00000000    ....    DCD    0
        0x00000028:    00000000    ....    DCD    0
        0x0000002c:    00000389    ....    DCD    905
        0x00000030:    0000038b    ....    DCD    907
        0x00000034:    00000000    ....    DCD    0
        0x00000038:    0000038d    ....    DCD    909
        0x0000003c:    0000038f    ....    DCD    911
        0x00000040:    00000391    ....    DCD    913
        0x00000044:    00000391    ....    DCD    913
        0x00000048:    00000391    ....    DCD    913
        0x0000004c:    00000391    ....    DCD    913
        0x00000050:    00000391    ....    DCD    913
        0x00000054:    00000391    ....    DCD    913
        0x00000058:    00000391    ....    DCD    913
        0x0000005c:    00000391    ....    DCD    913
        0x00000060:    00000391    ....    DCD    913
        0x00000064:    00000391    ....    DCD    913
        0x00000068:    00000391    ....    DCD    913
        0x0000006c:    00000391    ....    DCD    913
        0x00000070:    00000391    ....    DCD    913
        0x00000074:    00000391    ....    DCD    913
        0x00000078:    00000391    ....    DCD    913
        0x0000007c:    00000391    ....    DCD    913
        0x00000080:    00000391    ....    DCD    913
        0x00000084:    00000391    ....    DCD    913
        0x00000088:    00000391    ....    DCD    913
        0x0000008c:    00000391    ....    DCD    913
        0x00000090:    00000391    ....    DCD    913
        0x00000094:    00000391    ....    DCD    913
        0x00000098:    00000391    ....    DCD    913
        0x0000009c:    00000391    ....    DCD    913
        0x000000a0:    00000391    ....    DCD    913
        0x000000a4:    00000391    ....    DCD    913
        0x000000a8:    00000391    ....    DCD    913
        0x000000ac:    00000391    ....    DCD    913
        0x000000b0:    00000391    ....    DCD    913
        0x000000b4:    00000391    ....    DCD    913
        0x000000b8:    00000391    ....    DCD    913
        0x000000bc:    00000391    ....    DCD    913
        0x000000c0:    00000391    ....    DCD    913
        0x000000c4:    00000391    ....    DCD    913
        0x000000c8:    00000391    ....    DCD    913
        0x000000cc:    00000391    ....    DCD    913
        0x000000d0:    00000391    ....    DCD    913
        0x000000d4:    00000391    ....    DCD    913
        0x000000d8:    00000391    ....    DCD    913
        0x000000dc:    00000391    ....    DCD    913
        0x000000e0:    00000391    ....    DCD    913
        0x000000e4:    00000391    ....    DCD    913
        0x000000e8:    00000769    i...    DCD    1897
        0x000000ec:    00000391    ....    DCD    913
        0x000000f0:    00000391    ....    DCD    913
        0x000000f4:    00000391    ....    DCD    913
        0x000000f8:    00000391    ....    DCD    913
        0x000000fc:    00000391    ....    DCD    913
        0x00000100:    00000391    ....    DCD    913
        0x00000104:    00000391    ....    DCD    913
        0x00000108:    00000391    ....    DCD    913
        0x0000010c:    00000391    ....    DCD    913
        0x00000110:    00000391    ....    DCD    913
        0x00000114:    00000391    ....    DCD    913
        0x00000118:    00000391    ....    DCD    913
        0x0000011c:    00000391    ....    DCD    913
        0x00000120:    00000391    ....    DCD    913
        0x00000124:    00000391    ....    DCD    913
        0x00000128:    00000391    ....    DCD    913
        0x0000012c:    00000391    ....    DCD    913
        0x00000130:    00000391    ....    DCD    913
        0x00000134:    00000391    ....    DCD    913
        0x00000138:    00000391    ....    DCD    913
        0x0000013c:    00000391    ....    DCD    913
        0x00000140:    00000391    ....    DCD    913
        0x00000144:    00000391    ....    DCD    913
        0x00000148:    00000391    ....    DCD    913
        0x0000014c:    00000391    ....    DCD    913
        0x00000150:    00000391    ....    DCD    913
        0x00000154:    00000391    ....    DCD    913
        0x00000158:    00000391    ....    DCD    913
        0x0000015c:    00000391    ....    DCD    913
        0x00000160:    00000391    ....    DCD    913
        0x00000164:    00000391    ....    DCD    913
        0x00000168:    00000391    ....    DCD    913
        0x0000016c:    00000391    ....    DCD    913
        0x00000170:    00000391    ....    DCD    913
        0x00000174:    00000391    ....    DCD    913
        0x00000178:    00000391    ....    DCD    913
        0x0000017c:    00000391    ....    DCD    913
        0x00000180:    00000391    ....    DCD    913
        0x00000184:    00000391    ....    DCD    913
        0x00000188:    00000391    ....    DCD    913
        0x0000018c:    00000391    ....    DCD    913
        0x00000190:    00000391    ....    DCD    913
        0x00000194:    00000391    ....    DCD    913
        0x00000198:    00000391    ....    DCD    913
        0x0000019c:    00000391    ....    DCD    913
        0x000001a0:    00000391    ....    DCD    913
        0x000001a4:    00000391    ....    DCD    913
        0x000001a8:    00000391    ....    DCD    913
        0x000001ac:    00000391    ....    DCD    913
        0x000001b0:    00000391    ....    DCD    913
        0x000001b4:    00000391    ....    DCD    913
        0x000001b8:    00000391    ....    DCD    913
        0x000001bc:    00000391    ....    DCD    913
        0x000001c0:    00000391    ....    DCD    913
        0x000001c4:    00000391    ....    DCD    913
        0x000001c8:    00000391    ....    DCD    913
        0x000001cc:    00000391    ....    DCD    913
        0x000001d0:    00000391    ....    DCD    913
        0x000001d4:    00000391    ....    DCD    913
        0x000001d8:    00000391    ....    DCD    913
        0x000001dc:    00000391    ....    DCD    913
        0x000001e0:    00000391    ....    DCD    913
        0x000001e4:    00000391    ....    DCD    913
        0x000001e8:    00000391    ....    DCD    913
        0x000001ec:    00000391    ....    DCD    913
        0x000001f0:    00000391    ....    DCD    913
        0x000001f4:    00000391    ....    DCD    913
        0x000001f8:    00000391    ....    DCD    913
        0x000001fc:    00000391    ....    DCD    913
        0x00000200:    00000391    ....    DCD    913
        0x00000204:    00000391    ....    DCD    913
        0x00000208:    00000391    ....    DCD    913
        0x0000020c:    00000391    ....    DCD    913
        0x00000210:    00000391    ....    DCD    913
        0x00000214:    00000391    ....    DCD    913
        0x00000218:    00000391    ....    DCD    913
        0x0000021c:    00000391    ....    DCD    913
        0x00000220:    00000391    ....    DCD    913
        0x00000224:    00000391    ....    DCD    913
        0x00000228:    00000391    ....    DCD    913
        0x0000022c:    00000391    ....    DCD    913
        0x00000230:    00000391    ....    DCD    913
        0x00000234:    00000391    ....    DCD    913
        0x00000238:    00000391    ....    DCD    913
        0x0000023c:    00000391    ....    DCD    913
        0x00000240:    00000391    ....    DCD    913
        0x00000244:    00000391    ....    DCD    913
        0x00000248:    00000391    ....    DCD    913
        0x0000024c:    00000391    ....    DCD    913
        0x00000250:    00000391    ....    DCD    913
        0x00000254:    00000391    ....    DCD    913
        0x00000258:    00000391    ....    DCD    913
        0x0000025c:    00000391    ....    DCD    913
        0x00000260:    00000391    ....    DCD    913
        0x00000264:    00000391    ....    DCD    913
        0x00000268:    00000391    ....    DCD    913
        0x0000026c:    00000391    ....    DCD    913
        0x00000270:    00000391    ....    DCD    913
        0x00000274:    00000391    ....    DCD    913
    $t
    !!!main
    __Vectors_End
    __main
        0x00000278:    f000f802    ....    BL       __scatterload ; 0x280
        0x0000027c:    f000f844    ..D.    BL       __rt_entry ; 0x308
    !!!scatter
    __scatterload
    __scatterload_rt2
    __scatterload_rt2_thumb_only
        0x00000280:    a00a        ..      ADR      r0,{pc}+0x2c ; 0x2ac
        0x00000282:    e8900c00    ....    LDM      r0,{r10,r11}
        0x00000286:    4482        .D      ADD      r10,r10,r0
        0x00000288:    4483        .D      ADD      r11,r11,r0
        0x0000028a:    f1aa0701    ....    SUB      r7,r10,#1
    __scatterload_null
        0x0000028e:    45da        .E      CMP      r10,r11
        0x00000290:    d101        ..      BNE      0x296 ; __scatterload_null + 8
        0x00000292:    f000f839    ..9.    BL       __rt_entry ; 0x308
        0x00000296:    f2af0e09    ....    ADR      lr,{pc}-7 ; 0x28f
        0x0000029a:    e8ba000f    ....    LDM      r10!,{r0-r3}
        0x0000029e:    f0130f01    ....    TST      r3,#1
        0x000002a2:    bf18        ..      IT       NE
        0x000002a4:    1afb        ..      SUBNE    r3,r7,r3
        0x000002a6:    f0430301    C...    ORR      r3,r3,#1
        0x000002aa:    4718        .G      BX       r3
    $d
        0x000002ac:    00000be0    ....    DCD    3040
        0x000002b0:    00000c00    ....    DCD    3072
    $t
    !!handler_copy
    __scatterload_copy
        0x000002b4:    3a10        .:      SUBS     r2,r2,#0x10
        0x000002b6:    bf24        $.      ITT      CS
        0x000002b8:    c878        x.      LDMCS    r0!,{r3-r6}
        0x000002ba:    c178        x.      STMCS    r1!,{r3-r6}
        0x000002bc:    d8fa        ..      BHI      __scatterload_copy ; 0x2b4
        0x000002be:    0752        R.      LSLS     r2,r2,#29
        0x000002c0:    bf24        $.      ITT      CS
        0x000002c2:    c830        0.      LDMCS    r0!,{r4,r5}
        0x000002c4:    c130        0.      STMCS    r1!,{r4,r5}
        0x000002c6:    bf44        D.      ITT      MI
        0x000002c8:    6804        .h      LDRMI    r4,[r0,#0]
        0x000002ca:    600c        .`      STRMI    r4,[r1,#0]
        0x000002cc:    4770        pG      BX       lr
        0x000002ce:    0000        ..      MOVS     r0,r0
    !!handler_zi
    __scatterload_zeroinit
        0x000002d0:    2300        .#      MOVS     r3,#0
        0x000002d2:    2400        .$      MOVS     r4,#0
        0x000002d4:    2500        .%      MOVS     r5,#0
        0x000002d6:    2600        .&      MOVS     r6,#0
        0x000002d8:    3a10        .:      SUBS     r2,r2,#0x10
        0x000002da:    bf28        (.      IT       CS
        0x000002dc:    c178        x.      STMCS    r1!,{r3-r6}
        0x000002de:    d8fb        ..      BHI      0x2d8 ; __scatterload_zeroinit + 8
        0x000002e0:    0752        R.      LSLS     r2,r2,#29
        0x000002e2:    bf28        (.      IT       CS
        0x000002e4:    c130        0.      STMCS    r1!,{r4,r5}
        0x000002e6:    bf48        H.      IT       MI
        0x000002e8:    600b        .`      STRMI    r3,[r1,#0]
        0x000002ea:    4770        pG      BX       lr
    .ARM.Collect$$_printf_percent$$00000009
    .ARM.Collect$$_printf_percent$$00000000
    _printf_d
    _printf_percent
        0x000002ec:    2964        d)      CMP      r1,#0x64
        0x000002ee:    f0008077    ..w.    BEQ.W    _printf_int_dec ; 0x3e0
    .ARM.Collect$$_printf_percent$$0000000C
    _printf_x
        0x000002f2:    2978        x)      CMP      r1,#0x78
        0x000002f4:    f00080b0    ....    BEQ.W    _printf_int_hex ; 0x458
    .ARM.Collect$$_printf_percent$$00000017
    _printf_percent_end
        0x000002f8:    2000        .       MOVS     r0,#0
        0x000002fa:    4770        pG      BX       lr
    .ARM.Collect$$libinit$$00000000
    __rt_lib_init
        0x000002fc:    b51f        ..      PUSH     {r0-r4,lr}
    .ARM.Collect$$libinit$$00000001
    __rt_lib_init_fp_1
        0x000002fe:    f000fd79    ..y.    BL       _fp_init ; 0xdf4
    .ARM.Collect$$libinit$$00000004
    .ARM.Collect$$libinit$$0000000A
    .ARM.Collect$$libinit$$0000000C
    .ARM.Collect$$libinit$$0000000E
    .ARM.Collect$$libinit$$00000011
    .ARM.Collect$$libinit$$00000013
    .ARM.Collect$$libinit$$00000015
    .ARM.Collect$$libinit$$00000017
    .ARM.Collect$$libinit$$00000019
    .ARM.Collect$$libinit$$0000001B
    .ARM.Collect$$libinit$$0000001D
    .ARM.Collect$$libinit$$0000001F
    .ARM.Collect$$libinit$$00000021
    .ARM.Collect$$libinit$$00000023
    .ARM.Collect$$libinit$$00000025
    .ARM.Collect$$libinit$$0000002C
    .ARM.Collect$$libinit$$0000002E
    .ARM.Collect$$libinit$$00000030
    .ARM.Collect$$libinit$$00000032
    .ARM.Collect$$libinit$$00000033
    __rt_lib_init_alloca_1
    __rt_lib_init_argv_1
    __rt_lib_init_atexit_1
    __rt_lib_init_clock_1
    __rt_lib_init_cpp_1
    __rt_lib_init_exceptions_1
    __rt_lib_init_fp_trap_1
    __rt_lib_init_getenv_1
    __rt_lib_init_heap_1
    __rt_lib_init_lc_collate_1
    __rt_lib_init_lc_ctype_1
    __rt_lib_init_lc_monetary_1
    __rt_lib_init_lc_numeric_1
    __rt_lib_init_lc_time_1
    __rt_lib_init_preinit_1
    __rt_lib_init_rand_1
    __rt_lib_init_return
    __rt_lib_init_signal_1
    __rt_lib_init_stdio_1
    __rt_lib_init_user_alloc_1
        0x00000302:    bd1f        ..      POP      {r0-r4,pc}
    .ARM.Collect$$libshutdown$$00000000
    __rt_lib_shutdown
        0x00000304:    b510        ..      PUSH     {r4,lr}
    .ARM.Collect$$libshutdown$$00000003
    .ARM.Collect$$libshutdown$$00000006
    .ARM.Collect$$libshutdown$$00000009
    .ARM.Collect$$libshutdown$$0000000B
    .ARM.Collect$$libshutdown$$0000000E
    .ARM.Collect$$libshutdown$$0000000F
    __rt_lib_shutdown_fp_trap_1
    __rt_lib_shutdown_heap_1
    __rt_lib_shutdown_return
    __rt_lib_shutdown_signal_1
    __rt_lib_shutdown_stdio_1
    __rt_lib_shutdown_user_alloc_1
        0x00000306:    bd10        ..      POP      {r4,pc}
    .ARM.Collect$$rtentry$$00000000
    .ARM.Collect$$rtentry$$00000002
    .ARM.Collect$$rtentry$$00000004
    __rt_entry
    __rt_entry_presh_1
    __rt_entry_sh
        0x00000308:    f000f9e0    ....    BL       __user_setup_stackheap ; 0x6cc
        0x0000030c:    4611        .F      MOV      r1,r2
    .ARM.Collect$$rtentry$$00000009
    .ARM.Collect$$rtentry$$0000000A
    __rt_entry_li
    __rt_entry_postsh_1
        0x0000030e:    f7fffff5    ....    BL       __rt_lib_init ; 0x2fc
    .ARM.Collect$$rtentry$$0000000C
    .ARM.Collect$$rtentry$$0000000D
    __rt_entry_main
    __rt_entry_postli_1
        0x00000312:    f000fca5    ....    BL       main ; 0xc60
        0x00000316:    f000f9fe    ....    BL       exit ; 0x716
    .ARM.Collect$$rtexit$$00000000
    __rt_exit
        0x0000031a:    b403        ..      PUSH     {r0,r1}
    .ARM.Collect$$rtexit$$00000002
    .ARM.Collect$$rtexit$$00000003
    __rt_exit_ls
    __rt_exit_prels_1
        0x0000031c:    f7fffff2    ....    BL       __rt_lib_shutdown ; 0x304
    .ARM.Collect$$rtexit$$00000004
    __rt_exit_exit
        0x00000320:    bc03        ..      POP      {r0,r1}
        0x00000322:    f000fa03    ....    BL       _sys_exit ; 0x72c
        0x00000326:    0000        ..      MOVS     r0,r0
    .emb_text
    $v0
    HardFault_Handler
        0x00000328:    2004        .       MOVS     r0,#4
        0x0000032a:    4671        qF      MOV      r1,lr
        0x0000032c:    4208        .B      TST      r0,r1
        0x0000032e:    d002        ..      BEQ      0x336 ; HardFault_Handler + 14
        0x00000330:    f3ef8009    ....    MRS      r0,PSP
        0x00000334:    e001        ..      B        0x33a ; HardFault_Handler + 18
        0x00000336:    f3ef8008    ....    MRS      r0,MSP
        0x0000033a:    4671        qF      MOV      r1,lr
        0x0000033c:    4a00        .J      LDR      r2,[pc,#0] ; [0x340] = 0x989
        0x0000033e:    4710        .G      BX       r2
    $d
        0x00000340:    00000989    ....    DCD    2441
    $t
    .text
    $v0
    Reset_Handler
        0x00000344:    4816        .H      LDR      r0,[pc,#88] ; [0x3a0] = 0x40000100
        0x00000346:    f04f0159    O.Y.    MOV      r1,#0x59
        0x0000034a:    6001        .`      STR      r1,[r0,#0]
        0x0000034c:    f04f0116    O...    MOV      r1,#0x16
        0x00000350:    6001        .`      STR      r1,[r0,#0]
        0x00000352:    f04f0188    O...    MOV      r1,#0x88
        0x00000356:    6001        .`      STR      r1,[r0,#0]
        0x00000358:    4a12        .J      LDR      r2,[pc,#72] ; [0x3a4] = 0x40000020
        0x0000035a:    6811        .h      LDR      r1,[r2,#0]
        0x0000035c:    2900        .)      CMP      r1,#0
        0x0000035e:    d104        ..      BNE      0x36a ; Reset_Handler + 38
        0x00000360:    4a11        .J      LDR      r2,[pc,#68] ; [0x3a8] = 0x4000c018
        0x00000362:    6811        .h      LDR      r1,[r2,#0]
        0x00000364:    f0410180    A...    ORR      r1,r1,#0x80
        0x00000368:    6011        .`      STR      r1,[r2,#0]
        0x0000036a:    4a10        .J      LDR      r2,[pc,#64] ; [0x3ac] = 0x40000024
        0x0000036c:    f64521a5    E..!    MOV      r1,#0x5aa5
        0x00000370:    6011        .`      STR      r1,[r2,#0]
        0x00000372:    2100        .!      MOVS     r1,#0
        0x00000374:    6001        .`      STR      r1,[r0,#0]
        0x00000376:    480e        .H      LDR      r0,[pc,#56] ; [0x3b0] = 0xb1d
        0x00000378:    4780        .G      BLX      r0
        0x0000037a:    480e        .H      LDR      r0,[pc,#56] ; [0x3b4] = 0x279
        0x0000037c:    4700        .G      BX       r0
    NMI_Handler
        0x0000037e:    e7fe        ..      B        NMI_Handler ; 0x37e
        0x00000380:    e7fe        ..      B        0x380 ; NMI_Handler + 2
    MemManage_Handler
        0x00000382:    e7fe        ..      B        MemManage_Handler ; 0x382
    BusFault_Handler
        0x00000384:    e7fe        ..      B        BusFault_Handler ; 0x384
    UsageFault_Handler
        0x00000386:    e7fe        ..      B        UsageFault_Handler ; 0x386
    SVC_Handler
        0x00000388:    e7fe        ..      B        SVC_Handler ; 0x388
    DebugMon_Handler
        0x0000038a:    e7fe        ..      B        DebugMon_Handler ; 0x38a
    PendSV_Handler
        0x0000038c:    e7fe        ..      B        PendSV_Handler ; 0x38c
    SysTick_Handler
        0x0000038e:    e7fe        ..      B        SysTick_Handler ; 0x38e
    Default_Handler
    ACMP_IRQHandler
    BOD_IRQHandler
    CAN0_IRQHandler
    CAN1_IRQHandler
    CAP_IRQHandler
    CLKF_IRQHandler
    CRC_IRQHandler
    CRYPTO_IRQHandler
    EADC0_IRQHandler
    EADC1_IRQHandler
    EADC2_IRQHandler
    EADC3_IRQHandler
    EINT0_IRQHandler
    EINT1_IRQHandler
    EINT2_IRQHandler
    EINT3_IRQHandler
    EINT4_IRQHandler
    EINT5_IRQHandler
    EINT6_IRQHandler
    EINT7_IRQHandler
    EMAC_RX_IRQHandler
    EMAC_TX_IRQHandler
    EPWM0BRK_IRQHandler
    EPWM0_IRQHandler
    EPWM1BRK_IRQHandler
    EPWM1_IRQHandler
    GPA_IRQHandler
    GPB_IRQHandler
    GPC_IRQHandler
    GPD_IRQHandler
    GPE_IRQHandler
    GPF_IRQHandler
    GPG_IRQHandler
    GPH_IRQHandler
    GPI_IRQHandler
    I2C0_IRQHandler
    I2C1_IRQHandler
    I2C2_IRQHandler
    I2C3_IRQHandler
    I2C4_IRQHandler
    I2S0_IRQHandler
    I2S1_IRQHandler
    ICAP0_IRQHandler
    ICAP1_IRQHandler
    IRC_IRQHandler
    OPA0_IRQHandler
    OPA1_IRQHandler
    PDMA_IRQHandler
    PS2D_IRQHandler
    PWM0CH0_IRQHandler
    PWM0CH1_IRQHandler
    PWM0CH2_IRQHandler
    PWM0CH3_IRQHandler
    PWM0CH4_IRQHandler
    PWM0CH5_IRQHandler
    PWM0_BRK_IRQHandler
    PWM1CH0_IRQHandler
    PWM1CH1_IRQHandler
    PWM1CH2_IRQHandler
    PWM1CH3_IRQHandler
    PWM1CH4_IRQHandler
    PWM1CH5_IRQHandler
    PWM1_BRK_IRQHandler
    PWRWU_IRQHandler
    QEI0_IRQHandler
    QEI1_IRQHandler
    RTC_IRQHandler
    SC0_IRQHandler
    SC1_IRQHandler
    SC2_IRQHandler
    SC3_IRQHandler
    SC4_IRQHandler
    SC5_IRQHandler
    SD_IRQHandler
    SPI0_IRQHandler
    SPI1_IRQHandler
    SPI2_IRQHandler
    SPI3_IRQHandler
    SRAMF_IRQHandler
    TAMPER_IRQHandler
    TMR0_IRQHandler
    TMR1_IRQHandler
    TMR2_IRQHandler
    TMR3_IRQHandler
    UART0_IRQHandler
    UART1_IRQHandler
    UART2_IRQHandler
    UART3_IRQHandler
    UART4_IRQHandler
    UART5_IRQHandler
    USBD_IRQHandler
    USBH_IRQHandler
    USB_OTG_IRQHandler
    WDT_IRQHandler
    WWDT_IRQHandler
        0x00000390:    e7fe        ..      B        Default_Handler ; 0x390
    $d
        0x00000392:    0000        ..      DCW    0
    $t
    __user_initial_stackheap
        0x00000394:    4808        .H      LDR      r0,[pc,#32] ; [0x3b8] = 0x20000090
        0x00000396:    4909        .I      LDR      r1,[pc,#36] ; [0x3bc] = 0x20000990
        0x00000398:    4a09        .J      LDR      r2,[pc,#36] ; [0x3c0] = 0x20000190
        0x0000039a:    4b0a        .K      LDR      r3,[pc,#40] ; [0x3c4] = 0x20000190
        0x0000039c:    4770        pG      BX       lr
    $d
        0x0000039e:    0000        ..      DCW    0
        0x000003a0:    40000100    ...@    DCD    1073742080
        0x000003a4:    40000020     ..@    DCD    1073741856
        0x000003a8:    4000c018    ...@    DCD    1073791000
        0x000003ac:    40000024    $..@    DCD    1073741860
        0x000003b0:    00000b1d    ....    DCD    2845
        0x000003b4:    00000279    y...    DCD    633
        0x000003b8:    20000090    ...     DCD    536871056
        0x000003bc:    20000990    ...     DCD    536873360
        0x000003c0:    20000190    ...     DCD    536871312
        0x000003c4:    20000190    ...     DCD    536871312
    $t
    .text
    __2printf
        0x000003c8:    b40f        ..      PUSH     {r0-r3}
        0x000003ca:    4904        .I      LDR      r1,[pc,#16] ; [0x3dc] = 0x20000028
        0x000003cc:    b510        ..      PUSH     {r4,lr}
        0x000003ce:    aa03        ..      ADD      r2,sp,#0xc
        0x000003d0:    9802        ..      LDR      r0,[sp,#8]
        0x000003d2:    f000f951    ..Q.    BL       _printf_char_file ; 0x678
        0x000003d6:    bc10        ..      POP      {r4}
        0x000003d8:    f85dfb14    ]...    LDR      pc,[sp],#0x14
    $d
        0x000003dc:    20000028    (..     DCD    536870952
    $t
    .text
    _printf_int_dec
        0x000003e0:    e92d41f0    -..A    PUSH     {r4-r8,lr}
        0x000003e4:    4606        .F      MOV      r6,r0
        0x000003e6:    2400        .$      MOVS     r4,#0
        0x000003e8:    6810        .h      LDR      r0,[r2,#0]
        0x000003ea:    2975        u)      CMP      r1,#0x75
        0x000003ec:    4631        1F      MOV      r1,r6
        0x000003ee:    a516        ..      ADR      r5,{pc}+0x5a ; 0x448
        0x000003f0:    d010        ..      BEQ      0x414 ; _printf_int_dec + 52
        0x000003f2:    f3af8000    ....    NOP.W    
        0x000003f6:    2800        .(      CMP      r0,#0
        0x000003f8:    da02        ..      BGE      0x400 ; _printf_int_dec + 32
        0x000003fa:    4240        @B      RSBS     r0,r0,#0
        0x000003fc:    a513        ..      ADR      r5,{pc}+0x50 ; 0x44c
        0x000003fe:    e007        ..      B        0x410 ; _printf_int_dec + 48
        0x00000400:    6831        1h      LDR      r1,[r6,#0]
        0x00000402:    078a        ..      LSLS     r2,r1,#30
        0x00000404:    d501        ..      BPL      0x40a ; _printf_int_dec + 42
        0x00000406:    a512        ..      ADR      r5,{pc}+0x4a ; 0x450
        0x00000408:    e002        ..      B        0x410 ; _printf_int_dec + 48
        0x0000040a:    0749        I.      LSLS     r1,r1,#29
        0x0000040c:    d504        ..      BPL      0x418 ; _printf_int_dec + 56
        0x0000040e:    a511        ..      ADR      r5,{pc}+0x46 ; 0x454
        0x00000410:    2401        .$      MOVS     r4,#1
        0x00000412:    e001        ..      B        0x418 ; _printf_int_dec + 56
        0x00000414:    f3af8000    ....    NOP.W    
        0x00000418:    2100        .!      MOVS     r1,#0
        0x0000041a:    220a        ."      MOVS     r2,#0xa
        0x0000041c:    f1060724    ..$.    ADD      r7,r6,#0x24
        0x00000420:    e009        ..      B        0x436 ; _printf_int_dec + 86
        0x00000422:    fbb0fcf2    ....    UDIV     r12,r0,r2
        0x00000426:    fbb0f3f2    ....    UDIV     r3,r0,r2
        0x0000042a:    fb02001c    ....    MLS      r0,r2,r12,r0
        0x0000042e:    3030        00      ADDS     r0,r0,#0x30
        0x00000430:    5478        xT      STRB     r0,[r7,r1]
        0x00000432:    4618        .F      MOV      r0,r3
        0x00000434:    1c49        I.      ADDS     r1,r1,#1
        0x00000436:    2800        .(      CMP      r0,#0
        0x00000438:    d1f3        ..      BNE      0x422 ; _printf_int_dec + 66
        0x0000043a:    4623        #F      MOV      r3,r4
        0x0000043c:    462a        *F      MOV      r2,r5
        0x0000043e:    4630        0F      MOV      r0,r6
        0x00000440:    e8bd41f0    ...A    POP      {r4-r8,lr}
        0x00000444:    f000b8be    ....    B.W      _printf_int_common ; 0x5c4
    $d
        0x00000448:    00000000    ....    DCD    0
        0x0000044c:    0000002d    -...    DCD    45
        0x00000450:    0000002b    +...    DCD    43
        0x00000454:    00000020     ...    DCD    32
    $t
    .text
    _printf_int_hex
    _printf_longlong_hex
        0x00000458:    b570        p.      PUSH     {r4-r6,lr}
        0x0000045a:    4604        .F      MOV      r4,r0
        0x0000045c:    460d        .F      MOV      r5,r1
        0x0000045e:    4621        !F      MOV      r1,r4
        0x00000460:    6810        .h      LDR      r0,[r2,#0]
        0x00000462:    f3af8000    ....    NOP.W    
        0x00000466:    8821        !.      LDRH     r1,[r4,#0]
        0x00000468:    0509        ..      LSLS     r1,r1,#20
        0x0000046a:    d502        ..      BPL      0x472 ; _printf_int_hex + 26
        0x0000046c:    4a0f        .J      LDR      r2,[pc,#60] ; [0x4ac] = 0x9ae
        0x0000046e:    447a        zD      ADD      r2,r2,pc
        0x00000470:    e002        ..      B        0x478 ; _printf_int_hex + 32
        0x00000472:    4a0e        .J      LDR      r2,[pc,#56] ; [0x4ac] = 0x9ae
        0x00000474:    447a        zD      ADD      r2,r2,pc
        0x00000476:    320e        .2      ADDS     r2,r2,#0xe
        0x00000478:    2100        .!      MOVS     r1,#0
        0x0000047a:    f1040324    ..$.    ADD      r3,r4,#0x24
        0x0000047e:    e005        ..      B        0x48c ; _printf_int_hex + 52
        0x00000480:    f000060f    ....    AND      r6,r0,#0xf
        0x00000484:    0900        ..      LSRS     r0,r0,#4
        0x00000486:    5d96        .]      LDRB     r6,[r2,r6]
        0x00000488:    545e        ^T      STRB     r6,[r3,r1]
        0x0000048a:    1c49        I.      ADDS     r1,r1,#1
        0x0000048c:    2800        .(      CMP      r0,#0
        0x0000048e:    d1f7        ..      BNE      0x480 ; _printf_int_hex + 40
        0x00000490:    7820         x      LDRB     r0,[r4,#0]
        0x00000492:    2300        .#      MOVS     r3,#0
        0x00000494:    0700        ..      LSLS     r0,r0,#28
        0x00000496:    d504        ..      BPL      0x4a2 ; _printf_int_hex + 74
        0x00000498:    2d70        p-      CMP      r5,#0x70
        0x0000049a:    d002        ..      BEQ      0x4a2 ; _printf_int_hex + 74
        0x0000049c:    b109        ..      CBZ      r1,0x4a2 ; _printf_int_hex + 74
        0x0000049e:    2302        .#      MOVS     r3,#2
        0x000004a0:    3211        .2      ADDS     r2,r2,#0x11
        0x000004a2:    4620         F      MOV      r0,r4
        0x000004a4:    e8bd4070    ..p@    POP      {r4-r6,lr}
        0x000004a8:    f000b88c    ....    B.W      _printf_int_common ; 0x5c4
    $d
        0x000004ac:    000009ae    ....    DCD    2478
    $t
    .text
    __printf
        0x000004b0:    e92d47f0    -..G    PUSH     {r4-r10,lr}
        0x000004b4:    f04f0a00    O...    MOV      r10,#0
        0x000004b8:    4689        .F      MOV      r9,r1
        0x000004ba:    4604        .F      MOV      r4,r0
        0x000004bc:    f8c0a020    .. .    STR      r10,[r0,#0x20]
        0x000004c0:    4620         F      MOV      r0,r4
        0x000004c2:    68e1        .h      LDR      r1,[r4,#0xc]
        0x000004c4:    4788        .G      BLX      r1
        0x000004c6:    2800        .(      CMP      r0,#0
        0x000004c8:    d076        v.      BEQ      0x5b8 ; __printf + 264
        0x000004ca:    2825        %(      CMP      r0,#0x25
        0x000004cc:    d006        ..      BEQ      0x4dc ; __printf + 44
        0x000004ce:    e9d42101    ...!    LDRD     r2,r1,[r4,#4]
        0x000004d2:    4790        .G      BLX      r2
        0x000004d4:    6a20         j      LDR      r0,[r4,#0x20]
        0x000004d6:    1c40        @.      ADDS     r0,r0,#1
        0x000004d8:    6220         b      STR      r0,[r4,#0x20]
        0x000004da:    e7f1        ..      B        0x4c0 ; __printf + 16
        0x000004dc:    68e1        .h      LDR      r1,[r4,#0xc]
        0x000004de:    4620         F      MOV      r0,r4
        0x000004e0:    2500        .%      MOVS     r5,#0
        0x000004e2:    4788        .G      BLX      r1
        0x000004e4:    f8c4a01c    ....    STR      r10,[r4,#0x1c]
        0x000004e8:    4606        .F      MOV      r6,r0
        0x000004ea:    2700        .'      MOVS     r7,#0
        0x000004ec:    f8c4a018    ....    STR      r10,[r4,#0x18]
        0x000004f0:    2e2a        *.      CMP      r6,#0x2a
        0x000004f2:    d009        ..      BEQ      0x508 ; __printf + 88
        0x000004f4:    4630        0F      MOV      r0,r6
        0x000004f6:    f000fba3    ....    BL       _is_digit ; 0xc40
        0x000004fa:    b338        8.      CBZ      r0,0x54c ; __printf + 156
        0x000004fc:    eb040887    ....    ADD      r8,r4,r7,LSL #2
        0x00000500:    3e30        0>      SUBS     r6,r6,#0x30
        0x00000502:    f8c86018    ...`    STR      r6,[r8,#0x18]
        0x00000506:    e019        ..      B        0x53c ; __printf + 140
        0x00000508:    f8591b04    Y...    LDR      r1,[r9],#4
        0x0000050c:    4620         F      MOV      r0,r4
        0x0000050e:    eb040287    ....    ADD      r2,r4,r7,LSL #2
        0x00000512:    6191        .a      STR      r1,[r2,#0x18]
        0x00000514:    68e1        .h      LDR      r1,[r4,#0xc]
        0x00000516:    4788        .G      BLX      r1
        0x00000518:    2f01        ./      CMP      r7,#1
        0x0000051a:    4606        .F      MOV      r6,r0
        0x0000051c:    d118        ..      BNE      0x550 ; __printf + 160
        0x0000051e:    69e0        .i      LDR      r0,[r4,#0x1c]
        0x00000520:    2800        .(      CMP      r0,#0
        0x00000522:    da20         .      BGE      0x566 ; __printf + 182
        0x00000524:    f0250520    %. .    BIC      r5,r5,#0x20
        0x00000528:    e01d        ..      B        0x566 ; __printf + 182
        0x0000052a:    f8d80018    ....    LDR      r0,[r8,#0x18]
        0x0000052e:    eb000080    ....    ADD      r0,r0,r0,LSL #2
        0x00000532:    eb060040    ..@.    ADD      r0,r6,r0,LSL #1
        0x00000536:    3830        08      SUBS     r0,r0,#0x30
        0x00000538:    f8c80018    ....    STR      r0,[r8,#0x18]
        0x0000053c:    4620         F      MOV      r0,r4
        0x0000053e:    68e1        .h      LDR      r1,[r4,#0xc]
        0x00000540:    4788        .G      BLX      r1
        0x00000542:    4606        .F      MOV      r6,r0
        0x00000544:    f000fb7c    ..|.    BL       _is_digit ; 0xc40
        0x00000548:    2800        .(      CMP      r0,#0
        0x0000054a:    d1ee        ..      BNE      0x52a ; __printf + 122
        0x0000054c:    2f01        ./      CMP      r7,#1
        0x0000054e:    d00a        ..      BEQ      0x566 ; __printf + 182
        0x00000550:    2e2e        ..      CMP      r6,#0x2e
        0x00000552:    d108        ..      BNE      0x566 ; __printf + 182
        0x00000554:    4620         F      MOV      r0,r4
        0x00000556:    68e1        .h      LDR      r1,[r4,#0xc]
        0x00000558:    4788        .G      BLX      r1
        0x0000055a:    1c7f        ..      ADDS     r7,r7,#1
        0x0000055c:    4606        .F      MOV      r6,r0
        0x0000055e:    2f02        ./      CMP      r7,#2
        0x00000560:    f0450520    E. .    ORR      r5,r5,#0x20
        0x00000564:    dbc4        ..      BLT      0x4f0 ; __printf + 64
        0x00000566:    69a0        .i      LDR      r0,[r4,#0x18]
        0x00000568:    2800        .(      CMP      r0,#0
        0x0000056a:    da03        ..      BGE      0x574 ; __printf + 196
        0x0000056c:    4240        @B      RSBS     r0,r0,#0
        0x0000056e:    f0450501    E...    ORR      r5,r5,#1
        0x00000572:    61a0        .a      STR      r0,[r4,#0x18]
        0x00000574:    07e8        ..      LSLS     r0,r5,#31
        0x00000576:    d001        ..      BEQ      0x57c ; __printf + 204
        0x00000578:    f0250510    %...    BIC      r5,r5,#0x10
        0x0000057c:    b1b6        ..      CBZ      r6,0x5ac ; __printf + 252
        0x0000057e:    f1a60041    ..A.    SUB      r0,r6,#0x41
        0x00000582:    2819        .(      CMP      r0,#0x19
        0x00000584:    d802        ..      BHI      0x58c ; __printf + 220
        0x00000586:    3620         6      ADDS     r6,r6,#0x20
        0x00000588:    f4456500    E..e    ORR      r5,r5,#0x800
        0x0000058c:    464a        JF      MOV      r2,r9
        0x0000058e:    4631        1F      MOV      r1,r6
        0x00000590:    4620         F      MOV      r0,r4
        0x00000592:    6025        %`      STR      r5,[r4,#0]
        0x00000594:    464d        MF      MOV      r5,r9
        0x00000596:    f7fffea9    ....    BL       _printf_d ; 0x2ec
        0x0000059a:    b158        X.      CBZ      r0,0x5b4 ; __printf + 260
        0x0000059c:    2801        .(      CMP      r0,#1
        0x0000059e:    d006        ..      BEQ      0x5ae ; __printf + 254
        0x000005a0:    1ded        ..      ADDS     r5,r5,#7
        0x000005a2:    f0250007    %...    BIC      r0,r5,#7
        0x000005a6:    f1000908    ....    ADD      r9,r0,#8
        0x000005aa:    e789        ..      B        0x4c0 ; __printf + 16
        0x000005ac:    e004        ..      B        0x5b8 ; __printf + 264
        0x000005ae:    f1050904    ....    ADD      r9,r5,#4
        0x000005b2:    e785        ..      B        0x4c0 ; __printf + 16
        0x000005b4:    4630        0F      MOV      r0,r6
        0x000005b6:    e78a        ..      B        0x4ce ; __printf + 30
        0x000005b8:    6a20         j      LDR      r0,[r4,#0x20]
        0x000005ba:    e8bd87f0    ....    POP      {r4-r10,pc}
    .text
    __use_two_region_memory
        0x000005be:    4770        pG      BX       lr
    __rt_heap_escrow$2region
        0x000005c0:    4770        pG      BX       lr
    __rt_heap_expand$2region
        0x000005c2:    4770        pG      BX       lr
    .text
    _printf_int_common
        0x000005c4:    e92d47f0    -..G    PUSH     {r4-r10,lr}
        0x000005c8:    460d        .F      MOV      r5,r1
        0x000005ca:    4699        .F      MOV      r9,r3
        0x000005cc:    4692        .F      MOV      r10,r2
        0x000005ce:    4604        .F      MOV      r4,r0
        0x000005d0:    f1000824    ..$.    ADD      r8,r0,#0x24
        0x000005d4:    6801        .h      LDR      r1,[r0,#0]
        0x000005d6:    0688        ..      LSLS     r0,r1,#26
        0x000005d8:    d504        ..      BPL      0x5e4 ; _printf_int_common + 32
        0x000005da:    69e0        .i      LDR      r0,[r4,#0x1c]
        0x000005dc:    f0210110    !...    BIC      r1,r1,#0x10
        0x000005e0:    6021        !`      STR      r1,[r4,#0]
        0x000005e2:    e000        ..      B        0x5e6 ; _printf_int_common + 34
        0x000005e4:    2001        .       MOVS     r0,#1
        0x000005e6:    42a8        .B      CMP      r0,r5
        0x000005e8:    dd01        ..      BLE      0x5ee ; _printf_int_common + 42
        0x000005ea:    1b47        G.      SUBS     r7,r0,r5
        0x000005ec:    e000        ..      B        0x5f0 ; _printf_int_common + 44
        0x000005ee:    2700        .'      MOVS     r7,#0
        0x000005f0:    69a1        .i      LDR      r1,[r4,#0x18]
        0x000005f2:    197a        z.      ADDS     r2,r7,r5
        0x000005f4:    eb020009    ....    ADD      r0,r2,r9
        0x000005f8:    1a08        ..      SUBS     r0,r1,r0
        0x000005fa:    61a0        .a      STR      r0,[r4,#0x18]
        0x000005fc:    7820         x      LDRB     r0,[r4,#0]
        0x000005fe:    06c0        ..      LSLS     r0,r0,#27
        0x00000600:    d402        ..      BMI      0x608 ; _printf_int_common + 68
        0x00000602:    4620         F      MOV      r0,r4
        0x00000604:    f3af8000    ....    NOP.W    
        0x00000608:    2600        .&      MOVS     r6,#0
        0x0000060a:    e008        ..      B        0x61e ; _printf_int_common + 90
        0x0000060c:    e9d42101    ...!    LDRD     r2,r1,[r4,#4]
        0x00000610:    f81a0006    ....    LDRB     r0,[r10,r6]
        0x00000614:    4790        .G      BLX      r2
        0x00000616:    6a20         j      LDR      r0,[r4,#0x20]
        0x00000618:    1c40        @.      ADDS     r0,r0,#1
        0x0000061a:    1c76        v.      ADDS     r6,r6,#1
        0x0000061c:    6220         b      STR      r0,[r4,#0x20]
        0x0000061e:    454e        NE      CMP      r6,r9
        0x00000620:    dbf4        ..      BLT      0x60c ; _printf_int_common + 72
        0x00000622:    7820         x      LDRB     r0,[r4,#0]
        0x00000624:    06c0        ..      LSLS     r0,r0,#27
        0x00000626:    d50a        ..      BPL      0x63e ; _printf_int_common + 122
        0x00000628:    4620         F      MOV      r0,r4
        0x0000062a:    f3af8000    ....    NOP.W    
        0x0000062e:    e006        ..      B        0x63e ; _printf_int_common + 122
        0x00000630:    e9d42101    ...!    LDRD     r2,r1,[r4,#4]
        0x00000634:    2030        0       MOVS     r0,#0x30
        0x00000636:    4790        .G      BLX      r2
        0x00000638:    6a20         j      LDR      r0,[r4,#0x20]
        0x0000063a:    1c40        @.      ADDS     r0,r0,#1
        0x0000063c:    6220         b      STR      r0,[r4,#0x20]
        0x0000063e:    1e38        8.      SUBS     r0,r7,#0
        0x00000640:    f1a70701    ....    SUB      r7,r7,#1
        0x00000644:    dcf4        ..      BGT      0x630 ; _printf_int_common + 108
        0x00000646:    e007        ..      B        0x658 ; _printf_int_common + 148
        0x00000648:    e9d42101    ...!    LDRD     r2,r1,[r4,#4]
        0x0000064c:    f8180005    ....    LDRB     r0,[r8,r5]
        0x00000650:    4790        .G      BLX      r2
        0x00000652:    6a20         j      LDR      r0,[r4,#0x20]
        0x00000654:    1c40        @.      ADDS     r0,r0,#1
        0x00000656:    6220         b      STR      r0,[r4,#0x20]
        0x00000658:    1e28        (.      SUBS     r0,r5,#0
        0x0000065a:    f1a50501    ....    SUB      r5,r5,#1
        0x0000065e:    dcf3        ..      BGT      0x648 ; _printf_int_common + 132
        0x00000660:    4620         F      MOV      r0,r4
        0x00000662:    f3af8000    ....    NOP.W    
        0x00000666:    7820         x      LDRB     r0,[r4,#0]
        0x00000668:    0600        ..      LSLS     r0,r0,#24
        0x0000066a:    d502        ..      BPL      0x672 ; _printf_int_common + 174
        0x0000066c:    2002        .       MOVS     r0,#2
        0x0000066e:    e8bd87f0    ....    POP      {r4-r10,pc}
        0x00000672:    2001        .       MOVS     r0,#1
        0x00000674:    e7fb        ..      B        0x66e ; _printf_int_common + 170
        0x00000676:    0000        ..      MOVS     r0,r0
    .text
    _printf_char_file
        0x00000678:    4b07        .K      LDR      r3,[pc,#28] ; [0x698] = 0x5d3
        0x0000067a:    b570        p.      PUSH     {r4-r6,lr}
        0x0000067c:    460d        .F      MOV      r5,r1
        0x0000067e:    447b        {D      ADD      r3,r3,pc
        0x00000680:    f000f811    ....    BL       _printf_char_common ; 0x6a6
        0x00000684:    4604        .F      MOV      r4,r0
        0x00000686:    4628        (F      MOV      r0,r5
        0x00000688:    f000fae1    ....    BL       ferror ; 0xc4e
        0x0000068c:    b110        ..      CBZ      r0,0x694 ; _printf_char_file + 28
        0x0000068e:    f04f30ff    O..0    MOV      r0,#0xffffffff
        0x00000692:    bd70        p.      POP      {r4-r6,pc}
        0x00000694:    4620         F      MOV      r0,r4
        0x00000696:    bd70        p.      POP      {r4-r6,pc}
    $d
        0x00000698:    000005d3    ....    DCD    1491
    $t
    .text
    _printf_input_char
        0x0000069c:    6901        .i      LDR      r1,[r0,#0x10]
        0x0000069e:    1c4a        J.      ADDS     r2,r1,#1
        0x000006a0:    6102        .a      STR      r2,[r0,#0x10]
        0x000006a2:    7808        .x      LDRB     r0,[r1,#0]
        0x000006a4:    4770        pG      BX       lr
    _printf_char_common
        0x000006a6:    b500        ..      PUSH     {lr}
        0x000006a8:    b08f        ..      SUB      sp,sp,#0x3c
        0x000006aa:    e9cd3101    ...1    STRD     r3,r1,[sp,#4]
        0x000006ae:    2100        .!      MOVS     r1,#0
        0x000006b0:    9105        ..      STR      r1,[sp,#0x14]
        0x000006b2:    4905        .I      LDR      r1,[pc,#20] ; [0x6c8] = 0xffffffe5
        0x000006b4:    4479        yD      ADD      r1,r1,pc
        0x000006b6:    e9cd1003    ....    STRD     r1,r0,[sp,#0xc]
        0x000006ba:    4611        .F      MOV      r1,r2
        0x000006bc:    4668        hF      MOV      r0,sp
        0x000006be:    f7fffef7    ....    BL       __printf ; 0x4b0
        0x000006c2:    b00f        ..      ADD      sp,sp,#0x3c
        0x000006c4:    bd00        ..      POP      {pc}
    $d
        0x000006c6:    0000        ..      DCW    0
        0x000006c8:    ffffffe5    ....    DCD    4294967269
    $t
    .text
    __user_setup_stackheap
        0x000006cc:    4675        uF      MOV      r5,lr
        0x000006ce:    f000f829    ..).    BL       __user_libspace ; 0x724
        0x000006d2:    46ae        .F      MOV      lr,r5
        0x000006d4:    0005        ..      MOVS     r5,r0
        0x000006d6:    4669        iF      MOV      r1,sp
        0x000006d8:    4653        SF      MOV      r3,r10
        0x000006da:    f0200007     ...    BIC      r0,r0,#7
        0x000006de:    4685        .F      MOV      sp,r0
        0x000006e0:    b018        ..      ADD      sp,sp,#0x60
        0x000006e2:    b520         .      PUSH     {r5,lr}
        0x000006e4:    f7fffe56    ..V.    BL       __user_initial_stackheap ; 0x394
        0x000006e8:    e8bd4020    .. @    POP      {r5,lr}
        0x000006ec:    f04f0600    O...    MOV      r6,#0
        0x000006f0:    f04f0700    O...    MOV      r7,#0
        0x000006f4:    f04f0800    O...    MOV      r8,#0
        0x000006f8:    f04f0b00    O...    MOV      r11,#0
        0x000006fc:    f0210107    !...    BIC      r1,r1,#7
        0x00000700:    46ac        .F      MOV      r12,r5
        0x00000702:    e8ac09c0    ....    STM      r12!,{r6-r8,r11}
        0x00000706:    e8ac09c0    ....    STM      r12!,{r6-r8,r11}
        0x0000070a:    e8ac09c0    ....    STM      r12!,{r6-r8,r11}
        0x0000070e:    e8ac09c0    ....    STM      r12!,{r6-r8,r11}
        0x00000712:    468d        .F      MOV      sp,r1
        0x00000714:    4770        pG      BX       lr
    .text
    exit
        0x00000716:    4604        .F      MOV      r4,r0
        0x00000718:    f3af8000    ....    NOP.W    
        0x0000071c:    4620         F      MOV      r0,r4
        0x0000071e:    f7fffdfc    ....    BL       __rt_exit ; 0x31a
        0x00000722:    0000        ..      MOVS     r0,r0
    .text
    __user_libspace
    __user_perproc_libspace
    __user_perthread_libspace
        0x00000724:    4800        .H      LDR      r0,[pc,#0] ; [0x728] = 0x2000002c
        0x00000726:    4770        pG      BX       lr
    $d
        0x00000728:    2000002c    ,..     DCD    536870956
    $t
    .text
    _sys_exit
        0x0000072c:    4901        .I      LDR      r1,[pc,#4] ; [0x734] = 0x20026
        0x0000072e:    2018        .       MOVS     r0,#0x18
        0x00000730:    beab        ..      BKPT     #0xab
        0x00000732:    e7fe        ..      B        0x732 ; _sys_exit + 6
    $d
        0x00000734:    00020026    &...    DCD    131110
    $t
    .text
    __I$use$semihosting
    __use_no_semihosting_swi
        0x00000738:    4770        pG      BX       lr
    .text
    __semihosting_library_function
        0x0000073a:    0000        ..      MOVS     r0,r0
    i.ADC_EnableInt
    ADC_EnableInt
        0x0000073c:    4809        .H      LDR      r0,[pc,#36] ; [0x764] = 0x40043000
        0x0000073e:    07ca        ..      LSLS     r2,r1,#31
        0x00000740:    d003        ..      BEQ      0x74a ; ADC_EnableInt + 14
        0x00000742:    6c02        .l      LDR      r2,[r0,#0x40]
        0x00000744:    f0420202    B...    ORR      r2,r2,#2
        0x00000748:    6402        .d      STR      r2,[r0,#0x40]
        0x0000074a:    078a        ..      LSLS     r2,r1,#30
        0x0000074c:    d503        ..      BPL      0x756 ; ADC_EnableInt + 26
        0x0000074e:    6c82        .l      LDR      r2,[r0,#0x48]
        0x00000750:    f0420202    B...    ORR      r2,r2,#2
        0x00000754:    6482        .d      STR      r2,[r0,#0x48]
        0x00000756:    0749        I.      LSLS     r1,r1,#29
        0x00000758:    d503        ..      BPL      0x762 ; ADC_EnableInt + 38
        0x0000075a:    6cc1        .l      LDR      r1,[r0,#0x4c]
        0x0000075c:    f0410102    A...    ORR      r1,r1,#2
        0x00000760:    64c1        .d      STR      r1,[r0,#0x4c]
        0x00000762:    4770        pG      BX       lr
    $d
        0x00000764:    40043000    .0.@    DCD    1074016256
    $t
    i.ADC_IRQHandler
    ADC_IRQHandler
        0x00000768:    b570        p.      PUSH     {r4-r6,lr}
        0x0000076a:    4c0d        .L      LDR      r4,[pc,#52] ; [0x7a0] = 0x40043000
        0x0000076c:    6d20         m      LDR      r0,[r4,#0x50]
        0x0000076e:    f0000501    ....    AND      r5,r0,#1
        0x00000772:    07e8        ..      LSLS     r0,r5,#31
        0x00000774:    d00e        ..      BEQ      0x794 ; ADC_IRQHandler + 44
        0x00000776:    6820         h      LDR      r0,[r4,#0]
        0x00000778:    b281        ..      UXTH     r1,r0
        0x0000077a:    a00a        ..      ADR      r0,{pc}+0x2a ; 0x7a4
        0x0000077c:    f7fffe24    ..$.    BL       __2printf ; 0x3c8
        0x00000780:    6860        `h      LDR      r0,[r4,#4]
        0x00000782:    b281        ..      UXTH     r1,r0
        0x00000784:    a011        ..      ADR      r0,{pc}+0x48 ; 0x7cc
        0x00000786:    f7fffe1f    ....    BL       __2printf ; 0x3c8
        0x0000078a:    68a0        .h      LDR      r0,[r4,#8]
        0x0000078c:    b281        ..      UXTH     r1,r0
        0x0000078e:    a019        ..      ADR      r0,{pc}+0x66 ; 0x7f4
        0x00000790:    f7fffe1a    ....    BL       __2printf ; 0x3c8
        0x00000794:    6d20         m      LDR      r0,[r4,#0x50]
        0x00000796:    f0200007     ...    BIC      r0,r0,#7
        0x0000079a:    4328        (C      ORRS     r0,r0,r5
        0x0000079c:    6520         e      STR      r0,[r4,#0x50]
        0x0000079e:    bd70        p.      POP      {r4-r6,pc}
    $d
        0x000007a0:    40043000    .0.@    DCD    1074016256
        0x000007a4:    6e616843    Chan    DCD    1851877443
        0x000007a8:    206c656e    nel     DCD    543974766
        0x000007ac:    6f632030    0 co    DCD    1868767280
        0x000007b0:    7265766e    nver    DCD    1919252078
        0x000007b4:    6e6f6973    sion    DCD    1852795251
        0x000007b8:    73657220     res    DCD    1936028192
        0x000007bc:    20746c75    ult     DCD    544500853
        0x000007c0:    30207369    is 0    DCD    807433065
        0x000007c4:    0a782578    x%x.    DCD    175646072
        0x000007c8:    00000000    ....    DCD    0
        0x000007cc:    6e616843    Chan    DCD    1851877443
        0x000007d0:    206c656e    nel     DCD    543974766
        0x000007d4:    6f632031    1 co    DCD    1868767281
        0x000007d8:    7265766e    nver    DCD    1919252078
        0x000007dc:    6e6f6973    sion    DCD    1852795251
        0x000007e0:    73657220     res    DCD    1936028192
        0x000007e4:    20746c75    ult     DCD    544500853
        0x000007e8:    30207369    is 0    DCD    807433065
        0x000007ec:    0a782578    x%x.    DCD    175646072
        0x000007f0:    00000000    ....    DCD    0
        0x000007f4:    6e616843    Chan    DCD    1851877443
        0x000007f8:    206c656e    nel     DCD    543974766
        0x000007fc:    6f632032    2 co    DCD    1868767282
        0x00000800:    7265766e    nver    DCD    1919252078
        0x00000804:    6e6f6973    sion    DCD    1852795251
        0x00000808:    73657220     res    DCD    1936028192
        0x0000080c:    20746c75    ult     DCD    544500853
        0x00000810:    30207369    is 0    DCD    807433065
        0x00000814:    0a782578    x%x.    DCD    175646072
        0x00000818:    00000000    ....    DCD    0
    $t
    i.ADC_Open
    ADC_Open
        0x0000081c:    4806        .H      LDR      r0,[pc,#24] ; [0x838] = 0x40043000
        0x0000081e:    b510        ..      PUSH     {r4,lr}
        0x00000820:    6c04        .l      LDR      r4,[r0,#0x40]
        0x00000822:    430c        .C      ORRS     r4,r4,r1
        0x00000824:    6404        .d      STR      r4,[r0,#0x40]
        0x00000826:    6c01        .l      LDR      r1,[r0,#0x40]
        0x00000828:    4311        .C      ORRS     r1,r1,r2
        0x0000082a:    6401        .d      STR      r1,[r0,#0x40]
        0x0000082c:    6c41        Al      LDR      r1,[r0,#0x44]
        0x0000082e:    4a03        .J      LDR      r2,[pc,#12] ; [0x83c] = 0xfffcf000
        0x00000830:    4011        .@      ANDS     r1,r1,r2
        0x00000832:    4319        .C      ORRS     r1,r1,r3
        0x00000834:    6441        Ad      STR      r1,[r0,#0x44]
        0x00000836:    bd10        ..      POP      {r4,pc}
    $d
        0x00000838:    40043000    .0.@    DCD    1074016256
        0x0000083c:    fffcf000    ....    DCD    4294766592
    $t
    i.CLK_EnableModuleClock
    CLK_EnableModuleClock
        0x00000840:    0f81        ..      LSRS     r1,r0,#30
        0x00000842:    0089        ..      LSLS     r1,r1,#2
        0x00000844:    f1014180    ...A    ADD      r1,r1,#0x40000000
        0x00000848:    f8d12204    ..."    LDR      r2,[r1,#0x204]
        0x0000084c:    f000031f    ....    AND      r3,r0,#0x1f
        0x00000850:    2001        .       MOVS     r0,#1
        0x00000852:    4098        .@      LSLS     r0,r0,r3
        0x00000854:    4302        .C      ORRS     r2,r2,r0
        0x00000856:    f8c12204    ..."    STR      r2,[r1,#0x204]
        0x0000085a:    4770        pG      BX       lr
    i.CLK_EnableXtalRC
    CLK_EnableXtalRC
        0x0000085c:    f04f4180    O..A    MOV      r1,#0x40000000
        0x00000860:    f8d12200    ..."    LDR      r2,[r1,#0x200]
        0x00000864:    4302        .C      ORRS     r2,r2,r0
        0x00000866:    f8c12200    ..."    STR      r2,[r1,#0x200]
        0x0000086a:    4770        pG      BX       lr
    i.CLK_GetPLLClockFreq
    CLK_GetPLLClockFreq
        0x0000086c:    f04f4080    O..@    MOV      r0,#0x40000000
        0x00000870:    f8d01240    ..@.    LDR      r1,[r0,#0x240]
        0x00000874:    02c8        ..      LSLS     r0,r1,#11
        0x00000876:    d501        ..      BPL      0x87c ; CLK_GetPLLClockFreq + 16
        0x00000878:    2000        .       MOVS     r0,#0
        0x0000087a:    4770        pG      BX       lr
        0x0000087c:    0308        ..      LSLS     r0,r1,#12
        0x0000087e:    d501        ..      BPL      0x884 ; CLK_GetPLLClockFreq + 24
        0x00000880:    4a0e        .J      LDR      r2,[pc,#56] ; [0x8bc] = 0x1518000
        0x00000882:    e000        ..      B        0x886 ; CLK_GetPLLClockFreq + 26
        0x00000884:    4a0e        .J      LDR      r2,[pc,#56] ; [0x8c0] = 0xb71b00
        0x00000886:    f3c13081    ...0    UBFX     r0,r1,#14,#2
        0x0000088a:    b130        0.      CBZ      r0,0x89a ; CLK_GetPLLClockFreq + 46
        0x0000088c:    2801        .(      CMP      r0,#1
        0x0000088e:    d006        ..      BEQ      0x89e ; CLK_GetPLLClockFreq + 50
        0x00000890:    2802        .(      CMP      r0,#2
        0x00000892:    d004        ..      BEQ      0x89e ; CLK_GetPLLClockFreq + 50
        0x00000894:    2803        .(      CMP      r0,#3
        0x00000896:    d105        ..      BNE      0x8a4 ; CLK_GetPLLClockFreq + 56
        0x00000898:    e003        ..      B        0x8a2 ; CLK_GetPLLClockFreq + 54
        0x0000089a:    2001        .       MOVS     r0,#1
        0x0000089c:    e002        ..      B        0x8a4 ; CLK_GetPLLClockFreq + 56
        0x0000089e:    2002        .       MOVS     r0,#2
        0x000008a0:    e000        ..      B        0x8a4 ; CLK_GetPLLClockFreq + 56
        0x000008a2:    2004        .       MOVS     r0,#4
        0x000008a4:    f3c10308    ....    UBFX     r3,r1,#0,#9
        0x000008a8:    1c9b        ..      ADDS     r3,r3,#2
        0x000008aa:    f3c12144    ..D!    UBFX     r1,r1,#9,#5
        0x000008ae:    435a        ZC      MULS     r2,r3,r2
        0x000008b0:    1c89        ..      ADDS     r1,r1,#2
        0x000008b2:    fbb2f1f1    ....    UDIV     r1,r2,r1
        0x000008b6:    fbb1f0f0    ....    UDIV     r0,r1,r0
        0x000008ba:    4770        pG      BX       lr
    $d
        0x000008bc:    01518000    ..Q.    DCD    22118400
        0x000008c0:    00b71b00    ....    DCD    12000000
    $t
    i.CLK_SetHCLK
    CLK_SetHCLK
        0x000008c4:    f04f4280    O..B    MOV      r2,#0x40000000
        0x000008c8:    f8d23220    .. 2    LDR      r3,[r2,#0x220]
        0x000008cc:    f023030f    #...    BIC      r3,r3,#0xf
        0x000008d0:    430b        .C      ORRS     r3,r3,r1
        0x000008d2:    f8c23220    .. 2    STR      r3,[r2,#0x220]
        0x000008d6:    f8d21210    ....    LDR      r1,[r2,#0x210]
        0x000008da:    f0210107    !...    BIC      r1,r1,#7
        0x000008de:    4301        .C      ORRS     r1,r1,r0
        0x000008e0:    f8c21210    ....    STR      r1,[r2,#0x210]
        0x000008e4:    f000b8f6    ....    B.W      SystemCoreClockUpdate ; 0xad4
    i.CLK_SetModuleClock
    CLK_SetModuleClock
        0x000008e8:    b570        p.      PUSH     {r4-r6,lr}
        0x000008ea:    f4103f7f    ...?    TST      r0,#0x3fc00
        0x000008ee:    d00d        ..      BEQ      0x90c ; CLK_SetModuleClock + 36
        0x000008f0:    4c10        .L      LDR      r4,[pc,#64] ; [0x934] = 0x40000220
        0x000008f2:    f3c04381    ...C    UBFX     r3,r0,#18,#2
        0x000008f6:    eb040483    ....    ADD      r4,r4,r3,LSL #2
        0x000008fa:    6823        #h      LDR      r3,[r4,#0]
        0x000008fc:    f3c02587    ...%    UBFX     r5,r0,#10,#8
        0x00000900:    f3c01644    ..D.    UBFX     r6,r0,#5,#5
        0x00000904:    40b5        .@      LSLS     r5,r5,r6
        0x00000906:    43ab        .C      BICS     r3,r3,r5
        0x00000908:    4313        .C      ORRS     r3,r3,r2
        0x0000090a:    6023        #`      STR      r3,[r4,#0]
        0x0000090c:    0e42        B.      LSRS     r2,r0,#25
        0x0000090e:    0752        R.      LSLS     r2,r2,#29
        0x00000910:    d00e        ..      BEQ      0x930 ; CLK_SetModuleClock + 72
        0x00000912:    4b08        .K      LDR      r3,[pc,#32] ; [0x934] = 0x40000220
        0x00000914:    f3c07201    ...r    UBFX     r2,r0,#28,#2
        0x00000918:    3b10        .;      SUBS     r3,r3,#0x10
        0x0000091a:    eb030382    ....    ADD      r3,r3,r2,LSL #2
        0x0000091e:    681a        .h      LDR      r2,[r3,#0]
        0x00000920:    f3c06442    ..Bd    UBFX     r4,r0,#25,#3
        0x00000924:    f3c05004    ...P    UBFX     r0,r0,#20,#5
        0x00000928:    4084        .@      LSLS     r4,r4,r0
        0x0000092a:    43a2        .C      BICS     r2,r2,r4
        0x0000092c:    430a        .C      ORRS     r2,r2,r1
        0x0000092e:    601a        .`      STR      r2,[r3,#0]
        0x00000930:    bd70        p.      POP      {r4-r6,pc}
    $d
        0x00000932:    0000        ..      DCW    0
        0x00000934:    40000220     ..@    DCD    1073742368
    $t
    i.CLK_WaitClockReady
    CLK_WaitClockReady
        0x00000938:    f44f31d8    O..1    MOV      r1,#0x1b000
        0x0000093c:    f04f4280    O..B    MOV      r2,#0x40000000
        0x00000940:    e005        ..      B        0x94e ; CLK_WaitClockReady + 22
        0x00000942:    1e0b        ..      SUBS     r3,r1,#0
        0x00000944:    f1a10101    ....    SUB      r1,r1,#1
        0x00000948:    dc01        ..      BGT      0x94e ; CLK_WaitClockReady + 22
        0x0000094a:    2000        .       MOVS     r0,#0
        0x0000094c:    4770        pG      BX       lr
        0x0000094e:    f8d23250    ..P2    LDR      r3,[r2,#0x250]
        0x00000952:    ea300303    0...    BICS     r3,r0,r3
        0x00000956:    d1f4        ..      BNE      0x942 ; CLK_WaitClockReady + 10
        0x00000958:    2001        .       MOVS     r0,#1
        0x0000095a:    4770        pG      BX       lr
    i.GPIO_SetMode
    GPIO_SetMode
        0x0000095c:    b5f0        ..      PUSH     {r4-r7,lr}
        0x0000095e:    2300        .#      MOVS     r3,#0
        0x00000960:    2401        .$      MOVS     r4,#1
        0x00000962:    2603        .&      MOVS     r6,#3
        0x00000964:    fa04f503    ....    LSL      r5,r4,r3
        0x00000968:    420d        .B      TST      r5,r1
        0x0000096a:    d009        ..      BEQ      0x980 ; GPIO_SetMode + 36
        0x0000096c:    6807        .h      LDR      r7,[r0,#0]
        0x0000096e:    005d        ].      LSLS     r5,r3,#1
        0x00000970:    fa06fc05    ....    LSL      r12,r6,r5
        0x00000974:    ea27070c    '...    BIC      r7,r7,r12
        0x00000978:    fa02f505    ....    LSL      r5,r2,r5
        0x0000097c:    432f        /C      ORRS     r7,r7,r5
        0x0000097e:    6007        .`      STR      r7,[r0,#0]
        0x00000980:    1c5b        [.      ADDS     r3,r3,#1
        0x00000982:    2b10        .+      CMP      r3,#0x10
        0x00000984:    d3ee        ..      BCC      0x964 ; GPIO_SetMode + 8
        0x00000986:    bdf0        ..      POP      {r4-r7,pc}
    i.Hard_Fault_Handler
    Hard_Fault_Handler
    __tagsym$$used
        0x00000988:    4604        .F      MOV      r4,r0
        0x0000098a:    a003        ..      ADR      r0,{pc}+0xe ; 0x998
        0x0000098c:    f7fffd1c    ....    BL       __2printf ; 0x3c8
        0x00000990:    4620         F      MOV      r0,r4
        0x00000992:    f000f9db    ....    BL       stackDump ; 0xd4c
        0x00000996:    e7fe        ..      B        0x996 ; Hard_Fault_Handler + 14
    $d
        0x00000998:    48206e49    In H    DCD    1210084937
        0x0000099c:    20647261    ard     DCD    543453793
        0x000009a0:    6c756146    Faul    DCD    1819631942
        0x000009a4:    61482074    t Ha    DCD    1632116852
        0x000009a8:    656c646e    ndle    DCD    1701602414
        0x000009ac:    00000a72    r...    DCD    2674
    $t
    i.SYS_Init
    SYS_Init
        0x000009b0:    b570        p.      PUSH     {r4-r6,lr}
        0x000009b2:    f000f86b    ..k.    BL       SYS_UnlockReg ; 0xa8c
        0x000009b6:    2004        .       MOVS     r0,#4
        0x000009b8:    f7ffff50    ..P.    BL       CLK_EnableXtalRC ; 0x85c
        0x000009bc:    2010        .       MOVS     r0,#0x10
        0x000009be:    f7ffffbb    ....    BL       CLK_WaitClockReady ; 0x938
        0x000009c2:    2100        .!      MOVS     r1,#0
        0x000009c4:    2007        .       MOVS     r0,#7
        0x000009c6:    f7ffff7d    ..}.    BL       CLK_SetHCLK ; 0x8c4
        0x000009ca:    f04f4480    O..D    MOV      r4,#0x40000000
        0x000009ce:    f8d40240    ..@.    LDR      r0,[r4,#0x240]
        0x000009d2:    f4403080    @..0    ORR      r0,r0,#0x10000
        0x000009d6:    f8c40240    ..@.    STR      r0,[r4,#0x240]
        0x000009da:    481f        .H      LDR      r0,[pc,#124] ; [0xa58] = 0x85639
        0x000009dc:    f8c40240    ..@.    STR      r0,[r4,#0x240]
        0x000009e0:    2004        .       MOVS     r0,#4
        0x000009e2:    f7ffffa9    ....    BL       CLK_WaitClockReady ; 0x938
        0x000009e6:    2100        .!      MOVS     r1,#0
        0x000009e8:    2002        .       MOVS     r0,#2
        0x000009ea:    f7ffff6b    ..k.    BL       CLK_SetHCLK ; 0x8c4
        0x000009ee:    4d1b        .M      LDR      r5,[pc,#108] ; [0xa5c] = 0x57803d10
        0x000009f0:    4628        (F      MOV      r0,r5
        0x000009f2:    f7ffff25    ..%.    BL       CLK_EnableModuleClock ; 0x840
        0x000009f6:    4e1a        .N      LDR      r6,[pc,#104] ; [0xa60] = 0x5623fe1c
        0x000009f8:    4630        0F      MOV      r0,r6
        0x000009fa:    f7ffff21    ..!.    BL       CLK_EnableModuleClock ; 0x840
        0x000009fe:    2200        ."      MOVS     r2,#0
        0x00000a00:    f04f7140    O.@q    MOV      r1,#0x3000000
        0x00000a04:    4628        (F      MOV      r0,r5
        0x00000a06:    f7ffff6f    ..o.    BL       CLK_SetModuleClock ; 0x8e8
        0x00000a0a:    1322        ".      ASRS     r2,r4,#12
        0x00000a0c:    2108        .!      MOVS     r1,#8
        0x00000a0e:    4630        0F      MOV      r0,r6
        0x00000a10:    f7ffff6a    ..j.    BL       CLK_SetModuleClock ; 0x8e8
        0x00000a14:    f000f85e    ..^.    BL       SystemCoreClockUpdate ; 0xad4
        0x00000a18:    f44f7088    O..p    MOV      r0,#0x110
        0x00000a1c:    6620         f      STR      r0,[r4,#0x60]
        0x00000a1e:    6c20         l      LDR      r0,[r4,#0x40]
        0x00000a20:    f4200070     .p.    BIC      r0,r0,#0xf00000
        0x00000a24:    f4401080    @...    ORR      r0,r0,#0x100000
        0x00000a28:    6420         d      STR      r0,[r4,#0x40]
        0x00000a2a:    f2401011    @...    MOV      r0,#0x111
        0x00000a2e:    6520         e      STR      r0,[r4,#0x50]
        0x00000a30:    f04f2040    O.@     MOV      r0,#0x40004000
        0x00000a34:    f8d01104    ....    LDR      r1,[r0,#0x104]
        0x00000a38:    f44121e0    A..!    ORR      r1,r1,#0x70000
        0x00000a3c:    f8c01104    ....    STR      r1,[r0,#0x104]
        0x00000a40:    4808        .H      LDR      r0,[pc,#32] ; [0xa64] = 0x400001c
        0x00000a42:    f000f817    ....    BL       SYS_ResetModule ; 0xa74
        0x00000a46:    6aa0        .j      LDR      r0,[r4,#0x28]
        0x00000a48:    f0400010    @...    ORR      r0,r0,#0x10
        0x00000a4c:    62a0        .b      STR      r0,[r4,#0x28]
        0x00000a4e:    e8bd4070    ..p@    POP      {r4-r6,lr}
        0x00000a52:    f000b809    ....    B.W      SYS_LockReg ; 0xa68
    $d
        0x00000a56:    0000        ..      DCW    0
        0x00000a58:    00085639    9V..    DCD    546361
        0x00000a5c:    57803d10    .=.W    DCD    1468022032
        0x00000a60:    5623fe1c    ..#V    DCD    1445199388
        0x00000a64:    0400001c    ....    DCD    67108892
    $t
    i.SYS_LockReg
    SYS_LockReg
        0x00000a68:    f04f4180    O..A    MOV      r1,#0x40000000
        0x00000a6c:    2000        .       MOVS     r0,#0
        0x00000a6e:    f8c10100    ....    STR      r0,[r1,#0x100]
        0x00000a72:    4770        pG      BX       lr
    i.SYS_ResetModule
    SYS_ResetModule
        0x00000a74:    0e01        ..      LSRS     r1,r0,#24
        0x00000a76:    f1014180    ...A    ADD      r1,r1,#0x40000000
        0x00000a7a:    688b        .h      LDR      r3,[r1,#8]
        0x00000a7c:    2201        ."      MOVS     r2,#1
        0x00000a7e:    4082        .@      LSLS     r2,r2,r0
        0x00000a80:    4313        .C      ORRS     r3,r3,r2
        0x00000a82:    608b        .`      STR      r3,[r1,#8]
        0x00000a84:    6888        .h      LDR      r0,[r1,#8]
        0x00000a86:    4390        .C      BICS     r0,r0,r2
        0x00000a88:    6088        .`      STR      r0,[r1,#8]
        0x00000a8a:    4770        pG      BX       lr
    i.SYS_UnlockReg
    SYS_UnlockReg
        0x00000a8c:    b510        ..      PUSH     {r4,lr}
        0x00000a8e:    2359        Y#      MOVS     r3,#0x59
        0x00000a90:    2216        ."      MOVS     r2,#0x16
        0x00000a92:    f04f4080    O..@    MOV      r0,#0x40000000
        0x00000a96:    2188        .!      MOVS     r1,#0x88
        0x00000a98:    e006        ..      B        0xaa8 ; SYS_UnlockReg + 28
        0x00000a9a:    bf00        ..      NOP      
        0x00000a9c:    f8c03100    ...1    STR      r3,[r0,#0x100]
        0x00000aa0:    f8c02100    ...!    STR      r2,[r0,#0x100]
        0x00000aa4:    f8c01100    ....    STR      r1,[r0,#0x100]
        0x00000aa8:    f8d04100    ...A    LDR      r4,[r0,#0x100]
        0x00000aac:    2c01        .,      CMP      r4,#1
        0x00000aae:    d1f5        ..      BNE      0xa9c ; SYS_UnlockReg + 16
        0x00000ab0:    bd10        ..      POP      {r4,pc}
        0x00000ab2:    0000        ..      MOVS     r0,r0
    i.SendChar_ToUART
    SendChar_ToUART
        0x00000ab4:    4906        .I      LDR      r1,[pc,#24] ; [0xad0] = 0x40070000
        0x00000ab6:    698a        .i      LDR      r2,[r1,#0x18]
        0x00000ab8:    0212        ..      LSLS     r2,r2,#8
        0x00000aba:    d4fc        ..      BMI      0xab6 ; SendChar_ToUART + 2
        0x00000abc:    6008        .`      STR      r0,[r1,#0]
        0x00000abe:    280a        .(      CMP      r0,#0xa
        0x00000ac0:    d104        ..      BNE      0xacc ; SendChar_ToUART + 24
        0x00000ac2:    6988        .i      LDR      r0,[r1,#0x18]
        0x00000ac4:    0200        ..      LSLS     r0,r0,#8
        0x00000ac6:    d4fc        ..      BMI      0xac2 ; SendChar_ToUART + 14
        0x00000ac8:    200d        .       MOVS     r0,#0xd
        0x00000aca:    6008        .`      STR      r0,[r1,#0]
        0x00000acc:    4770        pG      BX       lr
    $d
        0x00000ace:    0000        ..      DCW    0
        0x00000ad0:    40070000    ...@    DCD    1074200576
    $t
    i.SystemCoreClockUpdate
    SystemCoreClockUpdate
        0x00000ad4:    b510        ..      PUSH     {r4,lr}
        0x00000ad6:    f04f4480    O..D    MOV      r4,#0x40000000
        0x00000ada:    f8d40210    ....    LDR      r0,[r4,#0x210]
        0x00000ade:    f0000007    ....    AND      r0,r0,#7
        0x00000ae2:    2802        .(      CMP      r0,#2
        0x00000ae4:    d003        ..      BEQ      0xaee ; SystemCoreClockUpdate + 26
        0x00000ae6:    490b        .I      LDR      r1,[pc,#44] ; [0xb14] = 0x20000008
        0x00000ae8:    f8510020    Q. .    LDR      r0,[r1,r0,LSL #2]
        0x00000aec:    e001        ..      B        0xaf2 ; SystemCoreClockUpdate + 30
        0x00000aee:    f7fffebd    ....    BL       CLK_GetPLLClockFreq ; 0x86c
        0x00000af2:    f8d41220    .. .    LDR      r1,[r4,#0x220]
        0x00000af6:    4a08        .J      LDR      r2,[pc,#32] ; [0xb18] = 0x7a120
        0x00000af8:    f001010f    ....    AND      r1,r1,#0xf
        0x00000afc:    1c49        I.      ADDS     r1,r1,#1
        0x00000afe:    fbb0f1f1    ....    UDIV     r1,r0,r1
        0x00000b02:    4804        .H      LDR      r0,[pc,#16] ; [0xb14] = 0x20000008
        0x00000b04:    3808        .8      SUBS     r0,r0,#8
        0x00000b06:    6001        .`      STR      r1,[r0,#0]
        0x00000b08:    4411        .D      ADD      r1,r1,r2
        0x00000b0a:    0052        R.      LSLS     r2,r2,#1
        0x00000b0c:    fbb1f1f2    ....    UDIV     r1,r1,r2
        0x00000b10:    6041        A`      STR      r1,[r0,#4]
        0x00000b12:    bd10        ..      POP      {r4,pc}
    $d
        0x00000b14:    20000008    ...     DCD    536870920
        0x00000b18:    0007a120     ...    DCD    500000
    $t
    i.SystemInit
    SystemInit
        0x00000b1c:    4828        (H      LDR      r0,[pc,#160] ; [0xbc0] = 0xe000ed88
        0x00000b1e:    b510        ..      PUSH     {r4,lr}
        0x00000b20:    6801        .h      LDR      r1,[r0,#0]
        0x00000b22:    f4410170    A.p.    ORR      r1,r1,#0xf00000
        0x00000b26:    6001        .`      STR      r1,[r0,#0]
        0x00000b28:    2008        .       MOVS     r0,#8
        0x00000b2a:    f7ffff05    ....    BL       CLK_WaitClockReady ; 0x938
        0x00000b2e:    f04f4180    O..A    MOV      r1,#0x40000000
        0x00000b32:    f8d10208    ....    LDR      r0,[r1,#0x208]
        0x00000b36:    f3c00340    ..@.    UBFX     r3,r0,#1,#1
        0x00000b3a:    b92b        +.      CBNZ     r3,0xb48 ; SystemInit + 44
        0x00000b3c:    f8d10208    ....    LDR      r0,[r1,#0x208]
        0x00000b40:    f0400002    @...    ORR      r0,r0,#2
        0x00000b44:    f8c10208    ....    STR      r0,[r1,#0x208]
        0x00000b48:    481f        .H      LDR      r0,[pc,#124] ; [0xbc8] = 0x40041000
        0x00000b4a:    4a1e        .J      LDR      r2,[pc,#120] ; [0xbc4] = 0xa5eb1357
        0x00000b4c:    6002        .`      STR      r2,[r0,#0]
        0x00000b4e:    6802        .h      LDR      r2,[r0,#0]
        0x00000b50:    2a01        .*      CMP      r2,#1
        0x00000b52:    d1fc        ..      BNE      0xb4e ; SystemInit + 50
        0x00000b54:    f8d02110    ...!    LDR      r2,[r0,#0x110]
        0x00000b58:    07d2        ..      LSLS     r2,r2,#31
        0x00000b5a:    d128        (.      BNE      0xbae ; SystemInit + 146
        0x00000b5c:    f64a1265    J.e.    MOV      r2,#0xa965
        0x00000b60:    6042        B`      STR      r2,[r0,#4]
        0x00000b62:    6844        Dh      LDR      r4,[r0,#4]
        0x00000b64:    03e4        ..      LSLS     r4,r4,#15
        0x00000b66:    d5fc        ..      BPL      0xb62 ; SystemInit + 70
        0x00000b68:    6bc4        .k      LDR      r4,[r0,#0x3c]
        0x00000b6a:    f0440404    D...    ORR      r4,r4,#4
        0x00000b6e:    63c4        .c      STR      r4,[r0,#0x3c]
        0x00000b70:    6bc4        .k      LDR      r4,[r0,#0x3c]
        0x00000b72:    0624        $.      LSLS     r4,r4,#24
        0x00000b74:    d5fc        ..      BPL      0xb70 ; SystemInit + 84
        0x00000b76:    6042        B`      STR      r2,[r0,#4]
        0x00000b78:    6844        Dh      LDR      r4,[r0,#4]
        0x00000b7a:    03e4        ..      LSLS     r4,r4,#15
        0x00000b7c:    d5fc        ..      BPL      0xb78 ; SystemInit + 92
        0x00000b7e:    f8d0409c    ...@    LDR      r4,[r0,#0x9c]
        0x00000b82:    f8c0409c    ...@    STR      r4,[r0,#0x9c]
        0x00000b86:    6bc4        .k      LDR      r4,[r0,#0x3c]
        0x00000b88:    0624        $.      LSLS     r4,r4,#24
        0x00000b8a:    d5fc        ..      BPL      0xb86 ; SystemInit + 106
        0x00000b8c:    6042        B`      STR      r2,[r0,#4]
        0x00000b8e:    6844        Dh      LDR      r4,[r0,#4]
        0x00000b90:    03e4        ..      LSLS     r4,r4,#15
        0x00000b92:    d5fc        ..      BPL      0xb8e ; SystemInit + 114
        0x00000b94:    6bc4        .k      LDR      r4,[r0,#0x3c]
        0x00000b96:    f0240404    $...    BIC      r4,r4,#4
        0x00000b9a:    63c4        .c      STR      r4,[r0,#0x3c]
        0x00000b9c:    6bc4        .k      LDR      r4,[r0,#0x3c]
        0x00000b9e:    0624        $.      LSLS     r4,r4,#24
        0x00000ba0:    d5fc        ..      BPL      0xb9c ; SystemInit + 128
        0x00000ba2:    6042        B`      STR      r2,[r0,#4]
        0x00000ba4:    6842        Bh      LDR      r2,[r0,#4]
        0x00000ba6:    03d2        ..      LSLS     r2,r2,#15
        0x00000ba8:    d5fc        ..      BPL      0xba4 ; SystemInit + 136
        0x00000baa:    2202        ."      MOVS     r2,#2
        0x00000bac:    62c2        .b      STR      r2,[r0,#0x2c]
        0x00000bae:    2b00        .+      CMP      r3,#0
        0x00000bb0:    d105        ..      BNE      0xbbe ; SystemInit + 162
        0x00000bb2:    f8d10208    ....    LDR      r0,[r1,#0x208]
        0x00000bb6:    f0200002     ...    BIC      r0,r0,#2
        0x00000bba:    f8c10208    ....    STR      r0,[r1,#0x208]
        0x00000bbe:    bd10        ..      POP      {r4,pc}
    $d
        0x00000bc0:    e000ed88    ....    DCD    3758157192
        0x00000bc4:    a5eb1357    W...    DCD    2783646551
        0x00000bc8:    40041000    ...@    DCD    1074008064
    $t
    i.UART_Open
    UART_Open
        0x00000bcc:    b57f        ..      PUSH     {r0-r6,lr}
        0x00000bce:    4a1b        .J      LDR      r2,[pc,#108] ; [0xc3c] = 0xe00
        0x00000bd0:    460c        .F      MOV      r4,r1
        0x00000bd2:    4605        .F      MOV      r5,r0
        0x00000bd4:    6811        .h      LDR      r1,[r2,#0]
        0x00000bd6:    e9d20202    ....    LDRD     r0,r2,[r2,#8]
        0x00000bda:    e9cd0202    ....    STRD     r0,r2,[sp,#8]
        0x00000bde:    9100        ..      STR      r1,[sp,#0]
        0x00000be0:    f7fffe44    ..D.    BL       CLK_GetPLLClockFreq ; 0x86c
        0x00000be4:    f04f4180    O..A    MOV      r1,#0x40000000
        0x00000be8:    9001        ..      STR      r0,[sp,#4]
        0x00000bea:    f8d10214    ....    LDR      r0,[r1,#0x214]
        0x00000bee:    2200        ."      MOVS     r2,#0
        0x00000bf0:    f3c06001    ...`    UBFX     r0,r0,#24,#2
        0x00000bf4:    632a        *c      STR      r2,[r5,#0x30]
        0x00000bf6:    2303        .#      MOVS     r3,#3
        0x00000bf8:    60eb        .`      STR      r3,[r5,#0xc]
        0x00000bfa:    60aa        .`      STR      r2,[r5,#8]
        0x00000bfc:    f85d2020    ].      LDR      r2,[sp,r0,LSL #2]
        0x00000c00:    f8d10220    .. .    LDR      r0,[r1,#0x220]
        0x00000c04:    f3c02003    ...     UBFX     r0,r0,#8,#4
        0x00000c08:    1c40        @.      ADDS     r0,r0,#1
        0x00000c0a:    fbb2f0f0    ....    UDIV     r0,r2,r0
        0x00000c0e:    2c00        .,      CMP      r4,#0
        0x00000c10:    d012        ..      BEQ      0xc38 ; UART_Open + 108
        0x00000c12:    eb000154    ..T.    ADD      r1,r0,r4,LSR #1
        0x00000c16:    fbb1f1f4    ....    UDIV     r1,r1,r4
        0x00000c1a:    1e89        ..      SUBS     r1,r1,#2
        0x00000c1c:    f5b13f80    ...?    CMP      r1,#0x10000
        0x00000c20:    d307        ..      BCC      0xc32 ; UART_Open + 102
        0x00000c22:    eb0000c4    ....    ADD      r0,r0,r4,LSL #3
        0x00000c26:    fbb0f0f4    ....    UDIV     r0,r0,r4
        0x00000c2a:    1f59        Y.      SUBS     r1,r3,#5
        0x00000c2c:    eb011010    ....    ADD      r0,r1,r0,LSR #4
        0x00000c30:    e001        ..      B        0xc36 ; UART_Open + 106
        0x00000c32:    f0415040    A.@P    ORR      r0,r1,#0x30000000
        0x00000c36:    6268        hb      STR      r0,[r5,#0x24]
        0x00000c38:    bd7f        ..      POP      {r0-r6,pc}
    $d
        0x00000c3a:    0000        ..      DCW    0
        0x00000c3c:    00000e00    ....    DCD    3584
    $t
    i._is_digit
    _is_digit
        0x00000c40:    3830        08      SUBS     r0,r0,#0x30
        0x00000c42:    280a        .(      CMP      r0,#0xa
        0x00000c44:    d201        ..      BCS      0xc4a ; _is_digit + 10
        0x00000c46:    2001        .       MOVS     r0,#1
        0x00000c48:    4770        pG      BX       lr
        0x00000c4a:    2000        .       MOVS     r0,#0
        0x00000c4c:    4770        pG      BX       lr
    i.ferror
    ferror
        0x00000c4e:    f04f30ff    O..0    MOV      r0,#0xffffffff
        0x00000c52:    4770        pG      BX       lr
    i.fputc
    fputc
        0x00000c54:    b500        ..      PUSH     {lr}
        0x00000c56:    4603        .F      MOV      r3,r0
        0x00000c58:    f7ffff2c    ..,.    BL       SendChar_ToUART ; 0xab4
        0x00000c5c:    4618        .F      MOV      r0,r3
        0x00000c5e:    bd00        ..      POP      {pc}
    i.main
    main
        0x00000c60:    f7fffea6    ....    BL       SYS_Init ; 0x9b0
        0x00000c64:    2201        ."      MOVS     r2,#1
        0x00000c66:    03d1        ..      LSLS     r1,r2,#15
        0x00000c68:    481d        .H      LDR      r0,[pc,#116] ; [0xce0] = 0x400040c0
        0x00000c6a:    f7fffe77    ..w.    BL       GPIO_SetMode ; 0x95c
        0x00000c6e:    481c        .H      LDR      r0,[pc,#112] ; [0xce0] = 0x400040c0
        0x00000c70:    2200        ."      MOVS     r2,#0
        0x00000c72:    2101        .!      MOVS     r1,#1
        0x00000c74:    3080        .0      ADDS     r0,r0,#0x80
        0x00000c76:    f7fffe71    ..q.    BL       GPIO_SetMode ; 0x95c
        0x00000c7a:    f44f31e1    O..1    MOV      r1,#0x1c200
        0x00000c7e:    4819        .H      LDR      r0,[pc,#100] ; [0xce4] = 0x40070000
        0x00000c80:    f7ffffa4    ....    BL       UART_Open ; 0xbcc
        0x00000c84:    4818        .H      LDR      r0,[pc,#96] ; [0xce8] = 0x20000000
        0x00000c86:    6801        .h      LDR      r1,[r0,#0]
        0x00000c88:    a018        ..      ADR      r0,{pc}+0x64 ; 0xcec
        0x00000c8a:    f7fffb9d    ....    BL       __2printf ; 0x3c8
        0x00000c8e:    a01b        ..      ADR      r0,{pc}+0x6e ; 0xcfc
        0x00000c90:    f7fffb9a    ....    BL       __2printf ; 0x3c8
        0x00000c94:    4829        )H      LDR      r0,[pc,#164] ; [0xd3c] = 0xe48
        0x00000c96:    f7fffb97    ....    BL       __2printf ; 0x3c8
        0x00000c9a:    4c29        )L      LDR      r4,[pc,#164] ; [0xd40] = 0x40043000
        0x00000c9c:    2307        .#      MOVS     r3,#7
        0x00000c9e:    2208        ."      MOVS     r2,#8
        0x00000ca0:    2100        .!      MOVS     r1,#0
        0x00000ca2:    4620         F      MOV      r0,r4
        0x00000ca4:    f7fffdba    ....    BL       ADC_Open ; 0x81c
        0x00000ca8:    6c20         l      LDR      r0,[r4,#0x40]
        0x00000caa:    f0400001    @...    ORR      r0,r0,#1
        0x00000cae:    6420         d      STR      r0,[r4,#0x40]
        0x00000cb0:    2101        .!      MOVS     r1,#1
        0x00000cb2:    4620         F      MOV      r0,r4
        0x00000cb4:    f7fffd42    ..B.    BL       ADC_EnableInt ; 0x73c
        0x00000cb8:    4922        "I      LDR      r1,[pc,#136] ; [0xd44] = 0xe000e004
        0x00000cba:    2201        ."      MOVS     r2,#1
        0x00000cbc:    0290        ..      LSLS     r0,r2,#10
        0x00000cbe:    f8c10100    ....    STR      r0,[r1,#0x100]
        0x00000cc2:    6c20         l      LDR      r0,[r4,#0x40]
        0x00000cc4:    f4406000    @..`    ORR      r0,r0,#0x800
        0x00000cc8:    6420         d      STR      r0,[r4,#0x40]
        0x00000cca:    481f        .H      LDR      r0,[pc,#124] ; [0xd48] = 0x400048fc
        0x00000ccc:    2100        .!      MOVS     r1,#0
        0x00000cce:    6001        .`      STR      r1,[r0,#0]
        0x00000cd0:    6002        .`      STR      r2,[r0,#0]
        0x00000cd2:    6001        .`      STR      r1,[r0,#0]
        0x00000cd4:    6002        .`      STR      r2,[r0,#0]
        0x00000cd6:    6001        .`      STR      r1,[r0,#0]
        0x00000cd8:    6002        .`      STR      r2,[r0,#0]
        0x00000cda:    6001        .`      STR      r1,[r0,#0]
        0x00000cdc:    6002        .`      STR      r2,[r0,#0]
        0x00000cde:    e7f6        ..      B        0xcce ; main + 110
    $d
        0x00000ce0:    400040c0    .@.@    DCD    1073758400
        0x00000ce4:    40070000    ...@    DCD    1074200576
        0x00000ce8:    20000000    ...     DCD    536870912
        0x00000cec:    50430a0a    ..CP    DCD    1346570762
        0x00000cf0:    20402055    U @     DCD    541073493
        0x00000cf4:    7a486425    %dHz    DCD    2051564581
        0x00000cf8:    0000000a    ....    DCD    10
        0x00000cfc:    6968540a    .Thi    DCD    1768444938
        0x00000d00:    61732073    s sa    DCD    1634934899
        0x00000d04:    656c706d    mple    DCD    1701605485
        0x00000d08:    646f6320     cod    DCD    1685021472
        0x00000d0c:    65642065    e de    DCD    1701060709
        0x00000d10:    736e6f6d    mons    DCD    1936617325
        0x00000d14:    74617274    trat    DCD    1952543348
        0x00000d18:    44412065    e AD    DCD    1145118821
        0x00000d1c:    6f632043    C co    DCD    1868767299
        0x00000d20:    6e69746e    ntin    DCD    1852404846
        0x00000d24:    73756f75    uous    DCD    1937076085
        0x00000d28:    61637320     sca    DCD    1633907488
        0x00000d2c:    6f63206e    n co    DCD    1868767342
        0x00000d30:    7265766e    nver    DCD    1919252078
        0x00000d34:    6e6f6973    sion    DCD    1852795251
        0x00000d38:    0000000a    ....    DCD    10
        0x00000d3c:    00000e48    H...    DCD    3656
        0x00000d40:    40043000    .0.@    DCD    1074016256
        0x00000d44:    e000e004    ....    DCD    3758153732
        0x00000d48:    400048fc    .H.@    DCD    1073760508
    $t
    i.stackDump
    stackDump
        0x00000d4c:    b510        ..      PUSH     {r4,lr}
        0x00000d4e:    4604        .F      MOV      r4,r0
        0x00000d50:    6801        .h      LDR      r1,[r0,#0]
        0x00000d52:    a010        ..      ADR      r0,{pc}+0x42 ; 0xd94
        0x00000d54:    f7fffb38    ..8.    BL       __2printf ; 0x3c8
        0x00000d58:    a011        ..      ADR      r0,{pc}+0x48 ; 0xda0
        0x00000d5a:    6861        ah      LDR      r1,[r4,#4]
        0x00000d5c:    f7fffb34    ..4.    BL       __2printf ; 0x3c8
        0x00000d60:    a012        ..      ADR      r0,{pc}+0x4c ; 0xdac
        0x00000d62:    68a1        .h      LDR      r1,[r4,#8]
        0x00000d64:    f7fffb30    ..0.    BL       __2printf ; 0x3c8
        0x00000d68:    a013        ..      ADR      r0,{pc}+0x50 ; 0xdb8
        0x00000d6a:    68e1        .h      LDR      r1,[r4,#0xc]
        0x00000d6c:    f7fffb2c    ..,.    BL       __2printf ; 0x3c8
        0x00000d70:    a014        ..      ADR      r0,{pc}+0x54 ; 0xdc4
        0x00000d72:    6921        !i      LDR      r1,[r4,#0x10]
        0x00000d74:    f7fffb28    ..(.    BL       __2printf ; 0x3c8
        0x00000d78:    a015        ..      ADR      r0,{pc}+0x58 ; 0xdd0
        0x00000d7a:    6961        ai      LDR      r1,[r4,#0x14]
        0x00000d7c:    f7fffb24    ..$.    BL       __2printf ; 0x3c8
        0x00000d80:    a016        ..      ADR      r0,{pc}+0x5c ; 0xddc
        0x00000d82:    69a1        .i      LDR      r1,[r4,#0x18]
        0x00000d84:    f7fffb20    .. .    BL       __2printf ; 0x3c8
        0x00000d88:    69e1        .i      LDR      r1,[r4,#0x1c]
        0x00000d8a:    e8bd4010    ...@    POP      {r4,lr}
        0x00000d8e:    a016        ..      ADR      r0,{pc}+0x5a ; 0xde8
        0x00000d90:    f7ffbb1a    ....    B        __2printf ; 0x3c8
    $d
        0x00000d94:    20203072    r0      DCD    538980466
        0x00000d98:    7830203d    = 0x    DCD    2016419901
        0x00000d9c:    000a7825    %x..    DCD    686117
        0x00000da0:    20203172    r1      DCD    538980722
        0x00000da4:    7830203d    = 0x    DCD    2016419901
        0x00000da8:    000a7825    %x..    DCD    686117
        0x00000dac:    20203272    r2      DCD    538980978
        0x00000db0:    7830203d    = 0x    DCD    2016419901
        0x00000db4:    000a7825    %x..    DCD    686117
        0x00000db8:    20203372    r3      DCD    538981234
        0x00000dbc:    7830203d    = 0x    DCD    2016419901
        0x00000dc0:    000a7825    %x..    DCD    686117
        0x00000dc4:    20323172    r12     DCD    540160370
        0x00000dc8:    7830203d    = 0x    DCD    2016419901
        0x00000dcc:    000a7825    %x..    DCD    686117
        0x00000dd0:    2020726c    lr      DCD    538997356
        0x00000dd4:    7830203d    = 0x    DCD    2016419901
        0x00000dd8:    000a7825    %x..    DCD    686117
        0x00000ddc:    20206370    pc      DCD    538993520
        0x00000de0:    7830203d    = 0x    DCD    2016419901
        0x00000de4:    000a7825    %x..    DCD    686117
        0x00000de8:    20727370    psr     DCD    544371568
        0x00000dec:    7830203d    = 0x    DCD    2016419901
        0x00000df0:    000a7825    %x..    DCD    686117
    $t
    x$fpl$fpinit
    $v0
    _fp_init
        0x00000df4:    f04f7040    O.@p    MOV      r0,#0x3000000
        0x00000df8:    eee10a10    ....    VMSR     FPSCR,r0
    __fplib_config_fpu_vfp
    __fplib_config_pureend_doubles
        0x00000dfc:    4770        pG      BX       lr
        0x00000dfe:    0000        ..      MOVS     r0,r0
    $d.realdata
    .constdata
        0x00000e00:    00b71b00    ....    DCD    12000000
        0x00000e04:    00000000    ....    DCD    0
        0x00000e08:    01518000    ..Q.    DCD    22118400
        0x00000e0c:    01518000    ..Q.    DCD    22118400
        0x00000e10:    00b71b00    ....    DCD    12000000
        0x00000e14:    00000000    ....    DCD    0
        0x00000e18:    01518000    ..Q.    DCD    22118400
        0x00000e1c:    01518000    ..Q.    DCD    22118400
    .constdata
    uc_hextab
        0x00000e20:    33323130    0123    DCD    858927408
        0x00000e24:    37363534    4567    DCD    926299444
        0x00000e28:    42413938    89AB    DCD    1111570744
        0x00000e2c:    46454443    CDEF    DCD    1178944579
        0x00000e30:    00583040    @0X.    DCD    5779520
    lc_hextab
        0x00000e34:    33323130    0123    DCD    858927408
        0x00000e38:    37363534    4567    DCD    926299444
        0x00000e3c:    62613938    89ab    DCD    1650538808
        0x00000e40:    66656463    cdef    DCD    1717920867
        0x00000e44:    00783040    @0x.    DCD    7876672
    .conststring
        0x00000e48:    63207449    It c    DCD    1663071305
        0x00000e4c:    65766e6f    onve    DCD    1702260335
        0x00000e50:    63207472    rt c    DCD    1663071346
        0x00000e54:    6e6e6168    hann    DCD    1852727656
        0x00000e58:    30206c65    el 0    DCD    807431269
        0x00000e5c:    322c312c    ,1,2    DCD    841756972
        0x00000e60:    6e6f6320     con    DCD    1852793632
        0x00000e64:    756e6974    tinu    DCD    1970170228
        0x00000e68:    6c73756f    ousl    DCD    1819506031
        0x00000e6c:    6e612079    y an    DCD    1851859065
        0x00000e70:    72702064    d pr    DCD    1919950948
        0x00000e74:    20746e69    int     DCD    544501353
        0x00000e78:    766e6f63    conv    DCD    1986948963
        0x00000e7c:    69737265    ersi    DCD    1769173605
        0x00000e80:    72206e6f    on r    DCD    1914728047
        0x00000e84:    6c757365    esul    DCD    1819636581
        0x00000e88:    00000a74    t...    DCD    2676
    Region$$Table$$Base
        0x00000e8c:    00000eac    ....    DCD    3756
        0x00000e90:    20000000    ...     DCD    536870912
        0x00000e94:    0000002c    ,...    DCD    44
        0x00000e98:    000002b4    ....    DCD    692
        0x00000e9c:    00000ed8    ....    DCD    3800
        0x00000ea0:    2000002c    ,..     DCD    536870956
        0x00000ea4:    00000964    d...    DCD    2404
        0x00000ea8:    000002d0    ....    DCD    720
    Region$$Table$$Limit

** Section #2 'ER_RW' (SHT_PROGBITS) [SHF_ALLOC + SHF_WRITE]
    Size   : 44 bytes (alignment 4)
    Address: 0x20000000


** Section #3 'ER_ZI' (SHT_NOBITS) [SHF_ALLOC + SHF_WRITE]
    Size   : 2404 bytes (alignment 8)
    Address: 0x2000002c


** Section #4 '.debug_abbrev' (SHT_PROGBITS)
    Size   : 1476 bytes


** Section #5 '.debug_frame' (SHT_PROGBITS)
    Size   : 2212 bytes


** Section #6 '.debug_info' (SHT_PROGBITS)
    Size   : 50528 bytes


** Section #7 '.debug_line' (SHT_PROGBITS)
    Size   : 5800 bytes


** Section #8 '.debug_loc' (SHT_PROGBITS)
    Size   : 680 bytes


** Section #9 '.debug_macinfo' (SHT_PROGBITS)
    Size   : 593056 bytes


** Section #10 '.debug_pubnames' (SHT_PROGBITS)
    Size   : 1036 bytes


** Section #11 '.symtab' (SHT_SYMTAB)
    Size   : 7600 bytes (alignment 4)
    String table #12 '.strtab'
    Last local symbol no. 254


** Section #12 '.strtab' (SHT_STRTAB)
    Size   : 7140 bytes


** Section #13 '.note' (SHT_NOTE)
    Size   : 28 bytes (alignment 4)


** Section #14 '.comment' (SHT_PROGBITS)
    Size   : 9444 bytes


** Section #15 '.shstrtab' (SHT_STRTAB)
    Size   : 156 bytes

comment;
                \ include  472app6.f
           #else include  NUC453StartKitOffice3c2.F
           #then
    #else  \ include  nuc472LED2.f
                 include  nuc453StartKit2.f
    #then



:.  kkk  drop.   drop.  ;.


    472?  @.
    #if   \ :  ms  (.n.--.)      for  700 ( ??? )  for  next  next  ;  \ m453
    #else   :  ms  (.n.--.)      for  600 ( ??? )  for  next  next  ;  \ m453
  t:       Get_ADC_Knob(c)              '' Get_ADC_Knob  0|1'  ret
   :  test.Get_ADC_Knob(c)  (.--.)  begin  Get_ADC_Knob(c)    cr   0a  .r   100000  for next  ?key  until   ;
    #then




:. lll  drop.  ;.






   :  g     execute   ;
  t:  end   ret'   \ always at the end to ensure the linking to previous eForth.

  ''  end    ( COLD )  CFA'>NFA'(ADJACENT)   doUSER.base.in.rom      @.  8051eForth.based.addr @. +.  ( 4040 )
      88 40 -. 2*.  +.    32!'   \ last*  @.







:.  mmm  drop.  ;.









\ last'(adjacent)  @.  addr.of.LAST'(stored.at.rom)  @.  32!'

 20001000  org
\   include  472app1.f

     addr'.to.jmp.to.cold.from.C   @.  >cold






:.  zzz  drop.  ;.
:.  vvv  drop.  ;.




          64K
  #else   64k
          dos  copy  1.hex  D:\nuvoton\NUC472_NUC442_BSP_CMSIS_V3.01.001\SampleCode\Template\Keil\obj\template.axf
  #then

#then       '.  dup   @.  cfa.of.dup.@   !.
            '.  quit  @.  cfa.of.quit.@  !.



:.  sss  drop.  ;.



\  NEW  include  865N18I12.F      include  nuc472LEDoffice4.f     0  4600  32!'  ( 0  lfa'.of.BIT@  @.  32!' )
\  CLS  .LNC  LNC


    20003000  ORG  \  : QQ  10  0  DO  I  .  LOOP  ;   20003000  20003000  2000  P>T

:.  >T ( -- ) 232." TF"     20 ms.      1 DELAY.STRING>232  !.
              LAST'(ADJACENT)   @. (D') 2 MS.  '' LAST      (B') 2 MS.                    '' !  (b') 2 MS.
              LAST'(ADJACENT)   @. (D') 2 MS.  '' CURRENT   (B') 2 MS.  '' @  (B') 2 MS.  '' !  (b') 2 MS.
              LAST'(ADJACENT)   @. (D') 2 MS.  '' CONTEXT   (B') 2 MS.  '' @  (B') 2 MS.  '' !  (b') 2 MS.
                          cp'   @. (D') 2 MS.  '' cp        (B') 2 MS.                    '' !  (b') 2 MS.  [A']  ;.

:.  >T ( -- ) 232." TF"     40 ms.      1 DELAY.STRING>232  !.
              LAST'(ADJACENT)   @. (D') 4 MS.  '' LAST      (B') 4 MS.                    '' !  (b') 4 MS.
              LAST'(ADJACENT)   @. (D') 4 MS.  '' CURRENT   (B') 4 MS.  '' @  (B') 4 MS.  '' !  (b') 4 MS.
              LAST'(ADJACENT)   @. (D') 4 MS.  '' CONTEXT   (B') 4 MS.  '' @  (B') 4 MS.  '' !  (b') 4 MS.
                          cp'   @. (D') 4 MS.  '' cp        (B') 4 MS.                    '' !  (b') 4 MS.  [A']  ;.


:.  1T   20003000  20003000   1000  P>T   >T   ;.
:.  2T   20003000  20003000   2000  P>T   >T   ;.
:.  3T   20003000  20003000   3000  P>T   >T   ;.
:.  4T   20003000  20003000   4000  P>T   >T   ;.
:.  5T   20003000  20003000   5000  P>T   >T   ;.
:.  6T   20003000  20003000   6000  P>T   >T   ;.
:.  7T   20003000  20003000   7000  P>T   >T   ;.
:.  8T   20003000  20003000   8000  P>T   >T   ;.
:.  9T   20003000  20003000   9000  P>T   >T   ;.
:. 10T   20003000  20003000   A000  P>T   >T   ;.
:. 11T   20003000  20003000   B000  P>T   >T   ;.
:. 12T   20003000  20003000   C000  P>T   >T   ;.
:. 13T   20003000  20003000   D000  P>T   >T   ;.
\  14T   20003000  20003000   E000  P>T   >T   ;.
\  15T   20003000  20003000   F000  P>T   >T   ;.
\  16T   20003000  20003000  10000  P>T   >T   ;.

stm32f746?  @.
#if    new  include  stm32f746org1.f
     \ cf40cf40  dup.  dup.   23ca  32!'    4524  32!'   4582  32!'  \ ??????????????????  cls  .lnc  lnc
#then

pijForth?  @.
#if   include  pijForthKernel4.F
#then

ice40?  @.
#if     include  ice40org2a.f    
#then

mpe407?  @.
#if      new  include  mpe407org4.f    t: my.program.start  ret  \   words'.mpe407.org.all
     :.  words'    3c8  words'.mpe407  ;.
     :.  words''   3c8  words'.mpe407  words'.mpe407.org.all  .lnc  ;.
     :.  words'''  3c8  words'.mpe407  words'.mpe407.org.all  .lnc  ( lnc  ) 0 20u 7u  decompile.mpe407.all  ;.

  :{ {4drop>r0,r1,r2,t}     { r0, r1, r2, t, }  sp  ldm  };    \  t:0a ?????
  :{ {3drop>r0,r1,t}        { r0, r1,     t, }  sp  ldm  };    \  see fill
  :{ {2drop>r0,t}           { r0,         t, }  sp  ldm  };

  '('    385d  c!'  \  recovery (    was replaced with `
  '('    3860  cfa'->cfa*? drop.  cfa*->nfa*  1+. ( E01B10 + 1 )  c!.  \           (    was replaced with `
  '\'    3875  c!'  \  recovery \    was replaced with ~
  '\'    3878  cfa'->cfa*? drop.  cfa*->nfa*  1+. ( E09710 + 1 )  c!.  \           \    was replaced with ~

   :{  {0.swap}    {-nip} 1 0 R=# s=r1 };     \  see MU/MOD
#then

\      cfa'.of.t<h  !.
\      cfa'.of.t>h  !.

\ *********************************************************************************
     cur-file  count.  '' hi  'hi'.sign.on.message.offset ( 0a )  +.  place\__
\ *********************************************************************************

\ :. rsm  replace.sign.on.message  ;.


\ :.  words'  .lnc   lnc  ;.    \  HEX>  INCLUDE  MAP6.F

\ :.  words'   LNC***'   SEE.ALL(LNC)  ;.

\ :.  words''  cls   words'  ;.

    -CR

\  insert{  84f4 org  : bounds ret  8510 org : t>p  ret  8534 org t<p  ret  }insert  84D0  DUP.  100  P<T   \ leak
\  84D4 E48400 !.  \    84d4  '' bounds  cfa'>cfa*  !.     84D4 000084F4 32!'
\  84D4 000084F4 32!'

  '' t<p   cfa'.of.t<h   !.
  '' t>p   cfa'.of.t>h   !.

\ insert{  '' sp0  org  L: ('BOOT)  }insert
  20002110  SYSTEM.VARIABLE.BASE.IN.RAM  !.

  \ copy and paste mapAL4.f to console to get eForth for HT32F1656 mcu.






\  include  mapAL5.f

\  from Albert rs232           mapAL1.f

\  0 900 HEX>IMAGE8
insert{
         0  org

  (         0 )   008 | 002 | 000 | 020 | 055 | 001 | 000 | 000 | 08B | 003 | 000 | 000 | 087 | 003 | 000 | 000 |
  (        10 )   089 | 003 | 000 | 000 | 0B9 | 002 | 000 | 000 | 0A1 | 004 | 000 | 000 | 000 | 000 | 000 | 000 |
  (        20 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 0CB | 003 | 000 | 000 |
  (        30 )   085 | 003 | 000 | 000 | 000 | 000 | 000 | 000 | 08D | 003 | 000 | 000 | 0CD | 003 | 000 | 000 |
  (        40 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        50 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        60 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        70 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        80 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        90 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        A0 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 000 | 000 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        B0 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        C0 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        D0 )   06F | 001 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (        E0 )   000 | 000 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (        F0 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (       100 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (       110 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 000 | 000 | 000 | 000 | 06F | 001 | 000 | 000 |
  (       120 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 |
  (       130 )   06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 06F | 001 | 000 | 000 | 000 | 000 | 000 | 000 |
  (       140 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 |
  (       150 )   06F | 001 | 000 | 000 | 006 | 048 | 080 | 047 | 006 | 048 | 000 | 047 | 0FE | 0E7 | 0FE | 0E7 |
  (       160 )   0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 | 0FE | 0E7 |
  (       170 )   0D1 | 003 | 000 | 000 | 079 | 001 | 000 | 000 | 0DF | 0F8 | 00C | 0D0 | 000 | 0F0 | 038 | 0F8 |
  (       180 )   000 | 048 | 000 | 047 | 0B1 | 007 | 000 | 000 | 008 | 002 | 000 | 020 | 02D | 0E9 | 0F0 | 05F |
  (       190 )   005 | 046 | 000 | 020 | 092 | 046 | 09B | 046 | 088 | 046 | 006 | 046 | 081 | 046 | 040 | 024 |
  (       1A0 )   01B | 0E0 | 028 | 046 | 041 | 046 | 047 | 046 | 022 | 046 | 000 | 0F0 | 042 | 0F8 | 053 | 046 |
  (       1B0 )   05A | 046 | 0C0 | 01A | 091 | 041 | 010 | 0D3 | 011 | 046 | 018 | 046 | 022 | 046 | 000 | 0F0 |
  (       1C0 )   029 | 0F8 | 02D | 01A | 067 | 0EB | 001 | 008 | 04F | 046 | 022 | 046 | 001 | 020 | 000 | 021 |
  (       1D0 )   000 | 0F0 | 020 | 0F8 | 017 | 0EB | 000 | 009 | 04E | 041 | 020 | 01E | 0A4 | 0F1 | 001 | 004 |
  (       1E0 )   0DF | 0DC | 048 | 046 | 031 | 046 | 02A | 046 | 043 | 046 | 0BD | 0E8 | 0F0 | 09F | 000 | 000 |
  (       1F0 )   006 | 04C | 007 | 04D | 006 | 0E0 | 0E0 | 068 | 040 | 0F0 | 001 | 003 | 094 | 0E8 | 007 | 000 |
  (       200 )   098 | 047 | 010 | 034 | 0AC | 042 | 0F6 | 0D3 | 0FF | 0F7 | 0BA | 0FF | 080 | 008 | 000 | 000 |
  (       210 )   0A0 | 008 | 000 | 000 | 020 | 02A | 004 | 0DB | 020 | 03A | 000 | 0FA | 002 | 0F1 | 000 | 020 |
  (       220 )   070 | 047 | 091 | 040 | 0C2 | 0F1 | 020 | 003 | 020 | 0FA | 003 | 0F3 | 019 | 043 | 090 | 040 |
  (       230 )   070 | 047 | 020 | 02A | 004 | 0DB | 020 | 03A | 021 | 0FA | 002 | 0F0 | 000 | 021 | 070 | 047 |
  (       240 )   021 | 0FA | 002 | 0F3 | 0D0 | 040 | 0C2 | 0F1 | 020 | 002 | 091 | 040 | 008 | 043 | 019 | 046 |
  (       250 )   070 | 047 | 000 | 000 | 02D | 0E9 | 0F0 | 047 | 091 | 046 | 016 | 04A | 04F | 0F0 | 0FF | 00A |
  (       260 )   002 | 0EB | 0C0 | 005 | 000 | 022 | 000 | 024 | 00A | 0FA | 002 | 0F0 | 023 | 046 | 008 | 042 |
  (       270 )   019 | 0D0 | 04F | 0F0 | 001 | 00C | 000 | 020 | 00C | 0FA | 002 | 0FC | 04F | 0F0 | 00F | 008 |
  (       280 )   021 | 0FA | 000 | 0F6 | 016 | 0EA | 00C | 00F | 006 | 0D0 | 086 | 000 | 008 | 0FA | 006 | 0F7 |
  (       290 )   03C | 043 | 009 | 0FA | 006 | 0F7 | 03B | 043 | 040 | 01C | 008 | 028 | 0F0 | 0D3 | 028 | 068 |
  (       2A0 )   0A0 | 043 | 018 | 043 | 028 | 060 | 008 | 032 | 02D | 01D | 008 | 02A | 0DB | 0DD | 0BD | 0E8 |
  (       2B0 )   0F0 | 087 | 000 | 000 | 020 | 020 | 002 | 040 | 0FE | 0E7 | 000 | 000 | 070 | 0B5 | 012 | 04E |
  (       2C0 )   004 | 046 | 070 | 06B | 085 | 00F | 000 | 0F0 | 023 | 0F8 | 020 | 060 | 001 | 02D | 005 | 0D0 |
  (       2D0 )   00E | 048 | 002 | 02D | 002 | 0D0 | 003 | 02D | 000 | 0D0 | 000 | 020 | 060 | 060 | 031 | 06A |
  (       2E0 )   0C8 | 040 | 0A0 | 060 | 031 | 068 | 0C1 | 0F3 | 001 | 051 | 020 | 0FA | 001 | 0F1 | 0E1 | 060 |
  (       2F0 )   0B1 | 06A | 0C1 | 0F3 | 002 | 041 | 007 | 029 | 002 | 0D0 | 0C8 | 040 | 020 | 061 | 070 | 0BD |
  (       300 )   006 | 021 | 0B0 | 0FB | 0F1 | 0F0 | 0F9 | 0E7 | 000 | 080 | 008 | 040 | 000 | 012 | 07A | 000 |
  (       310 )   00C | 049 | 0D1 | 0F8 | 0A4 | 000 | 000 | 028 | 013 | 0D0 | 008 | 06A | 00A | 048 | 0D1 | 0F8 |
  (       320 )   0FC | 013 | 001 | 029 | 00D | 0D0 | 009 | 04A | 091 | 069 | 0C1 | 0F3 | 0C5 | 051 | 001 | 0B9 |
  (       330 )   040 | 021 | 092 | 069 | 0C2 | 0F3 | 041 | 053 | 001 | 022 | 09A | 040 | 0B0 | 0FB | 0F2 | 0F0 |
  (       340 )   048 | 043 | 070 | 047 | 000 | 000 | 010 | 043 | 000 | 012 | 07A | 000 | 000 | 080 | 008 | 040 |
  (       350 )   000 | 0B5 | 085 | 0B0 | 068 | 046 | 0FF | 0F7 | 0B1 | 0FF | 003 | 098 | 005 | 0B0 | 000 | 0BD |
  (       360 )   0F0 | 0B5 | 007 | 04F | 07C | 06A | 0FD | 06A | 03E | 06B | 084 | 043 | 08D | 043 | 096 | 043 |
  (       370 )   013 | 0B1 | 004 | 043 | 00D | 043 | 016 | 043 | 07C | 062 | 0FD | 062 | 03E | 063 | 0F0 | 0BD |
  (       380 )   000 | 080 | 008 | 040 | 070 | 047 | 0FE | 0E7 | 0FE | 0E7 | 070 | 047 | 070 | 047 | 010 | 0B5 |
  (       390 )   04F | 0F0 | 080 | 044 | 001 | 021 | 020 | 046 | 000 | 0F0 | 04A | 0F8 | 000 | 028 | 0F9 | 0D0 |
  (       3A0 )   020 | 046 | 0BD | 0E8 | 010 | 040 | 000 | 0F0 | 062 | 0B8 | 070 | 0B5 | 004 | 046 | 0C1 | 0B2 |
  (       3B0 )   04F | 0F0 | 080 | 045 | 028 | 046 | 000 | 0F0 | 067 | 0F8 | 040 | 021 | 028 | 046 | 000 | 0F0 |
  (       3C0 )   037 | 0F8 | 000 | 028 | 0F9 | 0D0 | 020 | 046 | 070 | 0BD | 070 | 047 | 070 | 047 | 000 | 000 |
  (       3D0 )   014 | 048 | 001 | 021 | 0C0 | 0F8 | 000 | 013 | 013 | 04A | 0C2 | 0F8 | 0A8 | 010 | 0D2 | 0F8 |
  (       3E0 )   008 | 031 | 000 | 02B | 0FB | 0D0 | 000 | 023 | 013 | 062 | 04F | 0F0 | 010 | 063 | 083 | 061 |
  (       3F0 )   0C2 | 0F8 | 0A4 | 010 | 0D2 | 0F8 | 004 | 031 | 000 | 02B | 0FB | 0D0 | 00B | 04A | 0D2 | 0F8 |
  (       400 )   000 | 032 | 023 | 0F0 | 007 | 003 | 0DB | 01C | 0C2 | 0F8 | 000 | 032 | 001 | 062 | 042 | 068 |
  (       410 )   022 | 0F0 | 003 | 002 | 052 | 01C | 042 | 060 | 042 | 06B | 0B1 | 0EB | 092 | 07F | 0FB | 0D1 |
  (       420 )   070 | 047 | 000 | 000 | 000 | 080 | 008 | 040 | 000 | 000 | 010 | 043 | 000 | 000 | 008 | 040 |
  (       430 )   080 | 069 | 008 | 040 | 000 | 0D0 | 001 | 020 | 070 | 047 | 070 | 0B5 | 005 | 046 | 00C | 046 |
  (       440 )   0C8 | 088 | 089 | 088 | 02A | 069 | 008 | 043 | 021 | 089 | 022 | 0F0 | 01F | 002 | 011 | 043 |
  (       450 )   008 | 043 | 028 | 061 | 068 | 06A | 061 | 089 | 020 | 0F0 | 003 | 000 | 008 | 043 | 068 | 062 |
  (       460 )   0FF | 0F7 | 076 | 0FF | 021 | 068 | 0B0 | 0FB | 0F1 | 0F0 | 0A8 | 063 | 070 | 0BD | 000 | 068 |
  (       470 )   080 | 0B2 | 070 | 047 | 000 | 029 | 0C1 | 068 | 002 | 0D0 | 041 | 0F4 | 000 | 071 | 001 | 0E0 |
  (       480 )   021 | 0F4 | 000 | 071 | 0C1 | 060 | 070 | 047 | 001 | 060 | 070 | 047 | 000 | 029 | 0C1 | 068 |
  (       490 )   002 | 0D0 | 041 | 0F4 | 080 | 071 | 001 | 0E0 | 021 | 0F4 | 080 | 071 | 0C1 | 060 | 070 | 047 |
  (       4A0 )   0FE | 0E7 | 000 | 000 | 00F | 0B4 | 005 | 04B | 010 | 0B5 | 003 | 0A9 | 004 | 04A | 002 | 098 |
  (       4B0 )   000 | 0F0 | 018 | 0F8 | 010 | 0BC | 05D | 0F8 | 014 | 0FB | 000 | 000 | 0A9 | 007 | 000 | 000 |
  (       4C0 )   000 | 000 | 000 | 020 | 002 | 0E0 | 008 | 0C8 | 012 | 01F | 008 | 0C1 | 000 | 02A | 0FA | 0D1 |
  (       4D0 )   070 | 047 | 070 | 047 | 000 | 020 | 001 | 0E0 | 001 | 0C1 | 012 | 01F | 000 | 02A | 0FB | 0D1 |
  (       4E0 )   070 | 047 | 000 | 000 | 02D | 0E9 | 0FF | 04F | 08D | 0B0 | 09B | 046 | 00F | 046 | 004 | 046 |
  (       4F0 )   000 | 026 | 006 | 0E0 | 025 | 028 | 00B | 0D0 | 05A | 046 | 00F | 099 | 090 | 047 | 064 | 01C |
  (       500 )   076 | 01C | 020 | 078 | 000 | 028 | 0F5 | 0D1 | 011 | 0B0 | 030 | 046 | 0BD | 0E8 | 0F0 | 08F |
  (       510 )   000 | 025 | 0A8 | 046 | 001 | 022 | 098 | 049 | 000 | 0E0 | 005 | 043 | 014 | 0F8 | 001 | 03F |
  (       520 )   020 | 03B | 002 | 0FA | 003 | 0F0 | 008 | 042 | 0F7 | 0D1 | 020 | 078 | 02E | 028 | 017 | 0D1 |
  (       530 )   014 | 0F8 | 001 | 00F | 045 | 0F0 | 004 | 005 | 02A | 028 | 00E | 0D0 | 06F | 0F0 | 02F | 002 |
  (       540 )   020 | 078 | 0A0 | 0F1 | 030 | 001 | 009 | 029 | 00A | 0D8 | 008 | 0EB | 088 | 001 | 002 | 0EB |
  (       550 )   041 | 001 | 000 | 0EB | 001 | 008 | 064 | 01C | 0F2 | 0E7 | 057 | 0F8 | 004 | 08B | 064 | 01C |
  (       560 )   020 | 078 | 06C | 028 | 00D | 0D0 | 004 | 0DC | 04C | 028 | 012 | 0D0 | 06A | 028 | 011 | 0D1 |
  (       570 )   004 | 0E0 | 074 | 028 | 00D | 0D0 | 07A | 028 | 00C | 0D1 | 00A | 0E0 | 045 | 0F4 | 000 | 015 |
  (       580 )   007 | 0E0 | 061 | 078 | 045 | 0F4 | 080 | 015 | 081 | 042 | 002 | 0D1 | 064 | 01C | 005 | 0F5 |
  (       590 )   080 | 015 | 064 | 01C | 022 | 078 | 069 | 02A | 045 | 0D0 | 008 | 0DC | 000 | 02A | 0B3 | 0D0 |
  (       5A0 )   058 | 02A | 069 | 0D0 | 063 | 02A | 010 | 0D0 | 064 | 02A | 008 | 0D1 | 03B | 0E0 | 070 | 02A |
  (       5B0 )   067 | 0D0 | 073 | 02A | 013 | 0D0 | 075 | 02A | 05C | 0D0 | 078 | 02A | 05C | 0D0 | 010 | 046 |
  (       5C0 )   05A | 046 | 00F | 099 | 090 | 047 | 076 | 01C | 0D3 | 0E0 | 017 | 0F8 | 004 | 00B | 08D | 0F8 |
  (       5D0 )   000 | 000 | 000 | 020 | 08D | 0F8 | 001 | 000 | 0E9 | 046 | 001 | 020 | 003 | 0E0 | 057 | 0F8 |
  (       5E0 )   004 | 09B | 04F | 0F0 | 0FF | 030 | 069 | 007 | 04F | 0F0 | 000 | 005 | 001 | 0D4 | 00A | 0E0 |
  (       5F0 )   06D | 01C | 045 | 045 | 00D | 0DA | 085 | 042 | 0FA | 0DB | 019 | 0F8 | 005 | 010 | 000 | 029 |
  (       600 )   0F6 | 0D1 | 006 | 0E0 | 06D | 01C | 085 | 042 | 0FC | 0DB | 019 | 0F8 | 005 | 010 | 000 | 029 |
  (       610 )   0F8 | 0D1 | 02E | 044 | 004 | 0E0 | 019 | 0F8 | 001 | 00B | 05A | 046 | 00F | 099 | 090 | 047 |
  (       620 )   06D | 01E | 0F8 | 0D2 | 0A5 | 0E0 | 00A | 020 | 000 | 021 | 0CD | 0E9 | 008 | 001 | 0C5 | 0F3 |
  (       630 )   002 | 050 | 002 | 028 | 00D | 0D0 | 001 | 0CF | 0C1 | 017 | 003 | 01E | 071 | 0F1 | 000 | 003 |
  (       640 )   00D | 0DA | 04F | 0F0 | 000 | 00C | 0D0 | 0EB | 00C | 000 | 06C | 0EB | 001 | 001 | 02D | 023 |
  (       650 )   008 | 0E0 | 0FF | 01D | 027 | 0F0 | 007 | 007 | 0F7 | 0E8 | 002 | 001 | 0ED | 0E7 | 02B | 005 |
  (       660 )   004 | 0D5 | 02B | 023 | 08D | 0F8 | 028 | 030 | 001 | 023 | 03B | 0E0 | 0EB | 007 | 039 | 0D0 |
  (       670 )   020 | 023 | 0F7 | 0E7 | 00A | 020 | 000 | 0E0 | 010 | 020 | 000 | 021 | 0CD | 0E9 | 008 | 001 |
  (       680 )   007 | 0E0 | 010 | 020 | 000 | 021 | 045 | 0F0 | 004 | 005 | 0CD | 0E9 | 008 | 001 | 04F | 0F0 |
  (       690 )   008 | 008 | 0C5 | 0F3 | 002 | 050 | 002 | 028 | 00F | 0D0 | 001 | 0CF | 000 | 021 | 04F | 0F0 |
  (       6A0 )   000 | 00A | 02B | 007 | 01F | 0D5 | 070 | 02A | 00D | 0D0 | 0DD | 0E9 | 008 | 0C3 | 08C | 0F0 |
  (       6B0 )   010 | 00C | 05C | 0EA | 003 | 00C | 00C | 0D0 | 015 | 0E0 | 0FF | 01D | 027 | 0F0 | 007 | 007 |
  (       6C0 )   0F7 | 0E8 | 002 | 001 | 0EB | 0E7 | 040 | 022 | 08D | 0F8 | 028 | 020 | 04F | 0F0 | 001 | 00A |
  (       6D0 )   00B | 0E0 | 050 | 0EA | 001 | 003 | 006 | 0D0 | 030 | 023 | 08D | 0F8 | 028 | 030 | 08D | 0F8 |
  (       6E0 )   029 | 020 | 002 | 023 | 09A | 046 | 058 | 02A | 004 | 0D0 | 024 | 0A2 | 00D | 0F1 | 020 | 009 |
  (       6F0 )   00B | 092 | 009 | 0E0 | 026 | 0A2 | 0F9 | 0E7 | 0DD | 0E9 | 008 | 023 | 0FF | 0F7 | 046 | 0FD |
  (       700 )   00B | 09B | 09B | 05C | 009 | 0F8 | 001 | 03D | 050 | 0EA | 001 | 002 | 0F4 | 0D1 | 0AD | 0EB |
  (       710 )   009 | 000 | 020 | 030 | 008 | 090 | 068 | 007 | 001 | 0D4 | 04F | 0F0 | 001 | 008 | 008 | 099 |
  (       720 )   088 | 045 | 002 | 0DD | 0A8 | 0EB | 001 | 000 | 000 | 0E0 | 000 | 020 | 080 | 046 | 000 | 025 |
  (       730 )   006 | 0E0 | 00A | 0A8 | 05A | 046 | 040 | 05D | 00F | 099 | 090 | 047 | 06D | 01C | 076 | 01C |
  (       740 )   055 | 045 | 0F6 | 0DB | 004 | 0E0 | 030 | 020 | 05A | 046 | 00F | 099 | 090 | 047 | 076 | 01C |
  (       750 )   0B8 | 0F1 | 000 | 001 | 0A8 | 0F1 | 001 | 008 | 0F5 | 0DC | 005 | 0E0 | 019 | 0F8 | 001 | 00B |
  (       760 )   05A | 046 | 00F | 099 | 090 | 047 | 076 | 01C | 008 | 099 | 048 | 01E | 008 | 090 | 000 | 029 |
  (       770 )   0F4 | 0DC | 064 | 01C | 0C5 | 0E6 | 000 | 000 | 009 | 028 | 001 | 000 | 030 | 031 | 032 | 033 |
  (       780 )   034 | 035 | 036 | 037 | 038 | 039 | 061 | 062 | 063 | 064 | 065 | 066 | 000 | 000 | 000 | 000 |
  (       790 )   030 | 031 | 032 | 033 | 034 | 035 | 036 | 037 | 038 | 039 | 041 | 042 | 043 | 044 | 045 | 046 |
  (       7A0 )   000 | 000 | 000 | 000 | 0FF | 0F7 | 0F3 | 0BD | 0FF | 0F7 | 0FF | 0BD | 0FF | 0F7 | 0FA | 0BF |
  (       7B0 )   00E | 0B5 | 000 | 024 | 022 | 046 | 04F | 0F4 | 082 | 041 | 001 | 023 | 010 | 046 | 0FF | 0F7 |
  (       7C0 )   0CF | 0FD | 006 | 022 | 00C | 021 | 000 | 020 | 0FF | 0F7 | 044 | 0FD | 04F | 0F4 | 0E1 | 030 |
  (       7D0 )   000 | 090 | 001 | 020 | 0AD | 0F8 | 004 | 000 | 0AD | 0F8 | 008 | 040 | 0AD | 0F8 | 006 | 040 |
  (       7E0 )   0AD | 0F8 | 00A | 040 | 084 | 007 | 069 | 046 | 020 | 046 | 0FF | 0F7 | 026 | 0FE | 001 | 021 |
  (       7F0 )   020 | 046 | 0FF | 0F7 | 04B | 0FE | 001 | 021 | 020 | 046 | 0FF | 0F7 | 03B | 0FE | 000 | 024 |
  (       800 )   021 | 046 | 009 | 0A0 | 0FF | 0F7 | 04E | 0FE | 064 | 01C | 00A | 02C | 0F8 | 0DB | 007 | 0F0 |
  (       810 )   097 | 0BD | 048 | 0FE | 011 | 048 | 0FF | 0F7 | 0C9 | 0FF | 001 | 046 | 002 | 046 | 010 | 0A0 |
  (       820 )   0FF | 0F7 | 040 | 0FE | 0F3 | 0E7 | 000 | 000 | 048 | 065 | 06C | 06C | 06F | 020 | 057 | 06F |
  (       830 )   072 | 06C | 064 | 021 | 020 | 025 | 064 | 00D | 00A | 000 | 000 | 000 | 050 | 06C | 065 | 061 |
  (       840 )   073 | 065 | 020 | 069 | 06E | 070 | 075 | 074 | 020 | 06B | 065 | 079 | 020 | 066 | 06F | 072 |
  (       850 )   020 | 070 | 072 | 069 | 06E | 074 | 066 | 02E | 02E | 02E | 02E | 000 | 004 | 000 | 000 | 020 |
  (       860 )   00D | 00A | 059 | 06F | 075 | 072 | 020 | 069 | 06E | 070 | 075 | 074 | 020 | 069 | 073 | 020 |
  (       870 )   025 | 063 | 05B | 030 | 078 | 025 | 078 | 05D | 00D | 00A | 00D | 00A | 000 | 000 | 000 | 000 |
  (       880 )   0A0 | 008 | 000 | 000 | 000 | 000 | 000 | 020 | 008 | 000 | 000 | 000 | 0C4 | 004 | 000 | 000 |
  (       890 )   0A8 | 008 | 000 | 000 | 008 | 000 | 000 | 020 | 000 | 002 | 000 | 000 | 0D4 | 004 | 000 | 000 |
  (       8A0 )   000 | 000 | 000 | 000 | 000 | 000 | 000 | 000 | 09B | 01C | 0C1 | 0F3 | 044 | 021 | 05A | 043 |
  (       8B0 )   089 | 01C | 0B2 | 0FB | 0F1 | 0F1 | 0B1 | 0FB | 0F0 | 0F0 | 070 | 047 | 000 | 080 | 051 | 001 |
  (       8C0 )   000 | 01B | 0B7 | 000 | 04F | 0F0 | 080 | 042 | 0D2 | 0F8 | 020 | 032 | 023 | 0F0 | 00F | 003 |
  (       8D0 )   00B | 043 | 0C2 | 0F8 | 020 | 032 | 0D2 | 0F8 | 010 | 012 | 021 | 0F0 | 007 | 001 | 001 | 043 |
  (       8E0 )   0C2 | 0F8 | 010 | 012 | 000 | 0F0 | 0F6 | 0B8 | 070 | 0B5 | 010 | 0F4 | 07F | 03F | 00D | 0D0 |
  (       8F0 )   010 | 04C | 0C0 | 0F3 | 081 | 043 | 004 | 0EB | 083 | 004 | 023 | 068 | 0C0 | 0F3 | 087 | 025 |
}insert

comment:

 hex>

:020000040000FA
:1000000008020020550100008B0300008703000058
:1000100089030000B9020000A104000000000000F4
:10002000000000000000000000000000CB03000002
:1000300085030000000000008D030000CD030000D8
:100040006F0100006F0100006F0100006F010000F0
:100050006F0100006F0100006F0100006F010000E0
:100060006F0100006F0100006F0100006F010000D0
:100070006F0100006F0100006F0100006F010000C0
:100080006F0100006F0100006F0100006F010000B0
:100090006F0100006F0100006F0100006F010000A0
:1000A0006F0100006F010000000000006F01000000
:1000B0006F0100006F0100006F0100006F01000080
:1000C0006F0100006F0100006F0100006F01000070
:1000D0006F010000000000000000000000000000B0
:1000E000000000006F0100006F0100006F010000C0
:1000F0006F0100006F0100006F0100006F01000040
:100100006F0100006F0100006F0100006F0100002F
:100110006F0100006F010000000000006F0100008F
:100120006F0100006F0100006F0100006F0100000F
:100130006F0100006F0100006F010000000000006F
:1001400000000000000000000000000000000000AF
:100150006F0100000648804706480047FEE7FEE7BB
:10016000FEE7FEE7FEE7FEE7FEE7FEE7FEE7FEE767
:10017000D103000079010000DFF80CD000F038F85E
:1001800000480047B1070000080200202DE9F05F99
:100190000546002092469B468846064681464024F6
:1001A0001BE0284641464746224600F042F85346A7
:1001B0005A46C01A914110D311461846224600F003
:1001C00029F82D1A67EB01084F462246012000212D
:1001D00000F020F817EB00094E41201EA4F10104A5
:1001E000DFDC484631462A464346BDE8F09F000022
:1001F000064C074D06E0E06840F0010394E8070074
:1002000098471034AC42F6D3FFF7BAFF80080000DD
:10021000A0080000202A04DB203A00FA02F10020A6
:1002200070479140C2F1200320FA03F31943904034
:100230007047202A04DB203A21FA02F0002170479F
:1002400021FA02F3D040C2F120029140084319463E
:10025000704700002DE9F0479146164A4FF0FF0A1B
:1002600002EBC005002200240AFA02F023460842ED
:1002700019D04FF0010C00200CFA02FC4FF00F08CF
:1002800021FA00F616EA0C0F06D0860008FA06F7E7
:100290003C4309FA06F73B43401C0828F0D3286882
:1002A000A0431843286008322D1D082ADBDDBDE875
:1002B000F087000020200240FEE7000070B5124EDB
:1002C0000446706B850F00F023F82060012D05D0E7
:1002D0000E48022D02D0032D00D000206060316A4C
:1002E000C840A0603168C1F3015120FA01F1E1601A
:1002F000B16AC1F30241072902D0C840206170BD34
:100300000621B0FBF1F0F9E70080084000127A0006
:100310000C49D1F8A400002813D0086A0A48D1F883
:10032000FC1301290DD0094A9169C1F3C55101B9E6
:1003300040219269C2F3415301229A40B0FBF2F08E
:10034000484370470000104300127A0000800840C4
:1003500000B585B06846FFF7B1FF039805B000BD52
:10036000F0B5074F7C6AFD6A3E6B84438D4396432C
:1003700013B104430D4316437C62FD623E63F0BD3E
:10038000008008407047FEE7FEE77047704710B5F1
:100390004FF080440121204600F04AF80028F9D0AF
:1003A0002046BDE8104000F062B870B50446C1B206
:1003B0004FF08045284600F067F84021284600F0BD
:1003C00037F80028F9D0204670BD7047704700000C
:1003D00014480121C0F80013134AC2F8A810D2F83B
:1003E0000831002BFBD0002313624FF010638361B0
:1003F000C2F8A410D2F80431002BFBD00B4AD2F87B
:10040000003223F00703DB1CC2F8003201624268AD
:1004100022F00302521C4260426BB1EB927FFBD18F
:1004200070470000008008400000104300000840B2
:100430008069084000D00120704770B505460C4621
:10044000C88889882A690843218922F01F0211433C
:1004500008432861686A618920F0030008436862E4
:10046000FFF776FF2168B0FBF1F0A86370BD00686C
:1004700080B270470029C16802D041F4007101E0E8
:1004800021F40071C1607047016070470029C168A4
:1004900002D041F4807101E021F48071C1607047A5
:1004A000FEE700000FB4054B10B503A9044A0298FB
:1004B00000F018F810BC5DF814FB0000A90700005C
:1004C0000000002002E008C8121F08C1002AFAD16B
:1004D00070477047002001E001C1121F002AFBD1C4
:1004E000704700002DE9FF4F8DB09B460F46044634
:1004F000002606E025280BD05A460F999047641C29
:10050000761C20780028F5D111B03046BDE8F08F78
:100510000025A8460122984900E0054314F8013F50
:10052000203B02FA03F00842F7D120782E2817D199
:1005300014F8010F45F004052A280ED06FF02F02A1
:100540002078A0F1300109290AD808EB880102EBD4
:10055000410100EB0108641CF2E757F8048B641CAE
:1005600020786C280DD004DC4C2812D06A2811D1D8
:1005700004E074280DD07A280CD10AE045F4001567
:1005800007E0617845F48015814202D1641C05F5CD
:100590008015641C2278692A45D008DC002AB3D073
:1005A000582A69D0632A10D0642A08D13BE0702A07
:1005B00067D0732A13D0752A5CD0782A5CD0104695
:1005C0005A460F999047761CD3E017F8040B8DF824
:1005D000000000208DF80100E946012003E057F8F3
:1005E000049B4FF0FF3069074FF0000501D40AE08B
:1005F0006D1C45450DDA8542FADB19F80510002916
:10060000F6D106E06D1C8542FCDB19F805100029C7
:10061000F8D12E4404E019F8010B5A460F9990477F
:100620006D1EF8D2A5E00A200021CDE90801C5F32E
:10063000025002280DD001CFC117031E71F1000333
:100640000DDA4FF0000CD0EB0C006CEB01012D2308
:1006500008E0FF1D27F00707F7E80201EDE72B058B
:1006600004D52B238DF8283001233BE0EB0739D04C
:100670002023F7E70A2000E010200021CDE908013F
:1006800007E01020002145F00405CDE908014FF0F6
:100690000808C5F3025002280FD001CF00214FF007
:1006A000000A2B071FD5702A0DD0DDE908C38CF096
:1006B000100C5CEA030C0CD015E0FF1D27F00707B7
:1006C000F7E80201EBE740228DF828204FF0010AFD
:1006D0000BE050EA010306D030238DF828308DF866
:1006E000292002239A46582A04D024A20DF1200979
:1006F0000B9209E026A2F9E7DDE90823FFF746FDA2
:100700000B9B9B5C09F8013D50EA0102F4D1ADEB73
:10071000090020300890680701D44FF001080899BB
:10072000884502DDA8EB010000E00020804600259E
:1007300006E00AA85A46405D0F9990476D1C761C4A
:100740005545F6DB04E030205A460F999047761C59
:10075000B8F10001A8F10108F5DC05E019F8010B7A
:100760005A460F999047761C0899481E0890002910
:10077000F4DC641CC5E60000092801003031323386
:1007800034353637383961626364656600000000CD
:1007900030313233343536373839414243444546B7
:1007A00000000000FFF7F3BDFFF7FFBDFFF7FABF42
:1007B0000EB5002422464FF4824101231046FFF774
:1007C000CFFD06220C210020FFF744FD4FF4E1305D
:1007D00000900120ADF80400ADF80840ADF80640E7
:1007E000ADF80A40840769462046FFF726FE01213E
:1007F0002046FFF74BFE01212046FFF73BFE002479
:10080000214609A0FFF74EFE641C0A2CF8DB0BA062
:10081000FFF748FE1148FFF7C9FF0146024610A046
:10082000FFF740FEF3E7000048656C6C6F20576FE0
:10083000726C64212025640D0A000000506C656113
:10084000736520696E707574206B657920666F72B0
:10085000207072696E74662E2E2E2E000400002009
:100860000D0A596F757220696E7075742069732056
:1008700025635B307825785D0D0A0D0A00000000C5
:10088000A00800000000002008000000C4040000D0
:10089000A80800000800002000020000D4040000A6
:0808A000000000000000000050
:0400000500000155A1
:00000001FF
comment;

keil:  Reset_Handler                            00000155   \ Thumb Code     8  startup_ht32f165x.o(RESET)
keil:  ADC_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  BFTM0_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  BFTM1_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  BOD_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  CKRDY_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  COMP_IRQHandler                          0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EBI_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EVWUP_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI0_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI10_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI11_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI12_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI13_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI14_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI15_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI1_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI2_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI3_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI4_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI5_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI6_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI7_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI8_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  EXTI9_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  FLASH_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  GPTM0_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  GPTM1_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  I2C0_IRQHandler                          0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  I2C1_IRQHandler                          0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  I2S_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  LPWUP_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  LVD_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM0BRK_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM0CC_IRQHandler                       0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM0TR_IRQHandler                       0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM0UP_IRQHandler                       0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM1BRK_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM1CC_IRQHandler                       0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM1TR_IRQHandler                       0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  MCTM1UP_IRQHandler                       0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH0_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH1_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH2_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH3_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH4_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH5_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH6_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  PDMA_CH7_IRQHandler                      0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  RTC_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  SCI_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  SPI0_IRQHandler                          0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  SPI1_IRQHandler                          0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  UART0_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  UART1_IRQHandler                         0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  USART0_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  USART1_IRQHandler                        0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  USB_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  WDT_IRQHandler                           0000016f   \ Thumb Code     0  startup_ht32f165x.o(RESET)
keil:  __main                                   00000179   \ Thumb Code     0  entry.o(.ARM.Collect$$$$00000000)
keil:  _main_stk                                00000179   \ Thumb Code     0  entry2.o(.ARM.Collect$$$$00000001)
keil:  _main_scatterload                        0000017d   \ Thumb Code     0  entry5.o(.ARM.Collect$$$$00000004)
keil:  __main_after_scatterload                 00000181   \ Thumb Code     0  entry5.o(.ARM.Collect$$$$00000004)
keil:  _main_clock                              00000181   \ Thumb Code     0  entry7b.o(.ARM.Collect$$$$00000008)
keil:  _main_cpp_init                           00000181   \ Thumb Code     0  entry8b.o(.ARM.Collect$$$$0000000A)
keil:  _main_init                               00000181   \ Thumb Code     0  entry9a.o(.ARM.Collect$$$$0000000B)
keil:  __rt_final_cpp                           00000189   \ Thumb Code     0  entry10a.o(.ARM.Collect$$$$0000000D)
keil:  __rt_final_exit                          00000189   \ Thumb Code     0  entry11a.o(.ARM.Collect$$$$0000000F)
keil:  __aeabi_uldivmod                         0000018d   \ Thumb Code    98  uldiv.o(.text)
keil:  __scatterload                            000001f1   \ Thumb Code    28  init.o(.text)
keil:  __scatterload_rt2                        000001f1   \ Thumb Code     0  init.o(.text)
keil:  __aeabi_llsl                             00000215   \ Thumb Code    30  llshl.o(.text)
keil:  _ll_shift_l                              00000215   \ Thumb Code     0  llshl.o(.text)
keil:  __aeabi_llsr                             00000233   \ Thumb Code    32  llushr.o(.text)
keil:  _ll_ushift_r                             00000233   \ Thumb Code     0  llushr.o(.text)
keil:  AFIO_GPxConfig                           00000255   \ Thumb Code    94  ht32f1655_56_gpio.o(i.AFIO_GPxConfig)
keil:  BusFault_Handler                         000002b9   \ Thumb Code     2  ht32f165x_it.o(i.BusFault_Handler)
keil:  CKCU_GetClocksFrequency                  000002bd   \ Thumb Code    76  ht32f1655_56_ckcu.o(i.CKCU_GetClocksFrequency)
keil:  CKCU_GetPLLFrequency                     00000311   \ Thumb Code    52  ht32f1655_56_ckcu.o(i.CKCU_GetPLLFrequency)
keil:  CKCU_GetUSARTClockFreq                   00000351   \ Thumb Code    16  ht32f1655_56_ckcu.o(i.CKCU_GetUSARTClockFreq)
keil:  CKCU_PeripClockConfig                    00000361   \ Thumb Code    32  ht32f1655_56_ckcu.o(i.CKCU_PeripClockConfig)
keil:  DebugMon_Handler                         00000385   \ Thumb Code     2  ht32f165x_it.o(i.DebugMon_Handler)
keil:  HardFault_Handler                        00000387   \ Thumb Code     2  ht32f165x_it.o(i.HardFault_Handler)
keil:  MemManage_Handler                        00000389   \ Thumb Code     2  ht32f165x_it.o(i.MemManage_Handler)
keil:  NMI_Handler                              0000038b   \ Thumb Code     2  ht32f165x_it.o(i.NMI_Handler)
keil:  PendSV_Handler                           0000038d   \ Thumb Code     2  ht32f165x_it.o(i.PendSV_Handler)
keil:  SERIAL_GetChar                           0000038f   \ Thumb Code    28  ht32_serial.o(i.SERIAL_GetChar)
keil:  SERIAL_PutChar                           000003ab   \ Thumb Code    32  ht32_serial.o(i.SERIAL_PutChar)
keil:  SVC_Handler                              000003cb   \ Thumb Code     2  ht32f165x_it.o(i.SVC_Handler)
keil:  SysTick_Handler                          000003cd   \ Thumb Code     2  ht32f165x_it.o(i.SysTick_Handler)
keil:  SystemInit                               000003d1   \ Thumb Code    82  system_ht32f165x.o(i.SystemInit)
keil:  USART_GetLineStatus                      00000431   \ Thumb Code    10  ht32f1655_56_usart.o(i.USART_GetLineStatus)
keil:  USART_Init                               0000043b   \ Thumb Code    52  ht32f1655_56_usart.o(i.USART_Init)
keil:  USART_ReceiveData                        0000046f   \ Thumb Code     6  ht32f1655_56_usart.o(i.USART_ReceiveData)
keil:  USART_RxCmd                              00000475   \ Thumb Code    20  ht32f1655_56_usart.o(i.USART_RxCmd)
keil:  USART_SendData                           00000489   \ Thumb Code     4  ht32f1655_56_usart.o(i.USART_SendData)
keil:  USART_TxCmd                              0000048d   \ Thumb Code    20  ht32f1655_56_usart.o(i.USART_TxCmd)
keil:  UsageFault_Handler                       000004a1   \ Thumb Code     2  ht32f165x_it.o(i.UsageFault_Handler)
keil:  __0printf$5                              000004a5   \ Thumb Code    22  printf5.o(i.__0printf$5)
keil:  __1printf$5                              000004a5   \ Thumb Code     0  printf5.o(i.__0printf$5)
keil:  __2printf                                000004a5   \ Thumb Code     0  printf5.o(i.__0printf$5)
keil:  __scatterload_copy                       000004c5   \ Thumb Code    14  handlers.o(i.__scatterload_copy)
keil:  __scatterload_null                       000004d3   \ Thumb Code     2  handlers.o(i.__scatterload_null)
keil:  __scatterload_zeroinit                   000004d5   \ Thumb Code    14  handlers.o(i.__scatterload_zeroinit)
keil:  fgetc                                    000007a5   \ Thumb Code     4  ht32_retarget.o(i.fgetc)
keil:  fputc                                    000007a9   \ Thumb Code     4  ht32_retarget.o(i.fputc)
keil:  getc                                     000007ad   \ Thumb Code     4  getc.o(i.getc)
keil:  main                                     000007b1   \ Thumb Code   118  main.o(i.main)
keil:  Region$$Table$$Base                      00000880   \ Number         0  anon$$obj.o(Region$$Table)
keil:  Region$$Table$$Limit                     000008a0   \ Number         0  anon$$obj.o(Region$$Table)
keil:  __stdout                                 20000000   \ Data           4  ht32_retarget.o(.data)
keil:  __stdin                                  20000004   \ Data           4  ht32_retarget.o(.data)
keil:  __initial_sp                             20000208   \ Data           0  startup_ht32f165x.o(STACK)

insert{  3F00  org
  : tx!(HT32F1565) ( c -- )                   1|0 SERIAL_PutChar  ;    \  `  is different from '

  t: ?rx(HT32F1565) ( -- c -1 / 0 )   push.LR   {0}   r0=40000000  r1=1  R0=(R0+18)  R0nR1
     if'=  ret  then'  T=40000000     {C@}     {-1}   ret

comment:                         \  HT32F1656
  \ *******************************************************************************                                     L:  USART_GetLineStatus    ( r0 r1 -- r0 )          \ 5B / 71       91 / 113
                                    L:  USART_GetLineStatus    ( r0 r1 -- r0 )          \ 5B / 71       91 / 113
  (  00000430  80 69             )                  R0=(R0+18)   \ R0=(40000000+18)
  (  00000432  08 40             )                  R0nR1        \ R1=40
  (  00000434  00 D0             )       if'<> \ z=1? eq?            \ 00000434 --> 00000438 ----------------------------
  (  00000436  01 20             )                  R0=1
                                         then'                       \ 00000434 --> 00000438 ----------------------------
  (  00000438  70 47             )                  jmp_LR
  \ *******************************************************************************
                                 \  stm32F429 eForth
                                    t:  ?RX                                                   \ cfa= 20020870
  (  20020870  04 3F 3E 60       )                  {dup}
  (  20020874  08 4A             )                  R2=40011000          \ USART1_BASE            \ (20020898)=40011000
  (  20020876  11 68             )                  R1=(R2+0)
  (  20020878  11 F0 20 01       )                  R1=R1n20,s
  (  2002087C  07 D0             )      if'<>     \ 2002088E....z=1?(=?)
  (  2002087E  04 32             )                  R2+4,s
  (  20020880  92 F9 00 60       )                  T=(R2+0)b
  (  20020884  04 3F 3E 60       )                  {dup}
  (  20020888  6F F0 00 06       )                  T=-1
  (  2002088C  00 E0             )      else'     \ jmp_20020890    \
  (  2002088E  B6 1B             )                  T=0
  (  20020890  92 F9 00 00       )      then'       R0=(R2+0)b
  (  20020894  70 47             )                  ret'
comment;

}insert

   ''   tx!(HT32F1565)     ''  uart.switch.stm32F429.eF    516C  514C   -.    +.   32!'
   ''   ?rx(HT32F1565)     ''  uart.switch.stm32F429.eF    5170  514C   -.    +.   32!'

   ''   tx!(HT32F1565)   ( ''  intial.system.variable )    4040    405c  4040   -.    +.   32!'
   ''   ?rx(HT32F1565)   ( ''  intial.system.variable )    4040    4058  4040   -.    +.   32!'

  insert{  0000080E  org      '' COLD  jmp_#24  }insert
\ insert{      8390  org   tF                   }insert

   dos  del  1.hex

   1.hex

\ dos copy 1.hex C:\Keil_v5\HT32F1655_56_FWLib_v102_960\project_template\IP\Example_SK\MDK_ARM\HT32\Obj\HT32.axf

  dos  del   1.hex
             1.hex

\ dos  copy  1.hex  D:\nuvoton\NUC472_NUC442_BSP_CMSIS_V3.01.001\SampleCode\Template\Keil\obj\template.axf
\ dos  copy  1.hex  C:\Keil_v5\HT32F1655_56_FWLib_v102_960\project_template\IP\Example_SK\MDK_ARM\HT32\Obj\HT32.axf

forward.link?   @.   drop.  0
#if      :.  :    t:   push.lr  ;.        :.  ;   ret   ;.
\        :.  :   ef:   push.lr  ;.     \  :.  :   ef:  (+target)  on.  ;.   
#else   :.  :     t:mecrispForth.stm32F051   push.LR  ;.     :.   ;    ret    correcting.instruction.style  ;.
        :.  code  t:mecrispForth.stm32F051   ;.              :.   c;   ret'   correcting.instruction.style  ;.
#then





forward.link?   @.
#if    :.  mF:  T:MECRISPFORTH.STM32F051  ;.
       remove.offset?  on.  \ new
   303?  @.
   #if     new  \ include  stm32F303mecrispForthOrg4.F   \ 5c0  first.lfa'  !.


   (    1 )       5C0  org  mF:    2dup
   (    2 )       5E4  org  mF:    2drop
   (    3 )       602  org  mF:    2swap
   (    4 )       648  org  mF:    2nip
   (    5 )       670  org  mF:    2over
   (    6 )       68A  org  mF:    2tuck
   (    7 )       6AE  org  mF:    2rot
   (    8 )       6D0  org  mF:    2-rot
   (    9 )       6F2  org  mF:    2>r
   (   10 )       71A  org  mF:    2r>
   (   11 )       746  org  mF:    2r@
   (   12 )       776  org  mF:    2rdrop
   (   13 )       79C  org  mF:    d2/
   (   14 )       7B4  org  mF:    d2*
   (   15 )       7CA  org  mF:    dshr
   (   16 )       7E4  org  mF:    dshl
   (   17 )       830  org  mF:    dabs
   (   18 )       842  org  mF:    dnegate
   (   19 )       860  org  mF:    d-
   (   20 )       8B0  org  mF:    d+
   (   21 )       8FE  org  mF:    s>d
   (   22 )       928  org  mF:    um*
   (   23 )       986  org  mF:    m*
   (   24 )       9A4  org  mF:    ud*
   (   25 )       9E2  org  mF:    udm*
   (   26 )       A74  org  mF:    */
   (   27 )       A96  org  mF:    */mod
   (   28 )       AB8  org  mF:    u*/
   (   29 )       ADA  org  mF:    u*/mod
   (   30 )       AFE  org  mF:    um/mod
   (   31 )       B1E  org  mF:    m/mod
   (   32 )       B3C  org  mF:    ud/mod
   (   33 )       B8E  org  mF:    d/mod
   (   34 )       C04  org  mF:    d/
   (   35 )       C1A  org  mF:    f*
   (   36 )       C62  org  mF:    f/
   (   37 )       CAE  org  mF:    2!
   (   38 )       CF6  org  mF:    2@
   (   39 )       D40  org  mF:    du<
   (   40 )       D60  org  mF:    du>
   (   41 )       D80  org  mF:    d<
   (   42 )       DA0  org  mF:    d>
   (   43 )       DC0  org  mF:    d0<
   (   44 )       DDC  org  mF:    d0=
   (   45 )       E04  org  mF:    d<>
   (   46 )       E2A  org  mF:    d=
   (   47 )       E74  org  mF:    sp@
   (   48 )       E86  org  mF:    sp!
   (   49 )       E96  org  mF:    rp@
   (   50 )       EA8  org  mF:    rp!
   (   51 )       EB8  org  mF:    dup
   (   52 )       EDC  org  mF:    drop
   (   53 )       F08  org  mF:    ?dup
   (   54 )       F1E  org  mF:    swap
   (   55 )       F4A  org  mF:    nip
   (   56 )       F78  org  mF:    over
   (   57 )       FA0  org  mF:    tuck
   (   58 )       FC6  org  mF:    rot
   (   59 )       FFC  org  mF:    -rot
   (   60 )      1020  org  mF:    pick
   (   61 )      1032  org  mF:    depth
   (   62 )      104A  org  mF:    rdepth
   (   63 )      1066  org  mF:    >r
   (   64 )      109C  org  mF:    r>
   (   65 )      10D2  org  mF:    r@
   (   66 )      10F0  org  mF:    rdrop
   (   67 )      1114  org  mF:    rpick
   (   68 )      1128  org  mF:    roll
   (   69 )      1154  org  mF:    -roll
   (   70 )      1184  org  mF:    and
   (   71 )      119E  org  mF:    bic
   (   72 )      11BA  org  mF:    or
   (   73 )      11D4  org  mF:    xor
   (   74 )      11EE  org  mF:    *
   (   75 )      1206  org  mF:    clz
   (   76 )      123A  org  mF:    ror
   (   77 )      124A  org  mF:    rol
   (   78 )      125C  org  mF:    arshift
   (   79 )      1294  org  mF:    rshift
   (   80 )      12BE  org  mF:    lshift
   (   81 )      13F8  org  mF:    0=
   (   82 )      141E  org  mF:    0<>
   (   83 )      1446  org  mF:    0<
   (   84 )      146E  org  mF:    true
   (   85 )      1484  org  mF:    false
   (   86 )      1498  org  mF:    >=
   (   87 )      14BE  org  mF:    <=
   (   88 )      14E4  org  mF:    <
   (   89 )      1508  org  mF:    >
   (   90 )      152C  org  mF:    u>=
   (   91 )      1552  org  mF:    u<=
   (   92 )      1578  org  mF:    u<
   (   93 )      159C  org  mF:    u>
   (   94 )      15C0  org  mF:    <>
   (   95 )      15E2  org  mF:    =
   (   96 )      1742  org  mF:    min
   (   97 )      1760  org  mF:    max
   (   98 )      177E  org  mF:    umax
   (   99 )      179E  org  mF:    umin
   (  100 )      1824  org  mF:    move
   (  101 )      1862  org  mF:    fill
   (  102 )      1884  org  mF:    @
   (  103 )      18C6  org  mF:    !
   (  104 )      191E  org  mF:    +!
   (  105 )      1954  org  mF:    h@
   (  106 )      1998  org  mF:    h!
   (  107 )      19F2  org  mF:    h+!
   (  108 )      1A28  org  mF:    c@
   (  109 )      1A6C  org  mF:    c!
   (  110 )      1AC6  org  mF:    c+!
   (  111 )      1AFC  org  mF:    bis!
   (  112 )      1B3C  org  mF:    bic!
   (  113 )      1B7C  org  mF:    xor!
   (  114 )      1BBC  org  mF:    bit@
   (  115 )      1BF2  org  mF:    hbis!
   (  116 )      1C32  org  mF:    hbic!
   (  117 )      1C72  org  mF:    hxor!
   (  118 )      1CB2  org  mF:    hbit@
   (  119 )      1CE8  org  mF:    cbis!
   (  120 )      1D28  org  mF:    cbic!
   (  121 )      1D68  org  mF:    cxor!
   (  122 )      1DA8  org  mF:    cbit@
   (  123 )      1DDE  org  mF:    hflash!
   (  124 )      1E7A  org  mF:    flashpageerase
   (  125 )      1ECA  org  mF:    eraseflash
   (  126 )      1F4C  org  mF:    eraseflashfrom
   (  127 )      1F80  org  mF:    +
   (  128 )      1FB6  org  mF:    -
   (  129 )      205C  org  mF:    1-
   (  130 )      2074  org  mF:    1+
   (  131 )      208C  org  mF:    2-
   (  132 )      20A4  org  mF:    2+
   (  133 )      20BC  org  mF:    cell+
   (  134 )      20D6  org  mF:    negate
   (  135 )      2108  org  mF:    not
   (  136 )      2120  org  mF:    shr
   (  137 )      2138  org  mF:    shl
   (  138 )      2148  org  mF:    2*
   (  139 )      215E  org  mF:    cells
   (  140 )      2176  org  mF:    2/
   (  141 )      218E  org  mF:    abs
   (  142 )      21CE  org  mF:    u/mod
   (  143 )      21EC  org  mF:    /mod
   (  144 )      220A  org  mF:    mod
   (  145 )      221E  org  mF:    /
   (  146 )      225E  org  mF:    even
   (  147 )      2272  org  mF:    base
   (  148 )      228A  org  mF:    binary
   (  149 )      22A0  org  mF:    decimal
   (  150 )      22B6  org  mF:    hex
   (  151 )      2314  org  mF:    hook-emit
   (  152 )      2330  org  mF:    hook-key
   (  153 )      234C  org  mF:    hook-emit?
   (  154 )      236A  org  mF:    hook-key?
   (  155 )      2386  org  mF:    hook-pause
   (  156 )      23A4  org  mF:    emit
   (  157 )      23BA  org  mF:    key
   (  158 )      23CE  org  mF:    emit?
   (  159 )      23E0  org  mF:    key?
   (  160 )      23F2  org  mF:    pause
   (  161 )      2408  org  mF:    serial-emit
   (  162 )      242E  org  mF:    serial-key
   (  163 )      2456  org  mF:    serial-emit?
   (  164 )      2484  org  mF:    serial-key?
   (  165 )      24F4  org  mF:    cexpect
   (  166 )      2518  org  mF:    accept
   (  167 )      258E  org  mF:    tib
   (  168 )      25A0  org  mF:    >in
   (  169 )      25B6  org  mF:    current-source
   (  170 )      25DC  org  mF:    setsource
   (  171 )      25F8  org  mF:    source
   (  172 )      2616  org  mF:    query
   (  173 )      2650  org  mF:    compare
   (  174 )      269E  org  mF:    cr
   (  175 )      26B2  org  mF:    bl
   (  176 )      26C4  org  mF:    space
   (  177 )      26D8  org  mF:    spaces
   (  178 )      26F8  org  mF:    [char]
   (  179 )      2708  org  mF:    char

\  (  180 )      2720  org  mF:    ~       \    (
\  (  181 )      2730  org  mF:    `       \    \

   (  180 )      2720  org  mF:    (       modify
   (  181 )      2730  org  mF:    \       modify

   (  182 )      274A  org  mF:    ."
   (  183 )      278E  org  mF:    c"




\ https://mecrisp-stellaris-folkdoc.sourceforge.io/code-review.html

: bf! ( bits bf-offs a-addr mask -- )
  swap >r over lshift >r lshift r@ and r> r@ bic! r> bis! ;

%00 constant INPUT
%01 constant OUTPUT
%10 constant ALT-FUNCT
%11 constant ANALOG

: GPIOA_MODER_MODER12 24 $48000000 %11 ;   ( PA12 mode )

OUTPUT GPIOA_MODER_MODER12 bf!     ( PA12 --> OUTOUT --> LED1 Anode )
1 GPIOA_ODR_ODR12 bf!              ( LED1 --> ON )

